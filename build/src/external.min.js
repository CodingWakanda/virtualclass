/*
 Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(h){var f=0;return function(){return f<h.length?{done:!1,value:h[f++]}:{done:!0}}};$jscomp.arrayIterator=function(h){return{next:$jscomp.arrayIteratorImpl(h)}};$jscomp.makeIterator=function(h){var f="undefined"!=typeof Symbol&&Symbol.iterator&&h[Symbol.iterator];return f?f.call(h):$jscomp.arrayIterator(h)};
$jscomp.getGlobal=function(h){return"undefined"!=typeof window&&window===h?h:"undefined"!=typeof global&&null!=global?global:h};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(h,f,b){h!=Array.prototype&&h!=Object.prototype&&(h[f]=b.value)};
$jscomp.polyfill=function(h,f,b,e){if(f){b=$jscomp.global;h=h.split(".");for(e=0;e<h.length-1;e++){var d=h[e];d in b||(b[d]={});b=b[d]}h=h[h.length-1];e=b[h];f=f(e);f!=e&&null!=f&&$jscomp.defineProperty(b,h,{configurable:!0,writable:!0,value:f})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(h){function f(){this.batch_=null}function b(c){return c instanceof d?c:new d(function(a,d){a(c)})}if(h&&!$jscomp.FORCE_POLYFILL_PROMISE)return h;f.prototype.asyncExecute=function(c){if(null==this.batch_){this.batch_=[];var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})}this.batch_.push(c)};var e=$jscomp.global.setTimeout;f.prototype.asyncExecuteFunction=function(c){e(c,0)};f.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=
this.batch_;this.batch_=[];for(var a=0;a<c.length;++a){var d=c[a];c[a]=null;try{d()}catch(u){this.asyncThrow_(u)}}}this.batch_=null};f.prototype.asyncThrow_=function(c){this.asyncExecuteFunction(function(){throw c;})};var d=function(c){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{c(a.resolve,a.reject)}catch(l){a.reject(l)}};d.prototype.createResolveAndReject_=function(){function c(c){return function(b){d||(d=!0,c.call(a,b))}}var a=this,d=!1;
return{resolve:c(this.resolveTo_),reject:c(this.reject_)}};d.prototype.resolveTo_=function(c){if(c===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof d)this.settleSameAsPromise_(c);else{a:switch(typeof c){case "object":var a=null!=c;break a;case "function":a=!0;break a;default:a=!1}a?this.resolveToNonPromiseObj_(c):this.fulfill_(c)}};d.prototype.resolveToNonPromiseObj_=function(c){var a=void 0;try{a=c.then}catch(l){this.reject_(l);return}"function"==typeof a?
this.settleSameAsThenable_(a,c):this.fulfill_(c)};d.prototype.reject_=function(c){this.settle_(2,c)};d.prototype.fulfill_=function(c){this.settle_(1,c)};d.prototype.settle_=function(c,a){if(0!=this.state_)throw Error("Cannot settle("+c+", "+a+"): Promise already settled in state"+this.state_);this.state_=c;this.result_=a;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var c=0;c<this.onSettledCallbacks_.length;++c)k.asyncExecute(this.onSettledCallbacks_[c]);
this.onSettledCallbacks_=null}};var k=new f;d.prototype.settleSameAsPromise_=function(c){var a=this.createResolveAndReject_();c.callWhenSettled_(a.resolve,a.reject)};d.prototype.settleSameAsThenable_=function(c,a){var d=this.createResolveAndReject_();try{c.call(a,d.resolve,d.reject)}catch(u){d.reject(u)}};d.prototype.then=function(c,a){function b(a,c){return"function"==typeof a?function(c){try{k(a(c))}catch(x){e(x)}}:c}var k,e,f=new d(function(a,c){k=a;e=c});this.callWhenSettled_(b(c,k),b(a,e));return f};
d.prototype.catch=function(c){return this.then(void 0,c)};d.prototype.callWhenSettled_=function(c,a){function d(){switch(b.state_){case 1:c(b.result_);break;case 2:a(b.result_);break;default:throw Error("Unexpected state: "+b.state_);}}var b=this;null==this.onSettledCallbacks_?k.asyncExecute(d):this.onSettledCallbacks_.push(d)};d.resolve=b;d.reject=function(c){return new d(function(a,d){d(c)})};d.race=function(c){return new d(function(a,d){for(var k=$jscomp.makeIterator(c),l=k.next();!l.done;l=k.next())b(l.value).callWhenSettled_(a,
d)})};d.all=function(c){var a=$jscomp.makeIterator(c),k=a.next();return k.done?b([]):new d(function(c,d){function l(a){return function(d){e[a]=d;u--;0==u&&c(e)}}var e=[],u=0;do e.push(void 0),u++,b(k.value).callWhenSettled_(l(e.length-1),d),k=a.next();while(!k.done)})};return d},"es6","es3");$jscomp.findInternal=function(h,f,b){h instanceof String&&(h=String(h));for(var e=h.length,d=0;d<e;d++){var k=h[d];if(f.call(b,k,d,h))return{i:d,v:k}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(h){return h?h:function(f,b){return $jscomp.findInternal(this,f,b).v}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(h,f){this.$jscomp$symbol$id_=h;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:f})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function h(b){if(this instanceof h)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(b||"")+"_"+f++,b)}var f=0;return h}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var h=$jscomp.global.Symbol.iterator;h||(h=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[h]&&$jscomp.defineProperty(Array.prototype,h,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var h=$jscomp.global.Symbol.asyncIterator;h||(h=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(h){$jscomp.initSymbolIterator();h={next:h};h[$jscomp.global.Symbol.iterator]=function(){return this};return h};
$jscomp.iteratorFromArray=function(h,f){$jscomp.initSymbolIterator();h instanceof String&&(h+="");var b=0,e={next:function(){if(b<h.length){var d=b++;return{value:f(d,h[d]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.values",function(h){return h?h:function(){return $jscomp.iteratorFromArray(this,function(f,b){return b})}},"es8","es3");
$jscomp.polyfill("Array.prototype.keys",function(h){return h?h:function(){return $jscomp.iteratorFromArray(this,function(f){return f})}},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var h={a:!0},f={};try{return f.__proto__=h,f.a}catch(b){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(h,f){h.__proto__=f;if(h.__proto__!==f)throw new TypeError(h+" is not extensible");return h}:null;
$jscomp.polyfill("Object.setPrototypeOf",function(h){return h||$jscomp.setPrototypeOf},"es6","es5");$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(h){var f=function(){};f.prototype=h;return new f};
$jscomp.construct=function(){function h(){function b(){}new b;Reflect.construct(b,[],function(){});return new b instanceof b}if("undefined"!=typeof Reflect&&Reflect.construct){if(h())return Reflect.construct;var f=Reflect.construct;return function(b,e,d){b=f(b,e);d&&Reflect.setPrototypeOf(b,d.prototype);return b}}return function(b,e,d){void 0===d&&(d=b);d=$jscomp.objectCreate(d.prototype||Object.prototype);return Function.prototype.apply.call(b,d,e)||d}}();
$jscomp.polyfill("Reflect.construct",function(h){return $jscomp.construct},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var h={},f=Object.create(new $jscomp.global.Proxy(h,{get:function(b,e,d){return b==h&&"q"==e&&d==f}}));return!0===f.q}catch(b){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.owns=function(h,f){return Object.prototype.hasOwnProperty.call(h,f)};
$jscomp.polyfill("WeakMap",function(h){function f(){if(!h||!Object.seal)return!1;try{var a=Object.seal({}),c=Object.seal({}),d=new h([[a,2],[c,3]]);if(2!=d.get(a)||3!=d.get(c))return!1;d.delete(a);d.set(c,4);return!d.has(a)&&4==d.get(c)}catch(r){return!1}}function b(){}function e(a){if(!$jscomp.owns(a,k)){var c=new b;$jscomp.defineProperty(a,k,{value:c})}}function d(a){var c=Object[a];c&&(Object[a]=function(a){if(a instanceof b)return a;e(a);return c(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(h&&
$jscomp.ES6_CONFORMANCE)return h}else if(f())return h;var k="$jscomp_hidden_"+Math.random();d("freeze");d("preventExtensions");d("seal");var c=0,a=function(a){this.id_=(c+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var d;!(d=a.next()).done;)d=d.value,this.set(d[0],d[1])}};a.prototype.set=function(a,c){e(a);if(!$jscomp.owns(a,k))throw Error("WeakMap key fail: "+a);a[k][this.id_]=c;return this};a.prototype.get=function(a){return $jscomp.owns(a,k)?a[k][this.id_]:void 0};a.prototype.has=
function(a){return $jscomp.owns(a,k)&&$jscomp.owns(a[k],this.id_)};a.prototype.delete=function(a){return $jscomp.owns(a,k)&&$jscomp.owns(a[k],this.id_)?delete a[k][this.id_]:!1};return a},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(h){function f(){if($jscomp.ASSUME_NO_NATIVE_MAP||!h||"function"!=typeof h||!h.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),c=new h($jscomp.makeIterator([[a,"s"]]));if("s"!=c.get(a)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),b=d.next();if(b.done||b.value[0]!=a||"s"!=b.value[1])return!1;b=d.next();return b.done||4!=b.value[0].x||"t"!=b.value[1]||!d.next().done?!1:!0}catch(y){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(h&&$jscomp.ES6_CONFORMANCE)return h}else if(f())return h;$jscomp.initSymbolIterator();var b=new WeakMap,e=function(a){this.data_={};this.head_=c();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var d;!(d=a.next()).done;)d=d.value,this.set(d[0],d[1])}};e.prototype.set=function(a,c){a=0===a?0:a;var b=d(this,a);b.list||(b.list=this.data_[b.id]=[]);b.entry?b.entry.value=c:(b.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:c},b.list.push(b.entry),this.head_.previous.next=b.entry,this.head_.previous=b.entry,this.size++);return this};e.prototype.delete=function(a){a=d(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=c();this.size=0};e.prototype.has=function(a){return!!d(this,a).entry};
e.prototype.get=function(a){return(a=d(this,a).entry)&&a.value};e.prototype.entries=function(){return k(this,function(a){return[a.key,a.value]})};e.prototype.keys=function(){return k(this,function(a){return a.key})};e.prototype.values=function(){return k(this,function(a){return a.value})};e.prototype.forEach=function(a,c){for(var d=this.entries(),b;!(b=d.next()).done;)b=b.value,a.call(c,b[1],b[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var d=function(c,d){var k=d&&typeof d;"object"==
k||"function"==k?b.has(d)?k=b.get(d):(k=""+ ++a,b.set(d,k)):k="p_"+d;var e=c.data_[k];if(e&&$jscomp.owns(c.data_,k))for(c=0;c<e.length;c++){var l=e[c];if(d!==d&&l.key!==l.key||d===l.key)return{id:k,list:e,index:c,entry:l}}return{id:k,list:e,index:-1,entry:void 0}},k=function(a,c){var d=a.head_;return $jscomp.iteratorPrototype(function(){if(d){for(;d.head!=a.head_;)d=d.previous;for(;d.next!=d.head;)return d=d.next,{done:!1,value:c(d)};d=null}return{done:!0,value:void 0}})},c=function(){var a={};return a.previous=
a.next=a.head=a},a=0;return e},"es6","es3");$jscomp.polyfill("Array.prototype.fill",function(h){return h?h:function(f,b,e){var d=this.length||0;0>b&&(b=Math.max(0,d+b));if(null==e||e>d)e=d;e=Number(e);0>e&&(e=Math.max(0,d+e));for(b=Number(b||0);b<e;b++)this[b]=f;return this}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(h){return h?h:function(){return[]}},"es6","es5");
$jscomp.polyfill("Array.prototype.entries",function(h){return h?h:function(){return $jscomp.iteratorFromArray(this,function(f,b){return[f,b]})}},"es6","es3");$jscomp.polyfill("Number.isNaN",function(h){return h?h:function(f){return"number"===typeof f&&isNaN(f)}},"es6","es3");$jscomp.polyfill("Number.isFinite",function(h){return h?h:function(f){return"number"!==typeof f?!1:!isNaN(f)&&Infinity!==f&&-Infinity!==f}},"es6","es3");
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(h,f){for(var b=1;b<arguments.length;b++){var e=arguments[b];if(e)for(var d in e)$jscomp.owns(e,d)&&(h[d]=e[d])}return h};$jscomp.polyfill("Object.assign",function(h){return h||$jscomp.assign},"es6","es3");
(function(h,f){"object"===typeof exports&&"object"===typeof module?module.exports=f():"function"===typeof define&&define.amd?define([],f):"object"===typeof exports?exports.axios=f():h.axios=f()})(this,function(){return function(h){function f(e){if(b[e])return b[e].exports;var d=b[e]={exports:{},id:e,loaded:!1};h[e].call(d.exports,d,d.exports,f);d.loaded=!0;return d.exports}var b={};f.m=h;f.c=b;f.p="";return f(0)}([function(h,f,b){h.exports=b(1)},function(h,f,b){function e(a){a=new c(a);var b=k(c.prototype.request,
a);d.extend(b,c.prototype,a);d.extend(b,a);return b}var d=b(2),k=b(3),c=b(5),a=b(22);f=b(11);var l=e(f);l.Axios=c;l.create=function(c){return e(a(l.defaults,c))};l.Cancel=b(23);l.CancelToken=b(24);l.isCancel=b(10);l.all=function(a){return Promise.all(a)};l.spread=b(25);h.exports=l;h.exports.default=l},function(h,f,b){function e(a){return"[object Array]"===q.call(a)}function d(a){return null!==a&&"object"===typeof a}function k(a){return"[object Function]"===q.call(a)}function c(a,c){if(null!==a&&"undefined"!==
typeof a)if("object"!==typeof a&&(a=[a]),e(a))for(var d=0,b=a.length;d<b;d++)c.call(null,a[d],d,a);else for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&c.call(null,a[d],d,a)}function a(){function d(c,d){b[d]="object"===typeof b[d]&&"object"===typeof c?a(b[d],c):c}for(var b={},k=0,e=arguments.length;k<e;k++)c(arguments[k],d);return b}function l(){function a(a,c){d[c]="object"===typeof d[c]&&"object"===typeof a?l(d[c],a):"object"===typeof a?l({},a):a}for(var d={},b=0,k=arguments.length;b<k;b++)c(arguments[b],
a);return d}var u=b(3);f=b(4);var q=Object.prototype.toString;h.exports={isArray:e,isArrayBuffer:function(a){return"[object ArrayBuffer]"===q.call(a)},isBuffer:f,isFormData:function(a){return"undefined"!==typeof FormData&&a instanceof FormData},isArrayBufferView:function(a){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(a):a&&a.buffer&&a.buffer instanceof ArrayBuffer},isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a},isObject:d,
isUndefined:function(a){return"undefined"===typeof a},isDate:function(a){return"[object Date]"===q.call(a)},isFile:function(a){return"[object File]"===q.call(a)},isBlob:function(a){return"[object Blob]"===q.call(a)},isFunction:k,isStream:function(a){return d(a)&&k(a.pipe)},isURLSearchParams:function(a){return"undefined"!==typeof URLSearchParams&&a instanceof URLSearchParams},isStandardBrowserEnv:function(){return"undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&
"NS"!==navigator.product?"undefined"!==typeof window&&"undefined"!==typeof document:!1},forEach:c,merge:a,deepMerge:l,extend:function(a,d,b){c(d,function(c,d){a[d]=b&&"function"===typeof c?u(c,b):c});return a},trim:function(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(h,f){h.exports=function(b,e){return function(){for(var d=Array(arguments.length),k=0;k<d.length;k++)d[k]=arguments[k];return b.apply(e,d)}}},function(h,f){h.exports=function(b){return null!=b&&null!=b.constructor&&"function"===
typeof b.constructor.isBuffer&&b.constructor.isBuffer(b)}},function(h,f,b){function e(a){this.defaults=a;this.interceptors={request:new c,response:new c}}var d=b(2),k=b(6),c=b(7),a=b(8),l=b(22);e.prototype.request=function(c,d){"string"===typeof c?(c=d||{},c.url=c):c=c||{};c=l(this.defaults,c);c.method=c.method?c.method.toLowerCase():"get";var b=[a,void 0];c=Promise.resolve(c);this.interceptors.request.forEach(function(a){b.unshift(a.fulfilled,a.rejected)});for(this.interceptors.response.forEach(function(a){b.push(a.fulfilled,
a.rejected)});b.length;)c=c.then(b.shift(),b.shift());return c};e.prototype.getUri=function(a){a=l(this.defaults,a);return k(a.url,a.params,a.paramsSerializer).replace(/^\?/,"")};d.forEach(["delete","get","head","options"],function(a){e.prototype[a]=function(c,b){return this.request(d.merge(b||{},{method:a,url:c}))}});d.forEach(["post","put","patch"],function(a){e.prototype[a]=function(c,b,k){return this.request(d.merge(k||{},{method:a,url:c,data:b}))}});h.exports=e},function(h,f,b){function e(d){return encodeURIComponent(d).replace(/%40/gi,
"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var d=b(2);h.exports=function(b,c,a){if(!c)return b;if(a)c=a(c);else if(d.isURLSearchParams(c))c=c.toString();else{var k=[];d.forEach(c,function(a,c){null!==a&&"undefined"!==typeof a&&(d.isArray(a)?c+="[]":a=[a],d.forEach(a,function(a){d.isDate(a)?a=a.toISOString():d.isObject(a)&&(a=JSON.stringify(a));k.push(e(c)+"="+e(a))}))});c=k.join("&")}c&&(a=b.indexOf("#"),-1!==a&&
(b=b.slice(0,a)),b+=(-1===b.indexOf("?")?"?":"&")+c);return b}},function(h,f,b){function e(){this.handlers=[]}var d=b(2);e.prototype.use=function(d,c){this.handlers.push({fulfilled:d,rejected:c});return this.handlers.length-1};e.prototype.eject=function(d){this.handlers[d]&&(this.handlers[d]=null)};e.prototype.forEach=function(b){d.forEach(this.handlers,function(c){null!==c&&b(c)})};h.exports=e},function(h,f,b){var e=b(2),d=b(9),k=b(10),c=b(11),a=b(20),l=b(21);h.exports=function(b){b.cancelToken&&
b.cancelToken.throwIfRequested();b.baseURL&&!a(b.url)&&(b.url=l(b.baseURL,b.url));b.headers=b.headers||{};b.data=d(b.data,b.headers,b.transformRequest);b.headers=e.merge(b.headers.common||{},b.headers[b.method]||{},b.headers||{});e.forEach("delete get head post put patch common".split(" "),function(a){delete b.headers[a]});return(b.adapter||c.adapter)(b).then(function(a){b.cancelToken&&b.cancelToken.throwIfRequested();a.data=d(a.data,a.headers,b.transformResponse);return a},function(a){k(a)||(b.cancelToken&&
b.cancelToken.throwIfRequested(),a&&a.response&&(a.response.data=d(a.response.data,a.response.headers,b.transformResponse)));return Promise.reject(a)})}},function(h,f,b){var e=b(2);h.exports=function(d,b,c){e.forEach(c,function(a){d=a(d,b)});return d}},function(h,f){h.exports=function(b){return!(!b||!b.__CANCEL__)}},function(h,f,b){function e(a,c){!d.isUndefined(a)&&d.isUndefined(a["Content-Type"])&&(a["Content-Type"]=c)}var d=b(2),k=b(12),c={"Content-Type":"application/x-www-form-urlencoded"},a=
{adapter:function(){var a;"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process)?a=b(13):"undefined"!==typeof XMLHttpRequest&&(a=b(13));return a}(),transformRequest:[function(a,c){k(c,"Accept");k(c,"Content-Type");return d.isFormData(a)||d.isArrayBuffer(a)||d.isBuffer(a)||d.isStream(a)||d.isFile(a)||d.isBlob(a)?a:d.isArrayBufferView(a)?a.buffer:d.isURLSearchParams(a)?(e(c,"application/x-www-form-urlencoded;charset=utf-8"),a.toString()):d.isObject(a)?(e(c,"application/json;charset=utf-8"),
JSON.stringify(a)):a}],transformResponse:[function(a){if("string"===typeof a)try{a=JSON.parse(a)}catch(u){}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(a){return 200<=a&&300>a},headers:{common:{Accept:"application/json, text/plain, */*"}}};d.forEach(["delete","get","head"],function(c){a.headers[c]={}});d.forEach(["post","put","patch"],function(b){a.headers[b]=d.merge(c)});h.exports=a},function(h,f,b){var e=b(2);h.exports=
function(d,b){e.forEach(d,function(c,a){a!==b&&a.toUpperCase()===b.toUpperCase()&&(d[b]=c,delete d[a])})}},function(h,f,b){var e=b(2),d=b(14),k=b(6),c=b(17),a=b(18),l=b(15);h.exports=function(f){return new Promise(function(h,u){var q=f.data,r=f.headers;e.isFormData(q)&&delete r["Content-Type"];var p=new XMLHttpRequest;f.auth&&(r.Authorization="Basic "+btoa((f.auth.username||"")+":"+(f.auth.password||"")));p.open(f.method.toUpperCase(),k(f.url,f.params,f.paramsSerializer),!0);p.timeout=f.timeout;p.onreadystatechange=
function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var a="getAllResponseHeaders"in p?c(p.getAllResponseHeaders()):null;d(h,u,{data:f.responseType&&"text"!==f.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:a,config:f,request:p});p=null}};p.onabort=function(){p&&(u(l("Request aborted",f,"ECONNABORTED",p)),p=null)};p.onerror=function(){u(l("Network Error",f,null,p));p=null};p.ontimeout=function(){u(l("timeout of "+
f.timeout+"ms exceeded",f,"ECONNABORTED",p));p=null};if(e.isStandardBrowserEnv()){var x=b(19);(x=(f.withCredentials||a(f.url))&&f.xsrfCookieName?x.read(f.xsrfCookieName):void 0)&&(r[f.xsrfHeaderName]=x)}"setRequestHeader"in p&&e.forEach(r,function(a,c){"undefined"===typeof q&&"content-type"===c.toLowerCase()?delete r[c]:p.setRequestHeader(c,a)});f.withCredentials&&(p.withCredentials=!0);if(f.responseType)try{p.responseType=f.responseType}catch(t){if("json"!==f.responseType)throw t;}"function"===typeof f.onDownloadProgress&&
p.addEventListener("progress",f.onDownloadProgress);"function"===typeof f.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",f.onUploadProgress);f.cancelToken&&f.cancelToken.promise.then(function(a){p&&(p.abort(),u(a),p=null)});void 0===q&&(q=null);p.send(q)})}},function(h,f,b){var e=b(15);h.exports=function(d,b,c){var a=c.config.validateStatus;!a||a(c.status)?d(c):b(e("Request failed with status code "+c.status,c.config,null,c.request,c))}},function(h,f,b){var e=b(16);h.exports=function(d,
b,c,a,l){return e(Error(d),b,c,a,l)}},function(h,f){h.exports=function(b,e,d,k,c){b.config=e;d&&(b.code=d);b.request=k;b.response=c;b.isAxiosError=!0;b.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}};return b}},function(h,f,b){var e=b(2),d="age authorization content-length content-type etag expires from host if-modified-since if-unmodified-since last-modified location max-forwards proxy-authorization referer retry-after user-agent".split(" ");
h.exports=function(b){var c={},a,k,f;if(!b)return c;e.forEach(b.split("\n"),function(b){f=b.indexOf(":");a=e.trim(b.substr(0,f)).toLowerCase();k=e.trim(b.substr(f+1));!a||c[a]&&0<=d.indexOf(a)||(c[a]="set-cookie"===a?(c[a]?c[a]:[]).concat([k]):c[a]?c[a]+", "+k:k)});return c}},function(h,f,b){var e=b(2);h.exports=e.isStandardBrowserEnv()?function(){function d(a){b&&(c.setAttribute("href",a),a=c.href);c.setAttribute("href",a);return{href:c.href,protocol:c.protocol?c.protocol.replace(/:$/,""):"",host:c.host,
search:c.search?c.search.replace(/^\?/,""):"",hash:c.hash?c.hash.replace(/^#/,""):"",hostname:c.hostname,port:c.port,pathname:"/"===c.pathname.charAt(0)?c.pathname:"/"+c.pathname}}var b=/(msie|trident)/i.test(navigator.userAgent),c=document.createElement("a");var a=d(window.location.href);return function(c){c=e.isString(c)?d(c):c;return c.protocol===a.protocol&&c.host===a.host}}():function(){return function(){return!0}}()},function(h,f,b){var e=b(2);h.exports=e.isStandardBrowserEnv()?function(){return{write:function(d,
b,c,a,l,f){var k=[];k.push(d+"="+encodeURIComponent(b));e.isNumber(c)&&k.push("expires="+(new Date(c)).toGMTString());e.isString(a)&&k.push("path="+a);e.isString(l)&&k.push("domain="+l);!0===f&&k.push("secure");document.cookie=k.join("; ")},read:function(d){return(d=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)")))?decodeURIComponent(d[3]):null},remove:function(d){this.write(d,"",Date.now()-864E5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},
function(h,f){h.exports=function(b){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(b)}},function(h,f){h.exports=function(b,e){return e?b.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):b}},function(h,f,b){var e=b(2);h.exports=function(d,b){b=b||{};var c={};e.forEach(["url","method","params","data"],function(a){"undefined"!==typeof b[a]&&(c[a]=b[a])});e.forEach(["headers","auth","proxy"],function(a){e.isObject(b[a])?c[a]=e.deepMerge(d[a],b[a]):"undefined"!==typeof b[a]?c[a]=b[a]:e.isObject(d[a])?c[a]=e.deepMerge(d[a]):
"undefined"!==typeof d[a]&&(c[a]=d[a])});e.forEach("baseURL transformRequest transformResponse paramsSerializer timeout withCredentials adapter responseType xsrfCookieName xsrfHeaderName onUploadProgress onDownloadProgress maxContentLength validateStatus maxRedirects httpAgent httpsAgent cancelToken socketPath".split(" "),function(a){"undefined"!==typeof b[a]?c[a]=b[a]:"undefined"!==typeof d[a]&&(c[a]=d[a])});return c}},function(h,f){function b(b){this.message=b}b.prototype.toString=function(){return"Cancel"+
(this.message?": "+this.message:"")};b.prototype.__CANCEL__=!0;h.exports=b},function(h,f,b){function e(b){if("function"!==typeof b)throw new TypeError("executor must be a function.");var c;this.promise=new Promise(function(a){c=a});var a=this;b(function(b){a.reason||(a.reason=new d(b),c(a.reason))})}var d=b(23);e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason;};e.source=function(){var d;return{token:new e(function(c){d=c}),cancel:d}};h.exports=e},function(h,f){h.exports=function(b){return function(e){return b.apply(null,
e)}}}])});/*
 jQuery JavaScript Library v1.12.4
 http://jquery.com/

 Includes Sizzle.js
 http://sizzlejs.com/

 Copyright jQuery Foundation and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: 2016-05-20T17:17Z
 Sizzle CSS Selector Engine v2.2.1
 http://sizzlejs.com/

 Copyright jQuery Foundation and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: 2015-10-17
*/
(function(h,f){"object"===typeof module&&"object"===typeof module.exports?module.exports=h.document?f(h,!0):function(b){if(!b.document)throw Error("jQuery requires a window with a document");return f(b)}:f(h)})("undefined"!==typeof window?window:this,function(h,f){function b(a){var c=!!a&&"length"in a&&a.length,g=v.type(a);return"function"===g||v.isWindow(a)?!1:"array"===g||0===c||"number"===typeof c&&0<c&&c-1 in a}function e(a,c,g){if(v.isFunction(c))return v.grep(a,function(a,d){return!!c.call(a,
d,a)!==g});if(c.nodeType)return v.grep(a,function(a){return a===c!==g});if("string"===typeof c){if(za.test(c))return v.filter(c,a,g);c=v.filter(c,a)}return v.grep(a,function(a){return-1<v.inArray(a,c)!==g})}function d(a,c){do a=a[c];while(a&&1!==a.nodeType);return a}function k(a){var c={};v.each(a.match(gb)||[],function(a,g){c[g]=!0});return c}function c(){W.addEventListener?(W.removeEventListener("DOMContentLoaded",a),h.removeEventListener("load",a)):(W.detachEvent("onreadystatechange",a),h.detachEvent("onload",
a))}function a(){if(W.addEventListener||"load"===h.event.type||"complete"===W.readyState)c(),v.ready()}function l(a,c,g){if(void 0===g&&1===a.nodeType)if(g="data-"+c.replace(ob,"-$1").toLowerCase(),g=a.getAttribute(g),"string"===typeof g){try{g="true"===g?!0:"false"===g?!1:"null"===g?null:+g+""===g?+g:jd.test(g)?v.parseJSON(g):g}catch(Ub){}v.data(a,c,g)}else g=void 0;return g}function u(a){for(var c in a)if(("data"!==c||!v.isEmptyObject(a[c]))&&"toJSON"!==c)return!1;return!0}function q(a,c,g,d){if(kd(a)){var b=
v.expando,m=a.nodeType,k=m?v.cache:a,e=m?a[b]:a[b]&&b;if(e&&k[e]&&(d||k[e].data)||void 0!==g||"string"!==typeof c){e||(e=m?a[b]=la.pop()||v.guid++:b);k[e]||(k[e]=m?{}:{toJSON:v.noop});if("object"===typeof c||"function"===typeof c)d?k[e]=v.extend(k[e],c):k[e].data=v.extend(k[e].data,c);a=k[e];d||(a.data||(a.data={}),a=a.data);void 0!==g&&(a[v.camelCase(c)]=g);"string"===typeof c?(g=a[c],null==g&&(g=a[v.camelCase(c)])):g=a;return g}}}function r(a,c,g){if(kd(a)){var d,b,m=a.nodeType,k=m?v.cache:a,e=
m?a[v.expando]:v.expando;if(k[e]){if(c&&(d=g?k[e]:k[e].data)){v.isArray(c)?c=c.concat(v.map(c,v.camelCase)):c in d?c=[c]:(c=v.camelCase(c),c=c in d?[c]:c.split(" "));for(b=c.length;b--;)delete d[c[b]];if(g?!u(d):!v.isEmptyObject(d))return}if(!g&&(delete k[e].data,!u(k[e])))return;m?v.cleanData([a],!0):N.deleteExpando||k!=k.window?delete k[e]:k[e]=void 0}}}function y(a,c,g,d){var b=1,m=20,k=d?function(){return d.cur()}:function(){return v.css(a,c,"")},e=k(),l=g&&g[3]||(v.cssNumber[c]?"":"px"),f=(v.cssNumber[c]||
"px"!==l&&+e)&&Zb.exec(v.css(a,c));if(f&&f[3]!==l){l=l||f[3];g=g||[];f=+e||1;do b=b||".5",f/=b,v.style(a,c,f+l);while(b!==(b=k()/e)&&1!==b&&--m)}if(g){f=+f||+e||0;var h=g[1]?f+(g[1]+1)*g[2]:+g[2];d&&(d.unit=l,d.start=f,d.end=h)}return h}function z(a){var c="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video".split(" ");a=a.createDocumentFragment();if(a.createElement)for(;c.length;)a.createElement(c.pop());
return a}function p(a,c){var g,d,b=0,m="undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName(c||"*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll(c||"*"):void 0;if(!m)for(m=[],g=a.childNodes||a;null!=(d=g[b]);b++)!c||v.nodeName(d,c)?m.push(d):v.merge(m,p(d,c));return void 0===c||c&&v.nodeName(a,c)?v.merge([a],m):m}function x(a,c){for(var g,d=0;null!=(g=a[d]);d++)v._data(g,"globalEval",!c||v._data(c[d],"globalEval"))}function t(a){Xa.test(a.type)&&(a.defaultChecked=a.checked)}
function B(a,c,g,d,b){for(var m,k,e,l,f,h,u=a.length,A=z(c),q=[],r=0;r<u;r++)if((k=a[r])||0===k)if("object"===v.type(k))v.merge(q,k.nodeType?[k]:k);else if(Je.test(k)){e=e||A.appendChild(c.createElement("div"));l=($b.exec(k)||["",""])[1].toLowerCase();h=lb[l]||lb._default;e.innerHTML=h[1]+v.htmlPrefilter(k)+h[2];for(m=h[0];m--;)e=e.lastChild;!N.leadingWhitespace&&jf.test(k)&&q.push(c.createTextNode(jf.exec(k)[0]));if(!N.tbody)for(m=(k="table"!==l||ie.test(k)?"<table>"!==h[1]||ie.test(k)?0:e:e.firstChild)&&
k.childNodes.length;m--;)v.nodeName(f=k.childNodes[m],"tbody")&&!f.childNodes.length&&k.removeChild(f);v.merge(q,e.childNodes);for(e.textContent="";e.firstChild;)e.removeChild(e.firstChild);e=A.lastChild}else q.push(c.createTextNode(k));e&&A.removeChild(e);N.appendChecked||v.grep(p(q,"input"),t);for(r=0;k=q[r++];)if(d&&-1<v.inArray(k,d))b&&b.push(k);else if(a=v.contains(k.ownerDocument,k),e=p(A.appendChild(k),"script"),a&&x(e),g)for(m=0;k=e[m++];)gc.test(k.type||"")&&g.push(k);return A}function C(){return!0}
function F(){return!1}function H(){try{return W.activeElement}catch(Kb){}}function G(a,c,g,d,b,m){var k;if("object"===typeof c){"string"!==typeof g&&(d=d||g,g=void 0);for(k in c)G(a,k,g,d,c[k],m);return a}null==d&&null==b?(b=g,d=g=void 0):null==b&&("string"===typeof g?(b=d,d=void 0):(b=d,d=g,g=void 0));if(!1===b)b=F;else if(!b)return a;if(1===m){var e=b;b=function(a){v().off(a);return e.apply(this,arguments)};b.guid=e.guid||(e.guid=v.guid++)}return a.each(function(){v.event.add(this,c,b,d,g)})}function E(a,
c){return v.nodeName(a,"table")&&v.nodeName(11!==c.nodeType?c:c.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function K(a){a.type=(null!==v.find.attr(a,"type"))+"/"+a.type;return a}function g(a){var c=Uf.exec(a.type);c?a.type=c[1]:a.removeAttribute("type");return a}function m(a,c){if(1===c.nodeType&&v.hasData(a)){var g,d;var b=v._data(a);a=v._data(c,b);var m=b.events;if(m)for(g in delete a.handle,a.events={},m)for(b=0,d=m[g].length;b<
d;b++)v.event.add(c,g,m[g][b]);a.data&&(a.data=v.extend({},a.data))}}function A(a,c,d,b){c=Pa.apply([],c);var m,k=0,e=a.length,l=e-1,f=c[0],h=v.isFunction(f);if(h||1<e&&"string"===typeof f&&!N.checkClone&&Ke.test(f))return a.each(function(g){var m=a.eq(g);h&&(c[0]=f.call(this,g,m.html()));A(m,c,d,b)});if(e){var u=B(c,a[0].ownerDocument,!1,a,b);var q=u.firstChild;1===u.childNodes.length&&(u=q);if(q||b){var t=v.map(p(u,"script"),K);for(m=t.length;k<e;k++)q=u,k!==l&&(q=v.clone(q,!0,!0),m&&v.merge(t,
p(q,"script"))),d.call(a[k],q,k);if(m)for(u=t[t.length-1].ownerDocument,v.map(t,g),k=0;k<m;k++)q=t[k],gc.test(q.type||"")&&!v._data(q,"globalEval")&&v.contains(u,q)&&(q.src?v._evalUrl&&v._evalUrl(q.src):v.globalEval((q.text||q.textContent||q.innerHTML||"").replace(je,"")));u=q=null}}return a}function M(a,c,g){for(var d=c?v.filter(c,a):a,b=0;null!=(c=d[b]);b++)g||1!==c.nodeType||v.cleanData(p(c)),c.parentNode&&(g&&v.contains(c.ownerDocument,c)&&x(p(c,"script")),c.parentNode.removeChild(c));return a}
function L(a,c){a=v(c.createElement(a)).appendTo(c.body);c=v.css(a[0],"display");a.detach();return c}function Q(a){var c=W,g=xa[a];g||(g=L(a,c),"none"!==g&&g||(Cc=(Cc||v("<iframe frameborder='0' width='0' height='0'/>")).appendTo(c.documentElement),c=(Cc[0].contentWindow||Cc[0].contentDocument).document,c.write(),c.close(),g=L(a,c),Cc.detach()),xa[a]=g);return g}function ia(a,c){return{get:function(){if(a())delete this.get;else return(this.get=c).apply(this,arguments)}}}function V(a){if(a in Le)return a;
for(var c=a.charAt(0).toUpperCase()+a.slice(1),g=Me.length;g--;)if(a=Me[g]+c,a in Le)return a}function Aa(a,c){for(var g,d,b,m=[],k=0,e=a.length;k<e;k++)d=a[k],d.style&&(m[k]=v._data(d,"olddisplay"),g=d.style.display,c?(m[k]||"none"!==g||(d.style.display=""),""===d.style.display&&Vb(d)&&(m[k]=v._data(d,"olddisplay",Q(d.nodeName)))):(b=Vb(d),(g&&"none"!==g||!b)&&v._data(d,"olddisplay",b?g:v.css(d,"display"))));for(k=0;k<e;k++)d=a[k],!d.style||c&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=
c?m[k]||"":"none");return a}function U(a,c,g){return(a=rc.exec(c))?Math.max(0,a[1]-(g||0))+(a[2]||"px"):c}function X(a,c,g,d,b){c=g===(d?"border":"content")?4:"width"===c?1:0;for(var m=0;4>c;c+=2)"margin"===g&&(m+=v.css(a,g+tb[c],!0,b)),d?("content"===g&&(m-=v.css(a,"padding"+tb[c],!0,b)),"margin"!==g&&(m-=v.css(a,"border"+tb[c]+"Width",!0,b))):(m+=v.css(a,"padding"+tb[c],!0,b),"padding"!==g&&(m+=v.css(a,"border"+tb[c]+"Width",!0,b)));return m}function da(a,c,g){var d=!0,b="width"===c?a.offsetWidth:
a.offsetHeight,m=ac(a),k=N.boxSizing&&"border-box"===v.css(a,"boxSizing",!1,m);if(0>=b||null==b){b=bc(a,c,m);if(0>b||null==b)b=a.style[c];if(pb.test(b))return b;d=k&&(N.boxSizingReliable()||b===a.style[c]);b=parseFloat(b)||0}return b+X(a,c,g||(k?"border":"content"),d,m)+"px"}function R(a,c,g,d,b){return new R.prototype.init(a,c,g,d,b)}function Z(){h.setTimeout(function(){Wb=void 0});return Wb=v.now()}function sa(a,c){var g={height:a},d=0;for(c=c?1:0;4>d;d+=2-c){var b=tb[d];g["margin"+b]=g["padding"+
b]=a}c&&(g.opacity=g.width=a);return g}function qa(a,c,g){for(var d,b=(ea.tweeners[c]||[]).concat(ea.tweeners["*"]),m=0,k=b.length;m<k;m++)if(d=b[m].call(g,c,a))return d}function ma(a,c){var g,d;for(g in a){var b=v.camelCase(g);var m=c[b];var k=a[g];v.isArray(k)&&(m=k[1],k=a[g]=k[0]);g!==b&&(a[b]=k,delete a[g]);if((d=v.cssHooks[b])&&"expand"in d)for(g in k=d.expand(k),delete a[b],k)g in a||(a[g]=k[g],c[g]=m);else c[b]=m}}function ea(a,c,g){var d,b=0,m=ea.prefilters.length,k=v.Deferred().always(function(){delete e.elem}),
e=function(){if(d)return!1;var c=Wb||Z();c=Math.max(0,l.startTime+l.duration-c);for(var g=1-(c/l.duration||0),b=0,m=l.tweens.length;b<m;b++)l.tweens[b].run(g);k.notifyWith(a,[l,g,c]);if(1>g&&m)return c;k.resolveWith(a,[l]);return!1},l=k.promise({elem:a,props:v.extend({},c),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},g),originalProperties:c,originalOptions:g,startTime:Wb||Z(),duration:g.duration,tweens:[],createTween:function(c,g){c=v.Tween(a,l.opts,c,g,l.opts.specialEasing[c]||l.opts.easing);
l.tweens.push(c);return c},stop:function(c){var g=0,b=c?l.tweens.length:0;if(d)return this;for(d=!0;g<b;g++)l.tweens[g].run(1);c?(k.notifyWith(a,[l,1,0]),k.resolveWith(a,[l,c])):k.rejectWith(a,[l,c]);return this}});g=l.props;for(ma(g,l.opts.specialEasing);b<m;b++)if(c=ea.prefilters[b].call(l,a,g,l.opts))return v.isFunction(c.stop)&&(v._queueHooks(l.elem,l.opts.queue).stop=v.proxy(c.stop,c)),c;v.map(g,qa,l);v.isFunction(l.opts.start)&&l.opts.start.call(a,l);v.fx.timer(v.extend(e,{elem:a,anim:l,queue:l.opts.queue}));
return l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function Ya(a){return v.attr(a,"class")||""}function Va(a){return function(c,g){"string"!==typeof c&&(g=c,c="*");var d=0,b=c.toLowerCase().match(gb)||[];if(v.isFunction(g))for(;c=b[d++];)"+"===c.charAt(0)?(c=c.slice(1)||"*",(a[c]=a[c]||[]).unshift(g)):(a[c]=a[c]||[]).push(g)}}function ub(a,c,g,d){function b(e){var l;m[e]=!0;v.each(a[e]||[],function(a,e){a=e(c,g,d);if("string"===typeof a&&!k&&
!m[a])return c.dataTypes.unshift(a),b(a),!1;if(k)return!(l=a)});return l}var m={},k=a===Ne;return b(c.dataTypes[0])||!m["*"]&&b("*")}function Za(a,c){var g,d,b=v.ajaxSettings.flatOptions||{};for(d in c)void 0!==c[d]&&((b[d]?a:g||(g={}))[d]=c[d]);g&&v.extend(!0,a,g);return a}function Ba(a){if(!v.contains(a.ownerDocument||W,a))return!0;for(;a&&1===a.nodeType;){if("none"===(a.style&&a.style.display||v.css(a,"display"))||"hidden"===a.type)return!0;a=a.parentNode}return!1}function Ma(a,c,g,d){var b;if(v.isArray(c))v.each(c,
function(c,b){g||Oe.test(a)?d(a,b):Ma(a+"["+("object"===typeof b&&null!=b?c:"")+"]",b,g,d)});else if(g||"object"!==v.type(c))d(a,c);else for(b in c)Ma(a+"["+b+"]",c[b],g,d)}function Ea(){try{return new h.XMLHttpRequest}catch(Kb){}}function Qa(){try{return new h.ActiveXObject("Microsoft.XMLHTTP")}catch(Kb){}}function Ha(a){return v.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var la=[],W=h.document,ya=la.slice,Pa=la.concat,va=la.push,Ka=la.indexOf,ta={},qb=ta.toString,cb=ta.hasOwnProperty,
N={},v=function(a,c){return new v.fn.init(a,c)},Ca=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ca=/^-ms-/,Ra=/-([\da-z])/gi,hc=function(a,c){return c.toUpperCase()};v.fn=v.prototype={jquery:"1.12.4",constructor:v,selector:"",length:0,toArray:function(){return ya.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:ya.call(this)},pushStack:function(a){a=v.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},each:function(a){return v.each(this,a)},map:function(a){return this.pushStack(v.map(this,
function(c,g){return a.call(c,g,c)}))},slice:function(){return this.pushStack(ya.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var c=this.length;a=+a+(0>a?c:0);return this.pushStack(0<=a&&a<c?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:va,sort:la.sort,splice:la.splice};v.extend=v.fn.extend=function(){var a,c,g,d=arguments[0]||{},b=1,m=arguments.length,k=!1;"boolean"===typeof d&&(k=d,d=arguments[b]||
{},b++);"object"===typeof d||v.isFunction(d)||(d={});b===m&&(d=this,b--);for(;b<m;b++)if(null!=(g=arguments[b]))for(c in g){var e=d[c];var l=g[c];d!==l&&(k&&l&&(v.isPlainObject(l)||(a=v.isArray(l)))?(a?(a=!1,e=e&&v.isArray(e)?e:[]):e=e&&v.isPlainObject(e)?e:{},d[c]=v.extend(k,e,l)):void 0!==l&&(d[c]=l))}return d};v.extend({expando:"jQuery"+("1.12.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isFunction:function(a){return"function"===v.type(a)},
isArray:Array.isArray||function(a){return"array"===v.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){var c=a&&a.toString();return!v.isArray(a)&&0<=c-parseFloat(c)+1},isEmptyObject:function(a){for(var c in a)return!1;return!0},isPlainObject:function(a){var c;if(!a||"object"!==v.type(a)||a.nodeType||v.isWindow(a))return!1;try{if(a.constructor&&!cb.call(a,"constructor")&&!cb.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(He){return!1}if(!N.ownFirst)for(c in a)return cb.call(a,
c);for(c in a);return void 0===c||cb.call(a,c)},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?ta[qb.call(a)]||"object":typeof a},globalEval:function(a){a&&v.trim(a)&&(h.execScript||function(a){h.eval.call(h,a)})(a)},camelCase:function(a){return a.replace(ca,"ms-").replace(Ra,hc)},nodeName:function(a,c){return a.nodeName&&a.nodeName.toLowerCase()===c.toLowerCase()},each:function(a,c){var g,d=0;if(b(a))for(g=a.length;d<g&&!1!==c.call(a[d],d,a[d]);d++);else for(d in a)if(!1===
c.call(a[d],d,a[d]))break;return a},trim:function(a){return null==a?"":(a+"").replace(Ca,"")},makeArray:function(a,c){c=c||[];null!=a&&(b(Object(a))?v.merge(c,"string"===typeof a?[a]:a):va.call(c,a));return c},inArray:function(a,c,g){if(c){if(Ka)return Ka.call(c,a,g);var d=c.length;for(g=g?0>g?Math.max(0,d+g):g:0;g<d;g++)if(g in c&&c[g]===a)return g}return-1},merge:function(a,c){for(var g=+c.length,d=0,b=a.length;d<g;)a[b++]=c[d++];if(g!==g)for(;void 0!==c[d];)a[b++]=c[d++];a.length=b;return a},grep:function(a,
c,g){for(var d=[],b=0,m=a.length,k=!g;b<m;b++)g=!c(a[b],b),g!==k&&d.push(a[b]);return d},map:function(a,c,g){var d,m=0,k=[];if(b(a))for(d=a.length;m<d;m++){var e=c(a[m],m,g);null!=e&&k.push(e)}else for(m in a)e=c(a[m],m,g),null!=e&&k.push(e);return Pa.apply([],k)},guid:1,proxy:function(a,c){if("string"===typeof c){var g=a[c];c=a;a=g}if(v.isFunction(a)){var d=ya.call(arguments,2);g=function(){return a.apply(c||this,d.concat(ya.call(arguments)))};g.guid=a.guid=a.guid||v.guid++;return g}},now:function(){return+new Date},
support:N});"function"===typeof Symbol&&(v.fn[Symbol.iterator]=la[Symbol.iterator]);v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,c){ta["[object "+c+"]"]=c.toLowerCase()});var oa=function(a){function c(a,c,g,d){var b,m,k,e,l=c&&c.ownerDocument,f=c?c.nodeType:9;g=g||[];if("string"!==typeof a||!a||1!==f&&9!==f&&11!==f)return g;if(!d&&((c?c.ownerDocument||c:X)!==C&&ra(c),c=c||C,E)){if(11!==f&&(e=Ya.exec(a)))if(b=e[1])if(9===f)if(m=c.getElementById(b)){if(m.id===
b)return g.push(m),g}else return g;else{if(l&&(m=l.getElementById(b))&&G(c,m)&&m.id===b)return g.push(m),g}else{if(e[2])return La.apply(g,c.getElementsByTagName(a)),g;if((b=e[3])&&J.getElementsByClassName&&c.getElementsByClassName)return La.apply(g,c.getElementsByClassName(b)),g}if(!(!J.qsa||Aa[a+" "]||Q&&Q.test(a))){if(1!==f){l=c;var u=a}else if("object"!==c.nodeName.toLowerCase()){(k=c.getAttribute("id"))?k=k.replace(W,"\\$&"):c.setAttribute("id",k=V);e=ta(a);b=e.length;for(m=sa.test(k)?"#"+k:"[id='"+
k+"']";b--;)e[b]=m+" "+A(e[b]);u=e.join(",");l=za.test(a)&&h(c.parentNode)||c}if(u)try{return La.apply(g,l.querySelectorAll(u)),g}catch(Dc){}finally{k===V&&c.removeAttribute("id")}}}return gb(a.replace(ya,"$1"),c,g,d)}function g(){function a(g,d){c.push(g+" ")>N.cacheLength&&delete a[c.shift()];return a[g+" "]=d}var c=[];return a}function d(a){a[V]=!0;return a}function b(a){var c=C.createElement("div");try{return!!a(c)}catch(le){return!1}finally{c.parentNode&&c.parentNode.removeChild(c)}}function m(a,
c){a=a.split("|");for(var g=a.length;g--;)N.attrHandle[a[g]]=c}function k(a,c){var g=c&&a,d=g&&1===a.nodeType&&1===c.nodeType&&(~c.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(d)return d;if(g)for(;g=g.nextSibling;)if(g===c)return-1;return a?1:-1}function e(a){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===a}}function l(a){return function(c){var g=c.nodeName.toLowerCase();return("input"===g||"button"===g)&&c.type===a}}function f(a){return d(function(c){c=+c;return d(function(g,
d){for(var b,m=a([],g.length,c),k=m.length;k--;)g[b=m[k]]&&(g[b]=!(d[b]=g[b]))})})}function h(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function u(){}function A(a){for(var c=0,g=a.length,d="";c<g;c++)d+=a[c].value;return d}function q(a,c,g){var d=c.dir,b=g&&"parentNode"===d,m=v++;return c.first?function(c,g,m){for(;c=c[d];)if(1===c.nodeType||b)return a(c,g,m)}:function(c,g,k){var e,l=[da,m];if(k)for(;c=c[d];){if((1===c.nodeType||b)&&a(c,g,k))return!0}else for(;c=c[d];)if(1===c.nodeType||
b){var f=c[V]||(c[V]={});f=f[c.uniqueID]||(f[c.uniqueID]={});if((e=f[d])&&e[0]===da&&e[1]===m)return l[2]=e[2];f[d]=l;if(l[2]=a(c,g,k))return!0}}}function t(a){return 1<a.length?function(c,g,d){for(var b=a.length;b--;)if(!a[b](c,g,d))return!1;return!0}:a[0]}function r(a,c,g,d,b){for(var m,k=[],e=0,l=a.length,f=null!=c;e<l;e++)if(m=a[e])if(!g||g(m,d,b))k.push(m),f&&c.push(e);return k}function y(a,g,b,m,k,e){m&&!m[V]&&(m=y(m));k&&!k[V]&&(k=y(k,e));return d(function(d,e,l,f){var h,u=[],A=[],q=e.length,
t;if(!(t=d)){t=g||"*";for(var y=l.nodeType?[l]:l,p=[],z=0,x=y.length;z<x;z++)c(t,y[z],p);t=p}t=!a||!d&&g?t:r(t,u,a,l,f);y=b?k||(d?a:q||m)?[]:e:t;b&&b(t,y,l,f);if(m){var B=r(y,A);m(B,[],l,f);for(l=B.length;l--;)if(h=B[l])y[A[l]]=!(t[A[l]]=h)}if(d){if(k||a){if(k){B=[];for(l=y.length;l--;)(h=y[l])&&B.push(t[l]=h);k(null,y=[],B,f)}for(l=y.length;l--;)(h=y[l])&&-1<(B=k?Ma(d,h):u[l])&&(d[B]=!(e[B]=h))}}else y=r(y===e?y.splice(q,y.length):y),k?k(null,e,y,f):La.apply(e,y)})}function p(a){var c,g,d=a.length,
b=N.relative[a[0].type];var m=b||N.relative[" "];for(var k=b?1:0,e=q(function(a){return a===c},m,!0),l=q(function(a){return-1<Ma(c,a)},m,!0),f=[function(a,g,d){a=!b&&(d||g!==M)||((c=g).nodeType?e(a,g,d):l(a,g,d));c=null;return a}];k<d;k++)if(m=N.relative[a[k].type])f=[q(t(f),m)];else{m=N.filter[a[k].type].apply(null,a[k].matches);if(m[V]){for(g=++k;g<d&&!N.relative[a[g].type];g++);return y(1<k&&t(f),1<k&&A(a.slice(0,k-1).concat({value:" "===a[k-2].type?"*":""})).replace(ya,"$1"),m,k<g&&p(a.slice(k,
g)),g<d&&p(a=a.slice(g)),g<d&&A(a))}f.push(m)}return t(f)}function z(a,g){var b=0<g.length,m=0<a.length,k=function(d,k,e,l,f){var h,u,A=0,q="0",t=d&&[],y=[],p=M,z=d||m&&N.find.TAG("*",f),x=da+=null==p?1:Math.random()||.1,B=z.length;for(f&&(M=k===C||k||f);q!==B&&null!=(h=z[q]);q++){if(m&&h){var L=0;k||h.ownerDocument===C||(ra(h),e=!E);for(;u=a[L++];)if(u(h,k||C,e)){l.push(h);break}f&&(da=x)}b&&((h=!u&&h)&&A--,d&&t.push(h))}A+=q;if(b&&q!==A){for(L=0;u=g[L++];)u(t,y,k,e);if(d){if(0<A)for(;q--;)t[q]||
y[q]||(y[q]=ba.call(l));y=r(y)}La.apply(l,y);f&&!d&&0<y.length&&1<A+g.length&&c.uniqueSort(l)}f&&(da=x,M=p);return t};return b?d(k):k}var x,M,B,L,C,F,E,Q,H,Kb,G,V="sizzle"+1*new Date,X=a.document,da=0,v=0,K=g(),ia=g(),Aa=g(),oa=function(a,c){a===c&&(L=!0);return 0},R={}.hasOwnProperty,U=[],ba=U.pop,qa=U.push,La=U.push,Z=U.slice,Ma=function(a,c){for(var g=0,d=a.length;g<d;g++)if(a[g]===c)return g;return-1},Ba=/[\x20\t\r\n\f]+/g,ya=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Wc=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,
va=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ma=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,ea=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,sa=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,Pb={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,
TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},Ea=/^(?:input|select|textarea|button)$/i,Pa=/^h\d$/i,Ka=
/^[^{]+\{\s*\[native \w/,Ya=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,za=/[+~]/,W=/'|\\/g,Qa=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,la=function(a,c,g){a="0x"+c-65536;return a!==a||g?c:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)},Va=function(){ra()};try{La.apply(U=Z.call(X.childNodes),X.childNodes),U[X.childNodes.length].nodeType}catch(ke){La={apply:U.length?function(a,c){qa.apply(a,Z.call(c))}:function(a,c){for(var g=a.length,d=0;a[g++]=c[d++];);a.length=
g-1}}}var J=c.support={};var Ha=c.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};var ra=c.setDocument=function(a){var c;a=a?a.ownerDocument||a:X;if(a===C||9!==a.nodeType||!a.documentElement)return C;C=a;F=C.documentElement;E=!Ha(C);(c=C.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",Va,!1):c.attachEvent&&c.attachEvent("onunload",Va));J.attributes=b(function(a){a.className="i";return!a.getAttribute("className")});J.getElementsByTagName=
b(function(a){a.appendChild(C.createComment(""));return!a.getElementsByTagName("*").length});J.getElementsByClassName=Ka.test(C.getElementsByClassName);J.getById=b(function(a){F.appendChild(a).id=V;return!C.getElementsByName||!C.getElementsByName(V).length});J.getById?(N.find.ID=function(a,c){if("undefined"!==typeof c.getElementById&&E)return(a=c.getElementById(a))?[a]:[]},N.filter.ID=function(a){var c=a.replace(Qa,la);return function(a){return a.getAttribute("id")===c}}):(delete N.find.ID,N.filter.ID=
function(a){var c=a.replace(Qa,la);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===c}});N.find.TAG=J.getElementsByTagName?function(a,c){if("undefined"!==typeof c.getElementsByTagName)return c.getElementsByTagName(a);if(J.qsa)return c.querySelectorAll(a)}:function(a,c){var g=[],d=0;c=c.getElementsByTagName(a);if("*"===a){for(;a=c[d++];)1===a.nodeType&&g.push(a);return g}return c};N.find.CLASS=J.getElementsByClassName&&function(a,c){if("undefined"!==
typeof c.getElementsByClassName&&E)return c.getElementsByClassName(a)};H=[];Q=[];if(J.qsa=Ka.test(C.querySelectorAll))b(function(a){F.appendChild(a).innerHTML="<a id='"+V+"'></a><select id='"+V+"-\r\\' msallowcapture=''><option selected=''></option></select>";a.querySelectorAll("[msallowcapture^='']").length&&Q.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||Q.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
a.querySelectorAll("[id~="+V+"-]").length||Q.push("~=");a.querySelectorAll(":checked").length||Q.push(":checked");a.querySelectorAll("a#"+V+"+*").length||Q.push(".#.+[+~]")}),b(function(a){var c=C.createElement("input");c.setAttribute("type","hidden");a.appendChild(c).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&Q.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||Q.push(":enabled",":disabled");a.querySelectorAll("*,:x");Q.push(",.*:")});(J.matchesSelector=
Ka.test(Kb=F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&b(function(a){J.disconnectedMatch=Kb.call(a,"div");Kb.call(a,"[s!='']:x");H.push("!=",":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")});
Q=Q.length&&new RegExp(Q.join("|"));H=H.length&&new RegExp(H.join("|"));G=(c=Ka.test(F.compareDocumentPosition))||Ka.test(F.contains)?function(a,c){var g=9===a.nodeType?a.documentElement:a;c=c&&c.parentNode;return a===c||!!(c&&1===c.nodeType&&(g.contains?g.contains(c):a.compareDocumentPosition&&a.compareDocumentPosition(c)&16))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===a)return!0;return!1};oa=c?function(a,c){if(a===c)return L=!0,0;var g=!a.compareDocumentPosition-!c.compareDocumentPosition;
if(g)return g;g=(a.ownerDocument||a)===(c.ownerDocument||c)?a.compareDocumentPosition(c):1;return g&1||!J.sortDetached&&c.compareDocumentPosition(a)===g?a===C||a.ownerDocument===X&&G(X,a)?-1:c===C||c.ownerDocument===X&&G(X,c)?1:B?Ma(B,a)-Ma(B,c):0:g&4?-1:1}:function(a,c){if(a===c)return L=!0,0;var g=0,d=a.parentNode,b=c.parentNode,m=[a],e=[c];if(!d||!b)return a===C?-1:c===C?1:d?-1:b?1:B?Ma(B,a)-Ma(B,c):0;if(d===b)return k(a,c);for(;a=a.parentNode;)m.unshift(a);for(a=c;a=a.parentNode;)e.unshift(a);
for(;m[g]===e[g];)g++;return g?k(m[g],e[g]):m[g]===X?-1:e[g]===X?1:0};return C};c.matches=function(a,g){return c(a,null,null,g)};c.matchesSelector=function(a,g){(a.ownerDocument||a)!==C&&ra(a);g=g.replace(ma,"='$1']");if(!(!J.matchesSelector||!E||Aa[g+" "]||H&&H.test(g)||Q&&Q.test(g)))try{var d=Kb.call(a,g);if(d||J.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(kf){}return 0<c(g,C,null,[a]).length};c.contains=function(a,c){(a.ownerDocument||a)!==C&&ra(a);return G(a,c)};c.attr=
function(a,c){(a.ownerDocument||a)!==C&&ra(a);var g=N.attrHandle[c.toLowerCase()];g=g&&R.call(N.attrHandle,c.toLowerCase())?g(a,c,!E):void 0;return void 0!==g?g:J.attributes||!E?a.getAttribute(c):(g=a.getAttributeNode(c))&&g.specified?g.value:null};c.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};c.uniqueSort=function(a){var c,g=[],d=0,b=0;L=!J.detectDuplicates;B=!J.sortStable&&a.slice(0);a.sort(oa);if(L){for(;c=a[b++];)c===a[b]&&(d=g.push(b));for(;d--;)a.splice(g[d],
1)}B=null;return a};var Za=c.getText=function(a){var c="",g=0;var d=a.nodeType;if(!d)for(;d=a[g++];)c+=Za(d);else if(1===d||9===d||11===d){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=Za(a)}else if(3===d||4===d)return a.nodeValue;return c};var N=c.selectors={cacheLength:50,createPseudo:d,match:Pb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},
preFilter:{ATTR:function(a){a[1]=a[1].replace(Qa,la);a[3]=(a[3]||a[4]||a[5]||"").replace(Qa,la);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]);return a},PSEUDO:function(a){var c,g=!a[6]&&a[2];if(Pb.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":g&&ea.test(g)&&(c=ta(g,!0))&&(c=g.indexOf(")",
g.length-c)-g.length)&&(a[0]=a[0].slice(0,c),a[2]=g.slice(0,c));return a.slice(0,3)}},filter:{TAG:function(a){var c=a.replace(Qa,la).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===c}},CLASS:function(a){var c=K[a+" "];return c||(c=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),K(a,function(a){return c.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,
g,d){return function(b){b=c.attr(b,a);if(null==b)return"!="===g;if(!g)return!0;b+="";return"="===g?b===d:"!="===g?b!==d:"^="===g?d&&0===b.indexOf(d):"*="===g?d&&-1<b.indexOf(d):"$="===g?d&&b.slice(-d.length)===d:"~="===g?-1<(" "+b.replace(Ba," ")+" ").indexOf(d):"|="===g?b===d||b.slice(0,d.length+1)===d+"-":!1}},CHILD:function(a,c,g,d,b){var m="nth"!==a.slice(0,3),k="last"!==a.slice(-4),e="of-type"===c;return 1===d&&0===b?function(a){return!!a.parentNode}:function(c,g,l){var f,h;g=m!==k?"nextSibling":
"previousSibling";var u=c.parentNode,A=e&&c.nodeName.toLowerCase();l=!l&&!e;var q=!1;if(u){if(m){for(;g;){for(f=c;f=f[g];)if(e?f.nodeName.toLowerCase()===A:1===f.nodeType)return!1;var t=g="only"===a&&!t&&"nextSibling"}return!0}t=[k?u.firstChild:u.lastChild];if(k&&l){f=u;var y=f[V]||(f[V]={});y=y[f.uniqueID]||(y[f.uniqueID]={});q=y[a]||[];q=(h=q[0]===da&&q[1])&&q[2];for(f=h&&u.childNodes[h];f=++h&&f&&f[g]||(q=h=0)||t.pop();)if(1===f.nodeType&&++q&&f===c){y[a]=[da,h,q];break}}else if(l&&(f=c,y=f[V]||
(f[V]={}),y=y[f.uniqueID]||(y[f.uniqueID]={}),q=y[a]||[],q=h=q[0]===da&&q[1]),!1===q)for(;(f=++h&&f&&f[g]||(q=h=0)||t.pop())&&((e?f.nodeName.toLowerCase()!==A:1!==f.nodeType)||!++q||(l&&(y=f[V]||(f[V]={}),y=y[f.uniqueID]||(y[f.uniqueID]={}),y[a]=[da,q]),f!==c)););q-=b;return q===d||0===q%d&&0<=q/d}}},PSEUDO:function(a,g){var b=N.pseudos[a]||N.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);if(b[V])return b(g);if(1<b.length){var m=[a,a,"",g];return N.setFilters.hasOwnProperty(a.toLowerCase())?
d(function(a,c){for(var d,m=b(a,g),k=m.length;k--;)d=Ma(a,m[k]),a[d]=!(c[d]=m[k])}):function(a){return b(a,0,m)}}return b}},pseudos:{not:d(function(a){var c=[],g=[],b=ub(a.replace(ya,"$1"));return b[V]?d(function(a,c,g,d){d=b(a,null,d,[]);for(var m=a.length;m--;)if(g=d[m])a[m]=!(c[m]=g)}):function(a,d,m){c[0]=a;b(c,null,m,g);c[0]=null;return!g.pop()}}),has:d(function(a){return function(g){return 0<c(a,g).length}}),contains:d(function(a){a=a.replace(Qa,la);return function(c){return-1<(c.textContent||
c.innerText||Za(c)).indexOf(a)}}),lang:d(function(a){sa.test(a||"")||c.error("unsupported lang: "+a);a=a.replace(Qa,la).toLowerCase();return function(c){var g;do if(g=E?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return g=g.toLowerCase(),g===a||0===g.indexOf(a+"-");while((c=c.parentNode)&&1===c.nodeType);return!1}}),target:function(c){var g=a.location&&a.location.hash;return g&&g.slice(1)===c.id},root:function(a){return a===F},focus:function(a){return a===C.activeElement&&(!C.hasFocus||
C.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var c=a.nodeName.toLowerCase();return"input"===c&&!!a.checked||"option"===c&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!N.pseudos.empty(a)},header:function(a){return Pa.test(a.nodeName)},
input:function(a){return Ea.test(a.nodeName)},button:function(a){var c=a.nodeName.toLowerCase();return"input"===c&&"button"===a.type||"button"===c},text:function(a){var c;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(c=a.getAttribute("type"))||"text"===c.toLowerCase())},first:f(function(){return[0]}),last:f(function(a,c){return[c-1]}),eq:f(function(a,c,g){return[0>g?g+c:g]}),even:f(function(a,c){for(var g=0;g<c;g+=2)a.push(g);return a}),odd:f(function(a,c){for(var g=1;g<c;g+=
2)a.push(g);return a}),lt:f(function(a,c,g){for(c=0>g?g+c:g;0<=--c;)a.push(c);return a}),gt:f(function(a,c,g){for(g=0>g?g+c:g;++g<c;)a.push(g);return a})}};N.pseudos.nth=N.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})N.pseudos[x]=e(x);for(x in{submit:!0,reset:!0})N.pseudos[x]=l(x);u.prototype=N.filters=N.pseudos;N.setFilters=new u;var ta=c.tokenize=function(a,g){var d,b,m,k,e;if(k=ia[a+" "])return g?0:k.slice(0);k=a;var l=[];for(e=N.preFilter;k;){if(!f||(d=Wc.exec(k)))d&&
(k=k.slice(d[0].length)||k),l.push(b=[]);var f=!1;if(d=va.exec(k))f=d.shift(),b.push({value:f,type:d[0].replace(ya," ")}),k=k.slice(f.length);for(m in N.filter)!(d=Pb[m].exec(k))||e[m]&&!(d=e[m](d))||(f=d.shift(),b.push({value:f,type:m,matches:d}),k=k.slice(f.length));if(!f)break}return g?k.length:k?c.error(a):ia(a,l).slice(0)};var ub=c.compile=function(a,c){var g,d=[],b=[],m=Aa[a+" "];if(!m){c||(c=ta(a));for(g=c.length;g--;)m=p(c[g]),m[V]?d.push(m):b.push(m);m=Aa(a,z(b,d));m.selector=a}return m};
var gb=c.select=function(a,c,g,d){var b,m,k,e="function"===typeof a&&a,l=!d&&ta(a=e.selector||a);g=g||[];if(1===l.length){var f=l[0]=l[0].slice(0);if(2<f.length&&"ID"===(m=f[0]).type&&J.getById&&9===c.nodeType&&E&&N.relative[f[1].type]){c=(N.find.ID(m.matches[0].replace(Qa,la),c)||[])[0];if(!c)return g;e&&(c=c.parentNode);a=a.slice(f.shift().value.length)}for(b=Pb.needsContext.test(a)?0:f.length;b--;){m=f[b];if(N.relative[k=m.type])break;if(k=N.find[k])if(d=k(m.matches[0].replace(Qa,la),za.test(f[0].type)&&
h(c.parentNode)||c)){f.splice(b,1);a=d.length&&A(f);if(!a)return La.apply(g,d),g;break}}}(e||ub(a,l))(d,c,!E,g,!c||za.test(a)&&h(c.parentNode)||c);return g};J.sortStable=V.split("").sort(oa).join("")===V;J.detectDuplicates=!!L;ra();J.sortDetached=b(function(a){return a.compareDocumentPosition(C.createElement("div"))&1});b(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||m("type|href|height|width",function(a,c,g){if(!g)return a.getAttribute(c,"type"===c.toLowerCase()?
1:2)});J.attributes&&b(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||m("value",function(a,c,g){if(!g&&"input"===a.nodeName.toLowerCase())return a.defaultValue});b(function(a){return null==a.getAttribute("disabled")})||m("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,c,g){var d;if(!g)return!0===a[c]?c.toLowerCase():(d=a.getAttributeNode(c))&&
d.specified?d.value:null});return c}(h);v.find=oa;v.expr=oa.selectors;v.expr[":"]=v.expr.pseudos;v.uniqueSort=v.unique=oa.uniqueSort;v.text=oa.getText;v.isXMLDoc=oa.isXML;v.contains=oa.contains;var ba=function(a,c,g){for(var d=[],b=void 0!==g;(a=a[c])&&9!==a.nodeType;)if(1===a.nodeType){if(b&&v(a).is(g))break;d.push(a)}return d},La=function(a,c){for(var g=[];a;a=a.nextSibling)1===a.nodeType&&a!==c&&g.push(a);return g},Wc=v.expr.match.needsContext,Pb=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,za=/^.[^:#\[\.,]*$/;
v.filter=function(a,c,g){var d=c[0];g&&(a=":not("+a+")");return 1===c.length&&1===d.nodeType?v.find.matchesSelector(d,a)?[d]:[]:v.find.matches(a,v.grep(c,function(a){return 1===a.nodeType}))};v.fn.extend({find:function(a){var c,g=[],d=this,b=d.length;if("string"!==typeof a)return this.pushStack(v(a).filter(function(){for(c=0;c<b;c++)if(v.contains(d[c],this))return!0}));for(c=0;c<b;c++)v.find(a,d[c],g);g=this.pushStack(1<b?v.unique(g):g);g.selector=this.selector?this.selector+" "+a:a;return g},filter:function(a){return this.pushStack(e(this,
a||[],!1))},not:function(a){return this.pushStack(e(this,a||[],!0))},is:function(a){return!!e(this,"string"===typeof a&&Wc.test(a)?v(a):a||[],!1).length}});var ra=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(v.fn.init=function(a,c,g){if(!a)return this;g=g||Sa;if("string"===typeof a){var d="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:ra.exec(a);if(!d||!d[1]&&c)return!c||c.jquery?(c||g).find(a):this.constructor(c).find(a);if(d[1]){if(c=c instanceof v?c[0]:c,v.merge(this,v.parseHTML(d[1],
c&&c.nodeType?c.ownerDocument||c:W,!0)),Pb.test(d[1])&&v.isPlainObject(c))for(d in c)if(v.isFunction(this[d]))this[d](c[d]);else this.attr(d,c[d])}else{if((c=W.getElementById(d[2]))&&c.parentNode){if(c.id!==d[2])return Sa.find(a);this.length=1;this[0]=c}this.context=W;this.selector=a}return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(v.isFunction(a))return"undefined"!==typeof g.ready?g.ready(a):a(v);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);
return v.makeArray(a,this)}).prototype=v.fn;var Sa=v(W);var qd=/^(?:parents|prev(?:Until|All))/,Ue={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({has:function(a){var c,g=v(a,this),d=g.length;return this.filter(function(){for(c=0;c<d;c++)if(v.contains(this,g[c]))return!0})},closest:function(a,c){for(var g,d=0,b=this.length,m=[],k=Wc.test(a)||"string"!==typeof a?v(a,c||this.context):0;d<b;d++)for(g=this[d];g&&g!==c;g=g.parentNode)if(11>g.nodeType&&(k?-1<k.index(g):1===g.nodeType&&v.find.matchesSelector(g,
a))){m.push(g);break}return this.pushStack(1<m.length?v.uniqueSort(m):m)},index:function(a){return a?"string"===typeof a?v.inArray(this[0],v(a)):v.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,c){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(a,c))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});v.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return ba(a,
"parentNode")},parentsUntil:function(a,c,g){return ba(a,"parentNode",g)},next:function(a){return d(a,"nextSibling")},prev:function(a){return d(a,"previousSibling")},nextAll:function(a){return ba(a,"nextSibling")},prevAll:function(a){return ba(a,"previousSibling")},nextUntil:function(a,c,g){return ba(a,"nextSibling",g)},prevUntil:function(a,c,g){return ba(a,"previousSibling",g)},siblings:function(a){return La((a.parentNode||{}).firstChild,a)},children:function(a){return La(a.firstChild)},contents:function(a){return v.nodeName(a,
"iframe")?a.contentDocument||a.contentWindow.document:v.merge([],a.childNodes)}},function(a,c){v.fn[a]=function(g,d){var b=v.map(this,c,g);"Until"!==a.slice(-5)&&(d=g);d&&"string"===typeof d&&(b=v.filter(d,b));1<this.length&&(Ue[a]||(b=v.uniqueSort(b)),qd.test(a)&&(b=b.reverse()));return this.pushStack(b)}});var gb=/\S+/g;v.Callbacks=function(a){a="string"===typeof a?k(a):v.extend({},a);var c,g,d,b,m=[],e=[],l=-1,f=function(){b=a.once;for(d=c=!0;e.length;l=-1)for(g=e.shift();++l<m.length;)!1===m[l].apply(g[0],
g[1])&&a.stopOnFalse&&(l=m.length,g=!1);a.memory||(g=!1);c=!1;b&&(m=g?[]:"")},h={add:function(){m&&(g&&!c&&(l=m.length-1,e.push(g)),function Gd(c){v.each(c,function(c,g){v.isFunction(g)?a.unique&&h.has(g)||m.push(g):g&&g.length&&"string"!==v.type(g)&&Gd(g)})}(arguments),g&&!c&&f());return this},remove:function(){v.each(arguments,function(a,c){for(var g;-1<(g=v.inArray(c,m,g));)m.splice(g,1),g<=l&&l--});return this},has:function(a){return a?-1<v.inArray(a,m):0<m.length},empty:function(){m&&(m=[]);
return this},disable:function(){b=e=[];m=g="";return this},disabled:function(){return!m},lock:function(){b=!0;g||h.disable();return this},locked:function(){return!!b},fireWith:function(a,g){b||(g=g||[],g=[a,g.slice?g.slice():g],e.push(g),c||f());return this},fire:function(){h.fireWith(this,arguments);return this},fired:function(){return!!d}};return h};v.extend({Deferred:function(a){var c=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],
["notify","progress",v.Callbacks("memory")]],g="pending",d={state:function(){return g},always:function(){b.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return v.Deferred(function(g){v.each(c,function(c,m){var k=v.isFunction(a[c])&&a[c];b[m[1]](function(){var a=k&&k.apply(this,arguments);if(a&&v.isFunction(a.promise))a.promise().progress(g.notify).done(g.resolve).fail(g.reject);else g[m[0]+"With"](this===d?g.promise():this,k?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=
a?v.extend(a,d):d}},b={};d.pipe=d.then;v.each(c,function(a,m){var k=m[2],e=m[3];d[m[1]]=k.add;e&&k.add(function(){g=e},c[a^1][2].disable,c[2][2].lock);b[m[0]]=function(){b[m[0]+"With"](this===b?d:this,arguments);return this};b[m[0]+"With"]=k.fireWith});d.promise(b);a&&a.call(b,b);return b},when:function(a){var c=0,g=ya.call(arguments),d=g.length,b=1!==d||a&&v.isFunction(a.promise)?d:0,m=1===b?a:v.Deferred(),k=function(a,c,g){return function(d){c[a]=this;g[a]=1<arguments.length?ya.call(arguments):
d;g===l?m.notifyWith(c,g):--b||m.resolveWith(c,g)}},e;if(1<d){var l=Array(d);var f=Array(d);for(e=Array(d);c<d;c++)g[c]&&v.isFunction(g[c].promise)?g[c].promise().progress(k(c,f,l)).done(k(c,e,g)).fail(m.reject):--b}b||m.resolveWith(e,g);return m.promise()}});var Gc;v.fn.ready=function(a){v.ready.promise().done(a);return this};v.extend({isReady:!1,readyWait:1,holdReady:function(a){a?v.readyWait++:v.ready(!0)},ready:function(a){(!0===a?--v.readyWait:v.isReady)||(v.isReady=!0,!0!==a&&0<--v.readyWait||
(Gc.resolveWith(W,[v]),v.fn.triggerHandler&&(v(W).triggerHandler("ready"),v(W).off("ready"))))}});v.ready.promise=function(g){if(!Gc)if(Gc=v.Deferred(),"complete"===W.readyState||"loading"!==W.readyState&&!W.documentElement.doScroll)h.setTimeout(v.ready);else if(W.addEventListener)W.addEventListener("DOMContentLoaded",a),h.addEventListener("load",a);else{W.attachEvent("onreadystatechange",a);h.attachEvent("onload",a);var d=!1;try{d=null==h.frameElement&&W.documentElement}catch(He){}d&&d.doScroll&&
function Ub(){if(!v.isReady){try{d.doScroll("left")}catch(id){return h.setTimeout(Ub,50)}c();v.ready()}}()}return Gc.promise(g)};v.ready.promise();for(var ig in v(N))break;N.ownFirst="0"===ig;N.inlineBlockNeedsLayout=!1;v(function(){var a;if((a=W.getElementsByTagName("body")[0])&&a.style){var c=W.createElement("div");var g=W.createElement("div");g.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";a.appendChild(g).appendChild(c);"undefined"!==typeof c.style.zoom&&(c.style.cssText=
"display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",N.inlineBlockNeedsLayout=c=3===c.offsetWidth)&&(a.style.zoom=1);a.removeChild(g)}});(function(){var a=W.createElement("div");N.deleteExpando=!0;try{delete a.test}catch(na){N.deleteExpando=!1}})();var kd=function(a){var c=v.noData[(a.nodeName+" ").toLowerCase()],g=+a.nodeType||1;return 1!==g&&9!==g?!1:!c||!0!==c&&a.getAttribute("classid")===c},jd=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ob=/([A-Z])/g;v.extend({cache:{},noData:{"applet ":!0,"embed ":!0,
"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){a=a.nodeType?v.cache[a[v.expando]]:a[v.expando];return!!a&&!u(a)},data:function(a,c,g){return q(a,c,g)},removeData:function(a,c){return r(a,c)},_data:function(a,c,g){return q(a,c,g,!0)},_removeData:function(a,c){return r(a,c,!0)}});v.fn.extend({data:function(a,c){var g,d=this[0],b=d&&d.attributes;if(void 0===a){if(this.length){var m=v.data(d);if(1===d.nodeType&&!v._data(d,"parsedAttrs")){for(g=b.length;g--;)if(b[g]){var k=
b[g].name;0===k.indexOf("data-")&&(k=v.camelCase(k.slice(5)),l(d,k,m[k]))}v._data(d,"parsedAttrs",!0)}}return m}return"object"===typeof a?this.each(function(){v.data(this,a)}):1<arguments.length?this.each(function(){v.data(this,a,c)}):d?l(d,a,v.data(d,a)):void 0},removeData:function(a){return this.each(function(){v.removeData(this,a)})}});v.extend({queue:function(a,c,g){if(a){c=(c||"fx")+"queue";var d=v._data(a,c);g&&(!d||v.isArray(g)?d=v._data(a,c,v.makeArray(g)):d.push(g));return d||[]}},dequeue:function(a,
c){c=c||"fx";var g=v.queue(a,c),d=g.length,b=g.shift(),m=v._queueHooks(a,c),k=function(){v.dequeue(a,c)};"inprogress"===b&&(b=g.shift(),d--);b&&("fx"===c&&g.unshift("inprogress"),delete m.stop,b.call(a,k,m));!d&&m&&m.empty.fire()},_queueHooks:function(a,c){var g=c+"queueHooks";return v._data(a,g)||v._data(a,g,{empty:v.Callbacks("once memory").add(function(){v._removeData(a,c+"queue");v._removeData(a,g)})})}});v.fn.extend({queue:function(a,c){var g=2;"string"!==typeof a&&(c=a,a="fx",g--);return arguments.length<
g?v.queue(this[0],a):void 0===c?this:this.each(function(){var g=v.queue(this,a,c);v._queueHooks(this,a);"fx"===a&&"inprogress"!==g[0]&&v.dequeue(this,a)})},dequeue:function(a){return this.each(function(){v.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var g,d=1,b=v.Deferred(),m=this,k=this.length,e=function(){--d||b.resolveWith(m,[m])};"string"!==typeof a&&(c=a,a=void 0);for(a=a||"fx";k--;)(g=v._data(m[k],a+"queueHooks"))&&g.empty&&(d++,g.empty.add(e));
e();return b.promise(c)}});(function(){var a;N.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var c;if((c=W.getElementsByTagName("body")[0])&&c.style){var g=W.createElement("div");var d=W.createElement("div");d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";c.appendChild(d).appendChild(g);"undefined"!==typeof g.style.zoom&&(g.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",
g.appendChild(W.createElement("div")).style.width="5px",a=3!==g.offsetWidth);c.removeChild(d);return a}}})();var rd=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Zb=new RegExp("^(?:([+-])=|)("+rd+")([a-z%]*)$","i"),tb=["Top","Right","Bottom","Left"],Vb=function(a,c){a=c||a;return"none"===v.css(a,"display")||!v.contains(a.ownerDocument,a)},Xc=function(a,c,g,d,b,m,k){var e=0,l=a.length,f=null==g;if("object"===v.type(g))for(e in b=!0,g)Xc(a,c,e,g[e],!0,m,k);else if(void 0!==d&&(b=!0,v.isFunction(d)||
(k=!0),f&&(k?(c.call(a,d),c=null):(f=c,c=function(a,c,g){return f.call(v(a),g)})),c))for(;e<l;e++)c(a[e],g,k?d:d.call(a[e],e,c(a[e],g)));return b?a:f?c.call(a):l?c(a[0],g):m},Xa=/^(?:checkbox|radio)$/i,$b=/<([\w:-]+)/,gc=/^$|\/(?:java|ecma)script/i,jf=/^\s+/;(function(){var a=W.createElement("div"),c=W.createDocumentFragment(),g=W.createElement("input");a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";N.leadingWhitespace=3===a.firstChild.nodeType;N.tbody=!a.getElementsByTagName("tbody").length;
N.htmlSerialize=!!a.getElementsByTagName("link").length;N.html5Clone="<:nav></:nav>"!==W.createElement("nav").cloneNode(!0).outerHTML;g.type="checkbox";g.checked=!0;c.appendChild(g);N.appendChecked=g.checked;a.innerHTML="<textarea>x</textarea>";N.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue;c.appendChild(a);g=W.createElement("input");g.setAttribute("type","radio");g.setAttribute("checked","checked");g.setAttribute("name","t");a.appendChild(g);N.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;
N.noCloneEvent=!!a.addEventListener;a[v.expando]=1;N.attributes=!a.getAttribute(v.expando)})();var lb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:N.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};
lb.optgroup=lb.option;lb.tbody=lb.tfoot=lb.colgroup=lb.caption=lb.thead;lb.th=lb.td;var Je=/<|&#?\w+;/,ie=/<tbody/i;(function(){var a,c=W.createElement("div");for(a in{submit:!0,change:!0,focusin:!0}){var g="on"+a;(N[a]=g in h)||(c.setAttribute(g,"t"),N[a]=!1===c.attributes[g].expando)}})();var Yc=/^(?:input|select|textarea)$/i,jg=/^key/,kg=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,sd=/^(?:focusinfocus|focusoutblur)$/,J=/^([^.]*)(?:\.(.+)|)/;v.event={global:{},add:function(a,c,g,d,b){var m,
k,e,l,f;if(k=v._data(a)){if(g.handler){var h=g;g=h.handler;b=h.selector}g.guid||(g.guid=v.guid++);(m=k.events)||(m=k.events={});(e=k.handle)||(e=k.handle=function(a){return"undefined"===typeof v||a&&v.event.triggered===a.type?void 0:v.event.dispatch.apply(e.elem,arguments)},e.elem=a);c=(c||"").match(gb)||[""];for(k=c.length;k--;){var u=J.exec(c[k])||[];var A=l=u[1];var q=(u[2]||"").split(".").sort();A&&(u=v.event.special[A]||{},A=(b?u.delegateType:u.bindType)||A,u=v.event.special[A]||{},l=v.extend({type:A,
origType:l,data:d,handler:g,guid:g.guid,selector:b,needsContext:b&&v.expr.match.needsContext.test(b),namespace:q.join(".")},h),(f=m[A])||(f=m[A]=[],f.delegateCount=0,u.setup&&!1!==u.setup.call(a,d,q,e)||(a.addEventListener?a.addEventListener(A,e,!1):a.attachEvent&&a.attachEvent("on"+A,e))),u.add&&(u.add.call(a,l),l.handler.guid||(l.handler.guid=g.guid)),b?f.splice(f.delegateCount++,0,l):f.push(l),v.event.global[A]=!0)}a=null}},remove:function(a,c,g,d,b){var m,k,e,l,f,h=v.hasData(a)&&v._data(a);if(h&&
(l=h.events)){c=(c||"").match(gb)||[""];for(e=c.length;e--;){var u=J.exec(c[e])||[];var A=f=u[1];var q=(u[2]||"").split(".").sort();if(A){var t=v.event.special[A]||{};A=(d?t.delegateType:t.bindType)||A;var y=l[A]||[];u=u[2]&&new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)");for(k=m=y.length;m--;){var r=y[m];!b&&f!==r.origType||g&&g.guid!==r.guid||u&&!u.test(r.namespace)||d&&d!==r.selector&&("**"!==d||!r.selector)||(y.splice(m,1),r.selector&&y.delegateCount--,t.remove&&t.remove.call(a,r))}k&&
!y.length&&(t.teardown&&!1!==t.teardown.call(a,q,h.handle)||v.removeEvent(a,A,h.handle),delete l[A])}else for(A in l)v.event.remove(a,A+c[e],g,d,!0)}v.isEmptyObject(l)&&(delete h.handle,v._removeData(a,"events"))}},trigger:function(a,c,g,d){var b,m,k=[g||W],e=cb.call(a,"type")?a.type:a;var l=cb.call(a,"namespace")?a.namespace.split("."):[];var f=b=g=g||W;if(3!==g.nodeType&&8!==g.nodeType&&!sd.test(e+v.event.triggered)){-1<e.indexOf(".")&&(l=e.split("."),e=l.shift(),l.sort());var u=0>e.indexOf(":")&&
"on"+e;a=a[v.expando]?a:new v.Event(e,"object"===typeof a&&a);a.isTrigger=d?2:3;a.namespace=l.join(".");a.rnamespace=a.namespace?new RegExp("(^|\\.)"+l.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;a.result=void 0;a.target||(a.target=g);c=null==c?[a]:v.makeArray(c,[a]);l=v.event.special[e]||{};if(d||!l.trigger||!1!==l.trigger.apply(g,c)){if(!d&&!l.noBubble&&!v.isWindow(g)){var A=l.delegateType||e;sd.test(A+e)||(f=f.parentNode);for(;f;f=f.parentNode)k.push(f),b=f;b===(g.ownerDocument||W)&&k.push(b.defaultView||
b.parentWindow||h)}for(m=0;(f=k[m++])&&!a.isPropagationStopped();)a.type=1<m?A:l.bindType||e,(b=(v._data(f,"events")||{})[a.type]&&v._data(f,"handle"))&&b.apply(f,c),(b=u&&f[u])&&b.apply&&kd(f)&&(a.result=b.apply(f,c),!1===a.result&&a.preventDefault());a.type=e;if(!(d||a.isDefaultPrevented()||l._default&&!1!==l._default.apply(k.pop(),c))&&kd(g)&&u&&g[e]&&!v.isWindow(g)){(b=g[u])&&(g[u]=null);v.event.triggered=e;try{g[e]()}catch(Gd){}v.event.triggered=void 0;b&&(g[u]=b)}return a.result}}},dispatch:function(a){a=
v.event.fix(a);var c,g,d,b=ya.call(arguments);var m=(v._data(this,"events")||{})[a.type]||[];var k=v.event.special[a.type]||{};b[0]=a;a.delegateTarget=this;if(!k.preDispatch||!1!==k.preDispatch.call(this,a)){var e=v.event.handlers.call(this,a,m);for(m=0;(d=e[m++])&&!a.isPropagationStopped();)for(a.currentTarget=d.elem,c=0;(g=d.handlers[c++])&&!a.isImmediatePropagationStopped();)if(!a.rnamespace||a.rnamespace.test(g.namespace))a.handleObj=g,a.data=g.data,g=((v.event.special[g.origType]||{}).handle||
g.handler).apply(d.elem,b),void 0!==g&&!1===(a.result=g)&&(a.preventDefault(),a.stopPropagation());k.postDispatch&&k.postDispatch.call(this,a);return a.result}},handlers:function(a,c){var g,d=[],b=c.delegateCount,m=a.target;if(b&&m.nodeType&&("click"!==a.type||isNaN(a.button)||1>a.button))for(;m!=this;m=m.parentNode||this)if(1===m.nodeType&&(!0!==m.disabled||"click"!==a.type)){var k=[];for(g=0;g<b;g++){var e=c[g];var l=e.selector+" ";void 0===k[l]&&(k[l]=e.needsContext?-1<v(l,this).index(m):v.find(l,
this,null,[m]).length);k[l]&&k.push(e)}k.length&&d.push({elem:m,handlers:k})}b<c.length&&d.push({elem:this,handlers:c.slice(b)});return d},fix:function(a){if(a[v.expando])return a;var c=a.type;var g=a,d=this.fixHooks[c];d||(this.fixHooks[c]=d=kg.test(c)?this.mouseHooks:jg.test(c)?this.keyHooks:{});var b=d.props?this.props.concat(d.props):this.props;a=new v.Event(g);for(c=b.length;c--;){var m=b[c];a[m]=g[m]}a.target||(a.target=g.srcElement||W);3===a.target.nodeType&&(a.target=a.target.parentNode);
a.metaKey=!!a.metaKey;return d.filter?d.filter(a,g):a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,c){null==a.which&&(a.which=null!=c.charCode?c.charCode:c.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,
c){var g=c.button,d=c.fromElement;if(null==a.pageX&&null!=c.clientX){var b=a.target.ownerDocument||W;var m=b.documentElement;b=b.body;a.pageX=c.clientX+(m&&m.scrollLeft||b&&b.scrollLeft||0)-(m&&m.clientLeft||b&&b.clientLeft||0);a.pageY=c.clientY+(m&&m.scrollTop||b&&b.scrollTop||0)-(m&&m.clientTop||b&&b.clientTop||0)}!a.relatedTarget&&d&&(a.relatedTarget=d===a.target?c.toElement:d);a.which||void 0===g||(a.which=g&1?1:g&2?3:g&4?2:0);return a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==
H()&&this.focus)try{return this.focus(),!1}catch(Kb){}},delegateType:"focusin"},blur:{trigger:function(){if(this===H()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(v.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return v.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,c,g){a=v.extend(new v.Event,
g,{type:a,isSimulated:!0});v.event.trigger(a,null,c);a.isDefaultPrevented()&&g.preventDefault()}};v.removeEvent=W.removeEventListener?function(a,c,g){a.removeEventListener&&a.removeEventListener(c,g)}:function(a,c,g){c="on"+c;a.detachEvent&&("undefined"===typeof a[c]&&(a[c]=null),a.detachEvent(c,g))};v.Event=function(a,c){if(!(this instanceof v.Event))return new v.Event(a,c);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===
a.returnValue?C:F):this.type=a;c&&v.extend(this,c);this.timeStamp=a&&a.timeStamp||v.now();this[v.expando]=!0};v.Event.prototype={constructor:v.Event,isDefaultPrevented:F,isPropagationStopped:F,isImmediatePropagationStopped:F,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=C;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=C;a&&!this.isSimulated&&(a.stopPropagation&&a.stopPropagation(),
a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=C;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,c){v.event.special[a]={delegateType:c,bindType:c,handle:function(a){var g=a.relatedTarget,d=a.handleObj;if(!g||g!==this&&!v.contains(this,g)){a.type=d.origType;var b=d.handler.apply(this,
arguments);a.type=c}return b}}});N.submit||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=v.nodeName(a,"input")||v.nodeName(a,"button")?v.prop(a,"form"):void 0)&&!v._data(a,"submit")&&(v.event.add(a,"submit._submit",function(a){a._submitBubble=!0}),v._data(a,"submit",!0))})},postDispatch:function(a){a._submitBubble&&(delete a._submitBubble,this.parentNode&&!a.isTrigger&&v.event.simulate("submit",
this.parentNode,a))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}});N.change||(v.event.special.change={setup:function(){if(Yc.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)v.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._justChanged=!0)}),v.event.add(this,"click._change",function(a){this._justChanged&&!a.isTrigger&&(this._justChanged=!1);v.event.simulate("change",this,a)});return!1}v.event.add(this,
"beforeactivate._change",function(a){a=a.target;Yc.test(a.nodeName)&&!v._data(a,"change")&&(v.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||v.event.simulate("change",this.parentNode,a)}),v._data(a,"change",!0))})},handle:function(a){var c=a.target;if(this!==c||a.isSimulated||a.isTrigger||"radio"!==c.type&&"checkbox"!==c.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){v.event.remove(this,"._change");return!Yc.test(this.nodeName)}});
N.focusin||v.each({focus:"focusin",blur:"focusout"},function(a,c){var g=function(a){v.event.simulate(c,a.target,v.event.fix(a))};v.event.special[c]={setup:function(){var d=this.ownerDocument||this,b=v._data(d,c);b||d.addEventListener(a,g,!0);v._data(d,c,(b||0)+1)},teardown:function(){var d=this.ownerDocument||this,b=v._data(d,c)-1;b?v._data(d,c,b):(d.removeEventListener(a,g,!0),v._removeData(d,c))}}});v.fn.extend({on:function(a,c,g,d){return G(this,a,c,g,d)},one:function(a,c,g,d){return G(this,a,
c,g,d,1)},off:function(a,c,g){if(a&&a.preventDefault&&a.handleObj){var d=a.handleObj;v(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler);return this}if("object"===typeof a){for(d in a)this.off(d,c,a[d]);return this}if(!1===c||"function"===typeof c)g=c,c=void 0;!1===g&&(g=F);return this.each(function(){v.event.remove(this,a,g,c)})},trigger:function(a,c){return this.each(function(){v.event.trigger(a,c,this)})},triggerHandler:function(a,c){var g=this[0];if(g)return v.event.trigger(a,
c,g,!0)}});var Ve=/ jQuery\d+="(?:null|\d+)"/g,Md=/<(?:abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video)[\s/>]/i,Hc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,lg=/<script|<style|<link/i,Ke=/checked\s*(?:[^=]|=\s*.checked.)/i,Uf=/^true\/(.*)/,je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,hb=z(W).appendChild(W.createElement("div"));v.extend({htmlPrefilter:function(a){return a.replace(Hc,
"<$1></$2>")},clone:function(a,c,d){var b,k,e=v.contains(a.ownerDocument,a);if(N.html5Clone||v.isXMLDoc(a)||!Md.test("<"+a.nodeName+">"))var l=a.cloneNode(!0);else hb.innerHTML=a.outerHTML,hb.removeChild(l=hb.firstChild);if(!(N.noCloneEvent&&N.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||v.isXMLDoc(a))){var f=p(l);var h=p(a);for(k=0;null!=(b=h[k]);++k)if(f[k]){var u=void 0,A=b,q=f[k];if(1===q.nodeType){var t=q.nodeName.toLowerCase();if(!N.noCloneEvent&&q[v.expando]){b=v._data(q);for(u in b.events)v.removeEvent(q,
u,b.handle);q.removeAttribute(v.expando)}if("script"===t&&q.text!==A.text)K(q).text=A.text,g(q);else if("object"===t)q.parentNode&&(q.outerHTML=A.outerHTML),N.html5Clone&&A.innerHTML&&!v.trim(q.innerHTML)&&(q.innerHTML=A.innerHTML);else if("input"===t&&Xa.test(A.type))q.defaultChecked=q.checked=A.checked,q.value!==A.value&&(q.value=A.value);else if("option"===t)q.defaultSelected=q.selected=A.defaultSelected;else if("input"===t||"textarea"===t)q.defaultValue=A.defaultValue}}}if(c)if(d)for(h=h||p(a),
f=f||p(l),k=0;null!=(b=h[k]);k++)m(b,f[k]);else m(a,l);f=p(l,"script");0<f.length&&x(f,!e&&p(a,"script"));return l},cleanData:function(a,c){for(var g,d,b,m,k=0,e=v.expando,l=v.cache,f=N.attributes,h=v.event.special;null!=(g=a[k]);k++)if(c||kd(g))if(m=(b=g[e])&&l[b]){if(m.events)for(d in m.events)h[d]?v.event.remove(g,d):v.removeEvent(g,d,m.handle);l[b]&&(delete l[b],f||"undefined"===typeof g.removeAttribute?g[e]=void 0:g.removeAttribute(e),la.push(b))}}});v.fn.extend({domManip:A,detach:function(a){return M(this,
a,!0)},remove:function(a){return M(this,a)},text:function(a){return Xc(this,function(a){return void 0===a?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||W).createTextNode(a))},null,a,arguments.length)},append:function(){return A(this,arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||E(this,a).appendChild(a)})},prepend:function(){return A(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=E(this,a);c.insertBefore(a,
c.firstChild)}})},before:function(){return A(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return A(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,c=0;null!=(a=this[c]);c++){for(1===a.nodeType&&v.cleanData(p(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&v.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,c){a=null==a?!1:a;c=null==c?
a:c;return this.map(function(){return v.clone(this,a,c)})},html:function(a){return Xc(this,function(a){var c=this[0]||{},g=0,d=this.length;if(void 0===a)return 1===c.nodeType?c.innerHTML.replace(Ve,""):void 0;if(!("string"!==typeof a||lg.test(a)||!N.htmlSerialize&&Md.test(a)||!N.leadingWhitespace&&jf.test(a)||lb[($b.exec(a)||["",""])[1].toLowerCase()])){a=v.htmlPrefilter(a);try{for(;g<d;g++)c=this[g]||{},1===c.nodeType&&(v.cleanData(p(c,!1)),c.innerHTML=a);c=0}catch(Tf){}}c&&this.empty().append(a)},
null,a,arguments.length)},replaceWith:function(){var a=[];return A(this,arguments,function(c){var g=this.parentNode;0>v.inArray(this,a)&&(v.cleanData(p(this)),g&&g.replaceChild(c,this))},a)}});v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,c){v.fn[a]=function(a){for(var g=0,d=[],b=v(a),m=b.length-1;g<=m;g++)a=g===m?this:this.clone(!0),v(b[g])[c](a),va.apply(d,a.get());return this.pushStack(d)}});var Cc,xa={HTML:"block",
BODY:"block"},Ic=/^margin/,pb=new RegExp("^("+rd+")(?!px)[a-z%]+$","i"),ib=function(a,c,g,d){var b,m={};for(b in c)m[b]=a.style[b],a.style[b]=c[b];g=g.apply(a,d||[]);for(b in c)a.style[b]=m[b];return g},db=W.documentElement;(function(){function a(){var a=W.documentElement;a.appendChild(e);l.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";c=d=k=!1;g=m=!0;if(h.getComputedStyle){var f=h.getComputedStyle(l);
c="1%"!==(f||{}).top;k="2px"===(f||{}).marginLeft;d="4px"===(f||{width:"4px"}).width;l.style.marginRight="50%";g="4px"===(f||{marginRight:"4px"}).marginRight;f=l.appendChild(W.createElement("div"));f.style.cssText=l.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";f.style.marginRight=f.style.width="0";l.style.width="1px";m=!parseFloat((h.getComputedStyle(f)||{}).marginRight);l.removeChild(f)}l.style.display=
"none";if(b=0===l.getClientRects().length)if(l.style.display="",l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",l.childNodes[0].style.borderCollapse="separate",f=l.getElementsByTagName("td"),f[0].style.cssText="margin:0;border:0;padding:0;display:none",b=0===f[0].offsetHeight)f[0].style.display="",f[1].style.display="none",b=0===f[0].offsetHeight;a.removeChild(e)}var c,g,d,b,m,k,e=W.createElement("div"),l=W.createElement("div");l.style&&(l.style.cssText="float:left;opacity:.5",N.opacity=
"0.5"===l.style.opacity,N.cssFloat=!!l.style.cssFloat,l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",N.clearCloneStyle="content-box"===l.style.backgroundClip,e=W.createElement("div"),e.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",l.innerHTML="",e.appendChild(l),N.boxSizing=""===l.style.boxSizing||""===l.style.MozBoxSizing||""===l.style.WebkitBoxSizing,v.extend(N,{reliableHiddenOffsets:function(){null==c&&a();
return b},boxSizingReliable:function(){null==c&&a();return d},pixelMarginRight:function(){null==c&&a();return g},pixelPosition:function(){null==c&&a();return c},reliableMarginRight:function(){null==c&&a();return m},reliableMarginLeft:function(){null==c&&a();return k}}))})();var $a=/^(top|right|bottom|left)$/;if(h.getComputedStyle){var ac=function(a){var c=a.ownerDocument.defaultView;c&&c.opener||(c=h);return c.getComputedStyle(a)};var bc=function(a,c,g){var d=a.style;var b=(g=g||ac(a))?g.getPropertyValue(c)||
g[c]:void 0;""!==b&&void 0!==b||v.contains(a.ownerDocument,a)||(b=v.style(a,c));if(g&&!N.pixelMarginRight()&&pb.test(b)&&Ic.test(c)){a=d.width;c=d.minWidth;var m=d.maxWidth;d.minWidth=d.maxWidth=d.width=b;b=g.width;d.width=a;d.minWidth=c;d.maxWidth=m}return void 0===b?b:b+""}}else db.currentStyle&&(ac=function(a){return a.currentStyle},bc=function(a,c,g){var d,b,m=a.style;var k=(g=g||ac(a))?g[c]:void 0;null==k&&m&&m[c]&&(k=m[c]);if(pb.test(k)&&!$a.test(c)){g=m.left;if(b=(d=a.runtimeStyle)&&d.left)d.left=
a.currentStyle.left;m.left="fontSize"===c?"1em":k;k=m.pixelLeft+"px";m.left=g;b&&(d.left=b)}return void 0===k?k:k+""||"auto"});var ab=/alpha\([^)]*\)/i,Lb=/opacity\s*=\s*([^)]*)/i,Cb=/^(none|table(?!-c[ea]).+)/,rc=new RegExp("^("+rd+")(.*)$","i"),pe={position:"absolute",visibility:"hidden",display:"block"},Nd={letterSpacing:"0",fontWeight:"400"},Me=["Webkit","O","Moz","ms"],Le=W.createElement("div").style;v.extend({cssHooks:{opacity:{get:function(a,c){if(c)return a=bc(a,"opacity"),""===a?"1":a}}},
cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":N.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,g,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var b,m=v.camelCase(c),k=a.style;c=v.cssProps[m]||(v.cssProps[m]=V(m)||m);var e=v.cssHooks[c]||v.cssHooks[m];if(void 0!==g){var l=typeof g;"string"===l&&(b=Zb.exec(g))&&b[1]&&(g=y(a,c,b),l="number");
if(null!=g&&g===g&&("number"===l&&(g+=b&&b[3]||(v.cssNumber[m]?"":"px")),N.clearCloneStyle||""!==g||0!==c.indexOf("background")||(k[c]="inherit"),!(e&&"set"in e)||void 0!==(g=e.set(a,g,d))))try{k[c]=g}catch(hf){}}else return e&&"get"in e&&void 0!==(b=e.get(a,!1,d))?b:k[c]}},css:function(a,c,g,d){var b;var m=v.camelCase(c);c=v.cssProps[m]||(v.cssProps[m]=V(m)||m);(m=v.cssHooks[c]||v.cssHooks[m])&&"get"in m&&(b=m.get(a,!0,g));void 0===b&&(b=bc(a,c,d));"normal"===b&&c in Nd&&(b=Nd[c]);return""===g||
g?(a=parseFloat(b),!0===g||isFinite(a)?a||0:b):b}});v.each(["height","width"],function(a,c){v.cssHooks[c]={get:function(a,g,d){if(g)return Cb.test(v.css(a,"display"))&&0===a.offsetWidth?ib(a,pe,function(){return da(a,c,d)}):da(a,c,d)},set:function(a,g,d){var b=d&&ac(a);return U(a,g,d?X(a,c,d,N.boxSizing&&"border-box"===v.css(a,"boxSizing",!1,b),b):0)}}});N.opacity||(v.cssHooks.opacity={get:function(a,c){return Lb.test((c&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+
"":c?"1":""},set:function(a,c){var g=a.style;a=a.currentStyle;var d=v.isNumeric(c)?"alpha(opacity="+100*c+")":"",b=a&&a.filter||g.filter||"";g.zoom=1;if((1<=c||""===c)&&""===v.trim(b.replace(ab,""))&&g.removeAttribute&&(g.removeAttribute("filter"),""===c||a&&!a.filter))return;g.filter=ab.test(b)?b.replace(ab,d):b+" "+d}});v.cssHooks.marginRight=ia(N.reliableMarginRight,function(a,c){if(c)return ib(a,{display:"inline-block"},bc,[a,"marginRight"])});v.cssHooks.marginLeft=ia(N.reliableMarginLeft,function(a,
c){if(c)return(parseFloat(bc(a,"marginLeft"))||(v.contains(a.ownerDocument,a)?a.getBoundingClientRect().left-ib(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}):0))+"px"});v.each({margin:"",padding:"",border:"Width"},function(a,c){v.cssHooks[a+c]={expand:function(g){var d=0,b={};for(g="string"===typeof g?g.split(" "):[g];4>d;d++)b[a+tb[d]+c]=g[d]||g[d-2]||g[0];return b}};Ic.test(a)||(v.cssHooks[a+c].set=U)});v.fn.extend({css:function(a,c){return Xc(this,function(a,c,g){var d,b=
{},m=0;if(v.isArray(c)){g=ac(a);for(d=c.length;m<d;m++)b[c[m]]=v.css(a,c[m],!1,g);return b}return void 0!==g?v.style(a,c,g):v.css(a,c)},a,c,1<arguments.length)},show:function(){return Aa(this,!0)},hide:function(){return Aa(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){Vb(this)?v(this).show():v(this).hide()})}});v.Tween=R;R.prototype={constructor:R,init:function(a,c,g,d,b,m){this.elem=a;this.prop=g;this.easing=b||v.easing._default;this.options=
c;this.start=this.now=this.cur();this.end=d;this.unit=m||(v.cssNumber[g]?"":"px")},cur:function(){var a=R.propHooks[this.prop];return a&&a.get?a.get(this):R.propHooks._default.get(this)},run:function(a){var c,g=R.propHooks[this.prop];this.pos=this.options.duration?c=v.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):c=a;this.now=(this.end-this.start)*c+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);g&&g.set?g.set(this):R.propHooks._default.set(this);
return this}};R.prototype.init.prototype=R.prototype;R.propHooks={_default:{get:function(a){return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(a=v.css(a.elem,a.prop,""))&&"auto"!==a?a:0},set:function(a){if(v.fx.step[a.prop])v.fx.step[a.prop](a);else 1!==a.elem.nodeType||null==a.elem.style[v.cssProps[a.prop]]&&!v.cssHooks[a.prop]?a.elem[a.prop]=a.now:v.style(a.elem,a.prop,a.now+a.unit)}}};R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&
a.elem.parentNode&&(a.elem[a.prop]=a.now)}};v.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"};v.fx=R.prototype.init;v.fx.step={};var Wb,uc,td=/^(?:toggle|show|hide)$/,Ja=/queueHooks$/;v.Animation=v.extend(ea,{tweeners:{"*":[function(a,c){var g=this.createTween(a,c);y(g.elem,a,Zb.exec(c),g);return g}]},tweener:function(a,c){v.isFunction(a)?(c=a,a=["*"]):a=a.match(gb);for(var g,d=0,b=a.length;d<b;d++)g=a[d],ea.tweeners[g]=ea.tweeners[g]||[],ea.tweeners[g].unshift(c)},
prefilters:[function(a,c,g){var d,b=this,m={},k=a.style,e=a.nodeType&&Vb(a),l=v._data(a,"fxshow");if(!g.queue){var f=v._queueHooks(a,"fx");if(null==f.unqueued){f.unqueued=0;var h=f.empty.fire;f.empty.fire=function(){f.unqueued||h()}}f.unqueued++;b.always(function(){b.always(function(){f.unqueued--;v.queue(a,"fx").length||f.empty.fire()})})}if(1===a.nodeType&&("height"in c||"width"in c)){g.overflow=[k.overflow,k.overflowX,k.overflowY];var u=v.css(a,"display");var A="none"===u?v._data(a,"olddisplay")||
Q(a.nodeName):u;"inline"===A&&"none"===v.css(a,"float")&&(N.inlineBlockNeedsLayout&&"inline"!==Q(a.nodeName)?k.zoom=1:k.display="inline-block")}g.overflow&&(k.overflow="hidden",N.shrinkWrapBlocks()||b.always(function(){k.overflow=g.overflow[0];k.overflowX=g.overflow[1];k.overflowY=g.overflow[2]}));for(d in c)if(A=c[d],td.exec(A)){delete c[d];var q=q||"toggle"===A;if(A===(e?"hide":"show"))if("show"===A&&l&&void 0!==l[d])e=!0;else continue;m[d]=l&&l[d]||v.style(a,d)}else u=void 0;if(v.isEmptyObject(m))"inline"===
("none"===u?Q(a.nodeName):u)&&(k.display=u);else for(d in l?"hidden"in l&&(e=l.hidden):l=v._data(a,"fxshow",{}),q&&(l.hidden=!e),e?v(a).show():b.done(function(){v(a).hide()}),b.done(function(){var c;v._removeData(a,"fxshow");for(c in m)v.style(a,c,m[c])}),m)c=qa(e?l[d]:0,d,b),d in l||(l[d]=c.start,e&&(c.end=c.start,c.start="width"===d||"height"===d?1:0))}],prefilter:function(a,c){c?ea.prefilters.unshift(a):ea.prefilters.push(a)}});v.speed=function(a,c,g){var d=a&&"object"===typeof a?v.extend({},a):
{complete:g||!g&&c||v.isFunction(a)&&a,duration:a,easing:g&&c||c&&!v.isFunction(c)&&c};d.duration=v.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in v.fx.speeds?v.fx.speeds[d.duration]:v.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){v.isFunction(d.old)&&d.old.call(this);d.queue&&v.dequeue(this,d.queue)};return d};v.fn.extend({fadeTo:function(a,c,g,d){return this.filter(Vb).css("opacity",0).show().end().animate({opacity:c},a,g,d)},
animate:function(a,c,g,d){var b=v.isEmptyObject(a),m=v.speed(c,g,d);c=function(){var c=ea(this,v.extend({},a),m);(b||v._data(this,"finish"))&&c.stop(!0)};c.finish=c;return b||!1===m.queue?this.each(c):this.queue(m.queue,c)},stop:function(a,c,g){var d=function(a){var c=a.stop;delete a.stop;c(g)};"string"!==typeof a&&(g=c,c=a,a=void 0);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var c=!0,b=null!=a&&a+"queueHooks",m=v.timers,k=v._data(this);if(b)k[b]&&k[b].stop&&d(k[b]);else for(b in k)k[b]&&
k[b].stop&&Ja.test(b)&&d(k[b]);for(b=m.length;b--;)m[b].elem!==this||null!=a&&m[b].queue!==a||(m[b].anim.stop(g),c=!1,m.splice(b,1));!c&&g||v.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var c=v._data(this),g=c[a+"queue"];var d=c[a+"queueHooks"];var b=v.timers,m=g?g.length:0;c.finish=!0;v.queue(this,a,[]);d&&d.stop&&d.stop.call(this,!0);for(d=b.length;d--;)b[d].elem===this&&b[d].queue===a&&(b[d].anim.stop(!0),b.splice(d,1));for(d=0;d<m;d++)g[d]&&g[d].finish&&
g[d].finish.call(this);delete c.finish})}});v.each(["toggle","show","hide"],function(a,c){var g=v.fn[c];v.fn[c]=function(a,d,b){return null==a||"boolean"===typeof a?g.apply(this,arguments):this.animate(sa(c,!0),a,d,b)}});v.each({slideDown:sa("show"),slideUp:sa("hide"),slideToggle:sa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,c){v.fn[a]=function(a,g,d){return this.animate(c,a,g,d)}});v.timers=[];v.fx.tick=function(){var a=v.timers,c=0;for(Wb=
v.now();c<a.length;c++){var g=a[c];g()||a[c]!==g||a.splice(c--,1)}a.length||v.fx.stop();Wb=void 0};v.fx.timer=function(a){v.timers.push(a);a()?v.fx.start():v.timers.pop()};v.fx.interval=13;v.fx.start=function(){uc||(uc=h.setInterval(v.fx.tick,v.fx.interval))};v.fx.stop=function(){h.clearInterval(uc);uc=null};v.fx.speeds={slow:600,fast:200,_default:400};v.fn.delay=function(a,c){a=v.fx?v.fx.speeds[a]||a:a;return this.queue(c||"fx",function(c,g){var d=h.setTimeout(c,a);g.stop=function(){h.clearTimeout(d)}})};
(function(){var a=W.createElement("input");W.createElement("div");var c=W.createElement("select"),g=c.appendChild(W.createElement("option"));var d=W.createElement("div");d.setAttribute("className","t");d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";d.getElementsByTagName("a");a.setAttribute("type","checkbox");d.appendChild(a);var b=d.getElementsByTagName("a")[0];b.style.cssText="top:1px";N.getSetAttribute="t"!==d.className;N.style=/top/.test(b.getAttribute("style"));
N.hrefNormalized="/a"===b.getAttribute("href");N.checkOn=!!a.value;N.optSelected=g.selected;N.enctype=!!W.createElement("form").enctype;c.disabled=!0;N.optDisabled=!g.disabled;a=W.createElement("input");a.setAttribute("value","");N.input=""===a.getAttribute("value");a.value="t";a.setAttribute("type","radio");N.radioValue="t"===a.value})();var Od=/\r/g,rf=/[\x20\t\r\n\f]+/g;v.fn.extend({val:function(a){var c,g,d=this[0];if(arguments.length){var b=v.isFunction(a);return this.each(function(g){1===this.nodeType&&
(g=b?a.call(this,g,v(this).val()):a,null==g?g="":"number"===typeof g?g+="":v.isArray(g)&&(g=v.map(g,function(a){return null==a?"":a+""})),c=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&void 0!==c.set(this,g,"value")||(this.value=g))})}if(d){if((c=v.valHooks[d.type]||v.valHooks[d.nodeName.toLowerCase()])&&"get"in c&&void 0!==(g=c.get(d,"value")))return g;g=d.value;return"string"===typeof g?g.replace(Od,""):null==g?"":g}}});v.extend({valHooks:{option:{get:function(a){var c=
v.find.attr(a,"value");return null!=c?c:v.trim(v.text(a)).replace(rf," ")}},select:{get:function(a){for(var c,g=a.options,d=a.selectedIndex,b=(a="select-one"===a.type||0>d)?null:[],m=a?d+1:g.length,k=0>d?m:a?d:0;k<m;k++)if(c=g[k],!(!c.selected&&k!==d||(N.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&v.nodeName(c.parentNode,"optgroup"))){c=v(c).val();if(a)return c;b.push(c)}return b},set:function(a,c){for(var g,d=a.options,b=v.makeArray(c),m=d.length;m--;)if(c=d[m],
-1<v.inArray(v.valHooks.option.get(c),b))try{c.selected=g=!0}catch(ua){c.scrollHeight}else c.selected=!1;g||(a.selectedIndex=-1);return d}}}});v.each(["radio","checkbox"],function(){v.valHooks[this]={set:function(a,c){if(v.isArray(c))return a.checked=-1<v.inArray(v(a).val(),c)}};N.checkOn||(v.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var Ta=v.expr.attrHandle,Pd=/^(?:checked|selected)$/i,vb=N.getSetAttribute,Zc=N.input;v.fn.extend({attr:function(a,c){return Xc(this,
v.attr,a,c,1<arguments.length)},removeAttr:function(a){return this.each(function(){v.removeAttr(this,a)})}});v.extend({attr:function(a,c,g){var d,b=a.nodeType;if(3!==b&&8!==b&&2!==b){if("undefined"===typeof a.getAttribute)return v.prop(a,c,g);if(1!==b||!v.isXMLDoc(a)){c=c.toLowerCase();var m=v.attrHooks[c]||(v.expr.match.bool.test(c)?mg:vc)}if(void 0!==g){if(null===g){v.removeAttr(a,c);return}if(m&&"set"in m&&void 0!==(d=m.set(a,g,c)))return d;a.setAttribute(c,g+"");return g}if(m&&"get"in m&&null!==
(d=m.get(a,c)))return d;d=v.find.attr(a,c);return null==d?void 0:d}},attrHooks:{type:{set:function(a,c){if(!N.radioValue&&"radio"===c&&v.nodeName(a,"input")){var g=a.value;a.setAttribute("type",c);g&&(a.value=g);return c}}}},removeAttr:function(a,c){var g=0,d=c&&c.match(gb);if(d&&1===a.nodeType)for(;c=d[g++];){var b=v.propFix[c]||c;v.expr.match.bool.test(c)?Zc&&vb||!Pd.test(c)?a[b]=!1:a[v.camelCase("default-"+c)]=a[b]=!1:v.attr(a,c,"");a.removeAttribute(vb?c:b)}}});var mg={set:function(a,c,g){!1===
c?v.removeAttr(a,g):Zc&&vb||!Pd.test(g)?a.setAttribute(!vb&&v.propFix[g]||g,g):a[v.camelCase("default-"+g)]=a[g]=!0;return g}};v.each(v.expr.match.bool.source.match(/\w+/g),function(a,c){var g=Ta[c]||v.find.attr;Zc&&vb||!Pd.test(c)?Ta[c]=function(a,c,d){if(!d){var b=Ta[c];Ta[c]=m;var m=null!=g(a,c,d)?c.toLowerCase():null;Ta[c]=b}return m}:Ta[c]=function(a,c,g){if(!g)return a[v.camelCase("default-"+c)]?c.toLowerCase():null}});Zc&&vb||(v.attrHooks.value={set:function(a,c,g){if(v.nodeName(a,"input"))a.defaultValue=
c;else return vc&&vc.set(a,c,g)}});if(!vb){var vc={set:function(a,c,g){var d=a.getAttributeNode(g);d||a.setAttributeNode(d=a.ownerDocument.createAttribute(g));d.value=c+="";if("value"===g||c===a.getAttribute(g))return c}};Ta.id=Ta.name=Ta.coords=function(a,c,g){var d;if(!g)return(d=a.getAttributeNode(c))&&""!==d.value?d.value:null};v.valHooks.button={get:function(a,c){if((a=a.getAttributeNode(c))&&a.specified)return a.value},set:vc.set};v.attrHooks.contenteditable={set:function(a,c,g){vc.set(a,""===
c?!1:c,g)}};v.each(["width","height"],function(a,c){v.attrHooks[c]={set:function(a,g){if(""===g)return a.setAttribute(c,"auto"),g}}})}N.style||(v.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,c){return a.style.cssText=c+""}});var ng=/^(?:input|select|textarea|button|object)$/i,Qd=/^(?:a|area)$/i;v.fn.extend({prop:function(a,c){return Xc(this,v.prop,a,c,1<arguments.length)},removeProp:function(a){a=v.propFix[a]||a;return this.each(function(){try{this[a]=void 0,delete this[a]}catch(na){}})}});
v.extend({prop:function(a,c,g){var d,b=a.nodeType;if(3!==b&&8!==b&&2!==b){if(1!==b||!v.isXMLDoc(a)){c=v.propFix[c]||c;var m=v.propHooks[c]}return void 0!==g?m&&"set"in m&&void 0!==(d=m.set(a,g,c))?d:a[c]=g:m&&"get"in m&&null!==(d=m.get(a,c))?d:a[c]}},propHooks:{tabIndex:{get:function(a){var c=v.find.attr(a,"tabindex");return c?parseInt(c,10):ng.test(a.nodeName)||Qd.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});N.hrefNormalized||v.each(["href","src"],function(a,c){v.propHooks[c]=
{get:function(a){return a.getAttribute(c,4)}}});N.optSelected||(v.propHooks.selected={get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null},set:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex}});v.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){v.propFix[this.toLowerCase()]=this});N.enctype||(v.propFix.enctype="encoding");var Rd=
/[\t\r\n\f]/g;v.fn.extend({addClass:function(a){var c,g,d,b,m,k=0;if(v.isFunction(a))return this.each(function(c){v(this).addClass(a.call(this,c,Ya(this)))});if("string"===typeof a&&a)for(c=a.match(gb)||[];g=this[k++];){var e=Ya(g);if(d=1===g.nodeType&&(" "+e+" ").replace(Rd," ")){for(m=0;b=c[m++];)0>d.indexOf(" "+b+" ")&&(d+=b+" ");d=v.trim(d);e!==d&&v.attr(g,"class",d)}}return this},removeClass:function(a){var c,g,d,b,m,k=0;if(v.isFunction(a))return this.each(function(c){v(this).removeClass(a.call(this,
c,Ya(this)))});if(!arguments.length)return this.attr("class","");if("string"===typeof a&&a)for(c=a.match(gb)||[];g=this[k++];){var e=Ya(g);if(d=1===g.nodeType&&(" "+e+" ").replace(Rd," ")){for(m=0;b=c[m++];)for(;-1<d.indexOf(" "+b+" ");)d=d.replace(" "+b+" "," ");d=v.trim(d);e!==d&&v.attr(g,"class",d)}}return this},toggleClass:function(a,c){var g=typeof a;return"boolean"===typeof c&&"string"===g?c?this.addClass(a):this.removeClass(a):v.isFunction(a)?this.each(function(g){v(this).toggleClass(a.call(this,
g,Ya(this),c),c)}):this.each(function(){var c,d;if("string"===g){var b=0;var m=v(this);for(d=a.match(gb)||[];c=d[b++];)m.hasClass(c)?m.removeClass(c):m.addClass(c)}else if(void 0===a||"boolean"===g)(c=Ya(this))&&v._data(this,"__className__",c),v.attr(this,"class",c||!1===a?"":v._data(this,"__className__")||"")})},hasClass:function(a){var c,g=0;for(a=" "+a+" ";c=this[g++];)if(1===c.nodeType&&-1<(" "+Ya(c)+" ").replace(Rd," ").indexOf(a))return!0;return!1}});v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,c){v.fn[c]=function(a,g){return 0<arguments.length?this.on(c,null,a,g):this.trigger(c)}});v.fn.extend({hover:function(a,c){return this.mouseenter(a).mouseleave(c||a)}});var Sd=h.location,sf=v.now(),tf=/\?/,S=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;v.parseJSON=function(a){if(h.JSON&&h.JSON.parse)return h.JSON.parse(a+"");var c,g=null,d=v.trim(a+"");return d&&!v.trim(d.replace(S,function(a,d,b,m){c&&
d&&(g=0);if(0===g)return a;c=b||d;g+=!m-!b;return""}))?Function("return "+d)():v.error("Invalid JSON: "+a)};v.parseXML=function(a){if(!a||"string"!==typeof a)return null;try{if(h.DOMParser){var c=new h.DOMParser;var g=c.parseFromString(a,"text/xml")}else g=new h.ActiveXObject("Microsoft.XMLDOM"),g.async="false",g.loadXML(a)}catch(Ub){g=void 0}g&&g.documentElement&&!g.getElementsByTagName("parsererror").length||v.error("Invalid XML: "+a);return g};var sb=/#.*$/,uf=/([?&])_=[^&]*/,og=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,
Td=/^(?:GET|HEAD)$/,We=/^\/\//,vf=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Qb={},Ne={},Db="*/".concat("*"),ic=Sd.href,$c=vf.exec(ic.toLowerCase())||[];v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ic,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test($c[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Db,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",
json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,c){return c?Za(Za(a,v.ajaxSettings),c):Za(v.ajaxSettings,a)},ajaxPrefilter:Va(Qb),ajaxTransport:Va(Ne),ajax:function(a,c){function g(a,c,g,d){var l=c;if(2!==z){z=2;m&&h.clearTimeout(m);
e=void 0;b=d||"";B.readyState=0<a?4:0;d=200<=a&&300>a||304===a;if(g){var r=f;for(var p=B,x,L,C,F,E=r.contents,Q=r.dataTypes;"*"===Q[0];)Q.shift(),void 0===L&&(L=r.mimeType||p.getResponseHeader("Content-Type"));if(L)for(F in E)if(E[F]&&E[F].test(L)){Q.unshift(F);break}if(Q[0]in g)C=Q[0];else{for(F in g){if(!Q[0]||r.converters[F+" "+Q[0]]){C=F;break}x||(x=F)}C=C||x}C?(C!==Q[0]&&Q.unshift(C),r=g[C]):r=void 0}a:{g=f;x=r;L=B;C=d;var H;p={};E=g.dataTypes.slice();if(E[1])for(V in g.converters)p[V.toLowerCase()]=
g.converters[V];for(F=E.shift();F;){g.responseFields[F]&&(L[g.responseFields[F]]=x);!G&&C&&g.dataFilter&&(x=g.dataFilter(x,g.dataType));var G=F;if(F=E.shift())if("*"===F)F=G;else if("*"!==G&&G!==F){var V=p[G+" "+F]||p["* "+F];if(!V)for(H in p)if(r=H.split(" "),r[1]===F&&(V=p[G+" "+r[0]]||p["* "+r[0]])){!0===V?V=p[H]:!0!==p[H]&&(F=r[0],E.unshift(r[1]));break}if(!0!==V)if(V&&g["throws"])x=V(x);else try{x=V(x)}catch(Te){r={state:"parsererror",error:V?Te:"No conversion from "+G+" to "+F};break a}}}r=
{state:"success",data:x}}if(d)if(f.ifModified&&((l=B.getResponseHeader("Last-Modified"))&&(v.lastModified[M]=l),(l=B.getResponseHeader("etag"))&&(v.etag[M]=l)),204===a||"HEAD"===f.type)l="nocontent";else if(304===a)l="notmodified";else{l=r.state;var X=r.data;var da=r.error;d=!da}else if(da=l,a||!l)l="error",0>a&&(a=0);B.status=a;B.statusText=(c||l)+"";d?q.resolveWith(u,[X,l,B]):q.rejectWith(u,[B,l,da]);B.statusCode(y);y=void 0;k&&A.trigger(d?"ajaxSuccess":"ajaxError",[B,f,d?X:da]);t.fireWith(u,[B,
l]);k&&(A.trigger("ajaxComplete",[B,f]),--v.active||v.event.trigger("ajaxStop"))}}"object"===typeof a&&(c=a,a=void 0);c=c||{};var d,b,m,k,e,l,f=v.ajaxSetup({},c),u=f.context||f,A=f.context&&(u.nodeType||u.jquery)?v(u):v.event,q=v.Deferred(),t=v.Callbacks("once memory"),y=f.statusCode||{},r={},p={},z=0,x="canceled",B={readyState:0,getResponseHeader:function(a){var c;if(2===z){if(!l)for(l={};c=og.exec(b);)l[c[1].toLowerCase()]=c[2];c=l[a.toLowerCase()]}return null==c?null:c},getAllResponseHeaders:function(){return 2===
z?b:null},setRequestHeader:function(a,c){var g=a.toLowerCase();z||(a=p[g]=p[g]||a,r[a]=c);return this},overrideMimeType:function(a){z||(f.mimeType=a);return this},statusCode:function(a){var c;if(a)if(2>z)for(c in a)y[c]=[y[c],a[c]];else B.always(a[B.status]);return this},abort:function(a){a=a||x;e&&e.abort(a);g(0,a);return this}};q.promise(B).complete=t.add;B.success=B.done;B.error=B.fail;f.url=((a||f.url||ic)+"").replace(sb,"").replace(We,$c[1]+"//");f.type=c.method||c.type||f.method||f.type;f.dataTypes=
v.trim(f.dataType||"*").toLowerCase().match(gb)||[""];null==f.crossDomain&&(a=vf.exec(f.url.toLowerCase()),f.crossDomain=!(!a||a[1]===$c[1]&&a[2]===$c[2]&&(a[3]||("http:"===a[1]?"80":"443"))===($c[3]||("http:"===$c[1]?"80":"443"))));f.data&&f.processData&&"string"!==typeof f.data&&(f.data=v.param(f.data,f.traditional));ub(Qb,f,c,B);if(2===z)return B;(k=v.event&&f.global)&&0===v.active++&&v.event.trigger("ajaxStart");f.type=f.type.toUpperCase();f.hasContent=!Td.test(f.type);var M=f.url;f.hasContent||
(f.data&&(M=f.url+=(tf.test(M)?"&":"?")+f.data,delete f.data),!1===f.cache&&(f.url=uf.test(M)?M.replace(uf,"$1_="+sf++):M+(tf.test(M)?"&":"?")+"_="+sf++));f.ifModified&&(v.lastModified[M]&&B.setRequestHeader("If-Modified-Since",v.lastModified[M]),v.etag[M]&&B.setRequestHeader("If-None-Match",v.etag[M]));(f.data&&f.hasContent&&!1!==f.contentType||c.contentType)&&B.setRequestHeader("Content-Type",f.contentType);B.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+
("*"!==f.dataTypes[0]?", "+Db+"; q=0.01":""):f.accepts["*"]);for(d in f.headers)B.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(u,B,f)||2===z))return B.abort();x="abort";for(d in{success:1,error:1,complete:1})B[d](f[d]);if(e=ub(Ne,f,c,B)){B.readyState=1;k&&A.trigger("ajaxSend",[B,f]);if(2===z)return B;f.async&&0<f.timeout&&(m=h.setTimeout(function(){B.abort("timeout")},f.timeout));try{z=1,e.send(r,g)}catch(Ec){if(2>z)g(-1,Ec);else throw Ec;}}else g(-1,"No Transport");return B},
getJSON:function(a,c,g){return v.get(a,c,g,"json")},getScript:function(a,c){return v.get(a,void 0,c,"script")}});v.each(["get","post"],function(a,c){v[c]=function(a,g,d,b){v.isFunction(g)&&(b=b||d,d=g,g=void 0);return v.ajax(v.extend({url:a,type:c,dataType:b,data:g,success:d},v.isPlainObject(a)&&a))}});v._evalUrl=function(a){return v.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})};v.fn.extend({wrapAll:function(a){if(v.isFunction(a))return this.each(function(c){v(this).wrapAll(a.call(this,
c))});if(this[0]){var c=v(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return v.isFunction(a)?this.each(function(c){v(this).wrapInner(a.call(this,c))}):this.each(function(){var c=v(this),g=c.contents();g.length?g.wrapAll(a):c.append(a)})},wrap:function(a){var c=v.isFunction(a);return this.each(function(g){v(this).wrapAll(c?
a.call(this,g):a)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()}});v.expr.filters.hidden=function(a){return N.reliableHiddenOffsets()?0>=a.offsetWidth&&0>=a.offsetHeight&&!a.getClientRects().length:Ba(a)};v.expr.filters.visible=function(a){return!v.expr.filters.hidden(a)};var ad=/%20/g,Oe=/\[\]$/,Mb=/\r?\n/g,pg=/^(?:submit|button|image|reset|file)$/i,bd=/^(?:input|select|textarea|keygen)/i;v.param=function(a,c){var g,
d=[],b=function(a,c){c=v.isFunction(c)?c():null==c?"":c;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(c)};void 0===c&&(c=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(a)||a.jquery&&!v.isPlainObject(a))v.each(a,function(){b(this.name,this.value)});else for(g in a)Ma(g,a[g],c,b);return d.join("&").replace(ad,"+")};v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=v.prop(this,"elements");return a?
v.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!v(this).is(":disabled")&&bd.test(this.nodeName)&&!pg.test(a)&&(this.checked||!Xa.test(a))}).map(function(a,c){a=v(this).val();return null==a?null:v.isArray(a)?v.map(a,function(a){return{name:c.name,value:a.replace(Mb,"\r\n")}}):{name:c.name,value:a.replace(Mb,"\r\n")}}).get()}});v.ajaxSettings.xhr=void 0!==h.ActiveXObject?function(){return this.isLocal?Qa():8<W.documentMode?Ea():/^(get|post|head|put|delete|options)$/i.test(this.type)&&
Ea()||Qa()}:Ea;var qe=0,wc={},xc=v.ajaxSettings.xhr();h.attachEvent&&h.attachEvent("onunload",function(){for(var a in wc)wc[a](void 0,!0)});N.cors=!!xc&&"withCredentials"in xc;(xc=N.ajax=!!xc)&&v.ajaxTransport(function(a){if(!a.crossDomain||N.cors){var c;return{send:function(g,d){var b,m=a.xhr(),k=++qe;m.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(b in a.xhrFields)m[b]=a.xhrFields[b];a.mimeType&&m.overrideMimeType&&m.overrideMimeType(a.mimeType);a.crossDomain||g["X-Requested-With"]||
(g["X-Requested-With"]="XMLHttpRequest");for(b in g)void 0!==g[b]&&m.setRequestHeader(b,g[b]+"");m.send(a.hasContent&&a.data||null);c=function(g,b){if(c&&(b||4===m.readyState))if(delete wc[k],c=void 0,m.onreadystatechange=v.noop,b)4!==m.readyState&&m.abort();else{var e={};var l=m.status;"string"===typeof m.responseText&&(e.text=m.responseText);try{var f=m.statusText}catch(Gd){f=""}l||!a.isLocal||a.crossDomain?1223===l&&(l=204):l=e.text?200:404}e&&d(l,f,e,m.getAllResponseHeaders())};a.async?4===m.readyState?
h.setTimeout(c):m.onreadystatechange=wc[k]=c:c()},abort:function(){c&&c(void 0,!0)}}}});v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){v.globalEval(a);return a}}});v.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});v.ajaxTransport("script",function(a){if(a.crossDomain){var c,g=W.head||
v("head")[0]||W.documentElement;return{send:function(d,b){c=W.createElement("script");c.async=!0;a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,g){if(g||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,g||b(200,"success")};g.insertBefore(c,g.firstChild)},abort:function(){if(c)c.onload(void 0,!0)}}}});var Jc=[],ud=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",
jsonpCallback:function(){var a=Jc.pop()||v.expando+"_"+sf++;this[a]=!0;return a}});v.ajaxPrefilter("json jsonp",function(a,c,g){var d,b=!1!==a.jsonp&&(ud.test(a.url)?"url":"string"===typeof a.data&&0===(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&ud.test(a.data)&&"data");if(b||"jsonp"===a.dataTypes[0]){var m=a.jsonpCallback=v.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback;b?a[b]=a[b].replace(ud,"$1"+m):!1!==a.jsonp&&(a.url+=(tf.test(a.url)?"&":"?")+a.jsonp+"="+
m);a.converters["script json"]=function(){d||v.error(m+" was not called");return d[0]};a.dataTypes[0]="json";var k=h[m];h[m]=function(){d=arguments};g.always(function(){void 0===k?v(h).removeProp(m):h[m]=k;a[m]&&(a.jsonpCallback=c.jsonpCallback,Jc.push(m));d&&v.isFunction(k)&&k(d[0]);d=k=void 0});return"script"}});v.parseHTML=function(a,c,g){if(!a||"string"!==typeof a)return null;"boolean"===typeof c&&(g=c,c=!1);c=c||W;var d=Pb.exec(a);g=!g&&[];if(d)return[c.createElement(d[1])];d=B([a],c,g);g&&g.length&&
v(g).remove();return v.merge([],d.childNodes)};var cd=v.fn.load;v.fn.load=function(a,c,g){if("string"!==typeof a&&cd)return cd.apply(this,arguments);var d,b,m=this,k=a.indexOf(" ");if(-1<k){var e=v.trim(a.slice(k,a.length));a=a.slice(0,k)}v.isFunction(c)?(g=c,c=void 0):c&&"object"===typeof c&&(d="POST");0<m.length&&v.ajax({url:a,type:d||"GET",dataType:"html",data:c}).done(function(a){b=arguments;m.html(e?v("<div>").append(v.parseHTML(a)).find(e):a)}).always(g&&function(a,c){m.each(function(){g.apply(this,
b||[a.responseText,c,a])})});return this};v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,c){v.fn[c]=function(a){return this.on(c,a)}});v.expr.filters.animated=function(a){return v.grep(v.timers,function(c){return a===c.elem}).length};v.offset={setOffset:function(a,c,g){var d=v.css(a,"position"),b=v(a),m={};"static"===d&&(a.style.position="relative");var k=b.offset();var e=v.css(a,"top");var l=v.css(a,"left");("absolute"===d||"fixed"===d)&&-1<v.inArray("auto",
[e,l])?(l=b.position(),e=l.top,l=l.left):(e=parseFloat(e)||0,l=parseFloat(l)||0);v.isFunction(c)&&(c=c.call(a,g,v.extend({},k)));null!=c.top&&(m.top=c.top-k.top+e);null!=c.left&&(m.left=c.left-k.left+l);"using"in c?c.using.call(a,m):b.css(m)}};v.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(c){v.offset.setOffset(this,a,c)});var c,g={top:0,left:0},d=(c=this[0])&&c.ownerDocument;if(d){var b=d.documentElement;if(!v.contains(b,c))return g;"undefined"!==typeof c.getBoundingClientRect&&
(g=c.getBoundingClientRect());c=Ha(d);return{top:g.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:g.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}}},position:function(){if(this[0]){var a={top:0,left:0},c=this[0];if("fixed"===v.css(c,"position"))var g=c.getBoundingClientRect();else{var d=this.offsetParent();g=this.offset();v.nodeName(d[0],"html")||(a=d.offset());a.top+=v.css(d[0],"borderTopWidth",!0);a.left+=v.css(d[0],"borderLeftWidth",!0)}return{top:g.top-a.top-v.css(c,"marginTop",
!0),left:g.left-a.left-v.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&!v.nodeName(a,"html")&&"static"===v.css(a,"position");)a=a.offsetParent;return a||db})}});v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var g=/Y/.test(c);v.fn[a]=function(d){return Xc(this,function(a,d,b){var m=Ha(a);if(void 0===b)return m?c in m?m[c]:m.document.documentElement[d]:a[d];m?m.scrollTo(g?v(m).scrollLeft():b,g?b:v(m).scrollTop()):
a[d]=b},a,d,arguments.length,null)}});v.each(["top","left"],function(a,c){v.cssHooks[c]=ia(N.pixelPosition,function(a,g){if(g)return g=bc(a,c),pb.test(g)?v(a).position()[c]+"px":g})});v.each({Height:"height",Width:"width"},function(a,c){v.each({padding:"inner"+a,content:c,"":"outer"+a},function(g,d){v.fn[d]=function(d,b){var m=arguments.length&&(g||"boolean"!==typeof d),k=g||(!0===d||!0===b?"margin":"border");return Xc(this,function(c,g,d){return v.isWindow(c)?c.document.documentElement["client"+
a]:9===c.nodeType?(g=c.documentElement,Math.max(c.body["scroll"+a],g["scroll"+a],c.body["offset"+a],g["offset"+a],g["client"+a])):void 0===d?v.css(c,g,k):v.style(c,g,d,k)},c,m?d:void 0,m,null)}})});v.fn.extend({bind:function(a,c,g){return this.on(a,null,c,g)},unbind:function(a,c){return this.off(a,null,c)},delegate:function(a,c,g,d){return this.on(c,a,g,d)},undelegate:function(a,c,g){return 1===arguments.length?this.off(a,"**"):this.off(c,a||"**",g)}});v.fn.size=function(){return this.length};v.fn.andSelf=
v.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return v});var yc=h.jQuery,wf=h.$;v.noConflict=function(a){h.$===v&&(h.$=wf);a&&h.jQuery===v&&(h.jQuery=yc);return v};f||(h.jQuery=h.$=v);return v});/*
 jQuery UI - v1.10.4 - 2014-01-17
 http://jqueryui.com
 Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
 Copyright 2014 jQuery Foundation and other contributors; Licensed MIT  jQuery Color Animations v2.1.2
 https://github.com/jquery/jquery-color

 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 Date: Wed Jan 16 08:47:09 2013 -0600
*/
(function(h,f){function b(c,a){var d=c.nodeName.toLowerCase();if("area"===d){a=c.parentNode;d=a.name;if(!c.href||!d||"map"!==a.nodeName.toLowerCase())return!1;c=h("img[usemap=#"+d+"]")[0];return!!c&&e(c)}return(/input|select|textarea|button|object/.test(d)?!c.disabled:"a"===d?c.href||a:a)&&e(c)}function e(c){return h.expr.filters.visible(c)&&!h(c).parents().addBack().filter(function(){return"hidden"===h.css(this,"visibility")}).length}var d=0,k=/^ui-id-\d+$/;h.ui=h.ui||{};h.extend(h.ui,{version:"1.10.4",
keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});h.fn.extend({focus:function(c){return function(a,d){return"number"===typeof a?this.each(function(){var c=this;setTimeout(function(){h(c).focus();d&&d.call(c)},a)}):c.apply(this,arguments)}}(h.fn.focus),scrollParent:function(){var c=h.ui.ie&&
/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(h.css(this,"position"))&&/(auto|scroll)/.test(h.css(this,"overflow")+h.css(this,"overflow-y")+h.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(h.css(this,"overflow")+h.css(this,"overflow-y")+h.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!c.length?h(document):c},zIndex:function(c){if(c!==
f)return this.css("zIndex",c);if(this.length){c=h(this[0]);for(var a;c.length&&c[0]!==document;){a=c.css("position");if("absolute"===a||"relative"===a||"fixed"===a)if(a=parseInt(c.css("zIndex"),10),!isNaN(a)&&0!==a)return a;c=c.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++d)})},removeUniqueId:function(){return this.each(function(){k.test(this.id)&&h(this).removeAttr("id")})}});h.extend(h.expr[":"],{data:h.expr.createPseudo?h.expr.createPseudo(function(c){return function(a){return!!h.data(a,
c)}}):function(c,a,d){return!!h.data(c,d[3])},focusable:function(c){return b(c,!isNaN(h.attr(c,"tabindex")))},tabbable:function(c){var a=h.attr(c,"tabindex"),d=isNaN(a);return(d||0<=a)&&b(c,!d)}});h("<a>").outerWidth(1).jquery||h.each(["Width","Height"],function(c,a){function d(a,c,d,k){h.each(b,function(){c-=parseFloat(h.css(a,"padding"+this))||0;d&&(c-=parseFloat(h.css(a,"border"+this+"Width"))||0);k&&(c-=parseFloat(h.css(a,"margin"+this))||0)});return c}var b="Width"===a?["Left","Right"]:["Top",
"Bottom"],k=a.toLowerCase(),e={innerWidth:h.fn.innerWidth,innerHeight:h.fn.innerHeight,outerWidth:h.fn.outerWidth,outerHeight:h.fn.outerHeight};h.fn["inner"+a]=function(c){return c===f?e["inner"+a].call(this):this.each(function(){h(this).css(k,d(this,c)+"px")})};h.fn["outer"+a]=function(c,b){return"number"!==typeof c?e["outer"+a].call(this,c):this.each(function(){h(this).css(k,d(this,c,!0,b)+"px")})}});h.fn.addBack||(h.fn.addBack=function(c){return this.add(null==c?this.prevObject:this.prevObject.filter(c))});
h("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(h.fn.removeData=function(c){return function(a){return arguments.length?c.call(this,h.camelCase(a)):c.call(this)}}(h.fn.removeData));h.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());h.support.selectstart="onselectstart"in document.createElement("div");h.fn.extend({disableSelection:function(){return this.bind((h.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(c){c.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});
h.extend(h.ui,{plugin:{add:function(c,a,d){var b;c=h.ui[c].prototype;for(b in d)c.plugins[b]=c.plugins[b]||[],c.plugins[b].push([a,d[b]])},call:function(c,a,d){var b=c.plugins[a];if(b&&c.element[0].parentNode&&11!==c.element[0].parentNode.nodeType)for(a=0;a<b.length;a++)c.options[b[a][0]]&&b[a][1].apply(c.element,d)}},hasScroll:function(c,a){if("hidden"===h(c).css("overflow"))return!1;a=a&&"left"===a?"scrollLeft":"scrollTop";if(0<c[a])return!0;c[a]=1;var d=0<c[a];c[a]=0;return d}})})(jQuery);
(function(h,f){var b=0,e=Array.prototype.slice,d=h.cleanData;h.cleanData=function(b){for(var c=0,a;null!=(a=b[c]);c++)try{h(a).triggerHandler("remove")}catch(l){}d(b)};h.widget=function(d,c,a){var b={},k=d.split(".")[0];d=d.split(".")[1];var e=k+"-"+d;a||(a=c,c=h.Widget);h.expr[":"][e.toLowerCase()]=function(a){return!!h.data(a,e)};h[k]=h[k]||{};var f=h[k][d];var y=h[k][d]=function(a,c){if(!this._createWidget)return new y(a,c);arguments.length&&this._createWidget(a,c)};h.extend(y,f,{version:a.version,
_proto:h.extend({},a),_childConstructors:[]});var z=new c;z.options=h.widget.extend({},z.options);h.each(a,function(a,d){h.isFunction(d)?b[a]=function(){var b=function(){return c.prototype[a].apply(this,arguments)},k=function(d){return c.prototype[a].apply(this,d)};return function(){var a=this._super,c=this._superApply;this._super=b;this._superApply=k;var e=d.apply(this,arguments);this._super=a;this._superApply=c;return e}}():b[a]=d});y.prototype=h.widget.extend(z,{widgetEventPrefix:f?z.widgetEventPrefix||
d:d},b,{constructor:y,namespace:k,widgetName:d,widgetFullName:e});f?(h.each(f._childConstructors,function(a,c){a=c.prototype;h.widget(a.namespace+"."+a.widgetName,y,c._proto)}),delete f._childConstructors):c._childConstructors.push(y);h.widget.bridge(d,y)};h.widget.extend=function(d){for(var c=e.call(arguments,1),a=0,b=c.length,k,q;a<b;a++)for(k in c[a])q=c[a][k],c[a].hasOwnProperty(k)&&q!==f&&(h.isPlainObject(q)?d[k]=h.isPlainObject(d[k])?h.widget.extend({},d[k],q):h.widget.extend({},q):d[k]=q);
return d};h.widget.bridge=function(d,c){var a=c.prototype.widgetFullName||d;h.fn[d]=function(b){var k="string"===typeof b,l=e.call(arguments,1),r=this;b=!k&&l.length?h.widget.extend.apply(null,[b].concat(l)):b;k?this.each(function(){var c=h.data(this,a);if(!c)return h.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+b+"'");if(!h.isFunction(c[b])||"_"===b.charAt(0))return h.error("no such method '"+b+"' for "+d+" widget instance");var k=c[b].apply(c,l);if(k!==
c&&k!==f)return r=k&&k.jquery?r.pushStack(k.get()):k,!1}):this.each(function(){var d=h.data(this,a);d?d.option(b||{})._init():h.data(this,a,new c(b,this))});return r}};h.Widget=function(){};h.Widget._childConstructors=[];h.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(d,c){c=h(c||this.defaultElement||this)[0];this.element=h(c);this.uuid=b++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=h.widget.extend({},
this.options,this._getCreateOptions(),d);this.bindings=h();this.hoverable=h();this.focusable=h();c!==this&&(h.data(c,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===c&&this.destroy()}}),this.document=h(c.style?c.ownerDocument:c.document||c),this.window=h(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:h.noop,_getCreateEventData:h.noop,_create:h.noop,
_init:h.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(h.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:h.noop,widget:function(){return this.element},
option:function(d,c){var a=d,b;if(0===arguments.length)return h.widget.extend({},this.options);if("string"===typeof d){a={};var k=d.split(".");d=k.shift();if(k.length){var e=a[d]=h.widget.extend({},this.options[d]);for(b=0;b<k.length-1;b++)e[k[b]]=e[k[b]]||{},e=e[k[b]];d=k.pop();if(1===arguments.length)return e[d]===f?null:e[d];e[d]=c}else{if(1===arguments.length)return this.options[d]===f?null:this.options[d];a[d]=c}}this._setOptions(a);return this},_setOptions:function(d){for(var c in d)this._setOption(c,
d[c]);return this},_setOption:function(d,c){this.options[d]=c;"disabled"===d&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!c).attr("aria-disabled",c),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(d,c,a){var b,k=this;"boolean"!==typeof d&&(a=c,c=d,d=!1);a?(c=b=h(c),this.bindings=this.bindings.add(c)):
(a=c,c=this.element,b=this.widget());h.each(a,function(a,e){function l(){if(d||!0!==k.options.disabled&&!h(this).hasClass("ui-state-disabled"))return("string"===typeof e?k[e]:e).apply(k,arguments)}"string"!==typeof e&&(l.guid=e.guid=e.guid||l.guid||h.guid++);var f=a.match(/^(\w+)\s*(.*)$/);a=f[1]+k.eventNamespace;(f=f[2])?b.delegate(f,a,l):c.bind(a,l)})},_off:function(d,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;d.unbind(c).undelegate(c)},_delay:function(d,c){var a=
this;return setTimeout(function(){return("string"===typeof d?a[d]:d).apply(a,arguments)},c||0)},_hoverable:function(d){this.hoverable=this.hoverable.add(d);this._on(d,{mouseenter:function(c){h(c.currentTarget).addClass("ui-state-hover")},mouseleave:function(c){h(c.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(d){this.focusable=this.focusable.add(d);this._on(d,{focusin:function(c){h(c.currentTarget).addClass("ui-state-focus")},focusout:function(c){h(c.currentTarget).removeClass("ui-state-focus")}})},
_trigger:function(d,c,a){var b,k=this.options[d];a=a||{};c=h.Event(c);c.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase();c.target=this.element[0];if(d=c.originalEvent)for(b in d)b in c||(c[b]=d[b]);this.element.trigger(c,a);return!(h.isFunction(k)&&!1===k.apply(this.element[0],[c].concat(a))||c.isDefaultPrevented())}};h.each({show:"fadeIn",hide:"fadeOut"},function(d,c){h.Widget.prototype["_"+d]=function(a,b,k){"string"===typeof b&&(b={effect:b});var e=b?!0===b||"number"===
typeof b?c:b.effect||c:d;b=b||{};"number"===typeof b&&(b={duration:b});var l=!h.isEmptyObject(b);b.complete=k;b.delay&&a.delay(b.delay);if(l&&h.effects&&h.effects.effect[e])a[d](b);else if(e!==d&&a[e])a[e](b.duration,b.easing,k);else a.queue(function(c){h(this)[d]();k&&k.call(a[0]);c()})}})})(jQuery);
(function(h,f){var b=!1;h(document).mouseup(function(){b=!1});h.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(d){return b._mouseDown(d)}).bind("click."+this.widgetName,function(d){if(!0===h.data(d.target,b.widgetName+".preventClickEvent"))return h.removeData(d.target,b.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&h(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!b){this._mouseStarted&&this._mouseUp(e);this._mouseDownEvent=e;var d=this,k=1===e.which,c="string"===typeof this.options.cancel&&e.target.nodeName?h(e.target).closest(this.options.cancel).length:!1;if(!k||c||!this._mouseCapture(e))return!0;this.mouseDelayMet=
!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted))return e.preventDefault(),!0;!0===h.data(e.target,this.widgetName+".preventClickEvent")&&h.removeData(e.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return d._mouseMove(a)};this._mouseUpDelegate=function(a){return d._mouseUp(a)};
h(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);e.preventDefault();return b=!0}},_mouseMove:function(b){if(h.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));
return!this._mouseStarted},_mouseUp:function(b){h(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&h.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},
_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(h,f){h.widget("ui.draggable",h.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||
/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(b){var e=this.options;if(this.helper||e.disabled||0<h(b.target).closest(".ui-resizable-handle").length)return!1;
this.handle=this._getHandle(b);if(!this.handle)return!1;h(!0===e.iframeFix?"iframe":e.iframeFix).each(function(){h("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(h(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var e=this.options;this.helper=this._createHelper(b);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();
h.ui.ddmanager&&(h.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offsetParent=this.helper.offsetParent();this.offsetParentCssPosition=this.offsetParent.css("position");this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.offset.scroll=!1;h.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},
parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();h.ui.ddmanager&&!e.dropBehaviour&&h.ui.ddmanager.prepareOffsets(this,b);this._mouseDrag(b,!0);h.ui.ddmanager&&h.ui.ddmanager.dragStart(this,b);return!0},
_mouseDrag:function(b,e){"fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset());this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!e){e=this._uiHash();if(!1===this._trigger("drag",b,e))return this._mouseUp({}),!1;this.position=e.position}this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");
h.ui.ddmanager&&h.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var e=this,d=!1;h.ui.ddmanager&&!this.options.dropBehaviour&&(d=h.ui.ddmanager.drop(this,b));this.dropped&&(d=this.dropped,this.dropped=!1);if("original"===this.options.helper&&!h.contains(this.element[0].ownerDocument,this.element[0]))return!1;"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||!0===this.options.revert||h.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?h(this.helper).animate(this.originalPosition,
parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",b)&&e._clear()}):!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){h("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});h.ui.ddmanager&&h.ui.ddmanager.dragStop(this,b);return h.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){return this.options.handle?
!!h(b.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(b){var e=this.options;b=h.isFunction(e.helper)?h(e.helper.apply(this.element[0],[b])):"clone"===e.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"===e.appendTo?this.element[0].parentNode:e.appendTo);b[0]===this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"===
typeof b&&(b=b.split(" "));h.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){var b=this.offsetParent.offset();"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&
h.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&h.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var b=this.element.position();
return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b;var e=this.options;if(e.containment)if("window"===e.containment)this.containment=[h(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,h(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,h(window).scrollLeft()+h(window).width()-this.helperProportions.width-this.margins.left,h(window).scrollTop()+(h(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top];else if("document"===e.containment)this.containment=[0,0,h(document).width()-this.helperProportions.width-this.margins.left,(h(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if(e.containment.constructor===Array)this.containment=e.containment;else{"parent"===e.containment&&(e.containment=this.helper[0].parentNode);var d=h(e.containment);if(b=d[0])e="hidden"!==d.css("overflow"),this.containment=[(parseInt(d.css("borderLeftWidth"),
10)||0)+(parseInt(d.css("paddingLeft"),10)||0),(parseInt(d.css("borderTopWidth"),10)||0)+(parseInt(d.css("paddingTop"),10)||0),(e?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d.css("borderRightWidth"),10)||0)-(parseInt(d.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d.css("borderBottomWidth"),10)||0)-(parseInt(d.css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top-this.margins.bottom],this.relative_container=d}else this.containment=null},_convertPositionTo:function(b,e){e||(e=this.position);b="absolute"===b?1:-1;var d="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&h.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;this.offset.scroll||(this.offset.scroll={top:d.scrollTop(),left:d.scrollLeft()});return{top:e.top+this.offset.relative.top*b+this.offset.parent.top*b-("fixed"===this.cssPosition?
-this.scrollParent.scrollTop():this.offset.scroll.top)*b,left:e.left+this.offset.relative.left*b+this.offset.parent.left*b-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*b}},_generatePosition:function(b){var e=this.options,d="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&h.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;var k=b.pageX;var c=b.pageY;this.offset.scroll||(this.offset.scroll={top:d.scrollTop(),
left:d.scrollLeft()});if(this.originalPosition){if(this.containment){if(this.relative_container){var a=this.relative_container.offset();a=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else a=this.containment;b.pageX-this.offset.click.left<a[0]&&(k=a[0]+this.offset.click.left);b.pageY-this.offset.click.top<a[1]&&(c=a[1]+this.offset.click.top);b.pageX-this.offset.click.left>a[2]&&(k=a[2]+this.offset.click.left);b.pageY-this.offset.click.top>
a[3]&&(c=a[3]+this.offset.click.top)}e.grid&&(c=e.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY,c=a?c-this.offset.click.top>=a[1]||c-this.offset.click.top>a[3]?c:c-this.offset.click.top>=a[1]?c-e.grid[1]:c+e.grid[1]:c,k=e.grid[0]?this.originalPageX+Math.round((k-this.originalPageX)/e.grid[0])*e.grid[0]:this.originalPageX,k=a?k-this.offset.click.left>=a[0]||k-this.offset.click.left>a[2]?k:k-this.offset.click.left>=a[0]?k-e.grid[0]:k+e.grid[0]:
k)}return{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:k-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;
this.cancelHelperRemoval=!1},_trigger:function(b,e,d){d=d||this._uiHash();h.ui.plugin.call(this,b,[e,d]);"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute"));return h.Widget.prototype._trigger.call(this,b,e,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});h.ui.plugin.add("draggable","connectToSortable",{start:function(b,e){var d=h(this).data("ui-draggable"),k=d.options,c=h.extend({},
e,{item:d.element});d.sortables=[];h(k.connectToSortable).each(function(){var a=h.data(this,"ui-sortable");a&&!a.options.disabled&&(d.sortables.push({instance:a,shouldRevert:a.options.revert}),a.refreshPositions(),a._trigger("activate",b,c))})},stop:function(b,e){var d=h(this).data("ui-draggable"),k=h.extend({},e,{item:d.element});h.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=
this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,k))})},drag:function(b,e){var d=h(this).data("ui-draggable"),k=this;h.each(d.sortables,function(){var c=!1,a=this;this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=
d.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(c=!0,h.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&h.contains(a.instance.element[0],this.instance.element[0])&&(c=!1);return c}));c?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=h(k).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",
!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return e.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,
d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&
this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}});h.ui.plugin.add("draggable","cursor",{start:function(){var b=h("body"),e=h(this).data("ui-draggable").options;b.css("cursor")&&(e._cursor=b.css("cursor"));b.css("cursor",e.cursor)},stop:function(){var b=h(this).data("ui-draggable").options;b._cursor&&h("body").css("cursor",b._cursor)}});h.ui.plugin.add("draggable","opacity",{start:function(b,e){b=h(e.helper);e=h(this).data("ui-draggable").options;b.css("opacity")&&
(e._opacity=b.css("opacity"));b.css("opacity",e.opacity)},stop:function(b,e){b=h(this).data("ui-draggable").options;b._opacity&&h(e.helper).css("opacity",b._opacity)}});h.ui.plugin.add("draggable","scroll",{start:function(){var b=h(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var e=h(this).data("ui-draggable"),d=e.options,k=!1;e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName?
(d.axis&&"x"===d.axis||(e.overflowOffset.top+e.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?e.scrollParent[0].scrollTop=k=e.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-e.overflowOffset.top<d.scrollSensitivity&&(e.scrollParent[0].scrollTop=k=e.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(e.overflowOffset.left+e.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?e.scrollParent[0].scrollLeft=k=e.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-e.overflowOffset.left<
d.scrollSensitivity&&(e.scrollParent[0].scrollLeft=k=e.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-h(document).scrollTop()<d.scrollSensitivity?k=h(document).scrollTop(h(document).scrollTop()-d.scrollSpeed):h(window).height()-(b.pageY-h(document).scrollTop())<d.scrollSensitivity&&(k=h(document).scrollTop(h(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-h(document).scrollLeft()<d.scrollSensitivity?k=h(document).scrollLeft(h(document).scrollLeft()-
d.scrollSpeed):h(window).width()-(b.pageX-h(document).scrollLeft())<d.scrollSensitivity&&(k=h(document).scrollLeft(h(document).scrollLeft()+d.scrollSpeed))));!1!==k&&h.ui.ddmanager&&!d.dropBehaviour&&h.ui.ddmanager.prepareOffsets(e,b)}});h.ui.plugin.add("draggable","snap",{start:function(){var b=h(this).data("ui-draggable"),e=b.options;b.snapElements=[];h(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var d=h(this),k=d.offset();this!==b.element[0]&&b.snapElements.push({item:this,
width:d.outerWidth(),height:d.outerHeight(),top:k.top,left:k.left})})},drag:function(b,e){var d,k=h(this).data("ui-draggable"),c=k.options,a=c.snapTolerance,l=e.offset.left,f=l+k.helperProportions.width,q=e.offset.top,r=q+k.helperProportions.height;for(d=k.snapElements.length-1;0<=d;d--){var y=k.snapElements[d].left;var z=y+k.snapElements[d].width;var p=k.snapElements[d].top;var x=p+k.snapElements[d].height;if(f<y-a||l>z+a||r<p-a||q>x+a||!h.contains(k.snapElements[d].item.ownerDocument,k.snapElements[d].item))k.snapElements[d].snapping&&
k.options.snap.release&&k.options.snap.release.call(k.element,b,h.extend(k._uiHash(),{snapItem:k.snapElements[d].item})),k.snapElements[d].snapping=!1;else{if("inner"!==c.snapMode){var t=Math.abs(p-r)<=a;var B=Math.abs(x-q)<=a;var C=Math.abs(y-f)<=a;var F=Math.abs(z-l)<=a;t&&(e.position.top=k._convertPositionTo("relative",{top:p-k.helperProportions.height,left:0}).top-k.margins.top);B&&(e.position.top=k._convertPositionTo("relative",{top:x,left:0}).top-k.margins.top);C&&(e.position.left=k._convertPositionTo("relative",
{top:0,left:y-k.helperProportions.width}).left-k.margins.left);F&&(e.position.left=k._convertPositionTo("relative",{top:0,left:z}).left-k.margins.left)}var H=t||B||C||F;"outer"!==c.snapMode&&(t=Math.abs(p-q)<=a,B=Math.abs(x-r)<=a,C=Math.abs(y-l)<=a,F=Math.abs(z-f)<=a,t&&(e.position.top=k._convertPositionTo("relative",{top:p,left:0}).top-k.margins.top),B&&(e.position.top=k._convertPositionTo("relative",{top:x-k.helperProportions.height,left:0}).top-k.margins.top),C&&(e.position.left=k._convertPositionTo("relative",
{top:0,left:y}).left-k.margins.left),F&&(e.position.left=k._convertPositionTo("relative",{top:0,left:z-k.helperProportions.width}).left-k.margins.left));!k.snapElements[d].snapping&&(t||B||C||F||H)&&k.options.snap.snap&&k.options.snap.snap.call(k.element,b,h.extend(k._uiHash(),{snapItem:k.snapElements[d].item}));k.snapElements[d].snapping=t||B||C||F||H}}}});h.ui.plugin.add("draggable","stack",{start:function(){var b=this.data("ui-draggable").options;b=h.makeArray(h(b.stack)).sort(function(d,b){return(parseInt(h(d).css("zIndex"),
10)||0)-(parseInt(h(b).css("zIndex"),10)||0)});if(b.length){var e=parseInt(h(b[0]).css("zIndex"),10)||0;h(b).each(function(d){h(this).css("zIndex",e+d)});this.css("zIndex",e+b.length)}}});h.ui.plugin.add("draggable","zIndex",{start:function(b,e){b=h(e.helper);e=h(this).data("ui-draggable").options;b.css("zIndex")&&(e._zIndex=b.css("zIndex"));b.css("zIndex",e.zIndex)},stop:function(b,e){b=h(this).data("ui-draggable").options;b._zIndex&&h(e.helper).css("zIndex",b._zIndex)}})})(jQuery);
(function(h,f){h.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,e=this.options,d=e.accept;this.isover=!1;this.isout=!0;this.accept=h.isFunction(d)?d:function(b){return b.is(d)};this.proportions=function(){if(arguments.length)b=arguments[0];else return b?b:b={width:this.element[0].offsetWidth,
height:this.element[0].offsetHeight}};h.ui.ddmanager.droppables[e.scope]=h.ui.ddmanager.droppables[e.scope]||[];h.ui.ddmanager.droppables[e.scope].push(this);e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=0,e=h.ui.ddmanager.droppables[this.options.scope];b<e.length;b++)e[b]===this&&e.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,e){"accept"===b&&(this.accept=h.isFunction(e)?e:function(d){return d.is(e)});h.Widget.prototype._setOption.apply(this,
arguments)},_activate:function(b){var e=h.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);e&&this._trigger("activate",b,this.ui(e))},_deactivate:function(b){var e=h.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);e&&this._trigger("deactivate",b,this.ui(e))},_over:function(b){var e=h.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||
e.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(e)))},_out:function(b){var e=h.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(e)))},_drop:function(b,e){var d=e||h.ui.ddmanager.current,k=!1;if(!d||(d.currentItem||d.element)[0]===this.element[0])return!1;
this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=h.data(this,"ui-droppable");if(c.options.greedy&&!c.options.disabled&&c.options.scope===d.options.scope&&c.accept.call(c.element[0],d.currentItem||d.element)&&h.ui.intersect(d,h.extend(c,{offset:c.element.offset()}),c.options.tolerance))return k=!0,!1});return k?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&
this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}});h.ui.intersect=function(b,e,d){if(!e.offset)return!1;var k=(b.positionAbs||b.position.absolute).left,c=(b.positionAbs||b.position.absolute).top,a=k+b.helperProportions.width,l=c+b.helperProportions.height,f=e.offset.left,h=e.offset.top,r=f+e.proportions().width,y=h+e.proportions().height;
switch(d){case "fit":return f<=k&&a<=r&&h<=c&&l<=y;case "intersect":return f<k+b.helperProportions.width/2&&a-b.helperProportions.width/2<r&&h<c+b.helperProportions.height/2&&l-b.helperProportions.height/2<y;case "pointer":d=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left;b=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top;k=e.proportions().height;if(h=b>h&&b<h+k)e=e.proportions().width,h=d>f&&d<f+e;return h;case "touch":return(c>=h&&c<=y||
l>=h&&l<=y||c<h&&l>y)&&(k>=f&&k<=r||a>=f&&a<=r||k<f&&a>r);default:return!1}};h.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,e){var d,k=h.ui.ddmanager.droppables[b.options.scope]||[],c=e?e.type:null,a=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();var l=0;a:for(;l<k.length;l++)if(!(k[l].options.disabled||b&&!k[l].accept.call(k[l].element[0],b.currentItem||b.element))){for(d=0;d<a.length;d++)if(a[d]===k[l].element[0]){k[l].proportions().height=0;continue a}k[l].visible=
"none"!==k[l].element.css("display");k[l].visible&&("mousedown"===c&&k[l]._activate.call(k[l],e),k[l].offset=k[l].element.offset(),k[l].proportions({width:k[l].element[0].offsetWidth,height:k[l].element[0].offsetHeight}))}},drop:function(b,e){var d=!1;h.each((h.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&h.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,e)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],
b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e)))});return d},dragStart:function(b,e){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||h.ui.ddmanager.prepareOffsets(b,e)})},drag:function(b,e){b.options.refreshPositions&&h.ui.ddmanager.prepareOffsets(b,e);h.each(h.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=h.ui.intersect(b,this,this.options.tolerance);
var k=!d&&this.isover?"isout":d&&!this.isover?"isover":null;if(k){if(this.options.greedy){var c=this.options.scope;d=this.element.parents(":data(ui-droppable)").filter(function(){return h.data(this,"ui-droppable").options.scope===c});if(d.length){var a=h.data(d[0],"ui-droppable");a.greedyChild="isover"===k}}a&&"isover"===k&&(a.isover=!1,a.isout=!0,a._out.call(a,e));this[k]=!0;this["isout"===k?"isover":"isout"]=!1;this["isover"===k?"_over":"_out"].call(this,e);a&&"isout"===k&&(a.isout=!1,a.isover=
!0,a._over.call(a,e))}}})},dragStop:function(b,e){b.element.parentsUntil("body").unbind("scroll.droppable");b.options.refreshPositions||h.ui.ddmanager.prepareOffsets(b,e)}}})(jQuery);
(function(h,f){function b(d){return parseInt(d,10)||0}function e(d){return!isNaN(parseInt(d,10))}h.widget("ui.resizable",h.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var d,b=this,c=this.options;this.element.addClass("ui-resizable");
h.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(h("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),
left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),
this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=c.handles||(h(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");
if(this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var a=this.handles.split(",");this.handles={};for(d=0;d<a.length;d++){var e=h.trim(a[d]);var f="ui-resizable-"+e;var q=h("<div class='ui-resizable-handle "+f+"'></div>");q.css({zIndex:c.zIndex});"se"===e&&q.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[e]=".ui-resizable-"+e;this.element.append(q)}}this._renderAxis=function(a){var c;a=a||this.element;for(c in this.handles){this.handles[c].constructor===
String&&(this.handles[c]=h(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=h(this.handles[c],this.element);var b=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();d=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");a.css(d,b);this._proportionallyResize()}h(this.handles[c])}};this._renderAxis(this.element);this._handles=h(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){b.resizing||(this.className&&(q=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),b.axis=q&&q[1]?q[1]:"se")});c.autoHide&&(this._handles.hide(),h(this.element).addClass("ui-resizable-autohide").mouseenter(function(){c.disabled||(h(this).removeClass("ui-resizable-autohide"),b._handles.show())}).mouseleave(function(){c.disabled||b.resizing||(h(this).addClass("ui-resizable-autohide"),b._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();
var d=function(c){h(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){d(this.element);var b=this.element;this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b);b.remove()}this.originalElement.css("resize",this.originalResizeStyle);d(this.originalElement);
return this},_mouseCapture:function(d){var b,c=!1;for(b in this.handles){var a=h(this.handles[b])[0];if(a===d.target||h.contains(a,d.target))c=!0}return!this.options.disabled&&c},_mouseStart:function(d){var k=this.options;var c=this.element.position();var a=this.element;this.resizing=!0;/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:c.top,left:c.left});this._renderProxy();c=b(this.helper.css("left"));
var e=b(this.helper.css("top"));k.containment&&(c+=h(k.containment).scrollLeft()||0,e+=h(k.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:c,top:e};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()};this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()};this.originalPosition={left:c,top:e};this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-
a.height()};this.originalMousePosition={left:d.pageX,top:d.pageY};this.aspectRatio="number"===typeof k.aspectRatio?k.aspectRatio:this.originalSize.width/this.originalSize.height||1;k=h(".ui-resizable-"+this.axis).css("cursor");h("body").css("cursor","auto"===k?this.axis+"-resize":k);a.addClass("ui-resizable-resizing");this._propagate("start",d);return!0},_mouseDrag:function(d){var b=this.helper,c={};var a=this.originalMousePosition;var e=this.position.top,f=this.position.left,q=this.size.width,r=
this.size.height,y=this._change[this.axis];if(!y)return!1;a=y.apply(this,[d,d.pageX-a.left||0,d.pageY-a.top||0]);this._updateVirtualBoundaries(d.shiftKey);if(this._aspectRatio||d.shiftKey)a=this._updateRatio(a,d);a=this._respectSize(a,d);this._updateCache(a);this._propagate("resize",d);this.position.top!==e&&(c.top=this.position.top+"px");this.position.left!==f&&(c.left=this.position.left+"px");this.size.width!==q&&(c.width=this.size.width+"px");this.size.height!==r&&(c.height=this.size.height+"px");
b.css(c);!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();h.isEmptyObject(c)||this._trigger("resize",d,this.ui());return!1},_mouseStop:function(d){this.resizing=!1;var b,c=this.options;if(this._helper){var a=this._proportionallyResizeElements;a=(b=a.length&&/textarea/i.test(a[0].nodeName))&&h.ui.hasScroll(a[0],"left")?0:this.sizeDiff.height;b=b?0:this.sizeDiff.width;b={width:this.helper.width()-b,height:this.helper.height()-a};a=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null;var e=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;c.animate||this.element.css(h.extend(b,{top:e,left:a}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!c.animate&&this._proportionallyResize()}h("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",d);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(d){var b=
this.options;b={minWidth:e(b.minWidth)?b.minWidth:0,maxWidth:e(b.maxWidth)?b.maxWidth:Infinity,minHeight:e(b.minHeight)?b.minHeight:0,maxHeight:e(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||d){d=b.minHeight*this.aspectRatio;var c=b.minWidth/this.aspectRatio;var a=b.maxHeight*this.aspectRatio;var l=b.maxWidth/this.aspectRatio;d>b.minWidth&&(b.minWidth=d);c>b.minHeight&&(b.minHeight=c);a<b.maxWidth&&(b.maxWidth=a);l<b.maxHeight&&(b.maxHeight=l)}this._vBoundaries=b},_updateCache:function(d){this.offset=
this.helper.offset();e(d.left)&&(this.position.left=d.left);e(d.top)&&(this.position.top=d.top);e(d.height)&&(this.size.height=d.height);e(d.width)&&(this.size.width=d.width)},_updateRatio:function(d){var b=this.position,c=this.size,a=this.axis;e(d.height)?d.width=d.height*this.aspectRatio:e(d.width)&&(d.height=d.width/this.aspectRatio);"sw"===a&&(d.left=b.left+(c.width-d.width),d.top=null);"nw"===a&&(d.top=b.top+(c.height-d.height),d.left=b.left+(c.width-d.width));return d},_respectSize:function(d){var b=
this._vBoundaries,c=this.axis,a=e(d.width)&&b.maxWidth&&b.maxWidth<d.width,l=e(d.height)&&b.maxHeight&&b.maxHeight<d.height,f=e(d.width)&&b.minWidth&&b.minWidth>d.width,h=e(d.height)&&b.minHeight&&b.minHeight>d.height,r=this.originalPosition.left+this.originalSize.width,y=this.position.top+this.size.height,z=/sw|nw|w/.test(c);c=/nw|ne|n/.test(c);f&&(d.width=b.minWidth);h&&(d.height=b.minHeight);a&&(d.width=b.maxWidth);l&&(d.height=b.maxHeight);f&&z&&(d.left=r-b.minWidth);a&&z&&(d.left=r-b.maxWidth);
h&&c&&(d.top=y-b.minHeight);l&&c&&(d.top=y-b.maxHeight);d.width||d.height||d.left||!d.top?d.width||d.height||d.top||!d.left||(d.left=null):d.top=null;return d},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var d,b,c=this.helper||this.element;for(d=0;d<this._proportionallyResizeElements.length;d++){var a=this._proportionallyResizeElements[d];if(!this.borderDif){this.borderDif=[];var e=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")];
var f=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];for(b=0;b<e.length;b++)this.borderDif[b]=(parseInt(e[b],10)||0)+(parseInt(f[b],10)||0)}a.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var d=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||h("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++d.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(d,b){return{width:this.originalSize.width+b}},w:function(d,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(d,b,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(d,b,c){return{height:this.originalSize.height+
c}},se:function(d,b,c){return h.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[d,b,c]))},sw:function(d,b,c){return h.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[d,b,c]))},ne:function(d,b,c){return h.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[d,b,c]))},nw:function(d,b,c){return h.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[d,b,c]))}},_propagate:function(d,b){h.ui.plugin.call(this,d,[b,this.ui()]);
"resize"!==d&&this._trigger(d,b,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});h.ui.plugin.add("resizable","animate",{stop:function(d){var b=h(this).data("ui-resizable"),c=b.options,a=b._proportionallyResizeElements,e=a.length&&/textarea/i.test(a[0].nodeName),f=e&&h.ui.hasScroll(a[0],"left")?0:b.sizeDiff.height;e=
{width:b.size.width-(e?0:b.sizeDiff.width),height:b.size.height-f};f=parseInt(b.element.css("left"),10)+(b.position.left-b.originalPosition.left)||null;var q=parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top)||null;b.element.animate(h.extend(e,q&&f?{top:q,left:f}:{}),{duration:c.animateDuration,easing:c.animateEasing,step:function(){var c={width:parseInt(b.element.css("width"),10),height:parseInt(b.element.css("height"),10),top:parseInt(b.element.css("top"),10),left:parseInt(b.element.css("left"),
10)};a&&a.length&&h(a[0]).css({width:c.width,height:c.height});b._updateCache(c);b._propagate("resize",d)}})}});h.ui.plugin.add("resizable","containment",{start:function(){var d=h(this).data("ui-resizable"),k=d.element;var c=d.options.containment;if(k=c instanceof h?c.get(0):/parent/.test(c)?k.parent().get(0):c)if(d.containerElement=h(k),/document/.test(c)||c===document)d.containerOffset={left:0,top:0},d.containerPosition={left:0,top:0},d.parentData={element:h(document),left:0,top:0,width:h(document).width(),
height:h(document).height()||document.body.parentNode.scrollHeight};else{var a=h(k);var e=[];h(["Top","Right","Left","Bottom"]).each(function(c,d){e[c]=b(a.css("padding"+d))});d.containerOffset=a.offset();d.containerPosition=a.position();d.containerSize={height:a.innerHeight()-e[3],width:a.innerWidth()-e[1]};c=d.containerOffset;var f=d.containerSize.height;var q=d.containerSize.width;q=h.ui.hasScroll(k,"left")?k.scrollWidth:q;f=h.ui.hasScroll(k)?k.scrollHeight:f;d.parentData={element:k,left:c.left,
top:c.top,width:q,height:f}}},resize:function(d){var b=h(this).data("ui-resizable");var c=b.options;var a=b.containerOffset;var e=b.position;d=b._aspectRatio||d.shiftKey;var f={top:0,left:0};var q=b.containerElement;q[0]!==document&&/static/.test(q.css("position"))&&(f=a);e.left<(b._helper?a.left:0)&&(b.size.width+=b._helper?b.position.left-a.left:b.position.left-f.left,d&&(b.size.height=b.size.width/b.aspectRatio),b.position.left=c.helper?a.left:0);e.top<(b._helper?a.top:0)&&(b.size.height+=b._helper?
b.position.top-a.top:b.position.top,d&&(b.size.width=b.size.height*b.aspectRatio),b.position.top=b._helper?a.top:0);b.offset.left=b.parentData.left+b.position.left;b.offset.top=b.parentData.top+b.position.top;c=Math.abs(b.offset.left-f.left+b.sizeDiff.width);a=Math.abs((b._helper?b.offset.top-f.top:b.offset.top-a.top)+b.sizeDiff.height);e=b.containerElement.get(0)===b.element.parent().get(0);f=/relative|absolute/.test(b.containerElement.css("position"));e&&f&&(c-=Math.abs(b.parentData.left));c+b.size.width>=
b.parentData.width&&(b.size.width=b.parentData.width-c,d&&(b.size.height=b.size.width/b.aspectRatio));a+b.size.height>=b.parentData.height&&(b.size.height=b.parentData.height-a,d&&(b.size.width=b.size.height*b.aspectRatio))},stop:function(){var d=h(this).data("ui-resizable"),b=d.options,c=d.containerOffset,a=d.containerPosition,e=d.containerElement,f=h(d.helper),q=f.offset(),r=f.outerWidth()-d.sizeDiff.width;f=f.outerHeight()-d.sizeDiff.height;d._helper&&!b.animate&&/relative/.test(e.css("position"))&&
h(this).css({left:q.left-a.left-c.left,width:r,height:f});d._helper&&!b.animate&&/static/.test(e.css("position"))&&h(this).css({left:q.left-a.left-c.left,width:r,height:f})}});h.ui.plugin.add("resizable","alsoResize",{start:function(){var d=h(this).data("ui-resizable").options,b=function(c){h(c).each(function(){var a=h(this);a.data("ui-resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"!==typeof d.alsoResize||
d.alsoResize.parentNode?b(d.alsoResize):d.alsoResize.length?(d.alsoResize=d.alsoResize[0],b(d.alsoResize)):h.each(d.alsoResize,function(c){b(c)})},resize:function(d,b){d=h(this).data("ui-resizable");var c=d.options,a=d.originalSize,k=d.originalPosition,e={height:d.size.height-a.height||0,width:d.size.width-a.width||0,top:d.position.top-k.top||0,left:d.position.left-k.left||0},f=function(a,c){h(a).each(function(){var a=h(this),d=h(this).data("ui-resizable-alsoresize"),k={},l=c&&c.length?c:a.parents(b.originalElement[0]).length?
["width","height"]:["width","height","top","left"];h.each(l,function(a,c){(a=(d[c]||0)+(e[c]||0))&&0<=a&&(k[c]=a||null)});a.css(k)})};"object"!==typeof c.alsoResize||c.alsoResize.nodeType?f(c.alsoResize):h.each(c.alsoResize,function(a,c){f(a,c)})},stop:function(){h(this).removeData("resizable-alsoresize")}});h.ui.plugin.add("resizable","ghost",{start:function(){var d=h(this).data("ui-resizable"),b=d.options,c=d.size;d.ghost=d.originalElement.clone();d.ghost.css({opacity:.25,display:"block",position:"relative",
height:c.height,width:c.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"===typeof b.ghost?b.ghost:"");d.ghost.appendTo(d.helper)},resize:function(){var d=h(this).data("ui-resizable");d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(){var d=h(this).data("ui-resizable");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}});h.ui.plugin.add("resizable","grid",{resize:function(){var d=h(this).data("ui-resizable"),
b=d.options,c=d.size,a=d.originalSize,e=d.originalPosition,f=d.axis,q="number"===typeof b.grid?[b.grid,b.grid]:b.grid,r=q[0]||1,y=q[1]||1,z=Math.round((c.width-a.width)/r)*r;c=Math.round((c.height-a.height)/y)*y;var p=a.width+z,x=a.height+c,t=b.maxWidth&&b.maxWidth<p,B=b.maxHeight&&b.maxHeight<x,C=b.minWidth&&b.minWidth>p,F=b.minHeight&&b.minHeight>x;b.grid=q;C&&(p+=r);F&&(x+=y);t&&(p-=r);B&&(x-=y);/^(se|s|e)$/.test(f)?(d.size.width=p,d.size.height=x):/^(ne)$/.test(f)?(d.size.width=p,d.size.height=
x,d.position.top=e.top-c):/^(sw)$/.test(f)?(d.size.width=p,d.size.height=x,d.position.left=e.left-z):(0<x-y?(d.size.height=x,d.position.top=e.top-c):(d.size.height=y,d.position.top=e.top+a.height-y),0<p-r?(d.size.width=p,d.position.left=e.left-z):(d.size.width=r,d.position.left=e.left+a.width-r))}})})(jQuery);
(function(h,f){h.widget("ui.selectable",h.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,e=this;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){b=h(e.options.filter,e.element[0]);b.addClass("ui-selectee");b.each(function(){var d=h(this),b=d.offset();h.data(this,"selectable-item",{element:this,$element:d,
left:b.left,top:b.top,right:b.left+d.outerWidth(),bottom:b.top+d.outerHeight(),startselected:!1,selected:d.hasClass("ui-selected"),selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})};this.refresh();this.selectees=b.addClass("ui-selectee");this._mouseInit();this.helper=h("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");
this._mouseDestroy()},_mouseStart:function(b){var e=this,d=this.options;this.opos=[b.pageX,b.pageY];this.options.disabled||(this.selectees=h(d.filter,this.element[0]),this._trigger("start",b),h(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=h.data(this,"selectable-item");d.startselected=!0;b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,
d.$element.addClass("ui-unselecting"),d.unselecting=!0,e._trigger("unselecting",b,{unselecting:d.element}))}),h(b.target).parents().addBack().each(function(){var d=h.data(this,"selectable-item");if(d){var c=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");d.$element.removeClass(c?"ui-unselecting":"ui-selected").addClass(c?"ui-selecting":"ui-unselecting");d.unselecting=!c;d.selecting=c;(d.selected=c)?e._trigger("selecting",b,{selecting:d.element}):e._trigger("unselecting",b,{unselecting:d.element});
return!1}}))},_mouseDrag:function(b){this.dragged=!0;if(!this.options.disabled){var e=this,d=this.options,k=this.opos[0],c=this.opos[1],a=b.pageX,l=b.pageY;if(k>a){var f=a;a=k;k=f}c>l&&(f=l,l=c,c=f);this.helper.css({left:k,top:c,width:a-k,height:l-c});this.selectees.each(function(){var f=h.data(this,"selectable-item"),u=!1;f&&f.element!==e.element[0]&&("touch"===d.tolerance?u=!(f.left>a||f.right<k||f.top>l||f.bottom<c):"fit"===d.tolerance&&(u=f.left>k&&f.right<a&&f.top>c&&f.bottom<l),u?(f.selected&&
(f.$element.removeClass("ui-selected"),f.selected=!1),f.unselecting&&(f.$element.removeClass("ui-unselecting"),f.unselecting=!1),f.selecting||(f.$element.addClass("ui-selecting"),f.selecting=!0,e._trigger("selecting",b,{selecting:f.element}))):(f.selecting&&((b.metaKey||b.ctrlKey)&&f.startselected?(f.$element.removeClass("ui-selecting"),f.selecting=!1,f.$element.addClass("ui-selected"),f.selected=!0):(f.$element.removeClass("ui-selecting"),f.selecting=!1,f.startselected&&(f.$element.addClass("ui-unselecting"),
f.unselecting=!0),e._trigger("unselecting",b,{unselecting:f.element}))),!f.selected||b.metaKey||b.ctrlKey||f.startselected||(f.$element.removeClass("ui-selected"),f.selected=!1,f.$element.addClass("ui-unselecting"),f.unselecting=!0,e._trigger("unselecting",b,{unselecting:f.element}))))});return!1}},_mouseStop:function(b){var e=this;this.dragged=!1;h(".ui-unselecting",this.element[0]).each(function(){var d=h.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=!1;d.startselected=
!1;e._trigger("unselected",b,{unselected:d.element})});h(".ui-selecting",this.element[0]).each(function(){var d=h.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=!1;d.selected=!0;d.startselected=!0;e._trigger("selected",b,{selected:d.element})});this._trigger("stop",b);this.helper.remove();return!1}})})(jQuery);
(function(h,f){function b(d,b,c){return d>b&&d<b+c}function e(d){return/left|right/.test(d.css("float"))||/inline|table-cell/.test(d.css("display"))}h.widget("ui.sortable",h.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,
scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var d=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===d.axis||e(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");
this._mouseDestroy();for(var d=this.items.length-1;0<=d;d--)this.items[d].item.removeData(this.widgetName+"-item");return this},_setOption:function(d,b){"disabled"===d?(this.options[d]=b,this.widget().toggleClass("ui-sortable-disabled",!!b)):h.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(d,b){var c=null,a=!1,k=this;if(this.reverting||this.options.disabled||"static"===this.options.type)return!1;this._refreshItems(d);h(d.target).parents().each(function(){if(h.data(this,
k.widgetName+"-item")===k)return c=h(this),!1});h.data(d.target,k.widgetName+"-item")===k&&(c=h(d.target));if(!c||this.options.handle&&!b&&(h(this.options.handle,c).find("*").addBack().each(function(){this===d.target&&(a=!0)}),!a))return!1;this.currentItem=c;this._removeCurrentsFromItems();return!0},_mouseStart:function(d,b,c){b=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(d);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();
this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};h.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);
this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!==this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();if(b.cursor&&"auto"!==b.cursor){var a=this.document.find("body");this.storedCursor=a.css("cursor");a.css("cursor",b.cursor);this.storedStylesheet=h("<style>*{ cursor: "+b.cursor+" !important; }</style>").appendTo(a)}b.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),
this.helper.css("opacity",b.opacity));b.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",b.zIndex));this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",d,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;0<=c;c--)this.containers[c]._trigger("activate",d,this._uiHash(this));h.ui.ddmanager&&
(h.ui.ddmanager.current=this);h.ui.ddmanager&&!b.dropBehaviour&&h.ui.ddmanager.prepareOffsets(this,d);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(d);return!0},_mouseDrag:function(d){var b;var c=this.options;var a=!1;this.position=this._generatePosition(d);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+
this.scrollParent[0].offsetHeight-d.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+c.scrollSpeed:d.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-d.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+c.scrollSpeed:d.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=
a=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(d.pageY-h(document).scrollTop()<c.scrollSensitivity?a=h(document).scrollTop(h(document).scrollTop()-c.scrollSpeed):h(window).height()-(d.pageY-h(document).scrollTop())<c.scrollSensitivity&&(a=h(document).scrollTop(h(document).scrollTop()+c.scrollSpeed)),d.pageX-h(document).scrollLeft()<c.scrollSensitivity?a=h(document).scrollLeft(h(document).scrollLeft()-c.scrollSpeed):h(window).width()-(d.pageX-h(document).scrollLeft())<c.scrollSensitivity&&(a=h(document).scrollLeft(h(document).scrollLeft()+
c.scrollSpeed))),!1!==a&&h.ui.ddmanager&&!c.dropBehaviour&&h.ui.ddmanager.prepareOffsets(this,d));this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(c=this.items.length-1;0<=c;c--){a=this.items[c];var e=a.item[0];if((b=this._intersectsWithPointer(a))&&a.instance===this.currentContainer&&e!==this.currentItem[0]&&
this.placeholder[1===b?"next":"prev"]()[0]!==e&&!h.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!h.contains(this.element[0],e):1)){this.direction=1===b?"down":"up";if("pointer"===this.options.tolerance||this._intersectsWithSides(a))this._rearrange(d,a);else break;this._trigger("change",d,this._uiHash());break}}this._contactContainers(d);h.ui.ddmanager&&h.ui.ddmanager.drag(this,d);this._trigger("sort",d,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(d,
b){if(d){h.ui.ddmanager&&!this.options.dropBehaviour&&h.ui.ddmanager.drop(this,d);if(this.options.revert){var c=this;b=this.placeholder.offset();var a=this.options.axis,k={};a&&"x"!==a||(k.left=b.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));a&&"y"!==a||(k.top=b.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;h(this.helper).animate(k,parseInt(this.options.revert,
10)||500,function(){c._clear(d)})}else this._clear(d,b);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var d=this.containers.length-1;0<=d;d--)this.containers[d]._trigger("deactivate",null,this._uiHash(this)),this.containers[d].containerCache.over&&(this.containers[d]._trigger("out",null,this._uiHash(this)),this.containers[d].containerCache.over=
0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),h.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?h(this.domPosition.prev).after(this.currentItem):h(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(d){var b=this._getItemsAsjQuery(d&&d.connected),c=[];d=d||{};
h(b).each(function(){var a=(h(d.item||this).attr(d.attribute||"id")||"").match(d.expression||/(.+)[\-=_](.+)/);a&&c.push((d.key||a[1]+"[]")+"="+(d.key&&d.expression?a[1]:a[2]))});!c.length&&d.key&&c.push(d.key+"=");return c.join("&")},toArray:function(d){var b=this._getItemsAsjQuery(d&&d.connected),c=[];d=d||{};b.each(function(){c.push(h(d.item||this).attr(d.attribute||"id")||"")});return c},_intersectsWith:function(d){var b=this.positionAbs.left,c=b+this.helperProportions.width,a=this.positionAbs.top,
e=a+this.helperProportions.height,f=d.left,h=f+d.width,r=d.top,y=r+d.height,z=this.offset.click.top,p=this.offset.click.left;z="x"===this.options.axis||a+z>r&&a+z<y;p="y"===this.options.axis||b+p>f&&b+p<h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>d[this.floating?"width":"height"]?z&&p:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<h&&r<a+this.helperProportions.height/
2&&e-this.helperProportions.height/2<y},_intersectsWithPointer:function(d){var k="x"===this.options.axis||b(this.positionAbs.top+this.offset.click.top,d.top,d.height);d="y"===this.options.axis||b(this.positionAbs.left+this.offset.click.left,d.left,d.width);k=k&&d;d=this._getDragVerticalDirection();var c=this._getDragHorizontalDirection();return k?this.floating?c&&"right"===c||"down"===d?2:1:d&&("down"===d?2:1):!1},_intersectsWithSides:function(d){var k=b(this.positionAbs.top+this.offset.click.top,
d.top+d.height/2,d.height);d=b(this.positionAbs.left+this.offset.click.left,d.left+d.width/2,d.width);var c=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&d||"left"===a&&!d:c&&("down"===c&&k||"up"===c&&!k)},_getDragVerticalDirection:function(){var d=this.positionAbs.top-this.lastPositionAbs.top;return 0!==d&&(0<d?"down":"up")},_getDragHorizontalDirection:function(){var d=this.positionAbs.left-this.lastPositionAbs.left;return 0!==d&&(0<d?
"right":"left")},refresh:function(d){this._refreshItems(d);this.refreshPositions();return this},_connectWith:function(){var d=this.options;return d.connectWith.constructor===String?[d.connectWith]:d.connectWith},_getItemsAsjQuery:function(d){function b(){e.push(this)}var c,a,e=[],f=[],q=this._connectWith();if(q&&d)for(d=q.length-1;0<=d;d--){var r=h(q[d]);for(c=r.length-1;0<=c;c--)(a=h.data(r[c],this.widgetFullName))&&a!==this&&!a.options.disabled&&f.push([h.isFunction(a.options.items)?a.options.items.call(a.element):
h(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}f.push([h.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):h(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(d=f.length-1;0<=d;d--)f[d][0].each(b);return h(e)},_removeCurrentsFromItems:function(){var d=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=h.grep(this.items,
function(b){for(var c=0;c<d.length;c++)if(d[c]===b.item[0])return!1;return!0})},_refreshItems:function(d){this.items=[];this.containers=[this];var b,c,a,e,f=this.items,q=[[h.isFunction(this.options.items)?this.options.items.call(this.element[0],d,{item:this.currentItem}):h(this.options.items,this.element),this]];if((e=this._connectWith())&&this.ready)for(b=e.length-1;0<=b;b--){var r=h(e[b]);for(c=r.length-1;0<=c;c--)(a=h.data(r[c],this.widgetFullName))&&a!==this&&!a.options.disabled&&(q.push([h.isFunction(a.options.items)?
a.options.items.call(a.element[0],d,{item:this.currentItem}):h(a.options.items,a.element),a]),this.containers.push(a))}for(b=q.length-1;0<=b;b--)for(d=q[b][1],r=q[b][0],c=0,e=r.length;c<e;c++)a=h(r[c]),a.data(this.widgetName+"-item",d),f.push({item:a,instance:d,width:0,height:0,left:0,top:0})},refreshPositions:function(d){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var b;for(b=this.items.length-1;0<=b;b--){var c=this.items[b];if(c.instance===this.currentContainer||
!this.currentContainer||c.item[0]===this.currentItem[0]){var a=this.options.toleranceElement?h(this.options.toleranceElement,c.item):c.item;d||(c.width=a.outerWidth(),c.height=a.outerHeight());a=a.offset();c.left=a.left;c.top=a.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(b=this.containers.length-1;0<=b;b--)a=this.containers[b].element.offset(),this.containers[b].containerCache.left=a.left,this.containers[b].containerCache.top=
a.top,this.containers[b].containerCache.width=this.containers[b].element.outerWidth(),this.containers[b].containerCache.height=this.containers[b].element.outerHeight();return this},_createPlaceholder:function(d){d=d||this;var b=d.options;if(!b.placeholder||b.placeholder.constructor===String){var c=b.placeholder;b.placeholder={element:function(){var a=d.currentItem[0].nodeName.toLowerCase(),b=h("<"+a+">",d.document[0]).addClass(c||d.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");
"tr"===a?d.currentItem.children().each(function(){h("<td>&#160;</td>",d.document[0]).attr("colspan",h(this).attr("colspan")||1).appendTo(b)}):"img"===a&&b.attr("src",d.currentItem.attr("src"));c||b.css("visibility","hidden");return b},update:function(a,e){if(!c||b.forcePlaceholderSize)e.height()||e.height(d.currentItem.innerHeight()-parseInt(d.currentItem.css("paddingTop")||0,10)-parseInt(d.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(d.currentItem.innerWidth()-parseInt(d.currentItem.css("paddingLeft")||
0,10)-parseInt(d.currentItem.css("paddingRight")||0,10))}}}d.placeholder=h(b.placeholder.element.call(d.element,d.currentItem));d.currentItem.after(d.placeholder);b.placeholder.update(d,d.placeholder)},_contactContainers:function(d){var k,c,a,f=c=null;for(k=this.containers.length-1;0<=k;k--)h.contains(this.currentItem[0],this.containers[k].element[0])||(this._intersectsWith(this.containers[k].containerCache)?c&&h.contains(this.containers[k].element[0],c.element[0])||(c=this.containers[k],f=k):this.containers[k].containerCache.over&&
(this.containers[k]._trigger("out",d,this._uiHash(this)),this.containers[k].containerCache.over=0));if(c)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",d,this._uiHash(this)),this.containers[f].containerCache.over=1);else{k=1E4;var u=null;var q=(a=c.floating||e(this.currentItem))?"left":"top";var r=a?"width":"height";var y=this.positionAbs[q]+this.offset.click[q];for(c=this.items.length-1;0<=c;c--)if(h.contains(this.containers[f].element[0],
this.items[c].item[0])&&this.items[c].item[0]!==this.currentItem[0]&&(!a||b(this.positionAbs.top+this.offset.click.top,this.items[c].top,this.items[c].height))){var z=this.items[c].item.offset()[q];var p=!1;Math.abs(z-y)>Math.abs(z+this.items[c][r]-y)&&(p=!0,z+=this.items[c][r]);Math.abs(z-y)<k&&(k=Math.abs(z-y),u=this.items[c],this.direction=p?"up":"down")}(u||this.options.dropOnEmpty)&&this.currentContainer!==this.containers[f]&&(u?this._rearrange(d,u,null,!0):this._rearrange(d,null,this.containers[f].element,
!0),this._trigger("change",d,this._uiHash()),this.containers[f]._trigger("change",d,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",d,this._uiHash(this)),this.containers[f].containerCache.over=1)}},_createHelper:function(d){var b=this.options;d=h.isFunction(b.helper)?h(b.helper.apply(this.element[0],[d,this.currentItem])):"clone"===b.helper?this.currentItem.clone():this.currentItem;
d.parents("body").length||h("parent"!==b.appendTo?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]);d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});d[0].style.width&&!b.forceHelperSize||d.width(this.currentItem.width());d[0].style.height&&!b.forceHelperSize||d.height(this.currentItem.height());return d},
_adjustOffsetFromHelper:function(d){"string"===typeof d&&(d=d.split(" "));h.isArray(d)&&(d={left:+d[0],top:+d[1]||0});"left"in d&&(this.offset.click.left=d.left+this.margins.left);"right"in d&&(this.offset.click.left=this.helperProportions.width-d.right+this.margins.left);"top"in d&&(this.offset.click.top=d.top+this.margins.top);"bottom"in d&&(this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=
this.offsetParent.offset();"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&h.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&h.ui.ie)d={top:0,left:0};return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var d=this.currentItem.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d=this.options;"parent"===d.containment&&(d.containment=this.helper[0].parentNode);if("document"===d.containment||"window"===d.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,h("document"===d.containment?document:window).width()-this.helperProportions.width-this.margins.left,(h("document"===d.containment?document:window).height()||
document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(d.containment)){var b=h(d.containment)[0];d=h(d.containment).offset();var c="hidden"!==h(b).css("overflow");this.containment=[d.left+(parseInt(h(b).css("borderLeftWidth"),10)||0)+(parseInt(h(b).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(h(b).css("borderTopWidth"),10)||0)+(parseInt(h(b).css("paddingTop"),10)||0)-this.margins.top,d.left+(c?Math.max(b.scrollWidth,
b.offsetWidth):b.offsetWidth)-(parseInt(h(b).css("borderLeftWidth"),10)||0)-(parseInt(h(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(h(b).css("borderTopWidth"),10)||0)-(parseInt(h(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(d,b){b||(b=this.position);d="absolute"===d?1:-1;var c="absolute"!==this.cssPosition||this.scrollParent[0]!==
document&&h.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(c[0].tagName);return{top:b.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:c.scrollTop())*d,left:b.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:c.scrollLeft())*d}},_generatePosition:function(d){var b=this.options;var c=d.pageX;var a=
d.pageY;var e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&h.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());this.originalPosition&&(this.containment&&(d.pageX-this.offset.click.left<this.containment[0]&&(c=this.containment[0]+this.offset.click.left),
d.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),d.pageX-this.offset.click.left>this.containment[2]&&(c=this.containment[2]+this.offset.click.left),d.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),b.grid&&(a=this.originalPageY+Math.round((a-this.originalPageY)/b.grid[1])*b.grid[1],a=this.containment?a-this.offset.click.top>=this.containment[1]&&a-this.offset.click.top<=this.containment[3]?a:a-this.offset.click.top>=
this.containment[1]?a-b.grid[1]:a+b.grid[1]:a,c=this.originalPageX+Math.round((c-this.originalPageX)/b.grid[0])*b.grid[0],c=this.containment?c-this.offset.click.left>=this.containment[0]&&c-this.offset.click.left<=this.containment[2]?c:c-this.offset.click.left>=this.containment[0]?c-b.grid[0]:c+b.grid[0]:c));return{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop()),left:c-this.offset.click.left-
this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())}},_rearrange:function(b,e,c,a){c?c[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling);var d=this.counter=this.counter?++this.counter:1;this._delay(function(){d===this.counter&&this.refreshPositions(!a)})},_clear:function(b,e){function c(a,c,b){return function(d){b._trigger(a,
d,c._uiHash(c))}}this.reverting=!1;var a,d=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(a in this._storedCSS)if("auto"===this._storedCSS[a]||"static"===this._storedCSS[a])this._storedCSS[a]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!e&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});
!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||d.push(function(a){this._trigger("update",a,this._uiHash())});this===this.currentContainer||e||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(c){a._trigger("receive",c,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(a){return function(c){a._trigger("update",c,this._uiHash(this))}}.call(this,
this.currentContainer)));for(a=this.containers.length-1;0<=a;a--)e||d.push(c("deactivate",this,this.containers[a])),this.containers[a].containerCache.over&&(d.push(c("out",this,this.containers[a])),this.containers[a].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove());this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex);
this.dragging=!1;if(this.cancelHelperRemoval){if(!e){this._trigger("beforeStop",b,this._uiHash());for(a=0;a<d.length;a++)d[a].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1}e||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!==this.currentItem[0]&&this.helper.remove();this.helper=null;if(!e){for(a=0;a<d.length;a++)d[a].call(this,b);this._trigger("stop",b,this._uiHash())}this.fromOutside=!1;return!0},
_trigger:function(){!1===h.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var d=b||this;return{helper:d.helper,placeholder:d.placeholder||h([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:b?b.element:null}}})})(jQuery);
(function(h,f){h.effects={effect:{}};(function(b,e){function d(a,c,b){var d=r[c.type]||{};if(null==a)return b||!c.def?null:c.def;a=d.floor?~~a:parseFloat(a);return isNaN(a)?c.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a}function k(a){var c=h(),d=c._rgba=[];a=a.toLowerCase();p(f,function(b,e){b=(b=e.re.exec(a))&&e.parse(b);e=e.space||"rgba";if(b)return b=c[e](b),c[q[e].cache]=b[q[e].cache],d=c._rgba=b._rgba,!1});return d.length?("0,0,0,0"===d.join()&&b.extend(d,x.transparent),c):x[a]}function c(a,
c,b){b=(b+1)%1;return 1>6*b?a+(c-a)*b*6:1>2*b?c:2>3*b?a+(c-a)*(2/3-b)*6:a}var a=/^([\-+])=\s*(\d+\.?\d*)/,f=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],
16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)%\s*,\s*(\d+(?:\.\d+)?)%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],h=b.Color=function(a,c,d,e){return new b.Color.fn.parse(a,c,d,e)},q={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,
type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},r={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},y=h.support={},z=b("<p>")[0],p=b.each;z.style.cssText="background-color:rgba(1,1,1,.5)";y.rgba=-1<z.style.backgroundColor.indexOf("rgba");p(q,function(a,c){c.cache="_"+a;c.props.alpha={idx:3,type:"percent",def:1}});h.fn=b.extend(h.prototype,{parse:function(a,c,f,l){if(a===e)return this._rgba=[null,null,
null,null],this;if(a.jquery||a.nodeType)a=b(a).css(c),c=e;var u=this,t=b.type(a),r=this._rgba=[];c!==e&&(a=[a,c,f,l],t="array");if("string"===t)return this.parse(k(a)||x._default);if("array"===t)return p(q.rgba.props,function(c,g){r[g.idx]=d(a[g.idx],g)}),this;if("object"===t)return a instanceof h?p(q,function(c,g){a[g.cache]&&(u[g.cache]=a[g.cache].slice())}):p(q,function(c,g){var m=g.cache;p(g.props,function(c,b){if(!u[m]&&g.to){if("alpha"===c||null==a[c])return;u[m]=g.to(u._rgba)}u[m][b.idx]=d(a[c],
b,!0)});u[m]&&0>b.inArray(null,u[m].slice(0,3))&&(u[m][3]=1,g.from&&(u._rgba=g.from(u[m])))}),this},is:function(a){var c=h(a),b=!0,d=this;p(q,function(a,e){var k=c[e.cache];if(k){var f=d[e.cache]||e.to&&e.to(d._rgba)||[];p(e.props,function(a,c){if(null!=k[c.idx])return b=k[c.idx]===f[c.idx]})}return b});return b},_space:function(){var a=[],c=this;p(q,function(b,d){c[d.cache]&&a.push(b)});return a.pop()},transition:function(a,c){var b=h(a);a=b._space();var e=q[a],k=0===this.alpha()?h("transparent"):
this,f=k[e.cache]||e.to(k._rgba),l=f.slice();b=b[e.cache];p(e.props,function(a,g){a=g.idx;var m=f[a],e=b[a],k=r[g.type]||{};null!==e&&(null===m?l[a]=e:(k.mod&&(e-m>k.mod/2?m+=k.mod:m-e>k.mod/2&&(m-=k.mod)),l[a]=d((e-m)*c+m,g)))});return this[a](l)},blend:function(a){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=h(a)._rgba;return h(b.map(c,function(a,c){return(1-d)*e[c]+d*a}))},toRgbaString:function(){var a="rgba(",c=b.map(this._rgba,function(a,c){return null==a?2<c?1:0:a});
1===c[3]&&(c.pop(),a="rgb(");return a+c.join()+")"},toHslaString:function(){var a="hsla(",c=b.map(this.hsla(),function(a,c){null==a&&(a=2<c?1:0);c&&3>c&&(a=Math.round(100*a)+"%");return a});1===c[3]&&(c.pop(),a="hsl(");return a+c.join()+")"},toHexString:function(a){var c=this._rgba.slice(),d=c.pop();a&&c.push(~~(255*d));return"#"+b.map(c,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});h.fn.parse.prototype=
h.fn;q.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var c=a[0]/255,b=a[1]/255,d=a[2]/255;a=a[3];var e=Math.max(c,b,d),k=Math.min(c,b,d),f=e-k,l=e+k,g=.5*l;return[Math.round(k===e?0:c===e?60*(b-d)/f+360:b===e?60*(d-c)/f+120:60*(c-b)/f+240)%360,0===f?0:.5>=g?f/l:f/(2-l),g,null==a?1:a]};q.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,d=a[1],e=a[2];a=a[3];d=.5>=e?e*(1+d):e+d-e*d;e=2*e-d;return[Math.round(255*
c(e,d,b+1/3)),Math.round(255*c(e,d,b)),Math.round(255*c(e,d,b-1/3)),a]};p(q,function(c,k){var f=k.props,l=k.cache,u=k.to,q=k.from;h.fn[c]=function(a){u&&!this[l]&&(this[l]=u(this._rgba));if(a===e)return this[l].slice();var c=b.type(a),g="array"===c||"object"===c?a:arguments,m=this[l].slice();p(f,function(a,b){a=g["object"===c?a:b.idx];null==a&&(a=m[b.idx]);m[b.idx]=d(a,b)});if(q){var k=h(q(m));k[l]=m;return k}return h(m)};p(f,function(d,e){h.fn[d]||(h.fn[d]=function(g){var m=b.type(g),k="alpha"===
d?this._hsla?"hsla":"rgba":c,f=this[k](),l=f[e.idx];if("undefined"===m)return l;"function"===m&&(g=g.call(this,l),m=b.type(g));if(null==g&&e.empty)return this;"string"===m&&(m=a.exec(g))&&(g=l+parseFloat(m[2])*("+"===m[1]?1:-1));f[e.idx]=g;return this[k](f)})})});h.hook=function(a){a=a.split(" ");p(a,function(a,c){b.cssHooks[c]={set:function(a,d){var e,f="";if("transparent"!==d&&("string"!==b.type(d)||(e=k(d)))){d=h(e||d);if(!y.rgba&&1!==d._rgba[3]){for(e="backgroundColor"===c?a.parentNode:a;(""===
f||"transparent"===f)&&e&&e.style;)try{f=b.css(e,"backgroundColor"),e=e.parentNode}catch(K){}d=d.blend(f&&"transparent"!==f?f:"_default")}d=d.toRgbaString()}try{a.style[c]=d}catch(K){}}};b.fx.step[c]=function(a){a.colorInit||(a.start=h(a.elem,c),a.end=h(a.end),a.colorInit=!0);b.cssHooks[c].set(a.elem,a.start.transition(a.end,a.pos))}})};h.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");
b.cssHooks.borderColor={expand:function(a){var c={};p(["Top","Right","Bottom","Left"],function(b,d){c["border"+d+"Color"]=a});return c}};var x=b.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(){function b(b){var c=
b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,a={};if(c&&c.length&&c[0]&&c[c[0]])for(b=c.length;b--;){var d=c[b];"string"===typeof c[d]&&(a[h.camelCase(d)]=c[d])}else for(d in c)"string"===typeof c[d]&&(a[d]=c[d]);return a}var e=["add","remove","toggle"],d={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};h.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],
function(b,c){h.fx.step[c]=function(a){if("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)jQuery.style(a.elem,c,a.end),a.setAttr=!0}});h.fn.addBack||(h.fn.addBack=function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))});h.effects.animateClass=function(k,c,a,f){var l=h.speed(c,a,f);return this.queue(function(){var a=h(this),c=a.attr("class")||"",f=l.children?a.find("*").addBack():a;f=f.map(function(){return{el:h(this),start:b(this)}});var u=function(){h.each(e,function(c,
b){if(k[b])a[b+"Class"](k[b])})};u();f=f.map(function(){this.end=b(this.el[0]);var a=this.start,c=this.end,e={},k;for(k in c){var f=c[k];a[k]===f||d[k]||!h.fx.step[k]&&isNaN(parseFloat(f))||(e[k]=f)}this.diff=e;return this});a.attr("class",c);f=f.map(function(){var a=this,c=h.Deferred(),b=h.extend({},l,{queue:!1,complete:function(){c.resolve(a)}});this.el.animate(this.diff,b);return c.promise()});h.when.apply(h,f.get()).done(function(){u();h.each(arguments,function(){var a=this.el;h.each(this.diff,
function(c){a.css(c,"")})});l.complete.call(a[0])})})};h.fn.extend({addClass:function(b){return function(c,a,d,e){return a?h.effects.animateClass.call(this,{add:c},a,d,e):b.apply(this,arguments)}}(h.fn.addClass),removeClass:function(b){return function(c,a,d,e){return 1<arguments.length?h.effects.animateClass.call(this,{remove:c},a,d,e):b.apply(this,arguments)}}(h.fn.removeClass),toggleClass:function(b){return function(c,a,d,e,k){return"boolean"===typeof a||a===f?d?h.effects.animateClass.call(this,
a?{add:c}:{remove:c},d,e,k):b.apply(this,arguments):h.effects.animateClass.call(this,{toggle:c},a,d,e)}}(h.fn.toggleClass),switchClass:function(b,c,a,d,e){return h.effects.animateClass.call(this,{add:c,remove:b},a,d,e)}})})();(function(){function b(b,e,c,a){h.isPlainObject(b)&&(e=b,b=b.effect);b={effect:b};null==e&&(e={});h.isFunction(e)&&(a=e,c=null,e={});if("number"===typeof e||h.fx.speeds[e])a=c,c=e,e={};h.isFunction(c)&&(a=c,c=null);e&&h.extend(b,e);c=c||e.duration;b.duration=h.fx.off?0:"number"===
typeof c?c:c in h.fx.speeds?h.fx.speeds[c]:h.fx.speeds._default;b.complete=a||e.complete;return b}function e(b){return!b||"number"===typeof b||h.fx.speeds[b]||"string"===typeof b&&!h.effects.effect[b]||h.isFunction(b)||"object"===typeof b&&!b.effect?!0:!1}h.extend(h.effects,{version:"1.10.4",save:function(b,e){for(var c=0;c<e.length;c++)null!==e[c]&&b.data("ui-effects-"+e[c],b[0].style[e[c]])},restore:function(b,e){var c;for(c=0;c<e.length;c++)if(null!==e[c]){var a=b.data("ui-effects-"+e[c]);a===
f&&(a="");b.css(e[c],a)}},setMode:function(b,e){"toggle"===e&&(e=b.is(":hidden")?"show":"hide");return e},getBaseline:function(b,e){switch(b[0]){case "top":var c=0;break;case "middle":c=.5;break;case "bottom":c=1;break;default:c=b[0]/e.height}switch(b[1]){case "left":b=0;break;case "center":b=.5;break;case "right":b=1;break;default:b=b[1]/e.width}return{x:b,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var d={width:b.outerWidth(!0),height:b.outerHeight(!0),
"float":b.css("float")},c=h("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a={width:b.width(),height:b.height()},e=document.activeElement;try{e.id}catch(u){e=document.body}b.wrap(c);(b[0]===e||h.contains(b[0],e))&&h(e).focus();c=b.parent();"static"===b.css("position")?(c.css({position:"relative"}),b.css({position:"relative"})):(h.extend(d,{position:b.css("position"),zIndex:b.css("z-index")}),h.each(["top","left","bottom",
"right"],function(a,c){d[c]=b.css(c);isNaN(parseInt(d[c],10))&&(d[c]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));b.css(a);return c.css(d).show()},removeWrapper:function(b){var d=document.activeElement;b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===d||h.contains(b[0],d))&&h(d).focus());return b},setTransition:function(b,e,c,a){a=a||{};h.each(e,function(d,e){d=b.cssUnit(e);0<d[0]&&(a[e]=d[0]*c+d[1])});return a}});h.fn.extend({effect:function(){function d(a){function c(){h.isFunction(d)&&
d.call(b[0]);h.isFunction(a)&&a()}var b=h(this),d=e.complete,k=e.mode;(b.is(":hidden")?"hide"===k:"show"===k)?(b[k](),c()):f.call(b[0],e,c)}var e=b.apply(this,arguments),c=e.mode,a=e.queue,f=h.effects.effect[e.effect];return h.fx.off||!f?c?this[c](e.duration,e.complete):this.each(function(){e.complete&&e.complete.call(this)}):!1===a?this.each(d):this.queue(a||"fx",d)},show:function(d){return function(k){if(e(k))return d.apply(this,arguments);var c=b.apply(this,arguments);c.mode="show";return this.effect.call(this,
c)}}(h.fn.show),hide:function(d){return function(k){if(e(k))return d.apply(this,arguments);var c=b.apply(this,arguments);c.mode="hide";return this.effect.call(this,c)}}(h.fn.hide),toggle:function(d){return function(k){if(e(k)||"boolean"===typeof k)return d.apply(this,arguments);var c=b.apply(this,arguments);c.mode="toggle";return this.effect.call(this,c)}}(h.fn.toggle),cssUnit:function(b){var d=this.css(b),c=[];h.each(["em","px","%","pt"],function(a,b){0<d.indexOf(b)&&(c=[parseFloat(d),b])});return c}})})();
(function(){var b={};h.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,d){b[d]=function(b){return Math.pow(b,e+2)}});h.extend(b,{Sine:function(b){return 1-Math.cos(b*Math.PI/2)},Circ:function(b){return 1-Math.sqrt(1-b*b)},Elastic:function(b){return 0===b||1===b?b:-Math.pow(2,8*(b-1))*Math.sin((80*(b-1)-7.5)*Math.PI/15)},Back:function(b){return b*b*(3*b-2)},Bounce:function(b){for(var d,e=4;b<((d=Math.pow(2,--e))-1)/11;);return 1/Math.pow(4,3-e)-7.5625*Math.pow((3*d-2)/22-b,2)}});h.each(b,function(b,
d){h.easing["easeIn"+b]=d;h.easing["easeOut"+b]=function(b){return 1-d(1-b)};h.easing["easeInOut"+b]=function(b){return.5>b?d(2*b)/2:1-d(-2*b+2)/2}})})()})(jQuery);
(function(h,f){var b=0,e={},d={};e.height=e.paddingTop=e.paddingBottom=e.borderTopWidth=e.borderBottomWidth="hide";d.height=d.paddingTop=d.paddingBottom=d.borderTopWidth=d.borderBottomWidth="show";h.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var b=this.options;
this.prevShow=this.prevHide=h();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");b.collapsible||!1!==b.active&&null!=b.active||(b.active=0);this._processPanels();0>b.active&&(b.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():h(),content:this.active.length?this.active.next():h()}},_createIcons:function(){var b=this.options.icons;b&&(h("<span>").addClass("ui-accordion-header-icon ui-icon "+
b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&
this.removeAttribute("id")});this._destroyIcons();var b=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&b.css("height","")},_setOption:function(b,c){"active"===b?this._activate(c):("event"===
b&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(c)),this._super(b,c),"collapsible"!==b||c||!1!==this.options.active||this._activate(0),"icons"===b&&(this._destroyIcons(),c&&this._createIcons()),"disabled"===b&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!c))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=h.ui.keyCode,a=this.headers.length,d=this.headers.index(b.target),e=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:e=this.headers[(d+
1)%a];break;case c.LEFT:case c.UP:e=this.headers[(d-1+a)%a];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:e=this.headers[0];break;case c.END:e=this.headers[a-1]}e&&(h(b.target).attr("tabIndex",-1),h(e).attr("tabIndex",0),e.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===h.ui.keyCode.UP&&b.ctrlKey&&h(b.currentTarget).prev().focus()},refresh:function(){var b=this.options;this._processPanels();!1===b.active&&!0===b.collapsible||!this.headers.length?(b.active=
!1,this.active=h()):!1===b.active?this._activate(0):this.active.length&&!h.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=h()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},
_refresh:function(){var d=this.options,c=d.heightStyle,a=this.element.parent(),e=this.accordionId="ui-accordion-"+(this.element.attr("id")||++b);this.active=this._findActive(d.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(a){var c=h(this),b=c.attr("id"),d=c.next(),f=d.attr("id");b||(b=e+"-header-"+a,c.attr("id",b));f||(f=e+"-panel-"+
a,d.attr("id",f));c.attr("aria-controls",f);d.attr("aria-labelledby",b)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(d.event);if("fill"===c){var f=a.height();this.element.siblings(":visible").each(function(){var a=
h(this),c=a.css("position");"absolute"!==c&&"fixed"!==c&&(f-=a.outerHeight(!0))});this.headers.each(function(){f-=h(this).outerHeight(!0)});this.headers.next().each(function(){h(this).height(Math.max(0,f-h(this).innerHeight()+h(this).height()))}).css("overflow","auto")}else"auto"===c&&(f=0,this.headers.next().each(function(){f=Math.max(f,h(this).css("height","").height())}).height(f))},_activate:function(b){b=this._findActive(b)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,
currentTarget:b,preventDefault:h.noop}))},_findActive:function(b){return"number"===typeof b?this.headers.eq(b):h()},_setupEvents:function(b){var c={keydown:"_keydown"};b&&h.each(b.split(" "),function(a,b){c[b]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,c);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(b){var c=this.options,a=this.active,d=h(b.currentTarget),e=
d[0]===a[0],f=e&&c.collapsible,k=f?h():d.next(),y=a.next();k={oldHeader:a,oldPanel:y,newHeader:f?h():d,newPanel:k};b.preventDefault();e&&!c.collapsible||!1===this._trigger("beforeActivate",b,k)||(c.active=f?!1:this.headers.index(d),this.active=e?h():d,this._toggle(k),a.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&a.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),e||(d.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),
c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),d.next().addClass("ui-accordion-content-active")))},_toggle:function(b){var c=b.newPanel,a=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=c;this.prevHide=a;this.options.animate?this._animate(c,a,b):(a.hide(),c.show(),this._toggleComplete(b));a.attr({"aria-hidden":"true"});a.prev().attr("aria-selected","false");c.length&&a.length?a.prev().attr({tabIndex:-1,
"aria-expanded":"false"}):c.length&&this.headers.filter(function(){return 0===h(this).attr("tabIndex")}).attr("tabIndex",-1);c.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(b,c,a){var f,k,h=this,r=0,y=b.length&&(!c.length||b.index()<c.index()),z=this.options.animate||{};y=y&&z.down||z;var p=function(){h._toggleComplete(a)};"number"===typeof y&&(k=y);"string"===typeof y&&(f=y);f=f||y.easing||z.easing;k=k||y.duration||z.duration;
if(!c.length)return b.animate(d,k,f,p);if(!b.length)return c.animate(e,k,f,p);var x=b.show().outerHeight();c.animate(e,{duration:k,easing:f,step:function(a,c){c.now=Math.round(a)}});b.hide().animate(d,{duration:k,easing:f,complete:p,step:function(a,b){b.now=Math.round(a);"height"!==b.prop?r+=b.now:"content"!==h.options.heightStyle&&(b.now=Math.round(x-c.outerHeight()-r),r=0)}})},_toggleComplete:function(b){var c=b.oldPanel;c.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");
c.length&&(c.parent()[0].className=c.parent()[0].className);this._trigger("activate",null,b)}})})(jQuery);
(function(h,f){h.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,e,d,f=this.element[0].nodeName.toLowerCase(),c="textarea"===f;f="input"===f;this.isMultiLine=c?!0:f?!1:this.element.prop("isContentEditable");this.valueMethod=
this.element[c||f?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))e=d=b=!0;else{e=d=b=!1;var c=h.ui.keyCode;switch(a.keyCode){case c.PAGE_UP:b=!0;this._move("previousPage",a);break;case c.PAGE_DOWN:b=!0;this._move("nextPage",a);break;case c.UP:b=!0;this._keyEvent("previous",a);break;case c.DOWN:b=!0;this._keyEvent("next",a);break;case c.ENTER:case c.NUMPAD_ENTER:this.menu.active&&
(b=!0,a.preventDefault(),this.menu.select(a));break;case c.TAB:this.menu.active&&this.menu.select(a);break;case c.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(a),a.preventDefault());break;default:e=!0,this._searchTimeout(a)}}},keypress:function(a){if(b)b=!1,this.isMultiLine&&!this.menu.element.is(":visible")||a.preventDefault();else if(!e){var c=h.ui.keyCode;switch(a.keyCode){case c.PAGE_UP:this._move("previousPage",a);break;case c.PAGE_DOWN:this._move("nextPage",a);
break;case c.UP:this._keyEvent("previous",a);break;case c.DOWN:this._keyEvent("next",a)}}},input:function(a){d?(d=!1,a.preventDefault()):this._searchTimeout(a)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=h("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu");this._on(this.menu.element,
{mousedown:function(a){a.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];h(a.target).closest(".ui-menu-item").length||this._delay(function(){var a=this;this.document.one("mousedown",function(b){b.target===a.element[0]||b.target===c||h.contains(c,b.target)||a.close()})})},menufocus:function(a,c){if(this.isNewMenu&&(this.isNewMenu=!1,a.originalEvent&&/^mouse/.test(a.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){h(a.target).trigger(a.originalEvent)});
return}c=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",a,{item:c})?a.originalEvent&&/^key/.test(a.originalEvent.type)&&this._value(c.value):this.liveRegion.text(c.value)},menuselect:function(a,c){var b=c.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d;this.selectedItem=b}));!1!==this._trigger("select",a,{item:b})&&this._value(b.value);this.term=this._value();
this.close(a);this.selectedItem=b}});this.liveRegion=h("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(b,e){this._super(b,e);"source"===b&&this._initSource();
"appendTo"===b&&this.menu.element.appendTo(this._appendTo());"disabled"===b&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;b&&(b=b.jquery||b.nodeType?h(b):this.document.find(b).eq(0));b||(b=this.element.closest(".ui-front"));b.length||(b=this.document[0].body);return b},_initSource:function(){var b=this;if(h.isArray(this.options.source)){var e=this.options.source;this.source=function(b,c){c(h.ui.autocomplete.filter(e,b.term))}}else if("string"===typeof this.options.source){var d=
this.options.source;this.source=function(e,c){b.xhr&&b.xhr.abort();b.xhr=h.ajax({url:d,data:e,dataType:"json",success:function(a){c(a)},error:function(){c([])}})}}else this.source=this.options.source},_searchTimeout:function(b){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,b))},this.options.delay)},search:function(b,e){b=null!=b?b:this._value();this.term=this._value();if(b.length<this.options.minLength)return this.close(e);
if(!1!==this._trigger("search",e))return this._search(b)},_search:function(b){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:b},this._response())},_response:function(){var b=++this.requestIndex;return h.proxy(function(e){b===this.requestIndex&&this.__response(e);this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(b){b&&(b=this._normalize(b));this._trigger("response",null,{content:b});!this.options.disabled&&
b&&b.length&&!this.cancelSearch?(this._suggest(b),this._trigger("open")):this._close()},close:function(b){this.cancelSearch=!0;this._close(b)},_close:function(b){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",b))},_change:function(b){this.previous!==this._value()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:h.map(b,function(b){return"string"===typeof b?{label:b,
value:b}:h.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var e=this.menu.element.empty();this._renderMenu(e,b);this.isNewMenu=!0;this.menu.refresh();e.show();this._resizeMenu();e.position(h.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,e){var d=this;h.each(e,function(e,c){d._renderItemData(b,
c)})},_renderItemData:function(b,e){return this._renderItem(b,e).data("ui-autocomplete-item",e)},_renderItem:function(b,e){return h("<li>").append(h("<a>").text(e.label)).appendTo(b)},_move:function(b,e){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(b)||this.menu.isLastItem()&&/^next/.test(b))this._value(this.term),this.menu.blur();else this.menu[b](e);else this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,
arguments)},_keyEvent:function(b,e){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(b,e),e.preventDefault()}});h.extend(h.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,e){var d=new RegExp(h.ui.autocomplete.escapeRegex(e),"i");return h.grep(b,function(b){return d.test(b.label||b.value||b)})}});h.widget("ui.autocomplete",h.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(b){return b+
(1<b?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){this._superApply(arguments);if(!this.options.disabled&&!this.cancelSearch){var e=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults;this.liveRegion.text(e)}}})})(jQuery);
(function(h,f){var b,e=function(){var b=h(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},d=function(b){var c=b.name,a=b.form,d=h([]);c&&(c=c.replace(/'/g,"\\'"),d=a?h(a).find("[name='"+c+"']"):h("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form}));return d};h.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+
this.eventNamespace).bind("reset"+this.eventNamespace,e);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var f=this,c=this.options,a="checkbox"===this.type||"radio"===this.type,l=a?"":"ui-state-active";null===c.label&&(c.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);
this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){c.disabled||this===b&&h(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){c.disabled||h(this).removeClass(l)}).bind("click"+this.eventNamespace,function(a){c.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}});
a&&this.element.bind("change"+this.eventNamespace,function(){f.refresh()});"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(c.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(c.disabled)return!1;h(this).addClass("ui-state-active");f.buttonElement.attr("aria-pressed","true");var a=f.element[0];d(a).not(a).map(function(){return h(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",
"false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(c.disabled)return!1;h(this).addClass("ui-state-active");b=this;f.document.one("mouseup",function(){b=null})}).bind("mouseup"+this.eventNamespace,function(){if(c.disabled)return!1;h(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(a){if(c.disabled)return!1;a.keyCode!==h.ui.keyCode.SPACE&&a.keyCode!==h.ui.keyCode.ENTER||h(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+
" blur"+this.eventNamespace,function(){h(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===h.ui.keyCode.SPACE&&h(this).click()}));this._setOption("disabled",c.disabled);this._resetButton()},_determineButtonType:function(){this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if("checkbox"===this.type||"radio"===this.type){var b=
this.element.parents().last();var c="label[for='"+this.element.attr("id")+"']";this.buttonElement=b.find(c);this.buttonElement.length||(b=b.length?b.siblings():this.element.siblings(),this.buttonElement=b.filter(c),this.buttonElement.length||(this.buttonElement=b.find(c)));this.element.addClass("ui-helper-hidden-accessible");(b=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");this.buttonElement.prop("aria-pressed",b)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},
_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-active ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(b,c){this._super(b,
c);"disabled"===b?(this.element.prop("disabled",!!c),c&&this.buttonElement.removeClass("ui-state-focus")):this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b);"radio"===this.type?d(this.element[0]).each(function(){h(this).is(":checked")?h(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):h(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",
"false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
c=h("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),a=this.options.icons,d=a.primary&&a.secondary,e=[];a.primary||a.secondary?(this.options.text&&e.push("ui-button-text-icon"+(d?"s":a.primary?"-primary":"-secondary")),a.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+a.primary+"'></span>"),a.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+a.secondary+"'></span>"),this.options.text||(e.push(d?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||b.attr("title",h.trim(c)))):e.push("ui-button-text-only");b.addClass(e.join(" "))}}});h.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){"disabled"===b&&this.buttons.button("option",b,c);this._super(b,c)},refresh:function(){var b=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return h(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return h(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);
(function(h,f){function b(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";
this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",
firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,
onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};h.extend(this._defaults,this.regional[""]);this.dpDiv=e(h("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function e(c){return c.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseout",function(){h(this).removeClass("ui-state-hover");
-1!==this.className.indexOf("ui-datepicker-prev")&&h(this).removeClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&h(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){h.datepicker._isDisabledDatepicker(k.inline?c.parent()[0]:k.input[0])||(h(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),h(this).addClass("ui-state-hover"),
-1!==this.className.indexOf("ui-datepicker-prev")&&h(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&h(this).addClass("ui-datepicker-next-hover"))})}function d(c,a){h.extend(c,a);for(var b in a)null==a[b]&&(c[b]=a[b]);return c}h.extend(h.ui,{datepicker:{version:"1.10.4"}});var k;h.extend(b.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(c){d(this._defaults,c||{});return this},_attachDatepicker:function(c,
a){var b=c.nodeName.toLowerCase();var d="div"===b||"span"===b;c.id||(this.uuid+=1,c.id="dp"+this.uuid);var e=this._newInst(h(c),d);e.settings=h.extend({},a||{});"input"===b?this._connectDatepicker(c,e):d&&this._inlineDatepicker(c,e)},_newInst:function(c,a){return{id:c[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:c,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:a,dpDiv:a?e(h("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):
this.dpDiv}},_connectDatepicker:function(c,a){var b=h(c);a.append=h([]);a.trigger=h([]);b.hasClass(this.markerClassName)||(this._attachments(b,a),b.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(a),h.data(c,"datepicker",a),a.settings.disabled&&this._disableDatepicker(c))},_attachments:function(c,a){var b=this._get(a,"appendText");var d=this._get(a,"isRTL");a.append&&a.append.remove();b&&(a.append=h("<span class='"+this._appendClass+
"'>"+b+"</span>"),c[d?"before":"after"](a.append));c.unbind("focus",this._showDatepicker);a.trigger&&a.trigger.remove();b=this._get(a,"showOn");"focus"!==b&&"both"!==b||c.focus(this._showDatepicker);if("button"===b||"both"===b){b=this._get(a,"buttonText");var e=this._get(a,"buttonImage");a.trigger=h(this._get(a,"buttonImageOnly")?h("<img/>").addClass(this._triggerClass).attr({src:e,alt:b,title:b}):h("<button type='button'></button>").addClass(this._triggerClass).html(e?h("<img/>").attr({src:e,alt:b,
title:b}):b));c[d?"before":"after"](a.trigger);a.trigger.click(function(){h.datepicker._datepickerShowing&&h.datepicker._lastInput===c[0]?h.datepicker._hideDatepicker():(h.datepicker._datepickerShowing&&h.datepicker._lastInput!==c[0]&&h.datepicker._hideDatepicker(),h.datepicker._showDatepicker(c[0]));return!1})}},_autoSize:function(c){if(this._get(c,"autoSize")&&!c.inline){var a,b,d,e=new Date(2009,11,20),f=this._get(c,"dateFormat");if(f.match(/[DM]/)){var k=function(c){for(d=b=a=0;d<c.length;d++)c[d].length>
a&&(a=c[d].length,b=d);return b};e.setMonth(k(this._get(c,f.match(/MM/)?"monthNames":"monthNamesShort")));e.setDate(k(this._get(c,f.match(/DD/)?"dayNames":"dayNamesShort"))+20-e.getDay())}c.input.attr("size",this._formatDate(c,e).length)}},_inlineDatepicker:function(c,a){var b=h(c);b.hasClass(this.markerClassName)||(b.addClass(this.markerClassName).append(a.dpDiv),h.data(c,"datepicker",a),this._setDate(a,this._getDefaultDate(a),!0),this._updateDatepicker(a),this._updateAlternate(a),a.settings.disabled&&
this._disableDatepicker(c),a.dpDiv.css("display","block"))},_dialogDatepicker:function(c,a,b,e,f){c=this._dialogInst;c||(this.uuid+=1,c="dp"+this.uuid,this._dialogInput=h("<input type='text' id='"+c+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),h("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},h.data(this._dialogInput[0],"datepicker",c));d(c.settings,e||{});a=a&&a.constructor===Date?this._formatDate(c,
a):a;this._dialogInput.val(a);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;if(!this._pos){a=document.documentElement.clientWidth;e=document.documentElement.clientHeight;f=document.documentElement.scrollLeft||document.body.scrollLeft;var k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[a/2-100+f,e/2-150+k]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");c.settings.onSelect=b;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);
h.blockUI&&h.blockUI(this.dpDiv);h.data(this._dialogInput[0],"datepicker",c);return this},_destroyDatepicker:function(c){var a=h(c),b=h.data(c,"datepicker");if(a.hasClass(this.markerClassName)){var d=c.nodeName.toLowerCase();h.removeData(c,"datepicker");"input"===d?(b.append.remove(),b.trigger.remove(),a.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==d&&"span"!==d||
a.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(c){var a=h(c),b=h.data(c,"datepicker");if(a.hasClass(this.markerClassName)){var d=c.nodeName.toLowerCase();if("input"===d)c.disabled=!1,b.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"===d||"span"===d)d=a.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!1);this._disabledInputs=h.map(this._disabledInputs,function(a){return a===c?null:a})}},_disableDatepicker:function(c){var a=h(c),b=h.data(c,"datepicker");if(a.hasClass(this.markerClassName)){var d=c.nodeName.toLowerCase();if("input"===d)c.disabled=!0,b.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"===d||"span"===d)d=a.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=h.map(this._disabledInputs,function(a){return a===c?null:a});this._disabledInputs[this._disabledInputs.length]=c}},_isDisabledDatepicker:function(c){if(!c)return!1;for(var a=0;a<this._disabledInputs.length;a++)if(this._disabledInputs[a]===c)return!0;return!1},_getInst:function(c){try{return h.data(c,"datepicker")}catch(a){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(c,a,b){var e=this._getInst(c);if(2===arguments.length&&"string"===typeof a)return"defaults"===
a?h.extend({},h.datepicker._defaults):e?"all"===a?h.extend({},e.settings):this._get(e,a):null;var k=a||{};"string"===typeof a&&(k={},k[a]=b);if(e){this._curInst===e&&this._hideDatepicker();var l=this._getDateDatepicker(c,!0);var y=this._getMinMaxDate(e,"min");var z=this._getMinMaxDate(e,"max");d(e.settings,k);null!==y&&k.dateFormat!==f&&k.minDate===f&&(e.settings.minDate=this._formatDate(e,y));null!==z&&k.dateFormat!==f&&k.maxDate===f&&(e.settings.maxDate=this._formatDate(e,z));"disabled"in k&&(k.disabled?
this._disableDatepicker(c):this._enableDatepicker(c));this._attachments(h(c),e);this._autoSize(e);this._setDate(e,l);this._updateAlternate(e);this._updateDatepicker(e)}},_changeDatepicker:function(c,a,b){this._optionDatepicker(c,a,b)},_refreshDatepicker:function(c){(c=this._getInst(c))&&this._updateDatepicker(c)},_setDateDatepicker:function(c,a){if(c=this._getInst(c))this._setDate(c,a),this._updateDatepicker(c),this._updateAlternate(c)},_getDateDatepicker:function(c,a){(c=this._getInst(c))&&!c.inline&&
this._setDateFromField(c,a);return c?this._getDate(c):null},_doKeyDown:function(c){var a=h.datepicker._getInst(c.target);var b=!0;var d=a.dpDiv.is(".ui-datepicker-rtl");a._keyEvent=!0;if(h.datepicker._datepickerShowing)switch(c.keyCode){case 9:h.datepicker._hideDatepicker();b=!1;break;case 13:return b=h("td."+h.datepicker._dayOverClass+":not(."+h.datepicker._currentClass+")",a.dpDiv),b[0]&&h.datepicker._selectDay(c.target,a.selectedMonth,a.selectedYear,b[0]),(c=h.datepicker._get(a,"onSelect"))?(b=
h.datepicker._formatDate(a),c.apply(a.input?a.input[0]:null,[b,a])):h.datepicker._hideDatepicker(),!1;case 27:h.datepicker._hideDatepicker();break;case 33:h.datepicker._adjustDate(c.target,c.ctrlKey?-h.datepicker._get(a,"stepBigMonths"):-h.datepicker._get(a,"stepMonths"),"M");break;case 34:h.datepicker._adjustDate(c.target,c.ctrlKey?+h.datepicker._get(a,"stepBigMonths"):+h.datepicker._get(a,"stepMonths"),"M");break;case 35:(c.ctrlKey||c.metaKey)&&h.datepicker._clearDate(c.target);b=c.ctrlKey||c.metaKey;
break;case 36:(c.ctrlKey||c.metaKey)&&h.datepicker._gotoToday(c.target);b=c.ctrlKey||c.metaKey;break;case 37:(c.ctrlKey||c.metaKey)&&h.datepicker._adjustDate(c.target,d?1:-1,"D");b=c.ctrlKey||c.metaKey;c.originalEvent.altKey&&h.datepicker._adjustDate(c.target,c.ctrlKey?-h.datepicker._get(a,"stepBigMonths"):-h.datepicker._get(a,"stepMonths"),"M");break;case 38:(c.ctrlKey||c.metaKey)&&h.datepicker._adjustDate(c.target,-7,"D");b=c.ctrlKey||c.metaKey;break;case 39:(c.ctrlKey||c.metaKey)&&h.datepicker._adjustDate(c.target,
d?-1:1,"D");b=c.ctrlKey||c.metaKey;c.originalEvent.altKey&&h.datepicker._adjustDate(c.target,c.ctrlKey?+h.datepicker._get(a,"stepBigMonths"):+h.datepicker._get(a,"stepMonths"),"M");break;case 40:(c.ctrlKey||c.metaKey)&&h.datepicker._adjustDate(c.target,7,"D");b=c.ctrlKey||c.metaKey;break;default:b=!1}else 36===c.keyCode&&c.ctrlKey?h.datepicker._showDatepicker(this):b=!1;b&&(c.preventDefault(),c.stopPropagation())},_doKeyPress:function(c){var a=h.datepicker._getInst(c.target);if(h.datepicker._get(a,
"constrainInput")){a=h.datepicker._possibleChars(h.datepicker._get(a,"dateFormat"));var b=String.fromCharCode(null==c.charCode?c.keyCode:c.charCode);return c.ctrlKey||c.metaKey||" ">b||!a||-1<a.indexOf(b)}},_doKeyUp:function(c){var a;c=h.datepicker._getInst(c.target);if(c.input.val()!==c.lastVal)try{if(a=h.datepicker.parseDate(h.datepicker._get(c,"dateFormat"),c.input?c.input.val():null,h.datepicker._getFormatConfig(c)))h.datepicker._setDateFromField(c),h.datepicker._updateAlternate(c),h.datepicker._updateDatepicker(c)}catch(l){}return!0},
_showDatepicker:function(c){c=c.target||c;"input"!==c.nodeName.toLowerCase()&&(c=h("input",c.parentNode)[0]);if(!h.datepicker._isDisabledDatepicker(c)&&h.datepicker._lastInput!==c){var a=h.datepicker._getInst(c);h.datepicker._curInst&&h.datepicker._curInst!==a&&(h.datepicker._curInst.dpDiv.stop(!0,!0),a&&h.datepicker._datepickerShowing&&h.datepicker._hideDatepicker(h.datepicker._curInst.input[0]));var b=(b=h.datepicker._get(a,"beforeShow"))?b.apply(c,[c,a]):{};if(!1!==b){d(a.settings,b);a.lastVal=
null;h.datepicker._lastInput=c;h.datepicker._setDateFromField(a);h.datepicker._inDialog&&(c.value="");h.datepicker._pos||(h.datepicker._pos=h.datepicker._findPos(c),h.datepicker._pos[1]+=c.offsetHeight);var e=!1;h(c).parents().each(function(){e|="fixed"===h(this).css("position");return!e});b={left:h.datepicker._pos[0],top:h.datepicker._pos[1]};h.datepicker._pos=null;a.dpDiv.empty();a.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});h.datepicker._updateDatepicker(a);b=h.datepicker._checkOffset(a,
b,e);a.dpDiv.css({position:h.datepicker._inDialog&&h.blockUI?"static":e?"fixed":"absolute",display:"none",left:b.left+"px",top:b.top+"px"});if(!a.inline){b=h.datepicker._get(a,"showAnim");var f=h.datepicker._get(a,"duration");a.dpDiv.zIndex(h(c).zIndex()+1);h.datepicker._datepickerShowing=!0;if(h.effects&&h.effects.effect[b])a.dpDiv.show(b,h.datepicker._get(a,"showOptions"),f);else a.dpDiv[b||"show"](b?f:null);h.datepicker._shouldFocusInput(a)&&a.input.focus();h.datepicker._curInst=a}}}},_updateDatepicker:function(c){this.maxRows=
4;k=c;c.dpDiv.empty().append(this._generateHTML(c));this._attachHandlers(c);c.dpDiv.find("."+this._dayOverClass+" a").mouseover();var a=this._getNumberOfMonths(c),b=a[1];c.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<b&&c.dpDiv.addClass("ui-datepicker-multi-"+b).css("width",17*b+"em");c.dpDiv[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("ui-datepicker-multi");c.dpDiv[(this._get(c,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");c===h.datepicker._curInst&&
h.datepicker._datepickerShowing&&h.datepicker._shouldFocusInput(c)&&c.input.focus();if(c.yearshtml){var d=c.yearshtml;setTimeout(function(){d===c.yearshtml&&c.yearshtml&&c.dpDiv.find("select.ui-datepicker-year:first").replaceWith(c.yearshtml);d=c.yearshtml=null},0)}},_shouldFocusInput:function(c){return c.input&&c.input.is(":visible")&&!c.input.is(":disabled")&&!c.input.is(":focus")},_checkOffset:function(c,a,b){var d=c.dpDiv.outerWidth(),e=c.dpDiv.outerHeight(),f=c.input?c.input.outerWidth():0,k=
c.input?c.input.outerHeight():0,l=document.documentElement.clientWidth+(b?0:h(document).scrollLeft()),p=document.documentElement.clientHeight+(b?0:h(document).scrollTop());a.left-=this._get(c,"isRTL")?d-f:0;a.left-=b&&a.left===c.input.offset().left?h(document).scrollLeft():0;a.top-=b&&a.top===c.input.offset().top+k?h(document).scrollTop():0;a.left-=Math.min(a.left,a.left+d>l&&l>d?Math.abs(a.left+d-l):0);a.top-=Math.min(a.top,a.top+e>p&&p>e?Math.abs(e+k):0);return a},_findPos:function(c){var a=this._getInst(c);
for(a=this._get(a,"isRTL");c&&("hidden"===c.type||1!==c.nodeType||h.expr.filters.hidden(c));)c=c[a?"previousSibling":"nextSibling"];c=h(c).offset();return[c.left,c.top]},_hideDatepicker:function(c){var a=this._curInst;if(a&&(!c||a===h.data(c,"datepicker"))&&this._datepickerShowing){c=this._get(a,"showAnim");var b=this._get(a,"duration");var d=function(){h.datepicker._tidyDialog(a)};if(h.effects&&(h.effects.effect[c]||h.effects[c]))a.dpDiv.hide(c,h.datepicker._get(a,"showOptions"),b,d);else a.dpDiv["slideDown"===
c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?b:null,d);c||d();this._datepickerShowing=!1;(c=this._get(a,"onClose"))&&c.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),h.blockUI&&(h.unblockUI(),h("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(c){c.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(c){if(h.datepicker._curInst){c=
h(c.target);var a=h.datepicker._getInst(c[0]);(!(c[0].id===h.datepicker._mainDivId||0!==c.parents("#"+h.datepicker._mainDivId).length||c.hasClass(h.datepicker.markerClassName)||c.closest("."+h.datepicker._triggerClass).length||!h.datepicker._datepickerShowing||h.datepicker._inDialog&&h.blockUI)||c.hasClass(h.datepicker.markerClassName)&&h.datepicker._curInst!==a)&&h.datepicker._hideDatepicker()}},_adjustDate:function(c,a,b){c=h(c);var d=this._getInst(c[0]);this._isDisabledDatepicker(c[0])||(this._adjustInstDate(d,
a+("M"===b?this._get(d,"showCurrentAtPos"):0),b),this._updateDatepicker(d))},_gotoToday:function(c){var a=h(c),b=this._getInst(a[0]);this._get(b,"gotoCurrent")&&b.currentDay?(b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear):(c=new Date,b.selectedDay=c.getDate(),b.drawMonth=b.selectedMonth=c.getMonth(),b.drawYear=b.selectedYear=c.getFullYear());this._notifyChange(b);this._adjustDate(a)},_selectMonthYear:function(c,a,b){c=h(c);var d=this._getInst(c[0]);
d["selected"+("M"===b?"Month":"Year")]=d["draw"+("M"===b?"Month":"Year")]=parseInt(a.options[a.selectedIndex].value,10);this._notifyChange(d);this._adjustDate(c)},_selectDay:function(c,a,b,d){var e=h(c);h(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])||(e=this._getInst(e[0]),e.selectedDay=e.currentDay=h("a",d).html(),e.selectedMonth=e.currentMonth=a,e.selectedYear=e.currentYear=b,this._selectDate(c,this._formatDate(e,e.currentDay,e.currentMonth,e.currentYear)))},_clearDate:function(c){c=
h(c);this._selectDate(c,"")},_selectDate:function(c,a){c=h(c);var b=this._getInst(c[0]);a=null!=a?a:this._formatDate(b);b.input&&b.input.val(a);this._updateAlternate(b);(c=this._get(b,"onSelect"))?c.apply(b.input?b.input[0]:null,[a,b]):b.input&&b.input.trigger("change");b.inline?this._updateDatepicker(b):(this._hideDatepicker(),this._lastInput=b.input[0],"object"!==typeof b.input[0]&&b.input.focus(),this._lastInput=null)},_updateAlternate:function(c){var a=this._get(c,"altField");if(a){var b=this._get(c,
"altFormat")||this._get(c,"dateFormat");var d=this._getDate(c);var e=this.formatDate(b,d,this._getFormatConfig(c));h(a).each(function(){h(this).val(e)})}},noWeekends:function(c){c=c.getDay();return[0<c&&6>c,""]},iso8601Week:function(c){var a=new Date(c.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));c=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((c-a)/864E5)/7)+1},parseDate:function(c,a,b){if(null==c||null==a)throw"Invalid arguments";a="object"===typeof a?a.toString():a+
"";if(""===a)return null;var d,e=0;var f=(b?b.shortYearCutoff:null)||this._defaults.shortYearCutoff;f="string"!==typeof f?f:(new Date).getFullYear()%100+parseInt(f,10);var k=(b?b.dayNamesShort:null)||this._defaults.dayNamesShort;var l=(b?b.dayNames:null)||this._defaults.dayNames,p=(b?b.monthNamesShort:null)||this._defaults.monthNamesShort,x=(b?b.monthNames:null)||this._defaults.monthNames,t=b=-1,B=-1,C=-1,F=!1,H=function(a){(a=d+1<c.length&&c.charAt(d+1)===a)&&d++;return a},G=function(c){var b=H(c);
c=new RegExp("^\\d{1,"+("@"===c?14:"!"===c?20:"y"===c&&b?4:"o"===c?3:2)+"}");c=a.substring(e).match(c);if(!c)throw"Missing number at position "+e;e+=c[0].length;return parseInt(c[0],10)},E=function(c,b,g){var d=-1;c=h.map(H(c)?g:b,function(a,c){return[[c,a]]}).sort(function(a,c){return-(a[1].length-c[1].length)});h.each(c,function(c,b){c=b[1];if(a.substr(e,c.length).toLowerCase()===c.toLowerCase())return d=b[0],e+=c.length,!1});if(-1!==d)return d+1;throw"Unknown name at position "+e;},K=function(){if(a.charAt(e)!==
c.charAt(d))throw"Unexpected literal at position "+e;e++};for(d=0;d<c.length;d++)if(F)"'"!==c.charAt(d)||H("'")?K():F=!1;else switch(c.charAt(d)){case "d":B=G("d");break;case "D":E("D",k,l);break;case "o":C=G("o");break;case "m":t=G("m");break;case "M":t=E("M",p,x);break;case "y":b=G("y");break;case "@":var g=new Date(G("@"));b=g.getFullYear();t=g.getMonth()+1;B=g.getDate();break;case "!":g=new Date((G("!")-this._ticksTo1970)/1E4);b=g.getFullYear();t=g.getMonth()+1;B=g.getDate();break;case "'":H("'")?
K():F=!0;break;default:K()}if(e<a.length&&(k=a.substr(e),!/^\s+/.test(k)))throw"Extra/unparsed characters found in date: "+k;-1===b?b=(new Date).getFullYear():100>b&&(b+=(new Date).getFullYear()-(new Date).getFullYear()%100+(b<=f?0:-100));if(-1<C){t=1;B=C;do{f=this._getDaysInMonth(b,t-1);if(B<=f)break;t++;B-=f}while(1)}g=this._daylightSavingAdjust(new Date(b,t-1,B));if(g.getFullYear()!==b||g.getMonth()+1!==t||g.getDate()!==B)throw"Invalid date";return g},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:62135596800*1E7,formatDate:function(c,a,b){if(!a)return"";var d,e=(b?b.dayNamesShort:null)||this._defaults.dayNamesShort,f=(b?b.dayNames:null)||this._defaults.dayNames,k=(b?b.monthNamesShort:null)||this._defaults.monthNamesShort;b=(b?b.monthNames:null)||this._defaults.monthNames;var l=function(a){(a=d+1<c.length&&c.charAt(d+1)===a)&&
d++;return a},h=function(a,c,b){c=""+c;if(l(a))for(;c.length<b;)c="0"+c;return c},x=function(a,c,b,d){return l(a)?d[c]:b[c]},t="",B=!1;if(a)for(d=0;d<c.length;d++)if(B)"'"!==c.charAt(d)||l("'")?t+=c.charAt(d):B=!1;else switch(c.charAt(d)){case "d":t+=h("d",a.getDate(),2);break;case "D":t+=x("D",a.getDay(),e,f);break;case "o":t+=h("o",Math.round(((new Date(a.getFullYear(),a.getMonth(),a.getDate())).getTime()-(new Date(a.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":t+=h("m",a.getMonth()+
1,2);break;case "M":t+=x("M",a.getMonth(),k,b);break;case "y":t+=l("y")?a.getFullYear():(10>a.getYear()%100?"0":"")+a.getYear()%100;break;case "@":t+=a.getTime();break;case "!":t+=1E4*a.getTime()+this._ticksTo1970;break;case "'":l("'")?t+="'":B=!0;break;default:t+=c.charAt(d)}return t},_possibleChars:function(c){var a,b="",d=!1,e=function(b){(b=a+1<c.length&&c.charAt(a+1)===b)&&a++;return b};for(a=0;a<c.length;a++)if(d)"'"!==c.charAt(a)||e("'")?b+=c.charAt(a):d=!1;else switch(c.charAt(a)){case "d":case "m":case "y":case "@":b+=
"0123456789";break;case "D":case "M":return null;case "'":e("'")?b+="'":d=!0;break;default:b+=c.charAt(a)}return b},_get:function(c,a){return c.settings[a]!==f?c.settings[a]:this._defaults[a]},_setDateFromField:function(c,a){if(c.input.val()!==c.lastVal){var b=this._get(c,"dateFormat"),d=c.lastVal=c.input?c.input.val():null,e=this._getDefaultDate(c),f=e,k=this._getFormatConfig(c);try{f=this.parseDate(b,d,k)||e}catch(z){d=a?"":d}c.selectedDay=f.getDate();c.drawMonth=c.selectedMonth=f.getMonth();c.drawYear=
c.selectedYear=f.getFullYear();c.currentDay=d?f.getDate():0;c.currentMonth=d?f.getMonth():0;c.currentYear=d?f.getFullYear():0;this._adjustInstDate(c)}},_getDefaultDate:function(c){return this._restrictMinMax(c,this._determineDate(c,this._get(c,"defaultDate"),new Date))},_determineDate:function(c,a,b){var d=function(a){var c=new Date;c.setDate(c.getDate()+a);return c},e=function(a){try{return h.datepicker.parseDate(h.datepicker._get(c,"dateFormat"),a,h.datepicker._getFormatConfig(c))}catch(B){}var b=
(a.toLowerCase().match(/^c/)?h.datepicker._getDate(c):null)||new Date,d=b.getFullYear(),e=b.getMonth();b=b.getDate();for(var f=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,k=f.exec(a);k;){switch(k[2]||"d"){case "d":case "D":b+=parseInt(k[1],10);break;case "w":case "W":b+=7*parseInt(k[1],10);break;case "m":case "M":e+=parseInt(k[1],10);b=Math.min(b,h.datepicker._getDaysInMonth(d,e));break;case "y":case "Y":d+=parseInt(k[1],10),b=Math.min(b,h.datepicker._getDaysInMonth(d,e))}k=f.exec(a)}return new Date(d,
e,b)};if(a=(a=null==a||""===a?b:"string"===typeof a?e(a):"number"===typeof a?isNaN(a)?b:d(a):new Date(a.getTime()))&&"Invalid Date"===a.toString()?b:a)a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);return this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(c){if(!c)return null;c.setHours(12<c.getHours()?c.getHours()+2:0);return c},_setDate:function(c,a,b){var d=!a,e=c.selectedMonth,f=c.selectedYear;a=this._restrictMinMax(c,this._determineDate(c,a,new Date));c.selectedDay=
c.currentDay=a.getDate();c.drawMonth=c.selectedMonth=c.currentMonth=a.getMonth();c.drawYear=c.selectedYear=c.currentYear=a.getFullYear();e===c.selectedMonth&&f===c.selectedYear||b||this._notifyChange(c);this._adjustInstDate(c);c.input&&c.input.val(d?"":this._formatDate(c))},_getDate:function(c){return!c.currentYear||c.input&&""===c.input.val()?null:this._daylightSavingAdjust(new Date(c.currentYear,c.currentMonth,c.currentDay))},_attachHandlers:function(c){var a=this._get(c,"stepMonths"),b="#"+c.id.replace(/\\\\/g,
"\\");c.dpDiv.find("[data-handler]").map(function(){h(this).bind(this.getAttribute("data-event"),{prev:function(){h.datepicker._adjustDate(b,-a,"M")},next:function(){h.datepicker._adjustDate(b,+a,"M")},hide:function(){h.datepicker._hideDatepicker()},today:function(){h.datepicker._gotoToday(b)},selectDay:function(){h.datepicker._selectDay(b,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function(){h.datepicker._selectMonthYear(b,this,"M");return!1},selectYear:function(){h.datepicker._selectMonthYear(b,
this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(c){var a,b,d,e,f=new Date;f=this._daylightSavingAdjust(new Date(f.getFullYear(),f.getMonth(),f.getDate()));var k=this._get(c,"isRTL");var h=this._get(c,"showButtonPanel");var p=this._get(c,"hideIfNoPrevNext");var x=this._get(c,"navigationAsDateFormat");var t=this._getNumberOfMonths(c),B=this._get(c,"showCurrentAtPos");var C=this._get(c,"stepMonths");var F=1!==t[0]||1!==t[1],H=this._daylightSavingAdjust(c.currentDay?
new Date(c.currentYear,c.currentMonth,c.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(c,"min"),E=this._getMinMaxDate(c,"max");B=c.drawMonth-B;var K=c.drawYear;0>B&&(B+=12,K--);if(E){var g=this._daylightSavingAdjust(new Date(E.getFullYear(),E.getMonth()-t[0]*t[1]+1,E.getDate()));for(g=G&&g<G?G:g;this._daylightSavingAdjust(new Date(K,B,1))>g;)B--,0>B&&(B=11,K--)}c.drawMonth=B;c.drawYear=K;g=this._get(c,"prevText");g=x?this.formatDate(g,this._daylightSavingAdjust(new Date(K,B-C,1)),this._getFormatConfig(c)):
g;g=this._canAdjustMonth(c,-1,K,B)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+g+"'><span class='ui-icon ui-icon-circle-triangle-"+(k?"e":"w")+"'>"+g+"</span></a>":p?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+g+"'><span class='ui-icon ui-icon-circle-triangle-"+(k?"e":"w")+"'>"+g+"</span></a>";var m=this._get(c,"nextText");m=x?this.formatDate(m,this._daylightSavingAdjust(new Date(K,B+C,1)),this._getFormatConfig(c)):m;
p=this._canAdjustMonth(c,1,K,B)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+m+"'><span class='ui-icon ui-icon-circle-triangle-"+(k?"w":"e")+"'>"+m+"</span></a>":p?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+m+"'><span class='ui-icon ui-icon-circle-triangle-"+(k?"w":"e")+"'>"+m+"</span></a>";C=this._get(c,"currentText");m=this._get(c,"gotoCurrent")&&c.currentDay?H:f;C=x?this.formatDate(C,m,this._getFormatConfig(c)):C;x=
c.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(c,"closeText")+"</button>";h=h?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(k?x:"")+(this._isInRange(c,m)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+C+"</button>":"")+(k?"":x)+"</div>":"";x=parseInt(this._get(c,"firstDay"),
10);x=isNaN(x)?0:x;C=this._get(c,"showWeek");m=this._get(c,"dayNames");var A=this._get(c,"dayNamesMin");var M=this._get(c,"monthNames");var L=this._get(c,"monthNamesShort");var Q=this._get(c,"beforeShowDay");var ia=this._get(c,"showOtherMonths");var V=this._get(c,"selectOtherMonths");var Aa=this._getDefaultDate(c);var U="";R;for(a=0;a<t[0];a++){var X="";this.maxRows=4;for(b=0;b<t[1];b++){var da=this._daylightSavingAdjust(new Date(K,B,c.selectedDay));var R=" ui-corner-all";var Z="";if(F){Z+="<div class='ui-datepicker-group";
if(1<t[1])switch(b){case 0:Z+=" ui-datepicker-group-first";R=" ui-corner-"+(k?"right":"left");break;case t[1]-1:Z+=" ui-datepicker-group-last";R=" ui-corner-"+(k?"left":"right");break;default:Z+=" ui-datepicker-group-middle",R=""}Z+="'>"}Z+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+R+"'>"+(/all|left/.test(R)&&0===a?k?p:g:"")+(/all|right/.test(R)&&0===a?k?g:p:"")+this._generateMonthYearHeader(c,B,K,G,E,0<a||0<b,M,L)+"</div><table class='ui-datepicker-calendar'><thead><tr>";
var sa=C?"<th class='ui-datepicker-week-col'>"+this._get(c,"weekHeader")+"</th>":"";for(R=0;7>R;R++){var qa=(R+x)%7;sa+="<th"+(5<=(R+x+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+m[qa]+"'>"+A[qa]+"</span></th>"}Z+=sa+"</tr></thead><tbody>";sa=this._getDaysInMonth(K,B);K===c.selectedYear&&B===c.selectedMonth&&(c.selectedDay=Math.min(c.selectedDay,sa));R=(this._getFirstDayOfMonth(K,B)-x+7)%7;sa=Math.ceil((R+sa)/7);this.maxRows=sa=F?this.maxRows>sa?this.maxRows:sa:sa;qa=this._daylightSavingAdjust(new Date(K,
B,1-R));for(d=0;d<sa;d++){Z+="<tr>";var ma=C?"<td class='ui-datepicker-week-col'>"+this._get(c,"calculateWeek")(qa)+"</td>":"";for(R=0;7>R;R++){var ea=Q?Q.apply(c.input?c.input[0]:null,[qa]):[!0,""];var Ya=(e=qa.getMonth()!==B)&&!V||!ea[0]||G&&qa<G||E&&qa>E;ma+="<td class='"+(5<=(R+x+6)%7?" ui-datepicker-week-end":"")+(e?" ui-datepicker-other-month":"")+(qa.getTime()===da.getTime()&&B===c.selectedMonth&&c._keyEvent||Aa.getTime()===qa.getTime()&&Aa.getTime()===da.getTime()?" "+this._dayOverClass:"")+
(Ya?" "+this._unselectableClass+" ui-state-disabled":"")+(e&&!ia?"":" "+ea[1]+(qa.getTime()===H.getTime()?" "+this._currentClass:"")+(qa.getTime()===f.getTime()?" ui-datepicker-today":""))+"'"+(e&&!ia||!ea[2]?"":" title='"+ea[2].replace(/'/g,"&#39;")+"'")+(Ya?"":" data-handler='selectDay' data-event='click' data-month='"+qa.getMonth()+"' data-year='"+qa.getFullYear()+"'")+">"+(e&&!ia?"&#xa0;":Ya?"<span class='ui-state-default'>"+qa.getDate()+"</span>":"<a class='ui-state-default"+(qa.getTime()===
f.getTime()?" ui-state-highlight":"")+(qa.getTime()===H.getTime()?" ui-state-active":"")+(e?" ui-priority-secondary":"")+"' href='#'>"+qa.getDate()+"</a>")+"</td>";qa.setDate(qa.getDate()+1);qa=this._daylightSavingAdjust(qa)}Z+=ma+"</tr>"}B++;11<B&&(B=0,K++);Z+="</tbody></table>"+(F?"</div>"+(0<t[0]&&b===t[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");X+=Z}U+=X}c._keyEvent=!1;return U+h},_generateMonthYearHeader:function(c,a,b,d,e,f,k,h){var l,u=this._get(c,"changeMonth"),t=this._get(c,
"changeYear"),r=this._get(c,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",q="";if(f||!u)q+="<span class='ui-datepicker-month'>"+k[a]+"</span>";else{k=d&&d.getFullYear()===b;var z=e&&e.getFullYear()===b;q+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(l=0;12>l;l++)(!k||l>=d.getMonth())&&(!z||l<=e.getMonth())&&(q+="<option value='"+l+"'"+(l===a?" selected='selected'":"")+">"+h[l]+"</option>");q+="</select>"}r||(y+=q+(!f&&u&&t?"":"&#xa0;"));if(!c.yearshtml)if(c.yearshtml=
"",f||!t)y+="<span class='ui-datepicker-year'>"+b+"</span>";else{h=this._get(c,"yearRange").split(":");var G=(new Date).getFullYear();k=function(a){a=a.match(/c[+\-].*/)?b+parseInt(a.substring(1),10):a.match(/[+\-].*/)?G+parseInt(a,10):parseInt(a,10);return isNaN(a)?G:a};a=k(h[0]);h=Math.max(a,k(h[1]||""));a=d?Math.max(a,d.getFullYear()):a;h=e?Math.min(h,e.getFullYear()):h;for(c.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";a<=h;a++)c.yearshtml+="<option value='"+
a+"'"+(a===b?" selected='selected'":"")+">"+a+"</option>";c.yearshtml+="</select>";y+=c.yearshtml;c.yearshtml=null}y+=this._get(c,"yearSuffix");r&&(y+=(!f&&u&&t?"":"&#xa0;")+q);return y+"</div>"},_adjustInstDate:function(c,a,b){var d=c.drawYear+("Y"===b?a:0),e=c.drawMonth+("M"===b?a:0);a=Math.min(c.selectedDay,this._getDaysInMonth(d,e))+("D"===b?a:0);d=this._restrictMinMax(c,this._daylightSavingAdjust(new Date(d,e,a)));c.selectedDay=d.getDate();c.drawMonth=c.selectedMonth=d.getMonth();c.drawYear=
c.selectedYear=d.getFullYear();"M"!==b&&"Y"!==b||this._notifyChange(c)},_restrictMinMax:function(c,a){var b=this._getMinMaxDate(c,"min");c=this._getMinMaxDate(c,"max");a=b&&a<b?b:a;return c&&a>c?c:a},_notifyChange:function(c){var a=this._get(c,"onChangeMonthYear");a&&a.apply(c.input?c.input[0]:null,[c.selectedYear,c.selectedMonth+1,c])},_getNumberOfMonths:function(c){c=this._get(c,"numberOfMonths");return null==c?[1,1]:"number"===typeof c?[1,c]:c},_getMinMaxDate:function(c,a){return this._determineDate(c,
this._get(c,a+"Date"),null)},_getDaysInMonth:function(c,a){return 32-this._daylightSavingAdjust(new Date(c,a,32)).getDate()},_getFirstDayOfMonth:function(c,a){return(new Date(c,a,1)).getDay()},_canAdjustMonth:function(c,a,b,d){var e=this._getNumberOfMonths(c);b=this._daylightSavingAdjust(new Date(b,d+(0>a?a:e[0]*e[1]),1));0>a&&b.setDate(this._getDaysInMonth(b.getFullYear(),b.getMonth()));return this._isInRange(c,b)},_isInRange:function(c,a){var b=this._getMinMaxDate(c,"min"),d=this._getMinMaxDate(c,
"max"),e=null,f=null;if(c=this._get(c,"yearRange")){c=c.split(":");var k=(new Date).getFullYear();e=parseInt(c[0],10);f=parseInt(c[1],10);c[0].match(/[+\-].*/)&&(e+=k);c[1].match(/[+\-].*/)&&(f+=k)}return(!b||a.getTime()>=b.getTime())&&(!d||a.getTime()<=d.getTime())&&(!e||a.getFullYear()>=e)&&(!f||a.getFullYear()<=f)},_getFormatConfig:function(c){var a=this._get(c,"shortYearCutoff");a="string"!==typeof a?a:(new Date).getFullYear()%100+parseInt(a,10);return{shortYearCutoff:a,dayNamesShort:this._get(c,
"dayNamesShort"),dayNames:this._get(c,"dayNames"),monthNamesShort:this._get(c,"monthNamesShort"),monthNames:this._get(c,"monthNames")}},_formatDate:function(c,a,b,d){a||(c.currentDay=c.selectedDay,c.currentMonth=c.selectedMonth,c.currentYear=c.selectedYear);a=a?"object"===typeof a?a:this._daylightSavingAdjust(new Date(d,b,a)):this._daylightSavingAdjust(new Date(c.currentYear,c.currentMonth,c.currentDay));return this.formatDate(this._get(c,"dateFormat"),a,this._getFormatConfig(c))}});h.fn.datepicker=
function(c){if(!this.length)return this;h.datepicker.initialized||(h(document).mousedown(h.datepicker._checkExternalClick),h.datepicker.initialized=!0);0===h("#"+h.datepicker._mainDivId).length&&h("body").append(h.datepicker.dpDiv);var a=Array.prototype.slice.call(arguments,1);return"string"===typeof c&&("isDisabled"===c||"getDate"===c||"widget"===c)||"option"===c&&2===arguments.length&&"string"===typeof arguments[1]?h.datepicker["_"+c+"Datepicker"].apply(h.datepicker,[this[0]].concat(a)):this.each(function(){"string"===
typeof c?h.datepicker["_"+c+"Datepicker"].apply(h.datepicker,[this].concat(a)):h.datepicker._attachDatepicker(this,c)})};h.datepicker=new b;h.datepicker.initialized=!1;h.datepicker.uuid=(new Date).getTime();h.datepicker.version="1.10.4"})(jQuery);
(function(h,f){var b={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};h.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var d=h(this).css(b).offset().top;
0>d&&h(this).css("top",b.top-d)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};
this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();this.options.draggable&&h.fn.draggable&&this._makeDraggable();this.options.resizable&&h.fn.resizable&&this._makeResizable();this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=
this.options.appendTo;return b&&(b.jquery||b.nodeType)?h(b):this.document.find(b||"body").eq(0)},_destroy:function(){var b=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(!0,!0).remove();this.originalTitle&&this.element.attr("title",this.originalTitle);var e=b.parent.children().eq(b.index);e.length&&e[0]!==this.element[0]?e.before(this.element):b.parent.append(this.element)},
widget:function(){return this.uiDialog},disable:h.noop,enable:h.noop,close:function(b){var d,c=this;if(this._isOpen&&!1!==this._trigger("beforeClose",b)){this._isOpen=!1;this._destroyOverlay();if(!this.opener.filter(":focusable").focus().length)try{(d=this.document[0].activeElement)&&"body"!==d.nodeName.toLowerCase()&&h(d).blur()}catch(a){}this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",b)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},
_moveToTop:function(b,e){var c=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;c&&!e&&this._trigger("focus",b);return c},open:function(){var b=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=h(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable();b._trigger("focus")}),this._trigger("open"))},_focusTabbable:function(){var b=
this.element.find("[autofocus]");b.length||(b=this.element.find(":tabbable"));b.length||(b=this.uiDialogButtonPane.find(":tabbable"));b.length||(b=this.uiDialogTitlebarClose.filter(":tabbable"));b.length||(b=this.uiDialog);b.eq(0).focus()},_keepFocus:function(b){function d(){var c=this.document[0].activeElement;this.uiDialog[0]===c||h.contains(this.uiDialog[0],c)||this._focusTabbable()}b.preventDefault();d.call(this);this._delay(d)},_createWrapper:function(){this.uiDialog=h("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+
this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===h.ui.keyCode.ESCAPE)b.preventDefault(),this.close(b);else if(b.keyCode===h.ui.keyCode.TAB){var d=this.uiDialog.find(":tabbable"),c=d.filter(":first");d=d.filter(":last");b.target!==d[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==c[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||
(d.focus(1),b.preventDefault()):(c.focus(1),b.preventDefault())}},mousedown:function(b){this._moveToTop(b)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){this.uiDialogTitlebar=h("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(b){h(b.target).closest(".ui-dialog-titlebar-close")||
this.uiDialog.focus()}});this.uiDialogTitlebarClose=h("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(b){b.preventDefault();this.close(b)}});var b=h("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);this._title(b);this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(b){this.options.title||
b.html("&#160;");b.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=h("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=h("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var b=this,e=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();h.isEmptyObject(e)||h.isArray(e)&&!e.length?this.uiDialog.removeClass("ui-dialog-buttons"):
(h.each(e,function(c,a){a=h.isFunction(a)?{click:a,text:c}:a;a=h.extend({type:"button"},a);var d=a.click;a.click=function(){d.apply(b.element[0],arguments)};c={icons:a.icons,text:a.showText};delete a.icons;delete a.showText;h("<button></button>",a).button(c).appendTo(b.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var e=this,c=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
handle:".ui-dialog-titlebar",containment:"document",start:function(a,c){h(this).addClass("ui-dialog-dragging");e._blockFrames();e._trigger("dragStart",a,b(c))},drag:function(a,c){e._trigger("drag",a,b(c))},stop:function(a,d){c.position=[d.position.left-e.document.scrollLeft(),d.position.top-e.document.scrollTop()];h(this).removeClass("ui-dialog-dragging");e._unblockFrames();e._trigger("dragStop",a,b(d))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,
position:a.position,size:a.size}}var e=this,c=this.options,a=c.resizable,f=this.uiDialog.css("position");a="string"===typeof a?a:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:c.maxWidth,maxHeight:c.maxHeight,minWidth:c.minWidth,minHeight:this._minHeight(),handles:a,start:function(a,c){h(this).addClass("ui-dialog-resizing");e._blockFrames();e._trigger("resizeStart",a,b(c))},resize:function(a,c){e._trigger("resize",
a,b(c))},stop:function(a,d){c.height=h(this).height();c.width=h(this).width();h(this).removeClass("ui-dialog-resizing");e._unblockFrames();e._trigger("resizeStop",a,b(d))}}).css("position",f)},_minHeight:function(){var b=this.options;return"auto"===b.height?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(){var b=this.uiDialog.is(":visible");b||this.uiDialog.show();this.uiDialog.position(this.options.position);b||this.uiDialog.hide()},_setOptions:function(d){var f=this,c=!1,a={};h.each(d,
function(d,k){f._setOption(d,k);d in b&&(c=!0);d in e&&(a[d]=k)});c&&(this._size(),this._position());this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(b,e){var c,a=this.uiDialog;"dialogClass"===b&&a.removeClass(this.options.dialogClass).addClass(e);"disabled"!==b&&(this._super(b,e),"appendTo"===b&&this.uiDialog.appendTo(this._appendTo()),"buttons"===b&&this._createButtons(),"closeText"===b&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===
b&&((c=a.is(":data(ui-draggable)"))&&!e&&a.draggable("destroy"),!c&&e&&this._makeDraggable()),"position"===b&&this._position(),"resizable"===b&&((c=a.is(":data(ui-resizable)"))&&!e&&a.resizable("destroy"),c&&"string"===typeof e&&a.resizable("option","handles",e),c||!1===e||this._makeResizable()),"title"===b&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var b=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});b.minWidth>b.width&&
(b.width=b.minWidth);var e=this.uiDialog.css({height:"auto",width:b.width}).outerHeight();var c=Math.max(0,b.minHeight-e);var a="number"===typeof b.maxHeight?Math.max(0,b.maxHeight-e):"none";"auto"===b.height?this.element.css({minHeight:c,maxHeight:a,height:"auto"}):this.element.height(Math.max(0,b.height-e));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=
h(this);return h("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return h(b.target).closest(".ui-dialog").length?!0:!!h(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=this,e=this.widgetFullName;h.ui.dialog.overlayInstances||this._delay(function(){h.ui.dialog.overlayInstances&&
this.document.bind("focusin.dialog",function(c){b._allowInteraction(c)||(c.preventDefault(),h(".ui-dialog:visible:last .ui-dialog-content").data(e)._focusTabbable())})});this.overlay=h("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});h.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(h.ui.dialog.overlayInstances--,h.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),
this.overlay.remove(),this.overlay=null)}});h.ui.dialog.overlayInstances=0;!1!==h.uiBackCompat&&h.widget("ui.dialog",h.ui.dialog,{_position:function(){var b=this.options.position,e=[],c=[0,0],a;if(b){if("string"===typeof b||"object"===typeof b&&"0"in b)e=b.split?b.split(" "):[b[0],b[1]],1===e.length&&(e[1]=e[0]),h.each(["left","top"],function(a,b){+e[a]===e[a]&&(c[a]=e[a],e[a]=b)}),b={my:e[0]+(0>c[0]?c[0]:"+"+c[0])+" "+e[1]+(0>c[1]?c[1]:"+"+c[1]),at:e.join(" ")};b=h.extend({},h.ui.dialog.prototype.options.position,
b)}else b=h.ui.dialog.prototype.options.position;(a=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.position(b);a||this.uiDialog.hide()}})})(jQuery);
(function(h,f){var b=/up|down|vertical/,e=/up|left|vertical|horizontal/;h.effects.effect.blind=function(d,f){var c=h(this),a="position top bottom left right height width".split(" "),k=h.effects.setMode(c,d.mode||"hide"),u=d.direction||"up",q=b.test(u),r=q?"height":"width",y=q?"top":"left";u=e.test(u);var z={},p="show"===k;c.parent().is(".ui-effects-wrapper")?h.effects.save(c.parent(),a):h.effects.save(c,a);c.show();var x=h.effects.createWrapper(c).css({overflow:"hidden"});var t=x[r]();var B=parseFloat(x.css(y))||
0;z[r]=p?t:0;u||(c.css(q?"bottom":"right",0).css(q?"top":"left","auto").css({position:"absolute"}),z[y]=p?B:t+B);p&&(x.css(r,0),u||x.css(y,B+t));x.animate(z,{duration:d.duration,easing:d.easing,queue:!1,complete:function(){"hide"===k&&c.hide();h.effects.restore(c,a);h.effects.removeWrapper(c);f()}})}})(jQuery);
(function(h,f){h.effects.effect.bounce=function(b,e){var d=h(this),f="position top bottom left right height width".split(" "),c=h.effects.setMode(d,b.mode||"effect"),a="hide"===c,l="show"===c,u=b.direction||"up";c=b.distance;var q=b.times||5,r=2*q+(l||a?1:0),y=b.duration/r;b=b.easing;var z="up"===u||"down"===u?"top":"left";u="up"===u||"left"===u;var p=d.queue(),x=p.length;(l||a)&&f.push("opacity");h.effects.save(d,f);d.show();h.effects.createWrapper(d);c||(c=d["top"===z?"outerHeight":"outerWidth"]()/
3);if(l){var t={opacity:1};t[z]=0;d.css("opacity",0).css(z,u?2*-c:2*c).animate(t,y,b)}a&&(c/=Math.pow(2,q-1));t={};for(l=t[z]=0;l<q;l++){var B={};B[z]=(u?"-=":"+=")+c;d.animate(B,y,b).animate(t,y,b);c=a?2*c:c/2}a&&(B={opacity:0},B[z]=(u?"-=":"+=")+c,d.animate(B,y,b));d.queue(function(){a&&d.hide();h.effects.restore(d,f);h.effects.removeWrapper(d);e()});1<x&&p.splice.apply(p,[1,0].concat(p.splice(x,r+1)));d.dequeue()}})(jQuery);
(function(h,f){h.effects.effect.clip=function(b,e){var d=h(this),f="position top bottom left right height width".split(" "),c="show"===h.effects.setMode(d,b.mode||"hide"),a="vertical"===(b.direction||"vertical"),l=a?"height":"width";a=a?"top":"left";var u={};h.effects.save(d,f);d.show();var q=h.effects.createWrapper(d).css({overflow:"hidden"});q="IMG"===d[0].tagName?q:d;var r=q[l]();c&&(q.css(l,0),q.css(a,r/2));u[l]=c?r:0;u[a]=c?0:r/2;q.animate(u,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){c||
d.hide();h.effects.restore(d,f);h.effects.removeWrapper(d);e()}})}})(jQuery);
(function(h,f){h.effects.effect.drop=function(b,e){var d=h(this),f="position top bottom left right opacity height width".split(" "),c=h.effects.setMode(d,b.mode||"hide"),a="show"===c,l=b.direction||"left",u="up"===l||"down"===l?"top":"left";l="up"===l||"left"===l?"pos":"neg";var q={opacity:a?1:0};h.effects.save(d,f);d.show();h.effects.createWrapper(d);var r=b.distance||d["top"===u?"outerHeight":"outerWidth"](!0)/2;a&&d.css("opacity",0).css(u,"pos"===l?-r:r);q[u]=(a?"pos"===l?"+=":"-=":"pos"===l?"-=":
"+=")+r;d.animate(q,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===c&&d.hide();h.effects.restore(d,f);h.effects.removeWrapper(d);e()}})}})(jQuery);
(function(h,f){h.effects.effect.explode=function(b,e){function d(){y.push(this);y.length===f*c&&(a.css({visibility:"visible"}),h(y).remove(),l||a.hide(),e())}var f=b.pieces?Math.round(Math.sqrt(b.pieces)):3,c=f,a=h(this),l="show"===h.effects.setMode(a,b.mode||"hide"),u=a.show().css("visibility","hidden").offset(),q=Math.ceil(a.outerWidth()/c),r=Math.ceil(a.outerHeight()/f),y=[],z,p;for(z=0;z<f;z++){var x=u.top+z*r;var t=z-(f-1)/2;for(p=0;p<c;p++){var B=u.left+p*q;var C=p-(c-1)/2;a.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",
visibility:"visible",left:-p*q,top:-z*r}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:q,height:r,left:B+(l?C*q:0),top:x+(l?t*r:0),opacity:l?0:1}).animate({left:B+(l?0:C*q),top:x+(l?0:t*r),opacity:l?1:0},b.duration||500,b.easing,d)}}}})(jQuery);(function(h,f){h.effects.effect.fade=function(b,e){var d=h(this),f=h.effects.setMode(d,b.mode||"toggle");d.animate({opacity:f},{queue:!1,duration:b.duration,easing:b.easing,complete:e})}})(jQuery);
(function(h,f){h.effects.effect.fold=function(b,e){var d=h(this),f="position top bottom left right height width".split(" "),c=h.effects.setMode(d,b.mode||"hide"),a="show"===c,l="hide"===c;c=b.size||15;var u=/([0-9]+)%/.exec(c),q=!!b.horizFirst,r=a!==q,y=r?["width","height"]:["height","width"],z=b.duration/2,p={},x={};h.effects.save(d,f);d.show();var t=h.effects.createWrapper(d).css({overflow:"hidden"});r=r?[t.width(),t.height()]:[t.height(),t.width()];u&&(c=parseInt(u[1],10)/100*r[l?0:1]);a&&t.css(q?
{height:0,width:c}:{height:c,width:0});p[y[0]]=a?r[0]:c;x[y[1]]=a?r[1]:0;t.animate(p,z,b.easing).animate(x,z,b.easing,function(){l&&d.hide();h.effects.restore(d,f);h.effects.removeWrapper(d);e()})}})(jQuery);
(function(h,f){h.effects.effect.highlight=function(b,e){var d=h(this),f=["backgroundImage","backgroundColor","opacity"],c=h.effects.setMode(d,b.mode||"show"),a={backgroundColor:d.css("backgroundColor")};"hide"===c&&(a.opacity=0);h.effects.save(d,f);d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(a,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===c&&d.hide();h.effects.restore(d,f);e()}})}})(jQuery);
(function(h,f){h.effects.effect.pulsate=function(b,e){var d=h(this),f=h.effects.setMode(d,b.mode||"show"),c="show"===f,a="hide"===f;f=2*(b.times||5)+(c||"hide"===f?1:0);var l=b.duration/f,u=0,q=d.queue(),r=q.length;if(c||!d.is(":visible"))d.css("opacity",0).show(),u=1;for(c=1;c<f;c++)d.animate({opacity:u},l,b.easing),u=1-u;d.animate({opacity:u},l,b.easing);d.queue(function(){a&&d.hide();e()});1<r&&q.splice.apply(q,[1,0].concat(q.splice(r,f+1)));d.dequeue()}})(jQuery);
(function(h,f){h.effects.effect.puff=function(b,e){var d=h(this),f=h.effects.setMode(d,b.mode||"hide"),c="hide"===f,a=parseInt(b.percent,10)||150,l=a/100,u={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};h.extend(b,{effect:"scale",queue:!1,fade:!0,mode:f,complete:e,percent:c?a:100,from:c?u:{height:u.height*l,width:u.width*l,outerHeight:u.outerHeight*l,outerWidth:u.outerWidth*l}});d.effect(b)};h.effects.effect.scale=function(b,e){var d=h(this),f=h.extend(!0,
{},b),c=h.effects.setMode(d,b.mode||"effect"),a=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===c?0:100),l=b.direction||"both",u=b.origin,q={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},r="horizontal"!==l?a/100:1;a="vertical"!==l?a/100:1;f.effect="size";f.queue=!1;f.complete=e;"effect"!==c&&(f.origin=u||["middle","center"],f.restore=!0);f.from=b.from||("show"===c?{height:0,width:0,outerHeight:0,outerWidth:0}:q);f.to={height:q.height*r,width:q.width*
a,outerHeight:q.outerHeight*r,outerWidth:q.outerWidth*a};f.fade&&("show"===c&&(f.from.opacity=0,f.to.opacity=1),"hide"===c&&(f.from.opacity=1,f.to.opacity=0));d.effect(f)};h.effects.effect.size=function(b,e){var d=h(this),f="position top bottom left right width height overflow opacity".split(" ");var c="position top bottom left right overflow opacity".split(" ");var a=["width","height","overflow"],l=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],q=["borderLeftWidth",
"borderRightWidth","paddingLeft","paddingRight"],r=h.effects.setMode(d,b.mode||"effect"),y=b.restore||"effect"!==r,z=b.scale||"both";var p=b.origin||["middle","center"];var x=d.css("position"),t=y?f:c,B={height:0,width:0,outerHeight:0,outerWidth:0};"show"===r&&d.show();c={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};"toggle"===b.mode&&"show"===r?(d.from=b.to||B,d.to=b.from||c):(d.from=b.from||("show"===r?B:c),d.to=b.to||("hide"===r?B:c));var C=d.from.height/
c.height;var F=d.from.width/c.width;var H=d.to.height/c.height;var G=d.to.width/c.width;if("box"===z||"both"===z)C!==H&&(t=t.concat(u),d.from=h.effects.setTransition(d,u,C,d.from),d.to=h.effects.setTransition(d,u,H,d.to)),F!==G&&(t=t.concat(q),d.from=h.effects.setTransition(d,q,F,d.from),d.to=h.effects.setTransition(d,q,G,d.to));"content"!==z&&"both"!==z||C===H||(t=t.concat(l).concat(a),d.from=h.effects.setTransition(d,l,C,d.from),d.to=h.effects.setTransition(d,l,H,d.to));h.effects.save(d,t);d.show();
h.effects.createWrapper(d);d.css("overflow","hidden").css(d.from);p&&(p=h.effects.getBaseline(p,c),d.from.top=(c.outerHeight-d.outerHeight())*p.y,d.from.left=(c.outerWidth-d.outerWidth())*p.x,d.to.top=(c.outerHeight-d.to.outerHeight)*p.y,d.to.left=(c.outerWidth-d.to.outerWidth)*p.x);d.css(d.from);if("content"===z||"both"===z)u=u.concat(["marginTop","marginBottom"]).concat(l),q=q.concat(["marginLeft","marginRight"]),a=f.concat(u).concat(q),d.find("*[width]").each(function(){var c=h(this),d=c.height(),
g=c.width(),m=c.outerHeight(),e=c.outerWidth();y&&h.effects.save(c,a);c.from={height:d*C,width:g*F,outerHeight:m*C,outerWidth:e*F};c.to={height:d*H,width:g*G,outerHeight:d*H,outerWidth:g*G};C!==H&&(c.from=h.effects.setTransition(c,u,C,c.from),c.to=h.effects.setTransition(c,u,H,c.to));F!==G&&(c.from=h.effects.setTransition(c,q,F,c.from),c.to=h.effects.setTransition(c,q,G,c.to));c.css(c.from);c.animate(c.to,b.duration,b.easing,function(){y&&h.effects.restore(c,a)})});d.animate(d.to,{queue:!1,duration:b.duration,
easing:b.easing,complete:function(){0===d.to.opacity&&d.css("opacity",d.from.opacity);"hide"===r&&d.hide();h.effects.restore(d,t);y||("static"===x?d.css({position:"relative",top:d.to.top,left:d.to.left}):h.each(["top","left"],function(a,c){d.css(c,function(c,b){c=parseInt(b,10);var g=a?d.to.left:d.to.top;return"auto"===b?g+"px":c+g+"px"})}));h.effects.removeWrapper(d);e()}})}})(jQuery);
(function(h,f){h.effects.effect.shake=function(b,e){var d=h(this),f="position top bottom left right height width".split(" "),c=h.effects.setMode(d,b.mode||"effect"),a=b.direction||"left",l=b.distance||20,u=b.times||3,q=2*u+1,r=Math.round(b.duration/q),y="up"===a||"down"===a?"top":"left",z="up"===a||"left"===a;a={};var p={},x={},t=d.queue(),B=t.length;h.effects.save(d,f);d.show();h.effects.createWrapper(d);a[y]=(z?"-=":"+=")+l;p[y]=(z?"+=":"-=")+2*l;x[y]=(z?"-=":"+=")+2*l;d.animate(a,r,b.easing);for(l=
1;l<u;l++)d.animate(p,r,b.easing).animate(x,r,b.easing);d.animate(p,r,b.easing).animate(a,r/2,b.easing).queue(function(){"hide"===c&&d.hide();h.effects.restore(d,f);h.effects.removeWrapper(d);e()});1<B&&t.splice.apply(t,[1,0].concat(t.splice(B,q+1)));d.dequeue()}})(jQuery);
(function(h,f){h.effects.effect.slide=function(b,e){var d=h(this),f="position top bottom left right width height".split(" "),c=h.effects.setMode(d,b.mode||"show"),a="show"===c,l=b.direction||"left",u="up"===l||"down"===l?"top":"left";l="up"===l||"left"===l;var q={};h.effects.save(d,f);d.show();var r=b.distance||d["top"===u?"outerHeight":"outerWidth"](!0);h.effects.createWrapper(d).css({overflow:"hidden"});a&&d.css(u,l?isNaN(r)?"-"+r:-r:r);q[u]=(a?l?"+=":"-=":l?"-=":"+=")+r;d.animate(q,{queue:!1,duration:b.duration,
easing:b.easing,complete:function(){"hide"===c&&d.hide();h.effects.restore(d,f);h.effects.removeWrapper(d);e()}})}})(jQuery);
(function(h,f){h.effects.effect.transfer=function(b,e){var d=h(this),f=h(b.to),c="fixed"===f.css("position"),a=h("body"),l=c?a.scrollTop():0;a=c?a.scrollLeft():0;var u=f.offset();f={top:u.top-l,left:u.left-a,height:f.innerHeight(),width:f.innerWidth()};u=d.offset();var q=h("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:u.top-l,left:u.left-a,height:d.innerHeight(),width:d.innerWidth(),position:c?"fixed":"absolute"}).animate(f,b.duration,b.easing,function(){q.remove();
e()})}})(jQuery);
(function(h,f){h.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,
h.proxy(function(b){this.options.disabled&&b.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(b){b.preventDefault()},"click .ui-state-disabled > a":function(b){b.preventDefault()},"click .ui-menu-item:has(a)":function(b){var e=h(b.target).closest(".ui-menu-item");!this.mouseHandled&&e.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=
!0),e.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&h(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var e=h(b.currentTarget);e.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(b,e)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(b,e){var d=this.active||
this.element.children(".ui-menu-item").eq(0);e||this.focus(b,d)},blur:function(b){this._delay(function(){h.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(b){h(b.target).closest(".ui-menu").length||this.collapseAll(b);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=h(this);b.data("ui-menu-submenu-carat")&&b.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function e(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")}var d=!0;switch(b.keyCode){case h.ui.keyCode.PAGE_UP:this.previousPage(b);break;case h.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case h.ui.keyCode.HOME:this._move("first","first",b);break;case h.ui.keyCode.END:this._move("last","last",b);break;case h.ui.keyCode.UP:this.previous(b);break;case h.ui.keyCode.DOWN:this.next(b);break;case h.ui.keyCode.LEFT:this.collapse(b);break;case h.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case h.ui.keyCode.ENTER:case h.ui.keyCode.SPACE:this._activate(b);
break;case h.ui.keyCode.ESCAPE:this.collapse(b);break;default:d=!1;var f=this.previousFilter||"";var c=String.fromCharCode(b.keyCode);var a=!1;clearTimeout(this.filterTimer);c===f?a=!0:c=f+c;var l=new RegExp("^"+e(c),"i");f=this.activeMenu.children(".ui-menu-item").filter(function(){return l.test(h(this).children("a").text())});f=a&&-1!==f.index(this.active.next())?this.active.nextAll(".ui-menu-item"):f;f.length||(c=String.fromCharCode(b.keyCode),l=new RegExp("^"+e(c),"i"),f=this.activeMenu.children(".ui-menu-item").filter(function(){return l.test(h(this).children("a").text())}));
f.length?(this.focus(b,f),1<f.length?(this.previousFilter=c,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}d&&b.preventDefault()},_activate:function(b){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(b):this.select(b))},refresh:function(){var b=this.options.icons.submenu;var e=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);
e.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var d=h(this),e=d.prev("a"),c=h("<span>").addClass("ui-menu-icon ui-icon "+b).data("ui-menu-submenu-carat",!0);e.attr("aria-haspopup","true").prepend(c);d.attr("aria-labelledby",e.attr("id"))});e=e.add(this.element);e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,
role:this._itemRole()});e.children(":not(.ui-menu-item)").each(function(){var b=h(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")});e.children(".ui-state-disabled").attr("aria-disabled","true");this.active&&!h.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(b,e){"icons"===b&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu);
this._super(b,e)},focus:function(b,e){this.blur(b,b&&"focus"===b.type);this._scrollIntoView(e);this.active=e.first();var d=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",d.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");b&&"keydown"===b.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);d=e.children(".ui-menu");d.length&&b&&/^mouse/.test(b.type)&&
this._startOpening(d);this.activeMenu=e.parent();this._trigger("focus",b,{item:e})},_scrollIntoView:function(b){if(this._hasScroll()){var e=parseFloat(h.css(this.activeMenu[0],"borderTopWidth"))||0;var d=parseFloat(h.css(this.activeMenu[0],"paddingTop"))||0;e=b.offset().top-this.activeMenu.offset().top-e-d;d=this.activeMenu.scrollTop();var f=this.activeMenu.height();b=b.height();0>e?this.activeMenu.scrollTop(d+e):e+b>f&&this.activeMenu.scrollTop(d+e-f+b)}},blur:function(b,e){e||clearTimeout(this.timer);
this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",b,{item:this.active}))},_startOpening:function(b){clearTimeout(this.timer);"true"===b.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(b)},this.delay))},_open:function(b){var e=h.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded",
"true").position(e)},collapseAll:function(b,e){clearTimeout(this.timer);this.timer=this._delay(function(){var d=e?this.element:h(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element);this._close(d);this.blur(b);this.activeMenu=d},this.delay)},_close:function(b){b||(b=this.active?this.active.parent():this.element);b.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(b){var e=
this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(b,e))},expand:function(b){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(b,e)}))},next:function(b){this._move("next","first",b)},previous:function(b){this._move("prev","last",b)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&
!this.active.nextAll(".ui-menu-item").length},_move:function(b,e,d){var f;this.active&&(f="first"===b||"last"===b?this.active["first"===b?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[b+"All"](".ui-menu-item").eq(0));f&&f.length&&this.active||(f=this.activeMenu.children(".ui-menu-item")[e]());this.focus(d,f)},nextPage:function(b){var e;if(!this.active)this.next(b);else if(!this.isLastItem())if(this._hasScroll()){var d=this.active.offset().top;var f=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){e=
h(this);return 0>e.offset().top-d-f});this.focus(b,e)}else this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(b){var e;if(!this.active)this.next(b);else if(!this.isFirstItem())if(this._hasScroll()){var d=this.active.offset().top;var f=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){e=h(this);return 0<e.offset().top-d+f});this.focus(b,e)}else this.focus(b,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(b){this.active=this.active||h(b.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0);this._trigger("select",b,e)}})})(jQuery);
(function(h,f){function b(a,c,b){return[parseFloat(a[0])*(y.test(a[0])?c/100:1),parseFloat(a[1])*(y.test(a[1])?b/100:1)]}function e(a){var c=a[0];return 9===c.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:h.isWindow(c)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}h.ui=h.ui||{};var d,k=Math.max,c=Math.abs,a=
Math.round,l=/left|center|right/,u=/top|center|bottom/,q=/[\+\-]\d+(\.[\d]+)?%?/,r=/^\w+/,y=/%$/,z=h.fn.position;h.position={scrollbarWidth:function(){if(d!==f)return d;var a=h("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");var c=a.children()[0];h("body").append(a);var b=c.offsetWidth;a.css("overflow","scroll");c=c.offsetWidth;b===c&&(c=a[0].clientWidth);a.remove();return d=b-c},getScrollInfo:function(a){var c=
a.isWindow||a.isDocument?"":a.element.css("overflow-x"),b=a.isWindow||a.isDocument?"":a.element.css("overflow-y");c="scroll"===c||"auto"===c&&a.width<a.element[0].scrollWidth;return{width:"scroll"===b||"auto"===b&&a.height<a.element[0].scrollHeight?h.position.scrollbarWidth():0,height:c?h.position.scrollbarWidth():0}},getWithinInfo:function(a){a=h(a||window);var c=h.isWindow(a[0]);return{element:a,isWindow:c,isDocument:!!a[0]&&9===a[0].nodeType,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),
scrollTop:a.scrollTop(),width:c?a.width():a.outerWidth(),height:c?a.height():a.outerHeight()}}};h.fn.position=function(d){if(!d||!d.of)return z.apply(this,arguments);d=h.extend({},d);var f=h(d.of),t=h.position.getWithinInfo(d.within),y=h.position.getScrollInfo(t),p=(d.collision||"flip").split(" "),F={};var H=e(f);f[0].preventDefault&&(d.at="left top");var G=H.width;var E=H.height;var K=H.offset;var g=h.extend({},K);h.each(["my","at"],function(){var a=(d[this]||"").split(" ");1===a.length&&(a=l.test(a[0])?
a.concat(["center"]):u.test(a[0])?["center"].concat(a):["center","center"]);a[0]=l.test(a[0])?a[0]:"center";a[1]=u.test(a[1])?a[1]:"center";var c=q.exec(a[0]);var b=q.exec(a[1]);F[this]=[c?c[0]:0,b?b[0]:0];d[this]=[r.exec(a[0])[0],r.exec(a[1])[0]]});1===p.length&&(p[1]=p[0]);"right"===d.at[0]?g.left+=G:"center"===d.at[0]&&(g.left+=G/2);"bottom"===d.at[1]?g.top+=E:"center"===d.at[1]&&(g.top+=E/2);var m=b(F.at,G,E);g.left+=m[0];g.top+=m[1];return this.each(function(){var e,l=h(this),r=l.outerWidth(),
u=l.outerHeight(),q=parseInt(h.css(this,"marginLeft"),10)||0,z=parseInt(h.css(this,"marginTop"),10)||0,x=r+q+(parseInt(h.css(this,"marginRight"),10)||0)+y.width,B=u+z+(parseInt(h.css(this,"marginBottom"),10)||0)+y.height,C=h.extend({},g),H=b(F.my,l.outerWidth(),l.outerHeight());"right"===d.my[0]?C.left-=r:"center"===d.my[0]&&(C.left-=r/2);"bottom"===d.my[1]?C.top-=u:"center"===d.my[1]&&(C.top-=u/2);C.left+=H[0];C.top+=H[1];h.support.offsetFractions||(C.left=a(C.left),C.top=a(C.top));var R={marginLeft:q,
marginTop:z};h.each(["left","top"],function(a,c){if(h.ui.position[p[a]])h.ui.position[p[a]][c](C,{targetWidth:G,targetHeight:E,elemWidth:r,elemHeight:u,collisionPosition:R,collisionWidth:x,collisionHeight:B,offset:[m[0]+H[0],m[1]+H[1]],my:d.my,at:d.at,within:t,elem:l})});d.using&&(e=function(a){var b=K.left-C.left,g=b+G-r,m=K.top-C.top,e=m+E-u,h={target:{element:f,left:K.left,top:K.top,width:G,height:E},element:{element:l,left:C.left,top:C.top,width:r,height:u},horizontal:0>g?"left":0<b?"right":"center",
vertical:0>e?"top":0<m?"bottom":"middle"};G<r&&c(b+g)<G&&(h.horizontal="center");E<u&&c(m+e)<E&&(h.vertical="middle");k(c(b),c(g))>k(c(m),c(e))?h.important="horizontal":h.important="vertical";d.using.call(this,a,h)});l.offset(h.extend(C,{using:e}))})};h.ui.position={fit:{left:function(a,c){var b=c.within,d=b.isWindow?b.scrollLeft:b.offset.left,e=b.width,f=a.left-c.collisionPosition.marginLeft;b=d-f;var h=f+c.collisionWidth-e-d;c.collisionWidth>e?0<b&&0>=h?(c=a.left+b+c.collisionWidth-e-d,a.left+=
b-c):a.left=0<h&&0>=b?d:b>h?d+e-c.collisionWidth:d:a.left=0<b?a.left+b:0<h?a.left-h:k(a.left-f,a.left)},top:function(a,c){var b=c.within,d=b.isWindow?b.scrollTop:b.offset.top,e=c.within.height,f=a.top-c.collisionPosition.marginTop;b=d-f;var h=f+c.collisionHeight-e-d;c.collisionHeight>e?0<b&&0>=h?(c=a.top+b+c.collisionHeight-e-d,a.top+=b-c):a.top=0<h&&0>=b?d:b>h?d+e-c.collisionHeight:d:a.top=0<b?a.top+b:0<h?a.top-h:k(a.top-f,a.top)}},flip:{left:function(a,b){var d=b.within,e=d.offset.left+d.scrollLeft,
f=d.width,k=d.isWindow?d.scrollLeft:d.offset.left,h=a.left-b.collisionPosition.marginLeft;d=h-k;var l=h+b.collisionWidth-f-k;h="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0;var y="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,r=-2*b.offset[0];if(0>d){if(b=a.left+h+y+r+b.collisionWidth-f-e,0>b||b<c(d))a.left+=h+y+r}else 0<l&&(b=a.left-b.collisionPosition.marginLeft+h+y+r-k,0<b||c(b)<l)&&(a.left+=h+y+r)},top:function(a,b){var d=b.within,e=d.offset.top+d.scrollTop,
f=d.height,k=d.isWindow?d.scrollTop:d.offset.top,h=a.top-b.collisionPosition.marginTop;d=h-k;var l=h+b.collisionHeight-f-k;h="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0;var y="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,r=-2*b.offset[1];0>d?(b=a.top+h+y+r+b.collisionHeight-f-e,a.top+h+y+r>d&&(0>b||b<c(d))&&(a.top+=h+y+r)):0<l&&(b=a.top-b.collisionPosition.marginTop+h+y+r-k,a.top+h+y+r>l&&(0<b||c(b)<l)&&(a.top+=h+y+r))}},flipfit:{left:function(){h.ui.position.flip.left.apply(this,
arguments);h.ui.position.fit.left.apply(this,arguments)},top:function(){h.ui.position.flip.top.apply(this,arguments);h.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,c=document.getElementsByTagName("body")[0];var b=document.createElement("div");var d=document.createElement(c?"div":"body");var e={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};c&&h.extend(e,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in e)d.style[a]=e[a];d.appendChild(b);e=c||
document.documentElement;e.insertBefore(d,e.firstChild);b.style.cssText="position: absolute; left: 10.7432222px;";b=h(b).offset().left;h.support.offsetFractions=10<b&&11>b;d.innerHTML="";e.removeChild(d)})()})(jQuery);
(function(h,f){h.widget("ui.progressbar",{version:"1.10.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min});this.valueDiv=h("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove()},value:function(b){if(b===f)return this.options.value;this.options.value=this._constrainedValue(b);this._refreshValue()},_constrainedValue:function(b){b===f&&(b=this.options.value);this.indeterminate=!1===b;"number"!==typeof b&&(b=0);return this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,b))},_setOptions:function(b){var e=b.value;delete b.value;this._super(b);this.options.value=this._constrainedValue(e);this._refreshValue()},_setOption:function(b,e){"max"===
b&&(e=Math.max(this.min,e));this._super(b,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,e=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).toggleClass("ui-corner-right",b===this.options.max).width(e.toFixed(0)+"%");this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||
(this.overlayDiv=h("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null));this.oldValue!==b&&(this.oldValue=b,this._trigger("change"));b===this.options.max&&this._trigger("complete")}})})(jQuery);
(function(h,f){h.widget("ui.slider",h.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");this._refresh();
this._setOption("disabled",this.options.disabled);this._animateOff=!1},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var b=this.options;var e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),d=[];var f=b.values&&b.values.length||1;e.length>f&&(e.slice(f).remove(),e=e.slice(0,f));for(b=e.length;b<f;b++)d.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=e.add(h(d.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(c){h(this).data("ui-slider-handle-index",c)})},_createRange:function(){var b=this.options,e="";b.range?(!0===b.range&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:h.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",
bottom:""}):(this.range=h("<div></div>").appendTo(this.element),e="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(e+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var b=this.handles.add(this.range).filter("a");this._off(b);this._on(b,this._handleEvents);this._hoverable(b);this._focusable(b)},_destroy:function(){this.handles.remove();this.range&&this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all");
this._mouseDestroy()},_mouseCapture:function(b){var e,d,f=this,c=this.options;if(c.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();var a=this._normValueFromMouse({x:b.pageX,y:b.pageY});var l=this._valueMax()-this._valueMin()+1;this.handles.each(function(b){var k=Math.abs(a-f.values(b));if(l>k||l===k&&(b===f._lastChangedValue||f.values(b)===c.min))l=k,e=h(this),d=b});if(!1===this._start(b,d))return!1;this._mouseSliding=
!0;this._handleIndex=d;e.addClass("ui-state-active").focus();var u=e.offset();this._clickOffset=h(b.target).parents().addBack().is(".ui-slider-handle")?{left:b.pageX-u.left-e.width()/2,top:b.pageY-u.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(b,d,a);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(b){var e=
this._normValueFromMouse({x:b.pageX,y:b.pageY});this._slide(b,this._handleIndex,e);return!1},_mouseStop:function(b){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(b){if("horizontal"===this.orientation){var e=
this.elementSize.width;b=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else e=this.elementSize.height,b=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);e=b/e;1<e&&(e=1);0>e&&(e=0);"vertical"===this.orientation&&(e=1-e);b=this._valueMax()-this._valueMin();e=this._valueMin()+e*b;return this._trimAlignValue(e)},_start:function(b,e){var d={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(e),
d.values=this.values());return this._trigger("start",b,d)},_slide:function(b,e,d){if(this.options.values&&this.options.values.length){var f=this.values(e?0:1);2===this.options.values.length&&!0===this.options.range&&(0===e&&d>f||1===e&&d<f)&&(d=f);d!==this.values(e)&&(f=this.values(),f[e]=d,b=this._trigger("slide",b,{handle:this.handles[e],value:d,values:f}),this.values(e?0:1),!1!==b&&this.values(e,d))}else d!==this.value()&&(b=this._trigger("slide",b,{handle:this.handles[e],value:d}),!1!==b&&this.value(d))},
_stop:function(b,e){var d={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(e),d.values=this.values());this._trigger("stop",b,d)},_change:function(b,e){if(!this._keySliding&&!this._mouseSliding){var d={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(e),d.values=this.values());this._lastChangedValue=e;this._trigger("change",b,d)}},value:function(b){if(arguments.length)this.options.value=
this._trimAlignValue(b),this._refreshValue(),this._change(null,0);else return this._value()},values:function(b,e){var d;if(1<arguments.length)this.options.values[b]=this._trimAlignValue(e),this._refreshValue(),this._change(null,b);else if(arguments.length)if(h.isArray(arguments[0])){var f=this.options.values;var c=arguments[0];for(d=0;d<f.length;d+=1)f[d]=this._trimAlignValue(c[d]),this._change(null,d);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(b):
this.value();else return this._values()},_setOption:function(b,e){var d,f=0;"range"===b&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null));h.isArray(this.options.values)&&(f=this.options.values.length);h.Widget.prototype._setOption.apply(this,arguments);switch(b){case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(d=0;d<f;d+=1)this._change(null,d);this._animateOff=!1;break;case "min":case "max":this._animateOff=!0;this._refreshValue();this._animateOff=!1;break;case "range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b)},
_values:function(b){var e;if(arguments.length){var d=this.options.values[b];return d=this._trimAlignValue(d)}if(this.options.values&&this.options.values.length){d=this.options.values.slice();for(e=0;e<d.length;e+=1)d[e]=this._trimAlignValue(d[e]);return d}return[]},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,d=(b-this._valueMin())%e;b-=d;2*Math.abs(d)>=e&&(b+=0<d?e:-e);return parseFloat(b.toFixed(5))},
_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,e=this.options.range,d=this.options,f=this,c=this._animateOff?!1:d.animate,a={};if(this.options.values&&this.options.values.length)this.handles.each(function(e){r=(f.values(e)-f._valueMin())/(f._valueMax()-f._valueMin())*100;a["horizontal"===f.orientation?"left":"bottom"]=r+"%";h(this).stop(1,1)[c?"animate":"css"](a,d.animate);if(!0===f.options.range)if("horizontal"===f.orientation){if(0===
e)f.range.stop(1,1)[c?"animate":"css"]({left:r+"%"},d.animate);if(1===e)f.range[c?"animate":"css"]({width:r-b+"%"},{queue:!1,duration:d.animate})}else{if(0===e)f.range.stop(1,1)[c?"animate":"css"]({bottom:r+"%"},d.animate);if(1===e)f.range[c?"animate":"css"]({height:r-b+"%"},{queue:!1,duration:d.animate})}b=r});else{var l=this.value();var u=this._valueMin();var q=this._valueMax();var r=q!==u?(l-u)/(q-u)*100:0;a["horizontal"===this.orientation?"left":"bottom"]=r+"%";this.handle.stop(1,1)[c?"animate":
"css"](a,d.animate);if("min"===e&&"horizontal"===this.orientation)this.range.stop(1,1)[c?"animate":"css"]({width:r+"%"},d.animate);if("max"===e&&"horizontal"===this.orientation)this.range[c?"animate":"css"]({width:100-r+"%"},{queue:!1,duration:d.animate});if("min"===e&&"vertical"===this.orientation)this.range.stop(1,1)[c?"animate":"css"]({height:r+"%"},d.animate);if("max"===e&&"vertical"===this.orientation)this.range[c?"animate":"css"]({height:100-r+"%"},{queue:!1,duration:d.animate})}},_handleEvents:{keydown:function(b){var e,
d=h(b.target).data("ui-slider-handle-index");switch(b.keyCode){case h.ui.keyCode.HOME:case h.ui.keyCode.END:case h.ui.keyCode.PAGE_UP:case h.ui.keyCode.PAGE_DOWN:case h.ui.keyCode.UP:case h.ui.keyCode.RIGHT:case h.ui.keyCode.DOWN:case h.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding){this._keySliding=!0;h(b.target).addClass("ui-state-active");var f=this._start(b,d);if(!1===f)return}}var c=this.options.step;f=this.options.values&&this.options.values.length?e=this.values(d):e=this.value();
switch(b.keyCode){case h.ui.keyCode.HOME:e=this._valueMin();break;case h.ui.keyCode.END:e=this._valueMax();break;case h.ui.keyCode.PAGE_UP:e=this._trimAlignValue(f+(this._valueMax()-this._valueMin())/5);break;case h.ui.keyCode.PAGE_DOWN:e=this._trimAlignValue(f-(this._valueMax()-this._valueMin())/5);break;case h.ui.keyCode.UP:case h.ui.keyCode.RIGHT:if(f===this._valueMax())return;e=this._trimAlignValue(f+c);break;case h.ui.keyCode.DOWN:case h.ui.keyCode.LEFT:if(f===this._valueMin())return;e=this._trimAlignValue(f-
c)}this._slide(b,d,e)},click:function(b){b.preventDefault()},keyup:function(b){var e=h(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,e),this._change(b,e),h(b.target).removeClass("ui-state-active"))}}})})(jQuery);
(function(h){function f(b){return function(){var e=this.element.val();b.apply(this,arguments);this._refresh();e!==this.element.val()&&this._trigger("change")}}h.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);
this._setOption("min",this.options.min);this._setOption("step",this.options.step);""!==this.value()&&this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},e=this.element;h.each(["min","max","step"],function(d,f){d=e.attr(f);void 0!==d&&d.length&&(b[f]=d)});return b},_events:{keydown:function(b){this._start(b)&&this._keydown(b)&&b.preventDefault()},
keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(b){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",b))},mousewheel:function(b,e){if(e){if(!this.spinning&&!this._start(b))return!1;this._spin((0<e?1:-1)*this.options.step,b);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(b)},100);b.preventDefault()}},"mousedown .ui-spinner-button":function(b){function e(){this.element[0]!==
this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d}))}var d=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();b.preventDefault();e.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;e.call(this)});!1!==this._start(b)&&this._repeat(null,h(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){if(h(b.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(b))return!1;this._repeat(null,h(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var b=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=b.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(.5*b.height())&&0<b.height()&&
b.height(b.height());this.options.disabled&&this.disable()},_keydown:function(b){var e=this.options,d=h.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,e.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-e.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+
this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(b){if(!this.spinning&&!1===this._trigger("start",b))return!1;this.counter||(this.counter=1);return this.spinning=!0},_repeat:function(b,e,d){b=b||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,e,d)},b);this._spin(e*this.options.step,d)},_spin:function(b,e){var d=this.value()||0;this.counter||
(this.counter=1);d=this._adjustValue(d+b*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",e,{value:d})||(this._value(d),this.counter++)},_increment:function(b){var e=this.options.incremental;return e?h.isFunction(e)?e(b):Math.floor(b*b*b/5E4-b*b/500+17*b/200+1):1},_precision:function(){var b=this._precisionOf(this.options.step);null!==this.options.min&&(b=Math.max(b,this._precisionOf(this.options.min)));return b},_precisionOf:function(b){b=b.toString();var e=b.indexOf(".");
return-1===e?0:b.length-e-1},_adjustValue:function(b){var e=this.options;var d=null!==e.min?e.min:0;b=d+Math.round((b-d)/e.step)*e.step;b=parseFloat(b.toFixed(this._precision()));return null!==e.max&&b>e.max?e.max:null!==e.min&&b<e.min?e.min:b},_stop:function(b){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",b))},_setOption:function(b,e){if("culture"===b||"numberFormat"===b){var d=this._parse(this.element.val());this.options[b]=
e;this.element.val(this._format(d))}else"max"!==b&&"min"!==b&&"step"!==b||"string"!==typeof e||(e=this._parse(e)),"icons"===b&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(b,e),"disabled"===b&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:f(function(b){this._super(b);
this._value(this.element.val())}),_parse:function(b){"string"===typeof b&&""!==b&&(b=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(b,10,this.options.culture):+b);return""===b||isNaN(b)?null:b},_format:function(b){return""===b?"":window.Globalize&&this.options.numberFormat?Globalize.format(b,this.options.numberFormat,this.options.culture):b},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},
_value:function(b,e){if(""!==b){var d=this._parse(b);null!==d&&(e||(d=this._adjustValue(d)),b=this._format(d))}this.element.val(b);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:f(function(b){this._stepUp(b)}),_stepUp:function(b){this._start()&&(this._spin((b||1)*this.options.step),
this._stop())},stepDown:f(function(b){this._stepDown(b)}),_stepDown:function(b){this._start()&&(this._spin((b||1)*-this.options.step),this._stop())},pageUp:f(function(b){this._stepUp((b||1)*this.options.page)}),pageDown:f(function(b){this._stepDown((b||1)*this.options.page)}),value:function(b){if(!arguments.length)return this._parse(this.element.val());f(this._value).call(this,b)},widget:function(){return this.uiSpinner}})})(jQuery);
(function(h,f){function b(b){b=b.cloneNode(!1);return 1<b.hash.length&&decodeURIComponent(b.href.replace(d,""))===decodeURIComponent(location.href.replace(d,""))}var e=0,d=/#.*$/;h.widget("ui.tabs",{version:"1.10.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var b=this,c=this.options;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",
c.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(a){h(this).is(".ui-state-disabled")&&a.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){h(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();c.active=this._initialActive();h.isArray(c.disabled)&&(c.disabled=h.unique(c.disabled.concat(h.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&
this.anchors.length?this._findActive(c.active):h();this._refresh();this.active.length&&this.load(c.active)},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,a=location.hash.substring(1);null===b&&(a&&this.tabs.each(function(c,d){if(h(d).attr("aria-controls")===a)return b=c,!1}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===b||-1===b)&&(b=this.tabs.length?0:!1);!1!==b&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=c?!1:0));!c&&!1===b&&this.anchors.length&&
(b=0);return b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):h()}},_tabKeydown:function(b){var c=h(this.document[0].activeElement).closest("li"),a=this.tabs.index(c),d=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case h.ui.keyCode.RIGHT:case h.ui.keyCode.DOWN:a++;break;case h.ui.keyCode.UP:case h.ui.keyCode.LEFT:d=!1;a--;break;case h.ui.keyCode.END:a=this.anchors.length-1;break;case h.ui.keyCode.HOME:a=0;break;case h.ui.keyCode.SPACE:b.preventDefault();
clearTimeout(this.activating);this._activate(a);return;case h.ui.keyCode.ENTER:b.preventDefault();clearTimeout(this.activating);this._activate(a===this.options.active?!1:a);return;default:return}b.preventDefault();clearTimeout(this.activating);a=this._focusNextTab(a,d);b.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(a).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",a)},this.delay))}},_panelKeydown:function(b){!this._handlePageNav(b)&&b.ctrlKey&&b.keyCode===
h.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(b){if(b.altKey&&b.keyCode===h.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(b.altKey&&b.keyCode===h.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(b,c){function a(){b>d&&(b=0);0>b&&(b=d);return b}for(var d=this.tabs.length-1;-1!==h.inArray(a(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(b,
c){b=this._findNextTab(b,c);this.tabs.eq(b).focus();return b},_setOption:function(b,c){"active"===b?this._activate(c):"disabled"===b?this._setupDisabled(c):(this._super(b,c),"collapsible"===b&&(this.element.toggleClass("ui-tabs-collapsible",c),c||!1!==this.options.active||this._activate(0)),"event"===b&&this._setupEvents(c),"heightStyle"===b&&this._setupHeightStyle(c))},_tabId:function(b){return b.attr("aria-controls")||"ui-tabs-"+ ++e},_sanitizeSelector:function(b){return b?b.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,
"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=h.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)});this._processTabs();!1!==b.active&&this.anchors.length?this.active.length&&!h.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=h()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=h());this._refresh()},
_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true",
"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var d=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return h("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=
h();this.anchors.each(function(c,a){var e=h(a).uniqueId().attr("id"),f=h(a).closest("li"),k=f.attr("aria-controls");if(b(a)){a=a.hash;var r=d.element.find(d._sanitizeSelector(a))}else{var y=d._tabId(f);a="#"+y;r=d.element.find(a);r.length||(r=d._createPanel(y),r.insertAfter(d.panels[c-1]||d.tablist));r.attr("aria-live","polite")}r.length&&(d.panels=d.panels.add(r));k&&f.data("ui-tabs-aria-controls",k);f.attr({"aria-controls":a.substring(1),"aria-labelledby":e});r.attr("aria-labelledby",e)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role",
"tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(b){return h("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){h.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c=0,a;a=this.tabs[c];c++)!0===b||-1!==h.inArray(c,b)?h(a).addClass("ui-state-disabled").attr("aria-disabled","true"):h(a).removeClass("ui-state-disabled").removeAttr("aria-disabled");
this.options.disabled=b},_setupEvents:function(b){var c={click:function(a){a.preventDefault()}};b&&h.each(b.split(" "),function(a,b){c[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,c);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c=this.element.parent();if("fill"===b){var a=c.height();a-=this.element.outerHeight()-
this.element.height();this.element.siblings(":visible").each(function(){var b=h(this),c=b.css("position");"absolute"!==c&&"fixed"!==c&&(a-=b.outerHeight(!0))});this.element.children().not(this.panels).each(function(){a-=h(this).outerHeight(!0)});this.panels.each(function(){h(this).height(Math.max(0,a-h(this).innerHeight()+h(this).height()))}).css("overflow","auto")}else"auto"===b&&(a=0,this.panels.each(function(){a=Math.max(a,h(this).height("").height())}).height(a))},_eventHandler:function(b){var c=
this.options,a=this.active,d=h(b.currentTarget).closest("li"),e=d[0]===a[0],f=e&&c.collapsible,k=f?h():this._getPanelForTab(d),y=a.length?this._getPanelForTab(a):h();a={oldTab:a,oldPanel:y,newTab:f?h():d,newPanel:k};b.preventDefault();d.hasClass("ui-state-disabled")||d.hasClass("ui-tabs-loading")||this.running||e&&!c.collapsible||!1===this._trigger("beforeActivate",b,a)||(c.active=f?!1:this.tabs.index(d),this.active=e?h():d,this.xhr&&this.xhr.abort(),y.length||k.length||h.error("jQuery UI Tabs: Mismatching fragment identifier."),
k.length&&this.load(this.tabs.index(d),b),this._toggle(b,a))},_toggle:function(b,c){function a(){e.running=!1;e._trigger("activate",b,c)}function d(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active");f.length&&e.options.show?e._show(f,e.options.show,a):(f.show(),a())}var e=this,f=c.newPanel,k=c.oldPanel;this.running=!0;k.length&&this.options.hide?this._hide(k,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");d()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
k.hide(),d());k.attr({"aria-expanded":"false","aria-hidden":"true"});c.oldTab.attr("aria-selected","false");f.length&&k.length?c.oldTab.attr("tabIndex",-1):f.length&&this.tabs.filter(function(){return 0===h(this).attr("tabIndex")}).attr("tabIndex",-1);f.attr({"aria-expanded":"true","aria-hidden":"false"});c.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(b){b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),b=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:b,
currentTarget:b,preventDefault:h.noop}))},_findActive:function(b){return!1===b?h():this.tabs.eq(b)},_getIndex:function(b){"string"===typeof b&&(b=this.anchors.index(this.anchors.filter("[href$='"+b+"']")));return b},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();
this.tabs.add(this.panels).each(function(){h.data(this,"ui-tabs-destroy")?h(this).remove():h(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var b=h(this),c=b.data("ui-tabs-aria-controls");
c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var c=this.options.disabled;!1!==c&&(b===f?c=!1:(b=this._getIndex(b),c=h.isArray(c)?h.map(c,function(a){return a!==b?a:null}):h.map(this.tabs,function(a,c){return c!==b?c:null})),this._setupDisabled(c))},disable:function(b){var c=this.options.disabled;if(!0!==c){if(b===f)c=!0;else{b=this._getIndex(b);
if(-1!==h.inArray(b,c))return;c=h.isArray(c)?h.merge([b],c).sort():[b]}this._setupDisabled(c)}},load:function(d,c){d=this._getIndex(d);var a=this,e=this.tabs.eq(d);d=e.find(".ui-tabs-anchor");var f=this._getPanelForTab(e),k={tab:e,panel:f};b(d[0])||(this.xhr=h.ajax(this._ajaxSettings(d,c,k)))&&"canceled"!==this.xhr.statusText&&(e.addClass("ui-tabs-loading"),f.attr("aria-busy","true"),this.xhr.success(function(b){setTimeout(function(){f.html(b);a._trigger("load",c,k)},1)}).complete(function(b,c){setTimeout(function(){"abort"===
c&&a.panels.stop(!1,!0);e.removeClass("ui-tabs-loading");f.removeAttr("aria-busy");b===a.xhr&&delete a.xhr},1)}))},_ajaxSettings:function(b,c,a){var d=this;return{url:b.attr("href"),beforeSend:function(b,e){return d._trigger("beforeLoad",c,h.extend({jqXHR:b,ajaxSettings:e},a))}}},_getPanelForTab:function(b){b=h(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+b))}})})(jQuery);
(function(h){function f(b,e){var c=(b.attr("aria-describedby")||"").split(/\s+/);c.push(e);b.data("ui-tooltip-id",e).attr("aria-describedby",h.trim(c.join(" ")))}function b(b){var d=b.data("ui-tooltip-id"),c=(b.attr("aria-describedby")||"").split(/\s+/);d=h.inArray(d,c);-1!==d&&c.splice(d,1);b.removeData("ui-tooltip-id");(c=h.trim(c.join(" ")))?b.attr("aria-describedby",c):b.removeAttr("aria-describedby")}var e=0;h.widget("ui.tooltip",{version:"1.10.4",options:{content:function(){var b=h(this).attr("title")||
"";return h("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable()},_setOption:function(b,e){var c=this;"disabled"===b?(this[e?"_disable":"_enable"](),this.options[b]=e):(this._super(b,e),"content"===b&&h.each(this.tooltips,function(a,
b){c._updateContent(b)}))},_disable:function(){var b=this;h.each(this.tooltips,function(d,c){d=h.Event("blur");d.target=d.currentTarget=c[0];b.close(d,!0)});this.element.find(this.options.items).addBack().each(function(){var b=h(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=h(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var d=
this,c=h(b?b.target:this.element).closest(this.options.items);c.length&&!c.data("ui-tooltip-id")&&(c.attr("title")&&c.data("ui-tooltip-title",c.attr("title")),c.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&c.parents().each(function(){var a=h(this);if(a.data("ui-tooltip-open")){var b=h.Event("blur");b.target=b.currentTarget=this;d.close(b,!0)}a.attr("title")&&(a.uniqueId(),d.parents[this.id]={element:this,title:a.attr("title")},a.attr("title",""))}),this._updateContent(c,b))},_updateContent:function(b,
e){var c=this.options.content;var a=this,d=e?e.type:null;if("string"===typeof c)return this._open(e,b,c);(c=c.call(b[0],function(c){b.data("ui-tooltip-open")&&a._delay(function(){e&&(e.type=d);this._open(e,b,c)})}))&&this._open(e,b,c)},_open:function(b,e,c){function a(a){d.of=a;k.is(":hidden")||k.position(d)}var d=h.extend({},this.options.position);if(c){var k=this._find(e);if(k.length)k.find(".ui-tooltip-content").html(c);else{e.is("[title]")&&(b&&"mouseover"===b.type?e.attr("title",""):e.removeAttr("title"));
k=this._tooltip(e);f(e,k.attr("id"));k.find(".ui-tooltip-content").html(c);this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:a}),a(b)):k.position(h.extend({of:e},this.options.position));k.hide();this._show(k,this.options.show);if(this.options.show&&this.options.show.delay)var q=this.delayedShow=setInterval(function(){k.is(":visible")&&(a(d.of),clearInterval(q))},h.fx.interval);this._trigger("open",b,{tooltip:k});c={keyup:function(a){a.keyCode===h.ui.keyCode.ESCAPE&&(a=
h.Event(a),a.currentTarget=e[0],this.close(a,!0))},remove:function(){this._removeTooltip(k)}};b&&"mouseover"!==b.type||(c.mouseleave="close");b&&"focusin"!==b.type||(c.focusout="close");this._on(!0,e,c)}}},close:function(d){var e=this,c=h(d?d.currentTarget:this.element),a=this._find(c);this.closing||(clearInterval(this.delayedShow),c.data("ui-tooltip-title")&&c.attr("title",c.data("ui-tooltip-title")),b(c),a.stop(!0),this._hide(a,this.options.hide,function(){e._removeTooltip(h(this))}),c.removeData("ui-tooltip-open"),
this._off(c,"mouseleave focusout keyup"),c[0]!==this.element[0]&&this._off(c,"remove"),this._off(this.document,"mousemove"),d&&"mouseleave"===d.type&&h.each(this.parents,function(a,b){h(b.element).attr("title",b.title);delete e.parents[a]}),this.closing=!0,this._trigger("close",d,{tooltip:a}),this.closing=!1)},_tooltip:function(b){var d="ui-tooltip-"+e++,c=h("<div>").attr({id:d,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));h("<div>").addClass("ui-tooltip-content").appendTo(c);
c.appendTo(this.document[0].body);this.tooltips[d]=b;return c},_find:function(b){return(b=b.data("ui-tooltip-id"))?h("#"+b):h()},_removeTooltip:function(b){b.remove();delete this.tooltips[b.attr("id")]},_destroy:function(){var b=this;h.each(this.tooltips,function(d,c){var a=h.Event("blur");a.target=a.currentTarget=c[0];b.close(a,!0);h("#"+d).remove();c.data("ui-tooltip-title")&&(c.attr("title",c.data("ui-tooltip-title")),c.removeData("ui-tooltip-title"))})}})})(jQuery);/*

 handlebars v4.0.8

Copyright (C) 2011-2016 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
(function(h,f){"object"===typeof exports&&"object"===typeof module?module.exports=f():"function"===typeof define&&define.amd?define([],f):"object"===typeof exports?exports.Handlebars=f():h.Handlebars=f()})(this,function(){return function(h){function f(e){if(b[e])return b[e].exports;var d=b[e]={exports:{},id:e,loaded:!1};h[e].call(d.exports,d,d.exports,f);d.loaded=!0;return d.exports}var b={};f.m=h;f.c=b;f.p="";return f(0)}([function(h,f,b){function e(){var b=r();b.compile=function(a,c){return u.compile(a,
c,b)};b.precompile=function(a,c){return u.precompile(a,c,b)};b.AST=a["default"];b.Compiler=u.Compiler;b.JavaScriptCompiler=q["default"];b.Parser=l.parser;b.parse=l.parse;return b}var d=b(1)["default"];f.__esModule=!0;var k=b(2);k=d(k);var c=b(35),a=d(c),l=b(36),u=b(41);c=b(42);var q=d(c);c=b(39);c=d(c);b=b(34);d=d(b);var r=k["default"].create;k=e();k.create=e;d["default"](k);k.Visitor=c["default"];k["default"]=k;f["default"]=k;h.exports=f["default"]},function(h,f){f["default"]=function(b){return b&&
b.__esModule?b:{"default":b}};f.__esModule=!0},function(h,f,b){function e(){var b=new a.HandlebarsEnvironment;q.extend(b,a);b.SafeString=l["default"];b.Exception=u["default"];b.Utils=q;b.escapeExpression=q.escapeExpression;b.VM=r;b.template=function(a){return r.template(a,b)};return b}var d=b(3)["default"],k=b(1)["default"];f.__esModule=!0;var c=b(4),a=d(c);c=b(21);var l=k(c);c=b(6);var u=k(c);c=b(5);var q=d(c);c=b(22);var r=d(c);b=b(34);k=k(b);b=e();b.create=e;k["default"](b);b["default"]=b;f["default"]=
b;h.exports=f["default"]},function(h,f){f["default"]=function(b){if(b&&b.__esModule)return b;var e={};if(null!=b)for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(e[d]=b[d]);e["default"]=b;return e};f.__esModule=!0},function(h,f,b){function e(b,c,d){this.helpers=b||{};this.partials=c||{};this.decorators=d||{};a.registerDefaultHelpers(this);l.registerDefaultDecorators(this)}h=b(1)["default"];f.__esModule=!0;f.HandlebarsEnvironment=e;var d=b(5),k=b(6),c=h(k),a=b(10),l=b(18);b=b(20);b=h(b);
f.VERSION="4.0.8";f.COMPILER_REVISION=7;f.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.prototype={constructor:e,logger:b["default"],log:b["default"].log,registerHelper:function(a,b){if("[object Object]"===d.toString.call(a)){if(b)throw new c["default"]("Arg not supported with multiple helpers");d.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,
b){if("[object Object]"===d.toString.call(a))d.extend(this.partials,a);else{if("undefined"===typeof b)throw new c["default"]('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if("[object Object]"===d.toString.call(a)){if(b)throw new c["default"]("Arg not supported with multiple decorators");d.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};
f.log=b["default"].log;f.createFrame=d.createFrame;f.logger=b["default"]},function(h,f){function b(a){return d[a]}function e(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}f.__esModule=!0;f.extend=e;f.indexOf=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1};f.escapeExpression=function(a){if("string"!==typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+
"";a=""+a}return c.test(a)?a.replace(k,b):a};f.isEmpty=function(a){return a||0===a?l(a)&&0===a.length?!0:!1:!0};f.createFrame=function(a){var b=e({},a);b._parent=a;return b};f.blockParams=function(a,b){a.path=b;return a};f.appendContextPath=function(a,b){return(a?a+".":"")+b};var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},k=/[&<>"'`=]/g,c=/[&<>"'`=]/,a=Object.prototype.toString;f.toString=a;h=function(a){return"function"===typeof a};h(/x/)&&(f.isFunction=
h=function(b){return"function"===typeof b&&"[object Function]"===a.call(b)});f.isFunction=h;var l=Array.isArray||function(b){return b&&"object"===typeof b?"[object Array]"===a.call(b):!1};f.isArray=l},function(h,f,b){function e(b,a){a=a&&a.loc;var c=void 0,f=void 0;a&&(c=a.start.line,f=a.start.column,b+=" - "+c+":"+f);b=Error.prototype.constructor.call(this,b);for(var h=0;h<k.length;h++)this[k[h]]=b[k[h]];Error.captureStackTrace&&Error.captureStackTrace(this,e);try{a&&(this.lineNumber=c,d?Object.defineProperty(this,
"column",{value:f,enumerable:!0}):this.column=f)}catch(r){}}var d=b(7)["default"];f.__esModule=!0;var k="description fileName lineNumber message name number stack".split(" ");e.prototype=Error();f["default"]=e;h.exports=f["default"]},function(h,f,b){h.exports={"default":b(8),__esModule:!0}},function(h,f,b){var e=b(9);h.exports=function(b,f,c){return e.setDesc(b,f,c)}},function(h,f){f=Object;h.exports={create:f.create,getProto:f.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:f.getOwnPropertyDescriptor,
setDesc:f.defineProperty,setDescs:f.defineProperties,getKeys:f.keys,getNames:f.getOwnPropertyNames,getSymbols:f.getOwnPropertySymbols,each:[].forEach}},function(h,f,b){h=b(1)["default"];f.__esModule=!0;f.registerDefaultHelpers=function(b){e["default"](b);d["default"](b);k["default"](b);c["default"](b);a["default"](b);l["default"](b);u["default"](b)};f=b(11);var e=h(f);f=b(12);var d=h(f);f=b(13);var k=h(f);f=b(14);var c=h(f);f=b(15);var a=h(f);f=b(16);var l=h(f);b=b(17);var u=h(b)},function(h,f,b){f.__esModule=
!0;var e=b(5);f["default"]=function(b){b.registerHelper("blockHelperMissing",function(d,c){var a=c.inverse,f=c.fn;if(!0===d)return f(this);if(!1===d||null==d)return a(this);if(e.isArray(d))return 0<d.length?(c.ids&&(c.ids=[c.name]),b.helpers.each(d,c)):a(this);c.data&&c.ids&&(a=e.createFrame(c.data),a.contextPath=e.appendContextPath(c.data.contextPath,c.name),c={data:a});return f(d,c)})};h.exports=f["default"]},function(h,f,b){var e=b(1)["default"];f.__esModule=!0;var d=b(5);b=b(6);var k=e(b);f["default"]=
function(b){b.registerHelper("each",function(a,b){function c(b,c,f){p&&(p.key=b,p.index=c,p.first=0===c,p.last=!!f,x&&(p.contextPath=x+b));l+=e(a[b],{data:p,blockParams:d.blockParams([a[b],b],[x+b,null])})}if(!b)throw new k["default"]("Must pass iterator to #each");var e=b.fn,f=b.inverse,h=0,l="",p=void 0,x=void 0;b.data&&b.ids&&(x=d.appendContextPath(b.data.contextPath,b.ids[0])+".");d.isFunction(a)&&(a=a.call(this));b.data&&(p=d.createFrame(b.data));if(a&&"object"===typeof a)if(d.isArray(a))for(var t=
a.length;h<t;h++)h in a&&c(h,h,h===a.length-1);else{b=void 0;for(t in a)a.hasOwnProperty(t)&&(void 0!==b&&c(b,h-1),b=t,h++);void 0!==b&&c(b,h-1,!0)}0===h&&(l=f(this));return l})};h.exports=f["default"]},function(h,f,b){var e=b(1)["default"];f.__esModule=!0;b=b(6);var d=e(b);f["default"]=function(b){b.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new d["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"');})};h.exports=f["default"]},function(h,f,b){f.__esModule=
!0;var e=b(5);f["default"]=function(b){b.registerHelper("if",function(b,c){e.isFunction(b)&&(b=b.call(this));return!c.hash.includeZero&&!b||e.isEmpty(b)?c.inverse(this):c.fn(this)});b.registerHelper("unless",function(d,c){return b.helpers["if"].call(this,d,{fn:c.inverse,inverse:c.fn,hash:c.hash})})};h.exports=f["default"]},function(h,f){f.__esModule=!0;f["default"]=function(b){b.registerHelper("log",function(){for(var e=[void 0],d=arguments[arguments.length-1],f=0;f<arguments.length-1;f++)e.push(arguments[f]);
f=1;null!=d.hash.level?f=d.hash.level:d.data&&null!=d.data.level&&(f=d.data.level);e[0]=f;b.log.apply(b,e)})};h.exports=f["default"]},function(h,f){f.__esModule=!0;f["default"]=function(b){b.registerHelper("lookup",function(b,d){return b&&b[d]})};h.exports=f["default"]},function(h,f,b){f.__esModule=!0;var e=b(5);f["default"]=function(b){b.registerHelper("with",function(b,c){e.isFunction(b)&&(b=b.call(this));var a=c.fn;if(e.isEmpty(b))return c.inverse(this);var d=c.data;c.data&&c.ids&&(d=e.createFrame(c.data),
d.contextPath=e.appendContextPath(c.data.contextPath,c.ids[0]));return a(b,{data:d,blockParams:e.blockParams([b],[d&&d.contextPath])})})};h.exports=f["default"]},function(h,f,b){h=b(1)["default"];f.__esModule=!0;f.registerDefaultDecorators=function(b){e["default"](b)};f=b(19);var e=h(f)},function(h,f,b){f.__esModule=!0;var e=b(5);f["default"]=function(b){b.registerDecorator("inline",function(b,c,a,d){var f=b;c.partials||(c.partials={},f=function(d,f){var h=a.partials;a.partials=e.extend({},h,c.partials);
d=b(d,f);a.partials=h;return d});c.partials[d.args[0]]=d.fn;return f})};h.exports=f["default"]},function(h,f,b){f.__esModule=!0;var e=b(5),d={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(b){if("string"===typeof b){var c=e.indexOf(d.methodMap,b.toLowerCase());b=0<=c?c:parseInt(b,10)}return b},log:function(b){b=d.lookupLevel(b);if("undefined"!==typeof console&&d.lookupLevel(d.level)<=b){var c=d.methodMap[b];console[c]||(c="log");for(var a=arguments.length,e=Array(1<a?
a-1:0),f=1;f<a;f++)e[f-1]=arguments[f];console[c].apply(console,e)}}};f["default"]=d;h.exports=f["default"]},function(h,f){function b(b){this.string=b}f.__esModule=!0;b.prototype.toString=b.prototype.toHTML=function(){return""+this.string};f["default"]=b;h.exports=f["default"]},function(h,f,b){function e(a,b,d,e,f,h,k){function l(b){var c=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],f=k;!k||b==k[0]||b===a.nullContext&&null===k[0]||(f=[b].concat(k));return d(a,b,a.helpers,a.partials,
c.data||e,h&&[c.blockParams].concat(h),f)}l=c(d,l,a,k,e,h);l.program=b;l.depth=k?k.length:0;l.blockParams=f||0;return l}function d(){return""}function k(a,b){b&&"root"in b||(b=b?r.createFrame(b):{},b.root=a);return b}function c(a,b,c,d,e,f){if(a.decorator){var h={};b=a.decorator(b,h,c,d&&d[0],e,f,d);u.extend(b,h)}return b}var a=b(23)["default"],l=b(3)["default"];h=b(1)["default"];f.__esModule=!0;f.checkRevision=function(a){var b=a&&a[0]||1,c=r.COMPILER_REVISION;if(b!==c){if(b<c)throw new q["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+
r.REVISION_CHANGES[c]+") or downgrade your runtime to an older version ("+r.REVISION_CHANGES[b]+").");throw new q["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").");}};f.template=function(b,d){function f(a){function d(a){return""+b.main(h,a,h.helpers,h.partials,l,t,r)}var e=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],l=e.data;f._setup(e);!e.partial&&b.useData&&(l=k(a,l));var r=
void 0,t=b.useBlockParams?[]:void 0;b.useDepths&&(r=e.depths?a!=e.depths[0]?[a].concat(e.depths):e.depths:[a]);d=c(b.main,d,h,e.depths||[],l,t);return d(a,e)}if(!d)throw new q["default"]("No environment passed to template");if(!b||!b.main)throw new q["default"]("Unknown template object: "+typeof b);b.main.decorator=b.main_d;d.VM.checkRevision(b.compiler);var h={strict:function(a,b){if(!(b in a))throw new q["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,
d=0;d<c;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"===typeof a?a.call(b):a},escapeExpression:u.escapeExpression,invokePartial:function(a,c,e){e.hash&&(c=u.extend({},c,e.hash),e.ids&&(e.ids[0]=!0));a=d.VM.resolvePartial.call(this,a,c,e);var f=d.VM.invokePartial.call(this,a,c,e);null==f&&d.compile&&(e.partials[e.name]=d.compile(a,b.compilerOptions,d),f=e.partials[e.name](c,e));if(null!=f){if(e.indent){a=f.split("\n");c=0;for(f=a.length;c<f&&(a[c]||c+1!==f);c++)a[c]=
e.indent+a[c];f=a.join("\n")}return f}throw new q["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode");},fn:function(a){var c=b[a];c.decorator=b[a+"_d"];return c},programs:[],program:function(a,b,c,d,f){var h=this.programs[a],k=this.fn(a);b||f||d||c?h=e(this,a,k,b,c,d,f):h||(h=this.programs[a]=e(this,a,k));return h},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;a&&b&&a!==b&&(c=u.extend({},b,a));return c},nullContext:a({}),
noop:d.VM.noop,compilerInfo:b.compiler};f.isTop=!0;f._setup=function(a){if(a.partial)h.helpers=a.helpers,h.partials=a.partials,h.decorators=a.decorators;else if(h.helpers=h.merge(a.helpers,d.helpers),b.usePartial&&(h.partials=h.merge(a.partials,d.partials)),b.usePartial||b.useDecorators)h.decorators=h.merge(a.decorators,d.decorators)};f._child=function(a,c,d,f){if(b.useBlockParams&&!d)throw new q["default"]("must pass block params");if(b.useDepths&&!f)throw new q["default"]("must pass parent depths");
return e(h,a,b[a],c,0,d,f)};return f};f.wrapProgram=e;f.resolvePartial=function(a,b,c){a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name];return a};f.invokePartial=function(a,b,c){var e=c.data&&c.data["partial-block"];c.partial=!0;c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var f=void 0;c.fn&&c.fn!==d&&function(){c.data=r.createFrame(c.data);var a=c.fn;f=c.data["partial-block"]=function(b){var c=1>=arguments.length||void 0===
arguments[1]?{}:arguments[1];c.data=r.createFrame(c.data);c.data["partial-block"]=e;return a(b,c)};a.partials&&(c.partials=u.extend({},c.partials,a.partials))}();void 0===a&&f&&(a=f);if(void 0===a)throw new q["default"]("The partial "+c.name+" could not be found");if(a instanceof Function)return a(b,c)};f.noop=d;f=b(5);var u=l(f);f=b(6);var q=h(f),r=b(4)},function(h,f,b){h.exports={"default":b(24),__esModule:!0}},function(h,f,b){b(25);h.exports=b(30).Object.seal},function(h,f,b){var e=b(26);b(27)("seal",
function(b){return function(d){return b&&e(d)?b(d):d}})},function(h,f){h.exports=function(b){return"object"===typeof b?null!==b:"function"===typeof b}},function(h,f,b){var e=b(28),d=b(30),k=b(33);h.exports=function(b,a){var c=(d.Object||{})[b]||Object[b],f={};f[b]=a(c);e(e.S+e.F*k(function(){c(1)}),"Object",f)}},function(h,f,b){var e=b(29),d=b(30),k=b(31),c=function(a,b,f){var h=a&c.F,l=a&c.G,y=a&c.S,u=a&c.P,p=a&c.B;a&=c.W;var x=l?d:d[b]||(d[b]={});y=l?e:y?e[b]:(e[b]||{}).prototype;var t;l&&(f=b);
for(t in f)if(b=!h&&y&&t in y,!(b&&t in x)){var B=b?y[t]:f[t];x[t]=l&&"function"!=typeof y[t]?f[t]:p&&b?k(B,e):a&&y[t]==B?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};b.prototype=a.prototype;return b}(B):u&&"function"==typeof B?k(Function.call,B):B;u&&((x.prototype||(x.prototype={}))[t]=B)}};c.F=1;c.G=2;c.S=4;c.P=8;c.B=16;c.W=32;h.exports=c},function(h,f){h=h.exports="undefined"!=typeof window&&Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();
"number"==typeof __g&&(__g=h)},function(h,f){h=h.exports={version:"1.2.6"};"number"==typeof __e&&(__e=h)},function(h,f,b){var e=b(32);h.exports=function(b,f,c){e(b);if(void 0===f)return b;switch(c){case 1:return function(a){return b.call(f,a)};case 2:return function(a,c){return b.call(f,a,c)};case 3:return function(a,c,d){return b.call(f,a,c,d)}}return function(){return b.apply(f,arguments)}}},function(h,f){h.exports=function(b){if("function"!=typeof b)throw TypeError(b+" is not a function!");return b}},
function(h,f){h.exports=function(b){try{return!!b()}catch(e){return!0}}},function(h,f){(function(b){f.__esModule=!0;f["default"]=function(e){var d="undefined"!==typeof b?b:window,f=d.Handlebars;e.noConflict=function(){d.Handlebars===e&&(d.Handlebars=f);return e}};h.exports=f["default"]}).call(f,function(){return this}())},function(h,f){f.__esModule=!0;var b={helpers:{helperExpression:function(b){return"SubExpression"===b.type||("MustacheStatement"===b.type||"BlockStatement"===b.type)&&!!(b.params&&
b.params.length||b.hash)},scopedId:function(b){return/^\.|this\b/.test(b.original)},simpleId:function(e){return 1===e.parts.length&&!b.helpers.scopedId(e)&&!e.depth}}};f["default"]=b;h.exports=f["default"]},function(h,f,b){var e=b(1)["default"];h=b(3)["default"];f.__esModule=!0;f.parse=function(b,d){if("Program"===b.type)return b;k["default"].yy=a;a.locInfo=function(b){return new a.SourceLocation(d&&d.srcName,b)};return(new c["default"](d)).accept(k["default"].parse(b))};var d=b(37),k=e(d);d=b(38);
var c=e(d);e=b(40);h=h(e);b=b(5);f.parser=k["default"];var a={};b.extend(a,h)},function(h,f){f.__esModule=!0;var b=function(){function b(){this.yy={}}var d={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,
openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,
mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,
path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",
77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,
1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(b,a,d,e,f,h,k){b=h.length-1;switch(f){case 1:return h[b-1];case 2:this.$=e.prepareProgram(h[b]);break;case 3:this.$=h[b];break;case 4:this.$=h[b];break;case 5:this.$=
h[b];break;case 6:this.$=h[b];break;case 7:this.$=h[b];break;case 8:this.$=h[b];break;case 9:this.$={type:"CommentStatement",value:e.stripComment(h[b]),strip:e.stripFlags(h[b],h[b]),loc:e.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:h[b],value:h[b],loc:e.locInfo(this._$)};break;case 11:this.$=e.prepareRawBlock(h[b-2],h[b-1],h[b],this._$);break;case 12:this.$={path:h[b-3],params:h[b-2],hash:h[b-1]};break;case 13:this.$=e.prepareBlock(h[b-3],h[b-2],h[b-1],h[b],!1,this._$);
break;case 14:this.$=e.prepareBlock(h[b-3],h[b-2],h[b-1],h[b],!0,this._$);break;case 15:this.$={open:h[b-5],path:h[b-4],params:h[b-3],hash:h[b-2],blockParams:h[b-1],strip:e.stripFlags(h[b-5],h[b])};break;case 16:this.$={path:h[b-4],params:h[b-3],hash:h[b-2],blockParams:h[b-1],strip:e.stripFlags(h[b-5],h[b])};break;case 17:this.$={path:h[b-4],params:h[b-3],hash:h[b-2],blockParams:h[b-1],strip:e.stripFlags(h[b-5],h[b])};break;case 18:this.$={strip:e.stripFlags(h[b-1],h[b-1]),program:h[b]};break;case 19:f=
e.prepareBlock(h[b-2],h[b-1],h[b],h[b],!1,this._$);e=e.prepareProgram([f],h[b-1].loc);e.chained=!0;this.$={strip:h[b-2].strip,program:e,chain:!0};break;case 20:this.$=h[b];break;case 21:this.$={path:h[b-1],strip:e.stripFlags(h[b-2],h[b])};break;case 22:this.$=e.prepareMustache(h[b-3],h[b-2],h[b-1],h[b-4],e.stripFlags(h[b-4],h[b]),this._$);break;case 23:this.$=e.prepareMustache(h[b-3],h[b-2],h[b-1],h[b-4],e.stripFlags(h[b-4],h[b]),this._$);break;case 24:this.$={type:"PartialStatement",name:h[b-3],
params:h[b-2],hash:h[b-1],indent:"",strip:e.stripFlags(h[b-4],h[b]),loc:e.locInfo(this._$)};break;case 25:this.$=e.preparePartialBlock(h[b-2],h[b-1],h[b],this._$);break;case 26:this.$={path:h[b-3],params:h[b-2],hash:h[b-1],strip:e.stripFlags(h[b-4],h[b])};break;case 27:this.$=h[b];break;case 28:this.$=h[b];break;case 29:this.$={type:"SubExpression",path:h[b-3],params:h[b-2],hash:h[b-1],loc:e.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:h[b],loc:e.locInfo(this._$)};break;case 31:this.$=
{type:"HashPair",key:e.id(h[b-2]),value:h[b],loc:e.locInfo(this._$)};break;case 32:this.$=e.id(h[b-1]);break;case 33:this.$=h[b];break;case 34:this.$=h[b];break;case 35:this.$={type:"StringLiteral",value:h[b],original:h[b],loc:e.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(h[b]),original:Number(h[b]),loc:e.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===h[b],original:"true"===h[b],loc:e.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",
original:void 0,value:void 0,loc:e.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:e.locInfo(this._$)};break;case 40:this.$=h[b];break;case 41:this.$=h[b];break;case 42:this.$=e.preparePath(!0,h[b],this._$);break;case 43:this.$=e.preparePath(!1,h[b],this._$);break;case 44:h[b-2].push({part:e.id(h[b]),original:h[b],separator:h[b-1]});this.$=h[b-2];break;case 45:this.$=[{part:e.id(h[b]),original:h[b]}];break;case 46:this.$=[];break;case 47:h[b-1].push(h[b]);break;
case 48:this.$=[h[b]];break;case 49:h[b-1].push(h[b]);break;case 50:this.$=[];break;case 51:h[b-1].push(h[b]);break;case 58:this.$=[];break;case 59:h[b-1].push(h[b]);break;case 64:this.$=[];break;case 65:h[b-1].push(h[b]);break;case 70:this.$=[];break;case 71:h[b-1].push(h[b]);break;case 78:this.$=[];break;case 79:h[b-1].push(h[b]);break;case 82:this.$=[];break;case 83:h[b-1].push(h[b]);break;case 86:this.$=[];break;case 87:h[b-1].push(h[b]);break;case 90:this.$=[];break;case 91:h[b-1].push(h[b]);
break;case 94:this.$=[];break;case 95:h[b-1].push(h[b]);break;case 98:this.$=[h[b]];break;case 99:h[b-1].push(h[b]);break;case 100:this.$=[h[b]];break;case 101:h[b-1].push(h[b])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},
{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,
6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,
28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],
82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,
35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],
80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,
38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,
45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],
83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,
90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,
34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],
47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],
82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,
32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,
28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,
83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,
14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,
75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},
{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,
34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],
29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,
15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,
93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(b,a){throw Error(b);},parse:function(b){var a=[0],c=[null],d=[],e=this.table,f="",h=0,k=0,p=0;this.lexer.setInput(b);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});b=this.lexer.yylloc;d.push(b);var x=this.lexer.options&&this.lexer.options.ranges;"function"===typeof this.yy.parseError&&(this.parseError=this.yy.parseError);
for(var t,B,C,F,H={},G,E;;){C=a[a.length-1];if(this.defaultActions[C])F=this.defaultActions[C];else{if(null===t||"undefined"==typeof t)t=this.lexer.lex()||1,"number"!==typeof t&&(t=this.symbols_[t]||t);F=e[C]&&e[C][t]}if(!("undefined"!==typeof F&&F.length&&F[0]||p)){E=[];for(G in e[C])this.terminals_[G]&&2<G&&E.push("'"+this.terminals_[G]+"'");var K=this.lexer.showPosition?"Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[t]||t)+"'":
"Parse error on line "+(h+1)+": Unexpected "+(1==t?"end of input":"'"+(this.terminals_[t]||t)+"'");this.parseError(K,{text:this.lexer.match,token:this.terminals_[t]||t,line:this.lexer.yylineno,loc:b,expected:E})}if(F[0]instanceof Array&&1<F.length)throw Error("Parse Error: multiple actions possible at state: "+C+", token: "+t);switch(F[0]){case 1:a.push(t);c.push(this.lexer.yytext);d.push(this.lexer.yylloc);a.push(F[1]);t=null;B?(t=B,B=null):(k=this.lexer.yyleng,f=this.lexer.yytext,h=this.lexer.yylineno,
b=this.lexer.yylloc,0<p&&p--);break;case 2:E=this.productions_[F[1]][1];H.$=c[c.length-E];H._$={first_line:d[d.length-(E||1)].first_line,last_line:d[d.length-1].last_line,first_column:d[d.length-(E||1)].first_column,last_column:d[d.length-1].last_column};x&&(H._$.range=[d[d.length-(E||1)].range[0],d[d.length-1].range[1]]);C=this.performAction.call(H,f,k,h,this.yy,F[1],c,d);if("undefined"!==typeof C)return C;E&&(a=a.slice(0,-2*E),c=c.slice(0,-1*E),d=d.slice(0,-1*E));a.push(this.productions_[F[1]][0]);
c.push(H.$);d.push(H._$);F=e[a[a.length-2]][a[a.length-1]];a.push(F);break;case 3:return!0}}}},f=function(){return{EOF:1,parseError:function(b,a){if(this.yy.parser)this.yy.parser.parseError(b,a);else throw Error(b);},setInput:function(b){this._input=b;this._more=this._less=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);
this.offset=0;return this},input:function(){var b=this._input[0];this.yytext+=b;this.yyleng++;this.offset++;this.match+=b;this.matched+=b;b.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return b},unput:function(b){var a=b.length,c=b.split(/(?:\r\n?|\n)/g);this._input=b+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-a-1);this.offset-=a;b=this.match.split(/(?:\r\n?|\n)/g);
this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);c.length-1&&(this.yylineno-=c.length-1);var d=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===b.length?this.yylloc.first_column:0)+b[b.length-c.length].length-c[0].length:this.yylloc.first_column-a};this.options.ranges&&(this.yylloc.range=[d[0],d[0]+this.yyleng-a]);return this},more:function(){this._more=
!0;return this},less:function(b){this.unput(this.match.slice(b))},pastInput:function(){var b=this.matched.substr(0,this.matched.length-this.match.length);return(20<b.length?"...":"")+b.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var b=this.match;20>b.length&&(b+=this._input.substr(0,20-b.length));return(b.substr(0,20)+(20<b.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var b=this.pastInput(),a=Array(b.length+1).join("-");return b+this.upcomingInput()+"\n"+a+"^"},next:function(){if(this.done)return this.EOF;
this._input||(this.done=!0);var b;this._more||(this.match=this.yytext="");for(var a=this._currentRules(),d=0;d<a.length;d++)if((b=this._input.match(this.rules[a[d]]))&&(!e||b[0].length>e[0].length)){var e=b;var f=d;if(!this.options.flex)break}if(e){if(b=e[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=b.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:b?b[b.length-1].length-b[b.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+
e[0].length};this.yytext+=e[0];this.match+=e[0];this.matches=e;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=!1;this._input=this._input.slice(e[0].length);this.matched+=e[0];e=this.performAction.call(this,this.yy,this,a[f],this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(e)return e}else return""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+
this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var b=this.next();return"undefined"!==typeof b?b:this.lex()},begin:function(b){this.conditionStack.push(b)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(b){this.begin(b)},options:{},performAction:function(b,a,d,e){function c(b,
c){return a.yytext=a.yytext.substr(b,a.yyleng-c)}switch(d){case 0:"\\\\"===a.yytext.slice(-2)?(c(0,1),this.begin("mu")):"\\"===a.yytext.slice(-1)?(c(0,1),this.begin("emu")):this.begin("mu");if(a.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:this.popState();if("raw"===this.conditionStack[this.conditionStack.length-1])return 15;a.yytext=a.yytext.substr(5,a.yyleng-9);return"END_RAW_BLOCK";case 5:return 15;case 6:return this.popState(),
14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(a.yytext);this.popState();this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;
case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return a.yytext=c(1,2).replace(/\\"/g,'"'),80;case 32:return a.yytext=c(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return a.yytext=a.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,
/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,
/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,
29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}}}();d.lexer=f;b.prototype=d;d.Parser=b;return new b}();f["default"]=b;h.exports=f["default"]},function(h,f,b){function e(){this.options=0>=arguments.length||void 0===arguments[0]?{}:arguments[0]}function d(a,b,c){void 0===b&&(b=a.length);var d=a[b-1];a=a[b-2];if(!d)return c;if("ContentStatement"===d.type)return(a||
!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original)}function k(a,b,c){void 0===b&&(b=-1);var d=a[b+1];a=a[b+2];if(!d)return c;if("ContentStatement"===d.type)return(a||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original)}function c(a,b,c){!(a=a[null==b?0:b+1])||"ContentStatement"!==a.type||!c&&a.rightStripped||(b=a.value,a.value=a.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),a.rightStripped=a.value!==b)}function a(a,b,c){if((a=a[null==b?a.length-1:b-1])&&"ContentStatement"===a.type&&(c||!a.leftStripped))return b=
a.value,a.value=a.value.replace(c?/\s+$/:/[ \t]+$/,""),a.leftStripped=a.value!==b,a.leftStripped}var l=b(1)["default"];f.__esModule=!0;b=b(39);l=l(b);e.prototype=new l["default"];e.prototype.Program=function(b){var e=!this.options.ignoreStandalone,f=!this.isRootSeen;this.isRootSeen=!0;for(var h=b.body,l=0,p=h.length;l<p;l++){var u=h[l],t=this.accept(u);if(t){var B=d(h,l,f),C=k(h,l,f),F=t.openStandalone&&B,H=t.closeStandalone&&C;B=t.inlineStandalone&&B&&C;t.close&&c(h,l,!0);t.open&&a(h,l,!0);e&&B&&
(c(h,l),a(h,l)&&"PartialStatement"===u.type&&(u.indent=/([ \t]+$)/.exec(h[l-1].original)[1]));e&&F&&(c((u.program||u.inverse).body),a(h,l));e&&H&&(c(h,l),a((u.inverse||u.program).body))}}return b};e.prototype.BlockStatement=e.prototype.DecoratorBlock=e.prototype.PartialBlockStatement=function(b){this.accept(b.program);this.accept(b.inverse);var e=b.program||b.inverse,f=b.program&&b.inverse,h=f,l=f;if(f&&f.chained)for(h=f.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var p={open:b.openStrip.open,
close:b.closeStrip.close,openStandalone:k(e.body),closeStandalone:d((h||e).body)};b.openStrip.close&&c(e.body,null,!0);f?(f=b.inverseStrip,f.open&&a(e.body,null,!0),f.close&&c(h.body,null,!0),b.closeStrip.open&&a(l.body,null,!0),!this.options.ignoreStandalone&&d(e.body)&&k(h.body)&&(a(e.body),c(h.body))):b.closeStrip.open&&a(e.body,null,!0);return p};e.prototype.Decorator=e.prototype.MustacheStatement=function(a){return a.strip};e.prototype.PartialStatement=e.prototype.CommentStatement=function(a){a=
a.strip||{};return{inlineStandalone:!0,open:a.open,close:a.close}};f["default"]=e;h.exports=f["default"]},function(h,f,b){function e(){this.parents=[]}function d(a){this.acceptRequired(a,"path");this.acceptArray(a.params);this.acceptKey(a,"hash")}function k(a){d.call(this,a);this.acceptKey(a,"program");this.acceptKey(a,"inverse")}function c(a){this.acceptRequired(a,"name");this.acceptArray(a.params);this.acceptKey(a,"hash")}var a=b(1)["default"];f.__esModule=!0;b=b(6);var l=a(b);e.prototype={constructor:e,
mutating:!1,acceptKey:function(a,b){var c=this.accept(a[b]);if(this.mutating){if(c&&!e.prototype[c.type])throw new l["default"]('Unexpected node type "'+c.type+'" found when accepting '+b+" on "+a.type);a[b]=c}},acceptRequired:function(a,b){this.acceptKey(a,b);if(!a[b])throw new l["default"](a.type+" requires "+b);},acceptArray:function(a){for(var b=0,c=a.length;b<c;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){if(!this[a.type])throw new l["default"]("Unknown type: "+
a.type,a);this.current&&this.parents.unshift(this.current);this.current=a;var b=this[a.type](a);this.current=this.parents.shift();if(!this.mutating||b)return b;if(!1!==b)return a}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:d,Decorator:d,BlockStatement:k,DecoratorBlock:k,PartialStatement:c,PartialBlockStatement:function(a){c.call(this,a);this.acceptKey(a,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:d,PathExpression:function(){},StringLiteral:function(){},
NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}};f["default"]=e;h.exports=f["default"]},function(h,f,b){function e(b,c){c=c.path?c.path.original:c;if(b.path.original!==c)throw new d["default"](b.path.original+" doesn't match "+c,{loc:b.path.loc});}h=b(1)["default"];f.__esModule=!0;f.SourceLocation=function(b,c){this.source=b;this.start={line:c.first_line,
column:c.first_column};this.end={line:c.last_line,column:c.last_column}};f.id=function(b){return/^\[.*\]$/.test(b)?b.substr(1,b.length-2):b};f.stripFlags=function(b,c){return{open:"~"===b.charAt(2),close:"~"===c.charAt(c.length-3)}};f.stripComment=function(b){return b.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")};f.preparePath=function(b,c,a){a=this.locInfo(a);for(var e=b?"@":"",f=[],h=0,k=0,y=c.length;k<y;k++){var z=c[k].part,p=c[k].original!==z;e+=(c[k].separator||"")+z;if(p||".."!==z&&
"."!==z&&"this"!==z)f.push(z);else{if(0<f.length)throw new d["default"]("Invalid path: "+e,{loc:a});".."===z&&h++}}return{type:"PathExpression",data:b,depth:h,parts:f,original:e,loc:a}};f.prepareMustache=function(b,c,a,d,e,f){var h=d.charAt(3)||d.charAt(2);h="{"!==h&&"&"!==h;return{type:/\*/.test(d)?"Decorator":"MustacheStatement",path:b,params:c,hash:a,escaped:h,strip:e,loc:this.locInfo(f)}};f.prepareRawBlock=function(b,c,a,d){e(b,a);d=this.locInfo(d);return{type:"BlockStatement",path:b.path,params:b.params,
hash:b.hash,program:{type:"Program",body:c,strip:{},loc:d},openStrip:{},inverseStrip:{},closeStrip:{},loc:d}};f.prepareBlock=function(b,c,a,f,h,q){f&&f.path&&e(b,f);var k=/\*/.test(b.open);c.blockParams=b.blockParams;var l=void 0,z=void 0;if(a){if(k)throw new d["default"]("Unexpected inverse block on decorator",a);a.chain&&(a.program.body[0].closeStrip=f.strip);z=a.strip;l=a.program}h&&(h=l,l=c,c=h);return{type:k?"DecoratorBlock":"BlockStatement",path:b.path,params:b.params,hash:b.hash,program:c,
inverse:l,openStrip:b.strip,inverseStrip:z,closeStrip:f&&f.strip,loc:this.locInfo(q)}};f.prepareProgram=function(b,c){if(!c&&b.length){var a=b[0].loc,d=b[b.length-1].loc;a&&d&&(c={source:a.source,start:{line:a.start.line,column:a.start.column},end:{line:d.end.line,column:d.end.column}})}return{type:"Program",body:b,strip:{},loc:c}};f.preparePartialBlock=function(b,c,a,d){e(b,a);return{type:"PartialBlockStatement",name:b.path,params:b.params,hash:b.hash,program:c,openStrip:b.strip,closeStrip:a&&a.strip,
loc:this.locInfo(d)}};f=b(6);var d=h(f)},function(h,f,b){function e(){}function d(b,c){if(b===c)return!0;if(a.isArray(b)&&a.isArray(c)&&b.length===c.length){for(var e=0;e<b.length;e++)if(!d(b[e],c[e]))return!1;return!0}}function k(a){if(!a.path.parts){var b=a.path;a.path={type:"PathExpression",data:!1,depth:0,parts:[b.original+""],original:b.original+"",loc:b.loc}}}h=b(1)["default"];f.__esModule=!0;f.Compiler=e;f.precompile=function(a,b,d){if(null==a||"string"!==typeof a&&"Program"!==a.type)throw new c["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+
a);b=b||{};"data"in b||(b.data=!0);b.compat&&(b.useDepths=!0);a=d.parse(a,b);a=(new d.Compiler).compile(a,b);return(new d.JavaScriptCompiler).compile(a,b)};f.compile=function(a,b,d){function e(){var c=d.parse(a,b);c=(new d.Compiler).compile(c,b);c=(new d.JavaScriptCompiler).compile(c,b,void 0,!0);return d.template(c)}function f(a,b){h||(h=e());return h.call(this,a,b)}void 0===b&&(b={});if(null==a||"string"!==typeof a&&"Program"!==a.type)throw new c["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+
a);"data"in b||(b.data=!0);b.compat&&(b.useDepths=!0);var h=void 0;f._setup=function(a){h||(h=e());return h._setup(a)};f._child=function(a,b,c,d){h||(h=e());return h._child(a,b,c,d)};return f};f=b(6);var c=h(f),a=b(5);b=b(35);var l=h(b),u=[].slice;e.prototype={compiler:e,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var e=this.opcodes[c],f=a.opcodes[c];if(e.opcode!==f.opcode||!d(e.args,f.args))return!1}b=this.children.length;for(c=0;c<b;c++)if(!this.children[c].equals(a.children[c]))return!1;
return!0},guid:0,compile:function(a,b){this.sourceNode=[];this.opcodes=[];this.children=[];this.options=b;this.stringParams=b.stringParams;this.trackIds=b.trackIds;b.blockParams=b.blockParams||[];var c=b.knownHelpers;b.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0};if(c)for(var d in c)d in c&&(b.knownHelpers[d]=c[d]);return this.accept(a)},compileProgram:function(a){a=(new this.compiler).compile(a,this.options);var b=this.guid++;this.usePartial=
this.usePartial||a.usePartial;this.children[b]=a;this.useDepths=this.useDepths||a.useDepths;return b},accept:function(a){if(!this[a.type])throw new c["default"]("Unknown type: "+a.type,a);this.sourceNode.unshift(a);a=this[a.type](a);this.sourceNode.shift();return a},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;d<c;d++)this.accept(b[d]);this.options.blockParams.shift();this.isSimple=1===c;this.blockParams=a.blockParams?a.blockParams.length:0;return this},
BlockStatement:function(a){k(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b);c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},
DecoratorBlock:function(a){var b=a.program&&this.compileProgram(a.program);b=this.setupFullMustacheParams(a,b,void 0);a=a.path;this.useDecorators=!0;this.opcode("registerDecorator",b.length,a.original)},PartialStatement:function(a){this.usePartial=!0;var b=a.program;b&&(b=this.compileProgram(a.program));var d=a.params;if(1<d.length)throw new c["default"]("Unsupported number of partial arguments: "+d.length,a);d.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):d.push({type:"PathExpression",
parts:[],depth:0}));d=a.name.original;var e="SubExpression"===a.name.type;e&&this.accept(a.name);this.setupFullMustacheParams(a,b,void 0,!0);a=a.indent||"";this.options.preventIndent&&a&&(this.opcode("appendContent",a),a="");this.opcode("invokePartial",e,d,a);this.opcode("append")},PartialBlockStatement:function(a){this.PartialStatement(a)},MustacheStatement:function(a){this.SubExpression(a);a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(a){this.DecoratorBlock(a)},
ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){k(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){a=a.path;var d=a.parts[0],e=null!=b||null!=c;this.opcode("getContext",a.depth);this.opcode("pushProgram",b);this.opcode("pushProgram",c);a.strict=!0;this.accept(a);this.opcode("invokeAmbiguous",d,e)},simpleSexpr:function(a){a=
a.path;a.strict=!0;this.accept(a);this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,d){b=this.setupFullMustacheParams(a,b,d);d=a.path;var e=d.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",b.length,e);else{if(this.options.knownHelpersOnly)throw new c["default"]("You specified knownHelpersOnly, but used the unknown helper "+e,a);d.strict=!0;d.falsy=!0;this.accept(d);this.opcode("invokeHelper",b.length,d.original,l["default"].helpers.simpleId(d))}},PathExpression:function(a){this.addDepth(a.depth);
this.opcode("getContext",a.depth);var b=a.parts[0],c=l["default"].helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts,a.strict)):this.opcode("lookupOnContext",a.parts,a.falsy,a.strict,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",
a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){a=a.pairs;var b=0,c=a.length;for(this.opcode("pushHash");b<c;b++)this.pushParam(a[b].value);for(;b--;)this.opcode("assignToHash",a[b].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:u.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=l["default"].helpers.simpleId(a.path),
c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&l["default"].helpers.helperExpression(a);(b=!c&&(d||b))&&!d&&(c=this.options,c.knownHelpers[a.path.parts[0]]?d=!0:c.knownHelpersOnly&&(b=!1));return d?"helper":b?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;b<c;b++)this.pushParam(a[b])},pushParam:function(a){var b=null!=a.value?a.value:a.original||"";if(this.stringParams)b.replace&&(b=b.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",
a.depth||0),this.opcode("pushStringParam",b,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var c=void 0;!a.parts||l["default"].helpers.scopedId(a)||a.depth||(c=this.blockParamIndex(a.parts[0]));c?(b=a.parts.slice(1).join("."),this.opcode("pushId","BlockParam",c,b)):(b=a.original||b,b.replace&&(b=b.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",a.type,b))}this.accept(a)}},setupFullMustacheParams:function(a,b,c,d){var e=a.params;this.pushParams(e);
this.opcode("pushProgram",b);this.opcode("pushProgram",c);a.hash?this.accept(a.hash):this.opcode("emptyHash",d);return e},blockParamIndex:function(b){for(var c=0,d=this.options.blockParams.length;c<d;c++){var e=this.options.blockParams[c],f=e&&a.indexOf(e,b);if(e&&0<=f)return[c,f]}}}},function(h,f,b){function e(a){this.value=a}function d(){}function k(a,b,c,d){var e=b.popStack(),f=0,h=c.length;for(a&&h--;f<h;f++)e=b.nameLookup(e,c[f],d);return a?[b.aliasable("container.strict"),"(",e,", ",b.quotedString(c[f]),
")"]:e}var c=b(1)["default"];f.__esModule=!0;var a=b(4),l=b(6),u=c(l),q=b(5);b=b(43);var r=c(b);d.prototype={nameLookup:function(a,b){return d.isValidJavaScriptVariableName(b)?[a,".",b]:[a,"[",JSON.stringify(b),"]"]},depthedLookup:function(a){return[this.aliasable("container.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var b=a.COMPILER_REVISION;return[b,a.REVISION_CHANGES[b]]},appendToBuffer:function(a,b,c){q.isArray(a)||(a=[a]);a=this.source.wrap(a,b);if(this.environment.isSimple)return["return ",
a,";"];if(c)return["buffer += ",a,";"];a.appendToBuffer=!0;return a},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a;this.options=b;this.stringParams=this.options.stringParams;this.trackIds=this.options.trackIds;this.precompile=!d;this.name=this.environment.name;this.isChild=!!c;this.context=c||{decorators:[],programs:[],environments:[]};this.preamble();this.stackSlot=0;this.stackVars=[];this.aliases={};this.registers={list:[]};this.hashes=[];
this.compileStack=[];this.inlineStack=[];this.blockParams=[];this.compileChildren(a,b);this.useDepths=this.useDepths||a.useDepths||a.useDecorators||this.options.compat;this.useBlockParams=this.useBlockParams||a.useBlockParams;var e=a.opcodes,f=void 0;a=0;for(c=e.length;a<c;a++){var h=e[a];this.source.currentLocation=h.loc;f=f||h.loc;this[h.opcode].apply(this,h.args)}this.source.currentLocation=f;this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new u["default"]("Compile completed with content left on stack");
this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),d?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));a=this.createFunctionContext(d);
if(this.isChild)return a;e={compiler:this.compilerInfo(),main:a};this.decorators&&(e.main_d=this.decorators,e.useDecorators=!0);a=this.context;h=a.programs;f=a.decorators;a=0;for(c=h.length;a<c;a++)h[a]&&(e[a]=h[a],f[a]&&(e[a+"_d"]=f[a],e.useDecorators=!0));this.environment.usePartial&&(e.usePartial=!0);this.options.data&&(e.useData=!0);this.useDepths&&(e.useDepths=!0);this.useBlockParams&&(e.useBlockParams=!0);this.options.compat&&(e.compat=!0);d?e.compilerOptions=this.options:(e.compiler=JSON.stringify(e.compiler),
this.source.currentLocation={start:{line:1,column:0}},e=this.objectLiteral(e),b.srcName?(e=e.toStringWithSourceMap({file:b.destName}),e.map=e.map&&e.map.toString()):e=e.toString());return e},preamble:function(){this.lastContext=0;this.source=new r["default"](this.options.srcName);this.decorators=new r["default"](this.options.srcName)},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);0<c.length&&(b+=", "+c.join(", "));c=0;for(var d in this.aliases){var e=this.aliases[d];
this.aliases.hasOwnProperty(d)&&e.children&&1<e.referenceCount&&(b+=", alias"+ ++c+"="+d,e.children[0]="alias"+c)}d=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&d.push("blockParams");this.useDepths&&d.push("depths");b=this.mergeSource(b);return a?(d.push(b),Function.apply(this,d)):this.source.wrap(["function(",d.join(","),") {\n  ",b,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,e=void 0,f=void 0,h=void 0;this.source.each(function(a){a.appendToBuffer?
(f?a.prepend("  + "):f=a,h=a):(f&&(e?f.prepend("buffer += "):d=!0,h.add(";"),f=h=void 0),e=!0,b||(c=!1))});c?f?(f.prepend("return "),h.add(";")):e||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),f?(f.prepend("return buffer + "),h.add(";")):this.source.push("return buffer;"));a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n"));return this.source.merge()},blockValue:function(a){var b=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,
0,c);a=this.popStack();c.splice(1,0,a);this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0);this.flushInline();var c=this.topStack();b.splice(1,0,c);this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation;
this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]);this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),
")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c,d){var e=0;d||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[e++]));this.resolvePath("context",a,e,b,c)},lookupBlockParam:function(a,b){this.useBlockParams=!0;this.push(["blockParams[",a[0],"][",a[1],"]"]);this.resolvePath("context",b,1)},lookupData:function(a,b,c){a?this.pushStackLiteral("container.data(data, "+
a+")"):this.pushStackLiteral("data");this.resolvePath("data",b,0,!0,c)},resolvePath:function(a,b,c,d,e){var f=this;if(this.options.strict||this.options.assumeObjects)this.push(k(this.options.strict&&e,this,b,a));else for(e=b.length;c<e;c++)this.replaceStack(function(e){var h=f.nameLookup(e,b[c],a);return d?[" && ",h]:[" != null ? ",h," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,
b){this.pushContext();this.pushString(b);"SubExpression"!==b&&("string"===typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}");this.stringParams&&(this.push("{}"),this.push("{}"));this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash);this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop();this.trackIds&&this.push(this.objectLiteral(a.ids));
this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types)));this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},registerDecorator:function(a,b){var c=this.nameLookup("decorators",b,"decorator");a=this.setupHelperArgs(b,a);this.decorators.push(["fn = ",
this.decorators.functionCall(c,"",["fn","props","container",a])," || fn;"])},invokeHelper:function(a,b,c){var d=this.popStack();a=this.setupHelper(a,b);c=["("].concat(c?[a.name," || "]:"",d);this.options.strict||c.push(" || ",this.aliasable("helpers.helperMissing"));c.push(")");this.push(this.source.functionCall(c,"call",a.callParams))},invokeKnownHelper:function(a,b){a=this.setupHelper(a,b);this.push(this.source.functionCall(a.name,"call",a.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");
var c=this.popStack();this.emptyHash();b=this.setupHelper(0,a,b);a=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",a,"helper")," || ",c,")"];this.options.strict||(a[0]="(helper = ",a.push(" != null ? helper : ",this.aliasable("helpers.helperMissing")));this.push(["(",a,b.paramsInit?["),(",b.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",b.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],e=this.setupParams(b,
1,d);a&&(b=this.popStack(),delete e.name);c&&(e.indent=JSON.stringify(c));e.helpers="helpers";e.partials="partials";e.decorators="container.decorators";a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial"));this.options.compat&&(e.depths="depths");e=this.objectLiteral(e);d.push(e);this.push(this.source.functionCall("container.invokePartial","",d))},assignToHash:function(a){var b=this.popStack(),c=void 0,d=void 0,e=void 0;this.trackIds&&(e=this.popStack());this.stringParams&&(d=this.popStack(),
c=this.popStack());var f=this.hash;c&&(f.contexts[a]=c);d&&(f.types[a]=d);e&&(f.ids[a]=e);f.values[a]=b},pushId:function(a,b,c){"BlockParam"===a?this.pushStackLiteral("blockParams["+b[0]+"].path["+b[1]+"]"+(c?" + "+JSON.stringify("."+c):"")):"PathExpression"===a?this.pushString(b):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:d,compileChildren:function(a,b){a=a.children;for(var c,d,e=0,f=a.length;e<f;e++){c=a[e];d=new this.compiler;var h=this.matchExistingProgram(c);
null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context,!this.precompile),this.context.decorators[h]=d.decorators,this.context.environments[h]=c,this.useDepths=this.useDepths||d.useDepths,this.useBlockParams=this.useBlockParams||d.useBlockParams,c.useDepths=this.useDepths,c.useBlockParams=this.useBlockParams):(c.index=h.index,c.name="program"+h.index,this.useDepths=this.useDepths||h.useDepths,this.useBlockParams=
this.useBlockParams||h.useBlockParams)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return d}},programExpression:function(a){a=this.environment.children[a];a=[a.index,"data",a.blockParams];(this.useBlockParams||this.useDepths)&&a.push("blockParams");this.useDepths&&a.push("depths");return"container.program("+a.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},
push:function(a){a instanceof e||(a=this.source.wrap(a));this.inlineStack.push(a);return a},pushStackLiteral:function(a){this.push(new e(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0);a&&this.source.push(a)},replaceStack:function(a){var b=void 0,c=void 0;if(!this.isInline())throw new u["default"]("replaceStack on non-inline");var d=this.popStack(!0);if(d instanceof
e){var f=[d.value];d=["(",f];c=!0}else b=!0,f=this.incrStack(),d=["((",this.push(f)," = ",d,")"],f=this.topStack();a=a.call(this,f);c||this.popStack();b&&this.stackSlot--;this.push(d.concat(a,")"))},incrStack:function(){this.stackSlot++;this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var b=0,c=a.length;b<c;b++){var d=
a[b];if(d instanceof e)this.compileStack.push(d);else{var f=this.incrStack();this.pushSource([f," = ",d,";"]);this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof e)return c.value;if(!b){if(!this.stackSlot)throw new u["default"]("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack;a=a[a.length-
1];return a instanceof e?a.value:a},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];if(b)return b.referenceCount++,b;b=this.aliases[a]=this.source.wrap(a);b.aliasable=!0;b.referenceCount=1;return b},setupHelper:function(a,b,c){var d=[];a=this.setupHelperArgs(b,a,d,c);b=this.nameLookup("helpers",b,"helper");
c=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:d,paramsInit:a,name:b,callParams:[c].concat(d)}},setupParams:function(a,b,c){var d={},e=[],f=[],h=[],k=!c;k&&(c=[]);d.name=this.quotedString(a);d.hash=this.popStack();this.trackIds&&(d.hashIds=this.popStack());this.stringParams&&(d.hashTypes=this.popStack(),d.hashContexts=this.popStack());a=this.popStack();var l=this.popStack();if(l||a)d.fn=l||"container.noop",d.inverse=a||"container.noop";
for(a=b;a--;)b=this.popStack(),c[a]=b,this.trackIds&&(h[a]=this.popStack()),this.stringParams&&(f[a]=this.popStack(),e[a]=this.popStack());k&&(d.args=this.source.generateArray(c));this.trackIds&&(d.ids=this.source.generateArray(h));this.stringParams&&(d.types=this.source.generateArray(f),d.contexts=this.source.generateArray(e));this.options.data&&(d.data="data");this.useBlockParams&&(d.blockParams="blockParams");return d},setupHelperArgs:function(a,b,c,d){a=this.setupParams(a,b,c);a=this.objectLiteral(a);
return d?(this.useRegister("options"),c.push("options"),["options=",a]):c?(c.push(a),""):a}};(function(){for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),
b=d.RESERVED_WORDS={},c=0,e=a.length;c<e;c++)b[a[c]]=!0})();d.isValidJavaScriptVariableName=function(a){return!d.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)};f["default"]=d;h.exports=f["default"]},function(h,f,b){function e(a,b,c){if(k.isArray(a)){for(var d=[],e=0,f=a.length;e<f;e++)d.push(b.wrap(a[e],c));return d}return"boolean"===typeof a||"number"===typeof a?a+"":a}function d(a){this.srcFile=a;this.source=[]}f.__esModule=!0;var k=b(5),c=void 0;c||(c=function(a,b,c,d){this.src="";d&&
this.add(d)},c.prototype={add:function(a){k.isArray(a)&&(a=a.join(""));this.src+=a},prepend:function(a){k.isArray(a)&&(a=a.join(""));this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}});d.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,b){this.source.unshift(this.wrap(a,b))},push:function(a,b){this.source.push(this.wrap(a,b))},merge:function(){var a=this.empty();this.each(function(b){a.add(["  ",b,"\n"])});
return a},each:function(a){for(var b=0,c=this.source.length;b<c;b++)a(this.source[b])},empty:function(){var a=this.currentLocation||{start:{}};return new c(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var b=1>=arguments.length||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];if(a instanceof c)return a;a=e(a,this,b);return new c(b.start.line,b.start.column,this.srcFile,a)},functionCall:function(a,b,c){c=this.generateList(c);return this.wrap([a,b?"."+b+"(":"(",c,")"])},
quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var d=e(a[c],this);"undefined"!==d&&b.push([this.quotedString(c),":",d])}a=this.generateList(b);a.prepend("{");a.add("}");return a},generateList:function(a){for(var b=this.empty(),c=0,d=a.length;c<d;c++)c&&b.add(","),b.add(e(a[c],this));return b},
generateArray:function(a){a=this.generateList(a);a.prepend("[");a.add("]");return a}};f["default"]=d;h.exports=f["default"]}])});/*
 SlickQuiz jQuery Plugin
 http://github.com/jewlofthelotus/SlickQuiz

 @updated August 9, 2014
 @version 1.5.164

 @author Julie Cameron - http://www.juliecameron.com
 @copyright (c) 2013 Quicken Loans - http://www.quickenloans.com
 @license MIT
*/
(function(h){h.slickQuiz=function(f,b){var e=this,d=h(f),k="#"+d.attr("id");f={checkAnswerText:"Check My Answer!",nextQuestionText:"Next &raquo;",backButtonText:"&laquo; Back",tryAgainText:"",questionCountText:"Question %current of %total",preventUnansweredText:"You must select at least one answer.",questionTemplateText:"%count. %text",scoreTemplateText:"%score / %total",nameTemplateText:"<span>Quiz: </span>%name",skipStartButton:!0,numberOfQuestions:null,randomSortQuestions:!1,randomSortAnswers:!0,
preventUnanswered:!1,disableScore:!1,disableRanking:!0,quizTime:0,displayDetailResult:!0,questionMode:"deferredfeedback",perQuestionResponseMessaging:void 0!=b.questionMode&&"deferredfeedback"!=b.questionMode?!0:!1,perQuestionResponseAnswers:void 0!=b.questionMode&&"deferredfeedback"!=b.questionMode?!0:!1,completionResponseMessaging:void 0!=b.questionMode&&"deferredfeedback"!=b.questionMode?!1:b.displayDetailResult,displayQuestionCount:!1,displayQuestionNumber:!0,submitQuestionText:"Submit",questionPerPage:50,
resultDisplayDetailed:!0,animationCallbacks:{setupQuiz:function(){},startQuiz:function(){},resetQuiz:function(){},checkAnswer:function(){},nextQuestion:function(){},backToQuestion:function(){},completeQuiz:function(){}},events:{onStartQuiz:function(a){},onCompleteQuiz:function(a){}}};var c="nextQuestion",a="."+c,l=k+" .startQuiz",u=k+" .quizName",q=k+" .quizArea",r=k+" .quizResults",y=k+" .quizResultsCopy",z=k+" .quizHeader",p=k+" .quizScore",x=k+" .quizLevel",t=h(l),B=h(u),C=h(q),F=h(r),H=h(y),G=
h(z);h(p);var E=h(x),K=0,g=0;u="";b&&"undefined"!=typeof b.disableNext&&("undefined"==typeof b.preventUnanswered&&(b.preventUnanswered=b.disableNext),u+="The 'disableNext' option has been deprecated, please use 'preventUnanswered' in it's place.\n\n");b&&"undefined"!=typeof b.disableResponseMessaging&&("undefined"==typeof b.preventUnanswered&&(b.perQuestionResponseMessaging=b.disableResponseMessaging),u+="The 'disableResponseMessaging' option has been deprecated, please use 'perQuestionResponseMessaging' and 'completionResponseMessaging' in it's place.\n\n");
b&&"undefined"!=typeof b.randomSort&&("undefined"==typeof b.randomSortQuestions&&(b.randomSortQuestions=b.randomSort),"undefined"==typeof b.randomSortAnswers&&(b.randomSortAnswers=b.randomSort),u+="The 'randomSort' option has been deprecated, please use 'randomSortQuestions' and 'randomSortAnswers' in it's place.\n\n");""!==u&&("undefined"!=typeof console?console.warn(u):alert(u));e.config=h.extend(f,b);var m=h.parseJSON(e.config.json?e.config.json:"undefined"!=typeof quizJSON?quizJSON:null),A=e.config.randomSortQuestions?
m.questions.sort(function(){return Math.round(Math.random())-.5}):m.questions,M=A.length;e.config.numberOfQuestions&&M>=e.config.numberOfQuestions&&(A=A.slice(0,e.config.numberOfQuestions),M=A.length);var L={getKey:function(a){var b=[];for(i=0;i<a;i++)b[i]=h.Deferred();return b},turnKeyAndGo:function(a,b){h.when.apply(null,a).then(function(){b()})},getKeyNotch:function(a,b){return function(){a[b-1].resolve()}}};e.method={setupQuiz:function(a){console.log("quiz data setup quiz");var b=L.getKey(3);
var d=L.getKeyNotch;e.config.quizTime&&0<e.config.quizTime?h("#timeText").html('Time remaining <span id="qztime">'+e.config.quizTime+"</span>"):h("#timeText").html('Elapsed time <span id="qztime">00:00:00</span>');B.hide().html(e.config.nameTemplateText.replace("%name",m.info.name)).fadeIn(1E3,d(b,1));G.hide().prepend(h('<div class="quizDescription">'+m.info.main+"</div>")).fadeIn(1E3,d(b,2));e.config.tryAgainText&&""!==e.config.tryAgainText&&H.append('<p><a class="button tryAgain" href="#">'+e.config.tryAgainText+
"</a></p>");var g=h('<ol class="questions"></ol>'),f=1;for(i in A)if(A.hasOwnProperty(i)){var k=A[i],l=h('<li data-id="'+k.qid+'" class="question" id="question'+(f-1)+'"></li>');e.config.displayQuestionCount&&l.append('<div class="questionCount">'+e.config.questionCountText.replace("%current",'<span class="current">'+f+"</span>").replace("%total",'<span class="total">'+M+"</span>")+"</div>");var p="";p=e.config.displayQuestionNumber?e.config.questionTemplateText.replace("%count",f).replace("%text",
k.q):k.q;l.append('<div class="quesname"> <span class= "unflagged" title="flag this question for future reference"></span><span class="questext">'+p+"</span></div>");var r=0;for(i in k.a)k.a.hasOwnProperty(i)&&(answer=k.a[i],answer.correct&&r++);p=h('<ul class="answers"></ul>');var u=e.config.randomSortAnswers?k.a.sort(function(){return Math.round(Math.random())-.5}):k.a,q=k.select_any?k.select_any:!1,x=k.force_checkbox?k.force_checkbox:!1,z="question"+(f-1);r=1<r&&!q||x?"checkbox":"radio";f==m.questions.length&&
(c+=" lastQuestion");for(i in u)u.hasOwnProperty(i)&&(answer=u[i],optionId=z+"_"+i.toString(),q='<input id="'+optionId+'" class="ansck" name="'+z+'" type="'+r+'" /> ',x='<label for="'+optionId+'">'+answer.option+"</label>",q=h("<li></li>").append(q).append(x),p.append(q));l.append(p);if(e.config.perQuestionResponseMessaging||e.config.completionResponseMessaging)p=h('<ul class="responses"></ul>'),p.append('<li class="correct">'+k.correct+"</li>"),p.append('<li class="incorrect">'+k.incorrect+"</li>"),
l.append(p);e.config.backButtonText&&""!==e.config.backButtonText&&l.append('<a href="#" class="button backToQuestion">'+e.config.backButtonText+"</a>");e.config.perQuestionResponseMessaging&&(l.append('<a href="#" class="button '+c+'">'+e.config.nextQuestionText+"</a>"),l.append('<a href="#" class="button checkAnswer">'+e.config.checkAnswerText+"</a>"));1>e.config.questionPerPage&&(e.config.questionPerPage=m.questions.length);f==m.questions.length?l.append('<a href="#" class="button '+c+' checkAnswer">'+
e.config.submitQuestionText+"</a>"):(f==e.config.questionPerPage||0==f%e.config.questionPerPage)&&l.append('<a href="#" class="button '+c+'" style = "display: list-item">'+e.config.nextQuestionText+"</a>");f<=e.config.questionPerPage?(l.show(),k=h(' <a href="#question'+(f-1)+'" class="qnbutton notyetanswered free thispage" title="Not yet answered" id="navquestion'+(f-1)+'">'+f+"</a>")):k=h(' <a href="#question'+(f-1)+'" class="qnbutton notyetanswered free" title="Not yet answered" id="navquestion'+
(f-1)+'">'+f+"</a>");h("div#exam_navblock .content .qn_buttons").append(k);g.append(l);f++}C.append(g);e.config.skipStartButton||0==t.length?(t.hide(),e.method.startQuiz.apply(this,[{callback:e.config.animationCallbacks.startQuiz}]),d(b,3).apply(null,[])):t.fadeIn(500,d(b,3));L.turnKeyAndGo(b,a&&a.callback?a.callback:function(){})},startQuiz:function(a){function b(a){var b=h(k+" .questions li").first();b.length&&b.fadeIn(500,function(){a&&a.callback&&a.callback()})}var c=L.getKey(1);var d=L.getKeyNotch;
e.config.skipStartButton||0==t.length?b({callback:d(c,1)}):t.fadeOut(300,function(){b({callback:d(c,1)})});L.turnKeyAndGo(c,a&&a.callback?a.callback:function(){});e.config.events&&e.config.events.onStartQuiz&&e.config.events.onStartQuiz.apply(null,[]);a=e.config.ptm;var g=(new Date).getTime();if(!virtualclass.vutil.isPlayMode())var m=(g-a)/1E3;e.config.quizTime&&0<e.config.quizTime?(timeLeft=virtualclass.quiz.calculateRemainingTime(e.config.quizTime),a=document.querySelector("#qztime"),e.method.startTimer(timeLeft,
a,"desc","vmQuiz")):(m=m?m:0,a=document.querySelector("#qztime"),e.method.startTimer(m,a,"asc","vmQuiz"))},resetQuiz:function(b,c){var d=L.getKey(1);var g=L.getKeyNotch;F.fadeOut(300,function(){h(k+" input").prop("checked",!1).prop("disabled",!1);E.attr("class","quizLevel");h(k+" .question").removeClass("correctResponse").removeClass("incorrectResponse");h(k+" .answers li").removeClass("correct").removeClass("incorrect");h(k+" .question,"+k+" .responses,"+k+" .responses li,"+k+" "+a+","+k+" .backToQuestion").hide();
h(k+" .questionCount,"+k+" .answers,"+k+" .checkAnswer").show();C.append(h(k+" .questions")).show();g(d,1).apply(null,[]);e.method.startQuiz({callback:e.config.animationCallbacks.startQuiz},F)});L.turnKeyAndGo(d,c&&c.callback?c.callback:function(){})},checkAnswer:function(a,b){var c=L.getKey(2);var d=L.getKeyNotch;var g=h(h(a).parents(".question")[0]),m=g.find(".answers li"),f=m.find("input:checked"),l=parseInt(g.attr("id").replace(/(question)/,""),10),t=parseInt(g.attr("data-id")),p=A[l].a;l=A[l].select_any?
A[l].select_any:!1;m.addClass("incorrect");var r=[];for(i in p)if(p.hasOwnProperty(i)){var u=p[i],q=parseInt(i,10);u.correct?(r.push(q),"interactive"==e.config.questionMode&&m.eq(q).removeClass("incorrect").addClass("correct")):(-1<h.inArray(q,r)&&r.pop(q),m.eq(q).removeClass("wrong"))}var x=[];f.each(function(){var a=h(this).attr("id");x.push(parseInt(a.replace(/(question\d{1,}_)/,""),10))});if(e.config.preventUnanswered&&0===x.length)return alert(e.config.preventUnansweredText),!1;f=e.method.compareAnswers(r,
x,l);h("a#nav"+g.attr("id")+".qnbutton").removeClass("notyetanswered").removeAttr("title");f?(g.addClass("correctResponse"),"deferredfeedback"!=e.config.questionMode&&m.eq(x[0]).removeClass("incorrect").addClass("correct"),h("a#nav"+g.attr("id")+".qnbutton").removeClass("incorrect").addClass("correct"),e.method.sendQzdata(t,!0)):(g.removeClass("correctResponse"),"deferredfeedback"!=e.config.questionMode&&m.eq(x[0]).addClass("wrong"),h("a#nav"+g.attr("id")+".qnbutton").removeClass("correct").addClass("incorrect"),
0<h(k+" .answers").find("input:checked").length&&e.method.sendQzdata(t,!1));g.find(".responses li").hide();g.find(f?".correct":".incorrect").show();e.config.perQuestionResponseMessaging?("adaptive"!=e.config.questionMode&&(h(a).hide(),g.find(".answers li input[type=radio]").attr("disabled",!0)),e.config.perQuestionResponseAnswers||g.find(".answers").hide(),g.find(".responses").show(),g.find(".backToQuestion").length||d(c,2).apply(null,[])):(d(c,1).apply(null,[]),d(c,2).apply(null,[]));L.turnKeyAndGo(c,
b&&b.callback?b.callback:function(){})},nextQuestion:function(a,b){var c=L.getKey(1);var d=L.getKeyNotch;var g=h(h(a).parents(".question")[0]);a=g.next(".question");var f=g.find("input:checked");if(e.config.preventUnanswered&&0===f.length)return!1;h("a#navquestion0.qnbutton").removeClass("thispage");h("a#navquestion0.qnbutton").nextAll(".qnbutton").removeClass("thispage");a.length?g.fadeOut(300,function(){g.prevAll(".question").hide();if(g.nextAll(".question").length>e.config.questionPerPage){var a=
parseInt(g.prevAll(".question").length)+parseInt(e.config.questionPerPage)+1;g.nextUntil("li#question"+a+".question").show();h("li#question"+(a-1)+".question").find(".backToQuestion").show().end().fadeIn(500,d(c,1));h("a#nav"+g[0].id+".qnbutton").nextUntil("a#navquestion"+a+".qnbutton").addClass("thispage")}else g.nextAll(".question").show(),h("li#question"+(m.questions.length-1)+".question").find(".backToQuestion").show().end().length||d(c,1).apply(null,[]),h("a#nav"+g[0].id+".qnbutton").nextAll(".qnbutton").addClass("thispage")}):
(d(c,1).apply(null,[]),e.method.completeQuiz({callback:e.config.animationCallbacks.completeQuiz}));L.turnKeyAndGo(c,b&&b.callback?b.callback:function(){})},backToQuestion:function(b,c){var d=L.getKey(2);var g=L.getKeyNotch;var m=h(h(b).parents(".question")[0]),f=m.find(".answers");h("a#navquestion0.qnbutton").removeClass("thispage");h("a#navquestion0.qnbutton").nextAll(".qnbutton").removeClass("thispage");if("block"===f.css("display")){var k=m.prev(".question");h("li#question0.question").nextAll(".question").hide();
if(m.prevAll(".question").length>=e.config.questionPerPage){b=1+Number(m.attr("id").replace(/^\D+/g,""));var l=b%e.config.questionPerPage;b=0<l?b-l:b-e.config.questionPerPage;b>e.config.questionPerPage?(h("li#question"+b+".question").prevUntil("li#question"+(b-1-e.config.questionPerPage)+".question").show(),h("a#navquestion"+b+".qnbutton").prevUntil("a#navquestion"+(b-1-e.config.questionPerPage)+".qnbutton").addClass("thispage")):(h("li#question"+b+".question").prevAll(".question").show(),h("a#navquestion"+
b+".qnbutton").prevAll(".qnbutton").addClass("thispage"))}else m.prevAll(".question").show();m.fadeOut(300,function(){k.removeClass("correctResponse").removeClass("incorrectResponse");k.find(".responses, .responses li").hide();k.find(".answers").show();k.find(".checkAnswer").show();g(d,2).apply(null,[])})}else m.find(".responses").fadeOut(300,function(){m.removeClass("correctResponse").removeClass("incorrectResponse");m.find(".responses li").hide();f.fadeIn(500,g(d,1));m.find(".checkAnswer").fadeIn(500,
g(d,2));m.find(a).hide();"question0"!=m.attr("id")?m.find(".backToQuestion").show():m.find(".backToQuestion").hide()});L.turnKeyAndGo(d,c&&c.callback?c.callback:function(){})},diaplayQuestion:function(a,b){L.getKey(1);b=h("li"+a.hash+".question");b.next(".question");b=b.find("input:checked");if(e.config.preventUnanswered&&0===b.length)return!1;b=1+Number(a.id.replace(/^\D+/g,""));if(b>e.config.questionPerPage){var c=0<b%e.config.questionPerPage?parseInt(b/e.config.questionPerPage)+1:parseInt(b/e.config.questionPerPage);
b=e.config.questionPerPage*(c-1);c*=e.config.questionPerPage;h("li#question0.question").hide();h("li#question0").nextAll(".question").hide();h("a#navquestion0.qnbutton").nextAll(".qnbutton").removeClass("thispage");h("a#navquestion0.qnbutton").removeClass("thispage");b>=e.config.questionPerPage?(h("li#question"+(b-1)+".question").nextUntil("li#question"+c+".question").show(),h("a#navquestion"+(b-1)+".qnbutton").nextUntil("a#navquestion"+c+".qnbutton").addClass("thispage")):(h("li#question0.question").nextUntil("li#question"+
e.config.questionPerPage+".question").show(),h("a#navquestion0.qnbutton").addClass("thispage"),h("a#navquestion0.qnbutton").nextUntil("a#navquestion"+e.config.questionPerPage+".qnbutton").addClass("thispage"))}else h("li#question0").nextAll(".question").hide(),h("a#navquestion0.qnbutton").nextAll(".qnbutton").removeClass("thispage"),h("li#question0.question").show(),h("li#question0.question").nextUntil("li#question"+e.config.questionPerPage+".question").show(),h("a#navquestion0.qnbutton").addClass("thispage"),
h("a#navquestion0.qnbutton").nextUntil("a#navquestion"+e.config.questionPerPage+".qnbutton").addClass("thispage");window.location.href=a.hash},flagQuestion:function(a,b){b=h(h(a).parents(".question")[0]);h("a#nav"+b.attr("id")+".qnbutton").toggleClass("trafficlight");h(a).toggleClass("flagged")},startTimer:function(a,b,c,d){function e(){b||"undefined"==typeof K?(f="asc"==c?a+((Date.now()-m)/1E3|0):a-((Date.now()-m)/1E3|0),h=f/3600|0,k=f%3600/60|0,l=f%60|0,h=10>h?"0"+h:h,k=10>k?"0"+k:k,l=10>l?"0"+
l:l,b.textContent=h+":"+k+":"+l,g=h+":"+k+":"+l,0>=f&&(m=0,"undefined"!=typeof K&&(console.log("Clear quiz interval"),clearInterval(K)))):clearInterval(K)}"undefined"!=typeof K&&(clearInterval(K),console.log("Clear quiz interval"));c="undefined"!==typeof c?c:"desc";var m=Date.now(),f,h,k,l;"asc"!==c&&e();K=setInterval(e,1E3)},completeQuiz:function(a){var b=L.getKey(1);var c=L.getKeyNotch;var d=h(k+" .answers").find("input:checked").length,f=(Number(m.info.results)/M).toFixed(3),l=h(k+" .correctResponse").length,
A=l*f,t=parseInt(m.info.results);e.config.disableScore?h(p).remove():h(p+" span").html(e.config.scoreTemplateText.replace("%score",A.toFixed(2)).replace("%total",t.toFixed(2)));if(e.config.disableRanking)h(x).remove();else{var r=[m.info.level1,m.info.level2,m.info.level3,m.info.level4,m.info.level5];f=e.method.calculateLevel(A);r=h.isNumeric(f)?r[f]:"";h(x+" span").html(r);h(x).addClass("level"+f)}C.fadeOut(0,function(){console.log("quiz data complete quiz");clearInterval(K);console.log("Clear quiz interval");
if(e.config.completionResponseMessaging)h(k+" .qnbutton").addClass("show"),h(k+" input").prop("disabled",!0),h(k+" .button:not(.tryAgain), "+k+" .questionCount").hide(),h(k+" .question, "+k+" .answers, "+k+" .responses").show(),F.append(h(k+" .questions")).fadeIn(500,c(b,1));else{if(e.config.quizTime&&0<e.config.quizTime){var a=g.split(":");a=3600*+a[0]+60*+a[1]+ +a[2];a=parseInt(e.config.quizTime)-a;var f=virtualclass.quiz.convertSecToTime(a)}else f=g;console.log("====> QUIZ IS CRERATING");h(k+" .navblock").hide();
F.prepend(h("<h4>Questions attempted: <span>"+d+"</span></h4>"));F.prepend(h("<h4>Correct answers: <span>"+l+"</span></h4>"));F.prepend(h("<h4>Maximum mark: <span>"+t.toFixed(2)+"</span></h4>"));F.prepend(h("<h4>Time taken: <span>"+f+"</span></h4>"));h(k+" #timeText").hide();F.prepend(h("<h4>Total no of questions: <span>"+M+"</span></h4>"));F.fadeIn(500,c(b,1))}if(!roles.hasControls()){console.log("quiz submit init from "+virtualclass.gObj.uid);var p=100*+A/+m.info.results;virtualclass.vutil.whoIsTeacher();
virtualclass.quiz.hasOwnProperty("timeQuizComplete")&&clearTimeout(virtualclass.quiz.timeQuizComplete);virtualclass.quiz.timeQuizComplete=setTimeout(function(){console.log("quiz submit from "+virtualclass.gObj.uid);virtualclass.quiz.sendSubmittedQuiz({quizMsg:"quizsubmitted",timetaken:f,quesattemptd:d,correctans:l,score:p.toFixed(2),user:virtualclass.gObj.uid,maxmarks:m.info.results,noofqus:M})},300)}});L.turnKeyAndGo(b,a&&a.callback?a.callback:function(){});e.config.events&&e.config.events.onCompleteQuiz&&
e.config.events.onCompleteQuiz.apply(null,[{questionCount:M,score:A}])},compareAnswers:function(a,b,c){return c?-1<h.inArray(b[0],a):0===h(a).not(b).length&&0===h(b).not(a).length},calculateLevel:function(a){a=(a/M).toFixed(2);var b=null;e.method.inRange(0,.2,a)?b=4:e.method.inRange(.21,.4,a)?b=3:e.method.inRange(.41,.6,a)?b=2:e.method.inRange(.61,.8,a)?b=1:e.method.inRange(.81,1,a)&&(b=0);return b},inRange:function(a,b,c){return c>=a&&c<=b},sendQzdata:function(a,b){virtualclass.quiz.sendQuizData(m.info.quiz,
a,b)}};e.init=function(){e.method.setupQuiz.apply(null,[{callback:e.config.animationCallbacks.setupQuiz}]);t.on("click",function(a){a.preventDefault();this.disabled||h(this).hasClass("disabled")||e.method.startQuiz.apply(null,[{callback:e.config.animationCallbacks.startQuiz}])});h(k+" .tryAgain").on("click",function(a){a.preventDefault();e.method.resetQuiz(this,{callback:e.config.animationCallbacks.resetQuiz})});h(k+" .checkAnswer").on("click",function(a){a.preventDefault();e.method.checkAnswer(this,
{callback:e.config.animationCallbacks.checkAnswer})});if(!e.config.perQuestionResponseMessaging)h(k+" .ansck").on("click",function(a){e.method.checkAnswer(this,{callback:e.config.animationCallbacks.checkAnswer})});h("#exam_navblock .qn_buttons a").on("click",function(a){a.preventDefault();"none"==h("li"+this.hash+".question").css("display")?e.method.diaplayQuestion(this,{callback:e.config.animationCallbacks.diaplayQuestion}):window.location.href=this.hash});h(k+" .quesname span.unflagged").on("click",
function(a){a.preventDefault();e.method.flagQuestion(this,{callback:e.config.animationCallbacks.flagQuestion})});h(k+" .backToQuestion").on("click",function(a){a.preventDefault();e.method.backToQuestion(this,{callback:e.config.animationCallbacks.backToQuestion})});h(k+" "+a).on("click",function(a){a.preventDefault();e.method.nextQuestion(this,{callback:e.config.animationCallbacks.nextQuestion})});var b=d.attr("id")+"-name";B.attr("id",b);d.attr({"aria-labelledby":b,"aria-live":"polite","aria-relevant":"additions",
role:"form"});h(l+', [href = "#"]').attr("role","button")};e.init()};h.fn.slickQuiz=function(f){return this.each(function(){if(void 0===h(this).data("slickQuiz")){var b=new h.slickQuiz(this,f);h(this).data("slickQuiz",b);virtualclass.quiz.plugin=b}})}})(jQuery);!function(){function h(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function f(a){return null===a?NaN:+a}function b(a){return!isNaN(a)}function e(a){return{left:function(b,c,d,g){3>arguments.length&&(d=0);4>arguments.length&&(g=b.length);for(;d<g;){var e=d+g>>>1;0>a(b[e],c)?d=e+1:g=e}return d},right:function(b,c,d,g){3>arguments.length&&(d=0);4>arguments.length&&(g=b.length);for(;d<g;){var e=d+g>>>1;0<a(b[e],c)?g=e:d=e+1}return d}}}function d(a){return a.length}function k(a,b){for(var c in b)Object.defineProperty(a.prototype,
c,{value:b[c],enumerable:!1})}function c(){this._=Object.create(null)}function a(a){return"__proto__"===(a+="")||"\x00"===a[0]?"\x00"+a:a}function l(a){return"\x00"===(a+="")[0]?a.slice(1):a}function u(b){return a(b)in this._}function q(b){return(b=a(b))in this._&&delete this._[b]}function r(){var a=[],b;for(b in this._)a.push(l(b));return a}function y(){var a=0,b;for(b in this._)++a;return a}function z(){for(var a in this._)return!1;return!0}function p(){this._=Object.create(null)}function x(a,b,
c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function t(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=re.length;c<d;++c){var g=re[c]+b;if(g in a)return g}}function B(){}function C(){}function F(a){function b(){for(var b=d,c=-1,g=b.length,e;++c<g;)(e=b[c].on)&&e.apply(this,arguments);return a}var d=[],g=new c;b.on=function(b,c){var e=g.get(b),m;if(2>arguments.length)return e&&e.on;e&&(e.on=null,d=d.slice(0,m=d.indexOf(e)).concat(d.slice(m+1)),g.remove(b));
c&&d.push(g.set(b,{on:c}));return a};return b}function H(){D.event.preventDefault()}function G(){for(var a=D.event,b;b=a.sourceEvent;)a=b;return a}function E(a){for(var b=new C,c=0,d=arguments.length;++c<d;)b[arguments[c]]=F(b);b.of=function(c,d){return function(g){try{var e=g.sourceEvent=D.event;g.target=a;D.event=g;b[g.type].apply(c,d)}finally{D.event=e}}};return b}function K(a){xf(a,Da);return a}function g(a){return"function"===typeof a?a:function(){return lc(a,this)}}function m(a){return"function"===
typeof a?a:function(){return yf(a,this)}}function A(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function g(){this.setAttribute(a,b)}function e(){this.setAttributeNS(a.space,a.local,b)}function m(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function f(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}a=D.ns.qualify(a);return null==b?a.local?
d:c:"function"===typeof b?a.local?f:m:a.local?e:g}function M(a){return new RegExp("(?:^|\\s+)"+D.requote(a)+"(?:\\s+|$)","g")}function L(a,b){function c(){for(var c=-1;++c<g;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<g;)a[c](this,d)}a=(a+"").trim().split(/^|\s+/).map(Q);var g=a.length;return"function"===typeof b?d:c}function Q(a){var b=M(a);return function(c,d){if(g=c.classList)return d?g.add(a):g.remove(a);var g=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(g)||c.setAttribute("class",
(g+" "+a).trim().replace(/\s+/g," "))):c.setAttribute("class",g.replace(b," ").trim().replace(/\s+/g," "))}}function ia(a,b,c){function d(){this.style.removeProperty(a)}function g(){this.style.setProperty(a,b,c)}function e(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"===typeof b?e:g}function V(a,b){function c(){delete this[a]}function d(){this[a]=b}function g(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=
c}return null==b?c:"function"===typeof b?g:d}function Aa(a){return"function"===typeof a?a:(a=D.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function U(){var a=this.parentNode;a&&a.removeChild(this)}function X(a){return function(){return Kc(this,a)}}function da(a){arguments.length||(a=h);return function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function R(a,b){for(var c=
0,d=a.length;c<d;c++)for(var g=a[c],e=0,m=g.length,f;e<m;e++)(f=g[e])&&b(f,e,c);return a}function Z(a){xf(a,vd);return a}function sa(a){var b,c;return function(d,g,e){d=a[e].update;var m=d.length;e!=c&&(c=e,b=0);for(g>=b&&(b=g+1);!(g=d[b])&&++b<m;);return g}}function qa(a){(a=a.__transition__)&&++a.active}function ma(a,b,c){function d(){var b=this[m];b&&(this.removeEventListener(a,b,b.$),delete this[m])}function g(){var g=n(b,Lc(arguments));d.call(this);this.addEventListener(a,this[m]=g,g.$=c);g._=
b}function e(){var b=new RegExp("^__on([^.]+)"+D.requote(a)+"$"),c,d;for(d in this)if(c=d.match(b)){var g=this[d];this.removeEventListener(c[1],g,g.$);delete this[d]}}var m="__on"+a,f=a.indexOf("."),n=ea;0<f&&(a=a.slice(0,f));var O=Ng.get(a);O&&(a=O,n=Ya);return f?b?g:d:b?B:e}function ea(a,b){return function(c){var d=D.event;D.event=c;b[0]=this.__data__;try{a.apply(this,b)}finally{D.event=d}}}function Ya(a,b){var c=ea(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||b.compareDocumentPosition(this)&
8)||c.call(this,a)}}function Va(){var a=".dragsuppress-"+ ++Og,b="click"+a,c=D.select(wb).on("touchmove"+a,H).on("dragstart"+a,H).on("selectstart"+a,H);if(dd){var d=kb.style,g=d[dd];d[dd]="none"}return function(e){c.on(a,null);dd&&(d[dd]=g);if(e){var m=function(){c.on(b,null)};c.on(b,function(){H();m()},!0);setTimeout(m,0)}}}function ub(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>se&&(wb.scrollX||wb.scrollY)){c=D.select("body").append("svg").style({position:"absolute",
top:0,left:0,margin:0,padding:0,border:"none"},"important");var g=c[0][0].getScreenCTM();se=!(g.f||g.e);c.remove()}se?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY);d=d.matrixTransform(a.getScreenCTM().inverse());return[d.x,d.y]}c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function Za(){return D.event.changedTouches[0].identifier}function Ba(){return D.event.target}function Ma(){return wb}function Ea(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-
a[1])*(c[0]-a[0])}function Qa(a){return 1<a?0:-1>a?ha:Math.acos(a)}function Ha(a){return 1<a?bb:-1>a?-bb:Math.asin(a)}function la(a){return((a=Math.exp(a))+1/a)/2}function W(a){return(a=Math.sin(a/2))*a}function ya(){}function Pa(a,b,c){return this instanceof Pa?void(this.h=+a,this.s=+b,this.l=+c):2>arguments.length?a instanceof Pa?new Pa(a.h,a.s,a.l):ba(""+a,La,Pa):new Pa(a,b,c)}function va(a,b,c){function d(a){360<a?a-=360:0>a&&(a+=360);return 60>a?e+(g-e)*a/60:180>a?g:240>a?e+(g-e)*(240-a)/60:
e}a=isNaN(a)?0:0>(a%=360)?a+360:a;b=isNaN(b)?0:0>b?0:1<b?1:b;c=0>c?0:1<c?1:c;var g=.5>=c?c*(1+b):c+b-c*b;var e=2*c-g;return new Ra(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function Ka(a,b,c){return this instanceof Ka?void(this.h=+a,this.c=+b,this.l=+c):2>arguments.length?a instanceof Ka?new Ka(a.h,a.c,a.l):a instanceof qb?N(a.l,a.a,a.b):N((a=Wc((a=D.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new Ka(a,b,c)}function ta(a,b,c){isNaN(a)&&(a=0);isNaN(b)&&(b=0);return new qb(c,Math.cos(a*=
ja)*b,Math.sin(a)*b)}function qb(a,b,c){return this instanceof qb?void(this.l=+a,this.a=+b,this.b=+c):2>arguments.length?a instanceof qb?new qb(a.l,a.a,a.b):a instanceof Ka?ta(a.h,a.c,a.l):Wc((a=Ra(a)).r,a.g,a.b):new qb(a,b,c)}function cb(a,b,c){a=(a+16)/116;c=a-c/200;b=v(a+b/500)*w;a=v(a)*I;c=v(c)*P;return new Ra(ca(3.2404542*b-1.5371385*a-.4985314*c),ca(-.969266*b+1.8760108*a+.041556*c),ca(.0556434*b-.2040259*a+1.0572252*c))}function N(a,b,c){return 0<a?new Ka(Math.atan2(c,b)*Oa,Math.sqrt(b*b+c*
c),a):new Ka(NaN,NaN,a)}function v(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Ca(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function ca(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function Ra(a,b,c){return this instanceof Ra?void(this.r=~~a,this.g=~~b,this.b=~~c):2>arguments.length?a instanceof Ra?new Ra(a.r,a.g,a.b):ba(""+a,Ra,va):new Ra(a,b,c)}function hc(a){return new Ra(a>>16,a>>8&255,a&255)+""}function oa(a){return 16>a?"0"+Math.max(0,a).toString(16):
Math.min(255,a).toString(16)}function ba(a,b,c){var d=0,g=0,e=0,m;if(m=/([a-z]+)\((.*)\)/i.exec(a)){var f=m[2].split(",");switch(m[1]){case "hsl":return c(parseFloat(f[0]),parseFloat(f[1])/100,parseFloat(f[2])/100);case "rgb":return b(za(f[0]),za(f[1]),za(f[2]))}}if(c=zf.get(a))return b(c.r,c.g,c.b);null==a||"#"!==a.charAt(0)||isNaN(c=parseInt(a.slice(1),16))||(4===a.length?(d=(c&3840)>>4,d|=d>>4,g=c&240,g|=g>>4,e=c&15,e|=e<<4):7===a.length&&(d=(c&16711680)>>16,g=(c&65280)>>8,e=c&255));return b(d,
g,e)}function La(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),e=g-d,m=(g+d)/2;e?(d=.5>m?e/(g+d):e/(2-g-d),a=60*(a==g?(b-c)/e+(b<c?6:0):b==g?(c-a)/e+2:(a-b)/e+4)):(a=NaN,d=0<m&&1>m?0:a);return new Pa(a,d,m)}function Wc(a,b,c){a=Pb(a);b=Pb(b);c=Pb(c);var d=Ca((.4124564*a+.3575761*b+.1804375*c)/w),g=Ca((.2126729*a+.7151522*b+.072175*c)/I);a=Ca((.0193339*a+.119192*b+.9503041*c)/P);return qb(116*g-16,500*(d-g),200*(g-a))}function Pb(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/
1.055,2.4)}function za(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function ra(a){return"function"===typeof a?a:function(){return a}}function Sa(a){return a}function qd(a){return function(b,c,d){2===arguments.length&&"function"===typeof c&&(d=c,c=null);return Ue(b,c,a,d)}}function Ue(a,b,c,d){function g(){var a=n.status,b;if(b=!a)b=(b=n.responseType)&&"text"!==b?n.response:n.responseText;if(b||200<=a&&300>a||304===a){try{var d=c.call(e,n)}catch(Ti){m.error.call(e,
Ti);return}m.load.call(e,d)}else m.error.call(e,n)}var e={},m=D.dispatch("beforesend","progress","load","error"),f={},n=new XMLHttpRequest,h=null;!wb.XDomainRequest||"withCredentials"in n||!/^(http(s)?:)?\/\//.test(a)||(n=new XDomainRequest);"onload"in n?n.onload=n.onerror=g:n.onreadystatechange=function(){3<n.readyState&&g()};n.onprogress=function(a){var b=D.event;D.event=a;try{m.progress.call(e,n)}finally{D.event=b}};e.header=function(a,b){a=(a+"").toLowerCase();if(2>arguments.length)return f[a];
null==b?delete f[a]:f[a]=b+"";return e};e.mimeType=function(a){if(!arguments.length)return b;b=null==a?null:a+"";return e};e.responseType=function(a){if(!arguments.length)return h;h=a;return e};e.response=function(a){c=a;return e};["get","post"].forEach(function(a){e[a]=function(){return e.send.apply(e,[a].concat(Lc(arguments)))}});e.send=function(c,d,g){2===arguments.length&&"function"===typeof d&&(g=d,d=null);n.open(c,a,!0);null==b||"accept"in f||(f.accept=b+",*/*");if(n.setRequestHeader)for(var O in f)n.setRequestHeader(O,
f[O]);null!=b&&n.overrideMimeType&&n.overrideMimeType(b);null!=h&&(n.responseType=h);if(null!=g)e.on("error",g).on("load",function(a){g(null,a)});m.beforesend.call(e,n);n.send(null==d?null:d);return e};e.abort=function(){n.abort();return e};D.rebind(e,m,"on");return null==d?e:e.get(gb(d))}function gb(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Gc(){var a=ig();a=kd()-a;24<a?(isFinite(a)&&(clearTimeout(Ud),Ud=setTimeout(Gc,a)),Mc=0):(Mc=1,xb(Gc))}function ig(){var a=Date.now();
for(Vd=Af;Vd;)a>=Vd.t&&(Vd.f=Vd.c(a-Vd.t)),Vd=Vd.n;return a}function kd(){for(var a,b=Af,c=Infinity;b;)b.f?b=a?a.n=b.n:Af=b.n:(b.t<c&&(c=b.t),b=(a=b).n);ed=a;return c}function jd(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function ob(a){var b=a.decimal,c=a.thousands,d=a.grouping,g=a.currency,e=d&&c?function(a,b){for(var g=a.length,e=[],m=0,f=d[0],n=0;0<g&&0<f;){n+f+1>b&&(f=Math.max(1,b-n));e.push(a.substring(g-=f,g+f));if((n+=f+1)>b)break;f=d[m=(m+1)%d.length]}return e.reverse().join(c)}:
Sa;return function(a){a=te.exec(a);var c=a[1]||" ",d=a[2]||">",m=a[3]||"-",f=a[4]||"",n=a[5],h=+a[6],O=a[7],k=a[8],w=a[9],l=1,A="",t="",jc=!1,p=!0;k&&(k=+k.substring(1));if(n||"0"===c&&"="===d)n=c="0",d="=";switch(w){case "n":O=!0;w="g";break;case "%":l=100;t="%";w="f";break;case "p":l=100;t="%";w="r";break;case "b":case "o":case "x":case "X":"#"===f&&(A="0"+w.toLowerCase());case "c":p=!1;case "d":jc=!0;k=0;break;case "s":l=-1,w="r"}"$"===f&&(A=g[0],t=g[1]);"r"!=w||k||(w="g");if(null!=k)if("g"==w)k=
Math.max(1,Math.min(21,k));else if("e"==w||"f"==w)k=Math.max(0,Math.min(20,k));w=Ph.get(w)||rd;var I=n&&O;return function(a){var g=t;if(jc&&a%1)return"";var f=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===m?"":m;0>l?(g=D.formatPrefix(a,k),a=g.scale(a),g=g.symbol+t):a*=l;a=w(a,k);var r=a.lastIndexOf(".");if(0>r)if(r=p?a.lastIndexOf("e"):-1,0>r){var u=a;a=""}else u=a.substring(0,r),a=a.substring(r);else u=a.substring(0,r),a=b+a.substring(r+1);!n&&O&&(u=e(u,Infinity));r=A.length+u.length+a.length+(I?0:f.length);
var q=r<h?Array(r=h-r+1).join(c):"";I&&(u=e(q+u,q.length?h-a.length:Infinity));f+=A;a=u+a;return("<"===d?f+a+q:">"===d?q+f+a:"^"===d?q.substring(0,r>>=1)+f+a+q.substring(r):f+(I?a:q+a))+g}}}function rd(a){return a+""}function Zb(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function tb(a,b,c){function d(b){var c=a(b),d=e(c,1);return b-c<d-b?c:d}function g(c){b(c=a(new dc(c-1)),1);return c}function e(a,c){b(a=new dc(+a),c);return a}function m(a,d,e){a=g(a);var m=
[];if(1<e)for(;a<d;)c(a)%e||m.push(new Date(+a)),b(a,1);else for(;a<d;)m.push(new Date(+a)),b(a,1);return m}a.floor=a;a.round=d;a.ceil=g;a.offset=e;a.range=m;var f=a.utc=Vb(a);f.floor=f;f.round=Vb(d);f.ceil=Vb(g);f.offset=Vb(e);f.range=function(a,b,c){try{dc=Zb;var d=new Zb;d._=a;return m(d,b,c)}finally{dc=Date}};return a}function Vb(a){return function(b,c){try{dc=Zb;var d=new Zb;d._=b;return a(d,c)._}finally{dc=Date}}}function Xc(a){function b(a){function b(b){for(var c=[],g=-1,e=0,m,f;++g<d;)if(37===
a.charCodeAt(g)){c.push(a.slice(e,g));null!=(m=Wd[e=a.charAt(++g)])&&(e=a.charAt(++g));if(f=q[e])e=f(b,null==m?"e"===e?" ":"0":m);c.push(e);e=g+1}c.push(a.slice(e,g));return c.join("")}var d=a.length;b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(d,a,b,0)!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);b=null!=d.Z&&dc!==Zb;var g=new (b?Zb:dc);"j"in d?g.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-
(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d);g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L);return b?g._:g};b.toString=function(){return a};return b}function c(a,b,c,d){for(var g,e=0,m=b.length,f=c.length;e<m;){if(d>=f)return-1;g=b.charCodeAt(e++);if(37===g){if(g=b.charAt(e++),g=x[g in Wd?b.charAt(e++):g],!g||0>(d=g(a,c,d)))return-1}else if(g!=c.charCodeAt(d++))return-1}return d}var d=a.dateTime,g=a.date,e=a.time,m=a.periods,f=a.days,n=a.shortDays,h=a.months,O=a.shortMonths;
b.utc=function(a){function c(a){try{dc=Zb;var b=new dc;b._=a;return d(b)}finally{dc=Date}}var d=b(a);c.parse=function(a){try{dc=Zb;var b=d.parse(a);return b&&b._}finally{dc=Date}};c.toString=d.toString;return c};b.multi=b.utc.multi=je;var k=D.map(),w=$b(f),l=gc(f),A=$b(n),t=gc(n),p=$b(h),I=gc(h),r=$b(O),u=gc(O);m.forEach(function(a,b){k.set(a.toLowerCase(),b)});var q={a:function(a){return n[a.getDay()]},A:function(a){return f[a.getDay()]},b:function(a){return O[a.getMonth()]},B:function(a){return h[a.getMonth()]},
c:b(d),d:function(a,b){return Xa(a.getDate(),b,2)},e:function(a,b){return Xa(a.getDate(),b,2)},H:function(a,b){return Xa(a.getHours(),b,2)},I:function(a,b){return Xa(a.getHours()%12||12,b,2)},j:function(a,b){return Xa(1+Y.dayOfYear(a),b,3)},L:function(a,b){return Xa(a.getMilliseconds(),b,3)},m:function(a,b){return Xa(a.getMonth()+1,b,2)},M:function(a,b){return Xa(a.getMinutes(),b,2)},p:function(a){return m[+(12<=a.getHours())]},S:function(a,b){return Xa(a.getSeconds(),b,2)},U:function(a,b){return Xa(Y.sundayOfYear(a),
b,2)},w:function(a){return a.getDay()},W:function(a,b){return Xa(Y.mondayOfYear(a),b,2)},x:b(g),X:b(e),y:function(a,b){return Xa(a.getFullYear()%100,b,2)},Y:function(a,b){return Xa(a.getFullYear()%1E4,b,4)},Z:Ke,"%":function(){return"%"}},x={a:function(a,b,c){A.lastIndex=0;return(b=A.exec(b.slice(c)))?(a.w=t.get(b[0].toLowerCase()),c+b[0].length):-1},A:function(a,b,c){w.lastIndex=0;return(b=w.exec(b.slice(c)))?(a.w=l.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){r.lastIndex=0;return(b=
r.exec(b.slice(c)))?(a.m=u.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){p.lastIndex=0;return(b=p.exec(b.slice(c)))?(a.m=I.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,d){return c(a,q.c.toString(),b,d)},d:sd,e:sd,H:Ve,I:Ve,j:J,L:lg,m:kg,M:Md,p:function(a,b,c){b=k.get(b.slice(c,c+=2).toLowerCase());return null==b?-1:(a.p=b,c)},S:Hc,U:lb,w:jf,W:Je,x:function(a,b,d){return c(a,q.x.toString(),b,d)},X:function(a,b,d){return c(a,q.X.toString(),b,d)},y:Yc,Y:ie,Z:jg,"%":Uf};return b}
function Xa(a,b,c){var d=0>a?"-":"";a=(d?-a:a)+"";var g=a.length;return d+(g<c?Array(c-g+1).join(b)+a:a)}function $b(a){return new RegExp("^(?:"+a.map(D.requote).join("|")+")","i")}function gc(a){for(var b=new c,d=-1,g=a.length;++d<g;)b.set(a[d].toLowerCase(),d);return b}function jf(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.slice(c,c+1)))?(a.w=+b[0],c+b[0].length):-1}function lb(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.slice(c)))?(a.U=+b[0],c+b[0].length):-1}function Je(a,b,c){mb.lastIndex=0;return(b=
mb.exec(b.slice(c)))?(a.W=+b[0],c+b[0].length):-1}function ie(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.slice(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}function Yc(a,b,c){mb.lastIndex=0;if(b=mb.exec(b.slice(c,c+2))){var d=+b[0];a=(a.y=d+(68<d?1900:2E3),c+b[0].length)}else a=-1;return a}function jg(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function kg(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.slice(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1}function sd(a,b,c){mb.lastIndex=0;return(b=
mb.exec(b.slice(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function J(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.slice(c,c+3)))?(a.j=+b[0],c+b[0].length):-1}function Ve(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.slice(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function Md(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.slice(c,c+2)))?(a.M=+b[0],c+b[0].length):-1}function Hc(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.slice(c,c+2)))?(a.S=+b[0],c+b[0].length):-1}function lg(a,b,c){mb.lastIndex=0;return(b=mb.exec(b.slice(c,
c+3)))?(a.L=+b[0],c+b[0].length):-1}function Ke(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var c=aa(b)/60|0;b=aa(b)%60;return a+Xa(c,"0",2)+Xa(b,"0",2)}function Uf(a,b,c){xi.lastIndex=0;return(a=xi.exec(b.slice(c,c+1)))?c+a[0].length:-1}function je(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function hb(){}function Cc(a,b,c){var d=c.s=a+b,g=d-a;c.t=a-(d-g)+(b-g)}function xa(a,b){if(a&&Qh.hasOwnProperty(a.type))Qh[a.type](a,
b)}function Ic(a,b,c){var d=-1;c=a.length-c;for(b.lineStart();++d<c;){var g=a[d];b.point(g[0],g[1],g[2])}b.lineEnd()}function pb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)Ic(a[c],b,1);b.polygonEnd()}function ib(){function a(a,b){a*=ja;b=b*ja/2+ha/4;var c=a-d,m=0<=c?1:-1;c*=m;var f=Math.cos(b);b=Math.sin(b);var n=e*b;Xd.add(Math.atan2(n*m*Math.sin(c),g*f+n*Math.cos(c)));d=a;g=f;e=b}var b,c,d,g,e;fd.point=function(m,f){fd.point=a;d=(b=m)*ja;g=Math.cos(f=(c=f)*ja/2+ha/4);e=Math.sin(f)};fd.lineEnd=
function(){a(b,c)}}function db(a){var b=a[0];a=a[1];var c=Math.cos(a);return[c*Math.cos(b),c*Math.sin(b),Math.sin(a)]}function $a(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function ac(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function bc(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function ab(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Lb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function Cb(a){return[Math.atan2(a[1],a[0]),Ha(a[2])]}function rc(a,
b){return 1E-6>aa(a[0]-b[0])&&1E-6>aa(a[1]-b[1])}function pe(a,b){a*=ja;var c=Math.cos(b*=ja);Nd(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function Nd(a,b,c){++Qg;Rb+=(a-Rb)/Qg;qg+=(b-qg)/Qg;wd+=(c-wd)/Qg}function Me(){function a(a,g){a*=ja;var e=Math.cos(g*=ja),m=e*Math.cos(a);a=e*Math.sin(a);g=Math.sin(g);var f=Math.atan2(Math.sqrt((f=c*g-d*a)*f+(f=d*m-b*g)*f+(f=b*a-c*m)*f),b*m+c*a+d*g);mh+=f;Xe+=f*(b+(b=m));Df+=f*(c+(c=a));Yd+=f*(d+(d=g));Nd(b,c,d)}var b,c,d;Zd.point=function(g,e){g*=ja;var m=Math.cos(e*=
ja);b=m*Math.cos(g);c=m*Math.sin(g);d=Math.sin(e);Zd.point=a;Nd(b,c,d)}}function Le(){Zd.point=pe}function Wb(){function a(a,b){a*=ja;var c=Math.cos(b*=ja),m=c*Math.cos(a);a=c*Math.sin(a);b=Math.sin(b);c=g*b-e*a;var f=e*m-d*b,n=d*a-g*m,h=Math.sqrt(c*c+f*f+n*n),O=d*m+g*a+e*b,k=h&&-Qa(O)/h;h=Math.atan2(h,O);Ef+=k*c;ue+=k*f;Ff+=k*n;mh+=h;Xe+=h*(d+(d=m));Df+=h*(g+(g=a));Yd+=h*(e+(e=b));Nd(d,g,e)}var b,c,d,g,e;Zd.point=function(m,f){b=m;c=f;Zd.point=a;m*=ja;var n=Math.cos(f*=ja);d=n*Math.cos(m);g=n*Math.sin(m);
e=Math.sin(f);Nd(d,g,e)};Zd.lineEnd=function(){a(b,c);Zd.lineEnd=Le;Zd.point=pe}}function uc(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])});return c}function td(){return!0}function Ja(a,b,c,d,g){var e=[],m=[];a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if(rc(c,d)){g.lineStart();for(d=0;d<b;++d)g.point((c=a[d])[0],c[1]);g.lineEnd()}else b=new rf(c,a,null,!0),c=new rf(c,null,b,!1),b.o=
c,e.push(b),m.push(c),b=new rf(d,a,null,!1),c=new rf(d,null,b,!0),b.o=c,e.push(b),m.push(c)}});m.sort(b);Od(e);Od(m);if(e.length){a=0;b=c;for(c=m.length;a<c;++a)m[a].e=b=!b;b=e[0];for(var f,n;;){for(var h=b,O=!0;h.v;)if((h=h.n)===b)return;f=h.z;g.lineStart();do{h.v=h.o.v=!0;if(h.e){if(O)for(a=0,c=f.length;a<c;++a)g.point((n=f[a])[0],n[1]);else d(h.x,h.n.x,1,g);h=h.n}else{if(O)for(f=h.p.z,a=f.length-1;0<=a;--a)g.point((n=f[a])[0],n[1]);else d(h.x,h.p.x,-1,g);h=h.p}h=h.o;f=h.z;O=!O}while(!h.v);g.lineEnd()}}}
function Od(a){if(b=a.length){for(var b,c=0,d=a[0],g;++c<b;)d.n=g=a[c],g.p=d,d=g;d.n=g=a[0];g.p=d}}function rf(a,b,c,d){this.x=a;this.z=b;this.o=c;this.e=d;this.v=!1;this.n=this.p=null}function Ta(a,b,c,d){return function(g,e){function m(b,c){var d=g(b,c);a(b=d[0],c=d[1])&&e.point(b,c)}function f(a,b){a=g(a,b);l.point(a[0],a[1])}function n(){t.point=f;l.lineStart()}function h(){t.point=m;l.lineEnd()}function O(a,b){x.push([a,b]);a=g(a,b);r.point(a[0],a[1])}function k(){r.lineStart();x=[]}function w(){O(x[0][0],
x[0][1]);r.lineEnd();var a=r.clean(),b=I.buffer(),c=b.length;x.pop();q.push(x);x=null;if(c)if(a&1){a=b[0];c=a.length-1;b=-1;var d;if(0<c){u||(e.polygonStart(),u=!0);for(e.lineStart();++b<c;)e.point((d=a[b])[0],d[1]);e.lineEnd()}}else 1<c&&a&2&&b.push(b.pop().concat(b.shift())),p.push(b.filter(Pd))}var l=b(e),A=g.invert(d[0],d[1]),t={point:m,lineStart:n,lineEnd:h,polygonStart:function(){t.point=O;t.lineStart=k;t.lineEnd=w;p=[];q=[]},polygonEnd:function(){t.point=m;t.lineStart=n;t.lineEnd=h;p=D.merge(p);
var a=A;var b=q;var d=a[0],g=a[1],f=[Math.sin(d),-Math.cos(d),0],O=0,k=0;Xd.reset();for(var w=0,l=b.length;w<l;++w){var I=b[w],r=I.length;if(r){var x=I[0],z=x[0];a=x[1]/2+ha/4;for(var M=Math.sin(a),jc=Math.cos(a),y=1;;){y===r&&(y=0);a=I[y];var L=a[0],P=a[1]/2+ha/4,B=Math.sin(P);P=Math.cos(P);var C=L-z,si=0<=C?1:-1,Jb=si*C,E=Jb>ha;M*=B;Xd.add(Math.atan2(M*si*Math.sin(Jb),jc*P+M*Math.cos(Jb)));O+=E?C+si*ec:C;E^z>=d^L>=d&&(x=ac(db(x),db(a)),Lb(x),z=ac(f,x),Lb(z),z=(E^0<=C?-1:1)*Ha(z[2]),g>z||g===z&&
(x[0]||x[1]))&&(k+=E^0<=C?1:-1);if(!y++)break;z=L;M=B;jc=P;x=a}}}b=(-1E-6>O||1E-6>O&&0>Xd)^k&1;p.length?(u||(e.polygonStart(),u=!0),Ja(p,Zc,b,c,e)):b&&(u||(e.polygonStart(),u=!0),e.lineStart(),c(null,null,1,e),e.lineEnd());u&&(e.polygonEnd(),u=!1);p=q=null},sphere:function(){e.polygonStart();e.lineStart();c(null,null,1,e);e.lineEnd();e.polygonEnd()}},p,I=vb(),r=b(I),u=!1,q,x;return t}}function Pd(a){return 1<a.length}function vb(){var a=[],b;return{lineStart:function(){a.push(b=[])},point:function(a,
c){b.push([a,c])},lineEnd:B,buffer:function(){var c=a;a=[];b=null;return c},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function Zc(a,b){return(0>(a=a.x)[0]?a[1]-bb-1E-6:bb-a[1])-(0>(b=b.x)[0]?b[1]-bb-1E-6:bb-b[1])}function mg(a){function b(a,b){return Math.cos(a)*Math.cos(b)>g}function c(a,b,c){var d=db(a),e=db(b),m=[1,0,0];e=ac(d,e);var f=$a(e,e);d=e[0];var n=f-d*d;if(!n)return!c&&a;f=g*f/n;n=-g*d/n;d=ac(m,e);m=ab(m,f);e=ab(e,n);bc(m,e);e=$a(m,d);f=$a(d,d);n=e*e-f*($a(m,m)-
1);if(!(0>n)){var h=Math.sqrt(n);n=ab(d,(-e-h)/f);bc(n,m);n=Cb(n);if(!c)return n;c=a[0];var k=b[0];a=a[1];b=b[1];if(k<c){var O=c;c=k;k=O}var w=k-c,l=1E-6>aa(w-ha);!l&&b<a&&(O=a,a=b,b=O);if(l||1E-6>w?l?0<a+b^n[1]<(1E-6>aa(n[0]-c)?a:b):a<=n[1]&&n[1]<=b:w>ha^(c<=n[0]&&n[0]<=k))return b=ab(d,(-e+h)/f),bc(b,m),[n,Cb(b)]}}function d(b,c){var d=e?a:ha-a,g=0;b<-d?g|=1:b>d&&(g|=2);c<-d?g|=4:c>d&&(g|=8);return g}var g=Math.cos(a),e=0<g,m=1E-6<aa(g),f=wc(a,6*ja);return Ta(b,function(a){var g,f,n,h,k;return{lineStart:function(){h=
n=!1;k=1},point:function(O,w){var l=[O,w],A=b(O,w);w=e?A?0:d(O,w):A?d(O+(0>O?ha:-ha),w):0;!g&&(h=n=A)&&a.lineStart();A!==n&&(O=c(g,l),rc(g,O)||rc(l,O))&&(l[0]+=1E-6,l[1]+=1E-6,A=b(l[0],l[1]));if(A!==n)k=0,A?(a.lineStart(),O=c(l,g),a.point(O[0],O[1])):(O=c(g,l),a.point(O[0],O[1]),a.lineEnd()),g=O;else if(m&&g&&e^A){var t;w&f||!(t=c(l,g,!0))||(k=0,e?(a.lineStart(),a.point(t[0][0],t[0][1]),a.point(t[1][0],t[1][1]),a.lineEnd()):(a.point(t[1][0],t[1][1]),a.lineEnd(),a.lineStart(),a.point(t[0][0],t[0][1])))}!A||
g&&rc(g,l)||a.point(l[0],l[1]);g=l;n=A;f=w},lineEnd:function(){n&&a.lineEnd();g=null},clean:function(){return k|(h&&n)<<1}}},f,e?[0,-a]:[-ha,a-ha])}function vc(a,b,c,d){return function(g){var e=g.a,m=g.b,f=e.x;e=e.y;var n=0,h=1,k=m.x-f;m=m.y-e;var O=a-f;if(k||!(0<O)){O/=k;if(0>k){if(O<n)return;O<h&&(h=O)}else if(0<k){if(O>h)return;O>n&&(n=O)}O=c-f;if(k||!(0>O)){O/=k;if(0>k){if(O>h)return;O>n&&(n=O)}else if(0<k){if(O<n)return;O<h&&(h=O)}O=b-e;if(m||!(0<O)){O/=m;if(0>m){if(O<n)return;O<h&&(h=O)}else if(0<
m){if(O>h)return;O>n&&(n=O)}O=d-e;if(m||!(0>O)){O/=m;if(0>m){if(O>h)return;O>n&&(n=O)}else if(0<m){if(O<n)return;O<h&&(h=O)}0<n&&(g.a={x:f+n*k,y:e+n*m});1>h&&(g.b={x:f+h*k,y:e+h*m});return g}}}}}}function ng(a,b,c,d){function g(d,g){return 1E-6>aa(d[0]-a)?0<g?0:3:1E-6>aa(d[0]-c)?0<g?2:1:1E-6>aa(d[1]-b)?0<g?1:0:0<g?3:2}function e(a,b){return m(a.x,b.x)}function m(a,b){var c=g(a,1),d=g(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(f){function n(e,f,
n,h){var O=0,k=0;if(null==e||(O=g(e,n))!==(k=g(f,n))||0>m(e,f)^0<n){do h.point(0===O||3===O?a:c,1<O?d:b);while((O=(O+n+4)%4)!==k)}else h.point(f[0],f[1])}function h(g,e){a<=g&&g<=c&&b<=e&&e<=d&&f.point(g,e)}function O(g,e){g=Math.max(-1E9,Math.min(1E9,g));e=Math.max(-1E9,Math.min(1E9,e));var m=a<=g&&g<=c&&b<=e&&e<=d;t&&p.push([g,e]);if(jc)r=g,u=e,q=m,jc=!1,m&&(f.lineStart(),f.point(g,e));else if(m&&M)f.point(g,e);else{var n={a:{x:x,y:z},b:{x:g,y:e}};l(n)?(M||(f.lineStart(),f.point(n.a.x,n.a.y)),f.point(n.b.x,
n.b.y),m||f.lineEnd(),y=!1):m&&(f.lineStart(),f.point(g,e),y=!1)}x=g;z=e;M=m}var k=f,w=vb(),l=vc(a,b,c,d),A,t,p,I={point:h,lineStart:function(){I.point=O;t&&t.push(p=[]);jc=!0;M=!1;x=z=NaN},lineEnd:function(){A&&(O(r,u),q&&M&&w.rejoin(),A.push(w.buffer()));I.point=h;M&&f.lineEnd()},polygonStart:function(){f=w;A=[];t=[];y=!0},polygonEnd:function(){f=k;A=D.merge(A);var b=[a,d];for(var c=0,g=t.length,m=b[1],h=0;h<g;++h)for(var O=1,w=t[h],l=w.length,I=w[0],r;O<l;++O)r=w[O],I[1]<=m?r[1]>m&&0<Ea(I,r,b)&&
++c:r[1]<=m&&0>Ea(I,r,b)&&--c,I=r;b=0!==c;c=y&&b;g=A.length;if(c||g)f.polygonStart(),c&&(f.lineStart(),n(null,null,1,f),f.lineEnd()),g&&Ja(A,e,b,n,f),f.polygonEnd();A=t=p=null}},r,u,q,x,z,M,jc,y;return I}}function Qd(a){var b=0,c=ha/3,d=ic(a);a=d(b,c);a.parallels=function(a){return arguments.length?d(b=a[0]*ha/180,c=a[1]*ha/180):[b/ha*180,c/ha*180]};return a}function Rd(a,b){function c(a,b){b=Math.sqrt(g-2*d*Math.sin(b))/d;return[b*Math.sin(a*=d),e-b*Math.cos(a)]}a=Math.sin(a);var d=(a+Math.sin(b))/
2,g=1+a*(2*d-a),e=Math.sqrt(g)/d;c.invert=function(a,b){b=e-b;return[Math.atan2(a,b)/d,Ha((g-(a*a+b*b)*d*d)/(2*d))]};return c}function Sd(){function a(a,b){yi+=g*a-d*b;d=a;g=b}var b,c,d,g;Ye.point=function(e,m){Ye.point=a;b=d=e;c=g=m};Ye.lineEnd=function(){a(b,c)}}function sf(){function a(a,b){m.push("M",a,",",b,e)}function b(a,b){m.push("M",a,",",b);f.point=c}function c(a,b){m.push("L",a,",",b)}function d(){f.point=a}function g(){m.push("Z")}var e=tf(4.5),m=[],f={point:a,lineStart:function(){f.point=
b},lineEnd:d,polygonStart:function(){f.lineEnd=g},polygonEnd:function(){f.lineEnd=d;f.point=a},pointRadius:function(a){e=tf(a);return f},result:function(){if(m.length){var a=m.join("");m=[];return a}}};return f}function tf(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function S(a,b){Rb+=a;qg+=b;++wd}function sb(){function a(a,d){var g=a-b,e=d-c;g=Math.sqrt(g*g+e*e);Xe+=g*(b+a)/2;Df+=g*(c+d)/2;Yd+=g;S(b=a,c=d)}var b,c;xd.point=function(d,g){xd.point=a;S(b=d,c=g)}}function uf(){xd.point=
S}function og(){function a(a,b){var c=a-d,e=b-g;c=Math.sqrt(c*c+e*e);Xe+=c*(d+a)/2;Df+=c*(g+b)/2;Yd+=c;c=g*a-d*b;Ef+=c*(d+a);ue+=c*(g+b);Ff+=3*c;S(d=a,g=b)}var b,c,d,g;xd.point=function(e,m){xd.point=a;S(b=d=e,c=g=m)};xd.lineEnd=function(){a(b,c)}}function Td(a){function b(b,c){a.moveTo(b+m,c);a.arc(b,c,m,0,ec)}function c(b,c){a.moveTo(b,c);f.point=d}function d(b,c){a.lineTo(b,c)}function g(){f.point=b}function e(){a.closePath()}var m=4.5,f={point:b,lineStart:function(){f.point=c},lineEnd:g,polygonStart:function(){f.lineEnd=
e},polygonEnd:function(){f.lineEnd=g;f.point=b},pointRadius:function(a){m=a;return f},result:B};return f}function We(a){function b(a){return(f?d:c)(a)}function c(b){return Ne(b,function(c,d){c=a(c,d);b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d);b.point(c[0],c[1])}function d(){r=NaN;M.point=e;b.lineStart()}function e(c,d){var e=db([c,d]);d=a(c,d);g(r,u,I,q,x,z,r=d[0],u=d[1],I=c,q=e[0],x=e[1],z=e[2],f,b);b.point(r,u)}function m(){M.point=c;b.lineEnd()}function n(){d();M.point=h;M.lineEnd=
k}function h(a,b){e(O=a,b);w=r;l=u;A=q;t=x;p=z;M.point=e}function k(){g(r,u,I,q,x,z,w,l,O,A,t,p,f,b);M.lineEnd=m;m()}var O,w,l,A,t,p,I,r,u,q,x,z,M={point:c,lineStart:d,lineEnd:m,polygonStart:function(){b.polygonStart();M.lineStart=n},polygonEnd:function(){b.polygonEnd();M.lineStart=d}};return M}function g(b,c,d,f,n,h,k,O,w,l,A,t,p,I){var r=k-b,u=O-c,q=r*r+u*u;if(q>4*e&&p--){var x=f+l,z=n+A,M=h+t,y=Math.sqrt(x*x+z*z+M*M),jc=Math.asin(M/=y),L=1E-6>aa(aa(M)-1)||1E-6>aa(d-w)?(d+w)/2:Math.atan2(z,x),P=
a(L,jc);jc=P[0];P=P[1];var B=jc-b,C=P-c,Jb=u*B-r*C;if(Jb*Jb/q>e||.3<aa((r*B+u*C)/q-.5)||f*l+n*A+h*t<m)g(b,c,d,f,n,h,jc,P,L,x/=y,z/=y,M,p,I),I.point(jc,P),g(jc,P,L,x,z,M,k,O,w,l,A,t,p,I)}}var e=.5,m=Math.cos(30*ja),f=16;b.precision=function(a){if(!arguments.length)return Math.sqrt(e);f=0<(e=a*a)&&16;return b};return b}function vf(a){var b=We(function(b,c){return a([b*Oa,c*Oa])});return function(a){return $c(b(a))}}function Qb(a){this.stream=a}function Ne(a,b){return{point:b,sphere:function(){a.sphere()},
lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Db(a){return ic(function(){return a})()}function ic(a){function b(a){a=f(a[0]*ja,a[1]*ja);return[a[0]*h+I,r-a[1]*h]}function c(a){return(a=f.invert((a[0]-I)/h,(r-a[1])/h))&&[a[0]*Oa,a[1]*Oa]}function d(){f=uc(m=Mb(A,t,p),e);var a=e(O,l);I=k-a[0]*h;r=w+a[1]*h;return g()}function g(){M&&(M.valid=!1,M=null);return b}var e,m,f,n=We(function(a,b){a=
e(a,b);return[a[0]*h+I,r-a[1]*h]}),h=150,k=480,w=250,O=0,l=0,A=0,t=0,p=0,I,r,u=Rh,x=Sa,q=null,z=null,M;b.stream=function(a){M&&(M.valid=!1);M=$c(u(m,n(x(a))));M.valid=!0;return M};b.clipAngle=function(a){if(!arguments.length)return q;u=null==a?(q=a,Rh):mg((q=+a)*ja);return g()};b.clipExtent=function(a){if(!arguments.length)return z;x=(z=a)?ng(a[0][0],a[0][1],a[1][0],a[1][1]):Sa;return g()};b.scale=function(a){if(!arguments.length)return h;h=+a;return d()};b.translate=function(a){if(!arguments.length)return[k,
w];k=+a[0];w=+a[1];return d()};b.center=function(a){if(!arguments.length)return[O*Oa,l*Oa];O=a[0]%360*ja;l=a[1]%360*ja;return d()};b.rotate=function(a){if(!arguments.length)return[A*Oa,t*Oa,p*Oa];A=a[0]%360*ja;t=a[1]%360*ja;p=2<a.length?a[2]%360*ja:0;return d()};D.rebind(b,n,"precision");return function(){e=a.apply(this,arguments);b.invert=e.invert&&c;return d()}}function $c(a){return Ne(a,function(b,c){a.point(b*ja,c*ja)})}function ad(a,b){return[a,b]}function Oe(a,b){return[a>ha?a-ec:a<-ha?a+ec:
a,b]}function Mb(a,b,c){return a?b||c?uc(bd(a),qe(b,c)):bd(a):b||c?qe(b,c):Oe}function pg(a){return function(b,c){return b+=a,[b>ha?b-ec:b<-ha?b+ec:b,c]}}function bd(a){var b=pg(a);b.invert=pg(-a);return b}function qe(a,b){function c(a,b){var c=Math.cos(b),f=Math.cos(a)*c;a=Math.sin(a)*c;b=Math.sin(b);c=b*d+f*g;return[Math.atan2(a*e-c*m,f*d-b*g),Ha(c*e+a*m)]}var d=Math.cos(a),g=Math.sin(a),e=Math.cos(b),m=Math.sin(b);c.invert=function(a,b){var c=Math.cos(b),f=Math.cos(a)*c;a=Math.sin(a)*c;b=Math.sin(b);
c=b*e-a*m;return[Math.atan2(a*e+b*m,f*d+c*g),Ha(c*d-f*g)]};return c}function wc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(g,e,m,f){var n=m*b;if(null!=g){if(g=xc(c,g),e=xc(c,e),0<m?g<e:g>e)g+=m*ec}else g=a+m*ec,e=a-.5*n;for(var h;0<m?g>e:g<e;g-=n)f.point((h=Cb([c,-d*Math.cos(g),-d*Math.sin(g)]))[0],h[1])}}function xc(a,b){b=db(b);b[0]-=a;Lb(b);a=Qa(-b[1]);return((0>-b[2]?-a:a)+2*Math.PI-1E-6)%(2*Math.PI)}function Jc(a,b,c){var d=D.range(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[a,
b]})}}function ud(a,b,c){var d=D.range(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function cd(a){return a.source}function yc(a){return a.target}function wf(a,b,c,d){var g=Math.cos(b),e=Math.sin(b),m=Math.cos(d),f=Math.sin(d),n=g*Math.cos(a),h=g*Math.sin(a),k=m*Math.cos(c),w=m*Math.sin(c),O=2*Math.asin(Math.sqrt(W(d-b)+g*m*W(c-a))),l=1/Math.sin(O);c=O?function(a){var b=Math.sin(a*=O)*l;a=Math.sin(O-a)*l;var c=a*n+b*k,d=a*h+b*w;return[Math.atan2(d,c)*Oa,Math.atan2(a*
e+b*f,Math.sqrt(c*c+d*d))*Oa]}:function(){return[a*Oa,b*Oa]};c.distance=O;return c}function Kb(a,b){function c(b,c){var d=Math.cos(c),g=a(Math.cos(b)*d);return[g*d*Math.sin(b),g*Math.sin(c)]}c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),g=b(d),e=Math.sin(g);return[Math.atan2(a*e,d*Math.cos(g)),Math.asin(d&&c*e/d)]};return c}function na(a,b){function c(a,b){0<e?b<-bb+1E-6&&(b=-bb+1E-6):b>bb-1E-6&&(b=bb-1E-6);b=e/Math.pow(Math.tan(ha/4+b/2),g);return[b*Math.sin(g*a),e-b*Math.cos(g*a)]}var d=Math.cos(a),
g=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(Math.tan(ha/4+b/2)/Math.tan(ha/4+a/2)),e=d*Math.pow(Math.tan(ha/4+a/2),g)/g;if(!g)return Ub;c.invert=function(a,b){b=e-b;return[Math.atan2(a,b)/g,2*Math.atan(Math.pow(e/((0<g?1:0>g?-1:0)*Math.sqrt(a*a+b*b)),1/g))-bb]};return c}function He(a,b){function c(a,b){b=e-b;return[b*Math.sin(g*a),e-b*Math.cos(g*a)]}var d=Math.cos(a),g=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),e=d/g+a;if(1E-6>aa(g))return ad;c.invert=function(a,b){b=e-b;return[Math.atan2(a,
b)/g,e-(0<g?1:0>g?-1:0)*Math.sqrt(a*a+b*b)]};return c}function Ub(a,b){return[a,Math.log(Math.tan(ha/4+b/2))]}function id(a){var b=Db(a),c=b.scale,d=b.translate,g=b.clipExtent,e;b.scale=function(){var a=c.apply(b,arguments);return a===b?e?b.clipExtent(null):b:a};b.translate=function(){var a=d.apply(b,arguments);return a===b?e?b.clipExtent(null):b:a};b.clipExtent=function(a){var m=g.apply(b,arguments);if(m===b){if(e=null==a){var f=ha*c(),n=d();g([[n[0]-f,n[1]-f],[n[0]+f,n[1]+f]])}}else e&&(m=null);
return m};return b.clipExtent(null)}function Tf(a,b){return[Math.log(Math.tan(ha/4+b/2)),-a]}function ua(a){return a[0]}function ld(a){return a[1]}function md(a){for(var b=a.length,c=[0,1],d=2,g=2;g<b;g++){for(;1<d&&0>=Ea(a[c[d-2]],a[c[d-1]],a[g]);)--d;c[d++]=g}return c.slice(0,d)}function hf(a,b){return a[0]-b[0]||a[1]-b[1]}function Ie(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Dg(a,b,c,d){var g=a[0],e=c[0],m=b[0]-g,f=d[0]-e;a=a[1];c=c[1];b=b[1]-a;d=d[1]-c;e=(f*(a-c)-d*
(g-e))/(d*m-f*b);return[g+e*m,a+e*b]}function Gd(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function ri(){Xf(this);this.edge=this.site=this.circle=null}function Eg(a){var b=nh.pop()||new ri;b.site=a;return b}function Ig(a){Ec(a);Rg.remove(a);nh.push(a);Xf(a)}function Jg(a,b){var c=a.site,d=c.x,g=c.y,e=g-b;if(!e)return d;a=a.P;if(!a)return-Infinity;c=a.site;a=c.x;c=c.y;b=c-b;if(!b)return a;var m=a-d,f=1/e-1/b,n=m/b;return f?(-n+Math.sqrt(n*n-2*f*(m*m/(-2*b)-c+b/2+g-e/2)))/f+d:(d+a)/
2}function oe(a){this.site=a;this.edges=[]}function gh(a,b){return b.angle-a.angle}function nd(){Xf(this);this.x=this.y=this.arc=this.site=this.cy=null}function Kd(a){var b=a.P,c=a.N;if(b&&c){var d=b.site;b=a.site;var g=c.site;if(d!==g){c=b.x;var e=b.y,m=d.x-c,f=d.y-e;d=g.x-c;g=g.y-e;var n=2*(m*g-f*d);if(!(-1E-12<=n)){var h=m*m+f*f,k=d*d+g*g;f=(g*h-f*k)/n;m=(m*k-d*h)/n;g=m+e;e=$i.pop()||new nd;e.arc=a;e.site=b;e.x=f+c;e.y=g+Math.sqrt(f*f+m*m);e.cy=g;a.circle=e;a=null;for(b=oh._;b;)if(e.y<b.y||e.y===
b.y&&e.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}oh.insert(a,e);a||(ph=e)}}}}function Ec(a){var b=a.circle;b&&(b.P||(ph=b.N),oh.remove(b),$i.push(b),Xf(b),a.circle=null)}function Ld(a,b){var c=a.b;if(c)return!0;var d=a.a;c=b[0][0];var g=b[1][0],e=b[0][1];b=b[1][1];var m=a.l,f=a.r,n=m.x;m=m.y;var h=f.x;f=f.y;var k=(n+h)/2;if(f===m){if(k<c||k>=g)return;if(n>h){if(!d)d={x:k,y:e};else if(d.y>=b)return;c={x:k,y:b}}else{if(!d)d={x:k,y:b};else if(d.y<e)return;c={x:k,y:e}}}else{var w=
(n-h)/(f-m);k=(m+f)/2-w*k;if(-1>w||1<w)if(n>h){if(!d)d={x:(e-k)/w,y:e};else if(d.y>=b)return;c={x:(b-k)/w,y:b}}else{if(!d)d={x:(b-k)/w,y:b};else if(d.y<e)return;c={x:(e-k)/w,y:e}}else if(m<f){if(!d)d={x:c,y:w*c+k};else if(d.x>=g)return;c={x:g,y:w*g+k}}else{if(!d)d={x:g,y:w*g+k};else if(d.x<c)return;c={x:c,y:w*c+k}}}a.a=d;a.b=c;return!0}function Wf(a,b){this.l=a;this.r=b;this.a=this.b=null}function Tc(a,b,c,d){var g=new Wf(a,b);rg.push(g);c&&Yf(g,a,b,c);d&&Yf(g,b,a,d);Fb[a.i].edges.push(new ag(g,a,
b));Fb[b.i].edges.push(new ag(g,b,a));return g}function Gg(a,b,c){a=new Wf(a,null);a.a=b;a.b=c;rg.push(a);return a}function Yf(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function ag(a,b,c){var d=a.a,g=a.b;this.edge=a;this.site=b;this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(g.x-d.x,d.y-g.y):Math.atan2(d.x-g.x,g.y-d.y)}function Se(){this._=null}function Xf(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function lf(a,b){var c=b.R,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.R=c.L;b.R&&
(b.R.U=b);c.L=b}function ne(a,b){var c=b.L,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function Hg(a){for(;a.L;)a=a.L;return a}function mf(a,b){var c=a.sort(bg).pop(),d;rg=[];Fb=Array(a.length);Rg=new Se;for(oh=new Se;;){var g=ph;if(c&&(!g||c.y<g.y||c.y===g.y&&c.x<g.x)){if(c.x!==d||c.y!==e){Fb[c.i]=new oe(c);var e=d=void 0;g=c;for(var m=g.x,f=g.y,n=Rg._;n;){var h=Jg(n,f)-m;if(1E-6<h)n=n.L;else{var k=n;var w=f;var l=k.N;l?w=Jg(l,w):(k=k.site,w=k.y===w?k.x:Infinity);w=
m-w;if(1E-6<w){if(!n.R){e=n;break}n=n.R}else{-1E-6<h?(e=n.P,d=n):-1E-6<w?(e=n,d=n.N):e=d=n;break}}}h=Eg(g);Rg.insert(e,h);if(e||d)if(e===d)Ec(e),d=Eg(e.site),Rg.insert(h,d),h.edge=d.edge=Tc(e.site,h.site),Kd(e),Kd(d);else if(d){Ec(e);Ec(d);m=e.site;n=m.x;w=m.y;k=g.x-n;l=g.y-w;f=d.site;var A=f.x-n,O=f.y-w,t=2*(k*O-l*A),p=k*k+l*l,I=A*A+O*O;n={x:(O*p-l*I)/t+n,y:(k*I-A*p)/t+w};Yf(d.edge,m,f,n);h.edge=Tc(m,g,null,n);d.edge=Tc(g,f,null,n);Kd(e);Kd(d)}else h.edge=Tc(e.site,h.site);d=c.x;e=c.y}c=a.pop()}else if(g){f=
g.arc;g=f.circle;m=g.x;n=g.cy;g={x:m,y:n};k=f.P;w=f.N;h=[f];Ig(f);for(f=k;f.circle&&1E-6>aa(m-f.circle.x)&&1E-6>aa(n-f.circle.cy);)k=f.P,h.unshift(f),Ig(f),f=k;h.unshift(f);Ec(f);for(k=w;k.circle&&1E-6>aa(m-k.circle.x)&&1E-6>aa(n-k.circle.cy);)w=k.N,h.push(k),Ig(k),k=w;h.push(k);Ec(k);n=h.length;for(m=1;m<n;++m)k=h[m],f=h[m-1],Yf(k.edge,f.site,k.site,g);f=h[0];k=h[n-1];k.edge=Tc(f.site,k.site,null,g);Kd(f);Kd(k)}else break}if(b){a=rg;c=vc(b[0][0],b[0][1],b[1][0],b[1][1]);for(d=a.length;d--;)if(e=
a[d],!Ld(e,b)||!c(e)||1E-6>aa(e.a.x-e.b.x)&&1E-6>aa(e.a.y-e.b.y))e.a=e.b=null,a.splice(d,1);a=b[0][0];c=b[1][0];d=b[0][1];b=b[1][1];m=Fb;for(f=m.length;f--;)if((n=m[f])&&n.prepare())for(k=n.edges,l=k.length,w=0;w<l;)if(A=k[w].end(),g=A.x,h=A.y,O=k[++w%l].start(),e=O.x,O=O.y,1E-6<aa(g-e)||1E-6<aa(h-O))k.splice(w,0,new ag(Gg(n.site,A,1E-6>aa(g-a)&&1E-6<b-h?{x:a,y:1E-6>aa(e-a)?O:b}:1E-6>aa(h-b)&&1E-6<c-g?{x:1E-6>aa(O-b)?e:c,y:b}:1E-6>aa(g-c)&&1E-6<h-d?{x:c,y:1E-6>aa(e-c)?O:d}:1E-6>aa(h-d)&&1E-6<g-a?
{x:1E-6>aa(O-d)?e:a,y:d}:null),n.site,null)),++l}b={cells:Fb,edges:rg};Rg=oh=rg=Fb=null;return b}function bg(a,b){return b.y-a.y||b.x-a.x}function hh(a){return a.x}function Lh(a){return a.y}function Nh(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function cg(a,b,c,d,g,e){if(!a(b,c,d,g,e)){var m=.5*(c+g),f=.5*(d+e);b=b.nodes;b[0]&&cg(a,b[0],c,d,m,f);b[1]&&cg(a,b[1],m,d,g,f);b[2]&&cg(a,b[2],c,f,m,e);b[3]&&cg(a,b[3],m,f,g,e)}}function Te(a,b,c,d,g,e,m){var f=Infinity,n;(function kh(a,h,k,w,l){if(!(h>
e||k>m||w<d||l<g)){if(A=a.point){var A,O=b-A[0],t=c-A[1];O=O*O+t*t;O<f&&(O=Math.sqrt(f=O),d=b-O,g=c-O,e=b+O,m=c+O,n=A)}A=a.nodes;O=.5*(h+w);t=.5*(k+l);for(var p=(c>=t)<<1|b>=O,I=p+4;p<I;++p)if(a=A[p&3])switch(p&3){case 0:kh(a,h,k,O,t);break;case 1:kh(a,O,k,w,t);break;case 2:kh(a,h,t,O,l);break;case 3:kh(a,O,t,w,l)}}})(a,d,g,e,m);return n}function pf(a,b){a=D.rgb(a);b=D.rgb(b);var c=a.r,d=a.g,g=a.b,e=b.r-c,m=b.g-d,f=b.b-g;return function(a){return"#"+oa(Math.round(c+e*a))+oa(Math.round(d+m*a))+oa(Math.round(g+
f*a))}}function Kg(a,b){var c={},d={},g;for(g in a)g in b?c[g]=tc(a[g],b[g]):d[g]=a[g];for(g in b)g in a||(d[g]=b[g]);return function(a){for(g in c)d[g]=c[g](a);return d}}function sc(a,b){a=+a;b=+b;return function(c){return a*(1-c)+b*c}}function qf(a,b){var c=zi.lastIndex=Sh.lastIndex=0,d,g,e,m=-1,f=[],n=[];a+="";for(b+="";(d=zi.exec(a))&&(g=Sh.exec(b));)(e=g.index)>c&&(e=b.slice(c,e),f[m]?f[m]+=e:f[++m]=e),(d=d[0])===(g=g[0])?f[m]?f[m]+=g:f[++m]=g:(f[++m]=null,n.push({i:m,x:sc(d,g)})),c=Sh.lastIndex;
c<b.length&&(e=b.slice(c),f[m]?f[m]+=e:f[++m]=e);return 2>f.length?n[0]?(b=n[0].x,function(a){return b(a)+""}):function(){return b}:(b=n.length,function(a){for(var c=0,d;c<b;++c)f[(d=n[c]).i]=d.x(a);return f.join("")})}function tc(a,b){for(var c=D.interpolators.length,d;0<=--c&&!(d=D.interpolators[c](a,b)););return d}function dg(a,b){var c=[],d=[],g=a.length,e=b.length,m=Math.min(a.length,b.length),f;for(f=0;f<m;++f)c.push(tc(a[f],b[f]));for(;f<g;++f)d[f]=a[f];for(;f<e;++f)d[f]=b[f];return function(a){for(f=
0;f<m;++f)d[f]=c[f](a);return d}}function ka(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function Uc(a){return function(b){return 1-a(1-b)}}function eg(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function od(a){return a*a}function Wa(a){return a*a*a}function Qe(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function Fc(a){return 1-Math.cos(a*bb)}function Vc(a){return Math.pow(2,10*(a-1))}function fg(a){return 1-Math.sqrt(1-a*a)}function gg(a){return a<
1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function fh(a,b){b-=a;return function(c){return Math.round(a+b*c)}}function Id(a){var b=[a.a,a.b],c=[a.c,a.d],d=Rc(b),g=b[0]*c[0]+b[1]*c[1],e=-g;c[0]+=e*b[0];c[1]+=e*b[1];e=Rc(c)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,g*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Oa;this.translate=[a.e,a.f];this.scale=[d,e];this.skew=e?Math.atan2(g,e)*Oa:0}
function Rc(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=b);return b}function hg(a,b){var c=[],d=[],g=D.transform(a),e=D.transform(b);b=g.translate;a=e.translate;var m=g.rotate,f=e.rotate,n=g.skew,h=e.skew;g=g.scale;e=e.scale;b[0]!=a[0]||b[1]!=a[1]?(c.push("translate(",null,",",null,")"),d.push({i:1,x:sc(b[0],a[0])},{i:3,x:sc(b[1],a[1])})):a[0]||a[1]?c.push("translate("+a+")"):c.push("");m!=f?(180<m-f?f+=360:180<f-m&&(m+=360),d.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:sc(m,f)})):
f&&c.push(c.pop()+"rotate("+f+")");n!=h?d.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:sc(n,h)}):h&&c.push(c.pop()+"skewX("+h+")");if(g[0]!=e[0]||g[1]!=e[1]){var k=c.push(c.pop()+"scale(",null,",",null,")");d.push({i:k-4,x:sc(g[0],e[0])},{i:k-2,x:sc(g[1],e[1])})}else 1==e[0]&&1==e[1]||c.push(c.pop()+"scale("+e+")");k=d.length;return function(a){for(var b=-1,g;++b<k;)c[(g=d[b]).i]=g.x(a);return c.join("")}}function ih(a,b){b=(b-=a=+a)||1/b;return function(c){return(c-a)/b}}function pd(a,b){b=(b-=
a=+a)||1/b;return function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function jb(a){var b=a.source;a=a.target;var c=a;if(b===c)var d=b;else{d=Lg(b);c=Lg(c);for(var g=d.pop(),e=c.pop(),m=null;g===e;)m=g,g=d.pop(),e=c.pop();d=m}for(c=[b];b!==d;)b=b.parent,c.push(b);for(b=c.length;a!==d;)c.splice(b,0,a),a=a.parent;return c}function Lg(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;b.push(a);return b}function Kh(a){a.fixed|=2}function jh(a){a.fixed&=-7}function Zf(a){a.fixed|=4;a.px=a.x;
a.py=a.y}function Bb(a){a.fixed&=-5}function Oh(a,b,c){var d=0,g=0;a.charge=0;if(!a.leaf)for(var e=a.nodes,m=e.length,f=-1,n;++f<m;)n=e[f],null!=n&&(Oh(n,b,c),a.charge+=n.charge,d+=n.charge*n.cx,g+=n.charge*n.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,g+=b*a.point.y);a.cx=d/a.charge;a.cy=g/a.charge}function cc(a,b){D.rebind(a,b,"sort","children","value");a.nodes=a;a.links=Fg;return a}function ke(a,b){for(var c=
[a];null!=(a=c.pop());)if(b(a),(g=a.children)&&(d=g.length))for(var d,g;0<=--d;)c.push(g[d])}function rb(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(e=a.children)&&(g=e.length)){a=-1;for(var g,e;++a<g;)c.push(e[a])}for(;null!=(a=d.pop());)b(a)}function le(a){return a.children}function kf(a){return a.value}function Jh(a,b){return b.value-a.value}function Fg(a){return D.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function Na(a){return a.x}
function Xb(a){return a.y}function Vf(a,b,c){a.y0=b;a.y=c}function Pe(a){return D.range(a.length)}function Hd(a){var b=-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function Dc(a){for(var b=1,c=0,d=a[0][1],g,e=a.length;b<e;++b)(g=a[b][1])>d&&(c=b,d=g);return c}function nf(a){return a.reduce($f,0)}function $f(a,b){return a+b[1]}function Mh(a,b){return of(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function of(a,b){var c=-1,d=+a[0];a=(a[1]-d)/b;for(var g=[];++c<=b;)g[c]=a*c+d;return g}function fa(a){return[D.min(a),
D.max(a)]}function Jd(a,b){return a.value-b.value}function Ob(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function Sc(a,b){a._pack_next=b;b._pack_prev=a}function Re(a,b){var c=b.x-a.x,d=b.y-a.y;a=a.r+b.r;return.999*a*a>c*c+d*d}function Sg(a){function b(a){d=Math.min(a.x-a.r,d);g=Math.max(a.x+a.r,g);e=Math.min(a.y-a.r,e);m=Math.max(a.y+a.r,m)}if((c=a.children)&&(k=c.length)){var c,d=Infinity,g=-Infinity,e=Infinity,m=-Infinity,f,n,h,k;c.forEach(Th);var w=c[0];
w.x=-w.r;w.y=0;b(w);if(1<k){var l=c[1];l.x=l.r;l.y=0;b(l);if(2<k){var A=c[2];qh(w,l,A);b(A);Ob(w,A);w._pack_prev=A;Ob(A,l);l=w._pack_next;for(f=3;f<k;f++){qh(w,l,A=c[f]);var O=0,t=1,p=1;for(n=l._pack_next;n!==l;n=n._pack_next,t++)if(Re(n,A)){O=1;break}if(1==O)for(h=w._pack_prev;h!==n._pack_prev&&!Re(h,A);h=h._pack_prev,p++);O?(t<p||t==p&&l.r<w.r?Sc(w,l=n):Sc(w=h,l),f--):(Ob(w,A),l=A,b(A))}}}w=(d+g)/2;l=(e+m)/2;for(f=n=0;f<k;f++)A=c[f],A.x-=w,A.y-=l,n=Math.max(n,A.r+Math.sqrt(A.x*A.x+A.y*A.y));a.r=
n;c.forEach(Ai)}}function Th(a){a._pack_next=a._pack_prev=a}function Ai(a){delete a._pack_next;delete a._pack_prev}function Uh(a,b,c,d){var g=a.children;a.x=b+=d*a.x;a.y=c+=d*a.y;a.r*=d;if(g){a=-1;for(var e=g.length;++a<e;)Uh(g[a],b,c,d)}}function qh(a,b,c){var d=a.r+c.r,g=b.x-a.x,e=b.y-a.y;if(d&&(g||e)){var m=b.r+c.r,f=g*g+e*e;m*=m;d*=d;b=.5+(d-m)/(2*f);m=Math.sqrt(Math.max(0,2*m*(d+f)-(d-=f)*d-m*m))/(2*f);c.x=a.x+b*g+m*e;c.y=a.y+b*e-m*g}else c.x=a.x+d,c.y=a.y}function Tg(a,b){return a.parent==b.parent?
1:2}function $d(a){var b=a.children;return b.length?b[0]:a.t}function Ze(a){var b=a.children,c;return(c=b.length)?b[c-1]:a.t}function sg(a){return 1+D.max(a,function(a){return a.y})}function $e(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function nc(a){var b=a.children;return b&&b.length?nc(b[0]):a}function ae(a){var b=a.children,c;return b&&(c=b.length)?ae(b[c-1]):a}function Gb(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Gf(a,b){var c=a.x+b[3],d=a.y+b[0],g=a.dx-b[1]-b[3];a=a.dy-
b[0]-b[2];0>g&&(c+=g/2,g=0);0>a&&(d+=a/2,a=0);return{x:c,y:d,dx:g,dy:a}}function af(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function yd(a){return a.rangeExtent?a.rangeExtent():af(a.range())}function Vh(a,b,c,d){var g=c(a[0],a[1]),e=d(b[0],b[1]);return function(a){return e(g(a))}}function Hf(a,b){var c=0,d=a.length-1,g=a[c],e=a[d];if(e<g){var m=c;c=d;d=m;m=g;g=e;e=m}a[c]=b.floor(g);a[d]=b.ceil(e);return a}function Fa(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/
a)*a}}:aj}function eb(a,b,c,d){var g=[],e=[],m=0,f=Math.min(a.length,b.length)-1;a[f]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++m<=f;)g.push(c(a[m-1],a[m])),e.push(d(b[m-1],b[m]));return function(b){var c=D.bisect(a,b,1,f)-1;return e[c](g[c](b))}}function Hb(a,b,c,d){function g(){var g=2<Math.min(a.length,b.length)?eb:Vh,n=d?pd:ih;m=g(a,b,n,c);f=g(b,a,n,tc);return e}function e(a){return m(a)}var m,f;e.invert=function(a){return f(a)};e.domain=function(b){if(!arguments.length)return a;
a=b.map(Number);return g()};e.range=function(a){if(!arguments.length)return b;b=a;return g()};e.rangeRound=function(a){return e.range(a).interpolate(fh)};e.clamp=function(a){if(!arguments.length)return d;d=a;return g()};e.interpolate=function(a){if(!arguments.length)return c;c=a;return g()};e.ticks=function(b){return D.range.apply(D,we(a,b))};e.tickFormat=function(b,c){return oc(a,b,c)};e.nice=function(b){Hf(a,Fa(we(a,b)[2]));return g()};e.copy=function(){return Hb(a,b,c,d)};return g()}function rh(a,
b){return D.rebind(a,b,"range","rangeRound","interpolate","clamp")}function we(a,b){null==b&&(b=10);a=af(a);var c=a[1]-a[0],d=Math.pow(10,Math.floor(Math.log(c/b)/Math.LN10));b=b/c*d;.15>=b?d*=10:.35>=b?d*=5:.75>=b&&(d*=2);a[0]=Math.ceil(a[0]/d)*d;a[1]=Math.floor(a[1]/d)*d+.5*d;a[2]=d;return a}function oc(a,b,c){a=we(a,b);if(c){b=te.exec(c);b.shift();if("s"===b[8]){var d=D.formatPrefix(Math.max(aa(a[0]),aa(a[1])));b[7]||(b[7]="."+Ua(d.scale(a[2])));b[8]="f";c=D.format(b.join(""));return function(a){return c(d.scale(a))+
d.symbol}}b[7]||(b[7]="."+bf(b[8],a));c=b.join("")}else c=",."+Ua(a[2])+"f";return D.format(c)}function Ua(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function bf(a,b){var c=Ua(b[2]);return a in Wh?Math.abs(c-Ua(Math.max(aa(b[0]),aa(b[1]))))+ +("e"!==a):c-2*("%"===a)}function Ug(a,b,c,d){function g(a){return(c?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(b)}function e(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function m(b){return a(g(b))}m.invert=function(b){return e(a.invert(b))};m.domain=
function(b){if(!arguments.length)return d;c=0<=b[0];a.domain((d=b.map(Number)).map(g));return m};m.base=function(c){if(!arguments.length)return b;b=+c;a.domain(d.map(g));return m};m.nice=function(){var b=Hf(d.map(g),c?Math:bj);a.domain(b);d=b.map(e);return m};m.ticks=function(){var a=af(d),m=[],f=a[0];a=a[1];var n=Math.floor(g(f)),h=Math.ceil(g(a)),k=b%1?2:b;if(isFinite(h-n)){if(c){for(;n<h;n++)for(var w=1;w<k;w++)m.push(e(n)*w);m.push(e(n))}else for(m.push(e(n));n++<h;)for(w=k-1;0<w;w--)m.push(e(n)*
w);for(n=0;m[n]<f;n++);for(h=m.length;m[h-1]>a;h--);m=m.slice(n,h)}return m};m.tickFormat=function(a,b){if(!arguments.length)return Bi;2>arguments.length?b=Bi:"function"!==typeof b&&(b=D.format(b));var d=Math.max(.1,a/m.ticks().length),f=c?(n=1E-12,Math.ceil):(n=-1E-12,Math.floor),n;return function(a){return a/e(f(g(a)+n))<=d?b(a):""}};m.copy=function(){return Ug(a.copy(),b,c,d)};return rh(m,a)}function zd(a,b,c){function d(b){return a(g(b))}var g=xe(b),e=xe(1/b);d.invert=function(b){return e(a.invert(b))};
d.domain=function(b){if(!arguments.length)return c;a.domain((c=b.map(Number)).map(g));return d};d.ticks=function(a){return D.range.apply(D,we(c,a))};d.tickFormat=function(a,b){return oc(c,a,b)};d.nice=function(a){return d.domain(Hf(c,Fa(we(c,a)[2])))};d.exponent=function(m){if(!arguments.length)return b;g=xe(b=m);e=xe(1/b);a.domain(c.map(g));return d};d.copy=function(){return zd(a.copy(),b,c)};return rh(d,a)}function xe(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function Nc(a,
b){function d(c){return m[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%m.length]}function g(b,c){return D.range(a.length).map(function(a){return b+c*a})}var e,m,f;d.domain=function(g){if(!arguments.length)return a;a=[];e=new c;for(var m=-1,f=g.length,n;++m<f;)e.has(n=g[m])||e.set(n,a.push(n));return d[b.t].apply(d,b.a)};d.range=function(a){if(!arguments.length)return m;m=a;f=0;b={t:"range",a:arguments};return d};d.rangePoints=function(c,e){2>arguments.length&&(e=0);var n=c[0],h=c[1];h=2>
a.length?(n=(n+h)/2,0):(h-n)/(a.length-1+e);m=g(n+h*e/2,h);f=0;b={t:"rangePoints",a:arguments};return d};d.rangeRoundPoints=function(c,e){2>arguments.length&&(e=0);var n=c[0],h=c[1],k=2>a.length?(n=h=Math.round((n+h)/2),0):(h-n)/(a.length-1+e)|0;m=g(n+Math.round(k*e/2+(h-n-(a.length-1+e)*k)/2),k);f=0;b={t:"rangeRoundPoints",a:arguments};return d};d.rangeBands=function(c,e,n){2>arguments.length&&(e=0);3>arguments.length&&(n=e);var h=c[1]<c[0],k=c[h-0],w=(c[1-h]-k)/(a.length-e+2*n);m=g(k+w*n,w);h&&
m.reverse();f=w*(1-e);b={t:"rangeBands",a:arguments};return d};d.rangeRoundBands=function(c,e,n){2>arguments.length&&(e=0);3>arguments.length&&(n=e);var h=c[1]<c[0],k=c[h-0],w=c[1-h],l=Math.floor((w-k)/(a.length-e+2*n));m=g(k+Math.round((w-k-(a.length-e)*l)/2),l);h&&m.reverse();f=Math.round(l*(1-e));b={t:"rangeRoundBands",a:arguments};return d};d.rangeBand=function(){return f};d.rangeExtent=function(){return af(b.a[0])};d.copy=function(){return Nc(a,b)};return d.domain(a)}function sh(a,c){function d(){var b=
0,d=c.length;for(e=[];++b<d;)e[b-1]=D.quantile(a,b/d);return g}function g(a){if(!isNaN(a=+a))return c[D.bisect(e,a)]}var e;g.domain=function(c){if(!arguments.length)return a;a=c.map(f).filter(b).sort(h);return d()};g.range=function(a){if(!arguments.length)return c;c=a;return d()};g.quantiles=function(){return e};g.invertExtent=function(b){b=c.indexOf(b);return 0>b?[NaN,NaN]:[0<b?e[b-1]:a[0],b<e.length?e[b]:a[a.length-1]]};g.copy=function(){return sh(a,c)};return d()}function ye(a,b,c){function d(b){return c[Math.max(0,
Math.min(m,Math.floor(e*(b-a))))]}function g(){e=c.length/(b-a);m=c.length-1;return d}var e,m;d.domain=function(c){if(!arguments.length)return[a,b];a=+c[0];b=+c[c.length-1];return g()};d.range=function(a){if(!arguments.length)return c;c=a;return g()};d.invertExtent=function(b){b=c.indexOf(b);b=0>b?NaN:b/e+a;return[b,b+1/e]};d.copy=function(){return ye(a,b,c)};return g()}function If(a,b){function c(c){if(c<=c)return b[D.bisect(a,c)]}c.domain=function(b){if(!arguments.length)return a;a=b;return c};
c.range=function(a){if(!arguments.length)return b;b=a;return c};c.invertExtent=function(c){c=b.indexOf(c);return[a[c-1],a[c]]};c.copy=function(){return If(a,b)};return c}function Vg(a){function b(a){return+a}b.invert=b;b.domain=b.range=function(c){if(!arguments.length)return a;a=c.map(b);return b};b.ticks=function(b){return D.range.apply(D,we(a,b))};b.tickFormat=function(b,c){return oc(a,b,c)};b.copy=function(){return Vg(a)};return b}function Xh(){return 0}function ze(a){return a.innerRadius}function T(a){return a.outerRadius}
function wa(a){return a.startAngle}function zc(a){return a.endAngle}function th(a){return a&&a.padAngle}function Ad(a,b,c,d){return 0<(a-c)*b-(b-d)*a?0:1}function Ib(a,b,c,d,g){var e=a[0]-b[0],m=a[1]-b[1];g=(g?d:-d)/Math.sqrt(e*e+m*m);m*=g;e*=-g;var f=a[0]+m,n=a[1]+e,h=b[0]+m,k=b[1]+e;a=(f+h)/2;b=(n+k)/2;g=h-f;var w=k-n,l=g*g+w*w;d=c-d;k=f*k-h*n;var A=(0>w?-1:1)*Math.sqrt(d*d*l-k*k);f=(k*w-g*A)/l;n=(-k*g-w*A)/l;h=(k*w+g*A)/l;g=(-k*g+w*A)/l;w=f-a;l=n-b;a=h-a;b=g-b;w*w+l*l>a*a+b*b&&(f=h,n=g);return[[f-
m,n-e],[f*c/d,n*c/d]]}function uh(a){function b(b){function m(){n.push("M",e(a(h),f))}for(var n=[],h=[],k=-1,w=b.length,l,A=ra(c),t=ra(d);++k<w;)g.call(this,l=b[k],k)?h.push([+A.call(this,l,k),+t.call(this,l,k)]):h.length&&(m(),h=[]);h.length&&m();return n.length?n.join(""):null}var c=ua,d=ld,g=td,e=Yb,m=e.key,f=.7;b.x=function(a){if(!arguments.length)return c;c=a;return b};b.y=function(a){if(!arguments.length)return d;d=a;return b};b.defined=function(a){if(!arguments.length)return g;g=a;return b};
b.interpolate=function(a){if(!arguments.length)return m;m="function"===typeof a?e=a:(e=Yh.get(a)||Yb).key;return b};b.tension=function(a){if(!arguments.length)return f;f=a;return b};return b}function Yb(a){return a.join("L")}function cf(a){for(var b=0,c=a.length,d=a[0],g=[d[0],",",d[1]];++b<c;)g.push("V",(d=a[b])[1],"H",d[0]);return g.join("")}function tg(a){for(var b=0,c=a.length,d=a[0],g=[d[0],",",d[1]];++b<c;)g.push("H",(d=a[b])[0],"V",d[1]);return g.join("")}function be(a,b){if(1>b.length||a.length!=
b.length&&a.length!=b.length+2)return Yb(a);var c=a.length!=b.length,d="",g=a[0],e=a[1],m=b[0],f=m,n=1;c&&(d+="Q"+(e[0]-2*m[0]/3)+","+(e[1]-2*m[1]/3)+","+e[0]+","+e[1],g=a[1],n=2);if(1<b.length)for(f=b[1],e=a[n],n++,d+="C"+(g[0]+m[0])+","+(g[1]+m[1])+","+(e[0]-f[0])+","+(e[1]-f[1])+","+e[0]+","+e[1],g=2;g<b.length;g++,n++)e=a[n],f=b[g],d+="S"+(e[0]-f[0])+","+(e[1]-f[1])+","+e[0]+","+e[1];c&&(a=a[n],d+="Q"+(e[0]+2*f[0]/3)+","+(e[1]+2*f[1]/3)+","+a[0]+","+a[1]);return d}function yb(a,b){var c=[];b=
(1-b)/2;for(var d,g=a[0],e=a[1],m=1,f=a.length;++m<f;)d=g,g=e,e=a[m],c.push([b*(e[0]-d[0]),b*(e[1]-d[1])]);return c}function ug(a){if(3>a.length)return Yb(a);var b=1,c=a.length,d=a[0],g=d[0],e=d[1],m=[g,g,g,(d=a[1])[0]],f=[e,e,e,d[1]];g=[g,",",e,"L",pc(df,m),",",pc(df,f)];for(a.push(a[c-1]);++b<=c;)d=a[b],m.shift(),m.push(d[0]),f.shift(),f.push(d[1]),vg(g,m,f);a.pop();g.push("L",d);return g.join("")}function pc(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function vg(a,b,c){a.push("C",pc(Ci,
b),",",pc(Ci,c),",",pc(Di,b),",",pc(Di,c),",",pc(df,b),",",pc(df,c))}function gd(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Zh(a){for(var b,c=-1,d=a.length,g,e;++c<d;)b=a[c],g=b[0],e=b[1]-bb,b[0]=g*Math.cos(e),b[1]=g*Math.sin(e);return a}function Ae(a){function b(b){function n(){l.push("M",f(a(t),w),k,h(a(A.reverse()),w),"Z")}for(var l=[],A=[],t=[],p=-1,I=b.length,r,O=ra(c),u=ra(g),x=c===d?function(){return M}:ra(d),q=g===e?function(){return z}:ra(e),M,z;++p<I;)m.call(this,r=b[p],p)?(A.push([M=+O.call(this,
r,p),z=+u.call(this,r,p)]),t.push([+x.call(this,r,p),+q.call(this,r,p)])):A.length&&(n(),A=[],t=[]);A.length&&n();return l.length?l.join(""):null}var c=ua,d=ua,g=0,e=ld,m=td,f=Yb,n=f.key,h=f,k="L",w=.7;b.x=function(a){if(!arguments.length)return d;c=d=a;return b};b.x0=function(a){if(!arguments.length)return c;c=a;return b};b.x1=function(a){if(!arguments.length)return d;d=a;return b};b.y=function(a){if(!arguments.length)return e;g=e=a;return b};b.y0=function(a){if(!arguments.length)return g;g=a;return b};
b.y1=function(a){if(!arguments.length)return e;e=a;return b};b.defined=function(a){if(!arguments.length)return m;m=a;return b};b.interpolate=function(a){if(!arguments.length)return n;n="function"===typeof a?f=a:(f=Yh.get(a)||Yb).key;h=f.reverse||f;k=f.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return w;w=a;return b};return b}function Wg(a){return a.radius}function vh(a){return[a.x,a.y]}function wg(a){return function(){var b=a.apply(this,arguments),c=b[0];b=b[1]-bb;return[c*
Math.cos(b),c*Math.sin(b)]}}function ef(){return 64}function Xg(){return"circle"}function ce(a){a=Math.sqrt(a/ha);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function hd(a,b,c){xf(a,zb);a.namespace=b;a.id=c;return a}function Yg(a,b,c,d){var g=a.id,e=a.namespace;return R(a,"function"===typeof c?function(a,m,f){a[e][g].tween.set(b,d(c.call(a,a.__data__,m,f)))}:(c=d(c),function(a){a[e][g].tween.set(b,c)}))}function xg(a){null==a&&(a="");return function(){this.textContent=a}}
function de(a){return null==a?"__transition__":"__transition_"+a+"__"}function Be(a,b,d,g,e){var m=a[d]||(a[d]={active:0,count:0}),f=m[g];if(!f){var n=e.time;f=m[g]={tween:new c,time:n,delay:e.delay,duration:e.duration,ease:e.ease};e=null;++m.count;D.timer(function(c){function e(c){if(m.active>g)return k(!1);m.active=g;f.event&&f.event.start.call(a,w,b);f.tween.forEach(function(c,d){(d=d.call(a,w,b))&&I.push(d)});t=f.ease;A=f.duration;D.timer(function(){p.c=h(c||1)?td:h;return 1},0,n)}function h(b){if(m.active!==
g)return k(!1);b/=A;for(var c=t(b),d=I.length;0<d;)I[--d].call(a,c);if(1<=b)return k(!0)}function k(c){f.event&&f.event[c?"end":"interrupt"].call(a,w,b);--m.count?delete m[g]:delete a[d];return 1}var w=a.__data__,l=f.delay,A,t,p=Vd,I=[];p.t=l+n;if(l<=c)return e(c-l);p.c=e},0,n)}}function wh(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function $h(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function Jf(a){return a.toISOString()}
function Kf(a,b,c){function d(b){return a(b)}function g(a,c){var d=(a[1]-a[0])/c,g=D.bisect(ai,d);return g==ai.length?[b.year,we(a.map(function(a){return a/31536E6}),c)[2]]:g?b[d/ai[g-1]<ai[g]/d?g-1:g]:[Gj,we(a,c)[2]]}d.invert=function(b){return qc(a.invert(b))};d.domain=function(b){if(!arguments.length)return a.domain().map(qc);a.domain(b);return d};d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,qc(+c+1),b).length}var e=d.domain(),m=af(e);if(m=null==a?g(m,10):"number"===typeof a&&
g(m,a))a=m[0],b=m[1];return d.domain(Hf(e,1<b?{floor:function(b){for(;c(b=a.floor(b));)b=qc(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=qc(+b+1);return b}}:a))};d.ticks=function(a,b){var c=af(d.domain()),e=null==a?g(c,10):"number"===typeof a?g(c,a):!a.range&&[{range:a},b];e&&(a=e[0],b=e[1]);return a.range(c[0],qc(+c[1]+1),1>b?1:b)};d.tickFormat=function(){return c};d.copy=function(){return Kf(a.copy(),b,c)};return rh(d,a)}function qc(a){return new Date(a)}function Lf(a){return JSON.parse(a.responseText)}
function Mf(a){var b=fc.createRange();b.selectNode(fc.body);return b.createContextualFragment(a.responseText)}var D={version:"3.5.0"};Date.now||(Date.now=function(){return+new Date});var bi=[].slice,Lc=function(a){return bi.call(a)},fc=document,kb=fc.documentElement,wb=window;try{Lc(kb.childNodes)[0].nodeType}catch(O){Lc=function(a){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c}}try{fc.createElement("div").style.setProperty("opacity",0,"")}catch(O){var ee=wb.Element.prototype,Nb=ee.setAttribute,
xh=ee.setAttributeNS,Nf=wb.CSSStyleDeclaration.prototype,pa=Nf.setProperty;ee.setAttribute=function(a,b){Nb.call(this,a,b+"")};ee.setAttributeNS=function(a,b,c){xh.call(this,a,b,c+"")};Nf.setProperty=function(a,b,c){pa.call(this,a,b+"",c)}}D.ascending=h;D.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};D.min=function(a,b){var c=-1,d=a.length,g;if(1===arguments.length){for(;++c<d;)if(null!=(g=a[c])&&g>=g){var e=g;break}for(;++c<d;)null!=(g=a[c])&&e>g&&(e=g)}else{for(;++c<d;)if(null!=(g=b.call(a,
a[c],c))&&g>=g){e=g;break}for(;++c<d;)null!=(g=b.call(a,a[c],c))&&e>g&&(e=g)}return e};D.max=function(a,b){var c=-1,d=a.length,g;if(1===arguments.length){for(;++c<d;)if(null!=(g=a[c])&&g>=g){var e=g;break}for(;++c<d;)null!=(g=a[c])&&g>e&&(e=g)}else{for(;++c<d;)if(null!=(g=b.call(a,a[c],c))&&g>=g){e=g;break}for(;++c<d;)null!=(g=b.call(a,a[c],c))&&g>e&&(e=g)}return e};D.extent=function(a,b){var c=-1,d=a.length,g,e;if(1===arguments.length){for(;++c<d;)if(null!=(g=a[c])&&g>=g){var m=e=g;break}for(;++c<
d;)null!=(g=a[c])&&(m>g&&(m=g),e<g&&(e=g))}else{for(;++c<d;)if(null!=(g=b.call(a,a[c],c))&&g>=g){m=e=g;break}for(;++c<d;)null!=(g=b.call(a,a[c],c))&&(m>g&&(m=g),e<g&&(e=g))}return[m,e]};D.sum=function(a,b){var c=0,d=a.length,g,e=-1;if(1===arguments.length)for(;++e<d;)isNaN(g=+a[e])||(c+=g);else for(;++e<d;)isNaN(g=+b.call(a,a[e],e))||(c+=g);return c};D.mean=function(a,b){var c=0,d=a.length,g,e=-1,m=d;if(1===arguments.length)for(;++e<d;)isNaN(g=f(a[e]))?--m:c+=g;else for(;++e<d;)isNaN(g=f(b.call(a,
a[e],e)))?--m:c+=g;if(m)return c/m};D.quantile=function(a,b){var c=(a.length-1)*b+1;b=Math.floor(c);var d=+a[b-1];return(c-=b)?d+c*(a[b]-d):d};D.median=function(a,b){var c=[],d=a.length,g,e=-1;if(1===arguments.length)for(;++e<d;)isNaN(g=f(a[e]))||c.push(g);else for(;++e<d;)isNaN(g=f(b.call(a,a[e],e)))||c.push(g);if(c.length)return D.quantile(c.sort(h),.5)};var Ac=e(h);D.bisectLeft=Ac.left;D.bisect=D.bisectRight=Ac.right;D.bisector=function(a){return e(1===a.length?function(b,c){return h(a(b),c)}:
a)};D.shuffle=function(a,b,c){3>(d=arguments.length)&&(c=a.length,2>d&&(b=0));for(var d=c-b,g,e;d;)e=Math.random()*d--|0,g=a[d+b],a[d+b]=a[e+b],a[e+b]=g;return a};D.permute=function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=a[b[c]];return d};D.pairs=function(a){for(var b=0,c=a.length-1,d=a[0],g=Array(0>c?0:c);b<c;)g[b]=[d,d=a[++b]];return g};D.zip=function(){if(!(e=arguments.length))return[];for(var a=-1,b=D.min(arguments,d),c=Array(b);++a<b;)for(var g=-1,e,m=c[a]=Array(e);++g<e;)m[g]=arguments[g][a];
return c};D.transpose=function(a){return D.zip.apply(D,a)};D.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};D.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};D.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};D.merge=function(a){var b=a.length;var c=-1;for(var d=0,g,e;++c<b;)d+=a[c].length;for(g=Array(d);0<=--b;)for(e=a[b],c=e.length;0<=--c;)g[--d]=e[c];return g};var aa=Math.abs;D.range=function(a,b,c){3>arguments.length&&(c=1,2>arguments.length&&
(b=a,a=0));if(Infinity===(b-a)/c)throw Error("infinite range");var d=[];var g=aa(c);for(var e=1;g*e%1;)e*=10;g=e;e=-1;var m;a*=g;b*=g;c*=g;if(0>c)for(;(m=a+c*++e)>b;)d.push(m/g);else for(;(m=a+c*++e)<b;)d.push(m/g);return d};D.map=function(a,b){var d=new c;if(a instanceof c)a.forEach(function(a,b){d.set(a,b)});else if(Array.isArray(a)){var g=-1,e=a.length,m;if(1===arguments.length)for(;++g<e;)d.set(g,a[g]);else for(;++g<e;)d.set(b.call(a,m=a[g],g),m)}else for(g in a)d.set(g,a[g]);return d};k(c,{has:u,
get:function(b){return this._[a(b)]},set:function(b,c){return this._[a(b)]=c},remove:q,keys:r,values:function(){var a=[],b;for(b in this._)a.push(this._[b]);return a},entries:function(){var a=[],b;for(b in this._)a.push({key:l(b),value:this._[b]});return a},size:y,empty:z,forEach:function(a){for(var b in this._)a.call(this,l(b),this._[b])}});D.nest=function(){function a(b,e,n){if(n>=g.length)return f?f.call(d,e):m?e.sort(m):e;for(var h=-1,k=e.length,w=g[n++],l,A,t=new c,p;++h<k;)(p=t.get(l=w(A=e[h])))?
p.push(A):t.set(l,[A]);b?(A=b(),e=function(c,d){A.set(c,a(b,d,n))}):(A={},e=function(c,d){A[c]=a(b,d,n)});t.forEach(e);return A}function b(a,c){if(c>=g.length)return a;var d=[],m=e[c++];a.forEach(function(a,g){d.push({key:a,values:b(g,c)})});return m?d.sort(function(a,b){return m(a.key,b.key)}):d}var d={},g=[],e=[],m,f;d.map=function(b,c){return a(c,b,0)};d.entries=function(c){return b(a(D.map,c,0),0)};d.key=function(a){g.push(a);return d};d.sortKeys=function(a){e[g.length-1]=a;return d};d.sortValues=
function(a){m=a;return d};d.rollup=function(a){f=a;return d};return d};D.set=function(a){var b=new p;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b};k(p,{has:u,add:function(b){this._[a(b+="")]=!0;return b},remove:q,values:r,size:y,empty:z,forEach:function(a){for(var b in this._)a.call(this,l(b))}});D.behavior={};D.rebind=function(a,b){for(var c=1,d=arguments.length,g;++c<d;)a[g=arguments[c]]=x(a,b,b[g]);return a};var re="webkit ms moz Moz o O".split(" ");D.dispatch=function(){for(var a=
new C,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=F(a);return a};C.prototype.on=function(a,b){var c=a.indexOf("."),d="";0<=c&&(d=a.slice(c+1),a=a.slice(0,c));if(a)return 2>arguments.length?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)if(this.hasOwnProperty(a))this[a].on(d,null);return this}};D.event=null;D.requote=function(a){return a.replace(yh,"\\$&")};var yh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,xf={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=
b[c]},lc=function(a,b){return b.querySelector(a)},yf=function(a,b){return b.querySelectorAll(a)},Of=kb.matches||kb[t(kb,"matchesSelector")],Kc=function(a,b){return Of.call(a,b)};"function"===typeof Sizzle&&(lc=function(a,b){return Sizzle(a,b)[0]||null},yf=Sizzle,Kc=Sizzle.matchesSelector);D.selection=function(){return Zg};var Da=D.selection.prototype=[];Da.select=function(a){var b=[],c,d,e,m;a=g(a);for(var f=-1,n=this.length;++f<n;){b.push(c=[]);c.parentNode=(e=this[f]).parentNode;for(var h=-1,k=
e.length;++h<k;)(m=e[h])?(c.push(d=a.call(m,m.__data__,h,f)),d&&"__data__"in m&&(d.__data__=m.__data__)):c.push(null)}return K(b)};Da.selectAll=function(a){var b=[],c,d;a=m(a);for(var g=-1,e=this.length;++g<e;)for(var f=this[g],n=-1,h=f.length;++n<h;)if(d=f[n])b.push(c=Lc(a.call(d,d.__data__,n,g))),c.parentNode=d;return K(b)};var fe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
D.ns={prefix:fe,qualify:function(a){var b=a.indexOf(":"),c=a;0<=b&&(c=a.slice(0,b),a=a.slice(b+1));return fe.hasOwnProperty(c)?{space:fe[c],local:a}:a}};Da.attr=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node();a=D.ns.qualify(a);return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(A(b,a[b]));return this}return this.each(A(a,b))};Da.classed=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node(),d=(a=(a+"").trim().split(/^|\s+/)).length,
g=-1;if(b=c.classList)for(;++g<d;){if(!b.contains(a[g]))return!1}else for(b=c.getAttribute("class");++g<d;)if(!M(a[g]).test(b))return!1;return!0}for(b in a)this.each(L(b,a[b]));return this}return this.each(L(a,b))};Da.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b="");for(c in a)this.each(ia(c,a[c],b));return this}if(2>d)return wb.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(ia(a,b,c))};Da.property=function(a,b){if(2>arguments.length){if("string"===
typeof a)return this.node()[a];for(b in a)this.each(V(b,a[b]));return this}return this.each(V(a,b))};Da.text=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};Da.html=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=
""}:function(){this.innerHTML=a}):this.node().innerHTML};Da.append=function(a){a=Aa(a);return this.select(function(){return this.appendChild(a.apply(this,arguments))})};Da.insert=function(a,b){a=Aa(a);b=g(b);return this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})};Da.remove=function(){return this.each(U)};Da.data=function(a,b){function d(a,d){var g,e=a.length,m=d.length,f=Math.min(e,m),w=Array(m),l=Array(m),A=Array(e),t,p;if(b){f=new c;var I=
Array(e),r;for(g=-1;++g<e;)f.has(r=b.call(t=a[g],t.__data__,g))?A[g]=t:f.set(r,t),I[g]=r;for(g=-1;++g<m;)(t=f.get(r=b.call(d,p=d[g],g)))?!0!==t&&(w[g]=t,t.__data__=p):l[g]={__data__:p},f.set(r,!0);for(g=-1;++g<e;)!0!==f.get(I[g])&&(A[g]=a[g])}else{for(g=-1;++g<f;)t=a[g],p=d[g],t?(t.__data__=p,w[g]=t):l[g]={__data__:p};for(;g<m;++g)l[g]={__data__:d[g]};for(;g<e;++g)A[g]=a[g]}l.update=w;l.parentNode=w.parentNode=A.parentNode=a.parentNode;n.push(l);h.push(w);k.push(A)}var g=-1,e=this.length,m,f;if(!arguments.length){for(a=
Array(e=(m=this[0]).length);++g<e;)if(f=m[g])a[g]=f.__data__;return a}var n=Z([]),h=K([]),k=K([]);if("function"===typeof a)for(;++g<e;)d(m=this[g],a.call(m,m.parentNode.__data__,g));else for(;++g<e;)d(m=this[g],a);h.enter=function(){return n};h.exit=function(){return k};return h};Da.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};Da.filter=function(a){var b=[],c,d,g;"function"!==typeof a&&(a=X(a));for(var e=0,m=this.length;e<m;e++){b.push(c=[]);c.parentNode=
(d=this[e]).parentNode;for(var f=0,n=d.length;f<n;f++)(g=d[f])&&a.call(g,g.__data__,f,e)&&c.push(g)}return K(b)};Da.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c=this[a],d=c.length-1,g=c[d],e;0<=--d;)if(e=c[d])g&&g!==e.nextSibling&&g.parentNode.insertBefore(e,g),g=e;return this};Da.sort=function(a){a=da.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};Da.each=function(a){return R(this,function(b,c,d){a.call(b,b.__data__,c,d)})};Da.call=function(a){var b=
Lc(arguments);a.apply(b[0]=this,b);return this};Da.empty=function(){return!this.node()};Da.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,g=c.length;d<g;d++){var e=c[d];if(e)return e}return null};Da.size=function(){var a=0;R(this,function(){++a});return a};var vd=[];D.selection.enter=Z;D.selection.enter.prototype=vd;vd.append=Da.append;vd.empty=Da.empty;vd.node=Da.node;vd.call=Da.call;vd.size=Da.size;vd.select=function(a){for(var b=[],c,d,g,e,m,f=-1,n=this.length;++f<n;){g=
(e=this[f]).update;b.push(c=[]);c.parentNode=e.parentNode;for(var h=-1,k=e.length;++h<k;)(m=e[h])?(c.push(g[h]=d=a.call(e.parentNode,m.__data__,h,f)),d.__data__=m.__data__):c.push(null)}return K(b)};vd.insert=function(a,b){2>arguments.length&&(b=sa(this));return Da.insert.call(this,a,b)};Da.transition=function(a){var b=Pf||++Ei;a=de(a);for(var c=[],d,g,e=Ia||{time:Date.now(),ease:Qe,delay:0,duration:250},m=-1,f=this.length;++m<f;){c.push(d=[]);for(var n=this[m],h=-1,k=n.length;++h<k;)(g=n[h])&&Be(g,
h,a,b,e),d.push(g)}return hd(c,a,b)};Da.interrupt=function(a){var b=de(a);return this.each(function(){var a=this[b];a&&++a.active})};D.select=function(a){a=["string"===typeof a?lc(a,fc):a];a.parentNode=kb;return K([a])};D.selectAll=function(a){a=Lc("string"===typeof a?yf(a,fc):a);a.parentNode=kb;return K([a])};var Zg=D.select(kb);Da.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b=!1);for(c in a)this.each(ma(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+
a])&&d._;c=!1}return this.each(ma(a,b,c))};var Ng=D.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ng.forEach(function(a){"on"+a in fc&&Ng.remove(a)});var dd="onselectstart"in fc?null:t(kb.style,"userSelect"),Og=0;D.mouse=function(a){return ub(a,G())};var se=/WebKit/.test(wb.navigator.userAgent)?-1:0;D.touch=function(a,b,c){3>arguments.length&&(c=b,b=G().changedTouches);if(b)for(var d=0,g=b.length,e;d<g;++d)if((e=b[d]).identifier===c)return ub(a,e)};D.behavior.drag=function(){function a(){this.on("mousedown.drag",
g).on("touchstart.drag",e)}function b(a,b,g,e,m){return function(){var f=D.event.target,n=this.parentNode,h=c.of(this,arguments),k=0,w=a(),l=".drag"+(null==w?"":"-"+w),A=D.select(g()).on(e+l,function(){var a=b(n,w);if(a){var c=a[0]-p[0];var d=a[1]-p[1];k|=c|d;p=a;h({type:"drag",x:a[0]+I[0],y:a[1]+I[1],dx:c,dy:d})}}).on(m+l,function(){b(n,w)&&(A.on(e+l,null).on(m+l,null),t(k&&D.event.target===f),h({type:"dragend"}))}),t=Va(),p=b(n,w);if(d){var I=d.apply(this,arguments);I=[I.x-p[0],I.y-p[1]]}else I=
[0,0];h({type:"dragstart"})}}var c=E(a,"drag","dragstart","dragend"),d=null,g=b(B,D.mouse,Ma,"mousemove","mouseup"),e=b(Za,D.touch,Ba,"touchmove","touchend");a.origin=function(b){if(!arguments.length)return d;d=b;return a};return D.rebind(a,c,"on")};D.touches=function(a,b){2>arguments.length&&(b=G().touches);return b?Lc(b).map(function(b){var c=ub(a,b);c.identifier=b.identifier;return c}):[]};var ha=Math.PI,ec=2*ha,zh=ec-1E-6,bb=ha/2,ja=ha/180,Oa=180/ha,$g=Math.SQRT2;D.interpolateZoom=function(a,
b){function c(a){var b=a*l;if(w){a=la(k);var c=$g*b+k;var n=((c=Math.exp(2*c))-1)/(c+1);var A=k;c=((A=Math.exp(A))-1/A)/2;n=e/(2*h)*(a*n-c);return[d+n*m,g+n*f,e*a/la($g*b+k)]}return[d+a*m,g+a*f,e*Math.exp($g*b)]}var d=a[0],g=a[1],e=a[2];a=b[2];var m=b[0]-d,f=b[1]-g,n=m*m+f*f,h=Math.sqrt(n);b=(a*a-e*e+4*n)/(4*e*h);n=(a*a-e*e-4*n)/(4*a*h);var k=Math.log(Math.sqrt(b*b+1)-b),w=Math.log(Math.sqrt(n*n+1)-n)-k,l=(w||Math.log(a/e))/$g;c.duration=1E3*l;return c};D.behavior.zoom=function(){function a(a){a.on("mousedown.zoom",
h).on(Bd+".zoom",w).on("dblclick.zoom",l).on("touchstart.zoom",k)}function b(a){return[(a[0]-A.x)/A.k,(a[1]-A.y)/A.k]}function c(a){A.k=Math.max(u[0],Math.min(u[1],a))}function d(a,b){b=[b[0]*A.k+A.x,b[1]*A.k+A.y];A.x+=a[0]-b[0];A.y+=a[1]-b[1]}function g(b,g,e,m){b.__chart__={x:A.x,y:A.y,k:A.k};c(Math.pow(2,m));d(p=g,e);b=D.select(b);0<x&&(b=b.transition().duration(x));b.call(a.event)}function e(){P&&P.domain(L.range().map(function(a){return(a-A.x)/A.k}).map(L.invert));C&&C.domain(B.range().map(function(a){return(a-
A.y)/A.k}).map(B.invert))}function m(a){q++||a({type:"zoomstart"})}function f(a){e();a({type:"zoom",scale:A.k,translate:[A.x,A.y]})}function n(a){--q||a({type:"zoomend"});p=null}function h(){var a=this,c=D.event.target,g=y.of(a,arguments),e=0,h=D.select(wb).on("mousemove.zoom",function(){e=1;d(D.mouse(a),k);f(g)}).on("mouseup.zoom",function(){h.on("mousemove.zoom",null).on("mouseup.zoom",null);w(e&&D.event.target===c);n(g)}),k=b(D.mouse(a)),w=Va();qa(a);m(g)}function k(){function a(){var a=D.touches(t);
u=A.k;a.forEach(function(a){a.identifier in I&&(I[a.identifier]=b(a))});return a}function e(){var b=D.event.target;D.select(b).on(q,w).on(M,l);L.push(b);b=D.event.changedTouches;for(var c=0,d=b.length;c<d;++c)I[b[c].identifier]=null;c=a();d=Date.now();1===c.length?(500>d-z&&(b=c[0],g(t,b,I[b.identifier],Math.floor(Math.log(A.k)/Math.LN2)+1),H()),z=d):1<c.length&&(b=c[0],d=c[1],c=b[0]-d[0],b=b[1]-d[1],r=c*c+b*b)}function w(){var a=D.touches(t),b;qa(t);for(var g=0,e=a.length;g<e;++g,b=null){var m=a[g];
if(b=I[m.identifier]){if(h)break;var n=m;var h=b}}if(b){var k=(k=m[0]-n[0])*k+(k=m[1]-n[1])*k;a=r&&Math.sqrt(k/r);n=[(n[0]+m[0])/2,(n[1]+m[1])/2];h=[(h[0]+b[0])/2,(h[1]+b[1])/2];c(a*u)}z=null;d(n,h);f(p)}function l(){if(D.event.touches.length){for(var b=D.event.changedTouches,c=0,d=b.length;c<d;++c)delete I[b[c].identifier];for(var g in I)return void a()}D.selectAll(L).on(x,null);P.on("mousedown.zoom",h).on("touchstart.zoom",k);B();n(p)}var t=this,p=y.of(t,arguments),I={},r=0,u,x=".zoom-"+D.event.changedTouches[0].identifier,
q="touchmove"+x,M="touchend"+x,L=[],P=D.select(t),B=Va();e();m(p);P.on("mousedown.zoom",null).on("touchstart.zoom",e)}function w(){var a=y.of(this,arguments);M?clearTimeout(M):(t=b(p=I||D.mouse(this)),qa(this),m(a));M=setTimeout(function(){M=null;n(a)},50);H();c(Math.pow(2,.002*Qf())*A.k);d(p,t);f(a)}function l(){var a=D.mouse(this),c=Math.log(A.k)/Math.LN2;g(this,a,b(a),D.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)}var A={x:0,y:0,k:1},t,p,I,r=[960,500],u=Ah,x=250,q=0,M,z,y=E(a,"zoomstart","zoom",
"zoomend"),L,P,B,C;a.event=function(a){a.each(function(){var a=y.of(this,arguments),b=A;Pf?D.select(this).transition().each("start.zoom",function(){A=this.__chart__||{x:0,y:0,k:1};m(a)}).tween("zoom:zoom",function(){var c=r[0],d=r[1],g=p?p[0]:c/2,e=p?p[1]:d/2,m=D.interpolateZoom([(g-A.x)/A.k,(e-A.y)/A.k,c/A.k],[(g-b.x)/b.k,(e-b.y)/b.k,c/b.k]);return function(b){b=m(b);var d=c/b[2];this.__chart__=A={x:g-b[0]*d,y:e-b[1]*d,k:d};f(a)}}).each("interrupt.zoom",function(){n(a)}).each("end.zoom",function(){n(a)}):
(this.__chart__=A,m(a),f(a),n(a))})};a.translate=function(b){if(!arguments.length)return[A.x,A.y];A={x:+b[0],y:+b[1],k:A.k};e();return a};a.scale=function(b){if(!arguments.length)return A.k;A={x:A.x,y:A.y,k:+b};e();return a};a.scaleExtent=function(b){if(!arguments.length)return u;u=null==b?Ah:[+b[0],+b[1]];return a};a.center=function(b){if(!arguments.length)return I;I=b&&[+b[0],+b[1]];return a};a.size=function(b){if(!arguments.length)return r;r=b&&[+b[0],+b[1]];return a};a.duration=function(b){if(!arguments.length)return x;
x=+b;return a};a.x=function(b){if(!arguments.length)return P;P=b;L=b.copy();A={x:0,y:0,k:1};return a};a.y=function(b){if(!arguments.length)return C;C=b;B=b.copy();A={x:0,y:0,k:1};return a};return D.rebind(a,y,"on")};var Ah=[0,Infinity],Qf,Bd="onwheel"in fc?(Qf=function(){return-D.event.deltaY*(D.event.deltaMode?120:1)},"wheel"):"onmousewheel"in fc?(Qf=function(){return D.event.wheelDelta},"mousewheel"):(Qf=function(){return-D.event.detail},"MozMousePixelScroll");D.color=ya;ya.prototype.toString=function(){return this.rgb()+
""};D.hsl=Pa;var ff=Pa.prototype=new ya;ff.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);return new Pa(this.h,this.s,this.l/a)};ff.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return new Pa(this.h,this.s,a*this.l)};ff.rgb=function(){return va(this.h,this.s,this.l)};D.hcl=Ka;var ah=Ka.prototype=new ya;ah.brighter=function(a){return new Ka(this.h,this.c,Math.min(100,this.l+n*(arguments.length?a:1)))};ah.darker=function(a){return new Ka(this.h,this.c,Math.max(0,this.l-n*(arguments.length?
a:1)))};ah.rgb=function(){return ta(this.h,this.c,this.l).rgb()};D.lab=qb;var n=18,w=.95047,I=1,P=1.08883,Jb=qb.prototype=new ya;Jb.brighter=function(a){return new qb(Math.min(100,this.l+n*(arguments.length?a:1)),this.a,this.b)};Jb.darker=function(a){return new qb(Math.max(0,this.l-n*(arguments.length?a:1)),this.a,this.b)};Jb.rgb=function(){return cb(this.l,this.a,this.b)};D.rgb=Ra;var nb=Ra.prototype=new ya;nb.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b;
if(!b&&!c&&!d)return new Ra(30,30,30);b&&30>b&&(b=30);c&&30>c&&(c=30);d&&30>d&&(d=30);return new Ra(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))};nb.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return new Ra(a*this.r,a*this.g,a*this.b)};nb.hsl=function(){return La(this.r,this.g,this.b)};nb.toString=function(){return"#"+oa(this.r)+oa(this.g)+oa(this.b)};var zf=D.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,
black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,
darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,
lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,
mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,
purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});zf.forEach(function(a,
b){zf.set(a,new Ra(b>>16,b>>8&255,b&255))});D.functor=ra;D.xhr=qd(Sa);D.dsv=function(a,b){function c(a,c,e){3>arguments.length&&(e=c,c=null);var m=Ue(a,b,null==c?d:g(c),e);m.row=function(a){return arguments.length?m.response(null==(c=a)?d:g(a)):c};return m}function d(a){return c.parse(a.responseText)}function g(a){return function(b){return c.parse(b.responseText,a)}}function e(b){return b.map(m).join(a)}function m(a){return f.test(a)?'"'+a.replace(/"/g,'""')+'"':a}var f=new RegExp('["'+a+"\n]"),n=
a.charCodeAt(0);c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var g=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(g(a),c)}:g})};c.parseRows=function(a,b){function c(){if(f>=m)return g;if(w)return w=!1,d;var b=f;if(34===a.charCodeAt(b)){for(var c=b;c++<m;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}f=c+2;var e=a.charCodeAt(c+1);13===e?(w=!0,10===a.charCodeAt(c+
2)&&++f):10===e&&(w=!0);return a.slice(b+1,c).replace(/""/g,'"')}for(;f<m;){e=a.charCodeAt(f++);c=1;if(10===e)w=!0;else if(13===e)w=!0,10===a.charCodeAt(f)&&(++f,++c);else if(e!==n)continue;return a.slice(b,f-c)}return a.slice(b)}for(var d={},g={},e=[],m=a.length,f=0,h=0,k,w;(k=c())!==g;){for(var l=[];k!==d&&k!==g;)l.push(k),k=c();b&&null==(l=b(l,h++))||e.push(l)}return e};c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new p,g=[];b.forEach(function(a){for(var b in a)d.has(b)||
g.push(d.add(b))});return[g.map(m).join(a)].concat(b.map(function(b){return g.map(function(a){return m(b[a])}).join(a)})).join("\n")};c.formatRows=function(a){return a.map(e).join("\n")};return c};D.csv=D.dsv(",","text/csv");D.tsv=D.dsv("\t","text/tab-separated-values");var Af,ed,Mc,Ud,Vd,xb=wb[t(wb,"requestAnimationFrame")]||function(a){setTimeout(a,17)};D.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());d={c:a,t:c+b,f:!1,n:null};ed?ed.n=d:Af=d;ed=d;Mc||(Ud=clearTimeout(Ud),
Mc=1,xb(Gc))};D.timer.flush=function(){ig();kd()};D.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var zg="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var c=Math.pow(10,3*aa(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});D.formatPrefix=function(a,b){var c=0;a&&(0>a&&(a*=-1),b&&(a=D.round(a,jd(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3))));return zg[8+
c/3]};var te=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ph=D.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=D.round(a,jd(a,b))).toFixed(Math.max(0,Math.min(20,jd(a*
(1+1E-15),b))))}}),Y=D.time={},dc=Date;Zb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},
getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ce.setUTCDate.apply(this._,arguments)},setDay:function(){Ce.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ce.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ce.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ce.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ce.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ce.setUTCMonth.apply(this._,
arguments)},setSeconds:function(){Ce.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ce.setTime.apply(this._,arguments)}};var Ce=Date.prototype;Y.year=tb(function(a){a=Y.day(a);a.setMonth(0,1);return a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});Y.years=Y.year.range;Y.years.utc=Y.year.utc.range;Y.day=tb(function(a){var b=new dc(2E3,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-
1});Y.days=Y.day.range;Y.days.utc=Y.day.utc.range;Y.dayOfYear=function(a){var b=Y.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,b){b=7-b;var c=Y[a]=tb(function(a){(a=Y.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=Y.year(a).getDay();return Math.floor((Y.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});
Y[a+"s"]=c.range;Y[a+"s"].utc=c.utc.range;Y[a+"OfYear"]=function(a){var c=Y.year(a).getDay();return Math.floor((Y.dayOfYear(a)+(c+b)%7)/7)}});Y.week=Y.sunday;Y.weeks=Y.sunday.range;Y.weeks.utc=Y.sunday.utc.range;Y.weekOfYear=Y.sundayOfYear;var Wd={"-":"",_:" ",0:"0"},mb=/^\s*\d+/,xi=/^%/;D.locale=function(a){return{numberFormat:ob(a),timeFormat:Xc(a)}};var Bh=D.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM",
"PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});D.format=Bh.numberFormat;D.geo={};hb.prototype={s:0,t:0,add:function(a){Cc(a,this.t,bh);Cc(bh.s,this.s,this);this.s?this.t+=bh.t:this.s=bh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};
var bh=new hb;D.geo.stream=function(a,b){if(a&&Fi.hasOwnProperty(a.type))Fi[a.type](a,b);else xa(a,b)};var Fi={Feature:function(a,b){xa(a.geometry,b)},FeatureCollection:function(a,b){a=a.features;for(var c=-1,d=a.length;++c<d;)xa(a[c].geometry,b)}},Qh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,g=c.length;++d<g;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){Ic(a.coordinates,b,0)},MultiLineString:function(a,
b){a=a.coordinates;for(var c=-1,d=a.length;++c<d;)Ic(a[c],b,0)},Polygon:function(a,b){pb(a.coordinates,b)},MultiPolygon:function(a,b){a=a.coordinates;for(var c=-1,d=a.length;++c<d;)pb(a[c],b)},GeometryCollection:function(a,b){a=a.geometries;for(var c=-1,d=a.length;++c<d;)xa(a[c],b)}};D.geo.area=function(a){ci=0;D.geo.stream(a,fd);return ci};var ci,Xd=new hb,fd={sphere:function(){ci+=4*ha},point:B,lineStart:B,lineEnd:B,polygonStart:function(){Xd.reset();fd.lineStart=ib},polygonEnd:function(){var a=
2*Xd;ci+=0>a?4*ha+a:a;fd.lineStart=fd.lineEnd=fd.point=B}};D.geo.bounds=function(){function a(a,b){x.push(q=[k=a,l=a]);b<w&&(w=b);b>A&&(A=b)}function b(b,c){var d=db([b*ja,c*ja]);if(r){var g=ac(r,d);g=ac([g[1],-g[0],0],g);Lb(g);g=Cb(g);var e=b-t,m=0<e?1:-1,n=g[0]*Oa*m;e=180<aa(e);e^(m*t<n&&n<m*b)?(c=g[1]*Oa,c>A&&(A=c)):(n=(n+360)%360-180,e^(m*t<n&&n<m*b))?(c=-g[1]*Oa,c<w&&(w=c)):(c<w&&(w=c),c>A&&(A=c));e?b<t?f(k,b)>f(k,l)&&(l=b):f(b,l)>f(k,l)&&(k=b):l>=k?(b<k&&(k=b),b>l&&(l=b)):b>t?f(k,b)>f(k,l)&&
(l=b):f(b,l)>f(k,l)&&(k=b)}else a(b,c);r=d;t=b}function c(){M.point=b}function d(){q[0]=k;q[1]=l;M.point=a;r=null}function g(a,c){if(r){var d=a-t;u+=180<aa(d)?d+(0<d?360:-360):d}else p=a,I=c;fd.point(a,c);b(a,c)}function e(){fd.lineStart()}function m(){g(p,I);fd.lineEnd();1E-6<aa(u)&&(k=-(l=180));q[0]=k;q[1]=l;r=null}function f(a,b){return 0>(b-=a)?b+360:b}function n(a,b){return a[0]-b[0]}function h(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,w,l,A,t,p,I,r,u,x,q,M={point:a,lineStart:c,
lineEnd:d,polygonStart:function(){M.point=g;M.lineStart=e;M.lineEnd=m;u=0;fd.polygonStart()},polygonEnd:function(){fd.polygonEnd();M.point=a;M.lineStart=c;M.lineEnd=d;0>Xd?(k=-(l=180),w=-(A=90)):1E-6<u?A=90:-1E-6>u&&(w=-90);q[0]=k;q[1]=l}};return function(a){A=l=-(k=w=Infinity);x=[];D.geo.stream(a,M);if(a=x.length){x.sort(n);for(var b=1,c=x[0],d,g=[c];b<a;++b)d=x[b],h(d[0],c)||h(d[1],c)?(f(c[0],d[1])>f(c[0],c[1])&&(c[1]=d[1]),f(d[0],c[1])>f(c[0],c[1])&&(c[0]=d[0])):g.push(c=d);var e=-Infinity,m;a=
g.length-1;b=0;for(c=g[a];b<=a;c=d,++b)d=g[b],(m=f(c[1],d[0]))>e&&(e=m,k=d[0],l=c[1])}x=q=null;return Infinity===k||Infinity===w?[[NaN,NaN],[NaN,NaN]]:[[k,w],[l,A]]}}();D.geo.centroid=function(a){Qg=mh=Rb=qg=wd=Xe=Df=Yd=Ef=ue=Ff=0;D.geo.stream(a,Zd);a=Ef;var b=ue,c=Ff,d=a*a+b*b+c*c;return 1E-12>d&&(a=Xe,b=Df,c=Yd,1E-6>mh&&(a=Rb,b=qg,c=wd),d=a*a+b*b+c*c,1E-12>d)?[NaN,NaN]:[Math.atan2(b,a)*Oa,Ha(c/Math.sqrt(d))*Oa]};var Qg,mh,Rb,qg,wd,Xe,Df,Yd,Ef,ue,Ff,Zd={sphere:B,point:pe,lineStart:Me,lineEnd:Le,
polygonStart:function(){Zd.lineStart=Wb},polygonEnd:function(){Zd.lineStart=Me}},Rh=Ta(td,function(a){var b=NaN,c=NaN,d=NaN,g;return{lineStart:function(){a.lineStart();g=1},point:function(e,m){var f=0<e?ha:-ha,n=aa(e-b);if(1E-6>aa(n-ha))a.point(b,c=0<(c+m)/2?bb:-bb),a.point(d,c),a.lineEnd(),a.lineStart(),a.point(f,c),a.point(e,c),g=0;else if(d!==f&&n>=ha){1E-6>aa(b-d)&&(b-=1E-6*d);1E-6>aa(e-f)&&(e-=1E-6*f);n=b;var h=c,k=e,w,l,A=Math.sin(n-k);c=1E-6<aa(A)?Math.atan((Math.sin(h)*(l=Math.cos(m))*Math.sin(k)-
Math.sin(m)*(w=Math.cos(h))*Math.sin(n))/(w*l*A)):(h+m)/2;a.point(d,c);a.lineEnd();a.lineStart();a.point(f,c);g=0}a.point(b=e,c=m);d=f},lineEnd:function(){a.lineEnd();b=c=NaN},clean:function(){return 2-g}}},function(a,b,c,d){null==a?(c*=bb,d.point(-ha,c),d.point(0,c),d.point(ha,c),d.point(ha,0),d.point(ha,-c),d.point(0,-c),d.point(-ha,-c),d.point(-ha,0),d.point(-ha,c)):1E-6<aa(a[0]-b[0])?(a=a[0]<b[0]?ha:-ha,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],b[1])},[-ha,-ha/2]);D.geo.clipExtent=
function(){var a,b,c,d,g,e,m={stream:function(a){g&&(g.valid=!1);g=e(a);g.valid=!0;return g},extent:function(f){if(!arguments.length)return[[a,b],[c,d]];e=ng(a=+f[0][0],b=+f[0][1],c=+f[1][0],d=+f[1][1]);g&&(g.valid=!1,g=null);return m}};return m.extent([[0,0],[960,500]])};(D.geo.conicEqualArea=function(){return Qd(Rd)}).raw=Rd;D.geo.albers=function(){return D.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};D.geo.albersUsa=function(){function a(a){var b=a[0];
a=a[1];g=null;(m(b,a),g)||(f(b,a),g)||n(b,a);return g}var b=D.geo.albers(),c=D.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=D.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g,e={point:function(a,b){g=[a,b]}},m,f,n;a.invert=function(a){var g=b.scale(),e=b.translate(),m=(a[0]-e[0])/g;g=(a[1]-e[1])/g;return(.12<=g&&.234>g&&-.425<=m&&-.214>m?c:.166<=g&&.234>g&&-.214<=m&&-.115>m?d:b).invert(a)};a.stream=function(a){var g=b.stream(a),e=c.stream(a),
m=d.stream(a);return{point:function(a,b){g.point(a,b);e.point(a,b);m.point(a,b)},sphere:function(){g.sphere();e.sphere();m.sphere()},lineStart:function(){g.lineStart();e.lineStart();m.lineStart()},lineEnd:function(){g.lineEnd();e.lineEnd();m.lineEnd()},polygonStart:function(){g.polygonStart();e.polygonStart();m.polygonStart()},polygonEnd:function(){g.polygonEnd();e.polygonEnd();m.polygonEnd()}}};a.precision=function(g){if(!arguments.length)return b.precision();b.precision(g);c.precision(g);d.precision(g);
return a};a.scale=function(g){if(!arguments.length)return b.scale();b.scale(g);c.scale(.35*g);d.scale(g);return a.translate(b.translate())};a.translate=function(g){if(!arguments.length)return b.translate();var h=b.scale(),k=+g[0],w=+g[1];m=b.translate(g).clipExtent([[k-.455*h,w-.238*h],[k+.455*h,w+.238*h]]).stream(e).point;f=c.translate([k-.307*h,w+.201*h]).clipExtent([[k-.425*h+1E-6,w+.12*h+1E-6],[k-.214*h-1E-6,w+.234*h-1E-6]]).stream(e).point;n=d.translate([k-.205*h,w+.212*h]).clipExtent([[k-.214*
h+1E-6,w+.166*h+1E-6],[k-.115*h-1E-6,w+.234*h-1E-6]]).stream(e).point;return a};return a.scale(1070)};var di,yi,Ye={point:B,lineStart:B,lineEnd:B,polygonStart:function(){yi=0;Ye.lineStart=Sd},polygonEnd:function(){Ye.lineStart=Ye.lineEnd=Ye.point=B;di+=aa(yi/2)}},ch,ei,fi,gi,Ij={point:function(a,b){a<ch&&(ch=a);a>fi&&(fi=a);b<ei&&(ei=b);b>gi&&(gi=b)},lineStart:B,lineEnd:B,polygonStart:B,polygonEnd:B},xd={point:S,lineStart:sb,lineEnd:uf,polygonStart:function(){xd.lineStart=og},polygonEnd:function(){xd.point=
S;xd.lineStart=sb;xd.lineEnd=uf}};D.geo.path=function(){function a(a){a&&("function"===typeof c&&m.pointRadius(+c.apply(this,arguments)),f&&f.valid||(f=e(m)),D.geo.stream(a,f));return m.result()}function b(){f=null;return a}var c=4.5,d,g,e,m,f;a.area=function(a){di=0;D.geo.stream(a,e(Ye));return di};a.centroid=function(a){Rb=qg=wd=Xe=Df=Yd=Ef=ue=Ff=0;D.geo.stream(a,e(xd));return Ff?[Ef/Ff,ue/Ff]:Yd?[Xe/Yd,Df/Yd]:wd?[Rb/wd,qg/wd]:[NaN,NaN]};a.bounds=function(a){fi=gi=-(ch=ei=Infinity);D.geo.stream(a,
e(Ij));return[[ch,ei],[fi,gi]]};a.projection=function(a){if(!arguments.length)return d;e=(d=a)?a.stream||vf(a):Sa;return b()};a.context=function(a){if(!arguments.length)return g;m=null==(g=a)?new sf:new Td(a);"function"!==typeof c&&m.pointRadius(c);return b()};a.pointRadius=function(b){if(!arguments.length)return c;c="function"===typeof b?b:(m.pointRadius(+b),+b);return a};return a.projection(D.geo.albersUsa()).context(null)};D.geo.transform=function(a){return{stream:function(b){b=new Qb(b);for(var c in a)b[c]=
a[c];return b}}};Qb.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};D.geo.projection=Db;D.geo.projectionMutator=ic;(D.geo.equirectangular=function(){return Db(ad)}).raw=ad.invert=ad;D.geo.rotation=function(a){function b(b){b=a(b[0]*ja,b[1]*ja);return b[0]*=Oa,b[1]*=
Oa,b}a=Mb(a[0]%360*ja,a[1]*ja,2<a.length?a[2]*ja:0);b.invert=function(b){b=a.invert(b[0]*ja,b[1]*ja);return b[0]*=Oa,b[1]*=Oa,b};return b};Oe.invert=ad;D.geo.circle=function(){function a(){var a="function"===typeof b?b.apply(this,arguments):b,c=Mb(-a[0]*ja,-a[1]*ja,0).invert,d=[];g(null,null,1,{point:function(a,b){d.push(a=c(a,b));a[0]*=Oa;a[1]*=Oa}});return{type:"Polygon",coordinates:[d]}}var b=[0,0],c,d=6,g;a.origin=function(c){if(!arguments.length)return b;b=c;return a};a.angle=function(b){if(!arguments.length)return c;
g=wc((c=+b)*ja,d*ja);return a};a.precision=function(b){if(!arguments.length)return d;g=wc(c*ja,(d=+b)*ja);return a};return a.angle(90)};D.geo.distance=function(a,b){var c=(b[0]-a[0])*ja,d=a[1]*ja,g=b[1]*ja;b=Math.cos(c);a=Math.sin(d);d=Math.cos(d);var e=Math.sin(g);g=Math.cos(g);var m;return Math.atan2(Math.sqrt((m=g*Math.sin(c))*m+(m=d*e-a*g*b)*m),a*e+d*g*b)};D.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return D.range(Math.ceil(e/l)*l,g,l).map(I).concat(D.range(Math.ceil(h/
A)*A,n,A).map(r)).concat(D.range(Math.ceil(d/k)*k,c,k).filter(function(a){return 1E-6<aa(a%l)}).map(t)).concat(D.range(Math.ceil(f/w)*w,m,w).filter(function(a){return 1E-6<aa(a%A)}).map(p))}var c,d,g,e,m,f,n,h,k=10,w=k,l=90,A=360,t,p,I,r,u=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[I(e).concat(r(n).slice(1),I(g).reverse().slice(1),r(h).reverse().slice(1))]}};a.extent=function(b){return arguments.length?
a.majorExtent(b).minorExtent(b):a.minorExtent()};a.majorExtent=function(b){if(!arguments.length)return[[e,h],[g,n]];e=+b[0][0];g=+b[1][0];h=+b[0][1];n=+b[1][1];e>g&&(b=e,e=g,g=b);h>n&&(b=h,h=n,n=b);return a.precision(u)};a.minorExtent=function(b){if(!arguments.length)return[[d,f],[c,m]];d=+b[0][0];c=+b[1][0];f=+b[0][1];m=+b[1][1];d>c&&(b=d,d=c,c=b);f>m&&(b=f,f=m,m=b);return a.precision(u)};a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()};a.majorStep=function(b){if(!arguments.length)return[l,
A];l=+b[0];A=+b[1];return a};a.minorStep=function(b){if(!arguments.length)return[k,w];k=+b[0];w=+b[1];return a};a.precision=function(b){if(!arguments.length)return u;u=+b;t=Jc(f,m,90);p=ud(d,c,u);I=Jc(h,n,90);r=ud(e,g,u);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};D.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||b.apply(this,arguments),g||d.apply(this,arguments)]}}var b=cd,c,d=yc,g;a.distance=
function(){return D.geo.distance(c||b.apply(this,arguments),g||d.apply(this,arguments))};a.source=function(d){if(!arguments.length)return b;b=d;c="function"===typeof d?null:d;return a};a.target=function(b){if(!arguments.length)return d;d=b;g="function"===typeof b?null:b;return a};a.precision=function(){return arguments.length?a:0};return a};D.geo.interpolate=function(a,b){return wf(a[0]*ja,a[1]*ja,b[0]*ja,b[1]*ja)};D.geo.length=function(a){hi=0;D.geo.stream(a,Ag);return hi};var hi,Ag={sphere:B,point:B,
lineStart:function(){function a(a,g){var e=Math.sin(g*=ja);g=Math.cos(g);var m=aa((a*=ja)-b),f=Math.cos(m);hi+=Math.atan2(Math.sqrt((m=g*Math.sin(m))*m+(m=d*e-c*g*f)*m),c*e+d*g*f);b=a;c=e;d=g}var b,c,d;Ag.point=function(g,e){b=g*ja;c=Math.sin(e*=ja);d=Math.cos(e);Ag.point=a};Ag.lineEnd=function(){Ag.point=Ag.lineEnd=B}},lineEnd:B,polygonStart:B,polygonEnd:B},cj=Kb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(D.geo.azimuthalEqualArea=function(){return Db(cj)}).raw=
cj;var dj=Kb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},Sa);(D.geo.azimuthalEquidistant=function(){return Db(dj)}).raw=dj;(D.geo.conicConformal=function(){return Qd(na)}).raw=na;(D.geo.conicEquidistant=function(){return Qd(He)}).raw=He;var ej=Kb(function(a){return 1/a},Math.atan);(D.geo.gnomonic=function(){return Db(ej)}).raw=ej;Ub.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-bb]};(D.geo.mercator=function(){return id(Ub)}).raw=Ub;var fj=Kb(function(){return 1},Math.asin);(D.geo.orthographic=
function(){return Db(fj)}).raw=fj;var Sb=Kb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(D.geo.stereographic=function(){return Db(Sb)}).raw=Sb;Tf.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-bb]};(D.geo.transverseMercator=function(){var a=id(Tf),b=a.center,c=a.rotate;a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])};a.rotate=function(a){return a?c([a[0],a[1],2<a.length?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])};return c([0,0,90])}).raw=Tf;D.geom={};
D.geom.hull=function(a){function b(a){if(3>a.length)return[];var b=ra(c),g=ra(d),e,m=a.length,f=[],n=[];for(e=0;e<m;e++)f.push([+b.call(this,a[e],e),+g.call(this,a[e],e),e]);f.sort(hf);for(e=0;e<m;e++)n.push([f[e][0],-f[e][1]]);b=md(f);n=md(n);g=n[0]===b[0];m=n[n.length-1]===b[b.length-1];var h=[];for(e=b.length-1;0<=e;--e)h.push(a[f[b[e]][2]]);for(e=+g;e<n.length-m;++e)h.push(a[f[n[e]][2]]);return h}var c=ua,d=ld;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(c=a,b):c};
b.y=function(a){return arguments.length?(d=a,b):d};return b};D.geom.polygon=function(a){xf(a,Rf);return a};var Rf=D.geom.polygon.prototype=[];Rf.area=function(){for(var a=-1,b=this.length,c,d=this[b-1],g=0;++a<b;)c=d,d=this[a],g+=c[1]*d[0]-c[0]*d[1];return.5*g};Rf.centroid=function(a){var b=-1,c=this.length,d=0,g=0,e=this[c-1];for(arguments.length||(a=-1/(6*this.area()));++b<c;){var m=e;e=this[b];var f=m[0]*e[1]-e[0]*m[1];d+=(m[0]+e[0])*f;g+=(m[1]+e[1])*f}return[d*a,g*a]};Rf.clip=function(a){for(var b,
c=Gd(a),d=-1,g=this.length-Gd(this),e,m,f=this[g-1],n,h,k;++d<g;){b=a.slice();a.length=0;n=this[d];h=b[(m=b.length-c)-1];for(e=-1;++e<m;)k=b[e],Ie(k,f,n)?(Ie(h,f,n)||a.push(Dg(h,k,f,n)),a.push(k)):Ie(h,f,n)&&a.push(Dg(h,k,f,n)),h=k;c&&a.push(a[0]);f=n}return a};var rg,Fb,Rg,nh=[],ph,oh,$i=[];oe.prototype.prepare=function(){for(var a=this.edges,b=a.length,c;b--;)c=a[b].edge,c.b&&c.a||a.splice(b,1);a.sort(gh);return a.length};ag.prototype={start:function(){return this.edge.l===this.site?this.edge.a:
this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};Se.prototype={insert:function(a,b){var c;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;var d=a}else this._?(a=Hg(this._),b.P=null,b.N=a,a.P=a.L=b,d=a):(b.P=b.N=null,this._=b,d=null);b.L=b.R=null;b.U=d;b.C=!0;for(a=b;d&&d.C;)b=d.U,d===b.L?(c=b.R)&&c.C?(d.C=c.C=!1,b.C=!0,a=b):(a===d.R&&(lf(this,d),a=d,d=a.U),d.C=!1,b.C=!0,ne(this,b)):(c=b.L)&&c.C?(d.C=c.C=!1,b.C=!0,a=b):(a===d.L&&
(ne(this,d),a=d,d=a.U),d.C=!1,b.C=!0,lf(this,b)),d=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,c=a.L,d=a.R;var g=c?d?Hg(d):c:d;b?b.L===a?b.L=g:b.R=g:this._=g;if(c&&d){var e=g.C;g.C=a.C;g.L=c;c.U=g;g!==d?(b=g.U,g.U=a.U,a=g.R,b.L=a,g.R=d,d.U=g):(g.U=b,b=g,a=g.R)}else e=a.C,a=g;a&&(a.U=b);if(!e)if(a&&a.C)a.C=!1;else{do{if(a===this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,lf(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,ne(this,
a),a=b.R);a.C=b.C;b.C=a.R.C=!1;lf(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,ne(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,lf(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;ne(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};D.geom.voronoi=function(a){function b(a){var b=Array(a.length),d=f[0][0],g=f[0][1],e=f[1][0],m=f[1][1];mf(c(a),f).cells.forEach(function(c,f){var n=c.edges;c=c.site;(b[f]=n.length?n.map(function(a){a=a.start();return[a.x,a.y]}):c.x>=
d&&c.x<=e&&c.y>=g&&c.y<=m?[[d,m],[e,m],[e,g],[d,g]]:[]).point=a[f]});return b}function c(a){return a.map(function(a,b){return{x:1E-6*Math.round(e(a,b)/1E-6),y:1E-6*Math.round(m(a,b)/1E-6),i:b}})}var d=ua,g=ld,e=d,m=g,f=ii;if(a)return b(a);b.links=function(a){return mf(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})};b.triangles=function(a){var b=[];mf(c(a)).cells.forEach(function(c,d){var g=c.site;c=c.edges.sort(gh);var e=-1,m=c.length,f=
c[m-1].edge;for(f=f.l===g?f.r:f.l;++e<m;){var n=f;f=c[e].edge;f=f.l===g?f.r:f.l;d<n.i&&d<f.i&&0>(g.x-f.x)*(n.y-g.y)-(g.x-n.x)*(f.y-g.y)&&b.push([a[d],a[n.i],a[f.i]])}});return b};b.x=function(a){return arguments.length?(e=ra(d=a),b):d};b.y=function(a){return arguments.length?(m=ra(g=a),b):g};b.clipExtent=function(a){if(!arguments.length)return f===ii?null:f;f=null==a?ii:a;return b};b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):f===ii?null:f&&f[1]};return b};var ii=[[-1E6,-1E6],
[1E6,1E6]];D.geom.delaunay=function(a){return D.geom.voronoi().triangles(a)};D.geom.quadtree=function(a,b,c,d,g){function e(a){function e(a,b,c,d,g,e,m,f){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var n=a.x,k=a.y;if(null!=n){if(!(.01>aa(n-c)+aa(k-d))){var w=a.point;a.x=a.y=a.point=null;h(a,w,n,k,g,e,m,f)}h(a,b,c,d,g,e,m,f)}else a.x=c,a.y=d,a.point=b}else h(a,b,c,d,g,e,m,f)}function h(a,b,c,d,g,m,f,n){var h=.5*(g+f),k=.5*(m+n),w=c>=h,l=d>=k,A=l<<1|w;a.leaf=!1;a=a.nodes[A]||(a.nodes[A]=Nh());w?g=h:f=h;l?m=
k:n=k;e(a,b,c,d,g,m,f,n)}var k=ra(m),w=ra(f),l;if(null!=b){var A=b;var t=c;var p=d;var I=g}else{p=I=-(A=t=Infinity);var r=[];var u=[];var x=a.length;if(n)for(l=0;l<x;++l){var q=a[l];q.x<A&&(A=q.x);q.y<t&&(t=q.y);q.x>p&&(p=q.x);q.y>I&&(I=q.y);r.push(q.x);u.push(q.y)}else for(l=0;l<x;++l){var M=+k(q=a[l],l);q=+w(q,l);M<A&&(A=M);q<t&&(t=q);M>p&&(p=M);q>I&&(I=q);r.push(M);u.push(q)}}M=p-A;q=I-t;M>q?I=t+M:p=A+q;var z=Nh();z.add=function(a){e(z,a,+k(a,++l),+w(a,l),A,t,p,I)};z.visit=function(a){cg(a,z,A,
t,p,I)};z.find=function(a){return Te(z,a[0],a[1],A,t,p,I)};l=-1;if(null==b){for(;++l<x;)e(z,a[l],r[l],u[l],A,t,p,I);--l}else a.forEach(z.add);r=u=a=q=null;return z}var m=ua,f=ld,n;if(n=arguments.length)return m=hh,f=Lh,3===n&&(g=c,d=b,c=b=0),e(a);e.x=function(a){return arguments.length?(m=a,e):m};e.y=function(a){return arguments.length?(f=a,e):f};e.extent=function(a){if(!arguments.length)return null==b?null:[[b,c],[d,g]];null==a?b=c=d=g=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],g=+a[1][1]);return e};
e.size=function(a){if(!arguments.length)return null==b?null:[d-b,g-c];null==a?b=c=d=g=null:(b=c=0,d=+a[0],g=+a[1]);return e};return e};D.interpolateRgb=pf;D.interpolateObject=Kg;D.interpolateNumber=sc;D.interpolateString=qf;var zi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sh=new RegExp(zi.source,"g");D.interpolate=tc;D.interpolators=[function(a,b){var c=typeof b;return("string"===c?zf.has(b)||/^(#|rgb\(|hsl\()/.test(b)?pf:qf:b instanceof ya?pf:Array.isArray(b)?dg:"object"===c&&isNaN(b)?Kg:sc)(a,
b)}];D.interpolateArray=dg;var gj=function(){return Sa},hj=D.map({linear:gj,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return od},cubic:function(){return Wa},sin:function(){return Fc},exp:function(){return Vc},circle:function(){return fg},elastic:function(a,b){2>arguments.length&&(b=.45);if(arguments.length)var c=b/ec*Math.asin(1/a);else a=1,c=b/4;return function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*ec/b)}},back:function(a){a||(a=1.70158);return function(b){return b*
b*((a+1)*b-a)}},bounce:function(){return gg}}),ge=D.map({"in":Sa,out:Uc,"in-out":eg,"out-in":function(a){return eg(Uc(a))}});D.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.slice(0,b):a;b=0<=b?a.slice(b+1):"in";c=hj.get(c)||gj;b=ge.get(b)||Sa;return ka(b(c.apply(null,bi.call(arguments,1))))};D.interpolateHcl=function(a,b){a=D.hcl(a);b=D.hcl(b);var c=a.h,d=a.c,g=a.l,e=b.h-c,m=b.c-d,f=b.l-g;isNaN(m)&&(m=0,d=isNaN(d)?b.c:d);isNaN(e)?(e=0,c=isNaN(c)?b.h:c):180<e?e-=360:-180>e&&(e+=360);return function(a){return ta(c+
e*a,d+m*a,g+f*a)+""}};D.interpolateHsl=function(a,b){a=D.hsl(a);b=D.hsl(b);var c=a.h,d=a.s,g=a.l,e=b.h-c,m=b.s-d,f=b.l-g;isNaN(m)&&(m=0,d=isNaN(d)?b.s:d);isNaN(e)?(e=0,c=isNaN(c)?b.h:c):180<e?e-=360:-180>e&&(e+=360);return function(a){return va(c+e*a,d+m*a,g+f*a)+""}};D.interpolateLab=function(a,b){a=D.lab(a);b=D.lab(b);var c=a.l,d=a.a,g=a.b,e=b.l-c,m=b.a-d,f=b.b-g;return function(a){return cb(c+e*a,d+m*a,g+f*a)+""}};D.interpolateRound=fh;D.transform=function(a){var b=fc.createElementNS(D.ns.prefix.svg,
"g");return(D.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Id(c?c.matrix:Gi)})(a)};Id.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Gi={a:1,b:0,c:0,d:1,e:0,f:0};D.interpolateTransform=hg;D.layout={};D.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(jb(a[c]));return b}};D.layout.chord=function(){function a(){var a=
{},c=[],w=D.range(m),l=[],A,t;d=[];g=[];var p=0;for(A=-1;++A<m;){var I=0;for(t=-1;++t<m;)I+=e[A][t];c.push(I);l.push(D.range(m));p+=I}n&&w.sort(function(a,b){return n(c[a],c[b])});h&&l.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})});p=(ec-f*m)/p;I=0;for(A=-1;++A<m;){var r=I;for(t=-1;++t<m;){var u=w[A],q=l[u][t],x=e[u][q],M=I,z=I+=x*p;a[u+"-"+q]={index:u,subindex:q,startAngle:M,endAngle:z,value:x}}g[u]={index:u,startAngle:r,endAngle:I,value:(I-r)/p};I+=f}for(A=-1;++A<m;)for(t=
A-1;++t<m;)w=a[A+"-"+t],l=a[t+"-"+A],(w.value||l.value)&&d.push(w.value<l.value?{source:l,target:w}:{source:w,target:l});k&&b()}function b(){d.sort(function(a,b){return k((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c={},d,g,e,m,f=0,n,h,k;c.matrix=function(a){if(!arguments.length)return e;m=(e=a)&&e.length;d=g=null;return c};c.padding=function(a){if(!arguments.length)return f;f=a;d=g=null;return c};c.sortGroups=function(a){if(!arguments.length)return n;n=a;d=g=null;return c};
c.sortSubgroups=function(a){if(!arguments.length)return h;h=a;d=null;return c};c.sortChords=function(a){if(!arguments.length)return k;k=a;d&&b();return c};c.chords=function(){d||a();return d};c.groups=function(){g||a();return g};return c};D.layout.force=function(){function a(a){return function(b,c,d,g){if(b.point!==a){d=b.cx-a.x;var e=b.cy-a.y;c=g-c;g=d*d+e*e;if(c*c/A<g)return g<w&&(c=b.charge/g,a.px-=d*c,a.py-=e*c),!0;b.point&&g&&g<w&&(c=b.pointCharge/g,a.px-=d*c,a.py-=e*c)}return!b.charge}}function b(a){a.px=
D.event.x;a.py=D.event.y;c.resume()}var c={},d=D.dispatch("start","tick","end"),g=[1,1],e,m,f=.9,n=De,h=ji,k=-30,w=Cd,l=.1,A=.64,t=[],p=[],I,r,u;c.tick=function(){if(.005>(m*=.99))return d.end({type:"end",alpha:m=0}),!0;var b=t.length,c=p.length,e,n;for(e=0;e<c;++e){var h=p[e];var w=h.source;var A=h.target;var q=A.x-w.x;var x=A.y-w.y;if(n=q*q+x*x)n=m*r[e]*((n=Math.sqrt(n))-I[e])/n,q*=n,x*=n,A.x-=q*(n=w.weight/(A.weight+w.weight)),A.y-=x*n,w.x+=q*(n=1-n),w.y+=x*n}if(n=m*l)if(q=g[0]/2,x=g[1]/2,e=-1,
n)for(;++e<b;)h=t[e],h.x+=(q-h.x)*n,h.y+=(x-h.y)*n;if(k)for(Oh(c=D.geom.quadtree(t),m,u),e=-1;++e<b;)(h=t[e]).fixed||c.visit(a(h));for(e=-1;++e<b;)h=t[e],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*f,h.y-=(h.py-(h.py=h.y))*f);d.tick({type:"tick",alpha:m})};c.nodes=function(a){if(!arguments.length)return t;t=a;return c};c.links=function(a){if(!arguments.length)return p;p=a;return c};c.size=function(a){if(!arguments.length)return g;g=a;return c};c.linkDistance=function(a){if(!arguments.length)return n;
n="function"===typeof a?a:+a;return c};c.distance=c.linkDistance;c.linkStrength=function(a){if(!arguments.length)return h;h="function"===typeof a?a:+a;return c};c.friction=function(a){if(!arguments.length)return f;f=+a;return c};c.charge=function(a){if(!arguments.length)return k;k="function"===typeof a?a:+a;return c};c.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(w);w=a*a;return c};c.gravity=function(a){if(!arguments.length)return l;l=+a;return c};c.theta=function(a){if(!arguments.length)return Math.sqrt(A);
A=a*a;return c};c.alpha=function(a){if(!arguments.length)return m;a=+a;m?m=0<a?a:0:0<a&&(d.start({type:"start",alpha:m=a}),D.timer(c.tick));return c};c.start=function(){function a(a,c){if(!w){w=Array(d);for(e=0;e<d;++e)w[e]=[];for(e=0;e<m;++e){var g=p[e];w[g.source.index].push(g.target);w[g.target.index].push(g.source)}}g=w[b];for(var e=-1,m=g.length,f;++e<m;)if(!isNaN(f=g[e][a]))return f;return Math.random()*c}var b,d=t.length,e=p.length,m=g[0],f=g[1],w,l;for(b=0;b<d;++b)(l=t[b]).index=b,l.weight=
0;for(b=0;b<e;++b)l=p[b],"number"==typeof l.source&&(l.source=t[l.source]),"number"==typeof l.target&&(l.target=t[l.target]),++l.source.weight,++l.target.weight;for(b=0;b<d;++b)l=t[b],isNaN(l.x)&&(l.x=a("x",m)),isNaN(l.y)&&(l.y=a("y",f)),isNaN(l.px)&&(l.px=l.x),isNaN(l.py)&&(l.py=l.y);I=[];if("function"===typeof n)for(b=0;b<e;++b)I[b]=+n.call(this,p[b],b);else for(b=0;b<e;++b)I[b]=n;r=[];if("function"===typeof h)for(b=0;b<e;++b)r[b]=+h.call(this,p[b],b);else for(b=0;b<e;++b)r[b]=h;u=[];if("function"===
typeof k)for(b=0;b<d;++b)u[b]=+k.call(this,t[b],b);else for(b=0;b<d;++b)u[b]=k;return c.resume()};c.resume=function(){return c.alpha(.1)};c.stop=function(){return c.alpha(0)};c.drag=function(){e||(e=D.behavior.drag().origin(Sa).on("dragstart.force",Kh).on("drag.force",b).on("dragend.force",jh));if(!arguments.length)return e;this.on("mouseover.force",Zf).on("mouseout.force",Bb).call(e)};return D.rebind(c,d,"on")};var De=20,ji=1,Cd=Infinity;D.layout.hierarchy=function(){function a(g){var e=[g],m=[],
f;for(g.depth=0;null!=(f=e.pop());)if(m.push(f),(h=c.call(a,f,f.depth))&&(n=h.length)){for(var n,h,k;0<=--n;)e.push(k=h[n]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0);f.children=h}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;rb(g,function(a){var c,g;b&&(c=a.children)&&c.sort(b);d&&(g=a.parent)&&(g.value+=a.value)});return m}var b=Jh,c=le,d=kf;a.sort=function(c){if(!arguments.length)return b;b=c;return a};a.children=function(b){if(!arguments.length)return c;c=b;return a};a.value=function(b){if(!arguments.length)return d;
d=b;return a};a.revalue=function(b){d&&(ke(b,function(a){a.children&&(a.value=0)}),rb(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0);if(c=b.parent)c.value+=b.value}));return b};return a};D.layout.partition=function(){function a(b,c,d,g){var e=b.children;b.x=c;b.y=b.depth*g;b.dx=d;b.dy=g;if(e&&(f=e.length)){var m=-1,f,n;for(d=b.value?d/b.value:0;++m<f;)a(n=e[m],c,b=n.value*d,g),c+=b}}function b(a){a=a.children;var c=0;if(a&&(g=a.length))for(var d=-1,g;++d<g;)c=Math.max(c,b(a[d]));
return 1+c}function c(c,e){c=d.call(this,c,e);a(c[0],0,g[0],g[1]/b(c[0]));return c}var d=D.layout.hierarchy(),g=[1,1];c.size=function(a){if(!arguments.length)return g;g=a;return c};return cc(c,d)};D.layout.pie=function(){function a(m){var f=m.length,n=m.map(function(c,d){return+b.call(a,c,d)}),h=+("function"===typeof d?d.apply(this,arguments):d),k=("function"===typeof g?g.apply(this,arguments):g)-h,w=Math.min(Math.abs(k)/f,+("function"===typeof e?e.apply(this,arguments):e)),l=w*(0>k?-1:1),A=(k-f*
l)/D.sum(n);f=D.range(f);var t=[],p;null!=c&&f.sort(c===Hi?function(a,b){return n[b]-n[a]}:function(a,b){return c(m[a],m[b])});f.forEach(function(a){t[a]={data:m[a],value:p=n[a],startAngle:h,endAngle:h+=p*A+l,padAngle:w}});return t}var b=Number,c=Hi,d=0,g=ec,e=0;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.sort=function(b){if(!arguments.length)return c;c=b;return a};a.startAngle=function(b){if(!arguments.length)return d;d=b;return a};a.endAngle=function(b){if(!arguments.length)return g;
g=b;return a};a.padAngle=function(b){if(!arguments.length)return e;e=b;return a};return a};var Hi={};D.layout.stack=function(){function a(f,n){if(!(l=f.length))return f;var h=f.map(function(c,d){return b.call(a,c,d)}),k=h.map(function(b){return b.map(function(b,c){return[e.call(a,b,c),m.call(a,b,c)]})}),w=c.call(a,k,n);h=D.permute(h,w);k=D.permute(k,w);n=d.call(a,k,n);w=h[0].length;var l,A,t,p;for(t=0;t<w;++t)for(g.call(a,h[0][t],p=n[t],k[0][t][1]),A=1;A<l;++A)g.call(a,h[A][t],p+=k[A-1][t][1],k[A][t][1]);
return f}var b=Sa,c=Pe,d=Hd,g=Vf,e=Na,m=Xb;a.values=function(c){if(!arguments.length)return b;b=c;return a};a.order=function(b){if(!arguments.length)return c;c="function"===typeof b?b:Bg.get(b)||Pe;return a};a.offset=function(b){if(!arguments.length)return d;d="function"===typeof b?b:Oc.get(b)||Hd;return a};a.x=function(b){if(!arguments.length)return e;e=b;return a};a.y=function(b){if(!arguments.length)return m;m=b;return a};a.out=function(b){if(!arguments.length)return g;g=b;return a};return a};
var Bg=D.map({"inside-out":function(a){var b=a.length,c=a.map(Dc),d=a.map(nf),g=D.range(b).sort(function(a,b){return c[a]-c[b]}),e=0,m=0,f=[],n=[];for(a=0;a<b;++a){var h=g[a];e<m?(e+=d[h],f.push(h)):(m+=d[h],n.push(h))}return n.reverse().concat(f)},reverse:function(a){return D.range(a.length).reverse()},"default":Pe}),Oc=D.map({silhouette:function(a){var b=a.length,c=a[0].length,d=[],g=0,e,m,f,n=[];for(m=0;m<c;++m){for(f=e=0;e<b;e++)f+=a[e][m][1];f>g&&(g=f);d.push(f)}for(m=0;m<c;++m)n[m]=(g-d[m])/
2;return n},wiggle:function(a){var b=a.length,c=a[0],d=c.length,g,e,m,f,n,h,k,w=[];w[0]=h=k=0;for(e=1;e<d;++e){for(m=g=0;g<b;++g)m+=a[g][e][1];var l=g=0;for(n=c[e][0]-c[e-1][0];g<b;++g){var A=0;for(f=(a[g][e][1]-a[g][e-1][1])/(2*n);A<g;++A)f+=(a[A][e][1]-a[A][e-1][1])/n;l+=f*a[g][e][1]}w[e]=h-=m?l/m*n:0;h<k&&(k=h)}for(e=0;e<d;++e)w[e]-=k;return w},expand:function(a){var b=a.length,c=a[0].length,d=1/b,g,e,m,f=[];for(e=0;e<c;++e){for(m=g=0;g<b;g++)m+=a[g][e][1];if(m)for(g=0;g<b;g++)a[g][e][1]/=m;else for(g=
0;g<b;g++)a[g][e][1]=d}for(e=0;e<c;++e)f[e]=0;return f},zero:Hd});D.layout.histogram=function(){function a(a,e){var m=[],f=a.map(c,this),n=d.call(this,f,e),h=g.call(this,n,f,e);e=-1;for(var k=f.length,w=h.length-1,l=b?1:1/k;++e<w;){var A=m[e]=[];A.dx=h[e+1]-(A.x=h[e]);A.y=0}if(0<w)for(e=-1;++e<k;)A=f[e],A>=n[0]&&A<=n[1]&&(A=m[D.bisect(h,A,1,w)-1],A.y+=l,A.push(a[e]));return m}var b=!0,c=Number,d=fa,g=Mh;a.value=function(b){if(!arguments.length)return c;c=b;return a};a.range=function(b){if(!arguments.length)return d;
d=ra(b);return a};a.bins=function(b){if(!arguments.length)return g;g="number"===typeof b?function(a){return of(a,b)}:ra(b);return a};a.frequency=function(c){if(!arguments.length)return b;b=!!c;return a};return a};D.layout.pack=function(){function a(a,e){a=b.call(this,a,e);e=a[0];var m=d[0],f=d[1],n=null==g?Math.sqrt:"function"===typeof g?g:function(){return g};e.x=e.y=0;rb(e,function(a){a.r=+n(a.value)});rb(e,Sg);if(c){var h=c*(g?1:Math.max(2*e.r/m,2*e.r/f))/2;rb(e,function(a){a.r+=h});rb(e,Sg);rb(e,
function(a){a.r-=h})}Uh(e,m/2,f/2,g?1:1/Math.max(2*e.r/m,2*e.r/f));return a}var b=D.layout.hierarchy().sort(Jd),c=0,d=[1,1],g;a.size=function(b){if(!arguments.length)return d;d=b;return a};a.radius=function(b){if(!arguments.length)return g;g=null==b||"function"===typeof b?b:+b;return a};a.padding=function(b){if(!arguments.length)return c;c=+b;return a};return cc(a,b)};D.layout.tree=function(){function a(a,h){a=e.call(this,a,h);h=a[0];var k=b(h);rb(k,c);k.parent.m=-k.z;ke(k,d);if(n)ke(h,g);else{var w=
h,l=h,A=h;ke(h,function(a){a.x<w.x&&(w=a);a.x>l.x&&(l=a);a.depth>A.depth&&(A=a)});var t=m(w,l)/2-w.x,p=f[0]/(l.x+m(l,w)/2+t),I=f[1]/(A.depth||1);ke(h,function(a){a.x=(a.x+t)*p;a.y=a.depth*I})}return a}function b(a){a={A:null,children:[a]};for(var b=[a],c;null!=(c=b.pop());)for(var d=c.children,g,e=0,m=d.length;e<m;++e)b.push((d[e]=g={_:d[e],parent:c,children:(g=d[e].children)&&g.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:e}).a=g);return a.children[0]}function c(a){var b=a.children,c=a.parent.children,
d=a.i?c[a.i-1]:null;if(b.length){for(var g=0,e=0,f=a.children,n=f.length,h;0<=--n;)h=f[n],h.z+=g,h.m+=g,g+=h.s+(e+=h.c);b=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+m(a._,d._),a.m=a.z-b):a.z=b}else d&&(a.z=d.z+m(a._,d._));b=a.parent;c=a.parent.A||c[0];if(d){e=g=a;f=g.parent.children[0];n=g.m;h=e.m;for(var k=d.m,w=f.m,l;d=Ze(d),g=$d(g),d&&g;){f=$d(f);e=Ze(e);e.a=a;l=d.z+k-g.z-n+m(d._,g._);if(0<l){var A=d.a.parent===a.parent?d.a:c,t=a,p=l,I=p/(t.i-A.i);t.c-=I;t.s+=p;A.c+=I;t.z+=p;t.m+=p;n+=l;h+=l}k+=d.m;
n+=g.m;w+=f.m;h+=e.m}d&&!Ze(e)&&(e.t=d,e.m+=k-h);g&&!$d(f)&&(f.t=g,f.m+=n-w,c=a)}b.A=c}function d(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function g(a){a.x*=f[0];a.y=a.depth*f[1]}var e=D.layout.hierarchy().sort(null).value(null),m=Tg,f=[1,1],n=null;a.separation=function(b){if(!arguments.length)return m;m=b;return a};a.size=function(b){if(!arguments.length)return n?null:f;n=null==(f=b)?g:null;return a};a.nodeSize=function(b){if(!arguments.length)return n?f:null;n=null==(f=b)?null:g;return a};return cc(a,
e)};D.layout.cluster=function(){function a(a,e){a=b.call(this,a,e);var m=a[0],f,n=0;rb(m,function(a){var b=a.children;b&&b.length?(a.x=$e(b),a.y=sg(b)):(a.x=f?n+=c(a,f):0,a.y=0,f=a)});e=nc(m);var h=ae(m),k=e.x-c(e,h)/2,w=h.x+c(h,e)/2;rb(m,g?function(a){a.x=(a.x-m.x)*d[0];a.y=(m.y-a.y)*d[1]}:function(a){a.x=(a.x-k)/(w-k)*d[0];a.y=(1-(m.y?a.y/m.y:1))*d[1]});return a}var b=D.layout.hierarchy().sort(null).value(null),c=Tg,d=[1,1],g=!1;a.separation=function(b){if(!arguments.length)return c;c=b;return a};
a.size=function(b){if(!arguments.length)return g?null:d;g=null==(d=b);return a};a.nodeSize=function(b){if(!arguments.length)return g?d:null;g=null!=(d=b);return a};return cc(a,b)};D.layout.treemap=function(){function a(a,b){for(var c=-1,d=a.length,g,e;++c<d;)e=(g=a[c]).value*(0>b?0:b),g.area=isNaN(e)||0>=e?0:e}function b(c){var g=c.children;if(g&&g.length){var e=h(c),m=[],f=g.slice(),n=Infinity,k,w="slice"===l?e.dx:"dice"===l?e.dy:"slice-dice"===l?c.depth&1?e.dy:e.dx:Math.min(e.dx,e.dy);a(f,e.dx*
e.dy/c.value);for(m.area=0;0<(c=f.length);){m.push(c=f[c-1]);m.area+=c.area;if(!(c="squarify"!==l)){c=w;for(var t=m.area,p=0,I=Infinity,r=-1,u=m.length;++r<u;)if(k=m[r].area)k<I&&(I=k),k>p&&(p=k);t*=t;c*=c;c=(k=t?Math.max(c*p*A/t,t/(c*I*A)):Infinity)<=n}c?(f.pop(),n=k):(m.area-=m.pop().area,d(m,w,e,!1),w=Math.min(e.dx,e.dy),m.length=m.area=0,n=Infinity)}m.length&&(d(m,w,e,!0),m.length=m.area=0);g.forEach(b)}}function c(b){var g=b.children;if(g&&g.length){var e=h(b),m=g.slice(),f=[];a(m,e.dx*e.dy/
b.value);for(f.area=0;b=m.pop();)f.push(b),f.area+=b.area,null!=b.z&&(d(f,b.z?e.dx:e.dy,e,!m.length),f.length=f.area=0);g.forEach(c)}}function d(a,b,c,d){var g=-1,e=a.length,f=c.x,n=c.y,h=b?m(a.area/b):0;if(b==c.dx){if(d||h>c.dy)h=c.dy;for(;++g<e;){var k=a[g];k.x=f;k.y=n;k.dy=h;f+=k.dx=Math.min(c.x+c.dx-f,h?m(k.area/h):0)}k.z=!0;k.dx+=c.x+c.dx-f;c.y+=h;c.dy-=h}else{if(d||h>c.dx)h=c.dx;for(;++g<e;)k=a[g],k.x=f,k.y=n,k.dx=h,n+=k.dy=Math.min(c.y+c.dy-n,h?m(k.area/h):0);k.z=!1;k.dy+=c.y+c.dy-n;c.x+=h;
c.dx-=h}}function g(d){d=w||e(d);var g=d[0];g.x=0;g.y=0;g.dx=f[0];g.dy=f[1];w&&e.revalue(g);a([g],g.dx*g.dy/g.value);(w?c:b)(g);k&&(w=d);return d}var e=D.layout.hierarchy(),m=Math.round,f=[1,1],n=null,h=Gb,k=!1,w,l="squarify",A=.5*(1+Math.sqrt(5));g.size=function(a){if(!arguments.length)return f;f=a;return g};g.padding=function(a){function b(b){var c=a.call(g,b,b.depth);return null==c?Gb(b):Gf(b,"number"===typeof c?[c,c,c,c]:c)}function c(b){return Gf(b,a)}if(!arguments.length)return n;var d;h=null==
(n=a)?Gb:"function"===(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c;return g};g.round=function(a){if(!arguments.length)return m!=Number;m=a?Math.round:Number;return g};g.sticky=function(a){if(!arguments.length)return k;k=a;w=null;return g};g.ratio=function(a){if(!arguments.length)return A;A=a;return g};g.mode=function(a){if(!arguments.length)return l;l=a+"";return g};return cc(g,e)};D.random={normal:function(a,b){var c=arguments.length;2>c&&(b=1);1>c&&(a=0);return function(){do{var c=2*Math.random()-
1;var d=2*Math.random()-1;d=c*c+d*d}while(!d||1<d);return a+b*c*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var a=D.random.normal.apply(D,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=D.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}};D.scale={};var aj={floor:Sa,ceil:Sa};D.scale.linear=function(){return Hb([0,1],[0,1],tc,!1)};var Wh={s:1,g:1,p:1,r:1,e:1};D.scale.log=
function(){return Ug(D.scale.linear().domain([0,1]),10,!0,[1,10])};var Bi=D.format(".0e"),bj={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};D.scale.pow=function(){return zd(D.scale.linear(),1,[0,1])};D.scale.sqrt=function(){return D.scale.pow().exponent(.5)};D.scale.ordinal=function(){return Nc([],{t:"range",a:[[]]})};D.scale.category10=function(){return D.scale.ordinal().range(Ii)};D.scale.category20=function(){return D.scale.ordinal().range(Ga)};D.scale.category20b=
function(){return D.scale.ordinal().range(Ji)};D.scale.category20c=function(){return D.scale.ordinal().range(ij)};var Ii=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(hc),Ga=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(hc),Ji=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,
8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(hc),ij=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(hc);D.scale.quantile=function(){return sh([],[])};D.scale.quantize=function(){return ye(0,1,[0,1])};D.scale.threshold=function(){return If([.5],[0,1])};D.scale.identity=function(){return Vg([0,1])};D.svg={};D.svg.arc=function(){function a(){var a=
Math.max(0,+c.apply(this,arguments)),h=Math.max(0,+d.apply(this,arguments)),k=m.apply(this,arguments)-bb,w=f.apply(this,arguments)-bb,l=Math.abs(w-k),A=k>w?0:1;if(h<a){var t=h;h=a;a=t}if(l>=zh)return b(h,A)+(a?b(a,1-A):"")+"Z";var p,I=t=0;l=[];if(p=(+n.apply(this,arguments)||0)/2){var r=e===Ch?Math.sqrt(a*a+h*h):+e.apply(this,arguments);A||(I*=-1);h&&(I=Ha(r/h*Math.sin(p)));a&&(t=Ha(r/a*Math.sin(p)))}if(h){r=h*Math.cos(k+I);p=h*Math.sin(k+I);var u=h*Math.cos(w-I);var q=h*Math.sin(w-I);var x=Math.abs(w-
k-2*I)<=ha?0:1;I&&Ad(r,p,u,q)===A^x&&(u=(k+w)/2,r=h*Math.cos(u),p=h*Math.sin(u),u=q=null)}else r=p=0;if(a){I=a*Math.cos(w-t);var M=a*Math.sin(w-t);var z=a*Math.cos(k+t);var y=a*Math.sin(k+t);var L=Math.abs(k-w+2*t)<=ha?0:1;t&&Ad(I,M,z,y)===1-A^L&&(z=(k+w)/2,I=a*Math.cos(z),M=a*Math.sin(z),z=y=null)}else I=M=0;if(.001<(t=Math.min(Math.abs(h-a)/2,+g.apply(this,arguments)))){x=a<h^A?0:1;L=null==z?[I,M]:null==u?[r,p]:Dg([r,p],[z,y],[u,q],[I,M]);k=r-L[0];w=p-L[1];var P=u-L[0],B=q-L[1];k=1/Math.sin(Math.acos((k*
P+w*B)/(Math.sqrt(k*k+w*w)*Math.sqrt(P*P+B*B)))/2);L=Math.sqrt(L[0]*L[0]+L[1]*L[1]);null!=u?(w=Math.min(t,(h-L)/(k+1)),P=Ib(null==z?[I,M]:[z,y],[r,p],h,w,A),B=Ib([u,q],[I,M],h,w,A),t===w?l.push("M",P[0],"A",w,",",w," 0 0,",x," ",P[1],"A",h,",",h," 0 ",1-A^Ad(P[1][0],P[1][1],B[1][0],B[1][1]),",",A," ",B[1],"A",w,",",w," 0 0,",x," ",B[0]):l.push("M",P[0],"A",w,",",w," 0 1,",x," ",B[0])):l.push("M",r,",",p);null!=z?(h=Math.min(t,(a-L)/(k-1)),z=Ib([r,p],[z,y],a,-h,A),u=Ib([I,M],null==u?[r,p]:[u,q],a,
-h,A),t===h?l.push("L",u[0],"A",h,",",h," 0 0,",x," ",u[1],"A",a,",",a," 0 ",A^Ad(u[1][0],u[1][1],z[1][0],z[1][1]),",",1-A," ",z[1],"A",h,",",h," 0 0,",x," ",z[0]):l.push("L",u[0],"A",h,",",h," 0 0,",x," ",z[0])):l.push("L",I,",",M)}else l.push("M",r,",",p),null!=u&&l.push("A",h,",",h," 0 ",x,",",A," ",u,",",q),l.push("L",I,",",M),null!=z&&l.push("A",a,",",a," 0 ",L,",",1-A," ",z,",",y);l.push("Z");return l.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+
b+" 0,"+a}var c=ze,d=T,g=Xh,e=Ch,m=wa,f=zc,n=th;a.innerRadius=function(b){if(!arguments.length)return c;c=ra(b);return a};a.outerRadius=function(b){if(!arguments.length)return d;d=ra(b);return a};a.cornerRadius=function(b){if(!arguments.length)return g;g=ra(b);return a};a.padRadius=function(b){if(!arguments.length)return e;e=b==Ch?Ch:ra(b);return a};a.startAngle=function(b){if(!arguments.length)return m;m=ra(b);return a};a.endAngle=function(b){if(!arguments.length)return f;f=ra(b);return a};a.padAngle=
function(b){if(!arguments.length)return n;n=ra(b);return a};a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+m.apply(this,arguments)+ +f.apply(this,arguments))/2-bb;return[Math.cos(b)*a,Math.sin(b)*a]};return a};var Ch="auto";D.svg.line=function(){return uh(Sa)};var Yh=D.map({linear:Yb,"linear-closed":function(a){return Yb(a)+"Z"},step:function(a){for(var b=0,c=a.length,d=a[0],g=[d[0],",",d[1]];++b<c;)g.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);1<c&&g.push("H",
d[0]);return g.join("")},"step-before":cf,"step-after":tg,basis:ug,"basis-open":function(a){if(4>a.length)return Yb(a);for(var b=[],c=-1,d=a.length,g,e=[0],m=[0];3>++c;)g=a[c],e.push(g[0]),m.push(g[1]);b.push(pc(df,e)+","+pc(df,m));for(--c;++c<d;)g=a[c],e.shift(),e.push(g[0]),m.shift(),m.push(g[1]),vg(b,e,m);return b.join("")},"basis-closed":function(a){for(var b,c=-1,d=a.length,g=d+4,e,m=[],f=[];4>++c;)e=a[c%d],m.push(e[0]),f.push(e[1]);b=[pc(df,m),",",pc(df,f)];for(--c;++c<g;)e=a[c%d],m.shift(),
m.push(e[0]),f.shift(),f.push(e[1]),vg(b,m,f);return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d=a[0][0],g=a[0][1],e=a[c][0]-d,m=a[c][1]-g,f=-1,n,h;++f<=c;)n=a[f],h=f/c,n[0]=b*n[0]+(1-b)*(d+h*e),n[1]=b*n[1]+(1-b)*(g+h*m);return ug(a)},cardinal:function(a,b){return 3>a.length?Yb(a):a[0]+be(a,yb(a,b))},"cardinal-open":function(a,b){return 4>a.length?Yb(a):a[1]+be(a.slice(1,-1),yb(a,b))},"cardinal-closed":function(a,b){return 3>a.length?Yb(a):a[0]+be((a.push(a[0]),a),yb([a[a.length-
2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=Yb(a);else{var b=a[0],c=[],d;var g=0;var e=a.length-1;var m=[];var f=a[1];for(d=m[0]=gd(a[0],f);++g<e;)m[g]=(d+(d=gd(f,f=a[g+1])))/2;m[g]=d;for(var n=-1,h=a.length-1;++n<h;)g=gd(a[n],a[n+1]),1E-6>aa(g)?m[n]=m[n+1]=0:(e=m[n]/g,f=m[n+1]/g,d=e*e+f*f,9<d&&(d=3*g/Math.sqrt(d),m[n]=d*e,m[n+1]=d*f));for(n=-1;++n<=h;)d=(a[Math.min(h,n+1)][0]-a[Math.max(0,n-1)][0])/(6*(1+m[n]*m[n])),c.push([d||0,m[n]*d||0]);a=b+be(a,c)}return a}});Yh.forEach(function(a,
b){b.key=a;b.closed=/-closed$/.test(a)});var Ci=[0,2/3,1/3,0],Di=[0,1/3,2/3,0],df=[0,1/6,2/3,1/6];D.svg.line.radial=function(){var a=uh(Zh);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};cf.reverse=tg;tg.reverse=cf;D.svg.area=function(){return Ae(Sa)};D.svg.area.radial=function(){var a=Ae(Zh);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};D.svg.chord=function(){function a(a,
e){var m=b(this,d,a,e);a=b(this,g,a,e);return"M"+m.p0+c(m.r,m.p1,m.a1-m.a0)+(m.a0==a.a0&&m.a1==a.a1?"Q 0,0 "+m.p0:"Q 0,0 "+a.p0+c(a.r,a.p1,a.a1-a.a0)+("Q 0,0 "+m.p0))+"Z"}function b(a,b,c,d){var g=b.call(a,c,d);b=e.call(a,g,d);c=m.call(a,g,d)-bb;a=f.call(a,g,d)-bb;return{r:b,a0:c,a1:a,p0:[b*Math.cos(c),b*Math.sin(c)],p1:[b*Math.cos(a),b*Math.sin(a)]}}function c(a,b,c){return"A"+a+","+a+" 0 "+ +(c>ha)+",1 "+b}var d=cd,g=yc,e=Wg,m=wa,f=zc;a.radius=function(b){if(!arguments.length)return e;e=ra(b);return a};
a.source=function(b){if(!arguments.length)return d;d=ra(b);return a};a.target=function(b){if(!arguments.length)return g;g=ra(b);return a};a.startAngle=function(b){if(!arguments.length)return m;m=ra(b);return a};a.endAngle=function(b){if(!arguments.length)return f;f=ra(b);return a};return a};D.svg.diagonal=function(){function a(a,g){var e=b.call(this,a,g);a=c.call(this,a,g);g=(e.y+a.y)/2;e=[e,{x:e.x,y:g},{x:a.x,y:g},a];e=e.map(d);return"M"+e[0]+"C"+e[1]+" "+e[2]+" "+e[3]}var b=cd,c=yc,d=vh;a.source=
function(c){if(!arguments.length)return b;b=ra(c);return a};a.target=function(b){if(!arguments.length)return c;c=ra(b);return a};a.projection=function(b){if(!arguments.length)return d;d=b;return a};return a};D.svg.diagonal.radial=function(){var a=D.svg.diagonal(),b=vh,c=a.projection;a.projection=function(a){return arguments.length?c(wg(b=a)):b};return a};D.svg.symbol=function(){function a(a,d){return(Ki.get(b.call(this,a,d))||ce)(c.call(this,a,d))}var b=Xg,c=ef;a.type=function(c){if(!arguments.length)return b;
b=ra(c);return a};a.size=function(b){if(!arguments.length)return c;c=ra(b);return a};return a};var Ki=D.map({circle:ce,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*ki));var b=a*ki;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/
Dh);var b=a*Dh/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Dh);var b=a*Dh/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});D.svg.symbolTypes=Ki.keys();var Dh=Math.sqrt(3),ki=Math.tan(30*ja),zb=[],Ei=0,Pf,Ia;zb.call=Da.call;zb.empty=Da.empty;zb.node=Da.node;zb.size=Da.size;D.transition=function(a){return arguments.length?Pf?a.transition():a:Zg.transition()};D.transition.prototype=zb;zb.select=function(a){var b=this.id,c=this.namespace,d=[],e,m,f;a=g(a);for(var n=
-1,h=this.length;++n<h;){d.push(e=[]);for(var k=this[n],w=-1,l=k.length;++w<l;)(f=k[w])&&(m=a.call(f,f.__data__,w,n))?("__data__"in f&&(m.__data__=f.__data__),Be(m,w,c,b,f[c][b]),e.push(m)):e.push(null)}return hd(d,c,b)};zb.selectAll=function(a){var b=this.id,c=this.namespace,d=[],g,e;a=m(a);for(var f=-1,n=this.length;++f<n;)for(var h=this[f],k=-1,w=h.length;++k<w;)if(g=h[k]){var l=g[c][b];var A=a.call(g,g.__data__,k,f);d.push(g=[]);for(var t=-1,p=A.length;++t<p;)(e=A[t])&&Be(e,t,c,b,l),g.push(e)}return hd(d,
c,b)};zb.filter=function(a){var b=[],c,d;"function"!==typeof a&&(a=X(a));for(var g=0,e=this.length;g<e;g++){b.push(c=[]);var m=this[g];for(var f=0,n=m.length;f<n;f++)(d=m[f])&&a.call(d,d.__data__,f,g)&&c.push(d)}return hd(b,this.namespace,this.id)};zb.tween=function(a,b){var c=this.id,d=this.namespace;return 2>arguments.length?this.node()[d][c].tween.get(a):R(this,null==b?function(b){b[d][c].tween.remove(a)}:function(g){g[d][c].tween.set(a,b)})};zb.attr=function(a,b){function c(){this.removeAttribute(f)}
function d(){this.removeAttributeNS(f.space,f.local)}function g(a){return null==a?c:(a+="",function(){var b=this.getAttribute(f),c;return b!==a&&(c=m(b,a),function(a){this.setAttribute(f,c(a))})})}function e(a){return null==a?d:(a+="",function(){var b=this.getAttributeNS(f.space,f.local),c;return b!==a&&(c=m(b,a),function(a){this.setAttributeNS(f.space,f.local,c(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var m="transform"==a?hg:tc,f=D.ns.qualify(a);return Yg(this,"attr."+
a,b,f.local?e:g)};zb.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(g));return d&&function(a){this.setAttribute(g,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(g.space,g.local));return d&&function(a){this.setAttributeNS(g.space,g.local,d(a))}}var g=D.ns.qualify(a);return this.tween("attr."+a,g.local?d:c)};zb.style=function(a,b,c){function d(){this.style.removeProperty(a)}var g=arguments.length;if(3>g){if("string"!==typeof a){2>g&&(b="");for(c in a)this.style(c,
a[c],b);return this}c=""}return Yg(this,"style."+a,b,function(b){return null==b?d:(b+="",function(){var d=wb.getComputedStyle(this,null).getPropertyValue(a),g;return d!==b&&(g=tc(d,b),function(b){this.style.setProperty(a,g(b),c)})})})};zb.styleTween=function(a,b,c){3>arguments.length&&(c="");return this.tween("style."+a,function(d,g){var e=b.call(this,d,g,wb.getComputedStyle(this,null).getPropertyValue(a));return e&&function(b){this.style.setProperty(a,e(b),c)}})};zb.text=function(a){return Yg(this,
"text",a,xg)};zb.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;2>this[a].count&&(b=this.parentNode)&&b.removeChild(this)})};zb.ease=function(a){var b=this.id,c=this.namespace;if(1>arguments.length)return this.node()[c][b].ease;"function"!==typeof a&&(a=D.ease.apply(D,arguments));return R(this,function(d){d[c][b].ease=a})};zb.delay=function(a){var b=this.id,c=this.namespace;return 1>arguments.length?this.node()[c][b].delay:R(this,"function"===typeof a?function(d,
g,e){d[c][b].delay=+a.call(d,d.__data__,g,e)}:(a=+a,function(d){d[c][b].delay=a}))};zb.duration=function(a){var b=this.id,c=this.namespace;return 1>arguments.length?this.node()[c][b].duration:R(this,"function"===typeof a?function(d,g,e){d[c][b].duration=Math.max(1,a.call(d,d.__data__,g,e))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))};zb.each=function(a,b){var c=this.id,d=this.namespace;if(2>arguments.length){var g=Ia,e=Pf;Pf=c;R(this,function(b,g,e){Ia=b[d][c];a.call(b,b.__data__,g,e)});Ia=
g;Pf=e}else R(this,function(g){g=g[d][c];(g.event||(g.event=D.dispatch("start","end","interrupt"))).on(a,b)});return this};zb.transition=function(){for(var a=this.id,b=++Ei,c=this.namespace,d=[],g,e,m,f,n=0,h=this.length;n<h;n++){d.push(g=[]);e=this[n];for(var k=0,w=e.length;k<w;k++){if(m=e[k])f=m[c][a],Be(m,k,c,b,{time:f.time,ease:f.ease,delay:f.delay+f.duration,duration:f.duration});g.push(m)}}return hd(d,c,b)};D.svg.axis=function(){function a(a){a.each(function(){var a=D.select(this),h=this.__chart__||
b,k=this.__chart__=b.copy(),w=null==f?k.ticks?k.ticks.apply(k,m):k.domain():f,l=null==n?k.tickFormat?k.tickFormat.apply(k,m):Sa:n,A=a.selectAll(".tick").data(w,k);w=A.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6);var t=D.transition(A.exit()).style("opacity",1E-6).remove(),p=D.transition(A.order()).style("opacity",1),I=Math.max(d,0)+e,r=yd(k);a=a.selectAll(".domain").data([0]);a=(a.enter().append("path").attr("class","domain"),D.transition(a));w.append("line");w.append("text");
var u=w.select("line"),q=p.select("line");A=A.select("text").text(l);var x=w.select("text"),M=p.select("text"),z="top"===c||"left"===c?-1:1;if("bottom"===c||"top"===c){l=wh;var y="x";var L="y";var P="x2";var B="y2";A.attr("dy",0>z?"0em":".71em").style("text-anchor","middle");a.attr("d","M"+r[0]+","+z*g+"V0H"+r[1]+"V"+z*g)}else l=$h,y="y",L="x",P="y2",B="x2",A.attr("dy",".32em").style("text-anchor",0>z?"end":"start"),a.attr("d","M"+z*g+","+r[0]+"H0V"+r[1]+"H"+z*g);u.attr(B,z*d);x.attr(L,z*I);q.attr(P,
0).attr(B,z*d);M.attr(y,0).attr(L,z*I);if(k.rangeBand){var C=k,Jb=C.rangeBand()/2;h=k=function(a){return C(a)+Jb}}else h.rangeBand?h=k:t.call(l,k,h);w.call(l,h,k);p.call(l,k,k)})}var b=D.scale.linear(),c=jj,d=6,g=6,e=3,m=[10],f=null,n;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(b){if(!arguments.length)return c;c=b in Jj?b+"":jj;return a};a.ticks=function(){if(!arguments.length)return m;m=arguments;return a};a.tickValues=function(b){if(!arguments.length)return f;
f=b;return a};a.tickFormat=function(b){if(!arguments.length)return n;n=b;return a};a.tickSize=function(b){var c=arguments.length;if(!c)return d;d=+b;g=+arguments[c-1];return a};a.innerTickSize=function(b){if(!arguments.length)return d;d=+b;return a};a.outerTickSize=function(b){if(!arguments.length)return g;g=+b;return a};a.tickPadding=function(b){if(!arguments.length)return e;e=+b;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var jj="bottom",Jj={top:1,right:1,bottom:1,
left:1};D.svg.brush=function(){function a(e){e.each(function(){var e=D.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),n=e.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=e.selectAll(".resize").data(t,
Sa);h.exit().remove();h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return kj[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");h.style("display",a.empty()?"none":null);e=D.transition(e);n=D.transition(n);m&&(h=yd(m),n.attr("x",h[0]).attr("width",h[1]-h[0]),c(e));f&&(h=yd(f),n.attr("y",h[0]).attr("height",h[1]-h[0]),
d(e));b(e)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+n[+/e$/.test(a)]+","+h[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",n[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",n[1]-n[0])}function d(a){a.select(".extent").attr("y",h[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function g(){function g(){var a=D.mouse(I),g=!1;E&&(a[0]+=E[0],a[1]+=E[1]);y||(D.event.altKey?(P||(P=[(n[0]+n[1])/2,(h[0]+h[1])/2]),B[0]=
n[+(a[0]<P[0])],B[1]=h[+(a[1]<P[1])]):P=null);z&&t(a,m,0)&&(c(q),g=!0);M&&t(a,f,1)&&(d(q),g=!0);g&&(b(q),u({type:"brush",mode:y?"move":"resize"}))}function t(a,b,c){var d=yd(b);b=d[0];var g=d[1];d=B[c];var e=c?h:n,m=e[1]-e[0];y&&(b-=d,g-=m+d);a=(c?A:l)?Math.max(b,Math.min(g,a[c])):a[c];y?b=(a+=d)+m:(P&&(d=Math.max(b,Math.min(g,2*P[c]-a))),d<a?(b=a,a=d):b=d);if(e[0]!=a||e[1]!=b)return c?w=null:k=null,e[0]=a,e[1]=b,!0}function p(){g();q.style("pointer-events","all").selectAll(".resize").style("display",
a.empty()?"none":null);D.select("body").style("cursor",null);C.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);L();u({type:"brushend"})}var I=this,r=D.select(D.event.target),u=e.of(I,arguments),q=D.select(I),x=r.datum(),z=!/^(n|s)$/.test(x)&&m,M=!/^(e|w)$/.test(x)&&f,y=r.classed("extent"),L=Va(),P,B=D.mouse(I),C=D.select(wb).on("keydown.brush",function(){32==D.event.keyCode&&(y||(P=null,B[0]-=
n[1],B[1]-=h[1],y=2),H())}).on("keyup.brush",function(){32==D.event.keyCode&&2==y&&(B[0]+=n[1],B[1]+=h[1],y=0,H())});if(D.event.changedTouches)C.on("touchmove.brush",g).on("touchend.brush",p);else C.on("mousemove.brush",g).on("mouseup.brush",p);q.interrupt().selectAll("*").interrupt();if(y)B[0]=n[0]-B[0],B[1]=h[0]-B[1];else if(x){var Jb=+/w$/.test(x);x=+/^n/.test(x);var E=[n[1-Jb]-B[0],h[1-x]-B[1]];B[0]=n[Jb];B[1]=h[x]}else D.event.altKey&&(P=B.slice());q.style("pointer-events","none").selectAll(".resize").style("display",
null);D.select("body").style("cursor",r.style("cursor"));u({type:"brushstart"});g()}var e=E(a,"brushstart","brush","brushend"),m=null,f=null,n=[0,0],h=[0,0],k,w,l=!0,A=!0,t=Li[0];a.event=function(a){a.each(function(){var a=e.of(this,arguments),b={x:n,y:h,i:k,j:w},c=this.__chart__||b;this.__chart__=b;Pf?D.select(this).transition().each("start.brush",function(){k=c.i;w=c.j;n=c.x;h=c.y;a({type:"brushstart"})}).tween("brush:brush",function(){var c=dg(n,b.x),d=dg(h,b.y);k=w=null;return function(g){n=b.x=
c(g);h=b.y=d(g);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){k=b.i;w=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(b){if(!arguments.length)return m;m=b;t=Li[!m<<1|!f];return a};a.y=function(b){if(!arguments.length)return f;f=b;t=Li[!m<<1|!f];return a};a.clamp=function(b){if(!arguments.length)return m&&f?[l,A]:m?l:f?A:null;m&&f?(l=!!b[0],A=!!b[1]):m?l=!!b:f&&(A=!!b);return a};
a.extent=function(b){if(!arguments.length){if(m)if(k){var c=k[0];var d=k[1]}else if(c=n[0],d=n[1],m.invert&&(c=m.invert(c),d=m.invert(d)),d<c){var g=c;c=d;d=g}if(f)if(w){var e=w[0];var l=w[1]}else e=h[0],l=h[1],f.invert&&(e=f.invert(e),l=f.invert(l)),l<e&&(g=e,e=l,l=g);return m&&f?[[c,e],[d,l]]:m?[c,d]:f&&[e,l]}m&&(c=b[0],d=b[1],f&&(c=c[0],d=d[0]),k=[c,d],m.invert&&(c=m(c),d=m(d)),d<c&&(g=c,c=d,d=g),c!=n[0]||d!=n[1])&&(n=[c,d]);f&&(e=b[0],l=b[1],m&&(e=e[1],l=l[1]),w=[e,l],f.invert&&(e=f(e),l=f(l)),
l<e&&(g=e,e=l,l=g),e!=h[0]||l!=h[1])&&(h=[e,l]);return a};a.clear=function(){a.empty()||(n=[0,0],h=[0,0],k=w=null);return a};a.empty=function(){return!!m&&n[0]==n[1]||!!f&&h[0]==h[1]};return D.rebind(a,e,"on")};var kj={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Li=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Mi=Y.format=Bh.timeFormat,lj=Mi.utc,mj=lj("%Y-%m-%dT%H:%M:%S.%LZ");Mi.iso=Date.prototype.toISOString&&
+new Date("2000-01-01T00:00:00.000Z")?Jf:mj;Jf.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Jf.toString=mj.toString;Y.second=tb(function(a){return new dc(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});Y.seconds=Y.second.range;Y.seconds.utc=Y.second.utc.range;Y.minute=tb(function(a){return new dc(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});Y.minutes=
Y.minute.range;Y.minutes.utc=Y.minute.utc.range;Y.hour=tb(function(a){var b=a.getTimezoneOffset()/60;return new dc(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});Y.hours=Y.hour.range;Y.hours.utc=Y.hour.utc.range;Y.month=tb(function(a){a=Y.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});Y.months=Y.month.range;Y.months.utc=Y.month.utc.range;var ai=[1E3,5E3,15E3,3E4,6E4,
3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],li=[[Y.second,1],[Y.second,5],[Y.second,15],[Y.second,30],[Y.minute,1],[Y.minute,5],[Y.minute,15],[Y.minute,30],[Y.hour,1],[Y.hour,3],[Y.hour,6],[Y.hour,12],[Y.day,1],[Y.day,2],[Y.week,1],[Y.month,1],[Y.month,3],[Y.year,1]],Kj=Mi.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",
function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",td]]),Gj={range:function(a,b,c){return D.range(Math.ceil(a/c)*c,+b,c).map(qc)},floor:Sa,ceil:Sa};li.year=Y.year;Y.scale=function(){return Kf(D.scale.linear(),li,Kj)};var nj=li.map(function(a){return[a[0].utc,a[1]]}),Lj=lj.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],
["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",td]]);nj.year=Y.year.utc;Y.scale.utc=function(){return Kf(D.scale.linear(),nj,Lj)};D.text=qd(function(a){return a.responseText});D.json=function(a,b){return Ue(a,"application/json",Lf,b)};D.html=function(a,b){return Ue(a,"text/html",Mf,b)};D.xml=qd(function(a){return a.responseXML});"function"===
typeof define&&define.amd?define(D):"object"===typeof module&&module.exports&&(module.exports=D);this.d3=D}();(function(h){function f(a){var d=this.internal=new b(this);d.loadConfig(a);d.beforeInit(a);d.init();d.afterInit(a);(function ia(a,b,c){Object.keys(a).forEach(function(d){b[d]=a[d].bind(c);0<Object.keys(a[d]).length&&ia(a[d],b[d],c)})})(c,this,this)}function b(a){this.d3=h.d3?h.d3:"undefined"!==typeof require?require("d3"):void 0;this.api=a;this.config=this.getDefaultConfig();this.data={};this.cache={};this.axes={}}function e(a){this.owner=a}function d(a,b){function c(a,b){a.attr("transform",function(a){return"translate("+
Math.ceil(b(a)+q)+", 0)"})}function d(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})}function g(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function e(a){var b=[];if(a.ticks)return a.ticks.apply(a,u);var c=a.domain();for(a=Math.ceil(c[0]);a<c[1];a++)b.push(a);0<b.length&&0<b[0]&&b.unshift(b[0]-(b[1]-b[0]));return b}function m(){var a=l.copy();if(b.isCategory){var c=l.domain();a.domain([c[0],c[1]-1])}return a}function f(a){a=r?r(a):a;return"undefined"!==typeof a?
a:""}function h(a){if(K)return K;var b={h:11.5,w:5.5};a.select("text").text(f).each(function(a){var c=this.getBoundingClientRect(),d=f(a);a=c.height;c=d?c.width/d.length:void 0;a&&c&&(b.h=a,b.w=c)}).text("");return K=b}function k(A){A.each(function(){function A(a,c){function d(a,b){e=void 0;for(var f=1;f<b.length;f++)if(" "===b.charAt(f)&&(e=f),g=b.substr(0,f+1),m=R.w*g.length,c<m)return d(a.concat(b.substr(0,e?e:f)),b.slice(e?e+1:f));return a.concat(b)}a=f(a);var g,e,m;if("[object Array]"===Object.prototype.toString.call(a))return a;
if(!c||0>=c)c=U?95:b.isCategory?Math.ceil(L(B[1])-L(B[0]))-12:110;return d([],a+"")}function r(a,b){var c=R.h;0===b&&(c="left"===t||"right"===t?-(R.h/2*(ia[a.index]-1)-3):".71em");return c}function u(a){a=l(a)+(z?0:q);return H[0]<a&&a<H[1]?6:0}var x=k.g=a.select(this),M=this.__chart__||l,L=this.__chart__=m(),B=p?p:e(L),C=x.selectAll(".tick").data(B,L),E=C.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),Q=C.exit().remove(),F=(b.withoutTransition?C:a.transition(C)).style("opacity",
1),H=l.rangeExtent?l.rangeExtent():g(l.range());var G=x.selectAll(".domain").data([0]);var V=(G.enter().append("path").attr("class","domain"),b.withoutTransition?G:a.transition(G));E.append("line");E.append("text");var X=E.select("line"),da=F.select("line"),K=E.select("text"),v=F.select("text");if(b.isCategory){q=Math.ceil((L(1)-L(0))/2);G=z?0:q;var Aa=z?q:0}else q=G=0;var R=h(x.select(".tick")),ia=[],U="left"===t||"right"===t;x=C.select("text");C=x.selectAll("tspan").data(function(a,c){a=b.tickMultiline?
A(a,b.tickWidth):[].concat(f(a));ia[c]=a.length;return a.map(function(a){return{index:c,splitted:a}})});C.enter().append("tspan");C.exit().remove();C.text(function(a){return a.splitted});var oa=b.tickTextRotate;switch(t){case "bottom":var ba=c;X.attr("y2",6);K.attr("y",9);da.attr("x1",G).attr("x2",G).attr("y2",u);v.attr("x",0).attr("y",oa?11.5-oa/15*2.5*(0<oa?1:-1):9).style("text-anchor",oa?0<oa?"start":"end":"middle").attr("transform",oa?"rotate("+oa+")":"");C.attr("x",0).attr("dy",r).attr("dx",
oa?8*Math.sin(oa/180*Math.PI):0);V.attr("d","M"+H[0]+","+y+"V0H"+H[1]+"V"+y);break;case "top":ba=c;X.attr("y2",-6);K.attr("y",-9);da.attr("x2",0).attr("y2",-6);v.attr("x",0).attr("y",-9);x.style("text-anchor","middle");C.attr("x",0).attr("dy","0em");V.attr("d","M"+H[0]+","+-y+"V0H"+H[1]+"V"+-y);break;case "left":ba=d;X.attr("x2",-6);K.attr("x",-9);da.attr("x2",-6).attr("y1",Aa).attr("y2",Aa);v.attr("x",-9).attr("y",q);x.style("text-anchor","end");C.attr("x",-9).attr("dy",r);V.attr("d","M"+-y+","+
H[0]+"H0V"+H[1]+"H"+-y);break;case "right":ba=d,X.attr("x2",6),K.attr("x",9),da.attr("x2",6).attr("y2",0),v.attr("x",9).attr("y",0),x.style("text-anchor","start"),C.attr("x",9).attr("dy",r),V.attr("d","M"+y+","+H[0]+"H0V"+H[1]+"H"+y)}if(L.rangeBand){var qa=L,Z=qa.rangeBand()/2;M=L=function(a){return qa(a)+Z}}else M.rangeBand?M=L:Q.call(ba,L);E.call(ba,M);F.call(ba,L)})}var l=a.scale.linear(),t="bottom",p=null,r,u,q=0,x=!0,z;b=b||{};var y=b.withOuterTick?6:0;k.scale=function(a){if(!arguments.length)return l;
l=a;return k};k.orient=function(a){if(!arguments.length)return t;t=a in{top:1,right:1,bottom:1,left:1}?a+"":"bottom";return k};k.tickFormat=function(a){if(!arguments.length)return r;r=a;return k};k.tickCentered=function(a){if(!arguments.length)return z;z=a;return k};k.tickOffset=function(){return q};k.tickInterval=function(){if(b.isCategory)var a=2*q;else a=k.g.select("path.domain").node().getTotalLength()-2*y,a/=k.g.selectAll("line").size();return Infinity===a?0:a};k.ticks=function(){if(!arguments.length)return u;
u=arguments;return k};k.tickCulling=function(a){if(!arguments.length)return x;x=a;return k};k.tickValues=function(a){if("function"===typeof a)p=function(){return a(l.domain())};else{if(!arguments.length)return p;p=a}return k};return k}var k={version:"0.4.11"};k.generate=function(a){return new f(a)};k.chart={fn:f.prototype,internal:{fn:b.prototype,axis:{fn:e.prototype}}};var c=k.chart.fn;var a=k.chart.internal.fn;a.beforeInit=function(){};a.afterInit=function(){};a.init=function(){var a=this.config;
this.initParams();if(a.data_url)this.convertUrlToData(a.data_url,a.data_mimeType,a.data_headers,a.data_keys,this.initWithData);else if(a.data_json)this.initWithData(this.convertJsonToData(a.data_json,a.data_keys));else if(a.data_rows)this.initWithData(this.convertRowsToData(a.data_rows));else if(a.data_columns)this.initWithData(this.convertColumnsToData(a.data_columns));else throw Error("url or json or rows or columns is required.");};a.initParams=function(){var a=this.d3,b=this.config;this.clipId=
"c3-"+ +new Date+"-clip";this.clipIdForXAxis=this.clipId+"-xaxis";this.clipIdForYAxis=this.clipId+"-yaxis";this.clipIdForGrid=this.clipId+"-grid";this.clipIdForSubchart=this.clipId+"-subchart";this.clipPath=this.getClipPath(this.clipId);this.clipPathForXAxis=this.getClipPath(this.clipIdForXAxis);this.clipPathForYAxis=this.getClipPath(this.clipIdForYAxis);this.clipPathForGrid=this.getClipPath(this.clipIdForGrid);this.clipPathForSubchart=this.getClipPath(this.clipIdForSubchart);this.dragStart=null;
this.transiting=this.mouseover=this.cancelClick=this.flowing=this.dragging=!1;this.color=this.generateColor();this.levelColor=this.generateLevelColor();this.dataTimeFormat=b.data_xLocaltime?a.time.format:a.time.format.utc;this.axisTimeFormat=b.axis_x_localtime?a.time.format:a.time.format.utc;this.defaultAxisTimeFormat=this.axisTimeFormat.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],
["%-m/%-d",function(a){return a.getDay()&&1!==a.getDate()}],["%-m/%-d",function(a){return 1!==a.getDate()}],["%-m/%-d",function(a){return a.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]);this.hiddenTargetIds=[];this.hiddenLegendIds=[];this.focusedTargetIds=[];this.defocusedTargetIds=[];this.xOrient=b.axis_rotated?"left":"bottom";this.yOrient=b.axis_rotated?b.axis_y_inner?"top":"bottom":b.axis_y_inner?"right":"left";this.y2Orient=b.axis_rotated?b.axis_y2_inner?"bottom":"top":b.axis_y2_inner?"left":
"right";this.subXOrient=b.axis_rotated?"left":"bottom";this.isLegendRight="right"===b.legend_position;this.isLegendInset="inset"===b.legend_position;this.isLegendTop="top-left"===b.legend_inset_anchor||"top-right"===b.legend_inset_anchor;this.isLegendLeft="top-left"===b.legend_inset_anchor||"bottom-left"===b.legend_inset_anchor;this.legendItemHeight=this.legendItemWidth=this.legendStep=0;this.currentMaxTickWidths={x:0,y:0,y2:0};this.rotated_padding_left=30;this.rotated_padding_right=b.axis_rotated&&
!b.axis_x_show?0:30;this.rotated_padding_top=5;this.withoutFadeIn={};this.intervalForObserveInserted=void 0;this.axes.subx=a.selectAll([])};a.initChartElements=function(){this.initBar&&this.initBar();this.initLine&&this.initLine();this.initArc&&this.initArc();this.initGauge&&this.initGauge();this.initText&&this.initText()};a.initWithData=function(a){var b=this,c=b.d3,d=b.config,g=!0;b.axis=new e(b);b.initPie&&b.initPie();b.initBrush&&b.initBrush();b.initZoom&&b.initZoom();b.selectChart=d.bindto?"function"===
typeof d.bindto.node?d.bindto:c.select(d.bindto):c.selectAll([]);b.selectChart.empty()&&(b.selectChart=c.select(document.createElement("div")).style("opacity",0),b.observeInserted(b.selectChart),g=!1);b.selectChart.html("").classed("c3",!0);b.data.xs={};b.data.targets=b.convertDataToTargets(a);d.data_filter&&(b.data.targets=b.data.targets.filter(d.data_filter));d.data_hide&&b.addHiddenTargetIds(!0===d.data_hide?b.mapToIds(b.data.targets):d.data_hide);d.legend_hide&&b.addHiddenLegendIds(!0===d.legend_hide?
b.mapToIds(b.data.targets):d.legend_hide);b.hasType("gauge")&&(d.legend_show=!1);b.updateSizes();b.updateScales();b.x.domain(c.extent(b.getXDomain(b.data.targets)));b.y.domain(b.getYDomain(b.data.targets,"y"));b.y2.domain(b.getYDomain(b.data.targets,"y2"));b.subX.domain(b.x.domain());b.subY.domain(b.y.domain());b.subY2.domain(b.y2.domain());b.orgXDomain=b.x.domain();b.brush&&b.brush.scale(b.subX);d.zoom_enabled&&b.zoom.scale(b.x);b.svg=b.selectChart.append("svg").style("overflow","hidden").on("mouseenter",
function(){return d.onmouseover.call(b)}).on("mouseleave",function(){return d.onmouseout.call(b)});b.config.svg_classname&&b.svg.attr("class",b.config.svg_classname);a=b.svg.append("defs");b.clipChart=b.appendClip(a,b.clipId);b.clipXAxis=b.appendClip(a,b.clipIdForXAxis);b.clipYAxis=b.appendClip(a,b.clipIdForYAxis);b.clipGrid=b.appendClip(a,b.clipIdForGrid);b.clipSubchart=b.appendClip(a,b.clipIdForSubchart);b.updateSvgSize();a=b.main=b.svg.append("g").attr("transform",b.getTranslate("main"));b.initSubchart&&
b.initSubchart();b.initTooltip&&b.initTooltip();b.initLegend&&b.initLegend();b.initTitle&&b.initTitle();a.append("text").attr("class",l.text+" "+l.empty).attr("text-anchor","middle").attr("dominant-baseline","middle");b.initRegion();b.initGrid();a.append("g").attr("clip-path",b.clipPath).attr("class",l.chart);d.grid_lines_front&&b.initGridLines();b.initEventRect();b.initChartElements();a.insert("rect",d.zoom_privileged?null:"g."+l.regions).attr("class",l.zoomRect).attr("width",b.width).attr("height",
b.height).style("opacity",0).on("dblclick.zoom",null);d.axis_x_extent&&b.brush.extent(b.getDefaultExtent());b.axis.init();b.updateTargets(b.data.targets);g&&(b.updateDimension(),b.config.oninit.call(b),b.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1}));b.bindResize();b.api.element=b.selectChart.node()};a.smoothLines=function(a,b){var c=this;"grid"===b&&a.each(function(){var a=c.d3.select(this),b=a.attr("x1"),d=a.attr("x2"),g=a.attr("y1"),
e=a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(d),y1:Math.ceil(g),y2:Math.ceil(e)})})};a.updateSizes=function(){var a=this.config,b=this.legend?this.getLegendHeight():0,c=this.legend?this.getLegendWidth():0,d=this.isLegendRight||this.isLegendInset?0:b,e=this.hasArcType(),f=a.axis_rotated||e?0:this.getHorizontalAxisHeight("x"),h=a.subchart_show&&!e?a.subchart_size_height+f:0;this.currentWidth=this.getCurrentWidth();this.currentHeight=this.getCurrentHeight();this.margin=a.axis_rotated?{top:this.getHorizontalAxisHeight("y2")+
this.getCurrentPaddingTop(),right:e?0:this.getCurrentPaddingRight(),bottom:this.getHorizontalAxisHeight("y")+d+this.getCurrentPaddingBottom(),left:h+(e?0:this.getCurrentPaddingLeft())}:{top:4+this.getCurrentPaddingTop(),right:e?0:this.getCurrentPaddingRight(),bottom:f+h+d+this.getCurrentPaddingBottom(),left:e?0:this.getCurrentPaddingLeft()};this.margin2=a.axis_rotated?{top:this.margin.top,right:NaN,bottom:20+d,left:this.rotated_padding_left}:{top:this.currentHeight-h-d,right:NaN,bottom:f+d,left:this.margin.left};
this.margin3={top:0,right:NaN,bottom:0,left:0};this.updateSizeForLegend&&this.updateSizeForLegend(b,c);this.width=this.currentWidth-this.margin.left-this.margin.right;this.height=this.currentHeight-this.margin.top-this.margin.bottom;0>this.width&&(this.width=0);0>this.height&&(this.height=0);this.width2=a.axis_rotated?this.margin.left-this.rotated_padding_left-this.rotated_padding_right:this.width;this.height2=a.axis_rotated?this.height:this.currentHeight-this.margin2.top-this.margin2.bottom;0>this.width2&&
(this.width2=0);0>this.height2&&(this.height2=0);this.arcWidth=this.width-(this.isLegendRight?c+10:0);this.arcHeight=this.height-(this.isLegendRight?0:10);this.hasType("gauge")&&!a.gauge_fullCircle&&(this.arcHeight+=this.height-this.getGaugeLabelHeight());this.updateRadius&&this.updateRadius();this.isLegendRight&&e&&(this.margin3.left=this.arcWidth/2+1.1*this.radiusExpanded)};a.updateTargets=function(a){this.updateTargetsForText(a);this.updateTargetsForBar(a);this.updateTargetsForLine(a);this.hasArcType()&&
this.updateTargetsForArc&&this.updateTargetsForArc(a);this.updateTargetsForSubchart&&this.updateTargetsForSubchart(a);this.showTargets()};a.showTargets=function(){var a=this;a.svg.selectAll("."+l.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration).style("opacity",1)};a.redraw=function(a,b){var c=this,d=c.main,g=c.d3,e=c.config,m=c.getShapeIndices(c.isAreaType),f=c.getShapeIndices(c.isBarType),h=c.getShapeIndices(c.isLineType),k=c.hasArcType(),
t,p,r=c.filterTargetsToShow(c.data.targets),u,q,x=c.xv.bind(c);a=a||{};var z=F(a,"withY",!0);var y=F(a,"withSubchart",!0);var B=F(a,"withTransition",!0);var C=F(a,"withTransform",!1);var E=F(a,"withUpdateXDomain",!1);var H=F(a,"withUpdateOrgXDomain",!1);var G=F(a,"withTrimXDomain",!0);var K=F(a,"withUpdateXAxis",E);var Ea=F(a,"withLegend",!1);var Qa=F(a,"withEventRect",!0);var Ha=F(a,"withDimension",!0);var la=F(a,"withTransitionForExit",B);var W=F(a,"withTransitionForAxis",B);var ya=B?e.transition_duration:
0;la=la?ya:0;b=b||c.axis.generateTransitions(W?ya:0);Ea&&e.legend_show?c.updateLegend(c.mapToIds(c.data.targets),a,b):Ha&&c.updateDimension(!0);c.isCategorized()&&0===r.length&&c.x.domain([0,c.axes.x.selectAll(".tick").size()]);r.length?(c.updateXDomain(r,E,H,G),e.axis_x_tick_values||(u=c.axis.updateXAxisTickValues(r))):(c.xAxis.tickValues([]),c.subXAxis.tickValues([]));e.zoom_rescale&&!a.flow&&(q=c.x.orgDomain());c.y.domain(c.getYDomain(r,"y",q));c.y2.domain(c.getYDomain(r,"y2",q));!e.axis_y_tick_values&&
e.axis_y_tick_count&&c.yAxis.tickValues(c.axis.generateTickValues(c.y.domain(),e.axis_y_tick_count));!e.axis_y2_tick_values&&e.axis_y2_tick_count&&c.y2Axis.tickValues(c.axis.generateTickValues(c.y2.domain(),e.axis_y2_tick_count));c.axis.redraw(b,k);c.axis.updateLabels(B);if((E||K)&&r.length)if(e.axis_x_tick_culling&&u){for(B=1;B<u.length;B++)if(u.length/B<e.axis_x_tick_culling_max){var Pa=B;break}c.svg.selectAll("."+l.axisX+" .tick text").each(function(a){a=u.indexOf(a);0<=a&&g.select(this).style("display",
a%Pa?"none":"block")})}else c.svg.selectAll("."+l.axisX+" .tick text").style("display","block");var va=c.generateDrawArea?c.generateDrawArea(m,!1):void 0;var Ka=c.generateDrawBar?c.generateDrawBar(f):void 0;var ta=c.generateDrawLine?c.generateDrawLine(h,!1):void 0;var qb=c.generateXYForText(m,f,h,!0);var cb=c.generateXYForText(m,f,h,!1);z&&(c.subY.domain(c.getYDomain(r,"y")),c.subY2.domain(c.getYDomain(r,"y2")));c.updateXgridFocus();d.select("text."+l.text+"."+l.empty).attr("x",c.width/2).attr("y",
c.height/2).text(e.data_empty_label_text).transition().style("opacity",r.length?0:1);c.updateGrid(ya);c.updateRegion(ya);c.updateBar(la);c.updateLine(la);c.updateArea(la);c.updateCircle();c.hasDataLabel()&&c.updateText(la);c.redrawTitle&&c.redrawTitle();c.redrawArc&&c.redrawArc(ya,la,C);c.redrawSubchart&&c.redrawSubchart(y,b,ya,la,m,f,h);d.selectAll("."+l.selectedCircles).filter(c.isBarType.bind(c)).selectAll("circle").remove();e.interaction_enabled&&!a.flow&&Qa&&(c.redrawEventRect(),c.updateZoom&&
c.updateZoom());c.updateCircleY();var N=(c.config.axis_rotated?c.circleY:c.circleX).bind(c);var v=(c.config.axis_rotated?c.circleX:c.circleY).bind(c);a.flow&&(p=c.generateFlow({targets:r,flow:a.flow,duration:a.flow.duration,drawBar:Ka,drawLine:ta,drawArea:va,cx:N,cy:v,xv:x,xForText:qb,yForText:cb}));(ya||p)&&c.isTabVisible()?g.transition().duration(ya).each(function(){var b=[];[c.redrawBar(Ka,!0),c.redrawLine(ta,!0),c.redrawArea(va,!0),c.redrawCircle(N,v,!0),c.redrawText(qb,cb,a.flow,!0),c.redrawRegion(!0),
c.redrawGrid(!0)].forEach(function(a){a.forEach(function(a){b.push(a)})});t=c.generateWait();b.forEach(function(a){t.add(a)})}).call(t,function(){p&&p();e.onrendered&&e.onrendered.call(c)}):(c.redrawBar(Ka),c.redrawLine(ta),c.redrawArea(va),c.redrawCircle(N,v),c.redrawText(qb,cb,a.flow),c.redrawRegion(),c.redrawGrid(),e.onrendered&&e.onrendered.call(c));c.mapToIds(c.data.targets).forEach(function(a){c.withoutFadeIn[a]=!0})};a.updateAndRedraw=function(a){var b=this.config;a=a||{};a.withTransition=
F(a,"withTransition",!0);a.withTransform=F(a,"withTransform",!1);a.withLegend=F(a,"withLegend",!1);a.withUpdateXDomain=!0;a.withUpdateOrgXDomain=!0;a.withTransitionForExit=!1;a.withTransitionForTransform=F(a,"withTransitionForTransform",a.withTransition);this.updateSizes();if(!a.withLegend||!b.legend_show){var c=this.axis.generateTransitions(a.withTransitionForAxis?b.transition_duration:0);this.updateScales();this.updateSvgSize();this.transformAll(a.withTransitionForTransform,c)}this.redraw(a,c)};
a.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})};a.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type};a.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")};a.isCustomX=function(){var a=this.config;return!this.isTimeSeries()&&(a.data_x||C(a.data_xs))};a.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type};a.getTranslate=function(a){var b=this.config;if("main"===a){var c=
x(this.margin.left);var d=x(this.margin.top)}else"context"===a?(c=x(this.margin2.left),d=x(this.margin2.top)):"legend"===a?(c=this.margin3.left,d=this.margin3.top):"x"===a?(c=0,d=b.axis_rotated?0:this.height):"y"===a?(c=0,d=b.axis_rotated?this.height:0):"y2"===a?(c=b.axis_rotated?0:this.width,d=b.axis_rotated?1:0):"subx"===a?(c=0,d=b.axis_rotated?0:this.height2):"arc"===a&&(c=this.arcWidth/2,d=this.arcHeight/2);return"translate("+c+","+d+")"};a.initialOpacity=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?
1:0};a.initialOpacityForCircle=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?this.opacityForCircle(a):0};a.opacityForCircle=function(a){var b=this.config.point_show?1:0;return u(a.value)?this.isScatterType(a)?.5:b:0};a.opacityForText=function(){return this.hasDataLabel()?1:0};a.xx=function(a){return a?this.x(a.x):null};a.xv=function(a){var b=a.value;this.isTimeSeries()?b=this.parseDate(a.value):this.isCategorized()&&"string"===typeof a.value&&(b=this.config.axis_x_categories.indexOf(a.value));
return Math.ceil(this.x(b))};a.yv=function(a){return Math.ceil((a.axis&&"y2"===a.axis?this.y2:this.y)(a.value))};a.subxx=function(a){return a?this.subX(a.x):null};a.transformMain=function(a,b){if(b&&b.axisX)var c=b.axisX;else c=this.main.select("."+l.axisX),a&&(c=c.transition());if(b&&b.axisY)var d=b.axisY;else d=this.main.select("."+l.axisY),a&&(d=d.transition());b&&b.axisY2?b=b.axisY2:(b=this.main.select("."+l.axisY2),a&&(b=b.transition()));(a?this.main.transition():this.main).attr("transform",
this.getTranslate("main"));c.attr("transform",this.getTranslate("x"));d.attr("transform",this.getTranslate("y"));b.attr("transform",this.getTranslate("y2"));this.main.select("."+l.chartArcs).attr("transform",this.getTranslate("arc"))};a.transformAll=function(a,b){this.transformMain(a,b);this.config.subchart_show&&this.transformContext(a,b);this.legend&&this.transformLegend(a)};a.updateSvgSize=function(){var a=this.svg.select(".c3-brush .background");this.svg.attr("width",this.currentWidth).attr("height",
this.currentHeight);this.svg.selectAll(["#"+this.clipId,"#"+this.clipIdForGrid]).select("rect").attr("width",this.width).attr("height",this.height);this.svg.select("#"+this.clipIdForXAxis).select("rect").attr("x",this.getXAxisClipX.bind(this)).attr("y",this.getXAxisClipY.bind(this)).attr("width",this.getXAxisClipWidth.bind(this)).attr("height",this.getXAxisClipHeight.bind(this));this.svg.select("#"+this.clipIdForYAxis).select("rect").attr("x",this.getYAxisClipX.bind(this)).attr("y",this.getYAxisClipY.bind(this)).attr("width",
this.getYAxisClipWidth.bind(this)).attr("height",this.getYAxisClipHeight.bind(this));this.svg.select("#"+this.clipIdForSubchart).select("rect").attr("width",this.width).attr("height",a.size()?a.attr("height"):0);this.svg.select("."+l.zoomRect).attr("width",this.width).attr("height",this.height);this.selectChart.style("max-height",this.currentHeight+"px")};a.updateDimension=function(a){a||(this.config.axis_rotated?(this.axes.x.call(this.xAxis),this.axes.subx.call(this.subXAxis)):(this.axes.y.call(this.yAxis),
this.axes.y2.call(this.y2Axis)));this.updateSizes();this.updateScales();this.updateSvgSize();this.transformAll(!1)};a.observeInserted=function(a){var b=this;if("undefined"===typeof MutationObserver)h.console.error("MutationObserver not defined.");else{var c=new MutationObserver(function(d){d.forEach(function(d){"childList"===d.type&&d.previousSibling&&(c.disconnect(),b.intervalForObserveInserted=h.setInterval(function(){a.node().parentNode&&(h.clearInterval(b.intervalForObserveInserted),b.updateDimension(),
b.brush&&b.brush.update(),b.config.oninit.call(b),b.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),a.transition().style("opacity",1))},10))})});c.observe(a.node(),{attributes:!0,childList:!0,characterData:!0})}};a.bindResize=function(){var a=this,b=a.config;a.resizeFunction=a.generateResize();a.resizeFunction.add(function(){b.onresize.call(a)});b.resize_auto&&a.resizeFunction.add(function(){void 0!==a.resizeTimeout&&
h.clearTimeout(a.resizeTimeout);a.resizeTimeout=h.setTimeout(function(){delete a.resizeTimeout;a.api.flush()},100)});a.resizeFunction.add(function(){b.onresized.call(a)});if(h.attachEvent)h.attachEvent("onresize",a.resizeFunction);else if(h.addEventListener)h.addEventListener("resize",a.resizeFunction,!1);else{var c=h.onresize;c?c.add&&c.remove||(c=a.generateResize(),c.add(h.onresize)):c=a.generateResize();c.add(a.resizeFunction);h.onresize=c}};a.generateResize=function(){function a(){b.forEach(function(a){a()})}
var b=[];a.add=function(a){b.push(a)};a.remove=function(a){for(var c=0;c<b.length;c++)if(b[c]===a){b.splice(c,1);break}};return a};a.endall=function(a,b){var c=0;a.each(function(){++c}).each("end",function(){--c||b.apply(this,arguments)})};a.generateWait=function(){var a=[],b=function(b,c){var d=setInterval(function(){var b=0;a.forEach(function(a){if(a.empty())b+=1;else try{a.transition()}catch(V){b+=1}});b===a.length&&(clearInterval(d),c&&c())},10)};b.add=function(b){a.push(b)};return b};a.parseDate=
function(a){var b;a instanceof Date?b=a:"string"===typeof a?b=this.dataTimeFormat(this.config.data_xFormat).parse(a):"number"!==typeof a||isNaN(a)||(b=new Date(+a));b&&!isNaN(+b)||h.console.error("Failed to parse x '"+a+"' to Date object");return b};a.isTabVisible=function(){var a;"undefined"!==typeof document.hidden?a="hidden":"undefined"!==typeof document.mozHidden?a="mozHidden":"undefined"!==typeof document.msHidden?a="msHidden":"undefined"!==typeof document.webkitHidden&&(a="webkitHidden");return document[a]?
!1:!0};a.getDefaultConfig=function(){var a={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},
onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},
data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,
legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,
axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,
axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,
point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*
Math.PI/2,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,b,c,d){return this.getTooltipContent?
this.getTooltipContent(a,b,c,d):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};Object.keys(this.additionalConfig).forEach(function(b){a[b]=this.additionalConfig[b]},this);return a};a.additionalConfig={};a.loadConfig=function(a){function b(){var a=g.shift();if(a&&d&&"object"===typeof d&&a in d)return d=d[a],b();
if(!a)return d}var c=this.config,d,g,e;Object.keys(c).forEach(function(f){d=a;g=f.split("_");e=b();z(e)&&(c[f]=e)})};a.getScale=function(a,b,c){return(c?this.d3.time.scale():this.d3.scale.linear()).range([a,b])};a.getX=function(a,b,c,d){var g=this.getScale(a,b,this.isTimeSeries()),e=c?g.domain(c):g,f;this.isCategorized()?(d=d||function(){return 0},g=function(a,b){a=e(a)+d(a);return b?a:Math.ceil(a)}):g=function(a,b){a=e(a);return b?a:Math.ceil(a)};for(f in e)g[f]=e[f];g.orgDomain=function(){return e.domain()};
this.isCategorized()&&(g.domain=function(a){if(!arguments.length)return a=this.orgDomain(),[a[0],a[1]+1];e.domain(a);return g});return g};a.getY=function(a,b,c){a=this.getScale(a,b,this.isTimeSeriesY());c&&a.domain(c);return a};a.getYScale=function(a){return"y2"===this.axis.getId(a)?this.y2:this.y};a.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY};a.updateScales=function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0;a.xMax=b.axis_rotated?a.height:a.width;
a.yMin=b.axis_rotated?0:a.height;a.yMax=b.axis_rotated?a.width:1;a.subXMin=a.xMin;a.subXMax=a.xMax;a.subYMin=b.axis_rotated?0:a.height2;a.subYMax=b.axis_rotated?a.width2:1;a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()});a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain());a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain());a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()});a.subY=a.getY(a.subYMin,a.subYMax,
c?b.axis_y_default:a.subY.domain());a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain());a.xAxisTickFormat=a.axis.getXAxisTickFormat();a.xAxisTickValues=a.axis.getXAxisTickValues();a.yAxisTickValues=a.axis.getYAxisTickValues();a.y2AxisTickValues=a.axis.getY2AxisTickValues();a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer);a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer);a.yAxis=
a.axis.getYAxis(a.y,a.yOrient,b.axis_y_tick_format,a.yAxisTickValues,b.axis_y_tick_outer);a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,b.axis_y2_tick_format,a.y2AxisTickValues,b.axis_y2_tick_outer);c||(a.brush&&a.brush.scale(a.subX),b.zoom_enabled&&a.zoom.scale(a.x));a.updateArc&&a.updateArc()};a.getYDomainMin=function(a){var b=this,c=b.config,d=b.mapToIds(a),g=b.getValuesAsIdKeyed(a),e;if(0<c.data_groups.length){var f=b.hasNegativeValueInTargets(a);for(a=0;a<c.data_groups.length;a++){var h=c.data_groups[a].filter(function(a){return 0<=
d.indexOf(a)});if(0!==h.length){var k=h[0];f&&g[k]&&g[k].forEach(function(a,b){g[k][b]=0>a?a:0});for(e=1;e<h.length;e++){var l=h[e];g[l]&&g[l].forEach(function(a,c){b.axis.getId(l)!==b.axis.getId(k)||!g[k]||f&&0<+a||(g[k][c]+=+a)})}}}}return b.d3.min(Object.keys(g).map(function(a){return b.d3.min(g[a])}))};a.getYDomainMax=function(a){var b=this,c=b.config,d=b.mapToIds(a),g=b.getValuesAsIdKeyed(a),e;if(0<c.data_groups.length){var f=b.hasPositiveValueInTargets(a);for(a=0;a<c.data_groups.length;a++){var h=
c.data_groups[a].filter(function(a){return 0<=d.indexOf(a)});if(0!==h.length){var k=h[0];f&&g[k]&&g[k].forEach(function(a,b){g[k][b]=0<a?a:0});for(e=1;e<h.length;e++){var l=h[e];g[l]&&g[l].forEach(function(a,c){b.axis.getId(l)!==b.axis.getId(k)||!g[k]||f&&0>+a||(g[k][c]+=+a)})}}}}return b.d3.max(Object.keys(g).map(function(a){return b.d3.max(g[a])}))};a.getYDomain=function(a,b,c){var d=this,g=d.config;a=a.filter(function(a){return d.axis.getId(a.id)===b});var e=c?d.filterByXDomain(a,c):a,f="y2"===
b?g.axis_y2_min:g.axis_y_min,m="y2"===b?g.axis_y2_max:g.axis_y_max,h=d.getYDomainMin(e);a=d.getYDomainMax(e);var k,l="y2"===b?g.axis_y2_center:g.axis_y_center,A=d.hasType("bar",e)&&g.bar_zerobased||d.hasType("area",e)&&g.area_zerobased;c="y2"===b?g.axis_y2_inverted:g.axis_y_inverted;var p=d.hasDataLabel()&&g.axis_rotated;var r=d.hasDataLabel()&&!g.axis_rotated;h=u(f)?f:u(m)?h<m?h:m-10:h;a=u(m)?m:u(f)?f<a?a:f+10:a;if(0===e.length)return"y2"===b?d.y2.domain():d.y.domain();isNaN(h)&&(h=0);isNaN(a)&&
(a=h);h===a&&(0>h?a=0:h=0);e=0<=h&&0<=a;var q=0>=h&&0>=a;if(u(f)&&e||u(m)&&q)A=!1;A&&(e&&(h=0),q&&(a=0));f=Math.abs(a-h);m=k=.1*f;"undefined"!==typeof l&&(h=Math.max(Math.abs(h),Math.abs(a)),a=l+h,h=l-h);p?(l=d.getDataLabelLength(h,a,"width"),p=t(d.y.range()),l=[l[0]/p,l[1]/p],m+=l[1]/(1-l[0]-l[1])*f,k+=l[0]/(1-l[0]-l[1])*f):r&&(l=d.getDataLabelLength(h,a,"height"),m+=d.axis.convertPixelsToAxisPadding(l[1],f),k+=d.axis.convertPixelsToAxisPadding(l[0],f));"y"===b&&C(g.axis_y_padding)&&(m=d.axis.getPadding(g.axis_y_padding,
"top",m,f),k=d.axis.getPadding(g.axis_y_padding,"bottom",k,f));"y2"===b&&C(g.axis_y2_padding)&&(m=d.axis.getPadding(g.axis_y2_padding,"top",m,f),k=d.axis.getPadding(g.axis_y2_padding,"bottom",k,f));A&&(e&&(k=h),q&&(m=-a));g=[h-k,a+m];return c?g.reverse():g};a.getXDomainMin=function(a){var b=this,c=b.config;return z(c.axis_x_min)?b.isTimeSeries()?this.parseDate(c.axis_x_min):c.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})};a.getXDomainMax=function(a){var b=this,
c=b.config;return z(c.axis_x_max)?b.isTimeSeries()?this.parseDate(c.axis_x_max):c.axis_x_max:b.d3.max(a,function(a){return b.d3.max(a.values,function(a){return a.x})})};a.getXDomainPadding=function(a){var b=this.config;a=a[1]-a[0];if(this.isCategorized())a=0;else if(this.hasType("bar")){var c=this.getMaxDataCount();a=1<c?a/(c-1)/2:.5}else a*=.01;if("object"===typeof b.axis_x_padding&&C(b.axis_x_padding)){c=u(b.axis_x_padding.left)?b.axis_x_padding.left:a;var d=u(b.axis_x_padding.right)?b.axis_x_padding.right:
a}else c="number"===typeof b.axis_x_padding?d=b.axis_x_padding:d=a;return{left:c,right:d}};a.getXDomain=function(a){var b=[this.getXDomainMin(a),this.getXDomainMax(a)];a=b[0];var c=b[1];b=this.getXDomainPadding(b);var d=0,g=0;0!==a-c||this.isCategorized()||(this.isTimeSeries()?(a=new Date(.5*a.getTime()),c=new Date(1.5*c.getTime())):(a=0===a?1:.5*a,c=0===c?-1:1.5*c));if(a||0===a)d=this.isTimeSeries()?new Date(a.getTime()-b.left):a-b.left;if(c||0===c)g=this.isTimeSeries()?new Date(c.getTime()+b.right):
c+b.right;return[d,g]};a.updateXDomain=function(a,b,c,d,e){var g=this.config;c&&(this.x.domain(e?e:this.d3.extent(this.getXDomain(a))),this.orgXDomain=this.x.domain(),g.zoom_enabled&&this.zoom.scale(this.x).updateScaleExtent(),this.subX.domain(this.x.domain()),this.brush&&this.brush.scale(this.subX));b&&(this.x.domain(e?e:!this.brush||this.brush.empty()?this.orgXDomain:this.brush.extent()),g.zoom_enabled&&this.zoom.scale(this.x).updateScaleExtent());d&&this.x.domain(this.trimXDomain(this.x.orgDomain()));
return this.x.domain()};a.trimXDomain=function(a){var b=this.getZoomDomain(),c=b[0];b=b[1];a[0]<=c&&(a[1]=+a[1]+(c-a[0]),a[0]=c);b<=a[1]&&(a[0]=+a[0]-(a[1]-b),a[1]=b);return a};a.isX=function(a){var b=this.config;return b.data_x&&a===b.data_x||C(b.data_xs)&&H(b.data_xs,a)};a.isNotX=function(a){return!this.isX(a)};a.getXKey=function(a){var b=this.config;return b.data_x?b.data_x:C(b.data_xs)?b.data_xs[a]:null};a.getXValuesOfXKey=function(a,b){var c=this,d;(b&&C(b)?c.mapToIds(b):[]).forEach(function(b){c.getXKey(b)===
a&&(d=c.data.xs[b])});return d};a.getIndexByX=function(a){a=this.filterByX(this.data.targets,a);return a.length?a[0].index:null};a.getXValue=function(a,b){return a in this.data.xs&&this.data.xs[a]&&u(this.data.xs[a][b])?this.data.xs[a][b]:b};a.getOtherTargetXs=function(){var a=Object.keys(this.data.xs);return a.length?this.data.xs[a[0]]:null};a.getOtherTargetX=function(a){var b=this.getOtherTargetXs();return b&&a<b.length?b[a]:null};a.addXs=function(a){var b=this;Object.keys(a).forEach(function(c){b.config.data_xs[c]=
a[c]})};a.hasMultipleX=function(a){return 1<this.d3.set(Object.keys(a).map(function(b){return a[b]})).size()};a.isMultipleX=function(){return C(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")};a.addName=function(a){if(a){var b=this.config.data_names[a.id];a.name=void 0!==b?b:a.id}return a};a.getValueOnIndex=function(a,b){a=a.filter(function(a){return a.index===b});return a.length?a[0]:null};a.updateTargetX=function(a,b){var c=this;a.forEach(function(a){a.values.forEach(function(d,
g){d.x=c.generateTargetX(b[g],a.id,g)});c.data.xs[a.id]=b})};a.updateTargetXs=function(a,b){var c=this;a.forEach(function(a){b[a.id]&&c.updateTargetX([a],b[a.id])})};a.generateTargetX=function(a,b,c){return this.isTimeSeries()?a?this.parseDate(a):this.parseDate(this.getXValue(b,c)):this.isCustomX()&&!this.isCategorized()?u(a)?+a:this.getXValue(b,c):c};a.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}};a.updateXs=function(){var a=
this;a.data.targets.length&&(a.xs=[],a.data.targets[0].values.forEach(function(b){a.xs[b.index]=b.x}))};a.getPrevX=function(a){a=this.xs[a-1];return"undefined"!==typeof a?a:null};a.getNextX=function(a){a=this.xs[a+1];return"undefined"!==typeof a?a:null};a.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(a){return a.values.length})};a.getMaxDataCountTarget=function(a){var b=a.length,c=0,d;1<b?a.forEach(function(a){a.values.length>c&&(d=a,c=a.values.length)}):d=b?a[0]:null;return d};
a.getEdgeX=function(a){return a.length?[this.d3.min(a,function(a){return a.values[0].x}),this.d3.max(a,function(a){return a.values[a.values.length-1].x})]:[0,0]};a.mapToIds=function(a){return a.map(function(a){return a.id})};a.mapToTargetIds=function(a){return a?[].concat(a):this.mapToIds(this.data.targets)};a.hasTarget=function(a,b){a=this.mapToIds(a);var c;for(c=0;c<a.length;c++)if(a[c]===b)return!0;return!1};a.isTargetToShow=function(a){return 0>this.hiddenTargetIds.indexOf(a)};a.isLegendToShow=
function(a){return 0>this.hiddenLegendIds.indexOf(a)};a.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){return b.isTargetToShow(a.id)})};a.mapTargetsToUniqueXs=function(a){a=this.d3.set(this.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();a=this.isTimeSeries()?a.map(function(a){return new Date(+a)}):a.map(function(a){return+a});return a.sort(function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN})};a.addHiddenTargetIds=function(a){this.hiddenTargetIds=
this.hiddenTargetIds.concat(a)};a.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return 0>a.indexOf(b)})};a.addHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.concat(a)};a.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return 0>a.indexOf(b)})};a.getValuesAsIdKeyed=function(a){var b={};a.forEach(function(a){b[a.id]=[];a.values.forEach(function(c){b[a.id].push(c.value)})});return b};
a.checkValueInTargets=function(a,b){var c=Object.keys(a),d,g;for(d=0;d<c.length;d++){var e=a[c[d]].values;for(g=0;g<e.length;g++)if(b(e[g].value))return!0}return!1};a.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0>a})};a.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0<a})};a.isOrderDesc=function(){var a=this.config;return"string"===typeof a.data_order&&"desc"===a.data_order.toLowerCase()};a.isOrderAsc=function(){var a=
this.config;return"string"===typeof a.data_order&&"asc"===a.data_order.toLowerCase()};a.orderTargets=function(a){var b=this.config,c=this.isOrderAsc(),d=this.isOrderDesc();c||d?a.sort(function(a,b){var d=function(a,b){return a+Math.abs(b.value)};a=a.values.reduce(d,0);b=b.values.reduce(d,0);return c?b-a:a-b}):q(b.data_order)&&a.sort(b.data_order);return a};a.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return 0===a.x-b})};a.filterRemoveNull=
function(a){return a.filter(function(a){return u(a.value)})};a.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})};a.hasDataLabel=function(){var a=this.config;return"boolean"===typeof a.data_labels&&a.data_labels||"object"===typeof a.data_labels&&C(a.data_labels)?!0:!1};a.getDataLabelLength=function(a,b,c){var d=this,g=[0,0];d.selectChart.select("svg").selectAll(".dummy").data([a,b]).enter().append("text").text(function(a){return d.dataLabelFormat(a.id)(a)}).each(function(a,
b){g[b]=1.3*this.getBoundingClientRect()[c]}).remove();return g};a.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)};a.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)};a.findSameXOfValues=function(a,b){var c,d=a[b].x,g=[];for(c=b-1;0<=c&&d===a[c].x;c--)g.push(a[c]);for(c=b;c<a.length&&d===a[c].x;c++)g.push(a[c]);return g};a.findClosestFromTargets=function(a,b){var c=this;a=a.map(function(a){return c.findClosest(a.values,b)});return c.findClosest(a,
b)};a.findClosest=function(a,b){var c=this,d=c.config.point_sensitivity,g;a.filter(function(a){return a&&c.isBarType(a.id)}).forEach(function(a){var b=c.main.select("."+l.bars+c.getTargetSelectorSuffix(a.id)+" ."+l.bar+"-"+a.index).node();!g&&c.isWithinBar(b)&&(g=a)});a.filter(function(a){return a&&!c.isBarType(a.id)}).forEach(function(a){var e=c.dist(a,b);e<d&&(d=e,g=a)});return g};a.dist=function(a,b){var c=this.config,d=c.axis_rotated?1:0;c=c.axis_rotated?0:1;var g=this.circleY(a,a.index);a=this.x(a.x);
return Math.sqrt(Math.pow(a-b[d],2)+Math.pow(g-b[c],2))};a.convertValuesToStep=function(a){var b=[].concat(a),c;if(!this.isCategorized())return a;for(c=a.length+1;0<c;c--)b[c]=b[c-1];b[0]={x:b[0].x-1,value:b[0].value,id:b[0].id};b[a.length+1]={x:b[a.length].x+1,value:b[a.length].value,id:b[a.length].id};return b};a.updateDataAttributes=function(a,b){var c=this.config["data_"+a];if("undefined"===typeof b)return c;Object.keys(b).forEach(function(a){c[a]=b[a]});this.redraw({withLegend:!0});return c};
a.convertUrlToData=function(a,b,c,d,e){var g=this,f=b?b:"csv",m=g.d3.xhr(a);c&&Object.keys(c).forEach(function(a){m.header(a,c[a])});m.get(function(a,b){if(!b)throw Error(a.responseURL+" "+a.status+" ("+a.statusText+")");a="json"===f?g.convertJsonToData(JSON.parse(b.response),d):"tsv"===f?g.convertTsvToData(b.response):g.convertCsvToData(b.response);e.call(g,a)})};a.convertXsvToData=function(a,b){var c=b.parseRows(a);if(1===c.length){var d=[{}];c[0].forEach(function(a){d[0][a]=null})}else d=b.parse(a);
return d};a.convertCsvToData=function(a){return this.convertXsvToData(a,this.d3.csv)};a.convertTsvToData=function(a){return this.convertXsvToData(a,this.d3.tsv)};a.convertJsonToData=function(a,b){var c=this,d=[];if(b){if(b.x){var g=b.value.concat(b.x);c.config.data_x=b.x}else g=b.value;d.push(g);a.forEach(function(a){var b=[];g.forEach(function(d){d=c.findValueInJson(a,d);y(d)&&(d=null);b.push(d)});d.push(b)});b=c.convertRowsToData(d)}else Object.keys(a).forEach(function(b){d.push([b].concat(a[b]))}),
b=c.convertColumnsToData(d);return b};a.findValueInJson=function(a,b){b=b.replace(/\[(\w+)\]/g,".$1");b=b.replace(/^\./,"");b=b.split(".");for(var c=0;c<b.length;++c){var d=b[c];if(d in a)a=a[d];else return}return a};a.convertRowsToData=function(a){var b=a[0],c=[],d,g;for(d=1;d<a.length;d++){var e={};for(g=0;g<a[d].length;g++){if(y(a[d][g]))throw Error("Source data is missing a component at ("+d+","+g+")!");e[b[g]]=a[d][g]}c.push(e)}return c};a.convertColumnsToData=function(a){var b=[],c,d;for(c=
0;c<a.length;c++){var g=a[c][0];for(d=1;d<a[c].length;d++){y(b[d-1])&&(b[d-1]={});if(y(a[c][d]))throw Error("Source data is missing a component at ("+c+","+d+")!");b[d-1][g]=a[c][d]}}return b};a.convertDataToTargets=function(a,b){var c=this,d=c.config,g=c.d3.keys(a[0]).filter(c.isNotX,c),e=c.d3.keys(a[0]).filter(c.isX,c);g.forEach(function(g){var f=c.getXKey(g);c.isCustomX()||c.isTimeSeries()?0<=e.indexOf(f)?c.data.xs[g]=(b&&c.data.xs[g]?c.data.xs[g]:[]).concat(a.map(function(a){return a[f]}).filter(u).map(function(a,
b){return c.generateTargetX(a,g,b)})):d.data_x?c.data.xs[g]=c.getOtherTargetXs():C(d.data_xs)&&(c.data.xs[g]=c.getXValuesOfXKey(f,c.data.targets)):c.data.xs[g]=a.map(function(a,b){return b})});g.forEach(function(a){if(!c.data.xs[a])throw Error('x is not defined for id = "'+a+'".');});g=g.map(function(b,g){var e=d.data_idConverter(b);return{id:e,id_org:b,values:a.map(function(a,f){var m=c.getXKey(b);m=a[m];var h=null===a[b]||isNaN(a[b])?null:+a[b];if(c.isCustomX()&&c.isCategorized()&&0===g&&!y(m)){0===
g&&0===f&&(d.axis_x_categories=[]);var k=d.axis_x_categories.indexOf(m);-1===k&&(k=d.axis_x_categories.length,d.axis_x_categories.push(m))}else k=c.generateTargetX(m,b,f);if(y(a[b])||c.data.xs[b].length<=f)k=void 0;return{x:k,value:h,id:e}}).filter(function(a){return z(a.x)})}});g.forEach(function(a){d.data_xSort&&(a.values=a.values.sort(function(a,b){return(a.x||0===a.x?a.x:Infinity)-(b.x||0===b.x?b.x:Infinity)}));var b=0;a.values.forEach(function(a){a.index=b++});c.data.xs[a.id].sort(function(a,
b){return a-b})});c.hasNegativeValue=c.hasNegativeValueInTargets(g);c.hasPositiveValue=c.hasPositiveValueInTargets(g);d.data_type&&c.setTargetType(c.mapToIds(g).filter(function(a){return!(a in d.data_types)}),d.data_type);g.forEach(function(a){c.addCache(a.id_org,a)});return g};a.load=function(a,b){var c=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){c.setTargetType(a.id,b.types&&b.types[a.id]?b.types[a.id]:b.type)}),c.data.targets.forEach(function(b){for(var c=
0;c<a.length;c++)if(b.id===a[c].id){b.values=a[c].values;a.splice(c,1);break}}),c.data.targets=c.data.targets.concat(a));c.updateTargets(c.data.targets);c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});b.done&&b.done()};a.loadFromArgs=function(a){var b=this;a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.headers,a.keys,function(c){b.load(b.convertDataToTargets(c),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,
a.keys)),a):a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)};a.unload=function(a,b){var c=this;b||(b=function(){});(a=a.filter(function(a){return c.hasTarget(c.data.targets,a)}))&&0!==a.length?(c.svg.selectAll(a.map(function(a){return c.selectorTarget(a)})).transition().style("opacity",0).remove().call(c.endall,b),a.forEach(function(a){c.withoutFadeIn[a]=!1;c.legend&&c.legend.selectAll("."+
l.legendItem+c.getTargetSelectorSuffix(a)).remove();c.data.targets=c.data.targets.filter(function(b){return b.id!==a})})):b()};a.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a};a.initEventRect=function(){this.main.select("."+l.chart).append("g").attr("class",l.eventRects).style("fill-opacity",0)};a.redrawEventRect=function(){var a=this.config;var b=this.isMultipleX();a=this.main.select("."+l.eventRects).style("cursor",a.zoom_enabled?a.axis_rotated?
"ns-resize":"ew-resize":null).classed(l.eventRectsMultiple,b).classed(l.eventRectsSingle,!b);a.selectAll("."+l.eventRect).remove();this.eventRect=a.selectAll("."+l.eventRect);b?(b=this.eventRect.data([0]),this.generateEventRectsForMultipleXs(b.enter()),this.updateEventRect(b)):(b=this.getMaxDataCountTarget(this.data.targets),a.datum(b?b.values:[]),this.eventRect=a.selectAll("."+l.eventRect),b=this.eventRect.data(function(a){return a}),this.generateEventRectsForSingleX(b.enter()),this.updateEventRect(b),
b.exit().remove())};a.updateEventRect=function(a){var b=this,c=b.config,d;a=a||b.eventRect.data(function(a){return a});if(b.isMultipleX()){var g=d=0;var e=b.width;var f=b.height}else{if(!b.isCustomX()&&!b.isTimeSeries()||b.isCategorized()){var h=b.getEventRectWidth();g=function(a){return b.x(a.x)-h/2}}else b.updateXs(),h=function(a){var d=b.getPrevX(a.index);a=b.getNextX(a.index);if(null===d&&null===a)return c.axis_rotated?b.height:b.width;null===d&&(d=b.x.domain()[0]);null===a&&(a=b.x.domain()[1]);
return Math.max(0,(b.x(a)-b.x(d))/2)},g=function(a){var c=b.getPrevX(a.index),d=b.getNextX(a.index);a=b.data.xs[a.id][a.index];if(null===c&&null===d)return 0;null===c&&(c=b.x.domain()[0]);return(b.x(a)+b.x(c))/2};d=c.axis_rotated?0:g;g=c.axis_rotated?g:0;e=c.axis_rotated?b.width:h;f=c.axis_rotated?h:b.height}a.attr("class",b.classEvent.bind(b)).attr("x",d).attr("y",g).attr("width",e).attr("height",f)};a.generateEventRectsForSingleX=function(a){var b=this,c=b.d3,d=b.config;a.append("rect").attr("class",
b.classEvent.bind(b)).style("cursor",d.data_selection_enabled&&d.data_selection_grouped?"pointer":null).on("mouseover",function(a){a=a.index;b.dragging||b.flowing||b.hasArcType()||(d.point_focus_expand_enabled&&b.expandCircles(a,null,!0),b.expandBars(a,null,!0),b.main.selectAll("."+l.shape+"-"+a).each(function(a){d.data_onmouseover.call(b.api,a)}))}).on("mouseout",function(a){a=a.index;b.config&&!b.hasArcType()&&(b.hideXGridFocus(),b.hideTooltip(),b.unexpandCircles(),b.unexpandBars(),b.main.selectAll("."+
l.shape+"-"+a).each(function(a){d.data_onmouseout.call(b.api,a)}))}).on("mousemove",function(a){var g=a.index,e=b.svg.select("."+l.eventRect+"-"+g);b.dragging||b.flowing||b.hasArcType()||(b.isStepType(a)&&"step-after"===b.config.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,g))&&--g,a=b.filterTargetsToShow(b.data.targets).map(function(a){return b.addName(b.getValueOnIndex(a.values,g))}),d.tooltip_grouped&&(b.showTooltip(a,this),b.showXGridFocus(a)),(!d.tooltip_grouped||d.data_selection_enabled&&
!d.data_selection_grouped)&&b.main.selectAll("."+l.shape+"-"+g).each(function(){c.select(this).classed(l.EXPANDED,!0);d.data_selection_enabled&&e.style("cursor",d.data_selection_grouped?"pointer":null);d.tooltip_grouped||(b.hideXGridFocus(),b.hideTooltip(),d.data_selection_grouped||(b.unexpandCircles(g),b.unexpandBars(g)))}).filter(function(a){return b.isWithinShape(this,a)}).each(function(a){d.data_selection_enabled&&(d.data_selection_grouped||d.data_selection_isselectable(a))&&e.style("cursor",
"pointer");d.tooltip_grouped||(b.showTooltip([a],this),b.showXGridFocus([a]),d.point_focus_expand_enabled&&b.expandCircles(g,a.id,!0),b.expandBars(g,a.id,!0))}))}).on("click",function(a){var g=a.index;!b.hasArcType()&&b.toggleShape&&(b.cancelClick?b.cancelClick=!1:(b.isStepType(a)&&"step-after"===d.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,g))&&--g,b.main.selectAll("."+l.shape+"-"+g).each(function(a){if(d.data_selection_grouped||b.isWithinShape(this,a))b.toggleShape(this,a,g),b.config.data_onclick.call(b.api,
a,this)})))}).call(d.data_selection_draggable&&b.drag?c.behavior.drag().origin(Object).on("drag",function(){b.drag(c.mouse(this))}).on("dragstart",function(){b.dragstart(c.mouse(this))}).on("dragend",function(){b.dragend()}):function(){})};a.generateEventRectsForMultipleXs=function(a){function b(){c.svg.select("."+l.eventRect).style("cursor",null);c.hideXGridFocus();c.hideTooltip();c.unexpandCircles();c.unexpandBars()}var c=this,d=c.d3,g=c.config;a.append("rect").attr("x",0).attr("y",0).attr("width",
c.width).attr("height",c.height).attr("class",l.eventRect).on("mouseout",function(){c.config&&(c.hasArcType()||b())}).on("mousemove",function(){var a=c.filterTargetsToShow(c.data.targets);if(!c.dragging&&!c.hasArcType(a)){var e=d.mouse(this);var f=c.findClosestFromTargets(a,e);!c.mouseover||f&&f.id===c.mouseover.id||(g.data_onmouseout.call(c.api,c.mouseover),c.mouseover=void 0);if(f){if(a=c.isScatterType(f)||!g.tooltip_grouped?[f]:c.filterByX(a,f.x),a=a.map(function(a){return c.addName(a)}),c.showTooltip(a,
this),g.point_focus_expand_enabled&&c.expandCircles(f.index,f.id,!0),c.expandBars(f.index,f.id,!0),c.showXGridFocus(a),c.isBarType(f.id)||c.dist(f,e)<g.point_sensitivity)c.svg.select("."+l.eventRect).style("cursor","pointer"),c.mouseover||(g.data_onmouseover.call(c.api,f),c.mouseover=f)}else b()}}).on("click",function(){var a=c.filterTargetsToShow(c.data.targets),b;if(!c.hasArcType(a)){var e=d.mouse(this);(b=c.findClosestFromTargets(a,e))&&(c.isBarType(b.id)||c.dist(b,e)<g.point_sensitivity)&&c.main.selectAll("."+
l.shapes+c.getTargetSelectorSuffix(b.id)).selectAll("."+l.shape+"-"+b.index).each(function(){if(g.data_selection_grouped||c.isWithinShape(this,b))c.toggleShape(this,b,b.index),c.config.data_onclick.call(c.api,b,this)})}}).call(g.data_selection_draggable&&c.drag?d.behavior.drag().origin(Object).on("drag",function(){c.drag(d.mouse(this))}).on("dragstart",function(){c.dragstart(d.mouse(this))}).on("dragend",function(){c.dragend()}):function(){})};a.dispatchEvent=function(a,b,c){b="."+l.eventRect+(this.isMultipleX()?
"":"-"+b);b=this.main.select(b).node();var d=b.getBoundingClientRect(),g=d.left+(c?c[0]:0);c=d.top+(c?c[1]:0);d=document.createEvent("MouseEvents");d.initMouseEvent(a,!0,!0,h,0,g,c,g,c,!1,!1,!1,!1,0,null);b.dispatchEvent(d)};a.getCurrentWidth=function(){var a=this.config;return a.size_width?a.size_width:this.getParentWidth()};a.getCurrentHeight=function(){var a=this.config,b=a.size_height?a.size_height:this.getParentHeight();return 0<b?b:320/(this.hasType("gauge")&&!a.gauge_fullCircle?2:1)};a.getCurrentPaddingTop=
function(){var a=this.config;a=u(a.padding_top)?a.padding_top:0;this.title&&this.title.node()&&(a+=this.getTitlePadding());return a};a.getCurrentPaddingBottom=function(){var a=this.config;return u(a.padding_bottom)?a.padding_bottom:0};a.getCurrentPaddingLeft=function(a){var b=this.config;return u(b.padding_left)?b.padding_left:b.axis_rotated?b.axis_x_show?Math.max(p(this.getAxisWidthByAxisId("x",a)),40):1:!b.axis_y_show||b.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:p(this.getAxisWidthByAxisId("y",
a))};a.getCurrentPaddingRight=function(){var a=this.config,b=this.isLegendRight?this.getLegendWidth()+20:0;return u(a.padding_right)?a.padding_right+1:a.axis_rotated?10+b:!a.axis_y2_show||a.axis_y2_inner?2+b+(this.axis.getY2AxisLabelPosition().isOuter?20:0):p(this.getAxisWidthByAxisId("y2"))+b};a.getParentRectValue=function(a){for(var b=this.selectChart.node(),c;b&&"BODY"!==b.tagName;){try{c=b.getBoundingClientRect()[a]}catch(M){"width"===a&&(c=b.offsetWidth)}if(c)break;b=b.parentNode}return c};a.getParentWidth=
function(){return this.getParentRectValue("width")};a.getParentHeight=function(){var a=this.selectChart.style("height");return 0<a.indexOf("px")?+a.replace("px",""):0};a.getSvgLeft=function(a){var b=this.config,c=b.axis_rotated||!b.axis_rotated&&!b.axis_y_inner;c=(b=this.main.select("."+(b.axis_rotated?l.axisX:l.axisY)).node())&&c?b.getBoundingClientRect():{right:0};b=this.selectChart.node().getBoundingClientRect();var d=this.hasArcType();a=c.right-b.left-(d?0:this.getCurrentPaddingLeft(a));return 0<
a?a:0};a.getAxisWidthByAxisId=function(a,b){var c=this.axis.getLabelPositionById(a);return this.axis.getMaxTickWidth(a,b)+(c.isInner?20:40)};a.getHorizontalAxisHeight=function(a){var b=this.config,c=30;if("x"===a&&!b.axis_x_show)return 8;if("x"===a&&b.axis_x_height)return b.axis_x_height;if("y"===a&&!b.axis_y_show)return!b.legend_show||this.isLegendRight||this.isLegendInset?1:10;if("y2"===a&&!b.axis_y2_show)return this.rotated_padding_top;"x"===a&&!b.axis_rotated&&b.axis_x_tick_rotate&&(c=30+this.axis.getMaxTickWidth(a)*
Math.cos(Math.PI*(90-b.axis_x_tick_rotate)/180));"y"===a&&b.axis_rotated&&b.axis_y_tick_rotate&&(c=30+this.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-b.axis_y_tick_rotate)/180));return c+(this.axis.getLabelPositionById(a).isInner?0:10)+("y2"===a?-10:0)};a.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())};a.getShapeIndices=function(a){var b=this.config,c={},d=0,g,e;this.filterTargetsToShow(this.data.targets.filter(a,this)).forEach(function(a){for(g=0;g<b.data_groups.length;g++)if(!(0>
b.data_groups[g].indexOf(a.id)))for(e=0;e<b.data_groups[g].length;e++)if(b.data_groups[g][e]in c){c[a.id]=c[b.data_groups[g][e]];break}y(c[a.id])&&(c[a.id]=d++)});c.__max__=d-1;return c};a.getShapeX=function(a,b,c,d){var g=d?this.subX:this.x;return function(d){var e=d.id in c?c[d.id]:0;return d.x||0===d.x?g(d.x)-a*(b/2-e):0}};a.getShapeY=function(a){var b=this;return function(c){return(a?b.getSubYScale(c.id):b.getYScale(c.id))(c.value)}};a.getShapeOffset=function(a,b,c){var d=this,g=d.orderTargets(d.filterTargetsToShow(d.data.targets.filter(a,
d))),e=g.map(function(a){return a.id});return function(a,f){var m=c?d.getSubYScale(a.id):d.getYScale(a.id),h=m(0),k=h;g.forEach(function(c){var g=d.isStepType(a)?d.convertValuesToStep(c.values):c.values;if(c.id!==a.id&&b[c.id]===b[a.id]&&e.indexOf(c.id)<e.indexOf(a.id)){if("undefined"===typeof g[f]||+g[f].x!==+a.x)f=-1,g.forEach(function(b,c){b.x===a.x&&(f=c)});f in g&&0<=g[f].value*a.value&&(k+=m(g[f].value)-h)}});return k}};a.isWithinShape=function(a,b){var c=this.d3.select(a),d;this.isTargetToShow(b.id)?
"circle"===a.nodeName?d=this.isStepType(b)?this.isWithinStep(a,this.getYScale(b.id)(b.value)):this.isWithinCircle(a,1.5*this.pointSelectR(b)):"path"===a.nodeName&&(d=c.classed(l.bar)?this.isWithinBar(a):!0):d=!1;return d};a.getInterpolate=function(a){var b=this.isInterpolationType(this.config.spline_interpolation_type)?this.config.spline_interpolation_type:"cardinal";return this.isSplineType(a)?b:this.isStepType(a)?this.config.line_step_type:"linear"};a.initLine=function(){this.main.select("."+l.chart).append("g").attr("class",
l.chartLines)};a.updateTargetsForLine=function(a){var b=this,c=b.config,d=b.classChartLine.bind(b),g=b.classLines.bind(b),e=b.classAreas.bind(b),f=b.classCircles.bind(b),h=b.classFocus.bind(b);var k=b.main.select("."+l.chartLines).selectAll("."+l.chartLine).data(a).attr("class",function(a){return d(a)+h(a)}).enter().append("g").attr("class",d).style("opacity",0).style("pointer-events","none");k.append("g").attr("class",g);k.append("g").attr("class",e);k.append("g").attr("class",function(a){return b.generateClass(l.selectedCircles,
a.id)});k.append("g").attr("class",f).style("cursor",function(a){return c.data_selection_isselectable(a)?"pointer":null});a.forEach(function(a){b.main.selectAll("."+l.selectedCircles+b.getTargetSelectorSuffix(a.id)).selectAll("."+l.selectedCircle).each(function(b){b.value=a.values[b.index].value})})};a.updateLine=function(a){var b=this;b.mainLine=b.main.selectAll("."+l.lines).selectAll("."+l.line).data(b.lineData.bind(b));b.mainLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",
b.color);b.mainLine.style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null);b.mainLine.exit().transition().duration(a).style("opacity",0).remove()};a.redrawLine=function(a,b){return[(b?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]};a.generateDrawLine=function(a,b){var c=this,d=c.config,g=c.d3.svg.line(),e=c.generateGetLinePoints(a,b),
f=b?c.getSubYScale:c.getYScale;a=function(a){return(b?c.subxx:c.xx).call(c,a)};var m=function(a,b){return 0<d.data_groups.length?e(a,b)[0][1]:f.call(c,a.id)(a.value)};g=d.axis_rotated?g.x(m).y(a):g.x(a).y(m);d.line_connectNull||(g=g.defined(function(a){return null!=a.value}));return function(a){var e=d.line_connectNull?c.filterRemoveNull(a.values):a.values,m=b?c.x:c.subX,h=f.call(c,a.id),k=0,l=0;c.isLineType(a)?d.data_regions[a.id]?a=c.lineWithRegions(e,m,h,d.data_regions[a.id]):(c.isStepType(a)&&
(e=c.convertValuesToStep(e)),a=g.interpolate(c.getInterpolate(a))(e)):(e[0]&&(k=m(e[0].x),l=h(e[0].value)),a=d.axis_rotated?"M "+l+" "+k:"M "+k+" "+l);return a?a:"M 0 0"}};a.generateGetLinePoints=function(a,b){var c=this,d=c.config,g=c.getShapeX(0,a.__max__+1,a,!!b),e=c.getShapeY(!!b),f=c.getShapeOffset(c.isLineType,a,!!b),m=b?c.getSubYScale:c.getYScale;return function(a,b){var h=m.call(c,a.id)(0);b=f(a,b)||h;var k=g(a),l=e(a);d.axis_rotated&&(0<a.value&&l<h||0>a.value&&h<l)&&(l=h);return[[k,l-(h-
b)],[k,l-(h-b)],[k,l-(h-b)],[k,l-(h-b)]]}};a.lineWithRegions=function(a,b,c,d){function g(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<a&&a<=b[c].end)return!0;return!1}function e(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var f=this.config,m,h="M",k=this.isCategorized()?.5:0,l=[];if(z(d))for(m=0;m<d.length;m++)l[m]={},y(d[m].start)?l[m].start=a[0].x:l[m].start=this.isTimeSeries()?this.parseDate(d[m].start):d[m].start,y(d[m].end)?l[m].end=a[a.length-1].x:l[m].end=this.isTimeSeries()?
this.parseDate(d[m].end):d[m].end;var t=f.axis_rotated?function(a){return c(a.value)}:function(a){return b(a.x)};var A=f.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)};d=this.isTimeSeries()?function(a,d,g,m){var h=a.x.getTime();d=d.x-a.x;a=new Date(h+d*g);h=new Date(h+d*(g+m));g=f.axis_rotated?[[c(r(g)),b(a)],[c(r(g+m)),b(h)]]:[[b(a),c(r(g))],[b(h),c(r(g+m))]];return e(g)}:function(a,d,g,m){a=f.axis_rotated?[[c(r(g),!0),b(p(g))],[c(r(g+m),!0),b(p(g+m))]]:[[b(p(g),!0),c(r(g))],
[b(p(g+m),!0),c(r(g+m))]];return e(a)};for(m=0;m<a.length;m++)if(y(l)||!g(a[m].x,l))h+=" "+t(a[m])+" "+A(a[m]);else{var p=this.getScale(a[m-1].x+k,a[m].x+k,this.isTimeSeries());var r=this.getScale(a[m-1].value,a[m].value);var u=b(a[m].x)-b(a[m-1].x);var q=c(a[m].value)-c(a[m-1].value);u=Math.sqrt(Math.pow(u,2)+Math.pow(q,2));q=2/u;var x=2*q;for(u=q;1>=u;u+=x)h+=d(a[m-1],a[m],u,q)}return h};a.updateArea=function(a){var b=this,c=b.d3;b.mainArea=b.main.selectAll("."+l.areas).selectAll("."+l.area).data(b.lineData.bind(b));
b.mainArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){b.orgAreaOpacity=+c.select(this).style("opacity");return 0});b.mainArea.style("opacity",b.orgAreaOpacity);b.mainArea.exit().transition().duration(a).style("opacity",0).remove()};a.redrawArea=function(a,b){return[(b?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]};a.generateDrawArea=function(a,
b){var c=this,d=c.config,g=c.d3.svg.area(),e=c.generateGetAreaPoints(a,b),f=b?c.getSubYScale:c.getYScale;a=function(a){return(b?c.subxx:c.xx).call(c,a)};var m=function(a,b){return 0<d.data_groups.length?e(a,b)[0][1]:f.call(c,a.id)(c.getAreaBaseValue(a.id))},h=function(a,b){return 0<d.data_groups.length?e(a,b)[1][1]:f.call(c,a.id)(a.value)};g=d.axis_rotated?g.x0(m).x1(h).y(a):g.x(a).y0(d.area_above?0:m).y1(h);d.line_connectNull||(g=g.defined(function(a){return null!==a.value}));return function(a){var b=
d.line_connectNull?c.filterRemoveNull(a.values):a.values,e=0,f=0;c.isAreaType(a)?(c.isStepType(a)&&(b=c.convertValuesToStep(b)),a=g.interpolate(c.getInterpolate(a))(b)):(b[0]&&(e=c.x(b[0].x),f=c.getYScale(a.id)(b[0].value)),a=d.axis_rotated?"M "+f+" "+e:"M "+e+" "+f);return a?a:"M 0 0"}};a.getAreaBaseValue=function(){return 0};a.generateGetAreaPoints=function(a,b){var c=this,d=c.config,g=c.getShapeX(0,a.__max__+1,a,!!b),e=c.getShapeY(!!b),f=c.getShapeOffset(c.isAreaType,a,!!b),m=b?c.getSubYScale:
c.getYScale;return function(a,b){var h=m.call(c,a.id)(0);b=f(a,b)||h;var k=g(a),l=e(a);d.axis_rotated&&(0<a.value&&l<h||0>a.value&&h<l)&&(l=h);return[[k,b],[k,l-(h-b)],[k,l-(h-b)],[k,b]]}};a.updateCircle=function(){this.mainCircle=this.main.selectAll("."+l.circles).selectAll("."+l.circle).data(this.lineOrScatterData.bind(this));this.mainCircle.enter().append("circle").attr("class",this.classCircle.bind(this)).attr("r",this.pointR.bind(this)).style("fill",this.color);this.mainCircle.style("opacity",
this.initialOpacityForCircle.bind(this));this.mainCircle.exit().remove()};a.redrawCircle=function(a,b,c){var d=this.main.selectAll("."+l.selectedCircle);return[(c?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",a).attr("cy",b),(c?d.transition(Math.random().toString()):d).attr("cx",a).attr("cy",b)]};a.circleX=function(a){return a.x||0===a.x?this.x(a.x):null};a.updateCircleY=function(){var a=this;
if(0<a.config.data_groups.length){var b=a.getShapeIndices(a.isLineType);var c=a.generateGetLinePoints(b);a.circleY=function(a,b){return c(a,b)[0][1]}}else a.circleY=function(b){return a.getYScale(b.id)(b.value)}};a.getCircles=function(a,b){return(b?this.main.selectAll("."+l.circles+this.getTargetSelectorSuffix(b)):this.main).selectAll("."+l.circle+(u(a)?"-"+a:""))};a.expandCircles=function(a,b,c){var d=this.pointExpandedR.bind(this);c&&this.unexpandCircles();this.getCircles(a,b).classed(l.EXPANDED,
!0).attr("r",d)};a.unexpandCircles=function(a){var b=this,c=b.pointR.bind(b);b.getCircles(a).filter(function(){return b.d3.select(this).classed(l.EXPANDED)}).classed(l.EXPANDED,!1).attr("r",c)};a.pointR=function(a){var b=this.config;return this.isStepType(a)?0:q(b.point_r)?b.point_r(a):b.point_r};a.pointExpandedR=function(a){var b=this.config;return b.point_focus_expand_enabled?b.point_focus_expand_r?b.point_focus_expand_r:1.75*this.pointR(a):this.pointR(a)};a.pointSelectR=function(a){var b=this.config;
return q(b.point_select_r)?b.point_select_r(a):b.point_select_r?b.point_select_r:4*this.pointR(a)};a.isWithinCircle=function(a,b){var c=this.d3,d=c.mouse(a);c=c.select(a);a=+c.attr("cx");c=+c.attr("cy");return Math.sqrt(Math.pow(a-d[0],2)+Math.pow(c-d[1],2))<b};a.isWithinStep=function(a,b){return 30>Math.abs(b-this.d3.mouse(a)[1])};a.initBar=function(){this.main.select("."+l.chart).append("g").attr("class",l.chartBars)};a.updateTargetsForBar=function(a){var b=this.config,c=this.classChartBar.bind(this),
d=this.classBars.bind(this),g=this.classFocus.bind(this);this.main.select("."+l.chartBars).selectAll("."+l.chartBar).data(a).attr("class",function(a){return c(a)+g(a)}).enter().append("g").attr("class",c).style("opacity",0).style("pointer-events","none").append("g").attr("class",d).style("cursor",function(a){return b.data_selection_isselectable(a)?"pointer":null})};a.updateBar=function(a){var b=this,c=b.barData.bind(b),d=b.classBar.bind(b),g=b.initialOpacity.bind(b),e=function(a){return b.color(a.id)};
b.mainBar=b.main.selectAll("."+l.bars).selectAll("."+l.bar).data(c);b.mainBar.enter().append("path").attr("class",d).style("stroke",e).style("fill",e);b.mainBar.style("opacity",g);b.mainBar.exit().transition().duration(a).style("opacity",0).remove()};a.redrawBar=function(a,b){return[(b?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",a).style("fill",this.color).style("opacity",1)]};a.getBarW=function(a,b){var c=this.config;a="number"===typeof c.bar_width?c.bar_width:b?a.tickInterval()*
c.bar_width_ratio/b:0;return c.bar_width_max&&a>c.bar_width_max?c.bar_width_max:a};a.getBars=function(a,b){return(b?this.main.selectAll("."+l.bars+this.getTargetSelectorSuffix(b)):this.main).selectAll("."+l.bar+(u(a)?"-"+a:""))};a.expandBars=function(a,b,c){c&&this.unexpandBars();this.getBars(a,b).classed(l.EXPANDED,!0)};a.unexpandBars=function(a){this.getBars(a).classed(l.EXPANDED,!1)};a.generateDrawBar=function(a,b){var c=this.config,d=this.generateGetBarPoints(a,b);return function(a,b){a=d(a,b);
b=c.axis_rotated?1:0;var g=c.axis_rotated?0:1;return"M "+a[0][b]+","+a[0][g]+" L"+a[1][b]+","+a[1][g]+" L"+a[2][b]+","+a[2][g]+" L"+a[3][b]+","+a[3][g]+" z"}};a.generateGetBarPoints=function(a,b){var c=this,d=a.__max__+1,g=c.getBarW(b?c.subXAxis:c.xAxis,d),e=c.getShapeX(g,d,a,!!b),f=c.getShapeY(!!b),m=c.getShapeOffset(c.isBarType,a,!!b),h=b?c.getSubYScale:c.getYScale;return function(a,b){var d=h.call(c,a.id)(0);b=m(a,b)||d;var k=e(a),l=f(a);c.config.axis_rotated&&(0<a.value&&l<d||0>a.value&&d<l)&&
(l=d);return[[k,b],[k,l-(d-b)],[k+g,l-(d-b)],[k+g,b]]}};a.isWithinBar=function(a){var b=this.d3.mouse(a),c=a.getBoundingClientRect(),d=a.pathSegList.getItem(0),g=a.pathSegList.getItem(1);a=Math.min(d.x,g.x);d=Math.min(d.y,g.y);g=c.width;c=c.height;return a-2<b[0]&&b[0]<a+g+2&&d-2<b[1]&&b[1]<d+c+2};a.initText=function(){this.main.select("."+l.chart).append("g").attr("class",l.chartTexts);this.mainText=this.d3.selectAll([])};a.updateTargetsForText=function(a){var b=this.classChartText.bind(this),c=
this.classTexts.bind(this),d=this.classFocus.bind(this);this.main.select("."+l.chartTexts).selectAll("."+l.chartText).data(a).attr("class",function(a){return b(a)+d(a)}).enter().append("g").attr("class",b).style("opacity",0).style("pointer-events","none").append("g").attr("class",c)};a.updateText=function(a){var b=this,c=b.config,d=b.barOrLineData.bind(b),g=b.classText.bind(b);b.mainText=b.main.selectAll("."+l.texts).selectAll("."+l.text).data(d);b.mainText.enter().append("text").attr("class",g).attr("text-anchor",
function(a){return c.axis_rotated?0>a.value?"end":"start":"middle"}).style("stroke","none").style("fill",function(a){return b.color(a)}).style("fill-opacity",0);b.mainText.text(function(a,c,d){return b.dataLabelFormat(a.id)(a.value,a.id,c,d)});b.mainText.exit().transition().duration(a).style("fill-opacity",0).remove()};a.redrawText=function(a,b,c,d){return[(d?this.mainText.transition():this.mainText).attr("x",a).attr("y",b).style("fill",this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]};
a.getTextRect=function(a,b,c){var d=this.d3.select("body").append("div").classed("c3",!0),g=d.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0);c=this.d3.select(c).style("font");var e;g.selectAll(".dummy").data([a]).enter().append("text").classed(b?b:"",!0).style("font",c).text(a).each(function(){e=this.getBoundingClientRect()});d.remove();return e};a.generateXYForText=function(a,b,c,d){var g=this,e=g.generateGetAreaPoints(a,!1),f=g.generateGetBarPoints(b,
!1),m=g.generateGetLinePoints(c,!1),h=d?g.getXForText:g.getYForText;return function(a,b){var c=g.isAreaType(a)?e:g.isBarType(a)?f:m;return h.call(g,c(a,b),a,this)}};a.getXForText=function(a,b,c){c=c.getBoundingClientRect();if(this.config.axis_rotated){var d=this.isBarType(b)?4:6;a=a[2][1]+d*(0>b.value?-1:1)}else a=this.hasType("bar")?(a[2][0]+a[0][0])/2:a[0][0];null===b.value&&(a>this.width?a=this.width-c.width:0>a&&(a=4));return a};a.getYForText=function(a,b,c){c=c.getBoundingClientRect();this.config.axis_rotated?
a=(a[0][0]+a[2][0]+.6*c.height)/2:(a=a[2][1],0>b.value||0===b.value&&!this.hasPositiveValue?(a+=c.height,this.isBarType(b)&&this.isSafari()?a-=3:!this.isBarType(b)&&this.isChrome()&&(a+=3)):a+=this.isBarType(b)?-3:-6);null!==b.value||this.config.axis_rotated||(a<c.height?a=c.height:a>this.height&&(a=this.height-4));return a};a.setTargetType=function(a,b){var c=this,d=c.config;c.mapToTargetIds(a).forEach(function(a){c.withoutFadeIn[a]=b===d.data_types[a];d.data_types[a]=b});a||(d.data_type=b)};a.hasType=
function(a,b){var c=this.config.data_types,d=!1;(b=b||this.data.targets)&&b.length?b.forEach(function(b){if((b=c[b.id])&&0<=b.indexOf(a)||!b&&"line"===a)d=!0}):Object.keys(c).length?Object.keys(c).forEach(function(b){c[b]===a&&(d=!0)}):d=this.config.data_type===a;return d};a.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",a)||this.hasType("gauge",a)};a.isLineType=function(a){var b=this.config;a=r(a)?a:a.id;return!b.data_types[a]||0<="line spline area area-spline step area-step".split(" ").indexOf(b.data_types[a])};
a.isStepType=function(a){a=r(a)?a:a.id;return 0<=["step","area-step"].indexOf(this.config.data_types[a])};a.isSplineType=function(a){a=r(a)?a:a.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[a])};a.isAreaType=function(a){a=r(a)?a:a.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[a])};a.isBarType=function(a){a=r(a)?a:a.id;return"bar"===this.config.data_types[a]};a.isScatterType=function(a){a=r(a)?a:a.id;return"scatter"===this.config.data_types[a]};
a.isPieType=function(a){a=r(a)?a:a.id;return"pie"===this.config.data_types[a]};a.isGaugeType=function(a){a=r(a)?a:a.id;return"gauge"===this.config.data_types[a]};a.isDonutType=function(a){a=r(a)?a:a.id;return"donut"===this.config.data_types[a]};a.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)};a.lineData=function(a){return this.isLineType(a)?[a]:[]};a.arcData=function(a){return this.isArcType(a.data)?[a]:[]};a.barData=function(a){return this.isBarType(a)?
a.values:[]};a.lineOrScatterData=function(a){return this.isLineType(a)||this.isScatterType(a)?a.values:[]};a.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]};a.isInterpolationType=function(a){return 0<="linear linear-closed basis basis-open basis-closed bundle cardinal cardinal-open cardinal-closed monotone".split(" ").indexOf(a)};a.initGrid=function(){var a=this.config,b=this.d3;this.grid=this.main.append("g").attr("clip-path",this.clipPathForGrid).attr("class",
l.grid);a.grid_x_show&&this.grid.append("g").attr("class",l.xgrids);a.grid_y_show&&this.grid.append("g").attr("class",l.ygrids);a.grid_focus_show&&this.grid.append("g").attr("class",l.xgridFocus).append("line").attr("class",l.xgridFocus);this.xgrid=b.selectAll([]);a.grid_lines_front||this.initGridLines()};a.initGridLines=function(){var a=this.d3;this.gridLines=this.main.append("g").attr("clip-path",this.clipPathForGrid).attr("class",l.grid+" "+l.gridLines);this.gridLines.append("g").attr("class",
l.xgridLines);this.gridLines.append("g").attr("class",l.ygridLines);this.xgridLines=a.selectAll([])};a.updateXGrid=function(a){var b=this,c=b.config,d=b.d3,g=b.generateGridData(c.grid_x_type,b.x),e=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=c.axis_rotated?{x1:0,x2:b.width,y1:function(a){return b.x(a)-e},y2:function(a){return b.x(a)-e}}:{x1:function(a){return b.x(a)+e},x2:function(a){return b.x(a)+e},y1:0,y2:b.height};b.xgrid=b.main.select("."+l.xgrids).selectAll("."+l.xgrid).data(g);b.xgrid.enter().append("line").attr("class",
l.xgrid);a||b.xgrid.attr(b.xgridAttr).style("opacity",function(){return+d.select(this).attr(c.axis_rotated?"y1":"x1")===(c.axis_rotated?b.height:0)?0:1});b.xgrid.exit().remove()};a.updateYGrid=function(){var a=this.config,b=this.yAxis.tickValues()||this.y.ticks(a.grid_y_ticks);this.ygrid=this.main.select("."+l.ygrids).selectAll("."+l.ygrid).data(b);this.ygrid.enter().append("line").attr("class",l.ygrid);this.ygrid.attr("x1",a.axis_rotated?this.y:0).attr("x2",a.axis_rotated?this.y:this.width).attr("y1",
a.axis_rotated?0:this.y).attr("y2",a.axis_rotated?this.height:this.y);this.ygrid.exit().remove();this.smoothLines(this.ygrid,"grid")};a.gridTextAnchor=function(a){return a.position?a.position:"end"};a.gridTextDx=function(a){return"start"===a.position?4:"middle"===a.position?0:-4};a.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0};a.yGridTextX=function(a){return"start"===a.position?0:"middle"===a.position?this.width/2:this.width};a.updateGrid=function(a){var b=
this.main,c=this.config;this.grid.style("visibility",this.hasArcType()?"hidden":"visible");b.select("line."+l.xgridFocus).style("visibility","hidden");c.grid_x_show&&this.updateXGrid();this.xgridLines=b.select("."+l.xgridLines).selectAll("."+l.xgridLine).data(c.grid_x_lines);var d=this.xgridLines.enter().append("g").attr("class",function(a){return l.xgridLine+(a["class"]?" "+a["class"]:"")});d.append("line").style("opacity",0);d.append("text").attr("text-anchor",this.gridTextAnchor).attr("transform",
c.axis_rotated?"":"rotate(-90)").attr("dx",this.gridTextDx).attr("dy",-5).style("opacity",0);this.xgridLines.exit().transition().duration(a).style("opacity",0).remove();c.grid_y_show&&this.updateYGrid();this.ygridLines=b.select("."+l.ygridLines).selectAll("."+l.ygridLine).data(c.grid_y_lines);b=this.ygridLines.enter().append("g").attr("class",function(a){return l.ygridLine+(a["class"]?" "+a["class"]:"")});b.append("line").style("opacity",0);b.append("text").attr("text-anchor",this.gridTextAnchor).attr("transform",
c.axis_rotated?"rotate(-90)":"").attr("dx",this.gridTextDx).attr("dy",-5).style("opacity",0);b=this.yv.bind(this);this.ygridLines.select("line").transition().duration(a).attr("x1",c.axis_rotated?b:0).attr("x2",c.axis_rotated?b:this.width).attr("y1",c.axis_rotated?0:b).attr("y2",c.axis_rotated?this.height:b).style("opacity",1);this.ygridLines.select("text").transition().duration(a).attr("x",c.axis_rotated?this.xGridTextX.bind(this):this.yGridTextX.bind(this)).attr("y",b).text(function(a){return a.text}).style("opacity",
1);this.ygridLines.exit().transition().duration(a).style("opacity",0).remove()};a.redrawGrid=function(a){var b=this.config,c=this.xv.bind(this),d=this.xgridLines.select("line"),g=this.xgridLines.select("text");return[(a?d.transition():d).attr("x1",b.axis_rotated?0:c).attr("x2",b.axis_rotated?this.width:c).attr("y1",b.axis_rotated?c:0).attr("y2",b.axis_rotated?c:this.height).style("opacity",1),(a?g.transition():g).attr("x",b.axis_rotated?this.yGridTextX.bind(this):this.xGridTextX.bind(this)).attr("y",
c).text(function(a){return a.text}).style("opacity",1)]};a.showXGridFocus=function(a){var b=this.config;a=a.filter(function(a){return a&&u(a.value)});var c=this.main.selectAll("line."+l.xgridFocus),d=this.xx.bind(this);!b.tooltip_show||this.hasType("scatter")||this.hasArcType()||(c.style("visibility","visible").data([a[0]]).attr(b.axis_rotated?"y1":"x1",d).attr(b.axis_rotated?"y2":"x2",d),this.smoothLines(c,"grid"))};a.hideXGridFocus=function(){this.main.select("line."+l.xgridFocus).style("visibility",
"hidden")};a.updateXgridFocus=function(){var a=this.config;this.main.select("line."+l.xgridFocus).attr("x1",a.axis_rotated?0:-10).attr("x2",a.axis_rotated?this.width:-10).attr("y1",a.axis_rotated?-10:0).attr("y2",a.axis_rotated?-10:this.height)};a.generateGridData=function(a,b){var c=[],d=this.main.select("."+l.axisX).selectAll(".tick").size();if("year"===a)for(b=this.getXDomain(),a=b[0].getFullYear(),b=b[1].getFullYear();a<=b;a++)c.push(new Date(a+"-01-01 00:00:00"));else c=b.ticks(10),c.length>
d&&(c=c.filter(function(a){return 0>(""+a).indexOf(".")}));return c};a.getGridFilterToRemove=function(a){return a?function(b){var c=!1;[].concat(a).forEach(function(a){if("value"in a&&b.value===a.value||"class"in a&&b["class"]===a["class"])c=!0});return c}:function(){return!0}};a.removeGridLines=function(a,b){var c=this.config,d=this.getGridFilterToRemove(a);a=function(a){return!d(a)};var g=b?l.xgridLine:l.ygridLine;this.main.select("."+(b?l.xgridLines:l.ygridLines)).selectAll("."+g).filter(d).transition().duration(c.transition_duration).style("opacity",
0).remove();b?c.grid_x_lines=c.grid_x_lines.filter(a):c.grid_y_lines=c.grid_y_lines.filter(a)};a.initTooltip=function(){var a=this,b=a.config,c;a.tooltip=a.selectChart.style("position","relative").append("div").attr("class",l.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none");if(b.tooltip_init_show){if(a.isTimeSeries()&&r(b.tooltip_init_x)){b.tooltip_init_x=a.parseDate(b.tooltip_init_x);for(c=0;c<a.data.targets[0].values.length&&0!==a.data.targets[0].values[c].x-
b.tooltip_init_x;c++);b.tooltip_init_x=c}a.tooltip.html(b.tooltip_contents.call(a,a.data.targets.map(function(c){return a.addName(c.values[b.tooltip_init_x])}),a.axis.getXAxisTickFormat(),a.getYFormat(a.hasArcType()),a.color));a.tooltip.style("top",b.tooltip_init_position.top).style("left",b.tooltip_init_position.left).style("display","block")}};a.getTooltipContent=function(a,b,c,d){var g=this.config;b=g.tooltip_format_title||b;var e=g.tooltip_format_name||function(a){return a};c=g.tooltip_format_value||
c;var f=this.isOrderAsc();if(0===g.data_groups.length)a.sort(function(a,b){a=a?a.value:null;b=b?b.value:null;return f?a-b:b-a});else{var m=this.orderTargets(this.data.targets).map(function(a){return a.id});a.sort(function(a,b){var c=a?a.value:null,d=b?b.value:null;0<c&&0<d&&(c=a?m.indexOf(a.id):null,d=b?m.indexOf(b.id):null);return f?c-d:d-c})}for(g=0;g<a.length;g++)if(a[g]&&(a[g].value||0===a[g].value)){if(!h){var h=G(b?b(a[g].x):a[g].x);h="<table class='"+this.CLASS.tooltip+"'>"+(h||0===h?"<tr><th colspan='2'>"+
h+"</th></tr>":"")}var k=G(c(a[g].value,a[g].ratio,a[g].id,a[g].index,a));if(void 0!==k&&null!==a[g].name){var l=G(e(a[g].name,a[g].ratio,a[g].id,a[g].index));var t=this.levelColor?this.levelColor(a[g].value):d(a[g].id);h+="<tr class='"+this.CLASS.tooltipName+"-"+this.getTargetSelectorSuffix(a[g].id)+"'>";h+="<td class='name'><span style='background-color:"+t+"'></span>"+l+"</td>";h+="<td class='value'>"+k+"</td>";h+="</tr>"}}return h+"</table>"};a.tooltipPosition=function(a,b,c,d){var g=this.config,
e=this.d3;var f=this.hasArcType();d=e.mouse(d);f?(g=(this.width-(this.isLegendRight?this.getLegendWidth():0))/2+d[0],a=this.height/2+d[1]+20):(f=this.getSvgLeft(!0),g.axis_rotated?(g=f+d[0]+100,b=g+b,f=this.currentWidth-this.getCurrentPaddingRight(),a=this.x(a[0].x)+20):(g=f+this.getCurrentPaddingLeft(!0)+this.x(a[0].x)+20,b=g+b,f=f+this.currentWidth-this.getCurrentPaddingRight(),a=d[1]+15),b>f&&(g-=b-f+20),a+c>this.currentHeight&&(a-=c+30));0>a&&(a=0);return{top:a,left:g}};a.showTooltip=function(b,
c){var d=this.config,g=this.hasArcType(),e=b.filter(function(a){return a&&u(a.value)}),f=d.tooltip_position||a.tooltipPosition;0!==e.length&&d.tooltip_show&&(this.tooltip.html(d.tooltip_contents.call(this,b,this.axis.getXAxisTickFormat(),this.getYFormat(g),this.color)).style("display","block"),b=this.tooltip.property("offsetWidth"),d=this.tooltip.property("offsetHeight"),c=f.call(this,e,b,d,c),this.tooltip.style("top",c.top+"px").style("left",c.left+"px"))};a.hideTooltip=function(){this.tooltip.style("display",
"none")};a.initLegend=function(){this.legendItemTextBox={};this.legendHasRendered=!1;this.legend=this.svg.append("g").attr("transform",this.getTranslate("legend"));this.config.legend_show?this.updateLegendWithDefaults():(this.legend.style("visibility","hidden"),this.hiddenLegendIds=this.mapToIds(this.data.targets))};a.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})};a.updateSizeForLegend=function(a,
b){var c=this.config,d=this.isLegendTop?this.getCurrentPaddingTop()+c.legend_inset_y+5.5:this.currentHeight-a-this.getCurrentPaddingBottom()-c.legend_inset_y;c=this.isLegendLeft?this.getCurrentPaddingLeft()+c.legend_inset_x+.5:this.currentWidth-b-this.getCurrentPaddingRight()-c.legend_inset_x+.5;this.margin3={top:this.isLegendRight?0:this.isLegendInset?d:this.currentHeight-a,right:NaN,bottom:0,left:this.isLegendRight?this.currentWidth-b:this.isLegendInset?c:0}};a.transformLegend=function(a){(a?this.legend.transition():
this.legend).attr("transform",this.getTranslate("legend"))};a.updateLegendStep=function(a){this.legendStep=a};a.updateLegendItemWidth=function(a){this.legendItemWidth=a};a.updateLegendItemHeight=function(a){this.legendItemHeight=a};a.getLegendWidth=function(){return this.config.legend_show?this.isLegendRight||this.isLegendInset?this.legendItemWidth*(this.legendStep+1):this.currentWidth:0};a.getLegendHeight=function(){var a=0;this.config.legend_show&&(a=this.isLegendRight?this.currentHeight:Math.max(20,
this.legendItemHeight)*(this.legendStep+1));return a};a.opacityForLegend=function(a){return a.classed(l.legendItemHidden)?null:1};a.opacityForUnfocusedLegend=function(a){return a.classed(l.legendItemHidden)?null:.3};a.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a);c.legend.selectAll("."+l.legendItem).filter(function(b){return 0<=a.indexOf(b)}).classed(l.legendItemFocused,b).transition().duration(100).style("opacity",function(){return(b?c.opacityForLegend:c.opacityForUnfocusedLegend).call(c,
c.d3.select(this))})};a.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+l.legendItem).classed(l.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})};a.showLegend=function(a){var b=this,c=b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility","visible"),b.legendHasRendered||b.updateLegendWithDefaults());b.removeHiddenLegendIds(a);b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",
function(){return b.opacityForLegend(b.d3.select(this))})};a.hideLegend=function(a){var b=this.config;b.legend_show&&B(a)&&(b.legend_show=!1,this.legend.style("visibility","hidden"));this.addHiddenLegendIds(a);this.legend.selectAll(this.selectorLegends(a)).style("opacity",0).style("visibility","hidden")};a.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}};a.updateLegend=function(a,b,c){function d(a,b){e.legendItemTextBox[b]||(e.legendItemTextBox[b]=e.getTextRect(a.textContent,l.legendItem,
a));return e.legendItemTextBox[b]}function g(b,c,g){function l(a,b){b||(C=(B-t-y)/2,10>C&&(C=(B-y)/2,t=0,x++));q[a]=x;u[x]=e.isLegendInset?10:C;p[a]=t;t+=y}var z=0===g;g=g===a.length-1;b=d(b,c);g=b.width+k+(!g||e.isLegendRight||e.isLegendInset?10:0)+f.legend_padding;b=b.height+4;var y=e.isLegendRight||e.isLegendInset?b:g,B=e.isLegendRight||e.isLegendInset?e.getLegendHeight():e.getLegendWidth();z&&(h=m=x=t=0);if(f.legend_show&&!e.isLegendToShow(c))r[c]=A[c]=q[c]=p[c]=0;else{r[c]=g;A[c]=b;if(!m||g>=
m)m=g;if(!h||b>=h)h=b;z=e.isLegendRight||e.isLegendInset?h:m;if(f.legend_equally){Object.keys(r).forEach(function(a){r[a]=m});Object.keys(A).forEach(function(a){A[a]=h});var C=(B-z*a.length)/2;10>C?(x=t=0,a.forEach(function(a){l(a)})):l(c,!0)}else l(c)}}var e=this,f=e.config,m=0,h=0,k=f.legend_item_tile_width+5,t=0,p={},r={},A={},u=[0],q={},x=0;a=a.filter(function(a){return!z(f.data_names[a])||null!==f.data_names[a]});b=b||{};var y=F(b,"withTransition",!0);var B=F(b,"withTransitionForTransform",!0);
e.isLegendInset&&(x=f.legend_inset_step?f.legend_inset_step:a.length,e.updateLegendStep(x));if(e.isLegendRight){var C=function(a){return m*q[a]};var E=function(a){return u[q[a]]+p[a]}}else e.isLegendInset?(C=function(a){return m*q[a]+10},E=function(a){return u[q[a]]+p[a]}):(C=function(a){return u[q[a]]+p[a]},E=function(a){return h*q[a]});var H=function(a,b){return C(a,b)+4+f.legend_item_tile_width};var G=function(a,b){return E(a,b)+9};var K=function(a,b){return C(a,b)};var Ea=function(a,b){return E(a,
b)-5};b=function(a,b){return C(a,b)-2};var Qa=function(a,b){return C(a,b)-2+f.legend_item_tile_width};var Ha=function(a,b){return E(a,b)+4};var la=e.legend.selectAll("."+l.legendItem).data(a).enter().append("g").attr("class",function(a){return e.generateClass(l.legendItem,a)}).style("visibility",function(a){return e.isLegendToShow(a)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a){f.legend_item_onclick?f.legend_item_onclick.call(e,a):e.d3.event.altKey?(e.api.hide(),e.api.show(a)):
(e.api.toggle(a),e.isTargetToShow(a)?e.api.focus(a):e.api.revert())}).on("mouseover",function(a){f.legend_item_onmouseover?f.legend_item_onmouseover.call(e,a):(e.d3.select(this).classed(l.legendItemFocused,!0),!e.transiting&&e.isTargetToShow(a)&&e.api.focus(a))}).on("mouseout",function(a){f.legend_item_onmouseout?f.legend_item_onmouseout.call(e,a):(e.d3.select(this).classed(l.legendItemFocused,!1),e.api.revert())});la.append("text").text(function(a){return z(f.data_names[a])?f.data_names[a]:a}).each(function(a,
b){g(this,a,b)}).style("pointer-events","none").attr("x",e.isLegendRight||e.isLegendInset?H:-200).attr("y",e.isLegendRight||e.isLegendInset?-200:G);la.append("rect").attr("class",l.legendItemEvent).style("fill-opacity",0).attr("x",e.isLegendRight||e.isLegendInset?K:-200).attr("y",e.isLegendRight||e.isLegendInset?-200:Ea);la.append("line").attr("class",l.legendItemTile).style("stroke",e.color).style("pointer-events","none").attr("x1",e.isLegendRight||e.isLegendInset?b:-200).attr("y1",e.isLegendRight||
e.isLegendInset?-200:Ha).attr("x2",e.isLegendRight||e.isLegendInset?Qa:-200).attr("y2",e.isLegendRight||e.isLegendInset?-200:Ha).attr("stroke-width",f.legend_item_tile_height);la=e.legend.select("."+l.legendBackground+" rect");e.isLegendInset&&0<m&&0===la.size()&&(la=e.legend.insert("g","."+l.legendItem).attr("class",l.legendBackground).append("rect"));var W=e.legend.selectAll("text").data(a).text(function(a){return z(f.data_names[a])?f.data_names[a]:a}).each(function(a,b){g(this,a,b)});(y?W.transition():
W).attr("x",H).attr("y",G);H=e.legend.selectAll("rect."+l.legendItemEvent).data(a);(y?H.transition():H).attr("width",function(a){return r[a]}).attr("height",function(a){return A[a]}).attr("x",K).attr("y",Ea);K=e.legend.selectAll("line."+l.legendItemTile).data(a);(y?K.transition():K).style("stroke",e.color).attr("x1",b).attr("y1",Ha).attr("x2",Qa).attr("y2",Ha);la&&(y?la.transition():la).attr("height",e.getLegendHeight()-12).attr("width",m*(x+1)+10);e.legend.selectAll("."+l.legendItem).classed(l.legendItemHidden,
function(a){return!e.isTargetToShow(a)});e.updateLegendItemWidth(m);e.updateLegendItemHeight(h);e.updateLegendStep(x);e.updateSizes();e.updateScales();e.updateSvgSize();e.transformAll(B,c);e.legendHasRendered=!0};a.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)};a.redrawTitle=function(){this.title.attr("x",this.xForTitle.bind(this)).attr("y",this.yForTitle.bind(this))};a.xForTitle=function(){var a=this.config,b=a.title_position||
"left";return 0<=b.indexOf("right")?this.currentWidth-this.getTextRect(this.title.node().textContent,this.CLASS.title,this.title.node()).width-a.title_padding.right:0<=b.indexOf("center")?(this.currentWidth-this.getTextRect(this.title.node().textContent,this.CLASS.title,this.title.node()).width)/2:a.title_padding.left};a.yForTitle=function(){return this.config.title_padding.top+this.getTextRect(this.title.node().textContent,this.CLASS.title,this.title.node()).height};a.getTitlePadding=function(){return this.yForTitle()+
this.config.title_padding.bottom};(function(a,b){if(Object.create)b.prototype=Object.create(a.prototype);else{var c=function(){};c.prototype=a.prototype;b.prototype=new c}return b.prototype.constructor=b})(function(a){this.owner=a},e);e.prototype.init=function(){var a=this.owner,b=a.config,c=a.main;a.axes.x=c.append("g").attr("class",l.axis+" "+l.axisX).attr("clip-path",a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",b.axis_x_show?"visible":"hidden");a.axes.x.append("text").attr("class",
l.axisXLabel).attr("transform",b.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this));a.axes.y=c.append("g").attr("class",l.axis+" "+l.axisY).attr("clip-path",b.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",b.axis_y_show?"visible":"hidden");a.axes.y.append("text").attr("class",l.axisYLabel).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this));a.axes.y2=c.append("g").attr("class",
l.axis+" "+l.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",b.axis_y2_show?"visible":"hidden");a.axes.y2.append("text").attr("class",l.axisY2Label).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))};e.prototype.getXAxis=function(a,b,c,e,f,h,k){var g=this.owner,m=g.config;f={isCategory:g.isCategorized(),withOuterTick:f,tickMultiline:m.axis_x_tick_multiline,tickWidth:m.axis_x_tick_width,tickTextRotate:k?0:m.axis_x_tick_rotate,
withoutTransition:h};a=d(g.d3,f).scale(a).orient(b);g.isTimeSeries()&&e&&"function"!==typeof e&&(e=e.map(function(a){return g.parseDate(a)}));a.tickFormat(c).tickValues(e);g.isCategorized()&&(a.tickCentered(m.axis_x_tick_centered),B(m.axis_x_tick_culling)&&(m.axis_x_tick_culling=!1));return a};e.prototype.updateXAxisTickValues=function(a,b){var c=this.owner,d=c.config;if(d.axis_x_tick_fit||d.axis_x_tick_count)var g=this.generateTickValues(c.mapTargetsToUniqueXs(a),d.axis_x_tick_count,c.isTimeSeries());
b?b.tickValues(g):(c.xAxis.tickValues(g),c.subXAxis.tickValues(g));return g};e.prototype.getYAxis=function(a,b,c,e,f,h,k){var g=this.owner,m=g.config;a=d(g.d3,{withOuterTick:f,withoutTransition:h,tickTextRotate:k?0:m.axis_y_tick_rotate}).scale(a).orient(b).tickFormat(c);g.isTimeSeriesY()?a.ticks(g.d3.time[m.axis_y_tick_time_value],m.axis_y_tick_time_interval):a.tickValues(e);return a};e.prototype.getId=function(a){var b=this.owner.config;return a in b.data_axes?b.data_axes[a]:"y"};e.prototype.getXAxisTickFormat=
function(){var a=this.owner,b=a.config,c=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(a){return 0>a?a.toFixed(0):a};b.axis_x_tick_format&&(q(b.axis_x_tick_format)?c=b.axis_x_tick_format:a.isTimeSeries()&&(c=function(c){return c?a.axisTimeFormat(b.axis_x_tick_format)(c):""}));return q(c)?function(b){return c.call(a,b)}:c};e.prototype.getTickValues=function(a,b){return a?a:b?b.tickValues():void 0};e.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,
this.owner.xAxis)};e.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)};e.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)};e.prototype.getLabelOptionByAxisId=function(a){var b=this.owner.config;if("y"===a)var c=b.axis_y_label;else"y2"===a?c=b.axis_y2_label:"x"===a&&(c=b.axis_x_label);return c};e.prototype.getLabelText=function(a){a=this.getLabelOptionByAxisId(a);
return r(a)?a:a?a.text:null};e.prototype.setLabelText=function(a,b){var c=this.owner.config,d=this.getLabelOptionByAxisId(a);r(d)?"y"===a?c.axis_y_label=b:"y2"===a?c.axis_y2_label=b:"x"===a&&(c.axis_x_label=b):d&&(d.text=b)};e.prototype.getLabelPosition=function(a,b){b=(a=this.getLabelOptionByAxisId(a))&&"object"===typeof a&&a.position?a.position:b;return{isInner:0<=b.indexOf("inner"),isOuter:0<=b.indexOf("outer"),isLeft:0<=b.indexOf("left"),isCenter:0<=b.indexOf("center"),isRight:0<=b.indexOf("right"),
isTop:0<=b.indexOf("top"),isMiddle:0<=b.indexOf("middle"),isBottom:0<=b.indexOf("bottom")}};e.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")};e.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")};e.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")};
e.prototype.getLabelPositionById=function(a){return"y2"===a?this.getY2AxisLabelPosition():"y"===a?this.getYAxisLabelPosition():this.getXAxisLabelPosition()};e.prototype.textForXAxisLabel=function(){return this.getLabelText("x")};e.prototype.textForYAxisLabel=function(){return this.getLabelText("y")};e.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")};e.prototype.xForAxisLabel=function(a,b){var c=this.owner;return a?b.isLeft?0:b.isCenter?c.width/2:c.width:b.isBottom?-c.height:
b.isMiddle?-c.height/2:0};e.prototype.dxForAxisLabel=function(a,b){return a?b.isLeft?"0.5em":b.isRight?"-0.5em":"0":b.isTop?"-0.5em":b.isBottom?"0.5em":"0"};e.prototype.textAnchorForAxisLabel=function(a,b){return a?b.isLeft?"start":b.isCenter?"middle":"end":b.isBottom?"start":b.isMiddle?"middle":"end"};e.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};e.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,
this.getYAxisLabelPosition())};e.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};e.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};e.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};e.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,
this.getY2AxisLabelPosition())};e.prototype.dyForXAxisLabel=function(){var a=this.owner.config,b=this.getXAxisLabelPosition();return a.axis_rotated?b.isInner?"1.2em":-25-this.getMaxTickWidth("x"):b.isInner?"-0.5em":a.axis_x_height?a.axis_x_height-10:"3em"};e.prototype.dyForYAxisLabel=function(){var a=this.owner,b=this.getYAxisLabelPosition();return a.config.axis_rotated?b.isInner?"-0.5em":"3em":b.isInner?"1.2em":-10-(a.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)};e.prototype.dyForY2AxisLabel=
function(){var a=this.owner,b=this.getY2AxisLabelPosition();return a.config.axis_rotated?b.isInner?"1.2em":"-2.2em":b.isInner?"-0.5em":15+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)};e.prototype.textAnchorForXAxisLabel=function(){return this.textAnchorForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};e.prototype.textAnchorForYAxisLabel=function(){return this.textAnchorForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};e.prototype.textAnchorForY2AxisLabel=
function(){return this.textAnchorForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};e.prototype.getMaxTickWidth=function(a,b){var c=this.owner,d=c.config,e=0;if(b&&c.currentMaxTickWidths[a])return c.currentMaxTickWidths[a];if(c.svg){b=c.filterTargetsToShow(c.data.targets);if("y"===a){var g=c.y.copy().domain(c.getYDomain(b,"y"));d=this.getYAxis(g,c.yOrient,d.axis_y_tick_format,c.yAxisTickValues,!1,!0,!0)}else"y2"===a?(g=c.y2.copy().domain(c.getYDomain(b,"y2")),d=this.getYAxis(g,
c.y2Orient,d.axis_y2_tick_format,c.y2AxisTickValues,!1,!0,!0)):(g=c.x.copy().domain(c.getXDomain(b)),d=this.getXAxis(g,c.xOrient,c.xAxisTickFormat,c.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(b,d));var f=c.d3.select("body").append("div").classed("c3",!0);b=f.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0);b.append("g").call(d).each(function(){c.d3.select(this).selectAll("text").each(function(){var a=this.getBoundingClientRect();e<a.width&&
(e=a.width)});f.remove()})}c.currentMaxTickWidths[a]=0>=e?c.currentMaxTickWidths[a]:e;return c.currentMaxTickWidths[a]};e.prototype.updateLabels=function(a){var b=this.owner,c=b.main.select("."+l.axisX+" ."+l.axisXLabel),d=b.main.select("."+l.axisY+" ."+l.axisYLabel);b=b.main.select("."+l.axisY2+" ."+l.axisY2Label);(a?c.transition():c).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));
(a?d.transition():d).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));(a?b.transition():b).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))};e.prototype.getPadding=function(a,b,c,d){var e="number"===typeof a?a:a[b];return u(e)?"ratio"===a.unit?a[b]*d:this.convertPixelsToAxisPadding(e,
d):c};e.prototype.convertPixelsToAxisPadding=function(a,b){var c=this.owner;return a/(c.config.axis_rotated?c.width:c.height)*b};e.prototype.generateTickValues=function(a,b,c){var d=a,e;if(b)if(b=q(b)?b():b,1===b)d=[a[0]];else if(2===b)d=[a[0],a[a.length-1]];else if(2<b){var g=b-2;b=a[0];a=a[a.length-1];var f=(a-b)/(g+1);d=[b];for(e=0;e<g;e++){var h=+b+f*(e+1);d.push(c?new Date(h):h)}d.push(a)}c||(d=d.sort(function(a,b){return a-b}));return d};e.prototype.generateTransitions=function(a){var b=this.owner.axes;
return{axisX:a?b.x.transition().duration(a):b.x,axisY:a?b.y.transition().duration(a):b.y,axisY2:a?b.y2.transition().duration(a):b.y2,axisSubX:a?b.subx.transition().duration(a):b.subx}};e.prototype.redraw=function(a,b){var c=this.owner;c.axes.x.style("opacity",b?0:1);c.axes.y.style("opacity",b?0:1);c.axes.y2.style("opacity",b?0:1);c.axes.subx.style("opacity",b?0:1);a.axisX.call(c.xAxis);a.axisY.call(c.yAxis);a.axisY2.call(c.y2Axis);a.axisSubX.call(c.subXAxis)};a.getClipPath=function(a){return"url("+
(0<=h.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+a+")"};a.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")};a.getAxisClipX=function(a){var b=Math.max(30,this.margin.left);return a?-(1+b):-(b-1)};a.getAxisClipY=function(a){return a?-20:-this.margin.top};a.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)};a.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)};a.getYAxisClipX=
function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)};a.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)};a.getAxisClipWidth=function(a){var b=Math.max(30,this.margin.left),c=Math.max(30,this.margin.right);return a?this.width+2+b+c:this.margin.left+20};a.getAxisClipHeight=function(a){return(a?this.margin.bottom:this.margin.top+this.height)+20};a.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)};a.getXAxisClipHeight=
function(){return this.getAxisClipHeight(!this.config.axis_rotated)};a.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)};a.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)};a.initPie=function(){var a=this.config;this.pie=this.d3.layout.pie().value(function(a){return a.values.reduce(function(a,b){return a+b.value},0)});a.data_order||this.pie.sort(null)};a.updateRadius=function(){var a=this.config;
a=a.gauge_width||a.donut_width;this.radiusExpanded=Math.min(this.arcWidth,this.arcHeight)/2;this.radius=.95*this.radiusExpanded;this.innerRadiusRatio=a?(this.radius-a)/this.radius:.6;this.innerRadius=this.hasType("donut")||this.hasType("gauge")?this.radius*this.innerRadiusRatio:0};a.updateArc=function(){this.svgArc=this.getSvgArc();this.svgArcExpanded=this.getSvgArcExpanded();this.svgArcExpandedSub=this.getSvgArcExpanded(.98)};a.updateAngle=function(a){var b=this.config,c=!1,d=0;if(!b)return null;
this.pie(this.filterTargetsToShow(this.data.targets)).forEach(function(b){c||b.data.id!==a.data.id||(c=!0,a=b,a.index=d);d++});isNaN(a.startAngle)&&(a.startAngle=0);isNaN(a.endAngle)&&(a.endAngle=a.startAngle);if(this.isGaugeType(a.data)){var e=b.gauge_min;var g=b.gauge_max;var f=Math.PI*(b.gauge_fullCircle?2:1)/(g-e);e=a.value<e?0:a.value<g?a.value-e:g-e;a.startAngle=b.gauge_startingAngle;a.endAngle=a.startAngle+f*e}return c?a:null};a.getSvgArc=function(){var a=this,b=a.d3.svg.arc().outerRadius(a.radius).innerRadius(a.innerRadius),
c=function(c,d){return d?b(c):(c=a.updateAngle(c))?b(c):"M 0 0"};c.centroid=b.centroid;return c};a.getSvgArcExpanded=function(a){var b=this,c=b.d3.svg.arc().outerRadius(b.radiusExpanded*(a?a:1)).innerRadius(b.innerRadius);return function(a){return(a=b.updateAngle(a))?c(a):"M 0 0"}};a.getArc=function(a,b,c){return c||this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"};a.transformForArcLabel=function(a){var b=this.config,c=this.updateAngle(a);var d="";if(c&&!this.hasType("gauge")){d=this.svgArc.centroid(c);
c=isNaN(d[0])?0:d[0];d=isNaN(d[1])?0:d[1];var e=Math.sqrt(c*c+d*d);a=this.hasType("donut")&&b.donut_label_ratio?q(b.donut_label_ratio)?b.donut_label_ratio(a,this.radius,e):b.donut_label_ratio:this.hasType("pie")&&b.pie_label_ratio?q(b.pie_label_ratio)?b.pie_label_ratio(a,this.radius,e):b.pie_label_ratio:this.radius&&e?(.375<36/this.radius?1.175-36/this.radius:.8)*this.radius/e:0;d="translate("+c*a+","+d*a+")"}return d};a.getArcRatio=function(a){var b=this.config;b=Math.PI*(this.hasType("gauge")&&
!b.gauge_fullCircle?1:2);return a?(a.endAngle-a.startAngle)/b:null};a.convertToArcData=function(a){return this.addName({id:a.data.id,value:a.value,ratio:this.getArcRatio(a),index:a.index})};a.textForArcLabel=function(a){var b,c;if(!this.shouldShowArcLabel())return"";var d=(b=this.updateAngle(a))?b.value:null;b=this.getArcRatio(b);a=a.data.id;return this.hasType("gauge")||this.meetsArcLabelThreshold(b)?(c=this.getArcLabelFormat())?c(d,b,a):this.defaultArcValueFormat(d,b):""};a.expandArc=function(a){var b=
this;if(b.transiting)var c=h.setInterval(function(){b.transiting||(h.clearInterval(c),0<b.legend.selectAll(".c3-legend-item-focused").size()&&b.expandArc(a))},10);else a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+l.chartArc)).each(function(a){b.shouldExpand(a.data.id)&&b.d3.select(this).selectAll("path").transition().duration(b.expandDuration(a.data.id)).attr("d",b.svgArcExpanded).transition().duration(2*b.expandDuration(a.data.id)).attr("d",b.svgArcExpandedSub).each(function(a){b.isDonutType(a.data)})})};
a.unexpandArc=function(a){var b=this;b.transiting||(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+l.chartArc)).selectAll("path").transition().duration(function(a){return b.expandDuration(a.data.id)}).attr("d",b.svgArc),b.svg.selectAll("."+l.arc).style("opacity",1))};a.expandDuration=function(a){var b=this.config;return this.isDonutType(a)?b.donut_expand_duration:this.isGaugeType(a)?b.gauge_expand_duration:this.isPieType(a)?b.pie_expand_duration:50};a.shouldExpand=function(a){var b=
this.config;return this.isDonutType(a)&&b.donut_expand||this.isGaugeType(a)&&b.gauge_expand||this.isPieType(a)&&b.pie_expand};a.shouldShowArcLabel=function(){var a=this.config,b=!0;this.hasType("donut")?b=a.donut_label_show:this.hasType("pie")&&(b=a.pie_label_show);return b};a.meetsArcLabelThreshold=function(a){var b=this.config;b=this.hasType("donut")?b.donut_label_threshold:b.pie_label_threshold;return a>=b};a.getArcLabelFormat=function(){var a=this.config,b=a.pie_label_format;this.hasType("gauge")?
b=a.gauge_label_format:this.hasType("donut")&&(b=a.donut_label_format);return b};a.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""};a.updateTargetsForArc=function(a){var b=this.main,c=this.classChartArc.bind(this),d=this.classArcs.bind(this),e=this.classFocus.bind(this);a=b.select("."+l.chartArcs).selectAll("."+l.chartArc).data(this.pie(a)).attr("class",function(a){return c(a)+e(a.data)}).enter().append("g").attr("class",c);a.append("g").attr("class",d);a.append("text").attr("dy",
this.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")};a.initArc=function(){this.arcs=this.main.select("."+l.chart).append("g").attr("class",l.chartArcs).attr("transform",this.getTranslate("arc"));this.arcs.append("text").attr("class",l.chartArcsTitle).style("text-anchor","middle").text(this.getArcTitle())};a.redrawArc=function(a,b,c){var d=this,e=d.d3,g=d.config,f=d.main;var h=f.selectAll("."+l.arcs).selectAll("."+l.arc).data(d.arcData.bind(d));
h.enter().append("path").attr("class",d.classArc.bind(d)).style("fill",function(a){return d.color(a.data)}).style("cursor",function(a){return g.interaction_enabled&&g.data_selection_isselectable(a)?"pointer":null}).style("opacity",0).each(function(a){d.isGaugeType(a.data)&&(a.startAngle=a.endAngle=g.gauge_startingAngle);this._current=a});h.attr("transform",function(a){return!d.isGaugeType(a.data)&&c?"scale(0)":""}).style("opacity",function(a){return a===this._current?0:1}).on("mouseover",g.interaction_enabled?
function(a){if(!d.transiting&&(a=d.updateAngle(a))){var b=d.convertToArcData(a);d.expandArc(a.data.id);d.api.focus(a.data.id);d.toggleFocusLegend(a.data.id,!0);d.config.data_onmouseover(b,this)}}:null).on("mousemove",g.interaction_enabled?function(a){if(a=d.updateAngle(a))a=d.convertToArcData(a),a=[a],d.showTooltip(a,this)}:null).on("mouseout",g.interaction_enabled?function(a){if(!d.transiting&&(a=d.updateAngle(a))){var b=d.convertToArcData(a);d.unexpandArc(a.data.id);d.api.revert();d.revertLegend();
d.hideTooltip();d.config.data_onmouseout(b,this)}}:null).on("click",g.interaction_enabled?function(a,b){if(a=d.updateAngle(a))a=d.convertToArcData(a),d.toggleShape&&d.toggleShape(this,a,b),d.config.data_onclick.call(d.api,a,this)}:null).each(function(){d.transiting=!0}).transition().duration(a).attrTween("d",function(a){var b=d.updateAngle(a);if(!b)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0);isNaN(this._current.endAngle)&&(this._current.endAngle=
this._current.startAngle);var c=e.interpolate(this._current,b);this._current=c(0);return function(b){b=c(b);b.data=a.data;return d.getArc(b,!0)}}).attr("transform",c?"scale(1)":"").style("fill",function(a){return d.levelColor?d.levelColor(a.data.values[0].value):d.color(a.data.id)}).style("opacity",1).call(d.endall,function(){d.transiting=!1});h.exit().transition().duration(b).style("opacity",0).remove();f.selectAll("."+l.chartArc).select("text").style("opacity",0).attr("class",function(a){return d.isGaugeType(a.data)?
l.gaugeValue:""}).text(d.textForArcLabel.bind(d)).attr("transform",d.transformForArcLabel.bind(d)).style("font-size",function(a){return d.isGaugeType(a.data)?Math.round(d.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return d.isTargetToShow(a.data.id)&&d.isArcType(a.data)?1:0});f.select("."+l.chartArcsTitle).style("opacity",d.hasType("donut")||d.hasType("gauge")?1:0);d.hasType("gauge")&&(d.arcs.select("."+l.chartArcsBackground).attr("d",function(){return d.getArc({data:[{value:g.gauge_max}],
startAngle:g.gauge_startingAngle,endAngle:-1*g.gauge_startingAngle},!0,!0)}),d.arcs.select("."+l.chartArcsGaugeUnit).attr("dy",".75em").text(g.gauge_label_show?g.gauge_units:""),d.arcs.select("."+l.chartArcsGaugeMin).attr("dx",-1*(d.innerRadius+(d.radius-d.innerRadius)/(g.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_min:""),d.arcs.select("."+l.chartArcsGaugeMax).attr("dx",d.innerRadius+(d.radius-d.innerRadius)/(g.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(g.gauge_label_show?
g.gauge_max:""))};a.initGauge=function(){var a=this.arcs;this.hasType("gauge")&&(a.append("path").attr("class",l.chartArcsBackground),a.append("text").attr("class",l.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",l.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",l.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))};a.getGaugeLabelHeight=function(){return this.config.gauge_label_show?
20:0};a.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",l.regions)};a.updateRegion=function(a){var b=this.config;this.region.style("visibility",this.hasArcType()?"hidden":"visible");this.mainRegion=this.main.select("."+l.regions).selectAll("."+l.region).data(b.regions);this.mainRegion.enter().append("g").append("rect").style("fill-opacity",0);this.mainRegion.attr("class",this.classRegion.bind(this));this.mainRegion.exit().transition().duration(a).style("opacity",
0).remove()};a.redrawRegion=function(a){var b=this,c=b.mainRegion.selectAll("rect").each(function(){var a=b.d3.select(this.parentNode).datum();b.d3.select(this).datum(a)}),d=b.regionX.bind(b),e=b.regionY.bind(b),g=b.regionWidth.bind(b),f=b.regionHeight.bind(b);return[(a?c.transition():c).attr("x",d).attr("y",e).attr("width",g).attr("height",f).style("fill-opacity",function(a){return u(a.opacity)?a.opacity:.1})]};a.regionX=function(a){var b=this.config,c="y"===a.axis?this.y:this.y2;return"y"===a.axis||
"y2"===a.axis?b.axis_rotated?"start"in a?c(a.start):0:0:b.axis_rotated?0:"start"in a?this.x(this.isTimeSeries()?this.parseDate(a.start):a.start):0};a.regionY=function(a){var b=this.config,c="y"===a.axis?this.y:this.y2;return"y"===a.axis||"y2"===a.axis?b.axis_rotated?0:"end"in a?c(a.end):0:b.axis_rotated?"start"in a?this.x(this.isTimeSeries()?this.parseDate(a.start):a.start):0:0};a.regionWidth=function(a){var b=this.config,c=this.regionX(a),d="y"===a.axis?this.y:this.y2;a="y"===a.axis||"y2"===a.axis?
b.axis_rotated?"end"in a?d(a.end):this.width:this.width:b.axis_rotated?this.width:"end"in a?this.x(this.isTimeSeries()?this.parseDate(a.end):a.end):this.width;return a<c?0:a-c};a.regionHeight=function(a){var b=this.config,c=this.regionY(a),d="y"===a.axis?this.y:this.y2;a="y"===a.axis||"y2"===a.axis?b.axis_rotated?this.height:"start"in a?d(a.start):this.height:b.axis_rotated?"end"in a?this.x(this.isTimeSeries()?this.parseDate(a.end):a.end):this.height:this.height;return a<c?0:a-c};a.isRegionOnX=function(a){return!a.axis||
"x"===a.axis};a.drag=function(a){var b=this,c=b.config,d=b.main,e=b.d3;if(!b.hasArcType()&&c.data_selection_enabled&&(!c.zoom_enabled||b.zoom.altDomain)&&c.data_selection_multiple){var g=b.dragStart[0];var f=b.dragStart[1];var h=a[0];a=a[1];var k=Math.min(g,h);var t=Math.max(g,h);var p=c.data_selection_grouped?b.margin.top:Math.min(f,a);var r=c.data_selection_grouped?b.height:Math.max(f,a);d.select("."+l.dragarea).attr("x",k).attr("y",p).attr("width",t-k).attr("height",r-p);d.selectAll("."+l.shapes).selectAll("."+
l.shape).filter(function(a){return c.data_selection_isselectable(a)}).each(function(a,c){var d=e.select(this),g=d.classed(l.SELECTED),f=d.classed(l.INCLUDED);if(d.classed(l.circle)){var h=1*d.attr("cx");var m=1*d.attr("cy");var u=b.togglePoint;h=k<h&&h<t&&p<m&&m<r}else if(d.classed(l.bar)){u=E(this);h=u.x;m=u.y;var q=u.width;var x=u.height;u=b.togglePath;h=!(t<h||h+q<k)&&!(r<m||m+x<p)}else return;h^f&&(d.classed(l.INCLUDED,!f),d.classed(l.SELECTED,!g),u.call(b,!g,d,a,c))})}};a.dragstart=function(a){var b=
this.config;!this.hasArcType()&&b.data_selection_enabled&&(this.dragStart=a,this.main.select("."+l.chart).append("rect").attr("class",l.dragarea).style("opacity",.1),this.dragging=!0)};a.dragend=function(){var a=this.config;!this.hasArcType()&&a.data_selection_enabled&&(this.main.select("."+l.dragarea).transition().duration(100).style("opacity",0).remove(),this.main.selectAll("."+l.shape).classed(l.INCLUDED,!1),this.dragging=!1)};a.selectPoint=function(a,b,c){var d=this,e=d.config,g=(e.axis_rotated?
d.circleY:d.circleX).bind(d),f=(e.axis_rotated?d.circleX:d.circleY).bind(d),h=d.pointSelectR.bind(d);e.data_onselected.call(d.api,b,a.node());d.main.select("."+l.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+l.selectedCircle+"-"+c).data([b]).enter().append("circle").attr("class",function(){return d.generateClass(l.selectedCircle,c)}).attr("cx",g).attr("cy",f).attr("stroke",function(){return d.color(b)}).attr("r",function(a){return 1.4*d.pointSelectR(a)}).transition().duration(100).attr("r",
h)};a.unselectPoint=function(a,b,c){this.config.data_onunselected.call(this.api,b,a.node());this.main.select("."+l.selectedCircles+this.getTargetSelectorSuffix(b.id)).selectAll("."+l.selectedCircle+"-"+c).transition().duration(100).attr("r",0).remove()};a.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)};a.selectPath=function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node());c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})};
a.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node());c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.color(b)})};a.togglePath=function(a,b,c,d){a?this.selectPath(b,c,d):this.unselectPath(b,c,d)};a.getToggle=function(a,b){if("circle"===a.nodeName)var c=this.isStepType(b)?function(){}:this.togglePoint;else"path"===a.nodeName&&(c=this.togglePath);return c};a.toggleShape=function(a,b,c){var d=this.d3,e=this.config,g=d.select(a),
f=g.classed(l.SELECTED),h=this.getToggle(a,b).bind(this);e.data_selection_enabled&&e.data_selection_isselectable(b)&&(e.data_selection_multiple||this.main.selectAll("."+l.shapes+(e.data_selection_grouped?this.getTargetSelectorSuffix(b.id):"")).selectAll("."+l.shape).each(function(a,b){var c=d.select(this);c.classed(l.SELECTED)&&h(!1,c.classed(l.SELECTED,!1),a,b)}),g.classed(l.SELECTED,!f),h(!f,g,b,c))};a.initBrush=function(){var a=this;a.brush=a.d3.svg.brush().on("brush",function(){a.redrawForBrush()});
a.brush.update=function(){a.context&&a.context.select("."+l.brush).call(this);return this};a.brush.scale=function(b){return a.config.axis_rotated?this.y(b):this.x(b)}};a.initSubchart=function(){var a=this.config,b=this.context=this.svg.append("g").attr("transform",this.getTranslate("context")),c=a.subchart_show?"visible":"hidden";b.style("visibility",c);b.append("g").attr("clip-path",this.clipPathForSubchart).attr("class",l.chart);b.select("."+l.chart).append("g").attr("class",l.chartBars);b.select("."+
l.chart).append("g").attr("class",l.chartLines);b.append("g").attr("clip-path",this.clipPath).attr("class",l.brush).call(this.brush);this.axes.subx=b.append("g").attr("class",l.axisX).attr("transform",this.getTranslate("subx")).attr("clip-path",a.axis_rotated?"":this.clipPathForXAxis).style("visibility",a.subchart_axis_x_show?c:"hidden")};a.updateTargetsForSubchart=function(a){var b=this.context,c=this.config,d=this.classChartBar.bind(this),e=this.classBars.bind(this);var g=this.classChartLine.bind(this);
var f=this.classLines.bind(this),h=this.classAreas.bind(this);if(c.subchart_show){var k=b.select("."+l.chartBars).selectAll("."+l.chartBar).data(a).attr("class",d);k=k.enter().append("g").style("opacity",0).attr("class",d);k.append("g").attr("class",e);a=b.select("."+l.chartLines).selectAll("."+l.chartLine).data(a).attr("class",g);g=a.enter().append("g").style("opacity",0).attr("class",g);g.append("g").attr("class",f);g.append("g").attr("class",h);b.selectAll("."+l.brush+" rect").attr(c.axis_rotated?
"width":"height",c.axis_rotated?this.width2:this.height2)}};a.updateBarForSubchart=function(a){this.contextBar=this.context.selectAll("."+l.bars).selectAll("."+l.bar).data(this.barData.bind(this));this.contextBar.enter().append("path").attr("class",this.classBar.bind(this)).style("stroke","none").style("fill",this.color);this.contextBar.style("opacity",this.initialOpacity.bind(this));this.contextBar.exit().transition().duration(a).style("opacity",0).remove()};a.redrawBarForSubchart=function(a,b,c){(b?
this.contextBar.transition(Math.random().toString()).duration(c):this.contextBar).attr("d",a).style("opacity",1)};a.updateLineForSubchart=function(a){this.contextLine=this.context.selectAll("."+l.lines).selectAll("."+l.line).data(this.lineData.bind(this));this.contextLine.enter().append("path").attr("class",this.classLine.bind(this)).style("stroke",this.color);this.contextLine.style("opacity",this.initialOpacity.bind(this));this.contextLine.exit().transition().duration(a).style("opacity",0).remove()};
a.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition(Math.random().toString()).duration(c):this.contextLine).attr("d",a).style("opacity",1)};a.updateAreaForSubchart=function(a){var b=this,c=b.d3;b.contextArea=b.context.selectAll("."+l.areas).selectAll("."+l.area).data(b.lineData.bind(b));b.contextArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){b.orgAreaOpacity=+c.select(this).style("opacity");return 0});b.contextArea.style("opacity",
0);b.contextArea.exit().transition().duration(a).style("opacity",0).remove()};a.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition(Math.random().toString()).duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)};a.redrawSubchart=function(a,b,c,d,e,f,h){b=this.d3;d=this.config;this.context.style("visibility",d.subchart_show?"visible":"hidden");d.subchart_show&&(b.event&&"zoom"===b.event.type&&this.brush.extent(this.x.orgDomain()).update(),
a&&(this.brush.empty()||this.brush.extent(this.x.orgDomain()).update(),a=this.generateDrawArea(e,!0),f=this.generateDrawBar(f,!0),h=this.generateDrawLine(h,!0),this.updateBarForSubchart(c),this.updateLineForSubchart(c),this.updateAreaForSubchart(c),this.redrawBarForSubchart(f,c,c),this.redrawLineForSubchart(h,c,c),this.redrawAreaForSubchart(a,c,c)))};a.redrawForBrush=function(){var a=this.x;this.redraw({withTransition:!1,withY:this.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1});
this.config.subchart_onbrush.call(this.api,a.orgDomain())};a.transformContext=function(a,b){b&&b.axisSubX?b=b.axisSubX:(b=this.context.select("."+l.axisX),a&&(b=b.transition()));this.context.attr("transform",this.getTranslate("context"));b.attr("transform",this.getTranslate("subx"))};a.getDefaultExtent=function(){var a=this.config;a=q(a.axis_x_extent)?a.axis_x_extent(this.getXDomain(this.data.targets)):a.axis_x_extent;this.isTimeSeries()&&(a=[this.parseDate(a[0]),this.parseDate(a[1])]);return a};
a.initZoom=function(){var a=this,b=a.d3,c=a.config,d;a.zoom=b.behavior.zoom().on("zoomstart",function(){d=b.event.sourceEvent;a.zoom.altDomain=b.event.sourceEvent.altKey?a.x.orgDomain():null;c.zoom_onzoomstart.call(a.api,b.event.sourceEvent)}).on("zoom",function(){a.redrawForZoom.call(a)}).on("zoomend",function(){var e=b.event.sourceEvent;e&&d.clientX===e.clientX&&d.clientY===e.clientY||(a.redrawEventRect(),a.updateZoom(),c.zoom_onzoomend.call(a.api,a.x.orgDomain()))});a.zoom.scale=function(a){return c.axis_rotated?
this.y(a):this.x(a)};a.zoom.orgScaleExtent=function(){var b=c.zoom_extent?c.zoom_extent:[1,10];return[b[0],Math.max(a.getMaxDataCount()/b[1],b[1])]};a.zoom.updateScaleExtent=function(){var b=t(a.x.orgDomain())/t(a.getZoomDomain()),c=this.orgScaleExtent();this.scaleExtent([c[0]*b,c[1]*b]);return this}};a.getZoomDomain=function(){var a=this.config,b=this.d3,c=b.min([this.orgXDomain[0],a.zoom_x_min]);a=b.max([this.orgXDomain[1],a.zoom_x_max]);return[c,a]};a.updateZoom=function(){var a=this.config.zoom_enabled?
this.zoom:function(){};this.main.select("."+l.zoomRect).call(a).on("dblclick.zoom",null);this.main.selectAll("."+l.eventRect).call(a).on("dblclick.zoom",null)};a.redrawForZoom=function(){var a=this.d3,b=this.config,c=this.zoom,d=this.x;b.zoom_enabled&&0!==this.filterTargetsToShow(this.data.targets).length&&("mousemove"===a.event.sourceEvent.type&&c.altDomain?(d.domain(c.altDomain),c.scale(d).updateScaleExtent()):(this.isCategorized()&&d.orgDomain()[0]===this.orgXDomain[0]&&d.domain([this.orgXDomain[0]-
1E-10,d.orgDomain()[1]]),this.redraw({withTransition:!1,withY:b.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===a.event.sourceEvent.type&&(this.cancelClick=!0),b.zoom_onzoom.call(this.api,d.orgDomain())))};a.generateColor=function(){var a=this.config,b=this.d3,c=a.data_colors,d=C(a.color_pattern)?a.color_pattern:b.scale.category10().range(),e=a.data_color,f=[];return function(a){var b=a.id||a.data&&a.data.id||a;if(c[b]instanceof Function)var g=c[b](a);else c[b]?g=c[b]:
(0>f.indexOf(b)&&f.push(b),g=d[f.indexOf(b)%d.length],c[b]=g);return e instanceof Function?e(g,a):g}};a.generateLevelColor=function(){var a=this.config,b=a.color_pattern,c=a.color_threshold,d="value"===c.unit,e=c.values&&c.values.length?c.values:[],f=c.max||100;return C(a.color_threshold)?function(a){var c,g=b[b.length-1];for(c=0;c<e.length;c++){var h=d?a:100*a/f;if(h<e[c]){g=b[c];break}}return g}:null};a.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,
d=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,e,g){return("y2"===b.axis.getId(g)?d:c).call(b,a,e)}};a.yFormat=function(a){var b=this.config;return(b.axis_y_tick_format?b.axis_y_tick_format:this.defaultValueFormat)(a)};a.y2Format=function(a){var b=this.config;return(b.axis_y2_tick_format?b.axis_y2_tick_format:this.defaultValueFormat)(a)};a.defaultValueFormat=function(a){return u(a)?+a:""};a.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"};a.dataLabelFormat=
function(a){var b=this.config.data_labels,c=function(a){return u(a)?+a:""};return"function"===typeof b.format?b.format:"object"===typeof b.format?b.format[a]?!0===b.format[a]?c:b.format[a]:function(){return""}:c};a.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0};a.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)};a.getCaches=function(a){var b=[],c;for(c=0;c<a.length;c++)a[c]in this.cache&&b.push(this.cloneTarget(this.cache[a[c]]));return b};var l=
a.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",
selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",
circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",
axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};a.generateClass=function(a,b){return" "+a+" "+a+this.getTargetSelectorSuffix(b)};a.classText=function(a){return this.generateClass(l.text,
a.index)};a.classTexts=function(a){return this.generateClass(l.texts,a.id)};a.classShape=function(a){return this.generateClass(l.shape,a.index)};a.classShapes=function(a){return this.generateClass(l.shapes,a.id)};a.classLine=function(a){return this.classShape(a)+this.generateClass(l.line,a.id)};a.classLines=function(a){return this.classShapes(a)+this.generateClass(l.lines,a.id)};a.classCircle=function(a){return this.classShape(a)+this.generateClass(l.circle,a.index)};a.classCircles=function(a){return this.classShapes(a)+
this.generateClass(l.circles,a.id)};a.classBar=function(a){return this.classShape(a)+this.generateClass(l.bar,a.index)};a.classBars=function(a){return this.classShapes(a)+this.generateClass(l.bars,a.id)};a.classArc=function(a){return this.classShape(a.data)+this.generateClass(l.arc,a.data.id)};a.classArcs=function(a){return this.classShapes(a.data)+this.generateClass(l.arcs,a.data.id)};a.classArea=function(a){return this.classShape(a)+this.generateClass(l.area,a.id)};a.classAreas=function(a){return this.classShapes(a)+
this.generateClass(l.areas,a.id)};a.classRegion=function(a,b){return this.generateClass(l.region,b)+" "+("class"in a?a["class"]:"")};a.classEvent=function(a){return this.generateClass(l.eventRect,a.index)};a.classTarget=function(a){var b=this.config.data_classes[a],c="";b&&(c=" "+l.target+"-"+b);return this.generateClass(l.target,a)+c};a.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)};a.classFocused=function(a){return" "+(0<=this.focusedTargetIds.indexOf(a.id)?l.focused:
"")};a.classDefocused=function(a){return" "+(0<=this.defocusedTargetIds.indexOf(a.id)?l.defocused:"")};a.classChartText=function(a){return l.chartText+this.classTarget(a.id)};a.classChartLine=function(a){return l.chartLine+this.classTarget(a.id)};a.classChartBar=function(a){return l.chartBar+this.classTarget(a.id)};a.classChartArc=function(a){return l.chartArc+this.classTarget(a.data.id)};a.getTargetSelectorSuffix=function(a){return a||0===a?("-"+a).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,
"-"):""};a.selectorTarget=function(a,b){return(b||"")+"."+l.target+this.getTargetSelectorSuffix(a)};a.selectorTargets=function(a,b){var c=this;a=a||[];return a.length?a.map(function(a){return c.selectorTarget(a,b)}):null};a.selectorLegend=function(a){return"."+l.legendItem+this.getTargetSelectorSuffix(a)};a.selectorLegends=function(a){var b=this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null};var u=a.isValue=function(a){return a||0===a},q=a.isFunction=function(a){return"function"===
typeof a},r=a.isString=function(a){return"string"===typeof a},y=a.isUndefined=function(a){return"undefined"===typeof a},z=a.isDefined=function(a){return"undefined"!==typeof a},p=a.ceil10=function(a){return 10*Math.ceil(a/10)},x=a.asHalfPixel=function(a){return Math.ceil(a)+.5},t=a.diffDomain=function(a){return a[1]-a[0]},B=a.isEmpty=function(a){return"undefined"===typeof a||null===a||r(a)&&0===a.length||"object"===typeof a&&0===Object.keys(a).length},C=a.notEmpty=function(b){return!a.isEmpty(b)},
F=a.getOption=function(a,b,c){return z(a[b])?a[b]:c},H=a.hasValue=function(a,b){var c=!1;Object.keys(a).forEach(function(d){a[d]===b&&(c=!0)});return c},G=a.sanitise=function(a){return"string"===typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},E=a.getPathBox=function(a){var b=a.getBoundingClientRect();a=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)];return{x:a[0].x,y:Math.min(a[0].y,a[1].y),width:b.width,height:b.height}};c.focus=function(a){var b=this.internal;a=b.mapToTargetIds(a);var c=
b.svg.selectAll(b.selectorTargets(a.filter(b.isTargetToShow,b)));this.revert();this.defocus();c.classed(l.focused,!0).classed(l.defocused,!1);b.hasArcType()&&b.expandArc(a);b.toggleFocusLegend(a,!0);b.focusedTargetIds=a;b.defocusedTargetIds=b.defocusedTargetIds.filter(function(b){return 0>a.indexOf(b)})};c.defocus=function(a){var b=this.internal;a=b.mapToTargetIds(a);b.svg.selectAll(b.selectorTargets(a.filter(b.isTargetToShow,b))).classed(l.focused,!1).classed(l.defocused,!0);b.hasArcType()&&b.unexpandArc(a);
b.toggleFocusLegend(a,!1);b.focusedTargetIds=b.focusedTargetIds.filter(function(b){return 0>a.indexOf(b)});b.defocusedTargetIds=a};c.revert=function(a){var b=this.internal;a=b.mapToTargetIds(a);b.svg.selectAll(b.selectorTargets(a)).classed(l.focused,!1).classed(l.defocused,!1);b.hasArcType()&&b.unexpandArc(a);b.config.legend_show&&(b.showLegend(a.filter(b.isLegendToShow.bind(b))),b.legend.selectAll(b.selectorLegends(a)).filter(function(){return b.d3.select(this).classed(l.legendItemFocused)}).classed(l.legendItemFocused,
!1));b.focusedTargetIds=[];b.defocusedTargetIds=[]};c.show=function(a,b){var c=this.internal;a=c.mapToTargetIds(a);b=b||{};c.removeHiddenTargetIds(a);var d=c.svg.selectAll(c.selectorTargets(a));d.transition().style("opacity",1,"important").call(c.endall,function(){d.style("opacity",null).style("opacity",1)});b.withLegend&&c.showLegend(a);c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};c.hide=function(a,b){var c=this.internal;a=c.mapToTargetIds(a);b=b||{};c.addHiddenTargetIds(a);
var d=c.svg.selectAll(c.selectorTargets(a));d.transition().style("opacity",0,"important").call(c.endall,function(){d.style("opacity",null).style("opacity",0)});b.withLegend&&c.hideLegend(a);c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};c.toggle=function(a,b){var c=this,d=this.internal;d.mapToTargetIds(a).forEach(function(a){d.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})};c.zoom=function(a){var b=this.internal;a&&(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),
b.brush.extent(a),b.redraw({withUpdateXDomain:!0,withY:b.config.zoom_rescale}),b.config.zoom_onzoom.call(this,b.x.orgDomain()));return b.brush.extent()};c.zoom.enable=function(a){var b=this.internal;b.config.zoom_enabled=a;b.updateAndRedraw()};c.unzoom=function(){var a=this.internal;a.brush.clear().update();a.redraw({withUpdateXDomain:!0})};c.zoom.max=function(a){var b=this.internal,c=b.config,d=b.d3;if(0===a||a)c.zoom_x_max=d.max([b.orgXDomain[1],a]);else return c.zoom_x_max};c.zoom.min=function(a){var b=
this.internal,c=b.config,d=b.d3;if(0===a||a)c.zoom_x_min=d.min([b.orgXDomain[0],a]);else return c.zoom_x_min};c.zoom.range=function(a){if(arguments.length)z(a.max)&&this.domain.max(a.max),z(a.min)&&this.domain.min(a.min);else return{max:this.domain.max(),min:this.domain.min()}};c.load=function(a){var b=this.internal,d=b.config;a.xs&&b.addXs(a.xs);"names"in a&&c.data.names.bind(this)(a.names);"classes"in a&&Object.keys(a.classes).forEach(function(b){d.data_classes[b]=a.classes[b]});"categories"in a&&
b.isCategorized()&&(d.axis_x_categories=a.categories);"axes"in a&&Object.keys(a.axes).forEach(function(b){d.data_axes[b]=a.axes[b]});"colors"in a&&Object.keys(a.colors).forEach(function(b){d.data_colors[b]=a.colors[b]});"cacheIds"in a&&b.hasCaches(a.cacheIds)?b.load(b.getCaches(a.cacheIds),a.done):"unload"in a?b.unload(b.mapToTargetIds("boolean"===typeof a.unload&&a.unload?null:a.unload),function(){b.loadFromArgs(a)}):b.loadFromArgs(a)};c.unload=function(a){var b=this.internal;a=a||{};a instanceof
Array?a={ids:a}:"string"===typeof a&&(a={ids:[a]});b.unload(b.mapToTargetIds(a.ids),function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});a.done&&a.done()})};c.flow=function(a){var b=this.internal,c=[],d=b.getMaxDataCount(),e=0,g=0;if(a.json)var f=b.convertJsonToData(a.json,a.keys);else if(a.rows)f=b.convertRowsToData(a.rows);else if(a.columns)f=b.convertColumnsToData(a.columns);else return;var h=b.convertDataToTargets(f,!0);b.data.targets.forEach(function(a){var d=!1,
f,m;for(f=0;f<h.length;f++)if(a.id===h[f].id){d=!0;a.values[a.values.length-1]&&(g=a.values[a.values.length-1].index+1);e=h[f].values.length;for(m=0;m<e;m++)h[f].values[m].index=g+m,b.isTimeSeries()||(h[f].values[m].x=g+m);a.values=a.values.concat(h[f].values);h.splice(f,1);break}d||c.push(a.id)});b.data.targets.forEach(function(a){var d,f;for(d=0;d<c.length;d++)if(a.id===c[d])for(g=a.values[a.values.length-1].index+1,f=0;f<e;f++)a.values.push({id:a.id,index:g+f,x:b.isTimeSeries()?b.getOtherTargetX(g+
f):g+f,value:null})});b.data.targets.length&&h.forEach(function(a){var c,d=[];for(c=b.data.targets[0].values[0].index;c<g;c++)d.push({id:a.id,index:c,x:b.isTimeSeries()?b.getOtherTargetX(c):c,value:null});a.values.forEach(function(a){a.index+=g;b.isTimeSeries()||(a.x+=g)});a.values=d.concat(a.values)});b.data.targets=b.data.targets.concat(h);b.getMaxDataCount();var k=b.data.targets[0];f=k.values[0];if(z(a.to)){e=0;var l=b.isTimeSeries()?b.parseDate(a.to):a.to;k.values.forEach(function(a){a.x<l&&e++})}else z(a.length)&&
(e=a.length);d?1===d&&b.isTimeSeries()&&(k=(k.values[k.values.length-1].x-f.x)/2,k=[new Date(+f.x-k),new Date(+f.x+k)],b.updateXDomain(null,!0,!0,!1,k)):(k=b.isTimeSeries()?1<k.values.length?k.values[k.values.length-1].x-f.x:f.x-b.getXDomain(b.data.targets)[0]:1,k=[f.x-k,f.x],b.updateXDomain(null,!0,!0,!1,k));b.updateTargets(b.data.targets);b.redraw({flow:{index:f.index,length:e,duration:u(a.duration)?a.duration:b.config.transition_duration,done:a.done,orgDataCount:d},withLegend:!0,withTransition:1<
d,withTrimXDomain:!1,withUpdateXAxis:!0})};a.generateFlow=function(a){var b=this,c=b.config,d=b.d3;return function(){var e=a.targets,g=a.flow,f=a.drawBar,h=a.drawLine,k=a.drawArea,m=a.cx,p=a.cy,r=a.xv,u=a.xForText,q=a.yForText,x=a.duration,z=1,y=g.index,B=g.length,A=b.getValueOnIndex(b.data.targets[0].values,y),C=b.getValueOnIndex(b.data.targets[0].values,y+B);z=b.x.domain();x=g.duration||x;var E=g.done||function(){},F=b.generateWait(),H=b.xgrid||d.selectAll([]),G=b.xgridLines||d.selectAll([]),M=
b.mainRegion||d.selectAll([]),K=b.mainText||d.selectAll([]),Ha=b.mainBar||d.selectAll([]),la=b.mainLine||d.selectAll([]),W=b.mainArea||d.selectAll([]),ya=b.mainCircle||d.selectAll([]);b.flowing=!0;b.data.targets.forEach(function(a){a.values.splice(0,B)});e=b.updateXDomain(e,!0,!0);b.updateXGrid&&b.updateXGrid(!0);g.orgDataCount?g=1===g.orgDataCount||(A&&A.x)===(C&&C.x)?b.x(z[0])-b.x(e[0]):b.isTimeSeries()?b.x(z[0])-b.x(e[0]):b.x(A.x)-b.x(C.x):1!==b.data.targets[0].values.length?g=b.x(z[0])-b.x(e[0]):
b.isTimeSeries()?(A=b.getValueOnIndex(b.data.targets[0].values,0),C=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-1),g=b.x(A.x)-b.x(C.x)):g=t(e)/2;z=t(z)/t(e);var Pa="translate("+g+",0) scale("+z+",1)";b.hideXGridFocus();d.transition().ease("linear").duration(x).each(function(){F.add(b.axes.x.transition().call(b.xAxis));F.add(Ha.transition().attr("transform",Pa));F.add(la.transition().attr("transform",Pa));F.add(W.transition().attr("transform",Pa));F.add(ya.transition().attr("transform",
Pa));F.add(K.transition().attr("transform",Pa));F.add(M.filter(b.isRegionOnX).transition().attr("transform",Pa));F.add(H.transition().attr("transform",Pa));F.add(G.transition().attr("transform",Pa))}).call(F,function(){var a,d=[],e=[],g=[];if(B){for(a=0;a<B;a++)d.push("."+l.shape+"-"+(y+a)),e.push("."+l.text+"-"+(y+a)),g.push("."+l.eventRect+"-"+(y+a));b.svg.selectAll("."+l.shapes).selectAll(d).remove();b.svg.selectAll("."+l.texts).selectAll(e).remove();b.svg.selectAll("."+l.eventRects).selectAll(g).remove();
b.svg.select("."+l.xgrid).remove()}H.attr("transform",null).attr(b.xgridAttr);G.attr("transform",null);G.select("line").attr("x1",c.axis_rotated?0:r).attr("x2",c.axis_rotated?b.width:r);G.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",r);Ha.attr("transform",null).attr("d",f);la.attr("transform",null).attr("d",h);W.attr("transform",null).attr("d",k);ya.attr("transform",null).attr("cx",m).attr("cy",p);K.attr("transform",null).attr("x",u).attr("y",q).style("fill-opacity",b.opacityForText.bind(b));
M.attr("transform",null);M.select("rect").filter(b.isRegionOnX).attr("x",b.regionX.bind(b)).attr("width",b.regionWidth.bind(b));c.interaction_enabled&&b.redrawEventRect();E();b.flowing=!1})}};c.selected=function(a){var b=this.internal,c=b.d3;return c.merge(b.main.selectAll("."+l.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+l.shape).filter(function(){return c.select(this).classed(l.SELECTED)}).map(function(a){return a.map(function(a){a=a.__data__;return a.data?a.data:a})}))};c.select=function(a,
b,c){var d=this.internal,e=d.d3,g=d.config;g.data_selection_enabled&&d.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(f,h){var k=e.select(this),m=f.data?f.data.id:f.id,t=d.getToggle(this,f).bind(d);m=g.data_selection_grouped||!a||0<=a.indexOf(m);var p=!b||0<=b.indexOf(h),r=k.classed(l.SELECTED);k.classed(l.line)||k.classed(l.area)||(m&&p?g.data_selection_isselectable(f)&&!r&&t(!0,k.classed(l.SELECTED,!0),f,h):z(c)&&c&&r&&t(!1,k.classed(l.SELECTED,!1),f,h))})};c.unselect=function(a,
b){var c=this.internal,d=c.d3,e=c.config;e.data_selection_enabled&&c.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(g,f){var h=d.select(this),k=g.data?g.data.id:g.id,m=c.getToggle(this,g).bind(c);k=e.data_selection_grouped||!a||0<=a.indexOf(k);var t=!b||0<=b.indexOf(f),p=h.classed(l.SELECTED);h.classed(l.line)||h.classed(l.area)||k&&t&&e.data_selection_isselectable(g)&&p&&m(!1,h.classed(l.SELECTED,!1),g,f)})};c.transform=function(a,b){var c=this.internal,d=0<=["pie","donut"].indexOf(a)?
{withTransform:!0}:null;c.transformTo(b,a,d)};a.transformTo=function(a,b,c){var d=!this.hasArcType();c=c||{withTransitionForAxis:d};this.transiting=c.withTransitionForTransform=!1;this.setTargetType(a,b);this.updateTargets(this.data.targets);this.updateAndRedraw(c)};c.groups=function(a){var b=this.internal,c=b.config;if(y(a))return c.data_groups;c.data_groups=a;b.redraw();return c.data_groups};c.xgrids=function(a){var b=this.internal,c=b.config;if(!a)return c.grid_x_lines;c.grid_x_lines=a;b.redrawWithoutRescale();
return c.grid_x_lines};c.xgrids.add=function(a){return this.xgrids(this.internal.config.grid_x_lines.concat(a?a:[]))};c.xgrids.remove=function(a){this.internal.removeGridLines(a,!0)};c.ygrids=function(a){var b=this.internal,c=b.config;if(!a)return c.grid_y_lines;c.grid_y_lines=a;b.redrawWithoutRescale();return c.grid_y_lines};c.ygrids.add=function(a){return this.ygrids(this.internal.config.grid_y_lines.concat(a?a:[]))};c.ygrids.remove=function(a){this.internal.removeGridLines(a,!1)};c.regions=function(a){var b=
this.internal,c=b.config;if(!a)return c.regions;c.regions=a;b.redrawWithoutRescale();return c.regions};c.regions.add=function(a){var b=this.internal,c=b.config;if(!a)return c.regions;c.regions=c.regions.concat(a);b.redrawWithoutRescale();return c.regions};c.regions.remove=function(a){var b=this.internal,c=b.config;a=a||{};var d=b.getOption(a,"duration",c.transition_duration);var e=b.getOption(a,"classes",[l.region]);a=b.main.select("."+l.regions).selectAll(e.map(function(a){return"."+a}));(d?a.transition().duration(d):
a).style("opacity",0).remove();c.regions=c.regions.filter(function(a){var b=!1;if(!a["class"])return!0;a["class"].split(" ").forEach(function(a){0<=e.indexOf(a)&&(b=!0)});return!b});return c.regions};c.data=function(a){var b=this.internal.data.targets;return"undefined"===typeof a?b:b.filter(function(b){return 0<=[].concat(a).indexOf(b.id)})};c.data.shown=function(a){return this.internal.filterTargetsToShow(this.data(a))};c.data.values=function(a){var b=null;a&&(a=this.data(a),b=a[0]?a[0].values.map(function(a){return a.value}):
null);return b};c.data.names=function(a){this.internal.clearLegendItemTextBoxCache();return this.internal.updateDataAttributes("names",a)};c.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)};c.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)};c.category=function(a,b){var c=this.internal,d=c.config;1<arguments.length&&(d.axis_x_categories[a]=b,c.redraw());return d.axis_x_categories[a]};c.categories=function(a){var b=this.internal,c=b.config;if(!arguments.length)return c.axis_x_categories;
c.axis_x_categories=a;b.redraw();return c.axis_x_categories};c.color=function(a){return this.internal.color(a)};c.x=function(a){var b=this.internal;arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}));return b.data.xs};c.xs=function(a){var b=this.internal;arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}));return b.data.xs};c.axis=function(){};c.axis.labels=function(a){var b=this.internal;
arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,a[c])}),b.axis.updateLabels())};c.axis.max=function(a){var b=this.internal,c=b.config;if(arguments.length)"object"===typeof a?(u(a.x)&&(c.axis_x_max=a.x),u(a.y)&&(c.axis_y_max=a.y),u(a.y2)&&(c.axis_y2_max=a.y2)):c.axis_y_max=c.axis_y2_max=a,b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:c.axis_x_max,y:c.axis_y_max,y2:c.axis_y2_max}};c.axis.min=function(a){var b=this.internal,c=b.config;if(arguments.length)"object"===
typeof a?(u(a.x)&&(c.axis_x_min=a.x),u(a.y)&&(c.axis_y_min=a.y),u(a.y2)&&(c.axis_y2_min=a.y2)):c.axis_y_min=c.axis_y2_min=a,b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:c.axis_x_min,y:c.axis_y_min,y2:c.axis_y2_min}};c.axis.range=function(a){if(arguments.length)z(a.max)&&this.axis.max(a.max),z(a.min)&&this.axis.min(a.min);else return{max:this.axis.max(),min:this.axis.min()}};c.legend=function(){};c.legend.show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a));
b.updateAndRedraw({withLegend:!0})};c.legend.hide=function(a){var b=this.internal;b.hideLegend(b.mapToTargetIds(a));b.updateAndRedraw({withLegend:!0})};c.resize=function(a){var b=this.internal.config;b.size_width=a?a.width:null;b.size_height=a?a.height:null;this.flush()};c.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})};c.destroy=function(){var a=this.internal;h.clearInterval(a.intervalForObserveInserted);void 0!==a.resizeTimeout&&h.clearTimeout(a.resizeTimeout);
if(h.detachEvent)h.detachEvent("onresize",a.resizeFunction);else if(h.removeEventListener)h.removeEventListener("resize",a.resizeFunction);else{var b=h.onresize;b&&b.add&&b.remove&&b.remove(a.resizeFunction)}a.selectChart.classed("c3",!1).html("");Object.keys(a).forEach(function(b){a[b]=null});return null};c.tooltip=function(){};c.tooltip.show=function(a){var b=this.internal;if(a.mouse)var c=a.mouse;if(a.data)if(b.isMultipleX()){c=[b.x(a.data.x),b.getYScale(a.data.id)(a.data.value)];var d=null}else d=
u(a.data.index)?a.data.index:b.getIndexByX(a.data.x);else"undefined"!==typeof a.x?d=b.getIndexByX(a.x):"undefined"!==typeof a.index&&(d=a.index);b.dispatchEvent("mouseover",d,c);b.dispatchEvent("mousemove",d,c);b.config.tooltip_onshow.call(b,a.data)};c.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0);this.internal.config.tooltip_onhide.call(this)};var K;a.isSafari=function(){var a=h.navigator.userAgent;return 0<=a.indexOf("Safari")&&0>a.indexOf("Chrome")};a.isChrome=function(){return 0<=
h.navigator.userAgent.indexOf("Chrome")};Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};d.prototype=this.prototype;e.prototype=new d;return e});(function(){"SVGPathSeg"in h||(h.SVGPathSeg=function(a,
b,c){this.pathSegType=a;this.pathSegTypeAsLetter=b;this._owningPathSegList=c},SVGPathSeg.PATHSEG_UNKNOWN=0,SVGPathSeg.PATHSEG_CLOSEPATH=1,SVGPathSeg.PATHSEG_MOVETO_ABS=2,SVGPathSeg.PATHSEG_MOVETO_REL=3,SVGPathSeg.PATHSEG_LINETO_ABS=4,SVGPathSeg.PATHSEG_LINETO_REL=5,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,SVGPathSeg.PATHSEG_ARC_ABS=10,SVGPathSeg.PATHSEG_ARC_REL=11,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=
12,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},h.SVGPathSegClosePath=function(a){SVGPathSeg.call(this,
SVGPathSeg.PATHSEG_CLOSEPATH,"z",a)},SVGPathSegClosePath.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},SVGPathSegClosePath.prototype.clone=function(){return new SVGPathSegClosePath(void 0)},h.SVGPathSegMovetoAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_ABS,"M",a);this._x=b;this._y=c},SVGPathSegMovetoAbs.prototype=
Object.create(SVGPathSeg.prototype),SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoAbs.prototype.clone=function(){return new SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoAbs.prototype,
"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegMovetoRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_REL,"m",a);this._x=b;this._y=c},SVGPathSegMovetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoRel.prototype.clone=
function(){return new SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegLinetoAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_ABS,"L",a);this._x=b;this._y=c},SVGPathSegLinetoAbs.prototype=
Object.create(SVGPathSeg.prototype),SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoAbs.prototype.clone=function(){return new SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoAbs.prototype,
"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegLinetoRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_REL,"l",a);this._x=b;this._y=c},SVGPathSegLinetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoRel.prototype.clone=
function(){return new SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegCurvetoCubicAbs=function(a,b,c,d,e,f,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",a);this._x=b;
this._y=c;this._x1=d;this._y1=e;this._x2=f;this._y2=h},SVGPathSegCurvetoCubicAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicAbs(void 0,this._x,
this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a;this._segmentChanged()},enumerable:!0}),
h.SVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",a);this._x=b;this._y=c;this._x1=d;this._y1=e;this._x2=f;this._y2=h},SVGPathSegCurvetoCubicRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+
this._x+" "+this._y},SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,
"x1",{get:function(){return this._x1},set:function(a){this._x1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},
set:function(a){this._y2=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegCurvetoQuadraticAbs=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",a);this._x=b;this._y=c;this._x1=d;this._y1=e},SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+
" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegCurvetoQuadraticRel=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",a);this._x=b;this._y=c;this._x1=d;
this._y1=e},SVGPathSegCurvetoQuadraticRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,
"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},
set:function(a){this._y1=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegArcAbs=function(a,b,c,d,e,f,h,k){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_ABS,"A",a);this._x=b;this._y=c;this._r1=d;this._r2=e;this._angle=f;this._largeArcFlag=h;this._sweepFlag=k},SVGPathSegArcAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+
" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcAbs.prototype.clone=function(){return new SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},
set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegArcRel=function(a,b,c,d,e,f,h,k){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_REL,"a",a);this._x=b;this._y=c;this._r1=
d;this._r2=e;this._angle=f;this._largeArcFlag=h;this._sweepFlag=k},SVGPathSegArcRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcRel.prototype.clone=function(){return new SVGPathSegArcRel(void 0,
this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegLinetoHorizontalAbs=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",a);this._x=b},SVGPathSegLinetoHorizontalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},
SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegLinetoHorizontalRel=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",
a);this._x=b},SVGPathSegLinetoHorizontalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},
set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegLinetoVerticalAbs=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",a);this._y=b},SVGPathSegLinetoVerticalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalAbs.prototype.clone=
function(){return new SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegLinetoVerticalRel=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",a);this._y=b},SVGPathSegLinetoVerticalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},
SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",
a);this._x=b;this._y=c;this._x2=d;this._y2=e},SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,
this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d,e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",a);this._x=b;this._y=c;this._x2=d;this._y2=e},SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},
SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,
"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegCurvetoQuadraticSmoothAbs=function(a,b,c){SVGPathSeg.call(this,
SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",a);this._x=b;this._y=c},SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,
this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),h.SVGPathSegCurvetoQuadraticSmoothRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",a);this._x=b;this._y=
c},SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,
"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new SVGPathSegClosePath(void 0)},SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(a,b){return new SVGPathSegMovetoAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegMovetoRel=
function(a,b){return new SVGPathSegMovetoRel(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(a,b){return new SVGPathSegLinetoAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegLinetoRel=function(a,b){return new SVGPathSegLinetoRel(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(a,b,c,d,e,f){return new SVGPathSegCurvetoCubicAbs(void 0,a,b,c,d,e,f)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(a,b,c,d,e,f){return new SVGPathSegCurvetoCubicRel(void 0,
a,b,c,d,e,f)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(a,b,c,d){return new SVGPathSegCurvetoQuadraticAbs(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(a,b,c,d){return new SVGPathSegCurvetoQuadraticRel(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegArcAbs=function(a,b,c,d,e,f,h){return new SVGPathSegArcAbs(void 0,a,b,c,d,e,f,h)},SVGPathElement.prototype.createSVGPathSegArcRel=function(a,b,c,d,e,f,h){return new SVGPathSegArcRel(void 0,
a,b,c,d,e,f,h)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(a){return new SVGPathSegLinetoHorizontalAbs(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(a){return new SVGPathSegLinetoHorizontalRel(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(a){return new SVGPathSegLinetoVerticalAbs(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(a){return new SVGPathSegLinetoVerticalRel(void 0,
a)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d){return new SVGPathSegCurvetoCubicSmoothRel(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(a,b){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(a,
b){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,a,b)});"SVGPathSegList"in h||(h.SVGPathSegList=function(a){this._pathElement=a;this._list=this._parsePath(this._pathElement.getAttribute("d"));this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]};this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this));this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},Object.defineProperty(SVGPathSegList.prototype,
"numberOfItems",{get:function(){this._checkPathSynchronizedToList();return this._list.length},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"pathSegList",{get:function(){this._pathSegList||(this._pathSegList=new SVGPathSegList(this));return this._pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},
enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},SVGPathSegList.prototype._updateListFromPathMutations=function(a){if(this._pathElement){var b=!1;a.forEach(function(a){"d"==a.attributeName&&(b=!0)});b&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},
SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect();this._pathElement.setAttribute("d",SVGPathSegList._pathSegArrayAsString(this._list));this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},SVGPathSegList.prototype.segmentChanged=function(a){this._writeListToPath()},SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList();this._list.forEach(function(a){a._owningPathSegList=null});this._list=
[];this._writeListToPath()},SVGPathSegList.prototype.initialize=function(a){this._checkPathSynchronizedToList();this._list=[a];a._owningPathSegList=this;this._writeListToPath();return a},SVGPathSegList.prototype._checkValidIndex=function(a){if(isNaN(a)||0>a||a>=this.numberOfItems)throw"INDEX_SIZE_ERR";},SVGPathSegList.prototype.getItem=function(a){this._checkPathSynchronizedToList();this._checkValidIndex(a);return this._list[a]},SVGPathSegList.prototype.insertItemBefore=function(a,b){this._checkPathSynchronizedToList();
b>this.numberOfItems&&(b=this.numberOfItems);a._owningPathSegList&&(a=a.clone());this._list.splice(b,0,a);a._owningPathSegList=this;this._writeListToPath();return a},SVGPathSegList.prototype.replaceItem=function(a,b){this._checkPathSynchronizedToList();a._owningPathSegList&&(a=a.clone());this._checkValidIndex(b);this._list[b]=a;a._owningPathSegList=this;this._writeListToPath();return a},SVGPathSegList.prototype.removeItem=function(a){this._checkPathSynchronizedToList();this._checkValidIndex(a);var b=
this._list[a];this._list.splice(a,1);this._writeListToPath();return b},SVGPathSegList.prototype.appendItem=function(a){this._checkPathSynchronizedToList();a._owningPathSegList&&(a=a.clone());this._list.push(a);a._owningPathSegList=this;this._writeListToPath();return a},SVGPathSegList._pathSegArrayAsString=function(a){var b="",c=!0;a.forEach(function(a){c?(c=!1,b+=a._asPathString()):b+=" "+a._asPathString()});return b},SVGPathSegList.prototype._parsePath=function(a){if(!a||0==a.length)return[];var b=
this,c=function(){this.pathSegList=[]};c.prototype.appendSegment=function(a){this.pathSegList.push(a)};var d=function(a){this._string=a;this._currentIndex=0;this._endIndex=this._string.length;this._previousCommand=SVGPathSeg.PATHSEG_UNKNOWN;this._skipOptionalSpaces()};d.prototype._isCurrentSpace=function(){var a=this._string[this._currentIndex];return" ">=a&&(" "==a||"\n"==a||"\t"==a||"\r"==a||"\f"==a)};d.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;
return this._currentIndex<this._endIndex};d.prototype._skipOptionalSpacesOrDelimiter=function(){if(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))return!1;this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces());return this._currentIndex<this._endIndex};d.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex};d.prototype.peekSegmentType=
function(){return this._pathSegTypeFromChar(this._string[this._currentIndex])};d.prototype._pathSegTypeFromChar=function(a){switch(a){case "Z":case "z":return SVGPathSeg.PATHSEG_CLOSEPATH;case "M":return SVGPathSeg.PATHSEG_MOVETO_ABS;case "m":return SVGPathSeg.PATHSEG_MOVETO_REL;case "L":return SVGPathSeg.PATHSEG_LINETO_ABS;case "l":return SVGPathSeg.PATHSEG_LINETO_REL;case "C":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case "c":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case "Q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;
case "q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case "A":return SVGPathSeg.PATHSEG_ARC_ABS;case "a":return SVGPathSeg.PATHSEG_ARC_REL;case "H":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case "h":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case "V":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case "v":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case "S":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case "s":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case "T":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;
case "t":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return SVGPathSeg.PATHSEG_UNKNOWN}};d.prototype._nextCommandHelper=function(a,b){return("+"==a||"-"==a||"."==a||"0"<=a&&"9">=a)&&b!=SVGPathSeg.PATHSEG_CLOSEPATH?b==SVGPathSeg.PATHSEG_MOVETO_ABS?SVGPathSeg.PATHSEG_LINETO_ABS:b==SVGPathSeg.PATHSEG_MOVETO_REL?SVGPathSeg.PATHSEG_LINETO_REL:b:SVGPathSeg.PATHSEG_UNKNOWN};d.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var a=this.peekSegmentType();return a==
SVGPathSeg.PATHSEG_MOVETO_ABS||a==SVGPathSeg.PATHSEG_MOVETO_REL};d.prototype._parseNumber=function(){var a=0,b=0,c=1,d=0,e=1,f=1,g=this._currentIndex;this._skipOptionalSpaces();this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,e=-1);if(!(this._currentIndex==this._endIndex||("0">this._string.charAt(this._currentIndex)||"9"<this._string.charAt(this._currentIndex))&&
"."!=this._string.charAt(this._currentIndex))){for(var h=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)this._currentIndex++;if(this._currentIndex!=h)for(var k=this._currentIndex-1,l=1;k>=h;)b+=l*(this._string.charAt(k--)-0),l*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){this._currentIndex++;if(this._currentIndex>=this._endIndex||"0">this._string.charAt(this._currentIndex)||
"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)d+=(this._string.charAt(this._currentIndex++)-0)*(c*=.1)}if(this._currentIndex!=g&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){this._currentIndex++;
"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,f=-1);if(this._currentIndex>=this._endIndex||"0">this._string.charAt(this._currentIndex)||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)a*=10,a+=this._string.charAt(this._currentIndex)-0,this._currentIndex++}b=(b+d)*e;a&&(b*=Math.pow(10,
f*a));if(g!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),b}};d.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var a=this._string.charAt(this._currentIndex++);if("0"==a)a=!1;else if("1"==a)a=!0;else return;this._skipOptionalSpacesOrDelimiter();return a}};d.prototype.parseSegment=function(){var a=this._string[this._currentIndex];var c=this._pathSegTypeFromChar(a);if(c==SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==SVGPathSeg.PATHSEG_UNKNOWN)return null;
c=this._nextCommandHelper(a,this._previousCommand);if(c==SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;this._previousCommand=c;switch(c){case SVGPathSeg.PATHSEG_MOVETO_REL:return new SVGPathSegMovetoRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_MOVETO_ABS:return new SVGPathSegMovetoAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_REL:return new SVGPathSegLinetoRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_ABS:return new SVGPathSegLinetoAbs(b,
this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new SVGPathSegLinetoHorizontalRel(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new SVGPathSegLinetoHorizontalAbs(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new SVGPathSegLinetoVerticalRel(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new SVGPathSegLinetoVerticalAbs(b,this._parseNumber());case SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),
new SVGPathSegClosePath(b);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:a=this._parseNumber();c=this._parseNumber();var d=this._parseNumber();var e=this._parseNumber();var f=this._parseNumber();var g=this._parseNumber();return new SVGPathSegCurvetoCubicRel(b,f,g,a,c,d,e);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return a=this._parseNumber(),c=this._parseNumber(),d=this._parseNumber(),e=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),new SVGPathSegCurvetoCubicAbs(b,f,g,a,c,d,e);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return d=
this._parseNumber(),e=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),new SVGPathSegCurvetoCubicSmoothRel(b,f,g,d,e);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return d=this._parseNumber(),e=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),new SVGPathSegCurvetoCubicSmoothAbs(b,f,g,d,e);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return a=this._parseNumber(),c=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),new SVGPathSegCurvetoQuadraticRel(b,
f,g,a,c);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return a=this._parseNumber(),c=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),new SVGPathSegCurvetoQuadraticAbs(b,f,g,a,c);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new SVGPathSegCurvetoQuadraticSmoothRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new SVGPathSegCurvetoQuadraticSmoothAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_ARC_REL:a=
this._parseNumber();c=this._parseNumber();d=this._parseNumber();e=this._parseArcFlag();var h=this._parseArcFlag();f=this._parseNumber();g=this._parseNumber();return new SVGPathSegArcRel(b,f,g,a,c,d,e,h);case SVGPathSeg.PATHSEG_ARC_ABS:return a=this._parseNumber(),c=this._parseNumber(),d=this._parseNumber(),e=this._parseArcFlag(),h=this._parseArcFlag(),f=this._parseNumber(),g=this._parseNumber(),new SVGPathSegArcAbs(b,f,g,a,c,d,e,h);default:throw"Unknown path seg type.";}};c=new c;a=new d(a);if(!a.initialCommandIsMoveTo())return[];
for(;a.hasMoreData();){d=a.parseSegment();if(!d)return[];c.appendSegment(d)}return c.pathSegList})})();"function"===typeof define&&define.amd?define("c3",["d3"],function(){return k}):"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=k:h.c3=k})(window);/*

 Video.js 7.6.0 <http://videojs.com/>
 Copyright Brightcove, Inc. <https://www.brightcove.com/>
 Available under Apache License Version 2.0
 <https://github.com/videojs/video.js/blob/master/LICENSE>

 Includes vtt.js <https://github.com/mozilla/vtt.js>
 Available under Apache License Version 2.0
 <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 Programatically add the following
 @name m3u8-parser @version 4.3.0 @license Apache-2.0  @name mpd-parser @version 0.8.1 @license Apache-2.0  2019 Brightcove, Inc
 @license Apache-2.0
*/
(function(h,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f(require("global/window"),require("global/document")):"function"===typeof define&&define.amd?define(["global/window","global/document"],f):(h=h||self,h.videojs=f(h.window,h.document))})(this,function(h,f){function b(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.__proto__=b}function e(a,b){e=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return e(a,b)}function d(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(Mj){return!1}}function k(a,b,c){k=d()?Reflect.construct:function(a,b,c){var d=[null];d.push.apply(d,b);a=new (Function.bind.apply(a,d));c&&e(a,c.prototype);return a};return k.apply(null,arguments)}function c(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return a}function a(a,b){b||(b=a.slice(0));a.raw=b;return a}function l(a){var b="info",c=function(){for(var a=arguments.length,c=Array(a),e=0;e<a;e++)c[e]=arguments[e];d("log",b,c)};var d=Cc(a,c);c.createLogger=function(b){return l(a+": "+b)};c.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:b};c.level=function(a){if("string"===typeof a){if(!c.levels.hasOwnProperty(a))throw Error('"'+a+'" in not a valid log level');
b=a}return b};c.history=function(){return hb?[].concat(hb):[]};c.history.filter=function(a){return(hb||[]).filter(function(b){return(new RegExp(".*"+a+".*")).test(b[0])})};c.history.clear=function(){hb&&(hb.length=0)};c.history.disable=function(){null!==hb&&(hb.length=0,hb=null)};c.history.enable=function(){null===hb&&(hb=[])};c.error=function(){for(var a=arguments.length,c=Array(a),e=0;e<a;e++)c[e]=arguments[e];return d("error",b,c)};c.warn=function(){for(var a=arguments.length,c=Array(a),e=0;e<
a;e++)c[e]=arguments[e];return d("warn",b,c)};c.debug=function(){for(var a=arguments.length,c=Array(a),e=0;e<a;e++)c[e]=arguments[e];return d("debug",b,c)};return c}function u(a,b){db(a).forEach(function(c){return b(a[c],c)})}function q(a,b,c){void 0===c&&(c=0);return db(a).reduce(function(c,d){return b(c,a[d],d)},c)}function r(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(Object.assign)return Object.assign.apply(Object,[a].concat(c));c.forEach(function(b){b&&
u(b,function(b,c){a[c]=b})});return a}function y(a){return!!a&&"object"===typeof a}function z(a){return y(a)&&"[object Object]"===ib.call(a)&&a.constructor===Object}function p(a,b){return a&&b?"function"===typeof h.getComputedStyle?(a=h.getComputedStyle(a))?a[b]:"":"":""}function x(){var b=a(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ",
"."]);x=function(){return b};return b}function t(a){if(/\s/.test(a))throw Error("class has illegal whitespace characters");}function B(){return f===h.document}function C(a){return y(a)&&1===a.nodeType}function F(){try{return h.parent!==h.self}catch(Mj){return!0}}function H(a){return function(b,c){if("string"!==typeof b||!/\S/.test(b))return f[a](null);"string"===typeof c&&/\S/.test(c)&&(c=f.querySelector(c));c=C(c)?c:f;return c[a]&&c[a](b)}}function G(a,b,c,d){void 0===a&&(a="div");void 0===b&&(b=
{});void 0===c&&(c={});var e=f.createElement(a);Object.getOwnPropertyNames(b).forEach(function(a){var c=b[a];-1!==a.indexOf("aria-")||"role"===a||"type"===a?(xa.warn(pb(x(),a,c)),e.setAttribute(a,c)):"textContent"===a?E(e,c):e[a]=c});Object.getOwnPropertyNames(c).forEach(function(a){e.setAttribute(a,c[a])});d&&sa(e,d);return e}function E(a,b){"undefined"===typeof a.textContent?a.innerText=b:a.textContent=b;return a}function K(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}function g(a,
b){t(b);return a.classList?a.classList.contains(b):(new RegExp("(^|\\s)"+b+"($|\\s)")).test(a.className)}function m(a,b){a.classList?a.classList.add(b):g(a,b)||(a.className=(a.className+" "+b).trim());return a}function A(a,b){a.classList?a.classList.remove(b):(t(b),a.className=a.className.split(/\s+/).filter(function(a){return a!==b}).join(" "));return a}function M(a,b,c){var d=g(a,b);"function"===typeof c&&(c=c(a,b));"boolean"!==typeof c&&(c=!d);if(c!==d)return c?m(a,b):A(a,b),a}function L(a,b){Object.getOwnPropertyNames(b).forEach(function(c){var d=
b[c];null===d||"undefined"===typeof d||!1===d?a.removeAttribute(c):a.setAttribute(c,!0===d?"":d)})}function Q(a){var b={};if(a&&a.attributes&&0<a.attributes.length)for(var c=a.attributes,d=c.length-1;0<=d;d--){var e=c[d].name,f=c[d].value;if("boolean"===typeof a[e]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+e+","))f=null!==f?!0:!1;b[e]=f}return b}function ia(){f.body.focus();f.onselectstart=function(){return!1}}function V(){f.onselectstart=function(){return!0}}
function Aa(a){if(a&&a.getBoundingClientRect&&a.parentNode){var b=a.getBoundingClientRect(),c={};"bottom height left right top width".split(" ").forEach(function(a){void 0!==b[a]&&(c[a]=b[a])});c.height||(c.height=parseFloat(p(a,"height")));c.width||(c.width=parseFloat(p(a,"width")));return c}}function U(a){var b;a.getBoundingClientRect&&a.parentNode&&(b=a.getBoundingClientRect());if(!b)return{left:0,top:0};a=f.documentElement;var c=f.body;return{left:Math.round(b.left+(h.pageXOffset||c.scrollLeft)-
(a.clientLeft||c.clientLeft||0)),top:Math.round(b.top+(h.pageYOffset||c.scrollTop)-(a.clientTop||c.clientTop||0))}}function X(a,b){var c={},d=U(a),e=a.offsetWidth;a=a.offsetHeight;var f=d.top;d=d.left;var g=b.pageY,n=b.pageX;b.changedTouches&&(n=b.changedTouches[0].pageX,g=b.changedTouches[0].pageY);c.y=Math.max(0,Math.min(1,(f-g+a)/a));c.x=Math.max(0,Math.min(1,(n-d)/e));return c}function da(a){return y(a)&&3===a.nodeType}function R(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function Z(a){"function"===
typeof a&&(a=a());return(Array.isArray(a)?a:[a]).map(function(a){"function"===typeof a&&(a=a());if(C(a)||da(a))return a;if("string"===typeof a&&/\S/.test(a))return f.createTextNode(a)}).filter(function(a){return a})}function sa(a,b){Z(b).forEach(function(b){return a.appendChild(b)});return a}function qa(a,b){return sa(R(a),b)}function ma(a){return void 0===a.button&&void 0===a.buttons||0===a.button&&void 0===a.buttons||0===a.button&&0===a.buttons?!0:0!==a.button||1!==a.buttons?!1:!0}function ea(a){var b=
a[Cb];b||(b=a[Cb]=ab++);Lb[b]||(Lb[b]={});return Lb[b]}function Ya(a){return(a=a[Cb])?!!Object.getOwnPropertyNames(Lb[a]).length:!1}function Va(a){var b=a[Cb];if(b){delete Lb[b];try{delete a[Cb]}catch(Bc){a.removeAttribute?a.removeAttribute(Cb):a[Cb]=null}}}function ub(a,b){var c=ea(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher));0>=Object.getOwnPropertyNames(c.handlers).length&&(delete c.handlers,
delete c.dispatcher,delete c.disabled);0===Object.getOwnPropertyNames(c).length&&Va(a)}function Za(a,b,c,d){c.forEach(function(c){a(b,c,d)})}function Ba(a){function b(){return!0}function c(){return!1}if(!a||!a.isPropagationStopped){var d=a||h.event;a={};for(var e in d)"layerX"!==e&&"layerY"!==e&&"keyLocation"!==e&&"webkitMovementX"!==e&&"webkitMovementY"!==e&&("returnValue"===e&&d.preventDefault||(a[e]=d[e]));a.target||(a.target=a.srcElement||f);a.relatedTarget||(a.relatedTarget=a.fromElement===a.target?
a.toElement:a.fromElement);a.preventDefault=function(){d.preventDefault&&d.preventDefault();a.returnValue=!1;d.returnValue=!1;a.defaultPrevented=!0};a.defaultPrevented=!1;a.stopPropagation=function(){d.stopPropagation&&d.stopPropagation();a.cancelBubble=!0;d.cancelBubble=!0;a.isPropagationStopped=b};a.isPropagationStopped=c;a.stopImmediatePropagation=function(){d.stopImmediatePropagation&&d.stopImmediatePropagation();a.isImmediatePropagationStopped=b;a.stopPropagation()};a.isImmediatePropagationStopped=
c;if(null!==a.clientX&&void 0!==a.clientX){e=f.documentElement;var g=f.body;a.pageX=a.clientX+(e&&e.scrollLeft||g&&g.scrollLeft||0)-(e&&e.clientLeft||g&&g.clientLeft||0);a.pageY=a.clientY+(e&&e.scrollTop||g&&g.scrollTop||0)-(e&&e.clientTop||g&&g.clientTop||0)}a.which=a.charCode||a.keyCode;null!==a.button&&void 0!==a.button&&(a.button=a.button&1?0:a.button&4?1:a.button&2?2:0)}return a}function Ma(a,b,c){if(Array.isArray(b))return Za(Ma,a,b,c);var d=ea(a);d.handlers||(d.handlers={});d.handlers[b]||
(d.handlers[b]=[]);c.guid||(c.guid=ab++);d.handlers[b].push(c);d.dispatcher||(d.disabled=!1,d.dispatcher=function(b,c){if(!d.disabled){b=Ba(b);var e=d.handlers[b.type];if(e){e=e.slice(0);for(var f=0,g=e.length;f<g&&!b.isImmediatePropagationStopped();f++)try{e[f].call(a,b,c)}catch(Qc){xa.error(Qc)}}}});1===d.handlers[b].length&&(a.addEventListener?(c=!1,rc&&-1<pe.indexOf(b)&&(c={passive:!0}),a.addEventListener(b,d.dispatcher,c)):a.attachEvent&&a.attachEvent("on"+b,d.dispatcher))}function Ea(a,b,c){if(Ya(a)){var d=
ea(a);if(d.handlers){if(Array.isArray(b))return Za(Ea,a,b,c);if(void 0===b)for(var e in d.handlers)Object.prototype.hasOwnProperty.call(d.handlers||{},e)&&(b=a,c=e,d.handlers[c]=[],ub(b,c));else if(e=d.handlers[b]){if(!c)d.handlers[b]=[];else if(c.guid)for(d=0;d<e.length;d++)e[d].guid===c.guid&&e.splice(d--,1);ub(a,b)}}}}function Qa(a,b,c){var d=Ya(a)?ea(a):{},e=a.parentNode||a.ownerDocument;"string"===typeof b?b={type:b,target:a}:b.target||(b.target=a);b=Ba(b);d.dispatcher&&d.dispatcher.call(a,b,
c);if(e&&!b.isPropagationStopped()&&!0===b.bubbles)Qa.call(null,e,b,c);else if(!e&&!b.defaultPrevented&&b.target&&b.target[b.type]&&(a=ea(b.target),b.target[b.type])){a.disabled=!0;if("function"===typeof b.target[b.type])b.target[b.type]();a.disabled=!1}return!b.defaultPrevented}function Ha(a,b,c){if(Array.isArray(b))return Za(Ha,a,b,c);var d=function Ab(){Ea(a,b,Ab);c.apply(this,arguments)};d.guid=c.guid=c.guid||ab++;Ma(a,b,d)}function la(a,b,c){var d=function Ab(){Ea(a,b,Ab);c.apply(this,arguments)};
d.guid=c.guid=c.guid||ab++;Ma(a,b,d)}function W(a,b){b&&(Le=b);h.setTimeout(Wb,a)}function ya(a,b){void 0===b&&(b={});if(b=b.eventBusKey){if(!a[b].nodeName)throw Error('The eventBusKey "'+b+'" does not refer to an element.');a.eventBusEl_=a[b]}else a.eventBusEl_=G("span",{className:"vjs-event-bus"});r(a,sf);a.eventedCallbacks&&a.eventedCallbacks.forEach(function(a){a()});a.on("dispose",function(){a.off();h.setTimeout(function(){a.eventBusEl_=null},0)});return a}function Pa(a,b){r(a,tf);a.state=r({},
a.state,b);if("function"===typeof a.handleStateChanged&&vb(a))a.on("statechanged",a.handleStateChanged);return a}function va(a){return"string"!==typeof a?a:a.charAt(0).toUpperCase()+a.slice(1)}function Ka(a,b){return va(a)===va(b)}function ta(){for(var a={},b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];c.forEach(function(b){b&&u(b,function(b,c){z(b)?(z(a[c])||(a[c]={}),a[c]=ta(a[c],b)):a[c]=b})});return a}function qb(a,b,c,d){var e=c.length-1;if("number"!==typeof d||0>d||d>e)throw Error("Failed to execute '"+
a+"' on 'TimeRanges': The index provided ("+d+") is non-numeric or out of bounds (0-"+e+").");return c[d][b]}function cb(a){return void 0===a||0===a.length?{length:0,start:function(){throw Error("This TimeRanges object is empty");},end:function(){throw Error("This TimeRanges object is empty");}}:{length:a.length,start:qb.bind(null,"start",0,a),end:qb.bind(null,"end",1,a)}}function N(a,b){return Array.isArray(a)?cb(a):void 0===a||void 0===b?cb():cb([[a,b]])}function v(a,b){var c=0;if(!b)return 0;a&&
a.length||(a=N(0,0));for(var d=0;d<a.length;d++){var e=a.start(d);var f=a.end(d);f>b&&(f=b);c+=f-e}return c/b}function Ca(a){if(a instanceof Ca)return a;"number"===typeof a?this.code=a:"string"===typeof a?this.message=a:y(a)&&("number"===typeof a.code&&(this.code=a.code),r(this,a));this.message||(this.message=Ca.defaultMessages[this.code]||"")}function ca(a){return void 0!==a&&null!==a&&"function"===typeof a.then}function Ra(a){ca(a)&&a.then(null,function(a){})}function hc(a,b){return b={exports:{}},
a(b,b.exports),b.exports}function oa(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function ba(a,b,c){var d=a,e=ag.call(b);"[object Function]"===e||"function"===typeof b&&"[object RegExp]"!==e||"undefined"!==typeof window&&(b===window.setTimeout||b===window.alert||b===window.confirm||b===window.prompt)?(c=b,"string"===typeof a&&(d={uri:a})):d=Ai(b,{uri:a});d.callback=c;return d}function La(a,b,c){b=ba(a,b,c);return Wc(b)}function Wc(a){function b(b){clearTimeout(t);b instanceof Error||
(b=Error(""+(b||"Unknown XMLHttpRequest Error")));b.statusCode=0;var c=p;d||(d=!0,a.callback(b,c,void 0))}function c(){if(!g){clearTimeout(t);var b=a.useXDR&&void 0===e.status?200:1223===e.status?204:e.status;var c=p,f=null;if(0!==b){e.response?c=e.response:(c=e.responseText)||("document"===e.responseType?c=e.responseXML:(c=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName,c=""!==e.responseType||c?null:e.responseXML));if(m)try{c=JSON.parse(c)}catch(Zm){}c={body:c,statusCode:b,
method:h,headers:{},url:n,rawRequest:e};e.getAllResponseHeaders&&(c.headers=Th(e.getAllResponseHeaders()))}else f=Error("Internal XMLHttpRequest Error");b=c.body;d||(d=!0,a.callback(f,c,b))}}if("undefined"===typeof a.callback)throw Error("callback argument missing");var d=!1,e=a.xhr||null;e||(e=a.cors||a.useXDR?new La.XDomainRequest:new La.XMLHttpRequest);var f,g,n=e.url=a.uri||a.url,h=e.method=a.method||"GET",k=a.body||a.data,w=e.headers=a.headers||{},l=!!a.sync,m=!1,t,p={body:void 0,headers:{},
statusCode:0,method:h,url:n,rawRequest:e};"json"in a&&!1!==a.json&&(m=!0,w.accept||w.Accept||(w.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(w["content-type"]||w["Content-Type"]||(w["Content-Type"]="application/json"),k=JSON.stringify(!0===a.json?k:a.json)));e.onreadystatechange=function(){4===e.readyState&&setTimeout(c,0)};e.onload=c;e.onerror=b;e.onprogress=function(){};e.onabort=function(){g=!0};e.ontimeout=b;e.open(h,n,!l,a.username,a.password);l||(e.withCredentials=!!a.withCredentials);
!l&&0<a.timeout&&(t=setTimeout(function(){if(!g){g=!0;e.abort("timeout");var a=Error("XMLHttpRequest timeout");a.code="ETIMEDOUT";b(a)}},a.timeout));if(e.setRequestHeader)for(f in w)w.hasOwnProperty(f)&&e.setRequestHeader(f,w[f]);else if(a.headers&&!oa(a.headers))throw Error("Headers cannot be set on an XDomainRequest object");"responseType"in a&&(e.responseType=a.responseType);"beforeSend"in a&&"function"===typeof a.beforeSend&&a.beforeSend(e);e.send(k||null);return e}function Pb(){}function za(a,
b){this.name="ParsingError";this.code=a.code;this.message=b||a.message}function ra(a){a=a.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);if(!a)return null;if(a[3]){var b=a[3].replace(":","");return 3600*(a[1]|0)+60*(a[2]|0)+(b|0)+(a[4]|0)/1E3}return 59<a[1]?3600*(a[1]|0)+60*(a[2]|0)+(a[4]|0)/1E3:60*(a[1]|0)+(a[2]|0)+(a[4]|0)/1E3}function Sa(){this.values=Gf(null)}function qd(a,b,c,d){a=d?a.split(d):[a];for(var e in a)"string"===typeof a[e]&&(d=a[e].split(c),2===d.length&&b(d[0],d[1]))}function Ue(a,b,
c){function d(){var b=ra(a);if(null===b)throw new za(za.Errors.BadTimeStamp,"Malformed timestamp: "+f);a=a.replace(/^[^\sa-zA-Z-]+/,"");return b}function e(){a=a.replace(/^\s+/,"")}var f=a;e();b.startTime=d();e();if("--\x3e"!==a.substr(0,3))throw new za(za.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+f);a=a.substr(3);e();b.endTime=d();e();(function(a,b){var d=new Sa;qd(a,function(a,b){switch(a){case "region":for(var e=c.length-1;0<=e;e--)if(c[e].id===b){d.set(a,
c[e].region);break}break;case "vertical":d.alt(a,b,["rl","lr"]);break;case "line":b=b.split(",");e=b[0];d.integer(a,e);d.percent(a,e)?d.set("snapToLines",!1):null;d.alt(a,e,["auto"]);2===b.length&&d.alt("lineAlign",b[1],["start","middle","end"]);break;case "position":b=b.split(",");d.percent(a,b[0]);2===b.length&&d.alt("positionAlign",b[1],["start","middle","end"]);break;case "size":d.percent(a,b);break;case "align":d.alt(a,b,["start","middle","end","left","right"])}},/:/,/\s/);b.region=d.get("region",
null);b.vertical=d.get("vertical","");b.line=d.get("line","auto");b.lineAlign=d.get("lineAlign","start");b.snapToLines=d.get("snapToLines",!0);b.size=d.get("size",100);b.align=d.get("align","middle");b.position=d.get("position",{start:0,left:0,middle:50,end:100,right:100},b.align);b.positionAlign=d.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},b.align)})(a,b)}function gb(a,b){function c(){if(!b)return null;var a=b.match(/^([^<]*)(<[^>]*>?)?/);a=a[1]?a[1]:a[2];
b=b.substr(a.length);return a}function d(a){return af[a]}function e(a){for(;l=a.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)a=a.replace(l[0],d);return a}function f(b,c){var d=yd[b];if(!d)return null;var e=a.document.createElement(d);e.localName=d;(b=Vh[b])&&c&&(e[b]=c.trim());return e}for(var g=a.document.createElement("div"),n=g,h,k=[];null!==(h=c());)if("<"===h[0])if("/"===h[1])k.length&&k[k.length-1]===h.substr(2).replace(">","")&&(k.pop(),n=n.parentNode);else{var w=ra(h.substr(1,h.length-2));if(w)h=
a.document.createProcessingInstruction("timestamp",w),n.appendChild(h);else{var l=h.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);l&&(!(h=f(l[1],l[3]))||Hf[h.localName]&&Hf[h.localName]!==n.localName||(l[2]&&(h.className=l[2].substr(1).replace("."," ")),k.push(l[1]),n.appendChild(h),n=h))}}else n.appendChild(a.document.createTextNode(e(h)));return g}function Gc(a){for(var b=0;b<Fa.length;b++){var c=Fa[b];if(a>=c[0]&&a<=c[1])return!0}return!1}function ig(a){function b(a,b){for(var c=b.childNodes.length-
1;0<=c;c--)a.push(b.childNodes[c])}function c(a){if(!a||!a.length)return null;var d=a.pop(),e=d.textContent||d.innerText;if(e)return(d=e.match(/^.*(\n|\r)/))?(a.length=0,d[0]):e;if("ruby"===d.tagName)return c(a);if(d.childNodes)return b(a,d),c(a)}var d=[],e="";if(!a||!a.childNodes)return"ltr";for(b(d,a);e=c(d);)for(var f=0;f<e.length;f++)if(a=e.charCodeAt(f),Gc(a))return"rtl";return"ltr"}function kd(){}function jd(a,b,c){this.cue=b;this.cueDiv=gb(a,b.text);var d={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",
position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(d,this.cueDiv);this.div=a.document.createElement("div");d={direction:ig(this.cueDiv),writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===b.align?"center":b.align,font:c.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(d);
this.div.appendChild(this.cueDiv);a=0;switch(b.positionAlign){case "start":a=b.position;break;case "middle":a=b.position-b.size/2;break;case "end":a=b.position-b.size}""===b.vertical?this.applyStyles({left:this.formatStyle(a,"%"),width:this.formatStyle(b.size,"%")}):this.applyStyles({top:this.formatStyle(a,"%"),height:this.formatStyle(b.size,"%")});this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,
"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function ob(a){if(a.div){var b=a.div.offsetHeight;var c=a.div.offsetWidth;var d=a.div.offsetTop;var e=(e=a.div.childNodes)&&(e=e[0])&&e.getClientRects&&e.getClientRects();a=a.div.getBoundingClientRect();var f=e?Math.max(e[0]&&e[0].height||0,a.height/e.length):0}this.left=a.left;this.right=a.right;this.top=a.top||d;this.height=a.height||b;this.bottom=a.bottom||d+(a.height||b);this.width=a.width||c;this.lineHeight=
void 0!==f?f:a.lineHeight}function rd(){}function Zb(a){return"string"!==typeof a?!1:Hb[a.toLowerCase()]?a.toLowerCase():!1}function tb(a,b,c){this.hasBeenReset=!1;var d="",e=!1,f=a,g=b,n=c,h=null,k="",w=!0,l="auto",m="start",t=50,Bc="middle",p=50,r="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return d},set:function(a){d=""+a}},pauseOnExit:{enumerable:!0,get:function(){return e},set:function(a){e=!!a}},startTime:{enumerable:!0,get:function(){return f},set:function(a){if("number"!==
typeof a)throw new TypeError("Start time must be set to a number.");f=a;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return g},set:function(a){if("number"!==typeof a)throw new TypeError("End time must be set to a number.");g=a;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return n},set:function(a){n=""+a;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return h},set:function(a){h=a;this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return k},set:function(a){a=
"string"!==typeof a?!1:eb[a.toLowerCase()]?a.toLowerCase():!1;if(!1===a)throw new SyntaxError("An invalid or illegal string was specified.");k=a;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return w},set:function(a){w=!!a;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return l},set:function(a){if("number"!==typeof a&&"auto"!==a)throw new SyntaxError("An invalid number or illegal string was specified.");l=a;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},
set:function(a){a=Zb(a);if(!a)throw new SyntaxError("An invalid or illegal string was specified.");m=a;this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return t},set:function(a){if(0>a||100<a)throw Error("Position must be between 0 and 100.");t=a;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return Bc},set:function(a){a=Zb(a);if(!a)throw new SyntaxError("An invalid or illegal string was specified.");Bc=a;this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return p},
set:function(a){if(0>a||100<a)throw Error("Size must be between 0 and 100.");p=a;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return r},set:function(a){a=Zb(a);if(!a)throw new SyntaxError("An invalid or illegal string was specified.");r=a;this.hasBeenReset=!0}}});this.displayState=void 0}function Vb(a){return"number"===typeof a&&0<=a&&100>=a}function Xc(a,b,c){a.setTimeout(function(){return lb(b,bf[b.type],c,a)},1)}function Xa(a,b){a.forEach(function(a){return a.setTech&&a.setTech(b)})}
function $b(a,b,c,d){void 0===d&&(d=null);var e="call"+va(c);e=a.reduce(gc(e),d);b=(d=e===zd)?null:b[c](e);for(e=a.length-1;0<=e;e--){var f=a[e];if(f[c])f[c](d,b)}return b}function gc(a){return function(b,c){return b===zd?zd:c[a]?c[a](b):b}}function jf(a,b){var c=Ug[a.id()],d=null;if(void 0===c||null===c)return d=b(a),Ug[a.id()]=[[b,d]],d;for(var e=0;e<c.length;e++){var f=c[e];f[0]===b&&(d=f[1])}null===d&&(d=b(a),c.push([b,d]));return d}function lb(a,b,c,d,e,f){void 0===a&&(a={});void 0===b&&(b=[]);
void 0===e&&(e=[]);void 0===f&&(f=!1);var g=b[0],n=b.slice(1);if("string"===typeof g)lb(a,bf[g],c,d,e,f);else if(g){var h=jf(d,g);if(!h.setSource)return e.push(h),lb(a,n,c,d,e,f);h.setSource(r({},a),function(b,g){if(b)return lb(a,n,c,d,e,f);e.push(h);lb(g,a.type===g.type?n:bf[g.type],c,d,e,f)})}else n.length?lb(a,n,c,d,e,f):f?c(a,e):lb(a,bf["*"],c,d,e,!0)}function Je(a){var b=If(a.src);!a.type&&b&&(a.type=b);return a}function ie(a,b){if(4===a.length)a=a[1]+a[1]+a[2]+a[2]+a[3]+a[3];else if(7===a.length)a=
a.slice(1);else throw Error("Invalid color code provided, "+a+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(a.slice(0,2),16)+","+parseInt(a.slice(2,4),16)+","+parseInt(a.slice(4,6),16)+","+b+")"}function Yc(a,b){void 0===b&&(b=a);return be(a,b)}function jg(a,b){b&&(a=b(a));if(a&&"none"!==a)return a}function kg(){var b=a(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);kg=
function(){return b};return b}function sd(){var b=a(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);sd=function(){return b};return b}function J(a,b,c){var d=J.getPlayer(a);if(d)return b&&xa.warn('Player "'+a+'" is already initialised. Options will not be applied.'),c&&d.ready(c),d;var e="string"===typeof a?$a("#"+xi(a)):a;if(!C(e))throw new TypeError("The element or ID supplied is not valid. (videojs)");
e.ownerDocument.defaultView&&e.ownerDocument.body.contains(e)||xa.warn("The element supplied is not included in the DOM");b=b||{};J.hooks("beforesetup").forEach(function(a){a=a(e,ta(b));!y(a)||Array.isArray(a)?xa.error("please return an object in beforesetup hooks"):b=ta(b,a)});d=new (S.getComponent("Player"))(e,b,c);J.hooks("setup").forEach(function(a){return a(d)});return d}function Ve(){Ve=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,
d)&&(a[d]=c[d])}return a};return Ve.apply(this,arguments)}function Md(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.__proto__=b}function Hc(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function lg(a,b){return function(c){var d=this;if(b){if(ni&&!c)return c=b.toString().replace(/^function.+?{/,"").slice(0,-1),c=Ke(c),this[Pj]=new ni(c),Uf(this[Pj],c),this[Pj];var e={postMessage:function(a){d.onmessage&&setTimeout(function(){d.onmessage({data:a,
target:e})})}};b.call(e);this.postMessage=function(a){setTimeout(function(){e.onmessage({data:a,target:d})})};this.isThisThread=!0}else return new ni(a)}}function Ke(a){try{return oi.createObjectURL(new Blob([a],{type:"application/javascript"}))}catch(Bc){var b=new zl;b.append(a);return oi.createObjectURL(b.getBlob(type))}}function Uf(a,b){if(a&&b){var c=a.terminate;a.objURL=b;a.terminate=function(){a.objURL&&oi.revokeObjectURL(a.objURL);c.call(a)}}}function je(){}h=h&&h.hasOwnProperty("default")?
h["default"]:h;f=f&&f.hasOwnProperty("default")?f["default"]:f;var hb=[],Cc=function(a,b){return function(c,d,e){d=b.levels[d];var f=new RegExp("^("+d+")$");"log"!==c&&e.unshift(c.toUpperCase()+":");e.unshift(a+":");hb&&hb.push([].concat(e));if(h.console){var g=h.console[c];g||"debug"!==c||(g=h.console.info||h.console.log);if(g&&d&&f.test(c))g[Array.isArray(e)?"apply":"call"](h.console,e)}}},xa=l("VIDEOJS"),Ic=xa.createLogger,pb=function(a){for(var b="",c=0;c<arguments.length;c++)b+=a[c].replace(/\n\r?\s*/g,
"")+(arguments[c+1]||"");return b},ib=Object.prototype.toString,db=function(a){return y(a)?Object.keys(a):[]},$a=H("querySelector"),ac=H("querySelectorAll"),bc=Object.freeze({isReal:B,isEl:C,isInFrame:F,createEl:G,textContent:E,prependTo:K,hasClass:g,addClass:m,removeClass:A,toggleClass:M,setAttributes:L,getAttributes:Q,getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},removeAttribute:function(a,b){a.removeAttribute(b)},blockTextSelection:ia,unblockTextSelection:V,
getBoundingClientRect:Aa,findPosition:U,getPointerPosition:X,isTextNode:da,emptyEl:R,normalizeContent:Z,appendContent:sa,insertContent:qa,isSingleLeftClick:ma,$:$a,$$:ac}),ab=1,Lb={},Cb="vdata"+Math.floor(h.performance&&h.performance.now()||Date.now()),rc=!1;(function(){try{var a=Object.defineProperty({},"passive",{get:function(){rc=!0}});h.addEventListener("test",null,a);h.removeEventListener("test",null,a)}catch(Nj){}})();var pe=["touchstart","touchmove"],Nd=Object.freeze({fixEvent:Ba,on:Ma,off:Ea,
trigger:Qa,one:Ha,any:la}),Me=!1,Le,Wb=function(){if(B()&&!1!==Le.options.autoSetup){var a=Array.prototype.slice.call(f.getElementsByTagName("video")),b=Array.prototype.slice.call(f.getElementsByTagName("audio")),c=Array.prototype.slice.call(f.getElementsByTagName("video-js"));if((a=a.concat(b,c))&&0<a.length)for(b=0,c=a.length;b<c;b++){var d=a[b];if(d&&d.getAttribute)void 0===d.player&&null!==d.getAttribute("data-setup")&&Le(d);else{W(1);break}}else Me||W(1)}};B()&&"complete"===f.readyState?Me=!0:
Ha(h,"load",function(){Me=!0});var uc=function(a){var b=f.createElement("style");b.className=a;return b},td=function(a,b){a.styleSheet?a.styleSheet.cssText=b:a.textContent=b},Ja=function(a,b,c){b.guid||(b.guid=ab++);var d=function(){return b.apply(a,arguments)};d.guid=c?c+"_"+b.guid:b.guid;return d},Od=function(a,b){var c=h.performance.now();return function(){var d=h.performance.now();d-c>=b&&(a.apply(void 0,arguments),c=d)}},rf=function(a,b,c,d){void 0===d&&(d=h);var e,f=function(){var f=this,g=
arguments,n=function(){n=e=null;c||a.apply(f,g)};!e&&c&&a.apply(f,g);d.clearTimeout(e);e=d.setTimeout(n,b)};f.cancel=function(){d.clearTimeout(e);e=null};return f},Ta=function(){};Ta.prototype.allowedEvents_={};Ta.prototype.on=function(a,b){var c=this.addEventListener;this.addEventListener=function(){};Ma(this,a,b);this.addEventListener=c};Ta.prototype.addEventListener=Ta.prototype.on;Ta.prototype.off=function(a,b){Ea(this,a,b)};Ta.prototype.removeEventListener=Ta.prototype.off;Ta.prototype.one=function(a,
b){var c=this.addEventListener;this.addEventListener=function(){};Ha(this,a,b);this.addEventListener=c};Ta.prototype.any=function(a,b){var c=this.addEventListener;this.addEventListener=function(){};la(this,a,b);this.addEventListener=c};Ta.prototype.trigger=function(a){var b=a.type||a;"string"===typeof a&&(a={type:b});a=Ba(a);if(this.allowedEvents_[b]&&this["on"+b])this["on"+b](a);Qa(this,a)};Ta.prototype.dispatchEvent=Ta.prototype.trigger;var Pd;Ta.prototype.queueTrigger=function(a){var b=this;Pd||
(Pd=new Map);var c=a.type||a,d=Pd.get(this);d||(d=new Map,Pd.set(this,d));var e=d.get(c);d["delete"](c);h.clearTimeout(e);e=h.setTimeout(function(){0===d.size&&(d=null,Pd["delete"](b));b.trigger(a)},0);d.set(c,e)};var vb=function(a){return a instanceof Ta||!!a.eventBusEl_&&["on","one","off","trigger"].every(function(b){return"function"===typeof a[b]})},Zc=function(a,b){vb(a)?b():(a.eventedCallbacks||(a.eventedCallbacks=[]),a.eventedCallbacks.push(b))},mg=function(a){return"string"===typeof a&&/\S/.test(a)||
Array.isArray(a)&&!!a.length},vc=function(a){if(!a.nodeName&&!vb(a))throw Error("Invalid target; must be a DOM node or evented object.");},ng=function(a){if(!mg(a))throw Error("Invalid event type; must be a non-empty string or array.");},Qd=function(a){if("function"!==typeof a)throw Error("Invalid listener; must be a function.");},Rd=function(a,b){var c=3>b.length||b[0]===a||b[0]===a.eventBusEl_;if(c){var d=a.eventBusEl_;3<=b.length&&b.shift();var e=b[0];b=b[1]}else d=b[0],e=b[1],b=b[2];vc(d);ng(e);
Qd(b);b=Ja(a,b);return{isTargetingSelf:c,target:d,type:e,listener:b}},Sd=function(a,b,c,d){vc(a);if(a.nodeName)Nd[b](a,c,d);else a[b](c,d)},sf={on:function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];b=Rd(this,c);c=b.isTargetingSelf;var e=b.target,f=b.type,g=b.listener;Sd(e,"on",f,g);if(!c){var n=function(){return a.off(e,f,g)};n.guid=g.guid;b=function(){return a.off("dispose",n)};b.guid=g.guid;Sd(this,"on","dispose",n);Sd(e,"on","dispose",b)}},one:function(){for(var a=
this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];b=Rd(this,c);var e=b.target,f=b.type,g=b.listener;b.isTargetingSelf?Sd(e,"one",f,g):(b=function Dd(){a.off(e,f,Dd);for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];g.apply(null,c)},b.guid=g.guid,Sd(e,"one",f,b))},any:function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];b=Rd(this,c);var e=b.target,f=b.type,g=b.listener;b.isTargetingSelf?Sd(e,"any",f,g):(b=function Dd(){a.off(e,f,Dd);
for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];g.apply(null,c)},b.guid=g.guid,Sd(e,"any",f,b))},off:function(a,b,c){!a||mg(a)?Ea(this.eventBusEl_,a,b):(vc(a),ng(b),Qd(c),c=Ja(this,c),this.off("dispose",c),a.nodeName?(Ea(a,b,c),Ea(a,"dispose",c)):vb(a)&&(a.off(b,c),a.off("dispose",c)))},trigger:function(a,b){return Qa(this.eventBusEl_,a,b)}},tf={state:{},setState:function(a){var b=this;"function"===typeof a&&(a=a());var c;u(a,function(a,d){b.state[d]!==a&&(c=c||{},c[d]={from:b.state[d],
to:a});b.state[d]=a});c&&vb(this)&&this.trigger({changes:c,type:"statechanged"});return c}},S=function(){function a(a,b,c){this.player_=!a&&this.play?a=this:a;this.parentComponent_=null;this.options_=ta({},this.options_);b=this.options_=ta(this.options_,b);this.id_=b.id||b.el&&b.el.id;this.id_||(this.id_=(a&&a.id&&a.id()||"no_player")+"_component_"+ab++);this.name_=b.name||null;b.el?this.el_=b.el:!1!==b.createEl&&(this.el_=this.createEl());!1!==b.evented&&ya(this,{eventBusKey:this.el_?"el_":null});
Pa(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};!1!==b.initChildren&&this.initChildren();this.ready(c);!1!==b.reportTouchActivity&&this.enableTouchActivity()}var b=a.prototype;b.dispose=function(){this.trigger({type:"dispose",bubbles:!1});if(this.children_)for(var a=this.children_.length-1;0<=a;a--)this.children_[a].dispose&&this.children_[a].dispose();this.parentComponent_=this.childNameIndex_=this.childIndex_=this.children_=null;this.el_&&(this.el_.parentNode&&
this.el_.parentNode.removeChild(this.el_),Va(this.el_),this.el_=null);this.player_=null};b.player=function(){return this.player_};b.options=function(a){return a?this.options_=ta(this.options_,a):this.options_};b.el=function(){return this.el_};b.createEl=function(a,b,c){return G(a,b,c)};b.localize=function(a,b,c){void 0===c&&(c=a);var d=this.player_.language&&this.player_.language(),e=this.player_.languages&&this.player_.languages(),f=e&&e[d];d=d&&d.split("-")[0];e=e&&e[d];f&&f[a]?c=f[a]:e&&e[a]&&
(c=e[a]);b&&(c=c.replace(/\{(\d+)\}/g,function(a,c){var d=c=b[c-1];"undefined"===typeof c&&(d=a);return d}));return c};b.contentEl=function(){return this.contentEl_||this.el_};b.id=function(){return this.id_};b.name=function(){return this.name_};b.children=function(){return this.children_};b.getChildById=function(a){return this.childIndex_[a]};b.getChild=function(a){if(a)return a=va(a),this.childNameIndex_[a]};b.addChild=function(b,c,d){void 0===c&&(c={});void 0===d&&(d=this.children_.length);if("string"===
typeof b){var e=va(b);b=c.componentClass||e;c.name=e;var f=a.getComponent(b);if(!f)throw Error("Component "+b+" does not exist");if("function"!==typeof f)return null;c=new f(this.player_||this,c)}else c=b;c.parentComponent_&&c.parentComponent_.removeChild(c);this.children_.splice(d,0,c);c.parentComponent_=this;"function"===typeof c.id&&(this.childIndex_[c.id()]=c);(e=e||c.name&&va(c.name()))&&(this.childNameIndex_[e]=c);"function"===typeof c.el&&c.el()&&(d=this.contentEl().children[d]||null,this.contentEl().insertBefore(c.el(),
d));return c};b.removeChild=function(a){"string"===typeof a&&(a=this.getChild(a));if(a&&this.children_){for(var b=!1,c=this.children_.length-1;0<=c;c--)if(this.children_[c]===a){b=!0;this.children_.splice(c,1);break}b&&(a.parentComponent_=null,this.childIndex_[a.id()]=null,this.childNameIndex_[a.name()]=null,(b=a.el())&&b.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el()))}};b.initChildren=function(){var b=this,c=this.options_.children;if(c){var d=this.options_,e=a.getComponent("Tech");
var f=Array.isArray(c)?c:Object.keys(c);f.concat(Object.keys(this.options_).filter(function(a){return!f.some(function(b){return"string"===typeof b?a===b:a===b.name})})).map(function(a){if("string"===typeof a){var d=a;a=c[d]||b.options_[d]||{}}else d=a.name;return{name:d,opts:a}}).filter(function(b){return(b=a.getComponent(b.opts.componentClass||va(b.name)))&&!e.isTech(b)}).forEach(function(a){var c=a.name;a=a.opts;void 0!==d[c]&&(a=d[c]);!1!==a&&(!0===a&&(a={}),a.playerOptions=b.options_.playerOptions,
(a=b.addChild(c,a))&&(b[c]=a))})}};b.buildCSSClass=function(){return""};b.ready=function(a,b){void 0===b&&(b=!1);a&&(this.isReady_?b?a.call(this):this.setTimeout(a,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(a)))};b.triggerReady=function(){this.isReady_=!0;this.setTimeout(function(){var a=this.readyQueue_;this.readyQueue_=[];a&&0<a.length&&a.forEach(function(a){a.call(this)},this);this.trigger("ready")},1)};b.$=function(a,b){return $a(a,b||this.contentEl())};b.$$=function(a,b){return ac(a,
b||this.contentEl())};b.hasClass=function(a){return g(this.el_,a)};b.addClass=function(a){m(this.el_,a)};b.removeClass=function(a){A(this.el_,a)};b.toggleClass=function(a,b){M(this.el_,a,b)};b.show=function(){this.removeClass("vjs-hidden")};b.hide=function(){this.addClass("vjs-hidden")};b.lockShowing=function(){this.addClass("vjs-lock-showing")};b.unlockShowing=function(){this.removeClass("vjs-lock-showing")};b.getAttribute=function(a){return this.el_.getAttribute(a)};b.setAttribute=function(a,b){this.el_.setAttribute(a,
b)};b.removeAttribute=function(a){this.el_.removeAttribute(a)};b.width=function(a,b){return this.dimension("width",a,b)};b.height=function(a,b){return this.dimension("height",a,b)};b.dimensions=function(a,b){this.width(a,!0);this.height(b)};b.dimension=function(a,b,c){if(void 0!==b){if(null===b||b!==b)b=0;-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?this.el_.style[a]=b:this.el_.style[a]="auto"===b?"":b+"px";c||this.trigger("componentresize")}else{if(!this.el_)return 0;b=this.el_.style[a];c=
b.indexOf("px");return-1!==c?parseInt(b.slice(0,c),10):parseInt(this.el_["offset"+va(a)],10)}};b.currentDimension=function(a){var b=0;if("width"!==a&&"height"!==a)throw Error("currentDimension only accepts width or height value");"function"===typeof h.getComputedStyle&&(b=h.getComputedStyle(this.el_),b=b.getPropertyValue(a)||b[a]);b=parseFloat(b);0===b&&(a="offset"+va(a),b=this.el_[a]);return b};b.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};
b.currentWidth=function(){return this.currentDimension("width")};b.currentHeight=function(){return this.currentDimension("height")};b.focus=function(){this.el_.focus()};b.blur=function(){this.el_.blur()};b.handleKeyDown=function(a){this.player_&&(a.stopPropagation(),this.player_.handleKeyDown(a))};b.handleKeyPress=function(a){this.handleKeyDown(a)};b.emitTapEvents=function(){var a=0,b=null,c;this.on("touchstart",function(d){1===d.touches.length&&(b={pageX:d.touches[0].pageX,pageY:d.touches[0].pageY},
a=h.performance.now(),c=!0)});this.on("touchmove",function(a){if(1<a.touches.length)c=!1;else if(b){var d=a.touches[0].pageX-b.pageX;a=a.touches[0].pageY-b.pageY;10<Math.sqrt(d*d+a*a)&&(c=!1)}});var d=function(){c=!1};this.on("touchleave",d);this.on("touchcancel",d);this.on("touchend",function(d){b=null;!0===c&&200>h.performance.now()-a&&(d.preventDefault(),this.trigger("tap"))})};b.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var a=Ja(this.player(),this.player().reportUserActivity),
b;this.on("touchstart",function(){a();this.clearInterval(b);b=this.setInterval(a,250)});var c=function(c){a();this.clearInterval(b)};this.on("touchmove",a);this.on("touchend",c);this.on("touchcancel",c)}};b.setTimeout=function(a,b){var c=this;a=Ja(this,a);var d=h.setTimeout(function(){c.off("dispose",e);a()},b);var e=function(){return c.clearTimeout(d)};e.guid="vjs-timeout-"+d;this.on("dispose",e);return d};b.clearTimeout=function(a){h.clearTimeout(a);var b=function(){};b.guid="vjs-timeout-"+a;this.off("dispose",
b);return a};b.setInterval=function(a,b){var c=this;a=Ja(this,a);var d=h.setInterval(a,b);a=function(){return c.clearInterval(d)};a.guid="vjs-interval-"+d;this.on("dispose",a);return d};b.clearInterval=function(a){h.clearInterval(a);var b=function(){};b.guid="vjs-interval-"+a;this.off("dispose",b);return a};b.requestAnimationFrame=function(a){var b=this;if(this.supportsRaf_){a=Ja(this,a);var c=h.requestAnimationFrame(function(){b.off("dispose",d);a()});var d=function(){return b.cancelAnimationFrame(c)};
d.guid="vjs-raf-"+c;this.on("dispose",d);return c}return this.setTimeout(a,1E3/60)};b.cancelAnimationFrame=function(a){if(this.supportsRaf_){h.cancelAnimationFrame(a);var b=function(){};b.guid="vjs-raf-"+a;this.off("dispose",b);return a}return this.clearTimeout(a)};a.registerComponent=function(b,c){if("string"!==typeof b||!b)throw Error('Illegal component name, "'+b+'"; must be a non-empty string.');var d=a.getComponent("Tech");d=d&&d.isTech(c);var e=a===c||a.prototype.isPrototypeOf(c.prototype);
if(d||!e)throw Error('Illegal component, "'+b+'"; '+(d?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");b=va(b);a.components_||(a.components_={});d=a.getComponent("Player");if("Player"===b&&d&&d.players){var f=d.players;d=Object.keys(f);if(f&&0<d.length&&d.map(function(a){return f[a]}).every(Boolean))throw Error("Can not register Player component after player has been created.");}return a.components_[b]=c};a.getComponent=function(b){if(b&&(b=va(b),a.components_&&
a.components_[b]))return a.components_[b]};return a}();S.prototype.supportsRaf_="function"===typeof h.requestAnimationFrame&&"function"===typeof h.cancelAnimationFrame;S.registerComponent("Component",S);var sb=h.navigator&&h.navigator.userAgent||"",uf=/AppleWebKit\/([\d.]+)/i.exec(sb),og=uf?parseFloat(uf.pop()):null,Td=/iPad/i.test(sb),We=/iPhone/i.test(sb)&&!Td,vf=/iPod/i.test(sb),Qb=We||Td||vf,Ne=function(){var a=sb.match(/OS (\d+)_/i);return a&&a[1]?a[1]:null}(),Db=/Android/i.test(sb),ic=function(){var a=
sb.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;var b=a[1]&&parseFloat(a[1]),c=a[2]&&parseFloat(a[2]);return b&&c?parseFloat(a[1]+"."+a[2]):b?b:null}(),$c=Db&&5>ic&&537>og,ad=/Firefox/i.test(sb),Oe=/Edge/i.test(sb),Mb=!Oe&&(/Chrome/i.test(sb)||/CriOS/i.test(sb)),pg=function(){var a=sb.match(/(Chrome|CriOS)\/(\d+)/);return a&&a[2]?parseFloat(a[2]):null}(),bd=function(){var a=/MSIE\s(\d+)\.\d/.exec(sb);a=a&&parseFloat(a[1]);!a&&/Trident\/7.0/i.test(sb)&&/rv:11.0/.test(sb)&&(a=11);
return a}(),qe=/Safari/i.test(sb)&&!Mb&&!Db&&!Oe,wc=(qe||Qb)&&!Mb,xc=/Windows/i.test(sb),Jc=B()&&("ontouchstart"in h||h.navigator.maxTouchPoints||h.DocumentTouch&&h.document instanceof h.DocumentTouch),ud=Object.freeze({IS_IPAD:Td,IS_IPHONE:We,IS_IPOD:vf,IS_IOS:Qb,IOS_VERSION:Ne,IS_ANDROID:Db,ANDROID_VERSION:ic,IS_NATIVE_ANDROID:$c,IS_FIREFOX:ad,IS_EDGE:Oe,IS_CHROME:Mb,CHROME_VERSION:pg,IE_VERSION:bd,IS_SAFARI:qe,IS_ANY_SAFARI:wc,IS_WINDOWS:xc,TOUCH_ENABLED:Jc}),cd={prefixed:!0},yc=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror fullscreen".split(" "),
"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror -webkit-full-screen".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror -moz-full-screen".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError -ms-fullscreen".split(" ")],wf=yc[0],Kb=0;for(;Kb<yc.length;Kb++)if(yc[Kb][1]in
f){var na=yc[Kb];break}if(na){for(var He=0;He<na.length;He++)cd[wf[He]]=na[He];cd.prefixed=na[0]!==wf[0]}Ca.prototype.code=0;Ca.prototype.message="";Ca.prototype.status=null;Ca.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");Ca.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",
4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ub=0;Ub<Ca.errorTypes.length;Ub++)Ca[Ca.errorTypes[Ub]]=Ub,Ca.prototype[Ca.errorTypes[Ub]]=Ub;var id=function(a){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce(function(b,c,d){a[c]&&(b[c]=a[c]);return b},{cues:a.cues&&Array.prototype.map.call(a.cues,function(a){return{startTime:a.startTime,
endTime:a.endTime,text:a.text,id:a.id}})})},Tf={textTracksToJson:function(a){var b=a.$$("track"),c=Array.prototype.map.call(b,function(a){return a.track});return Array.prototype.map.call(b,function(a){var b=id(a.track);a.src&&(b.src=a.src);return b}).concat(Array.prototype.filter.call(a.textTracks(),function(a){return-1===c.indexOf(a)}).map(id))},jsonToTextTracks:function(a,b){a.forEach(function(a){var c=b.addRemoteTextTrack(a).track;!a.src&&a.cues&&a.cues.forEach(function(a){return c.addCue(a)})});
return b.textTracks()},trackToJson_:id},ua=hc(function(a,b){function c(a){if(a&&"object"===typeof a){var b=a.which||a.keyCode||a.charCode;b&&(a=b)}if("number"===typeof a)return f[a];a=String(a);if((b=d[a.toLowerCase()])||(b=e[a.toLowerCase()]))return b;if(1===a.length)return a.charCodeAt(0)}c.isEventKey=function(a,b){if(a&&"object"===typeof a){a=a.which||a.keyCode||a.charCode;if(null===a||void 0===a)return!1;if("string"===typeof b){var c=d[b.toLowerCase()];if(c||(c=e[b.toLowerCase()]))return c===
a}else if("number"===typeof b)return b===a;return!1}};b=a.exports=c;var d=b.code=b.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,
"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},e=b.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(a=97;123>a;a++)d[String.fromCharCode(a)]=a-32;for(a=48;58>a;a++)d[a-48]=a;for(a=1;13>a;a++)d["f"+a]=a+111;for(a=0;10>a;a++)d["numpad "+a]=a+96;var f=b.names=b.title={};for(a in d)f[d[a]]=a;for(var g in e)d[g]=e[g]}),ld=function(a){function c(b,
c){b=a.call(this,b,c)||this;b.opened_=b.hasBeenOpened_=b.hasBeenFilled_=!1;b.closeable(!b.options_.uncloseable);b.content(b.options_.content);b.contentEl_=G("div",{className:"vjs-modal-dialog-content"},{role:"document"});b.descEl_=G("p",{className:"vjs-modal-dialog-description vjs-control-text",id:b.el().getAttribute("aria-describedby")});E(b.descEl_,b.description());b.el_.appendChild(b.descEl_);b.el_.appendChild(b.contentEl_);return b}b(c,a);var d=c.prototype;d.createEl=function(){return a.prototype.createEl.call(this,
"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})};d.dispose=function(){this.previouslyActiveEl_=this.descEl_=this.contentEl_=null;a.prototype.dispose.call(this)};d.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+a.prototype.buildCSSClass.call(this)};d.label=function(){return this.localize(this.options_.label||"Modal Window")};d.description=function(){var a=this.options_.description||
this.localize("This is a modal window.");this.closeable()&&(a+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button."));return a};d.open=function(){if(!this.opened_){var a=this.player();this.trigger("beforemodalopen");this.opened_=!0;(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill();this.wasPlaying_=!a.paused();this.options_.pauseOnOpen&&this.wasPlaying_&&a.pause();this.on("keydown",this.handleKeyDown);this.hadControls_=
a.controls();a.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=!0}};d.opened=function(a){if("boolean"===typeof a)this[a?"open":"close"]();return this.opened_};d.close=function(){if(this.opened_){var a=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&a.play();this.off("keydown",this.handleKeyDown);this.hadControls_&&a.controls(!0);this.hide();this.el().setAttribute("aria-hidden",
"true");this.trigger("modalclose");this.conditionalBlur_();this.options_.temporary&&this.dispose()}};d.closeable=function(a){if("boolean"===typeof a){a=this.closeable_=!!a;var b=this.getChild("closeButton");if(a&&!b){var c=this.contentEl_;this.contentEl_=this.el_;b=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=c;this.on(b,"close",this.close)}!a&&b&&(this.off(b,"close",this.close),this.removeChild(b),b.dispose())}return this.closeable_};d.fill=function(){this.fillWith(this.content())};
d.fillWith=function(a){var b=this.contentEl(),c=b.parentNode,d=b.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=!0;c.removeChild(b);this.empty();qa(b,a);this.trigger("modalfill");d?c.insertBefore(b,d):c.appendChild(b);(a=this.getChild("closeButton"))&&c.appendChild(a.el_)};d.empty=function(){this.trigger("beforemodalempty");R(this.contentEl());this.trigger("modalempty")};d.content=function(a){"undefined"!==typeof a&&(this.content_=a);return this.content_};d.conditionalFocus_=function(){var a=
f.activeElement,b=this.player_.el_;this.previouslyActiveEl_=null;if(b.contains(a)||b===a)this.previouslyActiveEl_=a,this.focus()};d.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)};d.handleKeyDown=function(a){a.stopPropagation();if(ua.isEventKey(a,"Escape")&&this.closeable())a.preventDefault(),this.close();else if(ua.isEventKey(a,"Tab")){for(var b=this.focusableEls_(),c=this.el_.querySelector(":focus"),d,e=0;e<b.length;e++)if(c===
b[e]){d=e;break}f.activeElement===this.el_&&(d=0);a.shiftKey&&0===d?(b[b.length-1].focus(),a.preventDefault()):a.shiftKey||d!==b.length-1||(b[0].focus(),a.preventDefault())}};d.focusableEls_=function(){var a=this.el_.querySelectorAll("*");return Array.prototype.filter.call(a,function(a){return(a instanceof h.HTMLAnchorElement||a instanceof h.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof h.HTMLInputElement||a instanceof h.HTMLSelectElement||a instanceof h.HTMLTextAreaElement||a instanceof
h.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof h.HTMLIFrameElement||a instanceof h.HTMLObjectElement||a instanceof h.HTMLEmbedElement||a.hasAttribute("tabindex")&&-1!==a.getAttribute("tabindex")||a.hasAttribute("contenteditable")})};return c}(S);ld.prototype.options_={pauseOnOpen:!0,temporary:!0};S.registerComponent("ModalDialog",ld);var md=function(a){function d(b){void 0===b&&(b=[]);var d=a.call(this)||this;d.tracks_=[];Object.defineProperty(c(d),"length",{get:function(){return this.tracks_.length}});
for(var e=0;e<b.length;e++)d.addTrack(b[e]);return d}b(d,a);var e=d.prototype;e.addTrack=function(a){var b=this.tracks_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.tracks_[b]}});-1===this.tracks_.indexOf(a)&&(this.tracks_.push(a),this.trigger({track:a,type:"addtrack",target:this}))};e.removeTrack=function(a){for(var b,c=0,d=this.length;c<d;c++)if(this[c]===a){b=this[c];b.off&&b.off();this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack",target:this})};
e.getTrackById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b};return d}(Ta);md.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var hf in md.prototype.allowedEvents_)md.prototype["on"+hf]=null;var Ie=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].enabled=!1)},Dg=function(a){function c(b){void 0===b&&(b=[]);for(var c=b.length-1;0<=c;c--)if(b[c].enabled){Ie(b,
b[c]);break}b=a.call(this,b)||this;b.changing_=!1;return b}b(c,a);var d=c.prototype;d.addTrack=function(b){var c=this;b.enabled&&Ie(this,b);a.prototype.addTrack.call(this,b);b.addEventListener&&(b.enabledChange_=function(){c.changing_||(c.changing_=!0,Ie(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("enabledchange",b.enabledChange_))};d.removeTrack=function(b){a.prototype.removeTrack.call(this,b);b.removeEventListener&&b.enabledChange_&&(b.removeEventListener("enabledchange",b.enabledChange_),
b.enabledChange_=null)};return c}(md),Gd=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].selected=!1)},ri=function(a){function d(b){void 0===b&&(b=[]);for(var d=b.length-1;0<=d;d--)if(b[d].selected){Gd(b,b[d]);break}b=a.call(this,b)||this;b.changing_=!1;Object.defineProperty(c(b),"selectedIndex",{get:function(){for(var a=0;a<this.length;a++)if(this[a].selected)return a;return-1},set:function(){}});return b}b(d,a);var e=d.prototype;e.addTrack=function(b){var c=
this;b.selected&&Gd(this,b);a.prototype.addTrack.call(this,b);b.addEventListener&&(b.selectedChange_=function(){c.changing_||(c.changing_=!0,Gd(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("selectedchange",b.selectedChange_))};e.removeTrack=function(b){a.prototype.removeTrack.call(this,b);b.removeEventListener&&b.selectedChange_&&(b.removeEventListener("selectedchange",b.selectedChange_),b.selectedChange_=null)};return d}(md),Eg=function(a){function c(){return a.apply(this,arguments)||
this}b(c,a);var d=c.prototype;d.addTrack=function(b){var c=this;a.prototype.addTrack.call(this,b);this.queueChange_||(this.queueChange_=function(){return c.queueTrigger("change")});this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return c.trigger("selectedlanguagechange")});b.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(b.kind)&&b.addEventListener("modechange",this.triggerSelectedlanguagechange_)};d.removeTrack=function(b){a.prototype.removeTrack.call(this,
b);b.removeEventListener&&(this.queueChange_&&b.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&b.removeEventListener("modechange",this.triggerSelectedlanguagechange_))};return c}(md),Ig=function(){function a(a){void 0===a&&(a=[]);this.trackElements_=[];Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var b=0,c=a.length;b<c;b++)this.addTrackElement_(a[b])}var b=a.prototype;b.addTrackElement_=function(a){var b=this.trackElements_.length;
""+b in this||Object.defineProperty(this,b,{get:function(){return this.trackElements_[b]}});-1===this.trackElements_.indexOf(a)&&this.trackElements_.push(a)};b.getTrackElementByTrack_=function(a){for(var b,c=0,d=this.trackElements_.length;c<d;c++)if(a===this.trackElements_[c].track){b=this.trackElements_[c];break}return b};b.removeTrackElement_=function(a){for(var b=0,c=this.trackElements_.length;b<c;b++)if(a===this.trackElements_[b]){this.trackElements_[b].track&&"function"===typeof this.trackElements_[b].track.off&&
this.trackElements_[b].track.off();"function"===typeof this.trackElements_[b].off&&this.trackElements_[b].off();this.trackElements_.splice(b,1);break}};return a}(),Jg=function(){function a(b){a.prototype.setCues_.call(this,b);Object.defineProperty(this,"length",{get:function(){return this.length_}})}var b=a.prototype;b.setCues_=function(a){var b=this.length||0,c=0,d=a.length;this.cues_=a;this.length_=a.length;a=function(a){""+a in this||Object.defineProperty(this,""+a,{get:function(){return this.cues_[a]}})};
if(b<d)for(c=b;c<d;c++)a.call(this,c)};b.getCueById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b};return a}(),oe={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},gh={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},nd={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",
chapters:"chapters",metadata:"metadata"},Kd={disabled:"disabled",hidden:"hidden",showing:"showing"},Ec=function(a){function d(b){void 0===b&&(b={});var d=a.call(this)||this;var e={id:b.id||"vjs_track_"+ab++,kind:b.kind||"",label:b.label||"",language:b.language||""};b=function(a){Object.defineProperty(c(d),a,{get:function(){return e[a]},set:function(){}})};for(var f in e)b(f);return d}b(d,a);return d}(Ta),Ld=function(a){var b="protocol hostname port pathname search hash host".split(" "),c=f.createElement("a");
c.href=a;var d=""===c.host&&"file:"!==c.protocol;if(d){var e=f.createElement("div");e.innerHTML='<a href="'+a+'"></a>';c=e.firstChild;e.setAttribute("style","display:none; position:absolute;");f.body.appendChild(e)}a={};for(var g=0;g<b.length;g++)a[b[g]]=c[b[g]];"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,""));"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,""));a.protocol||(a.protocol=h.location.protocol);d&&f.body.removeChild(e);return a},Wf=function(a){if(!a.match(/^https?:\/\//)){var b=
f.createElement("div");b.innerHTML='<a href="'+a+'">x</a>';a=b.firstChild.href}return a},Tc=function(a){return"string"===typeof a&&(a=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(a))?a.pop().toLowerCase():""},Gg=function(a){var b=h.location;a=Ld(a);return(":"===a.protocol?b.protocol:a.protocol)+a.host!==b.protocol+b.host},Yf=Object.freeze({parseUrl:Ld,getAbsoluteURL:Wf,getFileExtension:Tc,isCrossOrigin:Gg}),ag=Object.prototype.toString,Se=Array.prototype.slice,Xf=
Object.prototype.toString,lf=function(a){var b=this;if("function"!==typeof b||"[object Function]"!==Xf.call(b))throw new TypeError("Function.prototype.bind called on incompatible "+b);for(var c=Se.call(arguments,1),d,e=Math.max(0,b.length-c.length),f=[],g=0;g<e;g++)f.push("$"+g);d=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof d){var e=b.apply(this,c.concat(Se.call(arguments)));return Object(e)===e?e:this}return b.apply(a,
c.concat(Se.call(arguments)))});b.prototype&&(e=function(){},e.prototype=b.prototype,d.prototype=new e,e.prototype=null);return d},ne=Function.prototype.bind||lf,Hg=Object.prototype.toString,mf=function(a){var b=Hg.call(a),c="[object Arguments]"===b;c||(c="[object Array]"!==b&&null!==a&&"object"===typeof a&&"number"===typeof a.length&&0<=a.length&&"[object Function]"===Hg.call(a.callee));return c};if(!Object.keys){var bg=Object.prototype.hasOwnProperty,hh=Object.prototype.toString,Lh=Object.prototype.propertyIsEnumerable,
Nh=!Lh.call({toString:null},"toString"),cg=Lh.call(function(){},"prototype"),Te="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),pf=function(a){var b=a.constructor;return b&&b.prototype===a},Kg={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,
$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},sc=function(){if("undefined"===typeof window)return!1;for(var a in window)try{if(!Kg["$"+a]&&bg.call(window,a)&&null!==window[a]&&"object"===typeof window[a])try{pf(window[a])}catch(Nj){return!0}}catch(Nj){return!0}return!1}();var qf=function(a){var b=null!==a&&"object"===typeof a,c="[object Function]"===hh.call(a),d=mf(a),e=b&&"[object String]"===hh.call(a),f=[];if(!b&&!c&&!d)throw new TypeError("Object.keys called on a non-object");
b=cg&&c;if(e&&0<a.length&&!bg.call(a,0))for(e=0;e<a.length;++e)f.push(String(e));if(d&&0<a.length)for(d=0;d<a.length;++d)f.push(String(d));else for(var g in a)b&&"prototype"===g||!bg.call(a,g)||f.push(String(g));if(Nh){if("undefined"!==typeof window&&sc)try{var n=pf(a)}catch(Dd){n=!1}else n=pf(a);for(d=0;d<Te.length;++d)n&&"constructor"===Te[d]||!bg.call(a,Te[d])||f.push(Te[d])}return f}}var tc=qf,dg=Array.prototype.slice,ka=Object.keys,Uc=ka?function(a){return ka(a)}:tc,eg=Object.keys;Uc.shim=function(){Object.keys?
function(){var a=Object.keys(arguments);return a&&a.length===arguments.length}(1,2)||(Object.keys=function(a){return mf(a)?eg(dg.call(a)):eg(a)}):Object.keys=Uc;return Object.keys||Uc};var od="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),Wa=Object.prototype.toString,Qe=Array.prototype.concat,Fc=Object.defineProperty,Vc=function(){var a={};try{Fc(a,"x",{enumerable:!1,value:a});for(var b in a)return!1;return a.x===a}catch(Bc){return!1}},fg=Fc&&Vc(),gg=function(a,b){var c=2<arguments.length?
arguments[2]:{},d=Uc(b);od&&(d=Qe.call(d,Object.getOwnPropertySymbols(b)));for(var e=0;e<d.length;e+=1){var f=a,g=d[e],n=b[d[e]],h=c[d[e]];if(!(g in f)||"function"===typeof h&&"[object Function]"===Wa.call(h)&&h())fg?Fc(f,g,{configurable:!0,enumerable:!1,value:n,writable:!0}):f[g]=n}};gg.supportsDescriptors=!!fg;var fh=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError;},Id="function"===typeof Symbol&&"symbol"===
typeof Symbol.iterator,Rc=Object.getPrototypeOf||function(a){return a.__proto__},hg="undefined"===typeof Uint8Array?void 0:Rc(Uint8Array),ih={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":Id?Rc([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,
"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":void 0,"$ %Atomics%":"undefined"===typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"===typeof DataView?void 0:
DataView,"$ %DataViewPrototype%":"undefined"===typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"===typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"===
typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"===typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"===typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"===typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"===typeof Int8Array?void 0:Int8Array.prototype,
"$ %Int16Array%":"undefined"===typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"===typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"===typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"===typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":Id?Rc(Rc([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"===typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!==
typeof Map&&Id?Rc((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"===typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"===typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"===typeof Promise?
void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"===typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"===typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"===typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"===typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"===typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,
"$ %Reflect%":"undefined"===typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"===typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!==typeof Set&&Id?Rc((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"===typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,
"$ %String%":String,"$ %StringIteratorPrototype%":Id?Rc(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":Id?Symbol:void 0,"$ %SymbolPrototype%":Id?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":fh,"$ %TypedArray%":hg,"$ %TypedArrayPrototype%":hg?hg.prototype:void 0,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"===typeof Uint8Array?void 0:
Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"===typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"===typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"===typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"===typeof Uint32Array?
void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"===typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"===typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"===typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"===typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"===typeof WeakSet?void 0:WeakSet.prototype},pd=function(a,b){if(1<arguments.length&&"boolean"!==typeof b)throw new TypeError('"allowMissing" argument must be a boolean');
var c="$ "+a;if(!(c in ih))throw new SyntaxError("intrinsic "+a+" does not exist!");if("undefined"===typeof ih[c]&&!b)throw new TypeError("intrinsic "+a+" exists, but is not available. Please file an issue!");return ih[c]},jb=ne.call(Function.call,Object.prototype.hasOwnProperty),Lg=pd("%TypeError%"),Kh=pd("%SyntaxError%"),jh={"Property Descriptor":function(a,b){if("Object"!==a.Type(b))return!1;a={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};
for(var c in b)if(jb(b,c)&&!a[c])return!1;c=jb(b,"[[Value]]");b=jb(b,"[[Get]]")||jb(b,"[[Set]]");if(c&&b)throw new Lg("Property Descriptors may not be both accessor and data descriptors");return!0}},Zf=function(a,b,c,d){var e=jh[b];if("function"!==typeof e)throw new Kh("unknown record type: "+b);if(!e(a,d))throw new Lg(c+" must be a "+b);console.log(e(a,d),d)},Bb=Number.isNaN||function(a){return a!==a},Oh=Number.isNaN||function(a){return a!==a},cc=Number.isFinite||function(a){return"number"===typeof a&&
!Oh(a)&&Infinity!==a&&-Infinity!==a},ke=Function.prototype.toString,rb=/^\s*class\b/,le=function(a){try{var b=ke.call(a);return rb.test(b)}catch(Bc){return!1}},kf=Object.prototype.toString,Jh="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,Fg=function(a){if(!a||"function"!==typeof a&&"object"!==typeof a)return!1;if("function"===typeof a&&!a.prototype)return!0;if(Jh){try{if(le(a))var b=!1;else ke.call(a),b=!0}catch(Bc){b=!1}return b}if(le(a))return!1;a=kf.call(a);return"[object Function]"===
a||"[object GeneratorFunction]"===a},Na=function(a){return null===a||"function"!==typeof a&&"object"!==typeof a},Xb=Object.prototype.toString,Vf={"[[DefaultValue]]":function(a){var b=1<arguments.length?arguments[1]:"[object Date]"===Xb.call(a)?String:Number;if(b===String||b===Number){b=b===String?["toString","valueOf"]:["valueOf","toString"];var c;for(c=0;c<b.length;++c)if(Fg(a[b[c]])){var d=a[b[c]]();if(Na(d))return d}throw new TypeError("No default value");}throw new TypeError("invalid [[DefaultValue]] hint supplied");
}},Pe=pd("%Object%"),Hd=pd("%TypeError%"),Dc=pd("%String%"),nf={ToPrimitive:function(a){return Na(a)?a:1<arguments.length?Vf["[[DefaultValue]]"](a,arguments[1]):Vf["[[DefaultValue]]"](a)},ToBoolean:function(a){return!!a},ToNumber:function(a){return+a},ToInteger:function(a){a=this.ToNumber(a);return Bb(a)?0:0!==a&&cc(a)?(0<=a?1:-1)*Math.floor(Math.abs(a)):a},ToInt32:function(a){return this.ToNumber(a)>>0},ToUint32:function(a){return this.ToNumber(a)>>>0},ToUint16:function(a){a=this.ToNumber(a);if(Bb(a)||
0===a||!cc(a))return 0;a=(0<=a?1:-1)*Math.floor(Math.abs(a))%65536;return Math.floor(0<=a?a:a+65536)},ToString:function(a){return Dc(a)},ToObject:function(a){this.CheckObjectCoercible(a);return Pe(a)},CheckObjectCoercible:function(a,b){if(null==a)throw new Hd(b||"Cannot call method on "+a);return a},IsCallable:Fg,SameValue:function(a,b){return a===b?0===a?1/a===1/b:!0:Bb(a)&&Bb(b)},Type:function(a){if(null===a)return"Null";if("undefined"===typeof a)return"Undefined";if("function"===typeof a||"object"===
typeof a)return"Object";if("number"===typeof a)return"Number";if("boolean"===typeof a)return"Boolean";if("string"===typeof a)return"String"},IsPropertyDescriptor:function(a){if("Object"!==this.Type(a))return!1;var b={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0},c;for(c in a)if(jb(a,c)&&!b[c])return!1;b=jb(a,"[[Value]]");a=jb(a,"[[Get]]")||jb(a,"[[Set]]");if(b&&a)throw new Hd("Property Descriptors may not be both accessor and data descriptors");
return!0},IsAccessorDescriptor:function(a){if("undefined"===typeof a)return!1;Zf(this,"Property Descriptor","Desc",a);return jb(a,"[[Get]]")||jb(a,"[[Set]]")?!0:!1},IsDataDescriptor:function(a){if("undefined"===typeof a)return!1;Zf(this,"Property Descriptor","Desc",a);return jb(a,"[[Value]]")||jb(a,"[[Writable]]")?!0:!1},IsGenericDescriptor:function(a){if("undefined"===typeof a)return!1;Zf(this,"Property Descriptor","Desc",a);return this.IsAccessorDescriptor(a)||this.IsDataDescriptor(a)?!1:!0},FromPropertyDescriptor:function(a){if("undefined"===
typeof a)return a;Zf(this,"Property Descriptor","Desc",a);if(this.IsDataDescriptor(a))return{value:a["[[Value]]"],writable:!!a["[[Writable]]"],enumerable:!!a["[[Enumerable]]"],configurable:!!a["[[Configurable]]"]};if(this.IsAccessorDescriptor(a))return{get:a["[[Get]]"],set:a["[[Set]]"],enumerable:!!a["[[Enumerable]]"],configurable:!!a["[[Configurable]]"]};throw new Hd("FromPropertyDescriptor must be called with a fully populated Property Descriptor");},ToPropertyDescriptor:function(a){if("Object"!==
this.Type(a))throw new Hd("ToPropertyDescriptor requires an object");var b={};jb(a,"enumerable")&&(b["[[Enumerable]]"]=this.ToBoolean(a.enumerable));jb(a,"configurable")&&(b["[[Configurable]]"]=this.ToBoolean(a.configurable));jb(a,"value")&&(b["[[Value]]"]=a.value);jb(a,"writable")&&(b["[[Writable]]"]=this.ToBoolean(a.writable));if(jb(a,"get")){var c=a.get;if("undefined"!==typeof c&&!this.IsCallable(c))throw new TypeError("getter must be a function");b["[[Get]]"]=c}if(jb(a,"set")){a=a.set;if("undefined"!==
typeof a&&!this.IsCallable(a))throw new Hd("setter must be a function");b["[[Set]]"]=a}if((jb(b,"[[Get]]")||jb(b,"[[Set]]"))&&(jb(b,"[[Value]]")||jb(b,"[[Writable]]")))throw new Hd("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return b}},$f=ne.call(Function.call,String.prototype.replace),Mh=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,of=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,
fa=function(){var a=nf.ToString(nf.CheckObjectCoercible(this));return $f($f(a,Mh,""),of,"")},Jd=function(){return String.prototype.trim?String.prototype.trim:fa},Ob=ne.call(Function.call,Jd());gg(Ob,{getPolyfill:Jd,implementation:fa,shim:function(){var a=Jd();gg(String.prototype,{trim:a},{trim:function(){return String.prototype.trim!==a}});return a}});var Sc=Object.prototype.toString,Re=Object.prototype.hasOwnProperty,Sg=function(a,b,c){if(!Fg(b))throw new TypeError("iterator must be a function");
var d;3<=arguments.length&&(d=c);if("[object Array]"===Sc.call(a)){var e=d;d=0;for(var f=a.length;d<f;d++)Re.call(a,d)&&(null==e?b(a[d],d,a):b.call(e,a[d],d,a))}else if("string"===typeof a)for(e=d,d=0,f=a.length;d<f;d++)null==e?b(a.charAt(d),d,a):b.call(e,a.charAt(d),d,a);else for(e in a)Re.call(a,e)&&(null==d?b(a[e],e,a):b.call(d,a[e],e,a))},Th=function(a){if(!a)return{};var b={};Sg(Ob(a).split("\n"),function(a){var c=a.indexOf(":"),d=Ob(a.slice(0,c)).toLowerCase();a=Ob(a.slice(c+1));"undefined"===
typeof b[d]?b[d]=a:"[object Array]"===Object.prototype.toString.call(b[d])?b[d].push(a):b[d]=[b[d],a]});return b},Ai=function(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Uh.call(c,d)&&(a[d]=c[d])}return a},Uh=Object.prototype.hasOwnProperty;La.XMLHttpRequest=h.XMLHttpRequest||Pb;La.XDomainRequest="withCredentials"in new La.XMLHttpRequest?La.XMLHttpRequest:h.XDomainRequest;(function(a,b){for(var c=0;c<a.length;c++)b(a[c])})("get put post patch head delete".split(" "),
function(a){La["delete"===a?"del":a]=function(b,c,d){c=ba(b,c,d);c.method=a.toUpperCase();return Wc(c)}});var qh=function(a,b){var c=new h.WebVTT.Parser(h,h.vttjs,h.WebVTT.StringDecoder()),d=[];c.oncue=function(a){b.addCue(a)};c.onparsingerror=function(a){d.push(a)};c.onflush=function(){b.trigger({type:"loadeddata",target:b})};c.parse(a);0<d.length&&(h.console&&h.console.groupCollapsed&&h.console.groupCollapsed("Text Track parsing errors for "+b.src),d.forEach(function(a){return xa.error(a)}),h.console&&
h.console.groupEnd&&h.console.groupEnd());c.flush()},Tg=function(a,b){var c={uri:a};if(a=Gg(a))c.cors=a;La(c,Ja(this,function(a,c,d){if(a)return xa.error(a,c);b.loaded_=!0;if("function"!==typeof h.WebVTT){if(b.tech_){var e=function(){xa.error("vttjs failed to load, stopping trying to process "+b.src);b.tech_.off("vttjsloaded",f)};var f=function(){b.tech_.off("vttjserror",e);return qh(d,b)};b.tech_.one("vttjsloaded",f);b.tech_.one("vttjserror",e)}}else qh(d,b)}))},$d=function(a){function d(b){void 0===
b&&(b={});if(!b.tech)throw Error("A tech was not provided.");b=ta(b,{kind:nd[b.kind]||"subtitles",language:b.language||b.srclang||""});var d=Kd[b.mode]||"disabled",e=b["default"];if("metadata"===b.kind||"chapters"===b.kind)d="hidden";var f=a.call(this,b)||this;f.tech_=b.tech;f.cues_=[];f.activeCues_=[];var g=new Jg(f.cues_),n=new Jg(f.activeCues_),h=!1,k=Ja(c(f),function(){this.activeCues=this.activeCues;h&&(this.trigger("cuechange"),h=!1)});"disabled"!==d&&f.tech_.ready(function(){f.tech_.on("timeupdate",
k)},!0);Object.defineProperties(c(f),{"default":{get:function(){return e},set:function(){}},mode:{get:function(){return d},set:function(a){var b=this;Kd[a]&&(d=a,"disabled"!==d?this.tech_.ready(function(){b.tech_.on("timeupdate",k)},!0):this.tech_.off("timeupdate",k),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?g:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return n;for(var a=this.tech_.currentTime(),b=[],c=0,d=this.cues.length;c<
d;c++){var e=this.cues[c];e.startTime<=a&&e.endTime>=a?b.push(e):e.startTime===e.endTime&&e.startTime<=a&&e.startTime+.5>=a&&b.push(e)}h=!1;if(b.length!==this.activeCues_.length)h=!0;else for(a=0;a<b.length;a++)-1===this.activeCues_.indexOf(b[a])&&(h=!0);this.activeCues_=b;n.setCues_(this.activeCues_);return n},set:function(){}}});b.src?(f.src=b.src,Tg(b.src,c(f))):f.loaded_=!0;return f}b(d,a);var e=d.prototype;e.addCue=function(a){var b=a;if(h.vttjs&&!(a instanceof h.vttjs.VTTCue)){b=new h.vttjs.VTTCue(a.startTime,
a.endTime,a.text);for(var c in a)c in b||(b[c]=a[c]);b.id=a.id;b.originalCue_=a}a=this.tech_.textTracks();for(c=0;c<a.length;c++)a[c]!==this&&a[c].removeCue(b);this.cues_.push(b);this.cues.setCues_(this.cues_)};e.removeCue=function(a){for(var b=this.cues_.length;b--;){var c=this.cues_[b];if(c===a||c.originalCue_&&c.originalCue_===a){this.cues_.splice(b,1);this.cues.setCues_(this.cues_);break}}};return d}(Ec);$d.prototype.allowedEvents_={cuechange:"cuechange"};var Ze=function(a){function d(b){void 0===
b&&(b={});var d=ta(b,{kind:gh[b.kind]||""});b=a.call(this,d)||this;var e=!1;Object.defineProperty(c(b),"enabled",{get:function(){return e},set:function(a){"boolean"===typeof a&&a!==e&&(e=a,this.trigger("enabledchange"))}});d.enabled&&(b.enabled=d.enabled);b.loaded_=!0;return b}b(d,a);return d}(Ec),sg=function(a){function d(b){void 0===b&&(b={});var d=ta(b,{kind:oe[b.kind]||""});b=a.call(this,d)||this;var e=!1;Object.defineProperty(c(b),"selected",{get:function(){return e},set:function(a){"boolean"===
typeof a&&a!==e&&(e=a,this.trigger("selectedchange"))}});d.selected&&(b.selected=d.selected);return b}b(d,a);return d}(Ec),$e=function(a){function d(b){void 0===b&&(b={});var d=a.call(this)||this;var e=new $d(b);d.kind=e.kind;d.src=e.src;d.srclang=e.language;d.label=e.label;d["default"]=e["default"];Object.defineProperties(c(d),{readyState:{get:function(){return f}},track:{get:function(){return e}}});var f=0;e.addEventListener("loadeddata",function(){f=2;d.trigger({type:"load",target:c(d)})});return d}
b(d,a);return d}(Ta);$e.prototype.allowedEvents_={load:"load"};$e.NONE=0;$e.LOADING=1;$e.LOADED=2;$e.ERROR=3;var nc={audio:{ListClass:Dg,TrackClass:Ze,capitalName:"Audio"},video:{ListClass:ri,TrackClass:sg,capitalName:"Video"},text:{ListClass:Eg,TrackClass:$d,capitalName:"Text"}};Object.keys(nc).forEach(function(a){nc[a].getterName=a+"Tracks";nc[a].privateName=a+"Tracks_"});var ae={remoteText:{ListClass:Eg,TrackClass:$d,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},
remoteTextEl:{ListClass:Ig,TrackClass:$e,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Gb=ta(nc,ae);ae.names=Object.keys(ae);nc.names=Object.keys(nc);Gb.names=[].concat(ae.names).concat(nc.names);var Gf=Object.create||function(){function a(){}return function(b){if(1!==arguments.length)throw Error("Object.create shim only accepts one parameter.");a.prototype=b;return new a}}();za.prototype=Gf(Error.prototype);za.prototype.constructor=za;za.Errors=
{BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};Sa.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var d=0;d<c.length;++d)if(b===c[d]){this.set(a,b);break}},integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))},percent:function(a,b){return b.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&
(b=parseFloat(b),0<=b&&100>=b)?(this.set(a,b),!0):!1}};var af={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":"\u00a0"},yd={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Vh={v:"title",lang:"lang"},Hf={rt:"ruby"},Fa=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,
1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,
68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,
126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];kd.prototype.applyStyles=function(a,b){b=b||this.div;for(var c in a)a.hasOwnProperty(c)&&(b.style[c]=a[c])};kd.prototype.formatStyle=function(a,b){return 0===a?0:a+b};jd.prototype=Gf(kd.prototype);jd.prototype.constructor=jd;ob.prototype.move=function(a,b){b=void 0!==
b?b:this.lineHeight;switch(a){case "+x":this.left+=b;this.right+=b;break;case "-x":this.left-=b;this.right-=b;break;case "+y":this.top+=b;this.bottom+=b;break;case "-y":this.top-=b,this.bottom-=b}};ob.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top};ob.prototype.overlapsAny=function(a){for(var b=0;b<a.length;b++)if(this.overlaps(a[b]))return!0;return!1};ob.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=
a.left&&this.right<=a.right};ob.prototype.overlapsOppositeAxis=function(a,b){switch(b){case "+x":return this.left<a.left;case "-x":return this.right>a.right;case "+y":return this.top<a.top;case "-y":return this.bottom>a.bottom}};ob.prototype.intersectPercentage=function(a){return Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left))*Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top))/(this.height*this.width)};ob.prototype.toCSSCompatValues=function(a){return{top:this.top-
a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}};ob.getSimpleBoxPosition=function(a){var b=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,c=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,d=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a;return{left:a.left,right:a.right,top:a.top||d,height:a.height||b,bottom:a.bottom||d+(a.height||b),width:a.width||
c}};rd.StringDecoder=function(){return{decode:function(a){if(!a)return"";if("string"!==typeof a)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}};rd.convertCueToDOMTree=function(a,b){return a&&b?gb(a,b):null};rd.processCues=function(a,b,c){if(!a||!b||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var d=a.document.createElement("div");d.style.position="absolute";d.style.left="0";d.style.right="0";d.style.top="0";d.style.bottom="0";d.style.margin=
"1.5%";c.appendChild(d);if(function(a){for(var b=0;b<a.length;b++)if(a[b].hasBeenReset||!a[b].displayState)return!0;return!1}(b)){var e=[],f=ob.getSimpleBoxPosition(d),g={font:Math.round(5*f.height)/100+"px sans-serif"};(function(){for(var c,n,h=0;h<b.length;h++){n=b[h];c=new jd(a,n,g);d.appendChild(c.div);var k=void 0,w=void 0,l=c,m=f,sk=e,Ab=new ob(l),t=l.cue;if("number"===typeof t.line&&(t.snapToLines||0<=t.line&&100>=t.line))var p=t.line;else if(t.track&&t.track.textTrackList&&t.track.textTrackList.mediaElement){p=
t.track;for(var r=p.textTrackList,I=0,u=0;u<r.length&&r[u]!==p;u++)"showing"===r[u].mode&&I++;p=-1*++I}else p=-1;r=[];if(t.snapToLines){switch(t.vertical){case "":r=["+y","-y"];w="height";break;case "rl":r=["+x","-x"];w="width";break;case "lr":r=["-x","+x"],w="width"}I=Ab.lineHeight;u=I*Math.round(p);w=m[w]+I;var q=r[0];Math.abs(u)>w&&(u=(0>u?-1:1)*Math.ceil(w/I)*I);0>p&&(u+=""===t.vertical?m.height:m.width,r=r.reverse());Ab.move(q,u)}else{Ab=Ab.lineHeight/m.height*100;switch(t.lineAlign){case "middle":p-=
Ab/2;break;case "end":p-=Ab}switch(t.vertical){case "":l.applyStyles({top:l.formatStyle(p,"%")});break;case "rl":l.applyStyles({left:l.formatStyle(p,"%")});break;case "lr":l.applyStyles({right:l.formatStyle(p,"%")})}r=["+y","-x","+x","-y"];Ab=new ob(l)}a:{t=Ab;Ab=r;w=new ob(t);p=1;for(r=0;r<Ab.length;r++){for(;t.overlapsOppositeAxis(m,Ab[r])||t.within(m)&&t.overlapsAny(sk);)t.move(Ab[r]);if(t.within(m)){k=t;break a}I=t.intersectPercentage(m);p>I&&(k=new ob(t),p=I);t=new ob(w)}k=k||w}l.move(k.toCSSCompatValues(m));
n.displayState=c.div;e.push(ob.getSimpleBoxPosition(c))}})()}else for(c=0;c<b.length;c++)d.appendChild(b[c].displayState)};rd.Parser=function(a,b,c){c||(c=b,b={});b||(b={});this.window=a;this.vttjs=b;this.state="INITIAL";this.buffer="";this.decoder=c||new TextDecoder("utf8");this.regionList=[]};rd.Parser.prototype={reportOrThrowError:function(a){if(a instanceof za)this.onparsingerror&&this.onparsingerror(a);else throw a;},parse:function(a){function b(){for(var a=f.buffer,b=0;b<a.length&&"\r"!==a[b]&&
"\n"!==a[b];)++b;var c=a.substr(0,b);"\r"===a[b]&&++b;"\n"===a[b]&&++b;f.buffer=a.substr(b);return c}function c(a){var b=new Sa;qd(a,function(a,c){switch(a){case "id":b.set(a,c);break;case "width":b.percent(a,c);break;case "lines":b.integer(a,c);break;case "regionanchor":case "viewportanchor":c=c.split(",");if(2!==c.length)break;var d=new Sa;d.percent("x",c[0]);d.percent("y",c[1]);if(!d.has("x")||!d.has("y"))break;b.set(a+"X",d.get("x"));b.set(a+"Y",d.get("y"));break;case "scroll":b.alt(a,c,["up"])}},
/=/,/\s/);b.has("id")&&(a=new (f.vttjs.VTTRegion||f.window.VTTRegion),a.width=b.get("width",100),a.lines=b.get("lines",3),a.regionAnchorX=b.get("regionanchorX",0),a.regionAnchorY=b.get("regionanchorY",100),a.viewportAnchorX=b.get("viewportanchorX",0),a.viewportAnchorY=b.get("viewportanchorY",100),a.scroll=b.get("scroll",""),f.onregion&&f.onregion(a),f.regionList.push({id:b.get("id"),region:a}))}function d(a){var b=new Sa;qd(a,function(a,c){switch(a){case "MPEGT":b.integer(a+"S",c);break;case "LOCA":b.set(a+
"L",ra(c))}},/[^\d]:/,/,/);f.ontimestampmap&&f.ontimestampmap({MPEGTS:b.get("MPEGTS"),LOCAL:b.get("LOCAL")})}function e(a){a.match(/X-TIMESTAMP-MAP/)?qd(a,function(a,b){switch(a){case "X-TIMESTAMP-MAP":d(b)}},/=/):qd(a,function(a,b){switch(a){case "Region":c(b)}},/:/)}var f=this;a&&(f.buffer+=f.decoder.decode(a,{stream:!0}));try{if("INITIAL"===f.state){if(!/\r\n|\n/.test(f.buffer))return this;var g=b();var n=g.match(/^WEBVTT([ \t].*)?$/);if(!n||!n[0])throw new za(za.Errors.BadSignature);f.state="HEADER"}for(a=
!1;f.buffer;){if(!/\r\n|\n/.test(f.buffer))return this;a?a=!1:g=b();switch(f.state){case "HEADER":/:/.test(g)?e(g):g||(f.state="ID");continue;case "NOTE":g||(f.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(g)){f.state="NOTE";break}if(!g)continue;f.cue=new (f.vttjs.VTTCue||f.window.VTTCue)(0,0,"");f.state="CUE";if(-1===g.indexOf("--\x3e")){f.cue.id=g;continue}case "CUE":try{Ue(g,f.cue,f.regionList)}catch(Qc){f.reportOrThrowError(Qc);f.cue=null;f.state="BADCUE";continue}f.state="CUETEXT";
continue;case "CUETEXT":var h=-1!==g.indexOf("--\x3e");if(!g||h&&(a=!0)){f.oncue&&f.oncue(f.cue);f.cue=null;f.state="ID";continue}f.cue.text&&(f.cue.text+="\n");f.cue.text+=g;continue;case "BADCUE":g||(f.state="ID")}}}catch(Qc){f.reportOrThrowError(Qc);if("CUETEXT"===f.state&&f.cue&&f.oncue)f.oncue(f.cue);f.cue=null;f.state="INITIAL"===f.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{this.buffer+=this.decoder.decode();if(this.cue||"HEADER"===this.state)this.buffer+="\n\n",this.parse();
if("INITIAL"===this.state)throw new za(za.Errors.BadSignature);}catch(Mj){this.reportOrThrowError(Mj)}this.onflush&&this.onflush();return this}};var eb={"":1,lr:1,rl:1},Hb={start:1,middle:1,end:1,left:1,right:1};tb.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var rh={"":!0,up:!0},we=function(){var a=100,b=3,c=0,d=100,e=0,f=100,g="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(b){if(!Vb(b))throw Error("Width must be between 0 and 100.");
a=b}},lines:{enumerable:!0,get:function(){return b},set:function(a){if("number"!==typeof a)throw new TypeError("Lines must be set to a number.");b=a}},regionAnchorY:{enumerable:!0,get:function(){return d},set:function(a){if(!Vb(a))throw Error("RegionAnchorX must be between 0 and 100.");d=a}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(a){if(!Vb(a))throw Error("RegionAnchorY must be between 0 and 100.");c=a}},viewportAnchorY:{enumerable:!0,get:function(){return f},set:function(a){if(!Vb(a))throw Error("ViewportAnchorY must be between 0 and 100.");
f=a}},viewportAnchorX:{enumerable:!0,get:function(){return e},set:function(a){if(!Vb(a))throw Error("ViewportAnchorX must be between 0 and 100.");e=a}},scroll:{enumerable:!0,get:function(){return g},set:function(a){a="string"!==typeof a?!1:rh[a.toLowerCase()]?a.toLowerCase():!1;if(!1===a)throw new SyntaxError("An invalid or illegal string was specified.");g=a}}})},oc=hc(function(a){a=a.exports={WebVTT:rd,VTTCue:tb,VTTRegion:we};h.vttjs=a;h.WebVTT=a.WebVTT;var b=a.VTTCue,c=a.VTTRegion,d=h.VTTCue,e=
h.VTTRegion;a.shim=function(){h.VTTCue=b;h.VTTRegion=c};a.restore=function(){h.VTTCue=d;h.VTTRegion=e};h.VTTCue||a.shim()}),Ua=function(a){function c(b,c){void 0===b&&(b={});void 0===c&&(c=function(){});b.reportTouchActivity=!1;var d=a.call(this,null,b,c)||this;d.hasStarted_=!1;d.on("playing",function(){this.hasStarted_=!0});d.on("loadstart",function(){this.hasStarted_=!1});Gb.names.forEach(function(a){a=Gb[a];b&&b[a.getterName]&&(d[a.privateName]=b[a.getterName])});d.featuresProgressEvents||d.manualProgressOn();
d.featuresTimeupdateEvents||d.manualTimeUpdatesOn();["Text","Audio","Video"].forEach(function(a){!1===b["native"+a+"Tracks"]&&(d["featuresNative"+a+"Tracks"]=!1)});if(!1===b.nativeCaptions||!1===b.nativeTextTracks)d.featuresNativeTextTracks=!1;else if(!0===b.nativeCaptions||!0===b.nativeTextTracks)d.featuresNativeTextTracks=!0;d.featuresNativeTextTracks||d.emulateTextTracks();d.autoRemoteTextTracks_=new Gb.text.ListClass;d.initTrackListeners();b.nativeControlsForTouch||d.emitTapEvents();d.constructor&&
(d.name_=d.constructor.name||"Unknown Tech");return d}b(c,a);var d=c.prototype;d.triggerSourceset=function(a){var b=this;if(!this.isReady_)this.one("ready",function(){return b.setTimeout(function(){return b.triggerSourceset(a)},1)});this.trigger({src:a,type:"sourceset"})};d.manualProgressOn=function(){this.on("durationchange",this.onDurationChange);this.manualProgress=!0;this.one("ready",this.trackProgress)};d.manualProgressOff=function(){this.manualProgress=!1;this.stopTrackingProgress();this.off("durationchange",
this.onDurationChange)};d.trackProgress=function(a){this.stopTrackingProgress();this.progressInterval=this.setInterval(Ja(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress");this.bufferedPercent_=a;1===a&&this.stopTrackingProgress()}),500)};d.onDurationChange=function(a){this.duration_=this.duration()};d.buffered=function(){return N(0,0)};d.bufferedPercent=function(){return v(this.buffered(),this.duration_)};d.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)};
d.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};d.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};d.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,
manuallyTriggered:!0})},250)};d.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};d.dispose=function(){this.clearTracks(nc.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();a.prototype.dispose.call(this)};d.clearTracks=function(a){var b=this;a=[].concat(a);a.forEach(function(a){for(var c=b[a+"Tracks"]()||[],d=c.length;d--;){var e=c[d];"text"===a&&
b.removeRemoteTextTrack(e);c.removeTrack(e)}})};d.cleanupAutoTextTracks=function(){for(var a=this.autoRemoteTextTracks_||[],b=a.length;b--;)this.removeRemoteTextTrack(a[b])};d.reset=function(){};d.error=function(a){void 0!==a&&(this.error_=new Ca(a),this.trigger("error"));return this.error_};d.played=function(){return this.hasStarted_?N(0,0):N()};d.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};d.initTrackListeners=function(){var a=
this;nc.names.forEach(function(b){var c=function(){a.trigger(b+"trackchange")},d=a[nc[b].getterName]();d.addEventListener("removetrack",c);d.addEventListener("addtrack",c);a.on("dispose",function(){d.removeEventListener("removetrack",c);d.removeEventListener("addtrack",c)})})};d.addWebVttScript_=function(){var a=this;if(!h.WebVTT)if(f.body.contains(this.el()))if(!this.options_["vtt.js"]&&z(oc)&&0<Object.keys(oc).length)this.trigger("vttjsloaded");else{var b=f.createElement("script");b.src=this.options_["vtt.js"]||
"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";b.onload=function(){a.trigger("vttjsloaded")};b.onerror=function(){a.trigger("vttjserror")};this.on("dispose",function(){b.onload=null;b.onerror=null});h.WebVTT=!0;this.el().parentNode.appendChild(b)}else this.ready(this.addWebVttScript_)};d.emulateTextTracks=function(){var a=this,b=this.textTracks(),c=this.remoteTextTracks(),d=function(a){return b.addTrack(a.track)},e=function(a){return b.removeTrack(a.track)};c.on("addtrack",d);c.on("removetrack",
e);this.addWebVttScript_();var f=function(){return a.trigger("texttrackchange")},g=function(){f();for(var a=0;a<b.length;a++){var c=b[a];c.removeEventListener("cuechange",f);"showing"===c.mode&&c.addEventListener("cuechange",f)}};g();b.addEventListener("change",g);b.addEventListener("addtrack",g);b.addEventListener("removetrack",g);this.on("dispose",function(){c.off("addtrack",d);c.off("removetrack",e);b.removeEventListener("change",g);b.removeEventListener("addtrack",g);b.removeEventListener("removetrack",
g);for(var a=0;a<b.length;a++)b[a].removeEventListener("cuechange",f)})};d.addTextTrack=function(a,b,c){if(!a)throw Error("TextTrack kind is required but was not provided");var d=void 0;void 0===d&&(d={});var e=this.textTracks();d.kind=a;b&&(d.label=b);c&&(d.language=c);d.tech=this;a=new Gb.text.TrackClass(d);e.addTrack(a);return a};d.createRemoteTextTrack=function(a){a=ta(a,{tech:this});return new ae.remoteTextEl.TrackClass(a)};d.addRemoteTextTrack=function(a,b){var c=this;void 0===a&&(a={});var d=
this.createRemoteTextTrack(a);!0!==b&&!1!==b&&(xa.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),b=!0);this.remoteTextTrackEls().addTrackElement_(d);this.remoteTextTracks().addTrack(d.track);!0!==b&&this.ready(function(){return c.autoRemoteTextTracks_.addTrack(d.track)});return d};d.removeRemoteTextTrack=function(a){var b=this.remoteTextTrackEls().getTrackElementByTrack_(a);this.remoteTextTrackEls().removeTrackElement_(b);
this.remoteTextTracks().removeTrack(a);this.autoRemoteTextTracks_.removeTrack(a)};d.getVideoPlaybackQuality=function(){return{}};d.requestPictureInPicture=function(){var a=this.options_.Promise||h.Promise;if(a)return a.reject()};d.setPoster=function(){};d.playsinline=function(){};d.setPlaysinline=function(){};d.overrideNativeAudioTracks=function(){};d.overrideNativeVideoTracks=function(){};d.canPlayType=function(){return""};c.canPlayType=function(){return""};c.canPlaySource=function(a,b){return c.canPlayType(a.type)};
c.isTech=function(a){return a.prototype instanceof c||a instanceof c||a===c};c.registerTech=function(a,b){c.techs_||(c.techs_={});if(!c.isTech(b))throw Error("Tech "+a+" must be a Tech");if(!c.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!c.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");a=va(a);c.techs_[a]=b;"Tech"!==a&&c.defaultTechOrder_.push(a);return b};c.getTech=function(a){if(a){a=va(a);if(c.techs_&&c.techs_[a])return c.techs_[a];
if(h&&h.videojs&&h.videojs[a])return xa.warn("The "+a+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),h.videojs[a]}};return c}(S);Gb.names.forEach(function(a){var b=Gb[a];Ua.prototype[b.getterName]=function(){this[b.privateName]=this[b.privateName]||new b.ListClass;return this[b.privateName]}});Ua.prototype.featuresVolumeControl=!0;Ua.prototype.featuresMuteControl=!0;Ua.prototype.featuresFullscreenResize=!1;Ua.prototype.featuresPlaybackRate=
!1;Ua.prototype.featuresProgressEvents=!1;Ua.prototype.featuresSourceset=!1;Ua.prototype.featuresTimeupdateEvents=!1;Ua.prototype.featuresNativeTextTracks=!1;Ua.withSourceHandlers=function(a){a.registerSourceHandler=function(b,c){var d=a.sourceHandlers;d||(d=a.sourceHandlers=[]);void 0===c&&(c=d.length);d.splice(c,0,b)};a.canPlayType=function(b){for(var c=a.sourceHandlers||[],d,e=0;e<c.length;e++)if(d=c[e].canPlayType(b))return d;return""};a.selectSourceHandler=function(b,c){for(var d=a.sourceHandlers||
[],e,f=0;f<d.length;f++)if(e=d[f].canHandleSource(b,c))return d[f];return null};a.canPlaySource=function(b,c){var d=a.selectSourceHandler(b,c);return d?d.canHandleSource(b,c):""};["seekable","seeking","duration"].forEach(function(a){var b=this[a];"function"===typeof b&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):b.apply(this,arguments)})},a.prototype);a.prototype.setSource=function(b){var c=a.selectSourceHandler(b,
this.options_);c||(a.nativeSourceHandler?c=a.nativeSourceHandler:xa.error("No source handler found for the current source."));this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);c!==a.nativeSourceHandler&&(this.currentSource_=b);this.sourceHandler_=c.handleSource(b,this,this.options_);this.one("dispose",this.disposeSourceHandler)};a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null);this.cleanupAutoTextTracks();
this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};S.registerComponent("Tech",Ua);Ua.registerTech("Tech",Ua);Ua.defaultTechOrder_=[];var bf={},Ug={},zd={},xe={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1,volume:1},Nc={setCurrentTime:1,setVolume:1},sh={play:1,pause:1},ye={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",
oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},If=function(a){void 0===a&&(a="");a=Tc(a);return ye[a.toLowerCase()]||""},Vg=function(a,b){if(!b)return"";if(a.cache_.source.src===b&&a.cache_.source.type)return a.cache_.source.type;var c=a.cache_.sources.filter(function(a){return a.src===b});if(c.length)return c[0].type;a=a.$$("source");for(c=0;c<a.length;c++){var d=a[c];if(d.type&&d.src&&d.src===
b)return d.type}return If(b)},Xh=function Bc(a){if(Array.isArray(a)){var b=[];a.forEach(function(a){a=Bc(a);Array.isArray(a)?b=b.concat(a):y(a)&&b.push(a)});a=b}else a="string"===typeof a&&a.trim()?[Je({src:a})]:y(a)&&"string"===typeof a.src&&a.src&&a.src.trim()?[Je(a)]:[];return a},ze=function(a){function c(b,c,d){var e=ta({createEl:!1},c);d=a.call(this,b,e,d)||this;if(c.playerOptions.sources&&0!==c.playerOptions.sources.length)b.src(c.playerOptions.sources);else for(e=0,c=c.playerOptions.techOrder;e<
c.length;e++){var f=va(c[e]),g=Ua.getTech(f);f||(g=S.getComponent(f));if(g&&g.isSupported()){b.loadTech_(f);break}}return d}b(c,a);return c}(S);S.registerComponent("MediaLoader",ze);var T=function(a){function c(b,c){b=a.call(this,b,c)||this;b.emitTapEvents();b.enable();return b}b(c,a);var d=c.prototype;d.createEl=function(b,c,d){void 0===b&&(b="div");void 0===c&&(c={});void 0===d&&(d={});c=r({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),
tabIndex:0},c);"button"===b&&xa.error("Creating a ClickableComponent with an HTML element of "+b+" is not supported; use a Button instead.");d=r({role:"button"},d);this.tabIndex_=c.tabIndex;b=a.prototype.createEl.call(this,b,c,d);this.createControlTextEl(b);return b};d.dispose=function(){this.controlTextEl_=null;a.prototype.dispose.call(this)};d.createControlTextEl=function(a){this.controlTextEl_=G("span",{className:"vjs-control-text"},{"aria-live":"polite"});a&&a.appendChild(this.controlTextEl_);
this.controlText(this.controlText_,a);return this.controlTextEl_};d.controlText=function(a,b){void 0===b&&(b=this.el());if(void 0===a)return this.controlText_||"Need Text";var c=this.localize(a);this.controlText_=a;E(this.controlTextEl_,c);this.nonIconControl||b.setAttribute("title",c)};d.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)};d.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled",
"false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))};d.disable=function(){this.enabled_=!1;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex");this.off(["tap","click"],this.handleClick);this.off("keydown",this.handleKeyDown)};d.handleClick=function(a){};d.handleKeyDown=function(b){ua.isEventKey(b,
"Space")||ua.isEventKey(b,"Enter")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)};return c}(S);S.registerComponent("ClickableComponent",T);var wa=function(a){function d(b,d){d=a.call(this,b,d)||this;d.update();b.on("posterchange",Ja(c(d),d.update));return d}b(d,a);var e=d.prototype;e.dispose=function(){this.player().off("posterchange",this.update);a.prototype.dispose.call(this)};e.createEl=function(){return G("div",{className:"vjs-poster",tabIndex:-1})};
e.update=function(a){a=this.player().poster();this.setSrc(a);a?this.show():this.hide()};e.setSrc=function(a){var b="";a&&(b='url("'+a+'")');this.el_.style.backgroundImage=b};e.handleClick=function(a){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Ra(this.player_.play()):this.player_.pause())};return d}(T);S.registerComponent("PosterImage",wa);var zc={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',
monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},th=function(a){function d(b,d,e){d=a.call(this,b,d,e)||this;var f=Ja(c(d),d.updateDisplay);b.on("loadstart",Ja(c(d),d.toggleDisplay));b.on("texttrackchange",f);b.on("loadedmetadata",Ja(c(d),d.preselectTrack));b.ready(Ja(c(d),function(){if(b.tech_&&b.tech_.featuresNativeTextTracks)this.hide();
else{b.on("fullscreenchange",f);b.on("playerresize",f);h.addEventListener("orientationchange",f);b.on("dispose",function(){return h.removeEventListener("orientationchange",f)});for(var a=this.options_.playerOptions.tracks||[],c=0;c<a.length;c++)this.player_.addRemoteTextTrack(a[c],!0);this.preselectTrack()}}));return d}b(d,a);var e=d.prototype;e.preselectTrack=function(){for(var a={captions:1,subtitles:1},b=this.player_.textTracks(),c=this.player_.cache_.selectedLanguage,d,e,f,g=0;g<b.length;g++){var n=
b[g];c&&c.enabled&&c.language&&c.language===n.language&&n.kind in a?n.kind===c.kind?f=n:f||(f=n):c&&!c.enabled?e=d=f=null:n["default"]&&("descriptions"!==n.kind||d?n.kind in a&&!e&&(e=n):d=n)}f?f.mode="showing":e?e.mode="showing":d&&(d.mode="showing")};e.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()};e.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};
e.clearDisplay=function(){"function"===typeof h.WebVTT&&h.WebVTT.processCues(h,[],this.el_)};e.updateDisplay=function(){var a=this.player_.textTracks(),b=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(b){b=[];for(var c=0;c<a.length;++c){var d=a[c];"showing"===d.mode&&b.push(d)}this.updateForTrack(b)}else{c=b=null;for(d=a.length;d--;){var e=a[d];"showing"===e.mode&&("descriptions"===e.kind?b=e:c=e)}c?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):
b&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(b))}};e.updateDisplayState=function(a){var b=this.player_.textTrackSettings.getValues();a=a.activeCues;for(var c=a.length;c--;){var d=a[c];if(d){d=d.displayState;b.color&&(d.firstChild.style.color=b.color);if(b.textOpacity){var e=ie(b.color||"#fff",b.textOpacity);try{d.firstChild.style.color=e}catch(Qc){}}b.backgroundColor&&(d.firstChild.style.backgroundColor=b.backgroundColor);if(b.backgroundOpacity){e=
ie(b.backgroundColor||"#000",b.backgroundOpacity);try{d.firstChild.style.backgroundColor=e}catch(Qc){}}if(b.windowColor)if(b.windowOpacity){e=ie(b.windowColor,b.windowOpacity);try{d.style.backgroundColor=e}catch(Qc){}}else d.style.backgroundColor=b.windowColor;b.edgeStyle&&("dropshadow"===b.edgeStyle?d.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===b.edgeStyle?d.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===b.edgeStyle?
d.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===b.edgeStyle&&(d.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));b.fontPercent&&1!==b.fontPercent&&(e=h.parseFloat(d.style.fontSize),d.style.fontSize=e*b.fontPercent+"px",d.style.height="auto",d.style.top="auto",d.style.bottom="2px");b.fontFamily&&"default"!==b.fontFamily&&("small-caps"===b.fontFamily?d.firstChild.style.fontVariant="small-caps":d.firstChild.style.fontFamily=
zc[b.fontFamily])}}};e.updateForTrack=function(a){Array.isArray(a)||(a=[a]);if("function"===typeof h.WebVTT&&!a.every(function(a){return!a.activeCues})){for(var b=[],c=0;c<a.length;++c)for(var d=a[c],e=0;e<d.activeCues.length;++e)b.push(d.activeCues[e]);h.WebVTT.processCues(h,b,this.el_);for(b=0;b<a.length;++b){c=a[b];for(d=0;d<c.activeCues.length;++d)e=c.activeCues[d].displayState,m(e,"vjs-text-track-cue"),m(e,"vjs-text-track-cue-"+(c.language?c.language:b));this.player_.textTrackSettings&&this.updateDisplayState(c)}}};
return d}(S);S.registerComponent("TextTrackDisplay",th);var Ad=function(a){function c(){return a.apply(this,arguments)||this}b(c,a);c.prototype.createEl=function(){var b=this.player_.isAudio();b=this.localize(b?"Audio Player":"Video Player");b=G("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[b])});var c=a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});c.appendChild(b);return c};return c}(S);S.registerComponent("LoadingSpinner",Ad);
var Ib=function(a){function c(){return a.apply(this,arguments)||this}b(c,a);var d=c.prototype;d.createEl=function(a,b,c){void 0===b&&(b={});void 0===c&&(c={});a="button";b=r({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},b);c=r({type:"button"},c);a=S.prototype.createEl.call(this,a,b,c);this.createControlTextEl(a);return a};d.addChild=function(a,b){void 0===b&&(b={});xa.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+
") is not supported; use a ClickableComponent instead.");return S.prototype.addChild.call(this,a,b)};d.enable=function(){a.prototype.enable.call(this);this.el_.removeAttribute("disabled")};d.disable=function(){a.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};d.handleKeyDown=function(b){ua.isEventKey(b,"Space")||ua.isEventKey(b,"Enter")?b.stopPropagation():a.prototype.handleKeyDown.call(this,b)};return c}(T);S.registerComponent("Button",Ib);var uh=function(a){function c(b,
c){b=a.call(this,b,c)||this;b.mouseused_=!1;b.on("mousedown",b.handleMouseDown);return b}b(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-big-play-button"};d.handleClick=function(a){var b=this.player_.play();if(this.mouseused_&&a.clientX&&a.clientY)Ra(b),this.player_.tech(!0)&&this.player_.tech(!0).focus();else{var c=(a=this.player_.getChild("controlBar"))&&a.getChild("playToggle");c?(a=function(){return c.focus()},ca(b)?b.then(a,function(){}):this.setTimeout(a,1)):this.player_.tech(!0).focus()}};
d.handleKeyDown=function(b){this.mouseused_=!1;a.prototype.handleKeyDown.call(this,b)};d.handleMouseDown=function(a){this.mouseused_=!0};return c}(Ib);uh.prototype.controlText_="Play Video";S.registerComponent("BigPlayButton",uh);var Yb=function(a){function c(b,c){b=a.call(this,b,c)||this;b.controlText(c&&c.controlText||b.localize("Close"));return b}b(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)};d.handleClick=function(a){this.trigger({type:"close",
bubbles:!1})};d.handleKeyDown=function(b){ua.isEventKey(b,"Esc")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)};return c}(Ib);S.registerComponent("CloseButton",Yb);var cf=function(a){function c(b,c){void 0===c&&(c={});var d=a.call(this,b,c)||this;c.replay=void 0===c.replay||c.replay;d.on(b,"play",d.handlePlay);d.on(b,"pause",d.handlePause);if(c.replay)d.on(b,"ended",d.handleEnded);return d}b(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-play-control "+
a.prototype.buildCSSClass.call(this)};d.handleClick=function(a){this.player_.paused()?this.player_.play():this.player_.pause();a.stopPropagation()};d.handleSeeked=function(a){this.removeClass("vjs-ended");this.player_.paused()?this.handlePause(a):this.handlePlay(a)};d.handlePlay=function(a){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};d.handlePause=function(a){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};
d.handleEnded=function(a){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return c}(Ib);cf.prototype.controlText_="Play";S.registerComponent("PlayToggle",cf);var tg=function(a,b){a=0>a?0:a;var c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60);b=Math.floor(b/3600);if(isNaN(a)||Infinity===a)e=d=c="-";e=0<e||0<b?e+":":"";return e+(((e||10<=f)&&10>d?"0"+d:d)+":")+(10>c?"0"+c:c)},
be=tg,yb=function(a){function d(b,d){d=a.call(this,b,d)||this;d.throttledUpdateContent=Od(Ja(c(d),d.updateContent),25);d.on(b,"timeupdate",d.throttledUpdateContent);return d}b(d,a);var e=d.prototype;e.createEl=function(){var b=this.buildCSSClass(),c=a.prototype.createEl.call(this,"div",{className:b+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"\u00a0</span>"});this.contentEl_=G("span",{className:b+"-display"},{"aria-live":"off",
role:"presentation"});this.updateTextNode_();c.appendChild(this.contentEl_);return c};e.dispose=function(){this.textNode_=this.contentEl_=null;a.prototype.dispose.call(this)};e.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=f.createTextNode(this.formattedTime_||this.formatTime_(0));this.contentEl_.appendChild(this.textNode_)}};e.formatTime_=function(a){return Yc(a)};e.updateFormattedTime_=function(a){a=
this.formatTime_(a);a!==this.formattedTime_&&(this.formattedTime_=a,this.requestAnimationFrame(this.updateTextNode_))};e.updateContent=function(a){};return d}(S);yb.prototype.labelText_="Time";yb.prototype.controlText_="Time";S.registerComponent("TimeDisplay",yb);var ug=function(a){function c(b,c){c=a.call(this,b,c)||this;c.on(b,"ended",c.handleEnded);return c}b(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-current-time"};d.updateContent=function(a){a=this.player_.scrubbing()?this.player_.getCache().currentTime:
this.player_.currentTime();this.updateFormattedTime_(a)};d.handleEnded=function(a){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())};return c}(yb);ug.prototype.labelText_="Current Time";ug.prototype.controlText_="Current Time";S.registerComponent("CurrentTimeDisplay",ug);var pc=function(a){function c(b,c){c=a.call(this,b,c)||this;c.on(b,"durationchange",c.updateContent);c.on(b,"loadstart",c.updateContent);c.on(b,"loadedmetadata",c.throttledUpdateContent);return c}b(c,a);
var d=c.prototype;d.buildCSSClass=function(){return"vjs-duration"};d.updateContent=function(a){a=this.player_.duration();this.duration_!==a&&(this.duration_=a,this.updateFormattedTime_(a))};return c}(yb);pc.prototype.labelText_="Duration";pc.prototype.controlText_="Duration";S.registerComponent("DurationDisplay",pc);var vg=function(a){function c(){return a.apply(this,arguments)||this}b(c,a);c.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",
innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})};return c}(S);S.registerComponent("TimeDivider",vg);var gd=function(a){function c(b,c){c=a.call(this,b,c)||this;c.on(b,"durationchange",c.throttledUpdateContent);c.on(b,"ended",c.handleEnded);return c}b(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-remaining-time"};d.createEl=function(){var b=a.prototype.createEl.call(this);b.insertBefore(G("span",{},{"aria-hidden":!0},"-"),this.contentEl_);return b};d.updateContent=function(a){"number"===
typeof this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))};d.handleEnded=function(a){this.player_.duration()&&this.updateFormattedTime_(0)};return c}(yb);gd.prototype.labelText_="Remaining Time";gd.prototype.controlText_="Remaining Time";S.registerComponent("RemainingTimeDisplay",gd);var Zh=function(a){function c(b,c){b=a.call(this,b,c)||this;b.updateShowing();b.on(b.player(),
"durationchange",b.updateShowing);return b}b(c,a);var d=c.prototype;d.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=G("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"\u00a0</span>"+this.localize("LIVE")},{"aria-live":"off"});b.appendChild(this.contentEl_);return b};d.dispose=function(){this.contentEl_=null;a.prototype.dispose.call(this)};d.updateShowing=function(a){Infinity===
this.player().duration()?this.show():this.hide()};return c}(S);S.registerComponent("LiveDisplay",Zh);var Ae=function(a){function c(b,c){b=a.call(this,b,c)||this;b.updateLiveEdgeStatus();if(b.player_.liveTracker)b.on(b.player_.liveTracker,"liveedgechange",b.updateLiveEdgeStatus);return b}b(c,a);var d=c.prototype;d.createEl=function(){var b=a.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});this.textEl_=G("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},
{"aria-hidden":"true"});b.appendChild(this.textEl_);return b};d.updateLiveEdgeStatus=function(a){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))};d.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()};d.dispose=
function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus);this.textEl_=null;a.prototype.dispose.call(this)};return c}(Ib);Ae.prototype.controlText_="Seek to live, currently playing live";S.registerComponent("SeekToLive",Ae);var Wg=function(a){function c(b,c){b=a.call(this,b,c)||this;b.bar=b.getChild(b.options_.barName);b.vertical(!!b.options_.vertical);b.enable();return b}b(c,a);var d=c.prototype;d.enabled=function(){return this.enabled_};d.enable=
function(){if(!this.enabled()){this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("keydown",this.handleKeyDown);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=!0}};d.disable=function(){if(this.enabled()){var a=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);
this.off("touchstart",this.handleMouseDown);this.off("keydown",this.handleKeyDown);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(a,"mousemove",this.handleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");this.playerEvent&&this.off(this.player_,this.playerEvent,this.update);this.enabled_=!1}};d.createEl=
function(b,c,d){void 0===c&&(c={});void 0===d&&(d={});c.className+=" vjs-slider";c=r({tabIndex:0},c);d=r({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},d);return a.prototype.createEl.call(this,b,c,d)};d.handleMouseDown=function(a){var b=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault();"touchstart"!==a.type||Mb||a.preventDefault();ia();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(b,"mousemove",this.handleMouseMove);this.on(b,
"mouseup",this.handleMouseUp);this.on(b,"touchmove",this.handleMouseMove);this.on(b,"touchend",this.handleMouseUp);this.handleMouseMove(a)};d.handleMouseMove=function(a){};d.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;V();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(a,"mousemove",this.handleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);this.update()};d.update=function(){if(this.el_){var a=
this.getPercent(),b=this.bar;if(b){if("number"!==typeof a||a!==a||0>a||Infinity===a)a=0;var c=(100*a).toFixed(2)+"%";b=b.el().style;this.vertical()?b.height=c:b.width=c;return a}}};d.calculateDistance=function(a){a=X(this.el_,a);return this.vertical()?a.y:a.x};d.handleKeyDown=function(b){ua.isEventKey(b,"Left")||ua.isEventKey(b,"Down")?(b.preventDefault(),b.stopPropagation(),this.stepBack()):ua.isEventKey(b,"Right")||ua.isEventKey(b,"Up")?(b.preventDefault(),b.stopPropagation(),this.stepForward()):
a.prototype.handleKeyDown.call(this,b)};d.handleClick=function(a){a.stopPropagation();a.preventDefault()};d.vertical=function(a){if(void 0===a)return this.vertical_||!1;(this.vertical_=!!a)?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")};return c}(S);S.registerComponent("Slider",Wg);var vh=function(a){function c(b,c){c=a.call(this,b,c)||this;c.partEls_=[];c.on(b,"progress",c.update);return c}b(c,a);var d=c.prototype;d.createEl=function(){return a.prototype.createEl.call(this,
"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})};d.dispose=function(){this.partEls_=null;a.prototype.dispose.call(this)};d.update=function(a){var b=this.player_.liveTracker;a=this.player_.buffered();var c=b&&b.isLive()?b.seekableEnd():this.player_.duration(),d=this.player_.bufferedEnd();b=this.partEls_;var e=this.$(".vjs-control-text-loaded-percentage"),f=function(a,
b,c){a=a/b||0;a=100*(1<=a?1:a);c&&(a=a.toFixed(2));return a+"%"};this.el_.style.width=f(d,c);E(e,f(d,c,!0));for(c=0;c<a.length;c++){e=a.start(c);var g=a.end(c),n=b[c];n||(n=this.el_.appendChild(G()),b[c]=n);n.style.left=f(e,d);n.style.width=f(g-e,d)}for(d=b.length;d>a.length;d--)this.el_.removeChild(b[d-1]);b.length=a.length};return c}(S);S.registerComponent("LoadProgressBar",vh);var wg=function(a){function c(){return a.apply(this,arguments)||this}b(c,a);var d=c.prototype;d.createEl=function(){return a.prototype.createEl.call(this,
"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})};d.update=function(a,b,c){var d=Aa(this.el_),e=Aa(this.player_.el()),f=a.width*b;e&&d&&(b=a.left-e.left+f,a=a.width-f+(e.right-a.right),e=d.width/2,b<e?e+=e-b:a<e&&(e=a),0>e?e=0:e>d.width&&(e=d.width),this.el_.style.right="-"+e+"px",this.write(c))};d.write=function(a){E(this.el_,a)};d.updateTime=function(a,b,c,d){var e=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);this.rafId_=this.requestAnimationFrame(function(){var f=e.player_.duration();
if(e.player_.liveTracker&&e.player_.liveTracker.isLive()){f=e.player_.liveTracker.liveWindow();var g=f-b*f;f=(1>g?"":"-")+Yc(g,f)}else f=Yc(c,f);e.update(a,b,f);d&&d()})};return c}(S);S.registerComponent("TimeTooltip",wg);var ef=function(a){function c(){return a.apply(this,arguments)||this}b(c,a);var d=c.prototype;d.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})};d.update=function(a,b){var c=this.getChild("timeTooltip");
if(c){var d=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();c.updateTime(a,b,d)}};return c}(S);ef.prototype.options_={children:[]};Qb||Db||ef.prototype.options_.children.push("timeTooltip");S.registerComponent("PlayProgressBar",ef);var Xg=function(a){function d(b,d){b=a.call(this,b,d)||this;b.update=Od(Ja(c(b),b.update),25);return b}b(d,a);var e=d.prototype;e.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};e.update=
function(a,b){var c=this,d=b*this.player_.duration();this.getChild("timeTooltip").updateTime(a,b,d,function(){c.el_.style.left=a.width*b+"px"})};return d}(S);Xg.prototype.options_={children:["timeTooltip"]};S.registerComponent("MouseTimeDisplay",Xg);var ce=function(a){function c(b,c){b=a.call(this,b,c)||this;b.setEventHandlers_();return b}b(c,a);var d=c.prototype;d.setEventHandlers_=function(){this.update=Od(Ja(this,this.update),30);this.on(this.player_,"timeupdate",this.update);this.on(this.player_,
"ended",this.handleEnded);this.on(this.player_,"durationchange",this.update);if(this.player_.liveTracker)this.on(this.player_.liveTracker,"liveedgechange",this.update);this.updateInterval=null;this.on(this.player_,["playing"],this.enableInterval_);this.on(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden"in f&&"visibilityState"in f)this.on(f,"visibilitychange",this.toggleVisibility_)};d.toggleVisibility_=function(a){f.hidden?this.disableInterval_(a):(this.enableInterval_(),
this.requestAnimationFrame(this.update))};d.enableInterval_=function(){var a=this;this.clearInterval(this.updateInterval);this.updateInterval=this.setInterval(function(){a.requestAnimationFrame(a.update)},30)};d.disableInterval_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&"ended"!==a.type||this.clearInterval(this.updateInterval)};d.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};
d.update_=function(a,b){var c=this.player_.liveTracker,d=this.player_.duration();c&&c.isLive()&&(d=this.player_.liveTracker.liveCurrentTime());this.el_.setAttribute("aria-valuenow",(100*b).toFixed(2));this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Yc(a,d),Yc(d,d)],"{1} of {2}"));this.bar&&this.bar.update(Aa(this.el_),b)};d.update=function(b){if(null!==this.el().offsetParent)return b=a.prototype.update.call(this),this.update_(this.getCurrentTime_(),
b),b};d.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};d.handleEnded=function(a){this.update_(this.player_.duration(),1)};d.getPercent=function(){var a=this.getCurrentTime_(),b=this.player_.liveTracker;b&&b.isLive()?(a=(a-b.seekableStart())/b.liveWindow(),b.atLiveEdge()&&(a=1)):a/=this.player_.duration();return 1<=a?1:a||0};d.handleMouseDown=function(b){ma(b)&&(b.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=
!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,b))};d.handleMouseMove=function(a){if(ma(a)){var b=this.calculateDistance(a);var c=this.player_.liveTracker;if(c&&c.isLive()){a=c.seekableStart();var d=c.liveCurrentTime();b=a+b*c.liveWindow();b>=d&&(b=d);b<=a&&(b=a+.1);if(Infinity===b)return}else b*=this.player_.duration(),b===this.player_.duration()&&(b-=.1);this.player_.currentTime(b)}};d.enable=function(){a.prototype.enable.call(this);var b=this.getChild("mouseTimeDisplay");
b&&b.show()};d.disable=function(){a.prototype.disable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.hide()};d.handleMouseUp=function(b){a.prototype.handleMouseUp.call(this,b);b&&b.stopPropagation();this.player_.scrubbing(!1);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0});this.videoWasPlaying&&Ra(this.player_.play())};d.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)};d.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-
5)};d.handleAction=function(a){this.player_.paused()?this.player_.play():this.player_.pause()};d.handleKeyDown=function(b){ua.isEventKey(b,"Space")||ua.isEventKey(b,"Enter")?(b.preventDefault(),b.stopPropagation(),this.handleAction(b)):ua.isEventKey(b,"Home")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(0)):ua.isEventKey(b,"End")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.duration())):/^[0-9]$/.test(ua(b))?(b.preventDefault(),b.stopPropagation(),
b=10*(ua.codes[ua(b)]-ua.codes["0"])/100,this.player_.currentTime(this.player_.duration()*b)):ua.isEventKey(b,"PgDn")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):ua.isEventKey(b,"PgUp")?(b.preventDefault(),b.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):a.prototype.handleKeyDown.call(this,b)};return c}(Wg);ce.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};Qb||Db||ce.prototype.options_.children.splice(1,
0,"mouseTimeDisplay");S.registerComponent("SeekBar",ce);var hd=function(a){function d(b,d){b=a.call(this,b,d)||this;b.handleMouseMove=Od(Ja(c(b),b.handleMouseMove),25);b.throttledHandleMouseSeek=Od(Ja(c(b),b.handleMouseSeek),25);b.enable();return b}b(d,a);var e=d.prototype;e.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};e.handleMouseMove=function(a){var b=this.getChild("seekBar");if(b){var c=b.getChild("mouseTimeDisplay"),d=b.el();
b=Aa(d);a=X(d,a).x;1<a?a=1:0>a&&(a=0);c&&c.update(b,a)}};e.handleMouseSeek=function(a){var b=this.getChild("seekBar");b&&b.handleMouseMove(a)};e.enabled=function(){return this.enabled_};e.disable=function(){this.children().forEach(function(a){return a.disable&&a.disable()});this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)};e.enable=function(){this.children().forEach(function(a){return a.enable&&
a.enable()});this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)};e.handleMouseDown=function(a){var b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseDown(a);this.on(b,"mousemove",this.throttledHandleMouseSeek);this.on(b,"touchmove",this.throttledHandleMouseSeek);this.on(b,"mouseup",this.handleMouseUp);this.on(b,"touchend",this.handleMouseUp)};e.handleMouseUp=function(a){var b=
this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseUp(a);this.off(b,"mousemove",this.throttledHandleMouseSeek);this.off(b,"touchmove",this.throttledHandleMouseSeek);this.off(b,"mouseup",this.handleMouseUp);this.off(b,"touchend",this.handleMouseUp)};return d}(S);hd.prototype.options_={children:["seekBar"]};S.registerComponent("ProgressControl",hd);var Yg=function(a){function c(b,c){c=a.call(this,b,c)||this;c.on(b,["enterpictureinpicture","leavepictureinpicture"],c.handlePictureInPictureChange);
f.pictureInPictureEnabled||c.disable();return c}b(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-picture-in-picture-control "+a.prototype.buildCSSClass.call(this)};d.handlePictureInPictureChange=function(a){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture")};d.handleClick=function(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()};return c}(Ib);Yg.prototype.controlText_=
"Picture-in-Picture";S.registerComponent("PictureInPictureToggle",Yg);var xg=function(a){function c(b,c){c=a.call(this,b,c)||this;c.on(b,"fullscreenchange",c.handleFullscreenChange);!1===f[b.fsApi_.fullscreenEnabled]&&c.disable();return c}b(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)};d.handleFullscreenChange=function(a){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")};d.handleClick=
function(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()};return c}(Ib);xg.prototype.controlText_="Fullscreen";S.registerComponent("FullscreenToggle",xg);var de=function(a,b){b.tech_&&!b.tech_.featuresVolumeControl&&a.addClass("vjs-hidden");a.on(b,"loadstart",function(){b.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})},Be=function(a){function c(){return a.apply(this,arguments)||this}b(c,a);c.prototype.createEl=function(){return a.prototype.createEl.call(this,
"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return c}(S);S.registerComponent("VolumeLevel",Be);var wh=function(a){function c(b,c){var d=a.call(this,b,c)||this;d.on("slideractive",d.updateLastVolume_);d.on(b,"volumechange",d.updateARIAAttributes);b.ready(function(){return d.updateARIAAttributes()});return d}b(c,a);var d=c.prototype;d.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),
"aria-live":"polite"})};d.handleMouseDown=function(b){ma(b)&&a.prototype.handleMouseDown.call(this,b)};d.handleMouseMove=function(a){ma(a)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))};d.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)};d.getPercent=function(){return this.player_.muted()?0:this.player_.volume()};d.stepForward=function(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};d.stepBack=function(){this.checkMuted();this.player_.volume(this.player_.volume()-
.1)};d.updateARIAAttributes=function(a){a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a);this.el_.setAttribute("aria-valuetext",a+"%")};d.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())};d.updateLastVolume_=function(){var a=this,b=this.player_.volume();this.one("sliderinactive",function(){0===a.player_.volume()&&a.player_.lastVolume_(b)})};return c}(Wg);wh.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};wh.prototype.playerEvent=
"volumechange";S.registerComponent("VolumeBar",wh);var $h=function(a){function d(b,d){void 0===d&&(d={});d.vertical=d.vertical||!1;if("undefined"===typeof d.volumeBar||z(d.volumeBar))d.volumeBar=d.volumeBar||{},d.volumeBar.vertical=d.vertical;var e=a.call(this,b,d)||this;de(c(e),b);e.throttledHandleMouseMove=Od(Ja(c(e),e.handleMouseMove),25);e.on("mousedown",e.handleMouseDown);e.on("touchstart",e.handleMouseDown);e.on(e.volumeBar,["focus","slideractive"],function(){e.volumeBar.addClass("vjs-slider-active");
e.addClass("vjs-slider-active");e.trigger("slideractive")});e.on(e.volumeBar,["blur","sliderinactive"],function(){e.volumeBar.removeClass("vjs-slider-active");e.removeClass("vjs-slider-active");e.trigger("sliderinactive")});return e}b(d,a);var e=d.prototype;e.createEl=function(){var b="vjs-volume-horizontal";this.options_.vertical&&(b="vjs-volume-vertical");return a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+b})};e.handleMouseDown=function(a){a=this.el_.ownerDocument;
this.on(a,"mousemove",this.throttledHandleMouseMove);this.on(a,"touchmove",this.throttledHandleMouseMove);this.on(a,"mouseup",this.handleMouseUp);this.on(a,"touchend",this.handleMouseUp)};e.handleMouseUp=function(a){a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove);this.off(a,"touchmove",this.throttledHandleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchend",this.handleMouseUp)};e.handleMouseMove=function(a){this.volumeBar.handleMouseMove(a)};return d}(S);
$h.prototype.options_={children:["volumeBar"]};S.registerComponent("VolumeControl",$h);var Jf=function(a,b){b.tech_&&!b.tech_.featuresMuteControl&&a.addClass("vjs-hidden");a.on(b,"loadstart",function(){b.tech_.featuresMuteControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})},Kf=function(a){function d(b,d){d=a.call(this,b,d)||this;Jf(c(d),b);d.on(b,["loadstart","volumechange"],d.update);return d}b(d,a);var e=d.prototype;e.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)};
e.handleClick=function(a){a=this.player_.volume();var b=this.player_.lastVolume_();0===a?(this.player_.volume(.1>b?.1:b),this.player_.muted(!1)):this.player_.muted(this.player_.muted()?!1:!0)};e.update=function(a){this.updateIcon_();this.updateControlText_()};e.updateIcon_=function(){var a=this.player_.volume(),b=3;Qb&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted);0===a||this.player_.muted()?b=0:.33>a?b=1:.67>a&&(b=2);for(a=0;4>a;a++)A(this.el_,"vjs-vol-"+
a);m(this.el_,"vjs-vol-"+b)};e.updateControlText_=function(){var a=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)};return d}(Ib);Kf.prototype.controlText_="Mute";S.registerComponent("MuteToggle",Kf);var qc=function(a){function c(b,c){void 0===c&&(c={});c.inline="undefined"!==typeof c.inline?c.inline:!0;if("undefined"===typeof c.volumeControl||z(c.volumeControl))c.volumeControl=c.volumeControl||{},c.volumeControl.vertical=!c.inline;c=a.call(this,
b,c)||this;c.on(b,["loadstart"],c.volumePanelState_);c.on(c.volumeControl,["slideractive"],c.sliderActive_);c.on(c.volumeControl,["sliderinactive"],c.sliderInactive_);return c}b(c,a);var d=c.prototype;d.sliderActive_=function(){this.addClass("vjs-slider-active")};d.sliderInactive_=function(){this.removeClass("vjs-slider-active")};d.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden");this.volumeControl.hasClass("vjs-hidden")&&
!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")};d.createEl=function(){var b="vjs-volume-panel-horizontal";this.options_.inline||(b="vjs-volume-panel-vertical");return a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+b})};return c}(S);qc.prototype.options_={children:["muteToggle","volumeControl"]};S.registerComponent("VolumePanel",qc);var Lf=function(a){function d(b,d){b=a.call(this,b,d)||this;d&&(b.menuButton_=d.menuButton);b.focusedChild_=
-1;b.on("keydown",b.handleKeyDown);b.boundHandleBlur_=Ja(c(b),b.handleBlur);b.boundHandleTapClick_=Ja(c(b),b.handleTapClick);return b}b(d,a);var e=d.prototype;e.addEventListenerForItem=function(a){a instanceof S&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))};e.removeEventListenerForItem=function(a){a instanceof S&&(this.off(a,"blur",this.boundHandleBlur_),this.off(a,["tap","click"],this.boundHandleTapClick_))};e.removeChild=function(b){"string"===
typeof b&&(b=this.getChild(b));this.removeEventListenerForItem(b);a.prototype.removeChild.call(this,b)};e.addItem=function(a){(a=this.addChild(a))&&this.addEventListenerForItem(a)};e.createEl=function(){this.contentEl_=G(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var b=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});b.appendChild(this.contentEl_);Ma(b,"click",function(a){a.preventDefault();a.stopImmediatePropagation()});
return b};e.dispose=function(){this.boundHandleTapClick_=this.boundHandleBlur_=this.contentEl_=null;a.prototype.dispose.call(this)};e.handleBlur=function(a){var b=a.relatedTarget||f.activeElement;this.children().some(function(a){return a.el()===b})||(a=this.menuButton_)&&a.buttonPressed_&&b!==a.el().firstChild&&a.unpressButton()};e.handleTapClick=function(a){if(this.menuButton_){this.menuButton_.unpressButton();var b=this.children();Array.isArray(b)&&(b=b.filter(function(b){return b.el()===a.target})[0])&&
"CaptionSettingsMenuItem"!==b.name()&&this.menuButton_.focus()}};e.handleKeyDown=function(a){if(ua.isEventKey(a,"Left")||ua.isEventKey(a,"Down"))a.preventDefault(),a.stopPropagation(),this.stepForward();else if(ua.isEventKey(a,"Right")||ua.isEventKey(a,"Up"))a.preventDefault(),a.stopPropagation(),this.stepBack()};e.stepForward=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1);this.focus(a)};e.stepBack=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1);
this.focus(a)};e.focus=function(a){void 0===a&&(a=0);var b=this.children().slice();b.length&&b[0].className&&/vjs-menu-title/.test(b[0].className)&&b.shift();0<b.length&&(0>a?a=0:a>=b.length&&(a=b.length-1),this.focusedChild_=a,b[a].el_.focus())};return d}(S);S.registerComponent("Menu",Lf);var Mf=function(a){function c(b,c){void 0===c&&(c={});var d=a.call(this,b,c)||this;d.menuButton_=new Ib(b,c);d.menuButton_.controlText(d.controlText_);d.menuButton_.el_.setAttribute("aria-haspopup","true");b=Ib.prototype.buildCSSClass();
d.menuButton_.el_.className=d.buildCSSClass()+" "+b;d.menuButton_.removeClass("vjs-control");d.addChild(d.menuButton_);d.update();d.enabled_=!0;d.on(d.menuButton_,"tap",d.handleClick);d.on(d.menuButton_,"click",d.handleClick);d.on(d.menuButton_,"keydown",d.handleKeyDown);d.on(d.menuButton_,"mouseenter",function(){d.menu.show()});d.on("keydown",d.handleSubmenuKeyDown);return d}b(c,a);var d=c.prototype;d.update=function(){var a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));
this.menu=a;this.addChild(a);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()};d.createMenu=function(){var a=new Lf(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var b=G("li",{className:"vjs-menu-title",innerHTML:va(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;b=new S(this.player_,{el:b});a.addItem(b)}if(this.items=this.createItems())for(b=0;b<this.items.length;b++)a.addItem(this.items[b]);
return a};d.createItems=function(){};d.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};d.buildWrapperCSSClass=function(){var b="vjs-menu-button";b=!0===this.options_.inline?b+"-inline":b+"-popup";var c=Ib.prototype.buildCSSClass();return"vjs-menu-button "+b+" "+c+" "+a.prototype.buildCSSClass.call(this)};d.buildCSSClass=function(){var b="vjs-menu-button";b=!0===this.options_.inline?b+"-inline":b+"-popup";return"vjs-menu-button "+b+" "+a.prototype.buildCSSClass.call(this)};
d.controlText=function(a,b){void 0===b&&(b=this.menuButton_.el());return this.menuButton_.controlText(a,b)};d.handleClick=function(a){this.buttonPressed_?this.unpressButton():this.pressButton()};d.focus=function(){this.menuButton_.focus()};d.blur=function(){this.menuButton_.blur()};d.handleKeyDown=function(a){ua.isEventKey(a,"Esc")||ua.isEventKey(a,"Tab")?(this.buttonPressed_&&this.unpressButton(),ua.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())):!ua.isEventKey(a,"Up")&&!ua.isEventKey(a,
"Down")||this.buttonPressed_||(a.preventDefault(),this.pressButton())};d.handleSubmenuKeyPress=function(a){this.handleSubmenuKeyDown(a)};d.handleSubmenuKeyDown=function(a){if(ua.isEventKey(a,"Esc")||ua.isEventKey(a,"Tab"))this.buttonPressed_&&this.unpressButton(),ua.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())};d.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Qb&&
F()||this.menu.focus())};d.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))};d.disable=function(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()};d.enable=function(){this.enabled_=!0;this.removeClass("vjs-disabled");this.menuButton_.enable()};return c}(S);S.registerComponent("MenuButton",Mf);var D=function(a){function d(b,d){var e=d.tracks;
b=a.call(this,b,d)||this;1>=b.items.length&&b.hide();if(!e)return c(b);var f=Ja(c(b),b.update);e.addEventListener("removetrack",f);e.addEventListener("addtrack",f);b.player_.on("ready",f);b.player_.on("dispose",function(){e.removeEventListener("removetrack",f);e.removeEventListener("addtrack",f)});return b}b(d,a);return d}(Mf);S.registerComponent("TrackButton",D);var bi="Tab Esc Up Down Right Left".split(" "),Lc=function(a){function c(b,c){b=a.call(this,b,c)||this;b.selectable=c.selectable;b.isSelected_=
c.selected||!1;b.multiSelectable=c.multiSelectable;b.selected(b.isSelected_);b.selectable?b.multiSelectable?b.el_.setAttribute("role","menuitemcheckbox"):b.el_.setAttribute("role","menuitemradio"):b.el_.setAttribute("role","menuitem");return b}b(c,a);var d=c.prototype;d.createEl=function(b,c,d){this.nonIconControl=!0;return a.prototype.createEl.call(this,"li",r({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},c),d)};
d.handleKeyDown=function(b){bi.some(function(a){return ua.isEventKey(b,a)})||a.prototype.handleKeyDown.call(this,b)};d.handleClick=function(a){this.selected(!0)};d.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))};return c}(T);S.registerComponent("MenuItem",
Lc);var fc=function(a){function d(b,d){var e=d.track,g=b.textTracks();d.label=e.label||e.language||"Unknown";d.selected="showing"===e.mode;var n=a.call(this,b,d)||this;n.track=e;n.kinds=(d.kinds||[d.kind||n.track.kind]).filter(Boolean);var k=function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];n.handleTracksChange.apply(c(n),b)},w=function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];n.handleSelectedLanguageChange.apply(c(n),b)};b.on(["loadstart",
"texttrackchange"],k);g.addEventListener("change",k);g.addEventListener("selectedlanguagechange",w);n.on("dispose",function(){b.off(["loadstart","texttrackchange"],k);g.removeEventListener("change",k);g.removeEventListener("selectedlanguagechange",w)});if(void 0===g.onchange){var l;n.on(["tap","click"],function(){if("object"!==typeof h.Event)try{l=new h.Event("change")}catch(Oj){}l||(l=f.createEvent("Event"),l.initEvent("change",!0,!0));g.dispatchEvent(l)})}n.handleTracksChange();return n}b(d,a);
var e=d.prototype;e.handleClick=function(b){var c=this.track,d=this.player_.textTracks();a.prototype.handleClick.call(this,b);if(d)for(b=0;b<d.length;b++){var e=d[b];-1!==this.kinds.indexOf(e.kind)&&(e===c?"showing"!==e.mode&&(e.mode="showing"):"disabled"!==e.mode&&(e.mode="disabled"))}};e.handleTracksChange=function(a){a="showing"===this.track.mode;a!==this.isSelected_&&this.selected(a)};e.handleSelectedLanguageChange=function(a){"showing"===this.track.mode&&(a=this.player_.cache_.selectedLanguage,
a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))};e.dispose=function(){this.track=null;a.prototype.dispose.call(this)};return d}(Lc);S.registerComponent("TextTrackMenuItem",fc);var kb=function(a){function c(b,c){c.track={player:b,kind:c.kind,kinds:c.kinds,"default":!1,mode:"disabled"};c.kinds||(c.kinds=[c.kind]);c.track.label=c.label?c.label:c.kinds.join(" and ")+" off";
c.selectable=!0;c.multiSelectable=!1;return a.call(this,b,c)||this}b(c,a);var d=c.prototype;d.handleTracksChange=function(a){a=this.player().textTracks();for(var b=!0,c=0,d=a.length;c<d;c++){var e=a[c];if(-1<this.options_.kinds.indexOf(e.kind)&&"showing"===e.mode){b=!1;break}}b!==this.isSelected_&&this.selected(b)};d.handleSelectedLanguageChange=function(a){a=this.player().textTracks();for(var b=!0,c=0,d=a.length;c<d;c++){var e=a[c];if(-1<["captions","descriptions","subtitles"].indexOf(e.kind)&&"showing"===
e.mode){b=!1;break}}b&&(this.player_.cache_.selectedLanguage={enabled:!1})};return c}(fc);S.registerComponent("OffTextTrackMenuItem",kb);var wb=function(a){function c(b,c){void 0===c&&(c={});c.tracks=b.textTracks();return a.call(this,b,c)||this}b(c,a);c.prototype.createItems=function(a,b){void 0===a&&(a=[]);void 0===b&&(b=fc);var c;this.label_&&(c=this.label_+" off");a.push(new kb(this.player_,{kinds:this.kinds_,kind:this.kind_,label:c}));this.hideThreshold_+=1;c=this.player_.textTracks();Array.isArray(this.kinds_)||
(this.kinds_=[this.kind_]);for(var d=0;d<c.length;d++){var e=c[d];if(-1<this.kinds_.indexOf(e.kind)){var f=new b(this.player_,{track:e,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});f.addClass("vjs-"+e.kind+"-menu-item");a.push(f)}}return a};return c}(D);S.registerComponent("TextTrackButton",wb);var ee=function(a){function d(b,d){var e=d.track,f=d.cue,g=b.currentTime();d.selectable=!0;d.multiSelectable=!1;d.label=f.text;d.selected=f.startTime<=g&&g<f.endTime;b=a.call(this,b,
d)||this;b.track=e;b.cue=f;e.addEventListener("cuechange",Ja(c(b),b.update));return b}b(d,a);var e=d.prototype;e.handleClick=function(b){a.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};e.update=function(a){a=this.cue;var b=this.player_.currentTime();this.selected(a.startTime<=b&&b<a.endTime)};return d}(Lc);S.registerComponent("ChaptersTrackMenuItem",ee);var Nb=function(a){function c(b,c,d){return a.call(this,b,c,d)||this}b(c,a);var d=
c.prototype;d.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)};d.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)};d.update=function(b){this.track_&&(!b||"addtrack"!==b.type&&"removetrack"!==b.type)||this.setTrack(this.findChaptersTrack());a.prototype.update.call(this)};d.setTrack=function(a){if(this.track_!==a){this.updateHandler_||(this.updateHandler_=this.update.bind(this));if(this.track_){var b=
this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);b&&b.removeEventListener("load",this.updateHandler_);this.track_=null}if(this.track_=a)this.track_.mode="hidden",(a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&a.addEventListener("load",this.updateHandler_)}};d.findChaptersTrack=function(){for(var a=this.player_.textTracks()||[],b=a.length-1;0<=b;b--){var c=a[b];if(c.kind===this.kind_)return c}};d.getMenuCaption=function(){return this.track_&&this.track_.label?
this.track_.label:this.localize(va(this.kind_))};d.createMenu=function(){this.options_.title=this.getMenuCaption();return a.prototype.createMenu.call(this)};d.createItems=function(){var a=[];if(!this.track_)return a;var b=this.track_.cues;if(!b)return a;for(var c=0,d=b.length;c<d;c++){var e=new ee(this.player_,{track:this.track_,cue:b[c]});a.push(e)}return a};return c}(wb);Nb.prototype.kind_="chapters";Nb.prototype.controlText_="Chapters";S.registerComponent("ChaptersButton",Nb);var xh=function(a){function d(b,
d,e){d=a.call(this,b,d,e)||this;var f=b.textTracks(),g=Ja(c(d),d.handleTracksChange);f.addEventListener("change",g);d.on("dispose",function(){f.removeEventListener("change",g)});return d}b(d,a);var e=d.prototype;e.handleTracksChange=function(a){a=this.player().textTracks();for(var b=!1,c=0,d=a.length;c<d;c++){var e=a[c];if(e.kind!==this.kind_&&"showing"===e.mode){b=!0;break}}b?this.disable():this.enable()};e.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)};
e.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)};return d}(wb);xh.prototype.kind_="descriptions";xh.prototype.controlText_="Descriptions";S.registerComponent("DescriptionsButton",xh);var Nf=function(a){function c(b,c,d){return a.call(this,b,c,d)||this}b(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)};d.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildWrapperCSSClass.call(this)};
return c}(wb);Nf.prototype.kind_="subtitles";Nf.prototype.controlText_="Subtitles";S.registerComponent("SubtitlesButton",Nf);var pa=function(a){function c(b,c){c.track={player:b,kind:c.kind,label:c.kind+" settings",selectable:!1,"default":!1,mode:"disabled"};c.selectable=!1;c.name="CaptionSettingsMenuItem";b=a.call(this,b,c)||this;b.addClass("vjs-texttrack-settings");b.controlText(", opens "+c.kind+" settings dialog");return b}b(c,a);c.prototype.handleClick=function(a){this.player().getChild("textTrackSettings").open()};
return c}(fc);S.registerComponent("CaptionSettingsMenuItem",pa);var Ac=function(a){function c(b,c,d){return a.call(this,b,c,d)||this}b(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)};d.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)};d.createItems=function(){var b=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||
(b.push(new pa(this.player_,{kind:this.kind_})),this.hideThreshold_+=1);return a.prototype.createItems.call(this,b)};return c}(wb);Ac.prototype.kind_="captions";Ac.prototype.controlText_="Captions";S.registerComponent("CaptionsButton",Ac);var aa=function(a){function c(){return a.apply(this,arguments)||this}b(c,a);c.prototype.createEl=function(b,c,d){var e='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"captions"===this.options_.track.kind&&(e+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+
this.localize("Captions")+"</span>\n      ");return a.prototype.createEl.call(this,b,r({innerHTML:e+"</span>"},c),d)};return c}(fc);S.registerComponent("SubsCapsMenuItem",aa);var re=function(a){function c(b,c){void 0===c&&(c={});b=a.call(this,b,c)||this;b.label_="subtitles";-1<["en","en-us","en-ca","fr-ca"].indexOf(b.player_.language_)&&(b.label_="captions");b.menuButton_.controlText(va(b.label_));return b}b(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)};
d.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)};d.createItems=function(){var b=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new pa(this.player_,{kind:this.label_})),this.hideThreshold_+=1);return b=a.prototype.createItems.call(this,b,aa)};return c}(wb);re.prototype.kinds_=["captions","subtitles"];re.prototype.controlText_="Subtitles";S.registerComponent("SubsCapsButton",
re);var yh=function(a){function d(b,d){var e=d.track,f=b.audioTracks();d.label=e.label||e.language||"Unknown";d.selected=e.enabled;var g=a.call(this,b,d)||this;g.track=e;g.addClass("vjs-"+e.kind+"-menu-item");var n=function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];g.handleTracksChange.apply(c(g),b)};f.addEventListener("change",n);g.on("dispose",function(){f.removeEventListener("change",n)});return g}b(d,a);var e=d.prototype;e.createEl=function(b,c,d){var e='<span class="vjs-menu-item-text">'+
this.localize(this.options_.label);"main-desc"===this.options_.track.kind&&(e+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      ");return a.prototype.createEl.call(this,b,r({innerHTML:e+"</span>"},c),d)};e.handleClick=function(b){var c=this.player_.audioTracks();a.prototype.handleClick.call(this,b);for(b=0;b<c.length;b++){var d=c[b];d.enabled=d===this.track}};e.handleTracksChange=function(a){this.selected(this.track.enabled)};
return d}(Lc);S.registerComponent("AudioTrackMenuItem",yh);var xf=function(a){function c(b,c){void 0===c&&(c={});c.tracks=b.audioTracks();return a.call(this,b,c)||this}b(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-audio-button "+a.prototype.buildCSSClass.call(this)};d.buildWrapperCSSClass=function(){return"vjs-audio-button "+a.prototype.buildWrapperCSSClass.call(this)};d.createItems=function(a){void 0===a&&(a=[]);this.hideThreshold_=1;for(var b=this.player_.audioTracks(),c=0;c<b.length;c++)a.push(new yh(this.player_,
{track:b[c],selectable:!0,multiSelectable:!1}));return a};return c}(D);xf.prototype.controlText_="Audio Track";S.registerComponent("AudioTrackButton",xf);var lc=function(a){function c(b,c){var d=c.rate,e=parseFloat(d,10);c.label=d;c.selected=1===e;c.selectable=!0;c.multiSelectable=!1;c=a.call(this,b,c)||this;c.label=d;c.rate=e;c.on(b,"ratechange",c.update);return c}b(c,a);var d=c.prototype;d.handleClick=function(b){a.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};d.update=
function(a){this.selected(this.player().playbackRate()===this.rate)};return c}(Lc);lc.prototype.contentElType="button";S.registerComponent("PlaybackRateMenuItem",lc);var yf=function(a){function c(b,c){c=a.call(this,b,c)||this;c.updateVisibility();c.updateLabel();c.on(b,"loadstart",c.updateVisibility);c.on(b,"ratechange",c.updateLabel);return c}b(c,a);var d=c.prototype;d.createEl=function(){var b=a.prototype.createEl.call(this);this.labelEl_=G("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});
b.appendChild(this.labelEl_);return b};d.dispose=function(){this.labelEl_=null;a.prototype.dispose.call(this)};d.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)};d.buildWrapperCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)};d.createMenu=function(){var a=new Lf(this.player()),b=this.playbackRates();if(b)for(var c=b.length-1;0<=c;c--)a.addChild(new lc(this.player(),{rate:b[c]+"x"}));return a};d.updateARIAAttributes=
function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};d.handleClick=function(a){a=this.player().playbackRate();for(var b=this.playbackRates(),c=b[0],d=0;d<b.length;d++)if(b[d]>a){c=b[d];break}this.player().playbackRate(c)};d.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};d.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&
0<this.playbackRates().length};d.updateVisibility=function(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")};d.updateLabel=function(a){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")};return c}(Mf);yf.prototype.controlText_="Playback Rate";S.registerComponent("PlaybackRateMenuButton",yf);var Of=function(a){function c(){return a.apply(this,arguments)||this}b(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-spacer "+
a.prototype.buildCSSClass.call(this)};d.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return c}(S);S.registerComponent("Spacer",Of);var Kc=function(a){function c(){return a.apply(this,arguments)||this}b(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)};d.createEl=function(){var b=a.prototype.createEl.call(this,{className:this.buildCSSClass()});b.innerHTML="\u00a0";return b};
return c}(Of);S.registerComponent("CustomControlSpacer",Kc);var Da=function(a){function c(){return a.apply(this,arguments)||this}b(c,a);c.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return c}(S);Da.prototype.options_={children:"playToggle volumePanel currentTimeDisplay timeDivider durationDisplay progressControl liveDisplay seekToLive remainingTimeDisplay customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton subsCapsButton audioTrackButton pictureInPictureToggle fullscreenToggle".split(" ")};
S.registerComponent("ControlBar",Da);var fe=function(a){function c(b,c){c=a.call(this,b,c)||this;c.on(b,"error",c.open);return c}b(c,a);var d=c.prototype;d.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)};d.content=function(){var a=this.player().error();return a?this.localize(a.message):""};return c}(ld);fe.prototype.options_=ta(ld.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});S.registerComponent("ErrorDisplay",fe);var vd=["#000",
"Black"],Zg=["#00F","Blue"],Ng=["#0FF","Cyan"],dd=["#0F0","Green"],Og=["#F0F","Magenta"],se=["#F00","Red"],ha=["#FFF","White"],ec=["#FF0","Yellow"],zh=["1","Opaque"],bb=["0.5","Semi-Transparent"],ja=["0","Transparent"],Oa={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[vd,ha,se,dd,Zg,ec,Og,Ng]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[zh,bb,ja]},color:{selector:".vjs-fg-color > select",
id:"captions-foreground-color-%s",label:"Color",options:[ha,vd,se,dd,Zg,ec,Og,Ng]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif",
"Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(a){return"1.00"===a?null:Number(a)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",
label:"Transparency",options:[zh,bb]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[ja,bb,zh]}};Oa.windowColor.options=Oa.backgroundColor.options;var $g=function(a){function d(b,d){d.temporary=!1;var e=a.call(this,b,d)||this;e.updateDisplay=Ja(c(e),e.updateDisplay);e.fill();e.hasBeenOpened_=e.hasBeenFilled_=!0;e.endDialog=G("p",{className:"vjs-control-text",
textContent:e.localize("End of dialog window.")});e.el().appendChild(e.endDialog);e.setDefaults();void 0===d.persistTextTrackSettings&&(e.options_.persistTextTrackSettings=e.options_.playerOptions.persistTextTrackSettings);e.on(e.$(".vjs-done-button"),"click",function(){e.saveSettings();e.close()});e.on(e.$(".vjs-default-button"),"click",function(){e.setDefaults();e.updateDisplay()});u(Oa,function(a){e.on(e.$(a.selector),"change",e.updateDisplay)});e.options_.persistTextTrackSettings&&e.restoreSettings();
return e}b(d,a);var e=d.prototype;e.dispose=function(){this.endDialog=null;a.prototype.dispose.call(this)};e.createElSelect_=function(a,b,c){var d=this;void 0===b&&(b="");void 0===c&&(c="label");a=Oa[a];var e=a.id.replace("%s",this.id_),f=[b,e].join(" ").trim();return["<"+c+' id="'+e+'" class="'+("label"===c?"vjs-label":"")+'">',this.localize(a.label),"</"+c+">",'<select aria-labelledby="'+f+'">'].concat(a.options.map(function(a){var b=e+"-"+a[1].replace(/\W+/g,"");return['<option id="'+b+'" value="'+
a[0]+'" ','aria-labelledby="'+f+" "+b+'">',d.localize(a[1]),"</option>"].join("")})).concat("</select>").join("")};e.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",a),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",a),"</span></fieldset>"].join("")};e.createElBgColor_=function(){var a="captions-background-"+
this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",a),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",a),"</span></fieldset>"].join("")};e.createElWinColor_=function(){var a="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",
a),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",a),"</span></fieldset>"].join("")};e.createElColors_=function(){return G("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};e.createElFont_=function(){return G("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),'</fieldset><fieldset class="vjs-edge-style vjs-track-setting">',
this.createElSelect_("edgeStyle","","legend"),'</fieldset><fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};e.createElControls_=function(){var a=this.localize("restore all settings to the default values");return G("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+a+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+a+"</span>","</button>",'<button type="button" class="vjs-done-button">'+
this.localize("Done")+"</button>"].join("")})};e.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};e.label=function(){return this.localize("Caption Settings Dialog")};e.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};e.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};e.getValues=function(){var a=this;return q(Oa,function(b,c,d){var e=a.$(c.selector);
c=jg(e.options[e.options.selectedIndex].value,c.parser);void 0!==c&&(b[d]=c);return b},{})};e.setValues=function(a){var b=this;u(Oa,function(c,d){var e=b.$(c.selector);d=a[d];c=c.parser;if(d)for(var f=0;f<e.options.length;f++)if(jg(e.options[f].value,c)===d){e.selectedIndex=f;break}})};e.setDefaults=function(){var a=this;u(Oa,function(b){var c=b.hasOwnProperty("default")?b["default"]:0;a.$(b.selector).selectedIndex=c})};e.restoreSettings=function(){try{var a=JSON.parse(h.localStorage.getItem("vjs-text-track-settings"))}catch(Ab){xa.warn(Ab)}a&&
this.setValues(a)};e.saveSettings=function(){if(this.options_.persistTextTrackSettings){var a=this.getValues();try{Object.keys(a).length?h.localStorage.setItem("vjs-text-track-settings",JSON.stringify(a)):h.localStorage.removeItem("vjs-text-track-settings")}catch(Ab){xa.warn(Ab)}}};e.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()};e.conditionalBlur_=function(){this.previouslyActiveEl_=null;var a=this.player_.controlBar,b=a&&a.subsCapsButton;a=a&&a.captionsButton;
b?b.focus():a&&a.focus()};return d}(ld);S.registerComponent("TextTrackSettings",$g);var Ah=function(a){function d(b,d){var e=d.ResizeObserver||h.ResizeObserver;null===d.ResizeObserver&&(e=!1);var f=ta({createEl:!e,reportTouchActivity:!1},d);var g=a.call(this,b,f)||this;g.ResizeObserver=d.ResizeObserver||h.ResizeObserver;g.loadListener_=null;g.resizeObserver_=null;g.debouncedHandler_=rf(function(){g.resizeHandler()},100,!1,c(g));e?(g.resizeObserver_=new g.ResizeObserver(g.debouncedHandler_),g.resizeObserver_.observe(b.el())):
(g.loadListener_=function(){if(g.el_&&g.el_.contentWindow){var a=g.debouncedHandler_,b=g.unloadListener_=function(){Ea(this,"resize",a);Ea(this,"unload",b);b=null};Ma(g.el_.contentWindow,"unload",b);Ma(g.el_.contentWindow,"resize",a)}},g.one("load",g.loadListener_));return g}b(d,a);var e=d.prototype;e.createEl=function(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})};e.resizeHandler=function(){this.player_&&this.player_.trigger&&
this.player_.trigger("playerresize")};e.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel();this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.loadListener_&&this.off("load",this.loadListener_);this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow);this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=null;a.prototype.dispose.call(this)};
return d}(S);S.registerComponent("ResizeManager",Ah);var Qf=function(a){function c(b,c){c=ta({createEl:!1},c);b=a.call(this,b,c)||this;b.reset_();b.on(b.player_,"durationchange",b.handleDurationchange);if(bd&&"hidden"in f&&"visibilityState"in f)b.on(f,"visibilitychange",b.handleVisibilityChange);return b}b(c,a);var d=c.prototype;d.handleVisibilityChange=function(){Infinity===this.player_.duration()&&(f.hidden?this.stopTracking():this.startTracking())};d.isBehind_=function(){if(!this.timeupdateSeen_)return!1;
var a=this.liveCurrentTime(),b=this.player_.currentTime(),c=this.seekableIncrement_;return Infinity!==a&&a-(2*c+.07)>=b};d.trackLive_=function(){this.pastSeekEnd_=this.pastSeekEnd_;var a=this.player_.seekable();a&&a.length&&(a=this.seekableEnd(),a!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrement_=Math.abs(a-this.lastSeekEnd_)),this.pastSeekEnd_=0,this.lastSeekEnd_=a,this.trigger("seekableendchange")),this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&
(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange")))};d.handleDurationchange=function(){Infinity===this.player_.duration()?this.startTracking():this.stopTracking()};d.startTracking=function(){var a=this;this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,"pause",this.trackLive_),this.timeupdateSeen_||
(this.one(this.player_,"play",this.handlePlay),this.handleTimeupdate=function(){a.timeupdateSeen_=!0;a.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))};d.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)};d.reset_=function(){this.pastSeekEnd_=0;this.behindLiveEdge_=this.lastSeekEnd_=null;this.timeupdateSeen_=!1;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.seekableIncrement_=12;this.off(this.player_,"play",
this.trackLive_);this.off(this.player_,"pause",this.trackLive_);this.off(this.player_,"play",this.handlePlay);this.off(this.player_,"timeupdate",this.seekToLiveEdge);this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)};d.stopTracking=function(){this.isTracking()&&this.reset_()};d.seekableEnd=function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.end(c));return b.length?b.sort()[b.length-1]:Infinity};d.seekableStart=
function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.start(c));return b.length?b.sort()[0]:0};d.liveWindow=function(){var a=this.liveCurrentTime();return Infinity===a?Infinity:a-this.seekableStart()};d.isLive=function(){return this.isTracking()};d.atLiveEdge=function(){return!this.behindLiveEdge()};d.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()};d.pastSeekEnd=function(){return this.pastSeekEnd_};d.behindLiveEdge=function(){return this.behindLiveEdge_};
d.isTracking=function(){return"number"===typeof this.trackingInterval_};d.seekToLiveEdge=function(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())};d.dispose=function(){this.stopTracking();a.prototype.dispose.call(this)};return c}(S);S.registerComponent("LiveTracker",Qf);var Bd=function(a){var b=a.el();if(b.hasAttribute("src"))return a.triggerSourceset(b.src),!0;b=a.$$("source");var c=[],d="";if(!b.length)return!1;for(var e=0;e<b.length;e++){var f=
b[e].src;f&&-1===c.indexOf(f)&&c.push(f)}if(!c.length)return!1;1===c.length&&(d=c[0]);a.triggerSourceset(d);return!0},ff=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(a){var b=f.createElement(this.nodeName.toLowerCase());b.innerHTML=a;for(a=f.createDocumentFragment();b.childNodes.length;)a.appendChild(b.childNodes[0]);this.innerText="";h.Element.prototype.appendChild.call(this,a);return this.innerHTML}}),ah=function(a,b){for(var c={},d=0;d<
a.length&&!((c=Object.getOwnPropertyDescriptor(a[d],b))&&c.set&&c.get);d++);c.enumerable=!0;c.configurable=!0;return c},n=function(a){var b=a.el();if(!b.resetSourceWatch_){var c={},d=ah([a.el(),h.HTMLMediaElement.prototype,h.Element.prototype,ff],"innerHTML"),e=function(c){return function(){for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];d=c.apply(b,e);Bd(a);return d}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){b[a]&&(c[a]=b[a],b[a]=e(c[a]))});Object.defineProperty(b,
"innerHTML",ta(d,{set:e(d.set)}));b.resetSourceWatch_=function(){b.resetSourceWatch_=null;Object.keys(c).forEach(function(a){b[a]=c[a]});Object.defineProperty(b,"innerHTML",d)};a.one("sourceset",b.resetSourceWatch_)}},w=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Wf(h.Element.prototype.getAttribute.call(this,"src")):""},set:function(a){h.Element.prototype.setAttribute.call(this,"src",a);return a}}),I=function(a){if(a.featuresSourceset){var b=a.el();if(!b.resetSourceset_){var c=
ah([a.el(),h.HTMLMediaElement.prototype,w],"src"),d=b.setAttribute,e=b.load;Object.defineProperty(b,"src",ta(c,{set:function(d){d=c.set.call(b,d);a.triggerSourceset(b.src);return d}}));b.setAttribute=function(c,e){e=d.call(b,c,e);/src/i.test(c)&&a.triggerSourceset(b.src);return e};b.load=function(){var c=e.call(b);Bd(a)||(a.triggerSourceset(""),n(a));return c};b.currentSrc?a.triggerSourceset(b.currentSrc):Bd(a)||n(a);b.resetSourceset_=function(){b.resetSourceset_=null;b.load=e;b.setAttribute=d;Object.defineProperty(b,
"src",c);b.resetSourceWatch_&&b.resetSourceWatch_()}}}},P=function(a){function c(b,c){c=a.call(this,b,c)||this;var d=b.source,e=!1;d&&(c.el_.currentSrc!==d.src||b.tag&&3===b.tag.initNetworkState_)?c.setSource(d):c.handleLateInit_(c.el_);b.enableSourceset&&c.setupSourcesetHandling_();if(c.el_.hasChildNodes()){var f=c.el_.childNodes,g=f.length;for(d=[];g--;){var n=f[g];"track"===n.nodeName.toLowerCase()&&(c.featuresNativeTextTracks?(c.remoteTextTrackEls().addTrackElement_(n),c.remoteTextTracks().addTrack(n.track),
c.textTracks().addTrack(n.track),e||c.el_.hasAttribute("crossorigin")||!Gg(n.src)||(e=!0)):d.push(n))}for(f=0;f<d.length;f++)c.el_.removeChild(d[f])}c.proxyNativeTracks_();c.featuresNativeTextTracks&&e&&xa.warn(pb(kg()));c.restoreMetadataTracksInIOSNativePlayer_();(Jc||We||$c)&&!0===b.nativeControlsForTouch&&c.setControls(!0);c.proxyWebkitFullscreen_();c.triggerReady();return c}b(c,a);var d=c.prototype;d.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_();c.disposeMediaElement(this.el_);
this.options_=null;a.prototype.dispose.call(this)};d.setupSourcesetHandling_=function(){I(this)};d.restoreMetadataTracksInIOSNativePlayer_=function(){var a=this.textTracks(),b,c=function(){b=[];for(var c=0;c<a.length;c++){var d=a[c];"metadata"===d.kind&&b.push({track:d,storedMode:d.mode})}};c();a.addEventListener("change",c);this.on("dispose",function(){return a.removeEventListener("change",c)});var d=function Qc(){for(var c=0;c<b.length;c++){var d=b[c];"disabled"===d.track.mode&&d.track.mode!==d.storedMode&&
(d.track.mode=d.storedMode)}a.removeEventListener("change",Qc)};this.on("webkitbeginfullscreen",function(){a.removeEventListener("change",c);a.removeEventListener("change",d);a.addEventListener("change",d)});this.on("webkitendfullscreen",function(){a.removeEventListener("change",c);a.addEventListener("change",c);a.removeEventListener("change",d)})};d.overrideNative_=function(a,b){var c=this;if(b===this["featuresNative"+a+"Tracks"]){var d=a.toLowerCase();this[d+"TracksListeners_"]&&Object.keys(this[d+
"TracksListeners_"]).forEach(function(a){c.el()[d+"Tracks"].removeEventListener(a,c[d+"TracksListeners_"][a])});this["featuresNative"+a+"Tracks"]=!b;this[d+"TracksListeners_"]=null;this.proxyNativeTracksForType_(d)}};d.overrideNativeAudioTracks=function(a){this.overrideNative_("Audio",a)};d.overrideNativeVideoTracks=function(a){this.overrideNative_("Video",a)};d.proxyNativeTracksForType_=function(a){var b=this;a=nc[a];var c=this.el()[a.getterName],d=this[a.getterName]();if(this["featuresNative"+a.capitalName+
"Tracks"]&&c&&c.addEventListener){var e={change:function(a){d.trigger({type:"change",target:d,currentTarget:d,srcElement:d})},addtrack:function(a){d.addTrack(a.track)},removetrack:function(a){d.removeTrack(a.track)}},f=function(){for(var a=[],b=0;b<d.length;b++){for(var e=!1,f=0;f<c.length;f++)if(c[f]===d[b]){e=!0;break}e||a.push(d[b])}for(;a.length;)d.removeTrack(a.shift())};this[a.getterName+"Listeners_"]=e;Object.keys(e).forEach(function(a){var d=e[a];c.addEventListener(a,d);b.on("dispose",function(b){return c.removeEventListener(a,
d)})});this.on("loadstart",f);this.on("dispose",function(a){return b.off("loadstart",f)})}};d.proxyNativeTracks_=function(){var a=this;nc.names.forEach(function(b){a.proxyNativeTracksForType_(b)})};d.createEl=function(){var a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var b=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(b,a);c.disposeMediaElement(a);a=b}else a=f.createElement("video"),b=this.options_.tag&&Q(this.options_.tag),b=ta({},b),Jc&&
!0===this.options_.nativeControlsForTouch||delete b.controls,L(a,r(b,{id:this.options_.techId,"class":"vjs-tech"}));a.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&a.setAttribute("preload",this.options_.preload);b=["loop","muted","playsinline","autoplay"];for(var d=0;d<b.length;d++){var e=b[d],g=this.options_[e];"undefined"!==typeof g&&(g?a.setAttribute(e,e):a.removeAttribute(e),a[e]=g)}return a};d.handleLateInit_=function(a){if(0!==a.networkState&&3!==a.networkState)if(0===
a.readyState){var b=!1,c=function(){b=!0};this.on("loadstart",c);var d=function(){b||this.trigger("loadstart")};this.on("loadedmetadata",d);this.ready(function(){this.off("loadstart",c);this.off("loadedmetadata",d);b||this.trigger("loadstart")})}else{var e=["loadstart"];e.push("loadedmetadata");2<=a.readyState&&e.push("loadeddata");3<=a.readyState&&e.push("canplay");4<=a.readyState&&e.push("canplaythrough");this.ready(function(){e.forEach(function(a){this.trigger(a)},this)})}};d.setCurrentTime=function(a){try{this.el_.currentTime=
a}catch(Ab){xa(Ab,"Video is not ready. (Video.js)")}};d.duration=function(){var a=this;return Infinity===this.el_.duration&&Db&&Mb&&0===this.el_.currentTime?(this.on("timeupdate",function Pc(){0<a.el_.currentTime&&(Infinity===a.el_.duration&&a.trigger("durationchange"),a.off("timeupdate",Pc))}),NaN):this.el_.duration||NaN};d.width=function(){return this.el_.offsetWidth};d.height=function(){return this.el_.offsetHeight};d.proxyWebkitFullscreen_=function(){var a=this;if("webkitDisplayingFullscreen"in
this.el_){var b=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},c=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",b),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",c);this.on("dispose",function(){a.off("webkitbeginfullscreen",c);a.off("webkitendfullscreen",b)})}};d.supportsFullScreen=function(){if("function"===typeof this.el_.webkitEnterFullScreen){var a=h.navigator&&
h.navigator.userAgent||"";if(/Android/.test(a)||!/Chrome|Mac OS X 10.5/.test(a))return!0}return!1};d.enterFullScreen=function(){var a=this.el_;a.paused&&a.networkState<=a.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){a.pause();a.webkitEnterFullScreen()},0)):a.webkitEnterFullScreen()};d.exitFullScreen=function(){this.el_.webkitExitFullScreen()};d.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()};d.src=function(a){if(void 0===a)return this.el_.src;this.setSrc(a)};
d.reset=function(){c.resetMediaElement(this.el_)};d.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc};d.setControls=function(a){this.el_.controls=!!a};d.addTextTrack=function(b,c,d){return this.featuresNativeTextTracks?this.el_.addTextTrack(b,c,d):a.prototype.addTextTrack.call(this,b,c,d)};d.createRemoteTextTrack=function(b){if(!this.featuresNativeTextTracks)return a.prototype.createRemoteTextTrack.call(this,b);var c=f.createElement("track");b.kind&&(c.kind=
b.kind);b.label&&(c.label=b.label);if(b.language||b.srclang)c.srclang=b.language||b.srclang;b["default"]&&(c["default"]=b["default"]);b.id&&(c.id=b.id);b.src&&(c.src=b.src);return c};d.addRemoteTextTrack=function(b,c){b=a.prototype.addRemoteTextTrack.call(this,b,c);this.featuresNativeTextTracks&&this.el().appendChild(b);return b};d.removeRemoteTextTrack=function(b){a.prototype.removeRemoteTextTrack.call(this,b);if(this.featuresNativeTextTracks)for(var c=this.$$("track"),d=c.length;d--;)b!==c[d]&&
b!==c[d].track||this.el().removeChild(c[d])};d.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var a={};"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount);h.performance&&"function"===typeof h.performance.now?a.creationTime=h.performance.now():
h.performance&&h.performance.timing&&"number"===typeof h.performance.timing.navigationStart&&(a.creationTime=h.Date.now()-h.performance.timing.navigationStart);return a};return c}(Ua);if(B()){P.TEST_VID=f.createElement("video");var Jb=f.createElement("track");Jb.kind="captions";Jb.srclang="en";Jb.label="English";P.TEST_VID.appendChild(Jb)}P.isSupported=function(){try{P.TEST_VID.volume=.5}catch(Nj){return!1}return!(!P.TEST_VID||!P.TEST_VID.canPlayType)};P.canPlayType=function(a){return P.TEST_VID.canPlayType(a)};
P.canPlaySource=function(a,b){return P.canPlayType(a.type)};P.canControlVolume=function(){try{var a=P.TEST_VID.volume;P.TEST_VID.volume=a/2+.1;return a!==P.TEST_VID.volume}catch(Bc){return!1}};P.canMuteVolume=function(){try{var a=P.TEST_VID.muted;P.TEST_VID.muted=!a;P.TEST_VID.muted?P.TEST_VID.setAttribute("muted","muted"):P.TEST_VID.removeAttribute("muted");return a!==P.TEST_VID.muted}catch(Bc){return!1}};P.canControlPlaybackRate=function(){if(Db&&Mb&&58>pg)return!1;try{var a=P.TEST_VID.playbackRate;
P.TEST_VID.playbackRate=a/2+.1;return a!==P.TEST_VID.playbackRate}catch(Bc){return!1}};P.canOverrideAttributes=function(){try{var a=function(){};Object.defineProperty(f.createElement("video"),"src",{get:a,set:a});Object.defineProperty(f.createElement("audio"),"src",{get:a,set:a});Object.defineProperty(f.createElement("video"),"innerHTML",{get:a,set:a});Object.defineProperty(f.createElement("audio"),"innerHTML",{get:a,set:a})}catch(Bc){return!1}return!0};P.supportsNativeTextTracks=function(){return wc||
Qb&&Mb};P.supportsNativeVideoTracks=function(){return!(!P.TEST_VID||!P.TEST_VID.videoTracks)};P.supportsNativeAudioTracks=function(){return!(!P.TEST_VID||!P.TEST_VID.audioTracks)};P.Events="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");P.prototype.featuresVolumeControl=P.canControlVolume();P.prototype.featuresMuteControl=P.canMuteVolume();
P.prototype.featuresPlaybackRate=P.canControlPlaybackRate();P.prototype.featuresSourceset=P.canOverrideAttributes();P.prototype.movingMediaElementInDOM=!Qb;P.prototype.featuresFullscreenResize=!0;P.prototype.featuresProgressEvents=!0;P.prototype.featuresTimeupdateEvents=!0;P.prototype.featuresNativeTextTracks=P.supportsNativeTextTracks();P.prototype.featuresNativeVideoTracks=P.supportsNativeVideoTracks();P.prototype.featuresNativeAudioTracks=P.supportsNativeAudioTracks();var nb=P.TEST_VID&&P.TEST_VID.constructor.prototype.canPlayType,
zf=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;P.patchCanPlayType=function(){4<=ic&&!ad&&!Mb&&(P.TEST_VID.constructor.prototype.canPlayType=function(a){return a&&zf.test(a)?"maybe":nb.call(this,a)})};P.unpatchCanPlayType=function(){var a=P.TEST_VID.constructor.prototype.canPlayType;P.TEST_VID.constructor.prototype.canPlayType=nb;return a};P.patchCanPlayType();P.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src");
if("function"===typeof a.load)try{a.load()}catch(Bc){}}};P.resetMediaElement=function(a){if(a){for(var b=a.querySelectorAll("source"),c=b.length;c--;)a.removeChild(b[c]);a.removeAttribute("src");if("function"===typeof a.load)try{a.load()}catch(sk){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach(function(a){P.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){P.prototype["set"+
va(a)]=function(b){(this.el_[a]=b)?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}});"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate played networkState readyState videoWidth videoHeight".split(" ").forEach(function(a){P.prototype[a]=function(){return this.el_[a]}});"volume src poster preload playbackRate defaultPlaybackRate".split(" ").forEach(function(a){P.prototype["set"+va(a)]=function(b){this.el_[a]=b}});["pause","load",
"play"].forEach(function(a){P.prototype[a]=function(){return this.el_[a]()}});Ua.withSourceHandlers(P);P.nativeSourceHandler={};P.nativeSourceHandler.canPlayType=function(a){try{return P.TEST_VID.canPlayType(a)}catch(Bc){return""}};P.nativeSourceHandler.canHandleSource=function(a,b){return a.type?P.nativeSourceHandler.canPlayType(a.type):a.src?(a=Tc(a.src),P.nativeSourceHandler.canPlayType("video/"+a)):""};P.nativeSourceHandler.handleSource=function(a,b,c){b.setSrc(a.src)};P.nativeSourceHandler.dispose=
function(){};P.registerSourceHandler(P.nativeSourceHandler);Ua.registerTech("Html5",P);var Af="progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange".split(" "),ed={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Mc="tiny xsmall small medium large xlarge huge".split(" "),Ud={};Mc.forEach(function(a){var b="x"===a.charAt(0)?"x-"+a.substring(1):a;Ud[a]="vjs-layout-"+b});var Vd={tiny:210,xsmall:320,small:425,
medium:768,large:1440,xlarge:2560,huge:Infinity},xb=function(a){function d(b,e,f){b.id=b.id||e.id||"vjs_video_"+ab++;e=r(d.getTagSettings(b),e);e.initChildren=!1;e.createEl=!1;e.evented=!1;e.reportTouchActivity=!1;if(!e.language)if("function"===typeof b.closest){var g=b.closest("[lang]");g&&g.getAttribute&&(e.language=g.getAttribute("lang"))}else for(g=b;g&&1===g.nodeType;){if(Q(g).hasOwnProperty("lang")){e.language=g.getAttribute("lang");break}g=g.parentNode}var n=a.call(this,null,e,f)||this;n.boundDocumentFullscreenChange_=
Ja(c(n),n.documentFullscreenChange_);n.boundFullWindowOnEscKey_=Ja(c(n),n.fullWindowOnEscKey);n.log=Ic(n.id_);n.fsApi_=cd;n.isPosterFromTech_=!1;n.queuedCallbacks_=[];n.isReady_=!1;n.hasStarted_=!1;n.userActive_=!1;if(!n.options_||!n.options_.techOrder||!n.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");n.tag=b;n.tagAttributes=b&&Q(b);n.language(n.options_.language);if(e.languages){var h=
{};Object.getOwnPropertyNames(e.languages).forEach(function(a){h[a.toLowerCase()]=e.languages[a]});n.languages_=h}else n.languages_=d.prototype.options_.languages;n.resetCache_();n.poster_=e.poster||"";n.controls_=!!e.controls;b.controls=!1;b.removeAttribute("controls");n.changingSrc_=!1;n.playCallbacks_=[];n.playTerminatedQueue_=[];b.hasAttribute("autoplay")?n.autoplay(!0):n.autoplay(n.options_.autoplay);e.plugins&&Object.keys(e.plugins).forEach(function(a){if("function"!==typeof n[a])throw Error('plugin "'+
a+'" does not exist');});n.scrubbing_=!1;n.el_=n.createEl();ya(c(n),{eventBusKey:"el_"});if(n.fluid_)n.on("playerreset",n.updateStyleEl_);f=ta(n.options_);e.plugins&&Object.keys(e.plugins).forEach(function(a){n[a](e.plugins[a])});n.options_.playerOptions=f;n.middleware_=[];n.initChildren();n.isAudio("audio"===b.nodeName.toLowerCase());n.controls()?n.addClass("vjs-controls-enabled"):n.addClass("vjs-controls-disabled");n.el_.setAttribute("role","region");n.isAudio()?n.el_.setAttribute("aria-label",
n.localize("Audio Player")):n.el_.setAttribute("aria-label",n.localize("Video Player"));n.isAudio()&&n.addClass("vjs-audio");n.flexNotSupported_()&&n.addClass("vjs-no-flex");Jc&&n.addClass("vjs-touch-enabled");Qb||n.addClass("vjs-workinghover");d.players[n.id_]=c(n);n.addClass("vjs-v7");n.userActive(!0);n.reportUserActivity();n.one("play",n.listenForUserActivity_);n.on("stageclick",n.handleStageClick_);n.on("keydown",n.handleKeyDown);n.breakpoints(n.options_.breakpoints);n.responsive(n.options_.responsive);
return n}b(d,a);var e=d.prototype;e.dispose=function(){var b=this;this.trigger("dispose");this.off("dispose");Ea(f,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);Ea(f,"keydown",this.boundFullWindowOnEscKey_);this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null);d.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=
!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);Ug[this.id()]=null;Gb.names.forEach(function(a){(a=b[Gb[a].getterName]())&&a.off&&a.off()});a.prototype.dispose.call(this)};e.createEl=function(){var b=this.tag,c=this.playerElIngest_=b.parentNode&&b.parentNode.hasAttribute&&b.parentNode.hasAttribute("data-vjs-player"),d="video-js"===this.tag.tagName.toLowerCase();if(c)var e=this.el_=b.parentNode;else d||(e=this.el_=a.prototype.createEl.call(this,"div"));
var n=Q(b);if(d){e=this.el_=b;for(b=this.tag=f.createElement("video");e.children.length;)b.appendChild(e.firstChild);g(e,"video-js")||m(e,"video-js");e.appendChild(b);c=this.playerElIngest_=e;Object.keys(e).forEach(function(a){b[a]=e[a]})}b.setAttribute("tabindex","-1");n.tabindex="-1";if(bd||Mb&&xc)b.setAttribute("role","application"),n.role="application";b.removeAttribute("width");b.removeAttribute("height");"width"in n&&delete n.width;"height"in n&&delete n.height;Object.getOwnPropertyNames(n).forEach(function(a){d&&
"class"===a||e.setAttribute(a,n[a]);d&&b.setAttribute(a,n[a])});b.playerId=b.id;b.id+="_html5_api";b.className="vjs-tech";b.player=e.player=this;this.addClass("vjs-paused");if(!0!==h.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=uc("vjs-styles-dimensions");var k=$a(".vjs-styles-defaults"),w=$a("head");w.insertBefore(this.styleEl_,k?k.nextSibling:w.firstChild)}this.fluid_=this.fill_=!1;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);
this.aspectRatio(this.options_.aspectRatio);k=b.getElementsByTagName("a");for(w=0;w<k.length;w++){var l=k.item(w);m(l,"vjs-hidden");l.setAttribute("hidden","hidden")}b.initNetworkState_=b.networkState;b.parentNode&&!c&&b.parentNode.insertBefore(e,b);K(b,e);this.children_.unshift(b);this.el_.setAttribute("lang",this.language_);return this.el_=e};e.width=function(a){return this.dimension("width",a)};e.height=function(a){return this.dimension("height",a)};e.dimension=function(a,b){var c=a+"_";if(void 0===
b)return this[c]||0;if(""===b)this[c]=void 0,this.updateStyleEl_();else{var d=parseFloat(b);isNaN(d)?xa.error('Improper value "'+b+'" supplied for for '+a):(this[c]=d,this.updateStyleEl_())}};e.fluid=function(a){if(void 0===a)return!!this.fluid_;this.fluid_=!!a;vb(this)&&this.off("playerreset",this.updateStyleEl_);a?(this.addClass("vjs-fluid"),this.fill(!1),Zc(function(){this.on("playerreset",this.updateStyleEl_)})):this.removeClass("vjs-fluid");this.updateStyleEl_()};e.fill=function(a){if(void 0===
a)return!!this.fill_;this.fill_=!!a;a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")};e.aspectRatio=function(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+:\d+$/.test(a))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=a;this.fluid(!0);this.updateStyleEl_()};e.updateStyleEl_=function(){if(!0===h.VIDEOJS_NO_DYNAMIC_STYLE){var a="number"===typeof this.width_?this.width_:this.options_.width,b=
"number"===typeof this.height_?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();c&&(0<=a&&(c.width=a),0<=b&&(c.height=b))}else{a=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var d=a[1]/a[0];a=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/d:this.videoWidth()||300;b=void 0!==this.height_?this.height_:a*d;c=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():
this.id()+"-dimensions";this.addClass(c);td(this.styleEl_,"\n      ."+c+" {\n        width: "+a+"px;\n        height: "+b+"px;\n      }\n\n      ."+c+".vjs-fluid {\n        padding-top: "+100*d+"%;\n      }\n    ")}};e.loadTech_=function(a,b){var c=this;this.tech_&&this.unloadTech_();var d=va(a),e=a.charAt(0).toLowerCase()+a.slice(1);"Html5"!==d&&this.tag&&(Ua.getTech("Html5").disposeMediaElement(this.tag),this.tag=this.tag.player=null);this.techName_=d;this.isReady_=!1;var f="string"===typeof this.autoplay()?
!1:this.autoplay(),g={source:b,autoplay:f,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+e+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};
Gb.names.forEach(function(a){a=Gb[a];g[a.getterName]=c[a.privateName]});r(g,this.options_[d]);r(g,this.options_[e]);r(g,this.options_[a.toLowerCase()]);this.tag&&(g.tag=this.tag);b&&b.src===this.cache_.src&&0<this.cache_.currentTime&&(g.startTime=this.cache_.currentTime);a=Ua.getTech(a);if(!a)throw Error("No Tech named '"+d+"' exists! '"+d+"' should be registered using videojs.registerTech()'");this.tech_=new a(g);this.tech_.ready(Ja(this,this.handleTechReady_),!0);Tf.jsonToTextTracks(this.textTracksJson_||
[],this.tech_);Af.forEach(function(a){c.on(c.tech_,a,c["handleTech"+va(a)+"_"])});Object.keys(ed).forEach(function(a){c.on(c.tech_,a,function(b){if(0===c.tech_.playbackRate()&&c.tech_.seeking())c.queuedCallbacks_.push({callback:c["handleTech"+ed[a]+"_"].bind(c),event:b});else c["handleTech"+ed[a]+"_"](b)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",
this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_);this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_);
this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===d&&this.tag||K(this.tech_.el(),this.el());
this.tag&&(this.tag=this.tag.player=null)};e.unloadTech_=function(){var a=this;Gb.names.forEach(function(b){b=Gb[b];a[b.privateName]=a[b.getterName]()});this.textTracksJson_=Tf.textTracksToJson(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=!1};e.tech=function(a){void 0===a&&xa.warn(pb(sd()));return this.tech_};e.addTechControlsListeners_=function(){this.removeTechControlsListeners_();this.on(this.tech_,
"mouseup",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};e.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);
this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mouseup",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};e.handleTechReady_=function(){this.triggerReady();this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_()};e.handleTechLoadStart_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();this.paused()?
(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"));this.manualAutoplay_(this.autoplay())};e.manualAutoplay_=function(a){var b=this;if(this.tech_&&"string"===typeof a){var c=function(){var a=b.muted();b.muted(!0);var c=function(){b.muted(a)};b.playTerminatedQueue_.push(c);var d=b.play();if(ca(d))return d["catch"](c)};if("any"===a&&!0!==this.muted()){var d=this.play();ca(d)&&(d=d["catch"](c))}else d="muted"===a&&!0!==this.muted()?c():this.play();if(ca(d))return d.then(function(){b.trigger({type:"autoplay-success",
autoplay:a})})["catch"](function(c){b.trigger({type:"autoplay-failure",autoplay:a})})}};e.updateSourceCaches_=function(a){void 0===a&&(a="");var b=a,c="";"string"!==typeof b&&(b=a.src,c=a.type);this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];b&&!c&&(c=Vg(this,b));this.cache_.source=ta({},a,{src:b,type:c});a=this.cache_.sources.filter(function(a){return a.src&&a.src===b});c=[];for(var d=this.$$("source"),e=[],f=0;f<d.length;f++){var g=Q(d[f]);c.push(g);g.src&&
g.src===b&&e.push(g.src)}e.length&&!a.length?this.cache_.sources=c:a.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=b};e.handleTechSourceset_=function(a){var b=this;if(!this.changingSrc_){var c=function(a){return b.updateSourceCaches_(a)},d=this.currentSource().src,e=a.src;d&&!/^blob:/.test(d)&&/^blob:/.test(e)&&(!this.lastSource_||this.lastSource_.tech!==e&&this.lastSource_.player!==d)&&(c=function(){});c(e);if(!a.src)this.tech_.one(["sourceset","loadstart"],function Fh(a){"sourceset"!==
a.type&&(a=b.techGet("currentSrc"),b.lastSource_.tech=a,b.updateSourceCaches_(a));b.tech_.off(["sourceset","loadstart"],Fh)})}this.lastSource_={player:this.currentSource().src,tech:a.src};this.trigger({src:a.src,type:"sourceset"})};e.hasStarted=function(a){if(void 0===a)return this.hasStarted_;a!==this.hasStarted_&&((this.hasStarted_=a)?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))};e.handleTechPlay_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");
this.addClass("vjs-playing");this.hasStarted(!0);this.trigger("play")};e.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(a){return a.callback(a.event)}),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};e.handleTechWaiting_=function(){var a=this;this.addClass("vjs-waiting");this.trigger("waiting");var b=this.currentTime();this.on("timeupdate",function dh(){b!==
a.currentTime()&&(a.removeClass("vjs-waiting"),a.off("timeupdate",dh))})};e.handleTechCanPlay_=function(){this.removeClass("vjs-waiting");this.trigger("canplay")};e.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};e.handleTechPlaying_=function(){this.removeClass("vjs-waiting");this.trigger("playing")};e.handleTechSeeking_=function(){this.addClass("vjs-seeking");this.trigger("seeking")};e.handleTechSeeked_=function(){this.removeClass("vjs-seeking");
this.removeClass("vjs-ended");this.trigger("seeked")};e.handleTechFirstPlay_=function(){this.options_.starttime&&(xa.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime));this.addClass("vjs-has-started");this.trigger("firstplay")};e.handleTechPause_=function(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};e.handleTechEnded_=function(){this.addClass("vjs-ended");this.options_.loop?(this.currentTime(0),
this.play()):this.paused()||this.pause();this.trigger("ended")};e.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))};e.handleTechClick_=function(a){ma(a)&&this.controls_&&(this.paused()?Ra(this.play()):this.pause())};e.handleTechDoubleClick_=function(a){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(b){return b.contains(a.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&
!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,a):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))};e.handleTechTap_=function(){this.userActive(!this.userActive())};e.handleTechTouchStart_=function(){this.userWasActive=this.userActive()};e.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()};
e.handleTechTouchEnd_=function(a){a.preventDefault()};e.handleStageClick_=function(){this.reportUserActivity()};e.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")};e.documentFullscreenChange_=function(a){a=this.el();var b=f[this.fsApi_.fullscreenElement]===a;!b&&a.matches?b=a.matches(":"+this.fsApi_.fullscreen):!b&&a.msMatchesSelector&&(b=a.msMatchesSelector(":"+this.fsApi_.fullscreen));this.isFullscreen(b);!1===this.isFullscreen()&&
Ea(f,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);this.fsApi_.prefixed&&this.trigger("fullscreenchange")};e.handleTechFullscreenChange_=function(a,b){b&&this.isFullscreen(b.isFullscreen);this.trigger("fullscreenchange")};e.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")};e.handleTechEnterPictureInPicture_=function(a){this.isInPictureInPicture(!0)};e.handleTechLeavePictureInPicture_=
function(a){this.isInPictureInPicture(!1)};e.handleTechError_=function(){var a=this.tech_.error();this.error(a)};e.handleTechTextData_=function(){var a=null;1<arguments.length&&(a=arguments[1]);this.trigger("textdata",a)};e.getCache=function(){return this.cache_};e.resetCache_=function(){this.cache_={currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}};e.techCall_=function(a,
b){this.ready(function(){if(a in Nc)return this.tech_[a](this.middleware_.reduce(gc(a),b));if(a in sh)return $b(this.middleware_,this.tech_,a,b);try{if(this.tech_)this.tech_[a](b)}catch(Pc){throw xa(Pc),Pc;}},!0)};e.techGet_=function(a){if(this.tech_&&this.tech_.isReady_){if(a in xe){var b=this.tech_;return this.middleware_.reduceRight(gc(a),b[a]())}if(a in sh)return $b(this.middleware_,this.tech_,a);try{return this.tech_[a]()}catch(Pc){if(void 0===this.tech_[a])throw xa("Video.js: "+a+" method not defined for "+
this.techName_+" playback technology.",Pc),Pc;if("TypeError"===Pc.name)throw xa("Video.js: "+a+" unavailable on "+this.techName_+" playback technology element.",Pc),this.tech_.isReady_=!1,Pc;xa(Pc);throw Pc;}}};e.play=function(){var a=this,b=this.options_.Promise||h.Promise;return b?new b(function(b){a.play_(b)}):this.play_()};e.play_=function(a){var b=this;void 0===a&&(a=Ra);this.playCallbacks_.push(a);a=!(this.changingSrc_||!this.src()&&!this.currentSrc());this.waitToPlay_&&(this.off(["ready","loadstart"],
this.waitToPlay_),this.waitToPlay_=null);this.isReady_&&a?(a=this.techGet_("play"),null===a?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(a)):(this.waitToPlay_=function(a){b.play_()},this.one(["ready","loadstart"],this.waitToPlay_),a||!wc&&!Qb||this.load())};e.runPlayTerminatedQueue_=function(){var a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];a.forEach(function(a){a()})};e.runPlayCallbacks_=function(a){var b=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=
[];b.forEach(function(b){b(a)})};e.pause=function(){this.techCall_("pause")};e.paused=function(){return!1===this.techGet_("paused")?!1:!0};e.played=function(){return this.techGet_("played")||N(0,0)};e.scrubbing=function(a){if("undefined"===typeof a)return this.scrubbing_;this.scrubbing_=!!a;a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")};e.currentTime=function(a){if("undefined"!==typeof a)0>a&&(a=0),this.techCall_("setCurrentTime",a);else return this.cache_.currentTime=this.techGet_("currentTime")||
0,this.cache_.currentTime};e.duration=function(a){if(void 0===a)return void 0!==this.cache_.duration?this.cache_.duration:NaN;a=parseFloat(a);0>a&&(a=Infinity);a!==this.cache_.duration&&(this.cache_.duration=a,Infinity===a?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),isNaN(a)||this.trigger("durationchange"))};e.remainingTime=function(){return this.duration()-this.currentTime()};
e.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())};e.buffered=function(){var a=this.techGet_("buffered");a&&a.length||(a=N(0,0));return a};e.bufferedPercent=function(){return v(this.buffered(),this.duration())};e.bufferedEnd=function(){var a=this.buffered(),b=this.duration();a=a.end(a.length-1);a>b&&(a=b);return a};e.volume=function(a){if(void 0!==a)a=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=a,this.techCall_("setVolume",a),0<a&&this.lastVolume_(a);
else return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a};e.muted=function(a){if(void 0!==a)this.techCall_("setMuted",a);else return this.techGet_("muted")||!1};e.defaultMuted=function(a){return void 0!==a?this.techCall_("setDefaultMuted",a):this.techGet_("defaultMuted")||!1};e.lastVolume_=function(a){if(void 0!==a&&0!==a)this.cache_.lastVolume=a;else return this.cache_.lastVolume};e.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1};e.isFullscreen=function(a){if(void 0!==
a)this.isFullscreen_=!!a,this.toggleFullscreenClass_();else return!!this.isFullscreen_};e.requestFullscreen=function(a){this.isFullscreen(!0);if(this.fsApi_.requestFullscreen){Ma(f,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);if(!this.fsApi_.prefixed){var b=this.options_.fullscreen&&this.options_.fullscreen.options||{};void 0!==a&&(b=a)}Ra(this.el_[this.fsApi_.requestFullscreen](b))}else this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),
this.trigger("fullscreenchange"))};e.exitFullscreen=function(){this.isFullscreen(!1);this.fsApi_.requestFullscreen?Ra(f[this.fsApi_.exitFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))};e.enterFullWindow=function(){this.isFullWindow=!0;this.docOrigOverflow=f.documentElement.style.overflow;Ma(f,"keydown",this.boundFullWindowOnEscKey_);f.documentElement.style.overflow="hidden";m(f.body,"vjs-full-window");this.trigger("enterFullWindow")};
e.fullWindowOnEscKey=function(a){ua.isEventKey(a,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())};e.exitFullWindow=function(){this.isFullWindow=!1;Ea(f,"keydown",this.boundFullWindowOnEscKey_);f.documentElement.style.overflow=this.docOrigOverflow;A(f.body,"vjs-full-window");this.trigger("exitFullWindow")};e.isInPictureInPicture=function(a){if(void 0!==a)this.isInPictureInPicture_=!!a,this.togglePictureInPictureClass_();else return!!this.isInPictureInPicture_};e.requestPictureInPicture=
function(){if("pictureInPictureEnabled"in f)return this.techGet_("requestPictureInPicture")};e.exitPictureInPicture=function(){if("pictureInPictureEnabled"in f)return f.exitPictureInPicture()};e.handleKeyDown=function(a){var b=this.options_.userActions;if(b&&b.hotkeys){var c=this.el_.ownerDocument.activeElement;var d=c.tagName.toLowerCase(),e="button checkbox hidden radio reset submit".split(" ");c="input"===d?-1===e.indexOf(c.type):-1!==["textarea"].indexOf(d);c||("function"===typeof b.hotkeys?b.hotkeys.call(this,
a):this.handleHotkeys(a))}};e.handleHotkeys=function(a){var b=this.options_.userActions?this.options_.userActions.hotkeys:{},c=b.fullscreenKey,d=b.muteKey;d=void 0===d?function(a){return ua.isEventKey(a,"m")}:d;b=b.playPauseKey;b=void 0===b?function(a){return ua.isEventKey(a,"k")||ua.isEventKey(a,"Space")}:b;(void 0===c?function(a){return ua.isEventKey(a,"f")}:c).call(this,a)?(a.preventDefault(),a.stopPropagation(),c=S.getComponent("FullscreenToggle"),!1!==f[this.fsApi_.fullscreenEnabled]&&c.prototype.handleClick.call(this,
a)):d.call(this,a)?(a.preventDefault(),a.stopPropagation(),S.getComponent("MuteToggle").prototype.handleClick.call(this,a)):b.call(this,a)&&(a.preventDefault(),a.stopPropagation(),S.getComponent("PlayToggle").prototype.handleClick.call(this,a))};e.canPlayType=function(a){for(var b,c=0,d=this.options_.techOrder;c<d.length;c++){b=d[c];var e=Ua.getTech(b);e||(e=S.getComponent(b));if(!e)xa.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.');else if(e.isSupported()&&(b=
e.canPlayType(a)))return b}return""};e.selectSource=function(a){var b=this,c=this.options_.techOrder.map(function(a){return[a,Ua.getTech(a)]}).filter(function(a){var b=a[0];if(a=a[1])return a.isSupported();xa.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.');return!1}),d=function(a,b,c){var d;a.some(function(a){return b.some(function(b){if(d=c(a,b))return!0})});return d},e=function(a){return function(b,c){return a(c,b)}},f=function(a,c){var d=a[0];if(a[1].canPlaySource(c,
b.options_[d.toLowerCase()]))return{source:c,tech:d}};return(this.options_.sourceOrder?d(a,c,e(f)):d(c,a,f))||!1};e.src=function(a){var b=this;if("undefined"===typeof a)return this.cache_.src||"";var c=Xh(a);c.length?(this.changingSrc_=!0,this.cache_.sources=c,this.updateSourceCaches_(c[0]),Xc(this,c[0],function(a,d){b.middleware_=d;b.cache_.sources=c;b.updateSourceCaches_(a);if(b.src_(a)){if(1<c.length)return b.src(c.slice(1));b.changingSrc_=!1;b.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},
0);b.triggerReady()}else Xa(d,b.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)};e.src_=function(a){var b=this,c=this.selectSource([a]);if(!c)return!0;if(!Ka(c.tech,this.techName_))return this.changingSrc_=!0,this.loadTech_(c.tech,c.source),this.tech_.ready(function(){b.changingSrc_=!1}),!1;this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src);
this.changingSrc_=!1},!0);return!1};e.load=function(){this.techCall_("load")};e.reset=function(){var a=this,b=this.options_.Promise||h.Promise;this.paused()||!b?this.doReset_():(b=this.play(),Ra(b.then(function(){return a.doReset_()})))};e.doReset_=function(){this.tech_&&this.tech_.clearTracks("text");this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();vb(this)&&this.trigger("playerreset")};e.resetControlBarUI_=function(){this.resetProgressBar_();
this.resetPlaybackRate_();this.resetVolumeBar_()};e.resetProgressBar_=function(){this.currentTime(0);var a=this.controlBar,b=a.durationDisplay;a=a.remainingTimeDisplay;b&&b.updateContent();a&&a.updateContent()};e.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_()};e.resetVolumeBar_=function(){this.volume(1);this.trigger("volumechange")};e.currentSources=function(){var a=this.currentSource(),b=[];0!==Object.keys(a).length&&b.push(a);return this.cache_.sources||
b};e.currentSource=function(){return this.cache_.source||{}};e.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""};e.currentType=function(){return this.currentSource()&&this.currentSource().type||""};e.preload=function(a){if(void 0!==a)this.techCall_("setPreload",a),this.options_.preload=a;else return this.techGet_("preload")};e.autoplay=function(a){if(void 0===a)return this.options_.autoplay||!1;if("string"===typeof a&&/(any|play|muted)/.test(a)){this.options_.autoplay=
a;this.manualAutoplay_(a);var b=!1}else this.options_.autoplay=a?!0:!1;b="undefined"===typeof b?this.options_.autoplay:b;this.tech_&&this.techCall_("setAutoplay",b)};e.playsinline=function(a){return void 0!==a?(this.techCall_("setPlaysinline",a),this.options_.playsinline=a,this):this.techGet_("playsinline")};e.loop=function(a){if(void 0!==a)this.techCall_("setLoop",a),this.options_.loop=a;else return this.techGet_("loop")};e.poster=function(a){if(void 0===a)return this.poster_;a||(a="");a!==this.poster_&&
(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))};e.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=!0,this.trigger("posterchange"))}};e.controls=function(a){if(void 0===a)return!!this.controls_;a=!!a;this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",
a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))};e.usingNativeControls=function(a){if(void 0===a)return!!this.usingNativeControls_;a=!!a;this.usingNativeControls_!==a&&((this.usingNativeControls_=
a)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))};e.error=function(a){if(void 0===a)return this.error_||null;if(this.options_.suppressNotSupportedError&&a&&a.message&&a.message===this.localize(this.options_.notSupportedMessage)){var b=function(){this.error(a)};this.options_.suppressNotSupportedError=!1;this.any(["click","touchstart"],b);this.one("loadstart",function(){this.off(["click",
"touchstart"],b)})}else null===a?(this.error_=a,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new Ca(a),this.addClass("vjs-error"),xa.error("(CODE:"+this.error_.code+" "+Ca.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"))};e.reportUserActivity=function(a){this.userActivity_=!0};e.userActive=function(a){if(void 0===a)return this.userActive_;a=!!a;if(a!==this.userActive_)if(this.userActive_=a)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),
this.addClass("vjs-user-active"),this.trigger("useractive");else{if(this.tech_)this.tech_.one("mousemove",function(a){a.stopPropagation();a.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}};e.listenForUserActivity_=function(){var a,b,c,d=Ja(this,this.reportUserActivity);this.on("mousedown",function(){d();this.clearInterval(a);a=this.setInterval(d,250)});this.on("mousemove",function(a){if(a.screenX!==b||a.screenY!==
c)b=a.screenX,c=a.screenY,d()});this.on("mouseup",function(b){d();this.clearInterval(a)});var e=this.getChild("controlBar");!e||Qb||Db||(e.on("mouseenter",function(a){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0}),e.on("mouseleave",function(a){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}));this.on("keydown",d);this.on("keyup",d);var f;this.setInterval(function(){if(this.userActivity_){this.userActivity_=
!1;this.userActive(!0);this.clearTimeout(f);var a=this.options_.inactivityTimeout;0>=a||(f=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},a))}},250)};e.playbackRate=function(a){if(void 0!==a)this.techCall_("setPlaybackRate",a);else return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1};e.defaultPlaybackRate=function(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?
this.techGet_("defaultPlaybackRate"):1};e.isAudio=function(a){if(void 0!==a)this.isAudio_=!!a;else return!!this.isAudio_};e.addTextTrack=function(a,b,c){if(this.tech_)return this.tech_.addTextTrack(a,b,c)};e.addRemoteTextTrack=function(a,b){if(this.tech_)return this.tech_.addRemoteTextTrack(a,b)};e.removeRemoteTextTrack=function(a){void 0===a&&(a={});var b=a.track;b||(b=a);if(this.tech_)return this.tech_.removeRemoteTextTrack(b)};e.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")};
e.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};e.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};e.language=function(a){if(void 0===a)return this.language_;this.language_=String(a).toLowerCase()};e.languages=function(){return ta(d.prototype.options_.languages,this.languages_)};e.toJSON=function(){var a=ta(this.options_),b=a.tracks;a.tracks=[];for(var c=0;c<b.length;c++){var d=b[c];d=ta(d);d.player=void 0;
a.tracks[c]=d}return a};e.createModal=function(a,b){var c=this;b=b||{};b.content=a||"";var d=new ld(this,b);this.addChild(d);d.on("dispose",function(){c.removeChild(d)});d.open();return d};e.updateCurrentBreakpoint_=function(){if(this.responsive())for(var a=this.currentBreakpoint(),b=this.currentWidth(),c=0;c<Mc.length;c++){var d=Mc[c];if(b<=this.breakpoints_[d]){if(a===d)break;a&&this.removeClass(Ud[a]);this.addClass(Ud[d]);this.breakpoint_=d;break}}};e.removeCurrentBreakpoint_=function(){var a=
this.currentBreakpointClass();this.breakpoint_="";a&&this.removeClass(a)};e.breakpoints=function(a){if(void 0===a)return r(this.breakpoints_);this.breakpoint_="";this.breakpoints_=r({},Vd,a);this.updateCurrentBreakpoint_();return r(this.breakpoints_)};e.responsive=function(a){if(void 0===a)return this.responsive_;a=!!a;if(a!==this.responsive_)return(this.responsive_=a)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),
this.removeCurrentBreakpoint_()),a};e.currentBreakpoint=function(){return this.breakpoint_};e.currentBreakpointClass=function(){return Ud[this.breakpoint_]||""};e.loadMedia=function(a,b){var c=this;if(a&&"object"===typeof a){this.reset();this.cache_.media=ta(a);a=this.cache_.media;var d=a.poster,e=a.src,f=a.textTracks;!a.artwork&&d&&(this.cache_.media.artwork=[{src:d,type:If(d)}]);e&&this.src(e);d&&this.poster(d);Array.isArray(f)&&f.forEach(function(a){return c.addRemoteTextTrack(a,!1)});this.ready(b)}};
e.getMedia=function(){if(!this.cache_.media){var a=this.poster(),b=this.currentSources(),c=Array.prototype.map.call(this.remoteTextTracks(),function(a){return{kind:a.kind,label:a.label,language:a.language,src:a.src}});b={src:b,textTracks:c};a&&(b.poster=a,b.artwork=[{src:b.poster,type:If(b.poster)}]);return b}return ta(this.cache_.media)};d.getTagSettings=function(a){var b={sources:[],tracks:[]},c=Q(a),d=c["data-setup"];g(a,"vjs-fill")&&(c.fill=!0);g(a,"vjs-fluid")&&(c.fluid=!0);if(null!==d){var e=
null;try{var f=JSON.parse(d||"{}",void 0)}catch(Eh){e=Eh}f=[e,f];d=f[0];f=f[1];d&&xa.error(d);r(c,f)}r(b,c);if(a.hasChildNodes())for(a=a.childNodes,c=0,d=a.length;c<d;c++)f=a[c],e=f.nodeName.toLowerCase(),"source"===e?b.sources.push(Q(f)):"track"===e&&b.tracks.push(Q(f));return b};e.flexNotSupported_=function(){var a=f.createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)};return d}(S);Gb.names.forEach(function(a){var b=
Gb[a];xb.prototype[b.getterName]=function(){if(this.tech_)return this.tech_[b.getterName]();this[b.privateName]=this[b.privateName]||new b.ListClass;return this[b.privateName]}});xb.players={};var zg=h.navigator;xb.prototype.options_={techOrder:Ua.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2E3,playbackRates:[],liveui:!1,children:"mediaLoader posterImage textTrackDisplay loadingSpinner bigPlayButton liveTracker controlBar errorDisplay textTrackSettings resizeManager".split(" "),language:zg&&
(zg.languages&&zg.languages[0]||zg.userLanguage||zg.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(a){xb.prototype[a]=function(){return this.techGet_(a)}});Af.forEach(function(a){xb.prototype["handleTech"+va(a)+"_"]=function(){return this.trigger(a)}});S.registerComponent("Player",xb);var te={},Ph=function(a){return te.hasOwnProperty(a)?
te[a]:void 0},Y=function(a,b,c){c=(c?"before":"")+"pluginsetup";a.trigger(c,b);a.trigger(c+":"+b.name,b)},dc=function(a,b){var c=function(){Y(this,{name:a,plugin:b,instance:null},!0);var c=b.apply(this,arguments);this.activePlugins_=this.activePlugins_||{};this.activePlugins_[a]=!0;Y(this,{name:a,plugin:b,instance:c});return c};Object.keys(b).forEach(function(a){c[a]=b[a]});return c},Ce=function(a,b){b.prototype.name=a;return function(){Y(this,{name:a,plugin:b,instance:null},!0);for(var c=arguments.length,
d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=k(b,[this].concat(d));this[a]=function(){return f};Y(this,f.getEventHash());return f}},Wd=function(){function a(b){if(this.constructor===a)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=b;ya(this);delete this.trigger;Pa(this,this.constructor.defaultState);var c=this.name;b.activePlugins_=b.activePlugins_||{};b.activePlugins_[c]=!0;this.dispose=Ja(this,this.dispose);b.on("dispose",this.dispose)}var b=a.prototype;b.version=
function(){return this.constructor.VERSION};b.getEventHash=function(a){void 0===a&&(a={});a.name=this.name;a.plugin=this.constructor;a.instance=this;return a};b.trigger=function(a,b){void 0===b&&(b={});return Qa(this.eventBusEl_,a,this.getEventHash(b))};b.handleStateChanged=function(a){};b.dispose=function(){var a=this.name,b=this.player;this.trigger("dispose");this.off();b.off("dispose",this.dispose);b.activePlugins_[a]=!1;this.player=this.state=null;b[a]=Ce(a,te[a])};a.isBasic=function(b){b="string"===
typeof b?Ph(b):b;return"function"===typeof b&&!a.prototype.isPrototypeOf(b.prototype)};a.registerPlugin=function(b,c){if("string"!==typeof b)throw Error('Illegal plugin name, "'+b+'", must be a string, was '+typeof b+".");if(te.hasOwnProperty(b))xa.warn('A plugin named "'+b+'" already exists. You may want to avoid re-registering plugins!');else if(xb.prototype.hasOwnProperty(b))throw Error('Illegal plugin name, "'+b+'", cannot share a name with an existing player method!');if("function"!==typeof c)throw Error('Illegal plugin for "'+
b+'", must be a function, was '+typeof c+".");te[b]=c;"plugin"!==b&&(a.isBasic(c)?xb.prototype[b]=dc(b,c):xb.prototype[b]=Ce(b,c));return c};a.deregisterPlugin=function(a){if("plugin"===a)throw Error("Cannot de-register base plugin.");te.hasOwnProperty(a)&&(delete te[a],delete xb.prototype[a])};a.getPlugins=function(a){void 0===a&&(a=Object.keys(te));var b;a.forEach(function(a){var c=Ph(a);c&&(b=b||{},b[a]=c)});return b};a.getPluginVersion=function(a){return(a=Ph(a))&&a.VERSION||""};return a}();Wd.getPlugin=
Ph;Wd.BASE_PLUGIN_NAME="plugin";Wd.registerPlugin("plugin",Wd);xb.prototype.usingPlugin=function(a){return!!this.activePlugins_&&!0===this.activePlugins_[a]};xb.prototype.hasPlugin=function(a){return!!te.hasOwnProperty(a)};var mb=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(a.super_=b)},xi=function(a){return 0===
a.indexOf("#")?a.slice(1):a};J.hooks_={};J.hooks=function(a,b){J.hooks_[a]=J.hooks_[a]||[];b&&(J.hooks_[a]=J.hooks_[a].concat(b));return J.hooks_[a]};J.hook=function(a,b){J.hooks(a,b)};J.hookOnce=function(a,b){J.hooks(a,[].concat(b).map(function(b){return function Ab(){J.removeHook(a,Ab);return b.apply(void 0,arguments)}}))};J.removeHook=function(a,b){b=J.hooks(a).indexOf(b);if(-1>=b)return!1;J.hooks_[a]=J.hooks_[a].slice();J.hooks_[a].splice(b,1);return!0};if(!0!==h.VIDEOJS_NO_DYNAMIC_STYLE&&B()){var Bh=
$a(".vjs-styles-defaults");if(!Bh){Bh=uc("vjs-styles-defaults");var bh=$a("head");bh&&bh.insertBefore(Bh,bh.firstChild);td(Bh,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}W(1,J);J.VERSION="7.6.0";J.options=xb.prototype.options_;J.getPlayers=function(){return xb.players};J.getPlayer=function(a){var b=xb.players;if("string"===typeof a){a=xi(a);var c=b[a];if(c)return c;a=$a("#"+a)}if(C(a)&&(c=a,a=c.player,
c=c.playerId,a||b[c]))return a||b[c]};J.getAllPlayers=function(){return Object.keys(xb.players).map(function(a){return xb.players[a]}).filter(Boolean)};J.players=xb.players;J.getComponent=S.getComponent;J.registerComponent=function(a,b){Ua.isTech(b)&&xa.warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");S.registerComponent.call(S,a,b)};J.getTech=Ua.getTech;J.registerTech=Ua.registerTech;J.use=function(a,b){bf[a]=bf[a]||[];bf[a].push(b)};
Object.defineProperty(J,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(J.middleware,"TERMINATOR",{value:zd,writeable:!1,enumerable:!0});J.browser=ud;J.TOUCH_ENABLED=Jc;J.extend=function(a,b){void 0===b&&(b={});var c=function(){a.apply(this,arguments)},d={};"object"===typeof b?(b.constructor!==Object.prototype.constructor&&(c=b.constructor),d=b):"function"===typeof b&&(c=b);mb(c,a);for(var e in d)d.hasOwnProperty(e)&&(c.prototype[e]=d[e]);return c};J.mergeOptions=ta;J.bind=
Ja;J.registerPlugin=Wd.registerPlugin;J.deregisterPlugin=Wd.deregisterPlugin;J.plugin=function(a,b){xa.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return Wd.registerPlugin(a,b)};J.getPlugins=Wd.getPlugins;J.getPlugin=Wd.getPlugin;J.getPluginVersion=Wd.getPluginVersion;J.addLanguage=function(a,b){var c;a=(""+a).toLowerCase();J.options.languages=ta(J.options.languages,(c={},c[a]=b,c));return J.options.languages[a]};J.log=xa;J.createLogger=Ic;J.createTimeRange=J.createTimeRanges=
N;J.formatTime=Yc;J.setFormatTime=function(a){be=a};J.resetFormatTime=function(){be=tg};J.parseUrl=Ld;J.isCrossOrigin=Gg;J.EventTarget=Ta;J.on=Ma;J.one=Ha;J.off=Ea;J.trigger=Qa;J.xhr=La;J.TextTrack=$d;J.AudioTrack=Ze;J.VideoTrack=sg;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach(function(a){J[a]=function(){xa.warn("videojs."+a+"() is deprecated; use videojs.dom."+a+"() instead");return bc[a].apply(null,
arguments)}});J.computedStyle=p;J.dom=bc;J.url=Yf;var Fi=hc(function(a,b){(function(b){var c=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,d=/^([^\/?#]*)(.*)$/,e=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,g={buildAbsoluteURL:function(a,b,c){c=c||{};a=a.trim();b=b.trim();if(!b){if(!c.alwaysNormalize)return a;c=g.parseURL(a);if(!c)throw Error("Error trying to parse base URL.");c.path=g.normalizePath(c.path);return g.buildURLFromParts(c)}var e=
g.parseURL(b);if(!e)throw Error("Error trying to parse relative URL.");if(e.scheme){if(!c.alwaysNormalize)return b;e.path=g.normalizePath(e.path);return g.buildURLFromParts(e)}b=g.parseURL(a);if(!b)throw Error("Error trying to parse base URL.");!b.netLoc&&b.path&&"/"!==b.path[0]&&(a=d.exec(b.path),b.netLoc=a[1],b.path=a[2]);b.netLoc&&!b.path&&(b.path="/");a={scheme:b.scheme,netLoc:e.netLoc,path:null,params:e.params,query:e.query,fragment:e.fragment};e.netLoc||(a.netLoc=b.netLoc,"/"!==e.path[0]&&(e.path?
(b=b.path,b=b.substring(0,b.lastIndexOf("/")+1)+e.path,a.path=g.normalizePath(b)):(a.path=b.path,e.params||(a.params=b.params,e.query||(a.query=b.query)))));null===a.path&&(a.path=c.alwaysNormalize?g.normalizePath(e.path):e.path);return g.buildURLFromParts(a)},parseURL:function(a){return(a=c.exec(a))?{scheme:a[1]||"",netLoc:a[2]||"",path:a[3]||"",params:a[4]||"",query:a[5]||"",fragment:a[6]||""}:null},normalizePath:function(a){for(a=a.split("").reverse().join("").replace(e,"");a.length!==(a=a.replace(f,
"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};a.exports=g})()}),Qh=function(){function a(){this.listeners={}}var b=a.prototype;b.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)};b.off=function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b};b.trigger=function(a){var b=this.listeners[a],c;if(b)if(2===arguments.length){var d=
b.length;for(c=0;c<d;++c)b[c].call(this,arguments[1])}else{var e=Array.prototype.slice.call(arguments,1);d=b.length;for(c=0;c<d;++c)b[c].apply(this,e)}};b.dispose=function(){this.listeners={}};b.pipe=function(a){this.on("data",function(b){a.push(b)})};return a}(),ci=function(a){function b(){var b=a.call(this)||this;b.buffer="";return b}Md(b,a);b.prototype.push=function(a){this.buffer+=a;for(a=this.buffer.indexOf("\n");-1<a;a=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,a)),
this.buffer=this.buffer.substring(a+1)};return b}(Qh),Xd=function(a){a=a.split(/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/);for(var b={},c=a.length,d;c--;)""!==a[c]&&(d=/([^=]*)=(.*)/.exec(a[c]).slice(1),d[0]=d[0].replace(/^\s+|\s+$/g,""),d[1]=d[1].replace(/^\s+|\s+$/g,""),d[1]=d[1].replace(/^['"](.*)['"]$/g,"$1"),b[d[0]]=d[1]);return b},fd=function(a){function b(){var b=a.call(this)||this;b.customParsers=[];b.tagMappers=[];return b}Md(b,a);var c=b.prototype;c.push=function(a){var b=this,c,d;a=a.trim();
0!==a.length&&("#"!==a[0]?this.trigger("data",{type:"uri",uri:a}):this.tagMappers.reduce(function(b,c){c=c(a);return c===a?b:b.concat([c])},[a]).forEach(function(a){for(var e=0;e<b.customParsers.length;e++)if(b.customParsers[e].call(b,a))return;0!==a.indexOf("#EXT")?b.trigger("data",{type:"comment",text:a.slice(1)}):(a=a.replace("\r",""),(c=/^#EXTM3U/.exec(a))?b.trigger("data",{type:"tag",tagType:"m3u"}):(c=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(a))?(d={type:"tag",tagType:"inf"},c[1]&&(d.duration=parseFloat(c[1])),
c[2]&&(d.title=c[2]),b.trigger("data",d)):(c=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"targetduration"},c[1]&&(d.duration=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"totalduration"},c[1]&&(d.duration=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"version"},c[1]&&(d.version=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))?
(d={type:"tag",tagType:"media-sequence"},c[1]&&(d.number=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"discontinuity-sequence"},c[1]&&(d.number=parseInt(c[1],10)),b.trigger("data",d)):(c=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(a))?(d={type:"tag",tagType:"playlist-type"},c[1]&&(d.playlistType=c[1]),b.trigger("data",d)):(c=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(a))?(d={type:"tag",tagType:"byterange"},c[1]&&(d.length=
parseInt(c[1],10)),c[2]&&(d.offset=parseInt(c[2],10)),b.trigger("data",d)):(c=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(a))?(d={type:"tag",tagType:"allow-cache"},c[1]&&(d.allowed=!/NO/.test(c[1])),b.trigger("data",d)):(c=/^#EXT-X-MAP:?(.*)$/.exec(a))?(d={type:"tag",tagType:"map"},c[1]&&(a=Xd(c[1]),a.URI&&(d.uri=a.URI),a.BYTERANGE&&(e=a.BYTERANGE.split("@"),a=e[0],e=e[1],d.byterange={},a&&(d.byterange.length=parseInt(a,10)),e&&(d.byterange.offset=parseInt(e,10)))),b.trigger("data",d)):(c=/^#EXT-X-STREAM-INF:?(.*)$/.exec(a))?
(d={type:"tag",tagType:"stream-inf"},c[1]&&(d.attributes=Xd(c[1]),d.attributes.RESOLUTION&&(a=d.attributes.RESOLUTION.split("x"),e={},a[0]&&(e.width=parseInt(a[0],10)),a[1]&&(e.height=parseInt(a[1],10)),d.attributes.RESOLUTION=e),d.attributes.BANDWIDTH&&(d.attributes.BANDWIDTH=parseInt(d.attributes.BANDWIDTH,10)),d.attributes["PROGRAM-ID"]&&(d.attributes["PROGRAM-ID"]=parseInt(d.attributes["PROGRAM-ID"],10))),b.trigger("data",d)):(c=/^#EXT-X-MEDIA:?(.*)$/.exec(a))?(d={type:"tag",tagType:"media"},
c[1]&&(d.attributes=Xd(c[1])),b.trigger("data",d)):(c=/^#EXT-X-ENDLIST/.exec(a))?b.trigger("data",{type:"tag",tagType:"endlist"}):(c=/^#EXT-X-DISCONTINUITY/.exec(a))?b.trigger("data",{type:"tag",tagType:"discontinuity"}):(c=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(a))?(d={type:"tag",tagType:"program-date-time"},c[1]&&(d.dateTimeString=c[1],d.dateTimeObject=new Date(c[1])),b.trigger("data",d)):(c=/^#EXT-X-KEY:?(.*)$/.exec(a))?(d={type:"tag",tagType:"key"},c[1]&&(d.attributes=Xd(c[1]),d.attributes.IV&&
("0x"===d.attributes.IV.substring(0,2).toLowerCase()&&(d.attributes.IV=d.attributes.IV.substring(2)),d.attributes.IV=d.attributes.IV.match(/.{8}/g),d.attributes.IV[0]=parseInt(d.attributes.IV[0],16),d.attributes.IV[1]=parseInt(d.attributes.IV[1],16),d.attributes.IV[2]=parseInt(d.attributes.IV[2],16),d.attributes.IV[3]=parseInt(d.attributes.IV[3],16),d.attributes.IV=new Uint32Array(d.attributes.IV))),b.trigger("data",d)):(c=/^#EXT-X-START:?(.*)$/.exec(a))?(d={type:"tag",tagType:"start"},c[1]&&(d.attributes=
Xd(c[1]),d.attributes["TIME-OFFSET"]=parseFloat(d.attributes["TIME-OFFSET"]),d.attributes.PRECISE=/YES/.test(d.attributes.PRECISE)),b.trigger("data",d)):(c=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(a))?(d={type:"tag",tagType:"cue-out-cont"},d.data=c[1]?c[1]:"",b.trigger("data",d)):(c=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(a))?(d={type:"tag",tagType:"cue-out"},d.data=c[1]?c[1]:"",b.trigger("data",d)):(c=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a))?(d={type:"tag",tagType:"cue-in"},d.data=c[1]?c[1]:"",b.trigger("data",d)):b.trigger("data",
{type:"tag",data:a.slice(4)}))}))};c.addParser=function(a){var b=this,c=a.expression,d=a.customType,e=a.dataParser,f=a.segment;"function"!==typeof e&&(e=function(a){return a});this.customParsers.push(function(a){if(c.exec(a))return b.trigger("data",{type:"custom",data:e(a),customType:d,segment:f}),!0})};c.addTagMapper=function(a){var b=a.expression,c=a.map;this.tagMappers.push(function(a){return b.test(a)?c(a):a})};return b}(Qh),Qg=function(a){function b(){var b=a.call(this)||this;b.lineStream=new ci;
b.parseStream=new fd;b.lineStream.pipe(b.parseStream);var c=Hc(Hc(b)),d=[],e={},f,g,n=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},k=0;b.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};b.parseStream.on("data",function(a){var b,w;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=a.allowed;"allowed"in a||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var b={};"length"in a&&(e.byterange=
b,b.length=a.length,"offset"in a||(this.trigger("info",{message:"defaulting offset to zero"}),a.offset=0));"offset"in a&&(e.byterange=b,b.offset=a.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));
0<a.duration&&(e.duration=a.duration);0===a.duration&&(e.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=d},key:function(){a.attributes?"NONE"===a.attributes.METHOD?g=null:a.attributes.URI?(a.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),g={method:a.attributes.METHOD||"AES-128",uri:a.attributes.URI},"undefined"!==typeof a.attributes.IV&&(g.iv=a.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):
this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(a.number)?this.manifest.mediaSequence=a.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+a.number})},"discontinuity-sequence":function(){isFinite(a.number)?k=this.manifest.discontinuitySequence=a.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+a.number})},"playlist-type":function(){/VOD|EVENT/.test(a.playlistType)?this.manifest.playlistType=
a.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+a.playlist})},map:function(){f={};a.uri&&(f.uri=a.uri);a.byterange&&(f.byterange=a.byterange)},"stream-inf":function(){this.manifest.playlists=d;this.manifest.mediaGroups=this.manifest.mediaGroups||h;a.attributes?(e.attributes||(e.attributes={}),Ve(e.attributes,a.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||h;if(a.attributes&&
a.attributes.TYPE&&a.attributes["GROUP-ID"]&&a.attributes.NAME){var c=this.manifest.mediaGroups[a.attributes.TYPE];c[a.attributes["GROUP-ID"]]=c[a.attributes["GROUP-ID"]]||{};b=c[a.attributes["GROUP-ID"]];w={"default":/yes/i.test(a.attributes.DEFAULT)};w.autoselect=w["default"]?!0:/yes/i.test(a.attributes.AUTOSELECT);a.attributes.LANGUAGE&&(w.language=a.attributes.LANGUAGE);a.attributes.URI&&(w.uri=a.attributes.URI);a.attributes["INSTREAM-ID"]&&(w.instreamId=a.attributes["INSTREAM-ID"]);a.attributes.CHARACTERISTICS&&
(w.characteristics=a.attributes.CHARACTERISTICS);a.attributes.FORCED&&(w.forced=/yes/i.test(a.attributes.FORCED));b[a.attributes.NAME]=w}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){k+=1;e.discontinuity=!0;this.manifest.discontinuityStarts.push(d.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=a.dateTimeString,this.manifest.dateTimeObject=a.dateTimeObject);e.dateTimeString=
a.dateTimeString;e.dateTimeObject=a.dateTimeObject},targetduration:function(){!isFinite(a.duration)||0>a.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+a.duration}):this.manifest.targetDuration=a.duration},totalduration:function(){!isFinite(a.duration)||0>a.duration?this.trigger("warn",{message:"ignoring invalid total duration: "+a.duration}):this.manifest.totalDuration=a.duration},start:function(){!a.attributes||isNaN(a.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):
this.manifest.start={timeOffset:a.attributes["TIME-OFFSET"],precise:a.attributes.PRECISE}},"cue-out":function(){e.cueOut=a.data},"cue-out-cont":function(){e.cueOutCont=a.data},"cue-in":function(){e.cueIn=a.data}}[a.tagType]||n).call(c)},uri:function(){e.uri=a.uri;d.push(e);!this.manifest.targetDuration||"duration"in e||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),e.duration=this.manifest.targetDuration);g&&(e.key=g);e.timeline=k;f&&(e.map=f);e={}},comment:function(){},
custom:function(){a.segment?(e.custom=e.custom||{},e.custom[a.customType]=a.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[a.customType]=a.data)}})[a.type].call(c)});return b}Md(b,a);var c=b.prototype;c.push=function(a){this.lineStream.push(a)};c.end=function(){this.lineStream.push("\n")};c.addParser=function(a){this.parseStream.addParser(a)};c.addTagMapper=function(a){this.parseStream.addTagMapper(a)};return b}(Qh),mh=function(a){return!!a&&"object"===typeof a},Rb=function Bc(){for(var a=
arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(a,b){Object.keys(b).forEach(function(c){Array.isArray(a[c])&&Array.isArray(b[c])?a[c]=a[c].concat(b[c]):mh(a[c])&&mh(b[c])?a[c]=Bc(a[c],b[c]):a[c]=b[c]});return a},{})},qg=function(a){return Object.keys(a).map(function(b){return a[b]})},wd=function(a){return a.reduce(function(a,b){return a.concat(b)},[])},Xe=function(a){if(!a.length)return[];for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},Df=function(a,b){return a.reduce(function(a,
c,d){c[b]&&a.push(d);return a},[])},Yd=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a,b){(function(b){var c=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,d=/^([^\/?#]*)(.*)$/,e=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,g={buildAbsoluteURL:function(a,b,c){c=c||{};a=a.trim();b=b.trim();if(!b){if(!c.alwaysNormalize)return a;c=g.parseURL(a);if(!c)throw Error("Error trying to parse base URL.");c.path=g.normalizePath(c.path);
return g.buildURLFromParts(c)}var e=g.parseURL(b);if(!e)throw Error("Error trying to parse relative URL.");if(e.scheme){if(!c.alwaysNormalize)return b;e.path=g.normalizePath(e.path);return g.buildURLFromParts(e)}b=g.parseURL(a);if(!b)throw Error("Error trying to parse base URL.");!b.netLoc&&b.path&&"/"!==b.path[0]&&(a=d.exec(b.path),b.netLoc=a[1],b.path=a[2]);b.netLoc&&!b.path&&(b.path="/");a={scheme:b.scheme,netLoc:e.netLoc,path:null,params:e.params,query:e.query,fragment:e.fragment};e.netLoc||(a.netLoc=
b.netLoc,"/"!==e.path[0]&&(e.path?(b=b.path,b=b.substring(0,b.lastIndexOf("/")+1)+e.path,a.path=g.normalizePath(b)):(a.path=b.path,e.params||(a.params=b.params,e.query||(a.query=b.query)))));null===a.path&&(a.path=c.alwaysNormalize?g.normalizePath(e.path):e.path);return g.buildURLFromParts(a)},parseURL:function(a){return(a=c.exec(a))?{scheme:a[1]||"",netLoc:a[2]||"",path:a[3]||"",params:a[4]||"",query:a[5]||"",fragment:a[6]||""}:null},normalizePath:function(a){for(a=a.split("").reverse().join("").replace(e,
"");a.length!==(a=a.replace(f,"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};a.exports=g})()}),Ef=function(a,b){if(/^[a-z]+:/i.test(b))return b;/\/\//i.test(a)||(a=Yd.buildAbsoluteURL(h.location.href,a));return Yd.buildAbsoluteURL(a,b)},ue=function(a){var b=a.baseUrl,c=a.source;c=void 0===c?"":c;var d=a.range;d=void 0===d?"":d;a=a.indexRange;a=void 0===a?"":a;b={uri:c,resolvedUri:Ef((void 0===b?"":b)||
"",c)};if(d||a)d=(d?d:a).split("-"),c=parseInt(d[0],10),d=parseInt(d[1],10),b.byterange={length:d-c+1,offset:c};return b},Ff={"static":function(a){var b=a.timescale;return{start:0,end:Math.ceil(a.sourceDuration/(a.duration/(void 0===b?1:b)))}},dynamic:function(a){var b=a.timescale;b=void 0===b?1:b;var c=a.duration,d=a.start,e=a.minimumUpdatePeriod,f=a.timeShiftBufferDepth,g=(a.NOW+a.clientOffset)/1E3;a=a.availabilityStartTime+(void 0===d?0:d);return{start:Math.max(0,Math.floor((g-a-(void 0===f?Infinity:
f))*b/c)),end:Math.min(Math.ceil((g+(void 0===e?0:e)-a)*b/c),Math.floor((g-a)*b/c))}}},Zd=function(a){return function(b,c){var d=a.duration,e=a.timescale,f=a.startNumber;return{number:(void 0===f?1:f)+b,duration:d/(void 0===e?1:e),timeline:a.periodIndex,time:c*d}}},Rh=function(a){var b=a.type,c=void 0===b?"static":b;b=a.duration;var d=a.timescale;d=void 0===d?1:d;var e=a.sourceDuration,f=Ff[c](a),g=f.end,n=[];for(f=f.start;f<g;f++)n.push(f);a=n.map(Zd(a));"static"===c&&(c=a.length-1,a[c].duration=
e-b/d*c);return a},di=function(a){var b=a.baseUrl,c=a.initialization,d=void 0===c?{}:c;c=a.sourceDuration;var e=a.timescale;e=void 0===e?1:e;var f=a.indexRange,g=void 0===f?"":f;f=a.duration;if(!b)throw Error("NO_BASE_URL");d=ue({baseUrl:b,source:d.sourceURL,range:d.range});b=ue({baseUrl:b,source:b,indexRange:g});b.map=d;f?(a=Rh(a),a.length&&(b.duration=a[0].duration,b.timeline=a[0].timeline)):c&&(b.duration=c/e,b.timeline=0);b.number=0;return[b]},yi=function(a,b,c){var d=a.sidx.map?a.sidx.map:null,
e=a.sidx.duration,f=a.timeline||0,g=a.sidx.byterange,n=g.offset+g.length;g=b.timescale;var h=b.references.filter(function(a){return 1!==a.referenceType}),k=[];n+=b.firstOffset;for(var w=0;w<h.length;w++){var l=b.references[w],m=l.referencedSize;l=di({baseUrl:c,timescale:g,timeline:f,periodIndex:f,duration:l.subsegmentDuration,sourceDuration:e,indexRange:n+"-"+(n+m-1)})[0];d&&(l.map=d);k.push(l);n+=m}a.segments=k;return a},Ye=function(a){return qg(a.reduce(function(a,b){var c=b.attributes.id+(b.attributes.lang||
"");if(a[c]){var d;b.segments[0]&&(b.segments[0].discontinuity=!0);(d=a[c].segments).push.apply(d,b.segments);b.attributes.contentProtection&&(a[c].attributes.contentProtection=b.attributes.contentProtection)}else a[c]=b;return a},{})).map(function(a){a.discontinuityStarts=Df(a.segments,"discontinuity");return a})},ch=function(a,b){void 0===b&&(b={});if(!Object.keys(b).length)return a;for(var c in a){var d=a[c];if(d.sidx){var e=d.sidx.byterange;e=d.sidx.uri+"-"+(e.offset+"-"+(e.offset+e.length-1));
e=b[e]&&b[e].sidx;d.sidx&&e&&yi(d,e,d.sidx.resolvedUri)}}return a},ei=function(a,b){void 0===b&&(b={});var c;a=a.reduce(function(a,d){var e=d.attributes.role&&d.attributes.role.value||"",f=d.attributes.lang||"",g="main";f&&(g=""+d.attributes.lang+(e?" ("+e+")":""));if(a[g]&&a[g].playlists[0].attributes.BANDWIDTH>d.attributes.bandwidth)return a;var n,h=d.attributes,k=d.segments,w=d.sidx;k={attributes:(n={NAME:h.id,BANDWIDTH:h.bandwidth,CODECS:h.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===
(h.type||"static"),timeline:h.periodIndex,resolvedUri:"",targetDuration:h.duration,segments:k,mediaSequence:k.length?k[0].number:1};h.contentProtection&&(k.contentProtection=h.contentProtection);w&&(k.sidx=w);a[g]={language:f,autoselect:!0,"default":"main"===e,playlists:ch([k],b),uri:""};"undefined"===typeof c&&"main"===e&&(c=d,c["default"]=!0);return a},{});if(!c){var d=Object.keys(a)[0];a[d]["default"]=!0}return a},fi=function(a,b){void 0===b&&(b={});return a.reduce(function(a,c){var d=c.attributes.lang||
"text";if(a[d])return a;var e;var f=c.attributes;c=c.segments;"undefined"===typeof c&&(c=[{uri:f.baseUrl,timeline:f.periodIndex,resolvedUri:f.baseUrl||"",duration:f.sourceDuration,number:0}],f.duration=f.sourceDuration);f={attributes:(e={NAME:f.id,BANDWIDTH:f.bandwidth},e["PROGRAM-ID"]=1,e),uri:"",endList:"static"===(f.type||"static"),timeline:f.periodIndex,resolvedUri:f.baseUrl||"",targetDuration:f.duration,segments:c,mediaSequence:c.length?c[0].number:1};a[d]={language:d,"default":!1,autoselect:!1,
playlists:ch([f],b),uri:""};return a},{})},gi=function(a){var b,c=a.attributes,d=a.segments;a=a.sidx;d={attributes:(b={NAME:c.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:c.width,height:c.height},CODECS:c.codecs,BANDWIDTH:c.bandwidth},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===(c.type||"static"),timeline:c.periodIndex,resolvedUri:"",targetDuration:c.duration,segments:d,mediaSequence:d.length?d[0].number:1};c.contentProtection&&(d.contentProtection=c.contentProtection);a&&(d.sidx=a);return d},
Ij=function(a,b){var c;void 0===b&&(b={});if(!a.length)return{};var d=a[0].attributes,e=d.sourceDuration;d=d.minimumUpdatePeriod;var f=void 0===d?0:d,g=Ye(a.filter(function(a){a=a.attributes;return"video/mp4"===a.mimeType||"video"===a.contentType})).map(gi);d=Ye(a.filter(function(a){a=a.attributes;return"audio/mp4"===a.mimeType||"audio"===a.contentType}));a=a.filter(function(a){a=a.attributes;return"text/vtt"===a.mimeType||"text"===a.contentType});e={allowCache:!0,discontinuityStarts:[],segments:[],
endList:!0,mediaGroups:(c={AUDIO:{},VIDEO:{}},c["CLOSED-CAPTIONS"]={},c.SUBTITLES={},c),uri:"",duration:e,playlists:ch(g,b),minimumUpdatePeriod:1E3*f};d.length&&(e.mediaGroups.AUDIO.audio=ei(d,b));a.length&&(e.mediaGroups.SUBTITLES.subs=fi(a,b));return e},xd=function(a,b){var c=a.type;c=void 0===c?"static":c;var d=a.minimumUpdatePeriod;d=void 0===d?0:d;var e=a.media;e=void 0===e?"":e;var f=a.sourceDuration,g=a.timescale;g=void 0===g?1:g;var n=a.startNumber;n=void 0===n?1:n;for(var h=a.periodIndex,
k=[],w=-1,l=0;l<b.length;l++){var m=b[l],t=m.d,p=m.r||0;m=m.t||0;0>w&&(w=m);m&&m>w&&(w=m);if(0>p)if(p=l+1,p===b.length)if("dynamic"===c&&0<d&&0<e.indexOf("$Number$")){p=a.timescale;m=a.start;var r=a.minimumUpdatePeriod;p=Math.ceil((((a.NOW+a.clientOffset)/1E3+(void 0===r?0:r)-(a.availabilityStartTime+(void 0===m?0:m)))*(void 0===p?1:p)-w)/t)}else p=(f*g-w)/t;else p=(b[p].t-w)/t;else p+=1;p=n+k.length+p;for(m=n+k.length;m<p;)k.push({number:m,duration:t/g,time:w,timeline:h}),w+=t,m++}return k},hi=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,
Ag=function(a){return function(b,c,d,e){if("$$"===b)return"$";if("undefined"===typeof a[c])return b;b=""+a[c];if("RepresentationID"===c)return b;e=d?parseInt(e,10):1;return b.length>=e?b:""+Array(e-b.length+1).join("0")+b}},cj=function(a,b){return a.duration||b?a.duration?Rh(a):xd(a,b):[{number:a.startNumber||1,duration:a.sourceDuration,time:0,timeline:a.periodIndex}]},dj=function(a,b){var c={RepresentationID:a.id,Bandwidth:a.bandwidth||0},d=a.initialization;d=void 0===d?{sourceURL:"",range:""}:d;
var e=ue({baseUrl:a.baseUrl,source:d.sourceURL.replace(hi,Ag(c)),range:d.range});return cj(a,b).map(function(b){c.Number=b.number;c.Time=b.time;var d=(a.media||"").replace(hi,Ag(c));return{uri:d,timeline:b.timeline,duration:b.duration,resolvedUri:Ef(a.baseUrl||"",d),map:e,number:b.number}})},ej=function(a,b){var c=a.duration,d=a.segmentUrls;d=void 0===d?[]:d;if(!c&&!b||c&&b)throw Error("SEGMENT_TIME_UNSPECIFIED");var e=d.map(function(b){var c=a.baseUrl,d=a.initialization;d=void 0===d?{}:d;d=ue({baseUrl:c,
source:d.sourceURL,range:d.range});b=ue({baseUrl:c,source:b.media,range:b.mediaRange});b.map=d;return b}),f;c&&(f=Rh(a));b&&(f=xd(a,b));return f.map(function(a,b){if(e[b])return b=e[b],b.timeline=a.timeline,b.duration=a.duration,b.number=a.number,b}).filter(function(a){return a})},fj=function(a){var b=a.attributes;a=a.segmentInfo;if(a.template){var c=dj;var d=Rb(b,a.template)}else a.base?(c=di,d=Rb(b,a.base)):a.list&&(c=ej,d=Rb(b,a.list));b={attributes:b};if(!c)return b;c=c(d,a.timeline);if(d.duration){var e=
d,f=e.timescale;d.duration=e.duration/(void 0===f?1:f)}else d.duration=c.length?c.reduce(function(a,b){return Math.max(a,Math.ceil(b.duration))},0):0;b.attributes=d;b.segments=c;a.base&&d.indexRange&&(b.sidx=c[0],b.segments=[]);return b},Sb=function(a,b){return Xe(a.childNodes).filter(function(a){return a.tagName===b})},Rf=function(a){a=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(a);if(!a)return 0;a=a.slice(1);var b=a[1],c=a[2],d=a[3],e=a[4],f=a[5];return 31536E3*
parseFloat(a[0]||0)+2592E3*parseFloat(b||0)+86400*parseFloat(c||0)+3600*parseFloat(d||0)+60*parseFloat(e||0)+parseFloat(f||0)},rg={mediaPresentationDuration:function(a){return Rf(a)},availabilityStartTime:function(a){/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a)&&(a+="Z");return Date.parse(a)/1E3},minimumUpdatePeriod:function(a){return Rf(a)},timeShiftBufferDepth:function(a){return Rf(a)},start:function(a){return Rf(a)},width:function(a){return parseInt(a,10)},height:function(a){return parseInt(a,10)},
bandwidth:function(a){return parseInt(a,10)},startNumber:function(a){return parseInt(a,10)},timescale:function(a){return parseInt(a,10)},duration:function(a){var b=parseInt(a,10);return isNaN(b)?Rf(a):b},d:function(a){return parseInt(a,10)},t:function(a){return parseInt(a,10)},r:function(a){return parseInt(a,10)},DEFAULT:function(a){return a}},Fb=function(a){return a&&a.attributes?Xe(a.attributes).reduce(function(a,b){a[b.name]=(rg[b.name]||rg.DEFAULT)(b.value);return a},{}):{}},Rg={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey",
"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},nh=function(a,b){return b.length?wd(a.map(function(a){return b.map(function(b){return Ef(a,b.textContent.trim())})})):a},ph=function(a){var b=Sb(a,"SegmentTemplate")[0],c=Sb(a,"SegmentList")[0],d=c&&Sb(c,"SegmentURL").map(function(a){return Rb({tag:"SegmentURL"},Fb(a))});a=Sb(a,"SegmentBase")[0];
var e=c||b;e=e&&Sb(e,"SegmentTimeline")[0];var f=c||a||b;f=f&&Sb(f,"Initialization")[0];(b=b&&Fb(b))&&f?b.initialization=f&&Fb(f):b&&b.initialization&&(b.initialization={sourceURL:b.initialization});var g={template:b,timeline:e&&Sb(e,"S").map(function(a){return Fb(a)}),list:c&&Rb(Fb(c),{segmentUrls:d,initialization:Fb(f)}),base:a&&Rb(Fb(a),{initialization:Fb(f)})};Object.keys(g).forEach(function(a){g[a]||delete g[a]});return g},oh=function(a,b,c){return function(d){var e=Sb(d,"BaseURL");e=nh(b,e);
var f=Rb(a,Fb(d)),g=ph(d);return e.map(function(a){return{segmentInfo:Rb(c,g),attributes:Rb(f,{baseUrl:a})}})}},$i=function(a){return a.reduce(function(a,b){var c=Fb(b),d=Rg[c.schemeIdUri];if(d&&(a[d]={attributes:c},b=Sb(b,"cenc:pssh")[0])){if(c=b=b.textContent.trim()){b=h.atob(b);c=new Uint8Array(b.length);for(var e=0;e<b.length;e++)c[e]=b.charCodeAt(e)}a[d].pssh=c}return a},{})},ii=function(a,b,c){return function(d){var e=Fb(d),f=nh(b,Sb(d,"BaseURL")),g=Sb(d,"Role")[0];g={role:Fb(g)};e=Rb(a,e,g);
g=$i(Sb(d,"ContentProtection"));Object.keys(g).length&&(e=Rb(e,{contentProtection:g}));g=ph(d);d=Sb(d,"Representation");g=Rb(c,g);return wd(d.map(oh(e,f,g)))}},zi=function(a,b){return function(c,d){var e=nh(b,Sb(c,"BaseURL")),f=Fb(c);f=parseInt(f.id,10);d=h.isNaN(f)?d:f;d=Rb(a,{periodIndex:d});f=Sb(c,"AdaptationSet");c=ph(c);return wd(f.map(ii(d,e,c)))}},Sh=function(a){if(""===a)throw Error("DASH_EMPTY_MANIFEST");a=(a=(new h.DOMParser).parseFromString(a,"application/xml"))&&"MPD"===a.documentElement.tagName?
a.documentElement:null;if(!a||a&&0<a.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");return a},gj=function(a){a=Sb(a,"UTCTiming")[0];if(!a)return null;a=Fb(a);switch(a.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":a.method="HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":a.method="GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":a.method=
"DIRECT";a.value=Date.parse(a.value);break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");}return a},hj=function(a,b){void 0===b&&(b={});a=Sh(a);var c=b;void 0===c&&(c={});var d=c;c=d.manifestUri;c=void 0===c?"":c;var e=d.NOW;e=void 0===e?Date.now():e;d=d.clientOffset;d=void 0===d?0:d;var f=Sb(a,"Period");if(!f.length)throw Error("INVALID_NUMBER_OF_PERIOD");var g=Fb(a);a=nh([c],Sb(a,"BaseURL"));g.sourceDuration=g.mediaPresentationDuration||0;g.NOW=e;g.clientOffset=d;a=wd(f.map(zi(g,a)));return Ij(a.map(fj),
b.sidxMapping)};var ge=function(a,b){var c=[],d;if(!b.length)return null;for(d=0;d<a.byteLength;){var e=(a[d]<<24|a[d+1]<<16|a[d+2]<<8|a[d+3])>>>0;var f=Gi(a.subarray(d+4,d+8));e=1<e?d+e:a.byteLength;f===b[0]&&(1===b.length?c.push(a.subarray(d+8,e)):(d=ge(a.subarray(d+8,e),b.slice(1)),d.length&&(c=c.concat(d))));d=e}return c};var Gi=function(a){var b=""+String.fromCharCode(a[0]);b+=String.fromCharCode(a[1]);b+=String.fromCharCode(a[2]);return b+=String.fromCharCode(a[3])};var De={findBox:ge,parseType:Gi,
timescale:function(a){return ge(a,["moov","trak"]).reduce(function(a,b){var c=ge(b,["tkhd"])[0];if(!c)return null;var d=c[0];d=0===d?12:20;c=(c[d]<<24|c[d+1]<<16|c[d+2]<<8|c[d+3])>>>0;b=ge(b,["mdia","mdhd"])[0];if(!b)return null;d=b[0];d=0===d?12:20;a[c]=(b[d]<<24|b[d+1]<<16|b[d+2]<<8|b[d+3])>>>0;return a},{})},startTime:function(a,b){b=ge(b,["moof","traf"]);b=[].concat.apply([],b.map(function(b){return ge(b,["tfhd"]).map(function(c){c=a[(c[4]<<24|c[5]<<16|c[6]<<8|c[7])>>>0]||9E4;var d=(d=ge(b,["tfdt"]).map(function(a){var b=
a[0];var c=(a[4]<<24|a[5]<<16|a[6]<<8|a[7])>>>0;1===b&&(c*=Math.pow(2,32),c+=(a[8]<<24|a[9]<<16|a[10]<<8|a[11])>>>0);return c})[0])||Infinity;return d/c})}));b=Math.min.apply(null,b);return isFinite(b)?b:0},videoTrackIds:function(a){var b=[];ge(a,["moov","trak"]).forEach(function(a){var c=ge(a,["mdia","hdlr"]),d=ge(a,["tkhd"]);c.forEach(function(a,c){a=Gi(a.subarray(8,12));c=d[c];"vide"===a&&(c=new DataView(c.buffer,c.byteOffset,c.byteLength),a=c.getUint8(0),c=0===a?c.getUint32(12):c.getUint32(20),
b.push(c))})});return b}},ji=De.parseType,Cd=function(a){return new Date(1E3*a-20828448E5)},Hi=function(a){return{isLeading:(a[0]&12)>>>2,dependsOn:a[0]&3,isDependedOn:(a[1]&192)>>>6,hasRedundancy:(a[1]&48)>>>4,paddingValue:(a[1]&14)>>>1,isNonSyncSample:a[1]&1,degradationPriority:a[2]<<8|a[3]}},Bg={avc1:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{dataReferenceIndex:b.getUint16(6),width:b.getUint16(24),height:b.getUint16(26),horizresolution:b.getUint16(28)+b.getUint16(30)/
16,vertresolution:b.getUint16(32)+b.getUint16(34)/16,frameCount:b.getUint16(40),depth:b.getUint16(74),config:Oc(a.subarray(78,a.byteLength))}},avcC:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={configurationVersion:a[0],avcProfileIndication:a[1],profileCompatibility:a[2],avcLevelIndication:a[3],lengthSizeMinusOne:a[4]&3,sps:[],pps:[]},d=a[5]&31,e;var f=6;for(e=0;e<d;e++){var g=b.getUint16(f);f+=2;c.sps.push(new Uint8Array(a.subarray(f,f+g)));f+=g}d=a[f];f++;for(e=0;e<d;e++)g=
b.getUint16(f),f+=2,c.pps.push(new Uint8Array(a.subarray(f,f+g))),f+=g;return c},btrt:function(a){a=new DataView(a.buffer,a.byteOffset,a.byteLength);return{bufferSizeDB:a.getUint32(0),maxBitrate:a.getUint32(4),avgBitrate:a.getUint32(8)}},esds:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),esId:a[6]<<8|a[7],streamPriority:a[8]&31,decoderConfig:{objectProfileIndication:a[11],streamType:a[12]>>>2&63,bufferSize:a[13]<<16|a[14]<<8|a[15],maxBitrate:a[16]<<24|a[17]<<16|a[18]<<8|a[19],
avgBitrate:a[20]<<24|a[21]<<16|a[22]<<8|a[23],decoderConfigDescriptor:{tag:a[24],length:a[25],audioObjectType:a[26]>>>3&31,samplingFrequencyIndex:(a[26]&7)<<1|a[27]>>>7&1,channelConfiguration:a[27]>>>3&15}}}},ftyp:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);b={majorBrand:ji(a.subarray(0,4)),minorVersion:b.getUint32(4),compatibleBrands:[]};for(var c=8;c<a.byteLength;)b.compatibleBrands.push(ji(a.subarray(c,c+4))),c+=4;return b},dinf:function(a){return{boxes:Oc(a)}},dref:function(a){return{version:a[0],
flags:new Uint8Array(a.subarray(1,4)),dataReferences:Oc(a.subarray(8))}},hdlr:function(a){var b={version:(new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),flags:new Uint8Array(a.subarray(1,4)),handlerType:ji(a.subarray(8,12)),name:""},c;for(c=24;c<a.byteLength&&0!==a[c];c++)b.name+=String.fromCharCode(a[c]);b.name=decodeURIComponent(escape(b.name));return b},mdat:function(a){var b=a.byteLength,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d=[],e;for(e=0;e+4<a.length;e+=f){var f=
c.getUint32(e);e+=4;if(0>=f)d.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(a[e]&31){case 1:d.push("slice_layer_without_partitioning_rbsp");break;case 5:d.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:d.push("sei_rbsp");break;case 7:d.push("seq_parameter_set_rbsp");break;case 8:d.push("pic_parameter_set_rbsp");break;case 9:d.push("access_unit_delimiter_rbsp");break;default:d.push("UNKNOWN NAL - "+a[e]&31)}}return{byteLength:b,nals:d}},mdhd:function(a){var b=new DataView(a.buffer,
a.byteOffset,a.byteLength),c=4;a={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),language:""};1===a.version?(c+=4,a.creationTime=Cd(b.getUint32(c)),c+=8,a.modificationTime=Cd(b.getUint32(c)),c+=4,a.timescale=b.getUint32(c),c+=8):(a.creationTime=Cd(b.getUint32(c)),c+=4,a.modificationTime=Cd(b.getUint32(c)),c+=4,a.timescale=b.getUint32(c),c+=4);a.duration=b.getUint32(c);b=b.getUint16(c+4);a.language+=String.fromCharCode((b>>10)+96);a.language+=String.fromCharCode(((b&992)>>5)+96);a.language+=
String.fromCharCode((b&31)+96);return a},mdia:function(a){return{boxes:Oc(a)}},mfhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sequenceNumber:a[4]<<24|a[5]<<16|a[6]<<8|a[7]}},minf:function(a){return{boxes:Oc(a)}},mp4a:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);b={dataReferenceIndex:b.getUint16(6),channelcount:b.getUint16(16),samplesize:b.getUint16(18),samplerate:b.getUint16(24)+b.getUint16(26)/65536};28<a.byteLength&&(b.streamDescriptor=Oc(a.subarray(28))[0]);
return b},moof:function(a){return{boxes:Oc(a)}},moov:function(a){return{boxes:Oc(a)}},mvex:function(a){return{boxes:Oc(a)}},mvhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,d={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};1===d.version?(c+=4,d.creationTime=Cd(b.getUint32(c)),c+=8,d.modificationTime=Cd(b.getUint32(c)),c+=4,d.timescale=b.getUint32(c),c+=8):(d.creationTime=Cd(b.getUint32(c)),c+=4,d.modificationTime=Cd(b.getUint32(c)),c+=4,d.timescale=b.getUint32(c),
c+=4);d.duration=b.getUint32(c);c+=4;d.rate=b.getUint16(c)+b.getUint16(c+2)/16;c+=4;d.volume=b.getUint8(c)+b.getUint8(c+1)/8;c=c+2+2+8;d.matrix=new Uint32Array(a.subarray(c,c+36));d.nextTrackId=b.getUint32(c+36+24);return d},pdin:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4)),rate:b.getUint32(4),initialDelay:b.getUint32(8)}},sdtp:function(a){var b={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},
c;for(c=4;c<a.byteLength;c++)b.samples.push({dependsOn:(a[c]&48)>>4,isDependedOn:(a[c]&12)>>2,hasRedundancy:a[c]&3});return b},sidx:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:b.getUint32(4),timescale:b.getUint32(8),earliestPresentationTime:b.getUint32(12),firstOffset:b.getUint32(16)},d=b.getUint16(22),e;for(e=24;d;e+=12,d--)c.references.push({referenceType:(a[e]&128)>>>7,referencedSize:b.getUint32(e)&
2147483647,subsegmentDuration:b.getUint32(e+4),startsWithSap:!!(a[e+8]&128),sapType:(a[e+8]&112)>>>4,sapDeltaTime:b.getUint32(e+8)&268435455});return c},smhd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),balance:a[4]+a[5]/256}},stbl:function(a){return{boxes:Oc(a)}},stco:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);a={version:a[0],flags:new Uint8Array(a.subarray(1,4)),chunkOffsets:[]};var c=b.getUint32(4),d;for(d=8;c;d+=4,c--)a.chunkOffsets.push(b.getUint32(d));
return a},stsc:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=b.getUint32(4);a={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleToChunks:[]};var d;for(d=8;c;d+=12,c--)a.sampleToChunks.push({firstChunk:b.getUint32(d),samplesPerChunk:b.getUint32(d+4),sampleDescriptionIndex:b.getUint32(d+8)});return a},stsd:function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleDescriptions:Oc(a.subarray(8))}},stsz:function(a){var b=new DataView(a.buffer,a.byteOffset,
a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),sampleSize:b.getUint32(4),entries:[]},d;for(d=12;d<a.byteLength;d+=4)c.entries.push(b.getUint32(d));return c},stts:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);a={version:a[0],flags:new Uint8Array(a.subarray(1,4)),timeToSamples:[]};var c=b.getUint32(4),d;for(d=8;c;d+=8,c--)a.timeToSamples.push({sampleCount:b.getUint32(d),sampleDelta:b.getUint32(d+4)});return a},styp:function(a){return Bg.ftyp(a)},tfdt:function(a){var b=
{version:a[0],flags:new Uint8Array(a.subarray(1,4)),baseMediaDecodeTime:a[4]<<24|a[5]<<16|a[6]<<8|a[7]};1===b.version&&(b.baseMediaDecodeTime*=Math.pow(2,32),b.baseMediaDecodeTime+=a[8]<<24|a[9]<<16|a[10]<<8|a[11]);return b},tfhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);a={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:b.getUint32(4)};var c=a.flags[2]&1,d=a.flags[2]&2,e=a.flags[2]&8,f=a.flags[2]&16,g=a.flags[2]&32,n=a.flags[0]&65536,h=a.flags[0]&131072;var k=
8;c&&(k+=4,a.baseDataOffset=b.getUint32(12),k+=4);d&&(a.sampleDescriptionIndex=b.getUint32(k),k+=4);e&&(a.defaultSampleDuration=b.getUint32(k),k+=4);f&&(a.defaultSampleSize=b.getUint32(k),k+=4);g&&(a.defaultSampleFlags=b.getUint32(k));n&&(a.durationIsEmpty=!0);!c&&h&&(a.baseDataOffsetIsMoof=!0);return a},tkhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c=4,d={version:b.getUint8(0),flags:new Uint8Array(a.subarray(1,4))};1===d.version?(c+=4,d.creationTime=Cd(b.getUint32(c)),c+=
8,d.modificationTime=Cd(b.getUint32(c)),c+=4,d.trackId=b.getUint32(c),c=c+4+8):(d.creationTime=Cd(b.getUint32(c)),c+=4,d.modificationTime=Cd(b.getUint32(c)),c+=4,d.trackId=b.getUint32(c),c=c+4+4);d.duration=b.getUint32(c);c=c+4+8;d.layer=b.getUint16(c);c+=2;d.alternateGroup=b.getUint16(c);c+=2;d.volume=b.getUint8(c)+b.getUint8(c+1)/8;c=c+2+2;d.matrix=new Uint32Array(a.subarray(c,c+36));c+=36;d.width=b.getUint16(c)+b.getUint16(c+2)/16;c+=4;d.height=b.getUint16(c)+b.getUint16(c+2)/16;return d},traf:function(a){return{boxes:Oc(a)}},
trak:function(a){return{boxes:Oc(a)}},trex:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:b.getUint32(4),defaultSampleDescriptionIndex:b.getUint32(8),defaultSampleDuration:b.getUint32(12),defaultSampleSize:b.getUint32(16),sampleDependsOn:a[20]&3,sampleIsDependedOn:(a[21]&192)>>6,sampleHasRedundancy:(a[21]&48)>>4,samplePaddingValue:(a[21]&14)>>1,sampleIsDifferenceSample:!!(a[21]&1),sampleDegradationPriority:b.getUint16(22)}},
trun:function(a){var b={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},c=new DataView(a.buffer,a.byteOffset,a.byteLength),d=b.flags[2]&1,e=b.flags[2]&4,f=b.flags[1]&1,g=b.flags[1]&2,n=b.flags[1]&4,h=b.flags[1]&8,k=c.getUint32(4),w=8;d&&(b.dataOffset=c.getInt32(w),w+=4);e&&k&&(d={flags:Hi(a.subarray(w,w+4))},w+=4,f&&(d.duration=c.getUint32(w),w+=4),g&&(d.size=c.getUint32(w),w+=4),h&&(d.compositionTimeOffset=c.getUint32(w),w+=4),b.samples.push(d),k--);for(;k--;)d={},f&&(d.duration=c.getUint32(w),
w+=4),g&&(d.size=c.getUint32(w),w+=4),n&&(d.flags=Hi(a.subarray(w,w+4)),w+=4),h&&(d.compositionTimeOffset=c.getUint32(w),w+=4),b.samples.push(d);return b},"url ":function(a){return{version:a[0],flags:new Uint8Array(a.subarray(1,4))}},vmhd:function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength);return{version:a[0],flags:new Uint8Array(a.subarray(1,4)),graphicsmode:b.getUint16(4),opcolor:new Uint16Array([b.getUint16(6),b.getUint16(8),b.getUint16(10)])}}};var Oc=function(a){var b=0,c=[],d;
var e=new ArrayBuffer(a.length);var f=new Uint8Array(e);for(d=0;d<a.length;++d)f[d]=a[d];for(e=new DataView(e);b<a.byteLength;){f=e.getUint32(b);d=ji(a.subarray(b+4,b+8));var g=1<f?b+f:a.byteLength;b=(Bg[d]||function(a){return{data:a}})(a.subarray(b+8,g));b.size=f;b.type=d;c.push(b);b=g}return c};var aj=function(a,b){b=b||0;var c=Array(2*b+1).join(" ");return a.map(function(a,d){return c+a.type+"\n"+Object.keys(a).filter(function(a){return"type"!==a&&"boxes"!==a}).map(function(b){var d=c+"  "+b+": ";
b=a[b];return b instanceof Uint8Array||b instanceof Uint32Array?(b=Array.prototype.slice.call(new Uint8Array(b.buffer,b.byteOffset,b.byteLength)).map(function(a){return" "+("00"+a.toString(16)).slice(-2)}).join("").match(/.{1,24}/g))?1===b.length?d+"<"+b.join("").slice(1)+">":d+"<\n"+b.map(function(a){return c+"  "+a}).join("\n")+"\n"+c+"  >":d+"<>":d+JSON.stringify(b,null,2).split("\n").map(function(a,b){return 0===b?a:c+"  "+a}).join("\n")}).join("\n")+(a.boxes?"\n"+aj(a.boxes,b+1):"")}).join("\n")};
var Wh={inspect:Oc,textify:aj,parseTfdt:Bg.tfdt,parseHdlr:Bg.hdlr,parseTfhd:Bg.tfhd,parseTrun:Bg.trun,parseSidx:Bg.sidx},Bi=Math.pow(2,32)-1,bj,Ii,Ga,Ji,ij,Ch,Yh,Ci,Di,df,Ki,Dh,ki,zb,Ei,Pf;(function(){var a;Ga={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==
typeof Uint8Array){for(a in Ga)Ga.hasOwnProperty(a)&&(Ga[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);Ji=new Uint8Array([105,115,111,109]);Ch=new Uint8Array([97,118,99,49]);ij=new Uint8Array([0,0,0,1]);Yh=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);Ci=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Di={video:Yh,audio:Ci};Dh=
new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);Ki=new Uint8Array([0,0,0,0,0,0,0,0]);zb=ki=new Uint8Array([0,0,0,0,0,0,0,0]);Ei=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);Pf=ki;df=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var Ia=function(a){var b=[],c=0,d;for(d=1;d<arguments.length;d++)b.push(arguments[d]);for(d=b.length;d--;)c+=b[d].byteLength;var e=new Uint8Array(c+8);(new DataView(e.buffer,e.byteOffset,e.byteLength)).setUint32(0,e.byteLength);e.set(a,4);d=0;for(c=8;d<b.length;d++)e.set(b[d],
c),c+=b[d].byteLength;return e};var jj=function(){return Ia(Ga.dinf,Ia(Ga.dref,Dh))};var Jj=function(a){return Ia(Ga.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))};var kj=function(){return Ia(Ga.ftyp,Ji,ij,Ji,Ch)};var Li=function(a){return Ia(Ga.hdlr,Di[a])};var Mi=function(a){var b=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>
16&255,a.duration>>>8&255,a.duration&255,85,196,0,0]);a.samplerate&&(b[12]=a.samplerate>>>24&255,b[13]=a.samplerate>>>16&255,b[14]=a.samplerate>>>8&255,b[15]=a.samplerate&255);return Ia(Ga.mdhd,b)};var lj=function(a){return Ia(Ga.mdia,Mi(a),Li(a.type),ai(a))};var mj=function(a){return Ia(Ga.mfhd,new Uint8Array([0,0,0,0,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]))};var ai=function(a){return Ia(Ga.minf,"video"===a.type?Ia(Ga.vmhd,df):Ia(Ga.smhd,Ki),jj(),Lj(a))};var li=function(a){for(var b=
a.length,c=[];b--;)c[b]=si(a[b]);return Ia.apply(null,[Ga.moov,Gj(4294967295)].concat(c).concat(Kj(a)))};var Kj=function(a){for(var b=a.length,c=[];b--;)c[b]=ol(a[b]);return Ia.apply(null,[Ga.mvex].concat(c))};var Gj=function(a){a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,
255]);return Ia(Ga.mvhd,a)};var nj=function(a){a=a.samples||[];var b=new Uint8Array(4+a.length),c;for(c=0;c<a.length;c++){var d=a[c].flags;b[c+4]=d.dependsOn<<4|d.isDependedOn<<2|d.hasRedundancy}return Ia(Ga.sdtp,b)};var Lj=function(a){return Ia(Ga.stbl,bj(a),Ia(Ga.stts,Pf),Ia(Ga.stsc,zb),Ia(Ga.stsz,Ei),Ia(Ga.stco,ki))};(function(){bj=function(c){return Ia(Ga.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===c.type?a(c):b(c))};var a=function(a){var b=a.sps||[],c=a.pps||[],d=[],e=[],f;for(f=0;f<b.length;f++)d.push((b[f].byteLength&
65280)>>>8),d.push(b[f].byteLength&255),d=d.concat(Array.prototype.slice.call(b[f]));for(f=0;f<c.length;f++)e.push((c[f].byteLength&65280)>>>8),e.push(c[f].byteLength&255),e=e.concat(Array.prototype.slice.call(c[f]));return Ia(Ga.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(a.width&65280)>>8,a.width&255,(a.height&65280)>>8,a.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),
Ia(Ga.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([b.length]).concat(d).concat([c.length]).concat(e))),Ia(Ga.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};var b=function(a){return Ia(Ga.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(a.channelcount&65280)>>8,a.channelcount&255,(a.samplesize&65280)>>8,a.samplesize&255,0,0,0,0,(a.samplerate&65280)>>8,a.samplerate&255,0,0]),Jj(a))}})();var O=function(a){a=new Uint8Array([0,0,0,7,0,0,0,0,
0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,0,(a.duration&4278190080)>>24,(a.duration&16711680)>>16,(a.duration&65280)>>8,a.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(a.width&65280)>>8,a.width&255,0,0,(a.height&65280)>>8,a.height&255,0,0]);return Ia(Ga.tkhd,a)};var jc=function(a){var b=Ia(Ga.tfhd,new Uint8Array([0,0,0,58,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,
0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var c=Math.floor(a.baseMediaDecodeTime/(Bi+1));var d=Math.floor(a.baseMediaDecodeTime%(Bi+1));c=Ia(Ga.tfdt,new Uint8Array([1,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,c&255,d>>>24&255,d>>>16&255,d>>>8&255,d&255]));if("audio"===a.type)return a=Ii(a,92),Ia(Ga.traf,b,c,a);d=nj(a);a=Ii(a,d.length+92);return Ia(Ga.traf,b,c,a,d)};var si=function(a){a.duration=a.duration||4294967295;return Ia(Ga.trak,O(a),lj(a))};var ol=function(a){var b=new Uint8Array([0,0,0,0,(a.id&4278190080)>>
24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==a.type&&(b[b.length-1]=0);return Ia(Ga.trex,b)};(function(){var a=function(a,b){var c=0,d=0,e=0,f=0;a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(d=2),void 0!==a[0].flags&&(e=4),void 0!==a[0].compositionTimeOffset&&(f=8));return[0,0,c|d|e|f,1,(a.length&4278190080)>>>24,(a.length&16711680)>>>16,(a.length&65280)>>>8,a.length&255,(b&4278190080)>>>24,(b&16711680)>>>16,(b&65280)>>>8,b&255]};var b=
function(b,c){var d;b=b.samples||[];c+=20+16*b.length;c=a(b,c);for(d=0;d<b.length;d++){var e=b[d];c=c.concat([(e.duration&4278190080)>>>24,(e.duration&16711680)>>>16,(e.duration&65280)>>>8,e.duration&255,(e.size&4278190080)>>>24,(e.size&16711680)>>>16,(e.size&65280)>>>8,e.size&255,e.flags.isLeading<<2|e.flags.dependsOn,e.flags.isDependedOn<<6|e.flags.hasRedundancy<<4|e.flags.paddingValue<<1|e.flags.isNonSyncSample,e.flags.degradationPriority&61440,e.flags.degradationPriority&15,(e.compositionTimeOffset&
4278190080)>>>24,(e.compositionTimeOffset&16711680)>>>16,(e.compositionTimeOffset&65280)>>>8,e.compositionTimeOffset&255])}return Ia(Ga.trun,new Uint8Array(c))};var c=function(b,c){var d;b=b.samples||[];c+=20+8*b.length;c=a(b,c);for(d=0;d<b.length;d++){var e=b[d];c=c.concat([(e.duration&4278190080)>>>24,(e.duration&16711680)>>>16,(e.duration&65280)>>>8,e.duration&255,(e.size&4278190080)>>>24,(e.size&16711680)>>>16,(e.size&65280)>>>8,e.size&255])}return Ia(Ga.trun,new Uint8Array(c))};Ii=function(a,
d){return"audio"===a.type?c(a,d):b(a,d)}})();var ti={ftyp:kj,mdat:function(a){return Ia(Ga.mdat,a)},moof:function(a,b){for(var c=[],d=b.length;d--;)c[d]=jc(b[d]);return Ia.apply(null,[Ga.moof,mj(a)].concat(c))},moov:li,initSegment:function(a){var b=kj();a=li(a);var c=new Uint8Array(b.byteLength+a.byteLength);c.set(b);c.set(a,b.byteLength);return c}},kc=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]);a[b]=a[b].concat(c)};this.off=function(b,c){if(!a[b])return!1;c=a[b].indexOf(c);
a[b]=a[b].slice();a[b].splice(c,1);return-1<c};this.trigger=function(b){var c,d;if(c=a[b])if(2===arguments.length){var e=c.length;for(d=0;d<e;++d)c[d].call(this,arguments[1])}else{var f=[];for(d=1;d<arguments.length;++d)f.push(arguments[d]);e=c.length;for(d=0;d<e;++d)c[d].apply(this,f)}};this.dispose=function(){a={}}}};kc.prototype.pipe=function(a){this.on("data",function(b){a.push(b)});this.on("done",function(b){a.flush(b)});return a};kc.prototype.push=function(a){this.trigger("data",a)};kc.prototype.flush=
function(a){this.trigger("done",a)};var ui={groupNalsIntoFrames:function(a){var b,c=[],d=[];for(b=c.byteLength=0;b<a.length;b++){var e=a[b];"access_unit_delimiter_rbsp"===e.nalUnitType?(c.length&&(c.duration=e.dts-c.dts,d.push(c)),c=[e],c.byteLength=e.data.byteLength,c.pts=e.pts,c.dts=e.dts):("slice_layer_without_partitioning_rbsp_idr"===e.nalUnitType&&(c.keyFrame=!0),c.duration=e.dts-c.dts,c.byteLength+=e.data.byteLength,c.push(e))}d.length&&(!c.duration||0>=c.duration)&&(c.duration=d[d.length-1].duration);
d.push(c);return d},groupFramesIntoGops:function(a){var b,c=[],d=[];c.byteLength=0;c.nalCount=0;c.duration=0;c.pts=a[0].pts;c.dts=a[0].dts;d.byteLength=0;d.nalCount=0;d.duration=0;d.pts=a[0].pts;d.dts=a[0].dts;for(b=0;b<a.length;b++){var e=a[b];e.keyFrame?(c.length&&(d.push(c),d.byteLength+=c.byteLength,d.nalCount+=c.nalCount,d.duration+=c.duration),c=[e],c.nalCount=e.length,c.byteLength=e.byteLength,c.pts=e.pts,c.dts=e.dts,c.duration=e.duration):(c.duration+=e.duration,c.nalCount+=e.length,c.byteLength+=
e.byteLength,c.push(e))}d.length&&0>=c.duration&&(c.duration=d[d.length-1].duration);d.byteLength+=c.byteLength;d.nalCount+=c.nalCount;d.duration+=c.duration;d.push(c);return d},extendFirstKeyFrame:function(a){if(!a[0][0].keyFrame&&1<a.length){var b=a.shift();a.byteLength-=b.byteLength;a.nalCount-=b.nalCount;a[0][0].dts=b.dts;a[0][0].pts=b.pts;a[0][0].duration+=b.duration}return a},generateSampleTable:function(a,b){var c,d=b||0,e=[];for(b=0;b<a.length;b++){var f=a[b];for(c=0;c<f.length;c++){var g=
f[c];var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};n.dataOffset=d;n.compositionTimeOffset=g.pts-g.dts;n.duration=g.duration;n.size=4*g.length;n.size+=g.byteLength;g.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0);g=n;d+=g.size;e.push(g)}}return e},concatenateNalData:function(a){var b,c,d,e=0,f=new Uint8Array(a.byteLength+4*a.nalCount),g=new DataView(f.buffer);for(b=0;b<a.length;b++){var n=a[b];for(c=0;c<n.length;c++){var h=
n[c];for(d=0;d<h.length;d++){var k=h[d];g.setUint32(e,k.data.byteLength);e+=4;f.set(k.data,e);e+=k.data.byteLength}}}return f}},Mg=[33,16,5,32,164,27],Aj=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],fb=function(a){for(var b=[];a--;)b.push(0);return b},pl=function(a){return Object.keys(a).reduce(function(b,c){b[c]=new Uint8Array(a[c].reduce(function(a,b){return a.concat(b)},[]));return b},{})}({96E3:[Mg,[227,64],fb(154),[56]],88200:[Mg,[231],fb(170),[56]],64E3:[Mg,[248,192],fb(240),[56]],48E3:[Mg,[255,
192],fb(268),[55,148,128],fb(54),[112]],44100:[Mg,[255,192],fb(268),[55,163,128],fb(84),[112]],32E3:[Mg,[255,192],fb(268),[55,234],fb(226),[112]],24E3:[Mg,[255,192],fb(268),[55,255,128],fb(268),[111,112],fb(126),[224]],16E3:[Mg,[255,192],fb(268),[55,255,128],fb(268),[111,255],fb(269),[223,108],fb(195),[1,192]],12E3:[Aj,fb(268),[3,127,248],fb(268),[6,255,240],fb(268),[13,255,224],fb(268),[27,253,128],fb(259),[56]],11025:[Aj,fb(268),[3,127,248],fb(268),[6,255,240],fb(268),[13,255,224],fb(268),[27,255,
192],fb(268),[55,175,128],fb(108),[112]],8E3:[Aj,fb(268),[3,121,16],fb(47),[7]]});var jk=function(a){return 9E4*a};var kk=function(a,b){return a*b};var Ti=function(a){return a/9E4};var lk=function(a,b){return a/b};var kh={secondsToVideoTs:jk,secondsToAudioTs:kk,videoTsToSeconds:Ti,audioTsToSeconds:lk,audioTsToVideoTs:function(a,b){return jk(lk(a,b))},videoTsToAudioTs:function(a,b){return kk(Ti(a),b)}},Ui={prefixWithSilence:function(a,b,c,d){var e,f=e=0;if(b.length){var g=kh.audioTsToVideoTs(a.baseMediaDecodeTime,
a.samplerate);var n=Math.ceil(9E4/(a.samplerate/1024));c&&d&&(e=g-Math.max(c,d),e=Math.floor(e/n),f=e*n);if(!(1>e||45E3<f)){n=pl[a.samplerate];n||(n=b[0].data);for(c=0;c<e;c++)b.splice(c,0,{data:n});a.baseMediaDecodeTime-=Math.floor(kh.videoTsToAudioTs(f,a.samplerate))}}},trimAdtsFramesByEarliestDts:function(a,b,c){if(b.minSegmentDts>=c)return a;b.minSegmentDts=Infinity;return a.filter(function(a){return a.dts>=c?(b.minSegmentDts=Math.min(b.minSegmentDts,a.dts),b.minSegmentPts=b.minSegmentDts,!0):
!1})},generateSampleTable:function(a){var b,c=[];for(b=0;b<a.length;b++){var d=a[b];c.push({size:d.data.byteLength,duration:1024})}return c},concatenateFrameData:function(a){var b,c=0;var d=Uint8Array;var e=0;for(b=0;b<a.length;b++){var f=a[b];e+=f.data.byteLength}f=new d(e);for(d=0;d<a.length;d++)b=a[d],f.set(b.data,c),c+=b.data.byteLength;return f}},Bf={clearDtsInfo:function(a){delete a.minSegmentDts;delete a.maxSegmentDts;delete a.minSegmentPts;delete a.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(a,
b){var c=a.minSegmentDts;b||(c-=a.timelineStartInfo.dts);b=a.timelineStartInfo.baseMediaDecodeTime;b=Math.max(0,b+c);"audio"===a.type&&(a=a.samplerate/9E4,b=Math.floor(b*a));return b},collectDtsInfo:function(a,b){"number"===typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts=void 0===a.minSegmentPts?b.pts:Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts=void 0===a.maxSegmentPts?b.pts:Math.max(a.maxSegmentPts,b.pts));"number"===typeof b.dts&&(void 0===a.timelineStartInfo.dts&&
(a.timelineStartInfo.dts=b.dts),a.minSegmentDts=void 0===a.minSegmentDts?b.dts:Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?b.dts:Math.max(a.maxSegmentDts,b.dts))}},vi={parseSei:function(a){for(var b=0,c={payloadType:-1,payloadSize:0},d=0,e=0;b<a.byteLength&&128!==a[b];){for(;255===a[b];)d+=255,b++;for(d+=a[b++];255===a[b];)e+=255,b++;e+=a[b++];if(!c.payload&&4===d){c.payloadType=d;c.payloadSize=e;c.payload=a.subarray(b,b+e);break}b+=e;e=d=0}return c},parseUserData:function(a){return 181!==
a.payload[0]||49!==(a.payload[1]<<8|a.payload[2])||"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])||3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},parseCaptionPackets:function(a,b){var c=[],d;if(!(b[0]&64))return c;var e=b[0]&31;for(d=0;d<e;d++){var f=3*d;var g={type:b[f+2]&3,pts:a};b[f+2]&4&&(g.ccData=b[f+3]<<8|b[f+4],c.push(g))}return c},discardEmulationPreventionBytes:function(a){for(var b=a.byteLength,c=[],d=1,e;d<b-2;)0===a[d]&&0===a[d+1]&&3===
a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;b-=c.length;e=new Uint8Array(b);var f=0;for(d=0;d<b;f++,d++)f===c[0]&&(f++,c.shift()),e[d]=a[f];return e},USER_DATA_REGISTERED_ITU_T_T35:4},Cf=function xl(){xl.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new Eb(0,0),new Eb(0,1),new Eb(1,0),new Eb(1,1)];this.reset();this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data"));a.on("done",this.trigger.bind(this,"done"))},this)};Cf.prototype=new kc;Cf.prototype.push=
function(a){if("sei_rbsp"===a.nalUnitType){var b=vi.parseSei(a.escapedRBSP);b.payloadType===vi.USER_DATA_REGISTERED_ITU_T_T35&&(b=vi.parseUserData(b))&&(a.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:a.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(b=vi.parseCaptionPackets(a.pts,b),this.captionPackets_=this.captionPackets_.concat(b),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts))}};Cf.prototype.flush=
function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){2>a.type&&this.dispatchCea608Packet(a)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(a){a.flush()},this)):this.ccStreams_.forEach(function(a){a.flush()},this)};Cf.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=
!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(a){a.reset()})};Cf.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};Cf.prototype.setsChannel1Active=function(a){return 4096===
(a.ccData&30720)};Cf.prototype.setsChannel2Active=function(a){return 6144===(a.ccData&30720)};Cf.prototype.setsTextOrXDSActive=function(a){return 256===(a.ccData&28928)||4138===(a.ccData&30974)||6186===(a.ccData&30974)};var ql={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,
553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Vi=function(a){if(null===a)return"";a=ql[a]||a;return String.fromCharCode(a)},
rl=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],lh=function(){for(var a=[],b=15;b--;)a.push("");return a},Eb=function Pc(a,b){Pc.prototype.init.call(this);this.field_=a||0;this.dataChannel_=b||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(a){var b=a.ccData&32639;if(b===this.lastControlCode_)this.lastControlCode_=null;else{4096===(b&61440)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=
null);var c=b>>>8;var d=b&255;b!==this.PADDING_&&(b===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":b===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),d=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=d,this.startPts_=a.pts):b===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(a.pts)):b===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(a.pts)):b===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(a.pts)):
b===this.CARRIAGE_RETURN_?(this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts):b===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):b===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(a.pts),this.displayed_=lh()):b===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=lh():b===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&
(this.flushDisplayed(a.pts),this.displayed_=lh()),this.mode_="paintOn",this.startPts_=a.pts):this.isSpecialCharacter(c,d)?(b=Vi((c&3)<<8|d),this[this.mode_](a.pts,b),this.column_++):this.isExtCharacter(c,d)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),b=Vi((c&3)<<8|d),this[this.mode_](a.pts,b),this.column_++):this.isMidRowCode(c,d)?(this.clearFormatting(a.pts),this[this.mode_](a.pts,
" "),this.column_++,14===(d&14)&&this.addFormatting(a.pts,["i"]),1===(d&1)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(c,d)?this.column_+=d&3:this.isPAC(c,d)?(c=rl.indexOf(b&7968),"rollUp"===this.mode_&&(0>c-this.rollUpRows_+1&&(c=this.rollUpRows_-1),this.setRollUp(a.pts,c)),c!==this.row_&&(this.clearFormatting(a.pts),this.row_=c),d&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16===(b&16)&&(this.column_=4*((b&14)>>1)),this.isColorPAC(d)&&14===(d&14)&&this.addFormatting(a.pts,
["i"])):this.isNormalChar(c)&&(0===d&&(d=null),b=Vi(c),b+=Vi(d),this[this.mode_](a.pts,b),this.column_+=b.length))}}};Eb.prototype=new kc;Eb.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){try{return a.trim()}catch(dh){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})};Eb.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=
0;this.displayed_=lh();this.nonDisplayed_=lh();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};Eb.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=
this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};Eb.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&48<=b&&63>=b};Eb.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=b&&63>=b};Eb.prototype.isMidRowCode=
function(a,b){return a===this.EXT_&&32<=b&&47>=b};Eb.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&33<=b&&35>=b};Eb.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&64<=b&&127>=b};Eb.prototype.isColorPAC=function(a){return 64<=a&&79>=a||96<=a&&127>=a};Eb.prototype.isNormalChar=function(a){return 32<=a&&127>=a};Eb.prototype.setRollUp=function(a,b){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=lh(),this.displayed_=
lh());if(void 0!==b&&b!==this.row_)for(a=0;a<this.rollUpRows_;a++)this.displayed_[b-a]=this.displayed_[this.row_-a],this.displayed_[this.row_-a]="";void 0===b&&(b=this.row_);this.topRow_=b-this.rollUpRows_+1};Eb.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);b=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,b)};Eb.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+
b+">"},"");this.formatting_=[];this[this.mode_](a,b)}};Eb.prototype.popOn=function(a,b){this.nonDisplayed_[this.row_]+=b};Eb.prototype.rollUp=function(a,b){this.displayed_[this.row_]+=b};Eb.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;15>a;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""};Eb.prototype.paintOn=function(a,b){this.displayed_[this.row_]+=b};var sl=
Eb,mc={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Pg=function(a,b){var c=1;for(a>b&&(c=-1);4294967296<Math.abs(b-a);)a+=8589934592*c;return a},mk=function Pc(a){var b,c;Pc.prototype.init.call(this);this.type_=a;this.push=function(a){a.type===this.type_&&(void 0===c&&(c=a.dts),a.dts=Pg(a.dts,c),a.pts=Pg(a.pts,c),b=a.dts,this.trigger("data",a))};this.flush=function(){c=b;this.trigger("done")};this.discontinuity=function(){b=c=void 0}};mk.prototype=new kc;var wi=function(a,b,c){for(var d=
"";b<c;b++)d+="%"+("00"+a[b].toString(16)).slice(-2);return d},Wi=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},nk={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(wi(a.data,1,b));a.value=decodeURIComponent(wi(a.data,b+1,a.data.length)).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(wi(a.data,1,b));a.url=decodeURIComponent(wi(a.data,
b+1,a.data.length));break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=unescape(wi(a.data,0,b));break}a.privateData=a.data.subarray(b+1);a.data=a.privateData}};var Bj=function(a){var b=!(!a||!a.debug);a=a&&a.descriptor;var c=0,d=[],e=0,f;Bj.prototype.init.call(this);this.dispatchType=mc.METADATA_STREAM_TYPE.toString(16);if(a)for(f=0;f<a.length;f++)this.dispatchType+=("00"+a[f].toString(16)).slice(-2);this.push=function(a){var f;if("timed-metadata"===a.type)if(a.dataAlignmentIndicator&&
(e=0,d.length=0),0===d.length&&(10>a.data.length||73!==a.data[0]||68!==a.data[1]||51!==a.data[2]))b&&console.log("Skipping unrecognized metadata packet");else if(d.push(a),e+=a.data.byteLength,1===d.length&&(c=Wi(a.data.subarray(6,10)),c+=10),!(e<c)){a={data:new Uint8Array(c),frames:[],pts:d[0].pts,dts:d[0].dts};for(f=0;f<c;)a.data.set(d[0].data.subarray(0,c-f),f),f+=d[0].data.byteLength,e-=d[0].data.byteLength,d.shift();f=10;a.data[5]&64&&(f=f+4+Wi(a.data.subarray(10,14)),c-=Wi(a.data.subarray(16,
20)));do{var g=Wi(a.data.subarray(f+4,f+8));if(1>g)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");var n=String.fromCharCode(a.data[f],a.data[f+1],a.data[f+2],a.data[f+3]);n={id:n,data:a.data.subarray(f+10,f+g+10)};n.key=n.id;if(nk[n.id]&&(nk[n.id](n),"com.apple.streaming.transportStreamTimestamp"===n.owner)){var h=n.data,k=(h[3]&1)<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;k*=4;k+=h[7]&3;n.timeStamp=k;void 0===a.pts&&void 0===a.dts&&(a.pts=n.timeStamp,a.dts=n.timeStamp);
this.trigger("timestamp",n)}a.frames.push(n);f+=10;f+=g}while(f<c);this.trigger("data",a)}}};Bj.prototype=new kc;var Cj=function(){var a=new Uint8Array(188),b=0;Cj.prototype.init.call(this);this.push=function(c){var d=0,e=188;if(b){var f=new Uint8Array(c.byteLength+b);f.set(a.subarray(0,b));f.set(c,b);b=0}else f=c;for(;e<f.byteLength;)71===f[d]&&71===f[e]?(this.trigger("data",f.subarray(d,e)),d+=188,e+=188):(d++,e++);d<f.byteLength&&(a.set(f.subarray(d),0),b=f.byteLength-d)};this.flush=function(){188===
b&&71===a[0]&&(this.trigger("data",a),b=0);this.trigger("done")}};Cj.prototype=new kc;var Xi=function(){Xi.prototype.init.call(this);var a=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var b=function(a,b){var e=0;b.payloadUnitStartIndicator&&(e+=a[e]+1);"pat"===b.type?c(a.subarray(e),b):d(a.subarray(e),b)};var c=function(b,c){c.section_number=b[7];c.last_section_number=b[8];a.pmtPid=(b[10]&31)<<8|b[11];c.pmtPid=a.pmtPid};var d=function(b,c){var d;if(b[5]&1){a.programMapTable={video:null,
audio:null,"timed-metadata":{}};var e=3+((b[1]&15)<<8|b[2])-4;for(d=12+((b[10]&15)<<8|b[11]);d<e;){var f=b[d],g=(b[d+1]&31)<<8|b[d+2];f===mc.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=g:f===mc.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?a.programMapTable.audio=g:f===mc.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][g]=f);d+=((b[d+3]&15)<<8|b[d+4])+5}c.programMapTable=a.programMapTable}};this.push=function(a){var c={},d=4;c.payloadUnitStartIndicator=!!(a[1]&
64);c.pid=a[1]&31;c.pid<<=8;c.pid|=a[2];1<(a[3]&48)>>>4&&(d+=a[d]+1);if(0===c.pid)c.type="pat",b(a.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",b(a.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,d,c]):this.processPes_(a,d,c)};this.processPes_=function(a,b,c){c.streamType=c.pid===this.programMapTable.video?
mc.H264_STREAM_TYPE:c.pid===this.programMapTable.audio?mc.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][c.pid];c.type="pes";c.data=a.subarray(b);this.trigger("data",c)}};Xi.prototype=new kc;Xi.STREAM_TYPES={h264:27,adts:15};var Dj=function(){var a=this,b={data:[],size:0},c={data:[],size:0},d={data:[],size:0},e=function(b,c,d){var e=new Uint8Array(b.size),f={type:c},g,n=0;if(b.data.length&&!(9>b.size)){f.trackId=b.data[0].pid;for(g=0;g<b.data.length;g++){var h=b.data[g];e.set(h.data,n);n+=
h.data.byteLength}f.packetLength=6+(e[4]<<8|e[5]);f.dataAlignmentIndicator=0!==(e[6]&4);g=e[7];g&192&&(f.pts=(e[9]&14)<<27|(e[10]&255)<<20|(e[11]&254)<<12|(e[12]&255)<<5|(e[13]&254)>>>3,f.pts*=4,f.pts+=(e[13]&6)>>>1,f.dts=f.pts,g&64&&(f.dts=(e[14]&14)<<27|(e[15]&255)<<20|(e[16]&254)<<12|(e[17]&255)<<5|(e[18]&254)>>>3,f.dts*=4,f.dts+=(e[18]&6)>>>1));f.data=e.subarray(9+e[8]);c="video"===c||f.packetLength<=b.size;if(d||c)b.size=0,b.data.length=0;c&&a.trigger("data",f)}};Dj.prototype.init.call(this);
this.push=function(f){({pat:function(){},pes:function(){switch(f.streamType){case mc.H264_STREAM_TYPE:case mc.H264_STREAM_TYPE:var a=b;var g="video";break;case mc.ADTS_STREAM_TYPE:a=c;g="audio";break;case mc.METADATA_STREAM_TYPE:a=d;g="timed-metadata";break;default:return}f.payloadUnitStartIndicator&&e(a,g,!0);a.data.push(f);a.size+=f.data.byteLength},pmt:function(){var b={type:"metadata",tracks:[]},c=f.programMapTable;null!==c.video&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.video,
codec:"avc",type:"video"});null!==c.audio&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.audio,codec:"adts",type:"audio"});a.trigger("data",b)}})[f.type]()};this.flush=function(){e(b,"video");e(c,"audio");e(d,"timed-metadata");this.trigger("done")}};Dj.prototype=new kc;var ve={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Cj,TransportParseStream:Xi,ElementaryStream:Dj,TimestampRolloverStream:mk,CaptionStream:Cf,Cea608Stream:sl,MetadataStream:Bj},Yi;for(Yi in mc)mc.hasOwnProperty(Yi)&&
(ve[Yi]=mc[Yi]);var ok=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var Zi=function(){var a;Zi.prototype.init.call(this);this.push=function(b){var c=0,d=0;if("audio"===b.type){if(a){var e=a;a=new Uint8Array(e.byteLength+b.data.byteLength);a.set(e);a.set(b.data,e.byteLength)}else a=b.data;for(;c+5<a.length;)if(255!==a[c]||240!==(a[c+1]&246))c++;else{e=2*(~a[c+1]&1);var f=(a[c+3]&3)<<11|a[c+4]<<3|(a[c+5]&224)>>5;var g=1024*((a[c+6]&3)+1);var n=9E4*g/ok[(a[c+2]&60)>>>2];f=c+
f;if(a.byteLength<f)break;this.trigger("data",{pts:b.pts+d*n,dts:b.dts+d*n,sampleCount:g,audioobjecttype:(a[c+2]>>>6&3)+1,channelcount:(a[c+2]&1)<<2|(a[c+3]&192)>>>6,samplerate:ok[(a[c+2]&60)>>>2],samplingfrequencyindex:(a[c+2]&60)>>>2,samplesize:16,data:a.subarray(c+7+e,f)});if(a.byteLength===f){a=void 0;break}d++;a=a.subarray(f)}}};this.flush=function(){this.trigger("done")}};Zi.prototype=new kc;var tl=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b};this.bitsAvailable=
function(){return 8*b+d};this.loadWord=function(){var e=a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw Error("no bytes available");f.set(a.subarray(e,e+g));c=(new DataView(f.buffer)).getUint32(0);d=8*g;b-=g};this.skipBits=function(a){if(!(d>a)){a-=d;var e=Math.floor(a/8);a-=8*e;b-=e;this.loadWord()}c<<=a;d-=a};this.readBits=function(a){var e=Math.min(d,a),f=c>>>32-e;d-=e;0<d?c<<=e:0<b&&this.loadWord();e=a-e;return 0<e?f<<e|this.readBits(e):f};this.skipLeadingZeros=function(){var a;
for(a=0;a<d;++a)if(0!==(c&2147483648>>>a))return c<<=a,d-=a,a;this.loadWord();return a+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};
this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var Ej=function(){var a=0,b,c;Ej.prototype.init.call(this);this.push=function(d){if(c){var e=new Uint8Array(c.byteLength+d.data.byteLength);e.set(c);e.set(d.data,c.byteLength);c=e}else c=d.data;for(;a<c.byteLength-3;a++)if(1===c[a+2]){b=a+5;break}for(;b<c.byteLength;)switch(c[b]){case 0:if(0!==c[b-1]){b+=2;break}else if(0!==c[b-2]){b++;break}a+3!==b-2&&this.trigger("data",c.subarray(a+3,b-2));do b++;while(1!==c[b]&&b<c.length);
a=b-2;b+=3;break;case 1:if(0!==c[b-1]||0!==c[b-2]){b+=3;break}this.trigger("data",c.subarray(a+3,b-2));a=b-2;b+=3;break;default:b+=3}c=c.subarray(a);b-=a;a=0};this.flush=function(){c&&3<c.byteLength&&this.trigger("data",c.subarray(a+3));c=null;a=0;this.trigger("done")}};Ej.prototype=new kc;var ul={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var Fj=function(){var a=new Ej,b,c,d;Fj.prototype.init.call(this);var e=this;this.push=function(e){"video"===e.type&&(b=
e.trackId,c=e.pts,d=e.dts,a.push(e))};a.on("data",function(a){var f={trackId:b,pts:c,dts:d,data:a};switch(a[0]&31){case 5:f.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:f.nalUnitType="sei_rbsp";f.escapedRBSP=g(a.subarray(1));break;case 7:f.nalUnitType="seq_parameter_set_rbsp";f.escapedRBSP=g(a.subarray(1));f.config=n(f.escapedRBSP);break;case 8:f.nalUnitType="pic_parameter_set_rbsp";break;case 9:f.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",f)});a.on("done",function(){e.trigger("done")});
this.flush=function(){a.flush()};var f=function(a,b){var c=8,d=8,e;for(e=0;e<a;e++)0!==d&&(d=b.readExpGolomb(),d=(c+d+256)%256),c=0===d?c:d};var g=function(a){for(var b=a.byteLength,c=[],d=1,e;d<b-2;)0===a[d]&&0===a[d+1]&&3===a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;b-=c.length;e=new Uint8Array(b);var f=0;for(d=0;d<b;f++,d++)f===c[0]&&(f++,c.shift()),e[d]=a[f];return e};var n=function(a){var b=0,c=0,d=0,e=0,g=1;a=new tl(a);var n=a.readUnsignedByte();var h=a.readUnsignedByte();var k=
a.readUnsignedByte();a.skipUnsignedExpGolomb();if(ul[n]){var w=a.readUnsignedExpGolomb();3===w&&a.skipBits(1);a.skipUnsignedExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);if(a.readBoolean()){var l=3!==w?8:12;for(w=0;w<l;w++)a.readBoolean()&&(6>w?f(16,a):f(64,a))}}a.skipUnsignedExpGolomb();w=a.readUnsignedExpGolomb();if(0===w)a.readUnsignedExpGolomb();else if(1===w)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),l=a.readUnsignedExpGolomb(),w=0;w<l;w++)a.skipExpGolomb();a.skipUnsignedExpGolomb();
a.skipBits(1);w=a.readUnsignedExpGolomb();l=a.readUnsignedExpGolomb();var m=a.readBits(1);0===m&&a.skipBits(1);a.skipBits(1);a.readBoolean()&&(b=a.readUnsignedExpGolomb(),c=a.readUnsignedExpGolomb(),d=a.readUnsignedExpGolomb(),e=a.readUnsignedExpGolomb());if(a.readBoolean()&&a.readBoolean()){var t=a.readUnsignedByte();switch(t){case 1:var p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=
[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[a.readUnsignedByte()<<8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}p&&(g=p[0]/p[1])}return{profileIdc:n,levelIdc:k,profileCompatibility:h,width:Math.ceil((16*(w+1)-2*b-2*c)*g),height:(2-m)*(l+1)*16-2*d-2*e}}};Fj.prototype=new kc;var vl=[96E3,88200,64E3,48E3,44100,32E3,
24E3,22050,16E3,12E3,11025,8E3,7350],pk=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},yg={isLikelyAacData:function(a){return 73===a[0]&&68===a[1]&&51===a[2]?!0:!1},parseId3TagSize:function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(a[b+5]&16)>>4?c+20:c+10},parseAdtsSize:function(a,b){return a[b+3]&6144|a[b+4]<<3|(a[b+5]&224)>>5},parseType:function(a,b){return 73===a[b]&&68===a[b+1]&&51===a[b+2]?"timed-metadata":a[b]&1&&240===(a[b+1]&240)?"audio":null},parseSampleRate:function(a){for(var b=
0;b+5<a.length;)if(255!==a[b]||240!==(a[b+1]&246))b++;else return vl[(a[b+2]&60)>>>2];return null},parseAacTimestamp:function(a){var b=10;a[5]&64&&(b=b+4+pk(a.subarray(10,14)));do{var c=pk(a.subarray(b+4,b+8));if(1>c)break;var d=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]);if("PRIV"===d){d=a.subarray(b+10,b+c+10);for(var e=0;e<d.byteLength;e++)if(0===d[e]){var f=unescape,g,n=d,h=e,k="";for(g=0;g<h;g++)k+="%"+("00"+n[g].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===
f(k))return a=d.subarray(e+1),b=(a[3]&1)<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2,b*=4,b+=a[7]&3;break}}b+=10;b+=c}while(b<a.byteLength);return null}};var Hj=function(){var a=new Uint8Array,b=0;Hj.prototype.init.call(this);this.setTimestamp=function(a){b=a};this.push=function(c){var d=0;if(a.length){var e=a.length;a=new Uint8Array(c.byteLength+e);a.set(a.subarray(0,e));a.set(c,e)}else a=c;for(;3<=a.length-d;)if(73===a[d]&&68===a[d+1]&&51===a[d+2]){if(10>a.length-d)break;c=yg.parseId3TagSize(a,d);if(d+
c>a.length)break;e={type:"timed-metadata",data:a.subarray(d,d+c)};this.trigger("data",e);d+=c}else if(255===(a[d]&255)&&240===(a[d+1]&240)){if(7>a.length-d)break;c=yg.parseAdtsSize(a,d);if(d+c>a.length)break;e={type:"audio",data:a.subarray(d,d+c),pts:b,dts:b};this.trigger("data",e);d+=c}else d++;a=0<a.length-d?a.subarray(d):new Uint8Array}};Hj.prototype=new kc;var wl=yg.isLikelyAacData,qk=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],rk=["width","height","profileIdc",
"levelIdc","profileCompatibility"],uk=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},Bl=function(a,b,c,d,e,f){return{start:{dts:a,pts:a+(c-b)},end:{dts:a+(d-b),pts:a+(e-c)},prependedContentDuration:f,baseMediaDecodeTime:a}};var pj=function(a,b){var c=[],d=0,e=0,f=0,g=Infinity;b=b||{};pj.prototype.init.call(this);this.push=function(b){Bf.collectDtsInfo(a,b);a&&qk.forEach(function(c){a[c]=b[c]});c.push(b)};this.setEarliestDts=function(b){e=
b-a.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(a){g=a};this.setAudioAppendStart=function(a){f=a};this.flush=function(){if(0!==c.length){var n=Ui.trimAdtsFramesByEarliestDts(c,a,e);a.baseMediaDecodeTime=Bf.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps);Ui.prefixWithSilence(a,n,f,g);a.samples=Ui.generateSampleTable(n);var h=ti.mdat(Ui.concatenateFrameData(n));c=[];n=ti.moof(d,[a]);var k=new Uint8Array(n.byteLength+h.byteLength);d++;k.set(n);k.set(h,
n.byteLength);Bf.clearDtsInfo(a);this.trigger("data",{track:a,boxes:k})}this.trigger("done","AudioSegmentStream")}};pj.prototype=new kc;var Qj=function(a,b){var c=0,d=[],e=[],f,g;b=b||{};Qj.prototype.init.call(this);delete a.minPTS;this.gopCache_=[];this.push=function(b){Bf.collectDtsInfo(a,b);"seq_parameter_set_rbsp"!==b.nalUnitType||f||(f=b.config,a.sps=[b.data],rk.forEach(function(b){a[b]=f[b]},this));"pic_parameter_set_rbsp"!==b.nalUnitType||g||(g=b.data,a.pps=[b.data]);d.push(b)};this.flush=
function(){var f;var g=0;for(var n,h;d.length&&"access_unit_delimiter_rbsp"!==d[0].nalUnitType;)d.shift();if(0!==d.length){var k=ui.groupNalsIntoFrames(d);k=ui.groupFramesIntoGops(k);k[0][0].keyFrame||((f=this.getGopForFusion_(d[0],a))?(g=f.duration,k.unshift(f),k.byteLength+=f.byteLength,k.nalCount+=f.nalCount,k.pts=f.pts,k.dts=f.dts,k.duration+=f.duration):k=ui.extendFirstKeyFrame(k));if(e.length){f=b.alignGopsAtEnd?this.alignGopsAtEnd_(k):this.alignGopsAtStart_(k);if(!f){this.gopCache_.unshift({gop:k.pop(),
pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);d=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}Bf.clearDtsInfo(a);k=f}Bf.collectDtsInfo(a,k);a.samples=ui.generateSampleTable(k);f=ti.mdat(ui.concatenateNalData(k));a.baseMediaDecodeTime=Bf.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps);this.trigger("processedGopsInfo",k.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));n=k[0];h=k[k.length-1];this.trigger("segmentTimingInfo",
Bl(a.baseMediaDecodeTime,n.dts,n.pts,h.dts+h.duration,h.pts+h.duration,g));this.gopCache_.unshift({gop:k.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);d=[];this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime);this.trigger("timelineStartInfo",a.timelineStartInfo);g=ti.moof(c,[a]);k=new Uint8Array(g.byteLength+f.byteLength);c++;k.set(g);k.set(f,g.byteLength);this.trigger("data",{track:a,boxes:k})}this.resetStream_();this.trigger("done","VideoSegmentStream")};
this.resetStream_=function(){Bf.clearDtsInfo(a);g=f=void 0};this.getGopForFusion_=function(b){var c=Infinity,d;for(d=0;d<this.gopCache_.length;d++){var e=this.gopCache_[d];var f=e.gop;if(a.pps&&uk(a.pps[0],e.pps[0])&&a.sps&&uk(a.sps[0],e.sps[0])&&!(f.dts<a.timelineStartInfo.dts)&&(f=b.dts-f.dts-f.duration,-1E4<=f&&45E3>=f&&(!g||c>f))){var g=e;c=f}}return g?g.gop:null};this.alignGopsAtStart_=function(a){var b,c;var d=a.byteLength;var f=a.nalCount;var g=a.duration;for(b=c=0;b<e.length&&c<a.length;){var n=
e[b];var h=a[c];if(n.pts===h.pts)break;h.pts>n.pts?b++:(c++,d-=h.byteLength,f-=h.nalCount,g-=h.duration)}if(0===c)return a;if(c===a.length)return null;a=a.slice(c);a.byteLength=d;a.duration=g;a.nalCount=f;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=function(a){var b;var c=e.length-1;var d=a.length-1;var f=null;for(b=!1;0<=c&&0<=d;){var g=e[c];var n=a[d];if(g.pts===n.pts){b=!0;break}g.pts>n.pts?c--:(c===e.length-1&&(f=d),d--)}if(!b&&null===f)return null;c=b?d:f;if(0===c)return a;a=
a.slice(c);c=a.reduce(function(a,b){a.byteLength+=b.byteLength;a.duration+=b.duration;a.nalCount+=b.nalCount;return a},{byteLength:0,duration:0,nalCount:0});a.byteLength=c.byteLength;a.duration=c.duration;a.nalCount=c.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsWith=function(a){e=a}};Qj.prototype=new kc;var Ni=function(a,b){this.numberOfTracks=0;this.metadataStream=b;a=a||{};this.remuxTracks="undefined"!==typeof a.remux?!!a.remux:!0;"boolean"===typeof a.keepOriginalTimestamps&&
(this.keepOriginalTimestamps=a.keepOriginalTimestamps);this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;Ni.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);this.pendingTracks.push(a.track);this.pendingBoxes.push(a.boxes);this.pendingBytes+=a.boxes.byteLength;"video"===a.track.type&&(this.videoTrack=a.track);
"audio"===a.track.type&&(this.audioTrack=a.track)}};Ni.prototype=new kc;Ni.prototype.flush=function(a){var b=0,c={captions:[],captionStreams:{},metadata:[],info:{}},d=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(d=this.videoTrack.timelineStartInfo.pts,
rk.forEach(function(a){c.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(d=this.audioTrack.timelineStartInfo.pts,qk.forEach(function(a){c.info[a]=this.audioTrack[a]},this));c.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;a=ti.initSegment(this.pendingTracks);c.initSegment=new Uint8Array(a.byteLength);c.initSegment.set(a);c.data=new Uint8Array(this.pendingBytes);for(a=0;a<this.pendingBoxes.length;a++)c.data.set(this.pendingBoxes[a],
b),b+=this.pendingBoxes[a].byteLength;for(a=0;a<this.pendingCaptions.length;a++)b=this.pendingCaptions[a],b.startTime=b.startPts,this.keepOriginalTimestamps||(b.startTime-=d),b.startTime/=9E4,b.endTime=b.endPts,this.keepOriginalTimestamps||(b.endTime-=d),b.endTime/=9E4,c.captionStreams[b.stream]=!0,c.captions.push(b);for(a=0;a<this.pendingMetadata.length;a++)b=this.pendingMetadata[a],b.cueTime=b.pts,this.keepOriginalTimestamps||(b.cueTime-=d),b.cueTime/=9E4,c.metadata.push(b);c.metadata.dispatchType=
this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",c);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};var vk=function(a){var b=this,c=!0,d,e;vk.prototype.init.call(this);a=a||{};this.baseMediaDecodeTime=a.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var c={};this.transmuxPipeline_=
c;c.type="aac";c.metadataStream=new ve.MetadataStream;c.aacStream=new Hj;c.audioTimestampRolloverStream=new ve.TimestampRolloverStream("audio");c.timedMetadataTimestampRolloverStream=new ve.TimestampRolloverStream("timed-metadata");c.adtsStream=new Zi;c.coalesceStream=new Ni(a,c.metadataStream);c.headOfPipeline=c.aacStream;c.aacStream.pipe(c.audioTimestampRolloverStream).pipe(c.adtsStream);c.aacStream.pipe(c.timedMetadataTimestampRolloverStream).pipe(c.metadataStream).pipe(c.coalesceStream);c.metadataStream.on("timestamp",
function(a){c.aacStream.setTimestamp(a.timeStamp)});c.aacStream.on("data",function(d){"timed-metadata"!==d.type||c.audioSegmentStream||(e=e||{timelineStartInfo:{baseMediaDecodeTime:b.baseMediaDecodeTime},codec:"adts",type:"audio"},c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new pj(e,a),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream))});c.coalesceStream.on("data",this.trigger.bind(this,"data"));c.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=
function(){var c={};this.transmuxPipeline_=c;c.type="ts";c.metadataStream=new ve.MetadataStream;c.packetStream=new ve.TransportPacketStream;c.parseStream=new ve.TransportParseStream;c.elementaryStream=new ve.ElementaryStream;c.videoTimestampRolloverStream=new ve.TimestampRolloverStream("video");c.audioTimestampRolloverStream=new ve.TimestampRolloverStream("audio");c.timedMetadataTimestampRolloverStream=new ve.TimestampRolloverStream("timed-metadata");c.adtsStream=new Zi;c.h264Stream=new Fj;c.captionStream=
new ve.CaptionStream;c.coalesceStream=new Ni(a,c.metadataStream);c.headOfPipeline=c.packetStream;c.packetStream.pipe(c.parseStream).pipe(c.elementaryStream);c.elementaryStream.pipe(c.videoTimestampRolloverStream).pipe(c.h264Stream);c.elementaryStream.pipe(c.audioTimestampRolloverStream).pipe(c.adtsStream);c.elementaryStream.pipe(c.timedMetadataTimestampRolloverStream).pipe(c.metadataStream).pipe(c.coalesceStream);c.h264Stream.pipe(c.captionStream).pipe(c.coalesceStream);c.elementaryStream.on("data",
function(f){var g;if("metadata"===f.type){for(g=f.tracks.length;g--;)d||"video"!==f.tracks[g].type?e||"audio"!==f.tracks[g].type||(e=f.tracks[g],e.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime):(d=f.tracks[g],d.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime);d&&!c.videoSegmentStream&&(c.coalesceStream.numberOfTracks++,c.videoSegmentStream=new Qj(d,a),c.videoSegmentStream.on("timelineStartInfo",function(a){e&&(e.timelineStartInfo=a,c.audioSegmentStream.setEarliestDts(a.dts))}),
c.videoSegmentStream.on("processedGopsInfo",b.trigger.bind(b,"gopInfo")),c.videoSegmentStream.on("segmentTimingInfo",b.trigger.bind(b,"videoSegmentTimingInfo")),c.videoSegmentStream.on("baseMediaDecodeTime",function(a){e&&c.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),c.h264Stream.pipe(c.videoSegmentStream).pipe(c.coalesceStream));e&&!c.audioSegmentStream&&(c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new pj(e,a),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream))}});
c.coalesceStream.on("data",this.trigger.bind(this,"data"));c.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(b){var c=this.transmuxPipeline_;a.keepOriginalTimestamps||(this.baseMediaDecodeTime=b);e&&(e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,Bf.clearDtsInfo(e),a.keepOriginalTimestamps||(e.timelineStartInfo.baseMediaDecodeTime=b),c.audioTimestampRolloverStream&&c.audioTimestampRolloverStream.discontinuity());d&&(c.videoSegmentStream&&
(c.videoSegmentStream.gopCache_=[],c.videoTimestampRolloverStream.discontinuity()),d.timelineStartInfo.dts=void 0,d.timelineStartInfo.pts=void 0,Bf.clearDtsInfo(d),c.captionStream.reset(),a.keepOriginalTimestamps||(d.timelineStartInfo.baseMediaDecodeTime=b));c.timedMetadataTimestampRolloverStream&&c.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){e&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};this.alignGopsWith=function(a){d&&this.transmuxPipeline_.videoSegmentStream&&
this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)};this.push=function(a){if(c){var b=wl(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();c=!1}this.transmuxPipeline_.headOfPipeline.push(a)};this.flush=function(){c=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};vk.prototype=new kc;var Cl=vi.discardEmulationPreventionBytes,
Dl=function(a,b,c){var d=b,e=c.defaultSampleDuration||0,f=c.defaultSampleSize||0,g=c.trackId,n=[];a.forEach(function(a){a=Wh.parseTrun(a).samples;a.forEach(function(a){void 0===a.duration&&(a.duration=e);void 0===a.size&&(a.size=f);a.trackId=g;a.dts=d;void 0===a.compositionTimeOffset&&(a.compositionTimeOffset=0);a.pts=d+a.compositionTimeOffset;d+=a.duration});n=n.concat(a)});return n},El=function(a,b){var c=De.findBox(a,["moof","traf"]),d={},e=[];De.findBox(a,["mdat"]).forEach(function(a,b){e.push({mdat:a,
traf:c[b]})});e.forEach(function(a){var c=a.mdat,e=a.traf;a=De.findBox(e,["tfhd"]);var f=Wh.parseTfhd(a[0]);a=f.trackId;var g=De.findBox(e,["tfdt"]);g=0<g.length?Wh.parseTfdt(g[0]).baseMediaDecodeTime:0;e=De.findBox(e,["trun"]);if(b===a&&0<e.length){e=Dl(e,g,f);f=new DataView(c.buffer,c.byteOffset,c.byteLength);g=[];var n;for(n=0;n+4<c.length;n+=h){var h=f.getUint32(n);n+=4;if(!(0>=h))switch(c[n]&31){case 6:var k=c.subarray(n+1,n+1+h);a:{var w=n;for(var l=0;l<e.length;l++){var m=e[l];if(w<m.size){w=
m;break a}w-=m.size}w=null}k={nalUnitType:"sei_rbsp",size:h,data:k,escapedRBSP:Cl(k),trackId:a};if(w){k.pts=w.pts;k.dts=w.dts;var t=w}else k.pts=t.pts,k.dts=t.dts;g.push(k)}}d[a]||(d[a]=[]);d[a]=d[a].concat(g)}});return d},Fl=function(){var a=!1,b,c,d,e,f;this.isInitialized=function(){return a};this.init=function(){b=new Cf;a=!0;b.on("data",function(a){a.startTime=a.startPts/e;a.endTime=a.endPts/e;f.captions.push(a);f.captionStreams[a.stream]=!0})};this.isNewInit=function(a,b){return a&&0===a.length||
b&&"object"===typeof b&&0===Object.keys(b).length?!1:d!==a[0]||e!==b[d]};this.parse=function(a,b,g){if(this.isInitialized()){if(!b||!g)return null;if(this.isNewInit(b,g))d=b[0],e=g[d];else if(!d||!e)return c.push(a),null}else return null;for(;0<c.length;){var n=c.shift();this.parse(n,b,g)}b=d;g=e;a=b?{seiNals:El(a,b)[b],timescale:g}:null;if(null===a||!a.seiNals)return null;this.pushNals(a.seiNals);this.flushStream();return f};this.pushNals=function(a){if(!this.isInitialized()||!a||0===a.length)return null;
a.forEach(function(a){b.push(a)})};this.flushStream=function(){if(!this.isInitialized())return null;b.flush()};this.clearParsedCaptions=function(){f.captions=[];f.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized())return null;b.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){c=[];e=d=null;f?this.clearParsedCaptions():f={captions:[],captionStreams:{}};this.resetCaptionStream()};this.reset()},wk=function(a){var b=
a[1]&31;return b=b<<8|a[2]},qj=function(a){return!!(a[1]&64)},rj=function(a){var b=0;1<(a[3]&48)>>>4&&(b+=a[4]+1);return b},Rj=function(a){switch(a){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};var Tb={parseType:function(a,b){a=wk(a);return 0===a?"pat":a===b?"pmt":b?"pes":null},parsePat:function(a){var b=qj(a),c=4+rj(a);b&&
(c+=a[c]+1);return(a[c+10]&31)<<8|a[c+11]},parsePmt:function(a){var b={},c=qj(a),d=4+rj(a);c&&(d+=a[d]+1);if(a[d+5]&1){c=3+((a[d+1]&15)<<8|a[d+2])-4;for(var e=12+((a[d+10]&15)<<8|a[d+11]);e<c;){var f=d+e;b[(a[f+1]&31)<<8|a[f+2]]=a[f];e+=((a[f+3]&15)<<8|a[f+4])+5}return b}},parsePayloadUnitStartIndicator:qj,parsePesType:function(a,b){a=wk(a);switch(b[a]){case mc.H264_STREAM_TYPE:return"video";case mc.ADTS_STREAM_TYPE:return"audio";case mc.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},
parsePesTime:function(a){if(!qj(a))return null;var b=4+rj(a);if(b>=a.byteLength)return null;var c=null;var d=a[b+7];d&192&&(c={},c.pts=(a[b+9]&14)<<27|(a[b+10]&255)<<20|(a[b+11]&254)<<12|(a[b+12]&255)<<5|(a[b+13]&254)>>>3,c.pts*=4,c.pts+=(a[b+13]&6)>>>1,c.dts=c.pts,d&64&&(c.dts=(a[b+14]&14)<<27|(a[b+15]&255)<<20|(a[b+16]&254)<<12|(a[b+17]&255)<<5|(a[b+18]&254)>>>3,c.dts*=4,c.dts+=(a[b+18]&6)>>>1));return c},videoPacketContainsKeyFrame:function(a){var b=4+rj(a);a=a.subarray(b);for(var c=b=0,d=!1;c<
a.byteLength-3;c++)if(1===a[c+2]){b=c+5;break}for(;b<a.byteLength;)switch(a[b]){case 0:if(0!==a[b-1]){b+=2;break}else if(0!==a[b-2]){b++;break}c+3!==b-2&&(c=Rj(a[c+3]&31),"slice_layer_without_partitioning_rbsp_idr"===c&&(d=!0));do b++;while(1!==a[b]&&b<a.length);c=b-2;b+=3;break;case 1:if(0!==a[b-1]||0!==a[b-2]){b+=3;break}c=Rj(a[c+3]&31);"slice_layer_without_partitioning_rbsp_idr"===c&&(d=!0);c=b-2;b+=3;break;default:b+=3}(a=a.subarray(c))&&3<a.byteLength&&(c=Rj(a[3]&31),"slice_layer_without_partitioning_rbsp_idr"===
c&&(d=!0));return d}};var Gl=function(a,b){if(a.audio&&a.audio.length){var c=b;"undefined"===typeof c&&(c=a.audio[0].dts);a.audio.forEach(function(a){a.dts=Pg(a.dts,c);a.pts=Pg(a.pts,c);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4})}if(a.video&&a.video.length){var d=b;"undefined"===typeof d&&(d=a.video[0].dts);a.video.forEach(function(a){a.dts=Pg(a.dts,d);a.pts=Pg(a.pts,d);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4});a.firstKeyFrame&&(a=a.firstKeyFrame,a.dts=Pg(a.dts,d),a.pts=Pg(a.pts,d),a.dtsTime=a.dts/
9E4,a.ptsTime=a.dts/9E4)}},sj=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},Hl=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),Il=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},Ee=null,Jl=function(){function a(b){sj(this,a);if(!Ee){var c=[[[],[],[],[],[]],[[],[],[],[],[]]],d=c[0],e=c[1],f=d[4],g=e[4],n,h,k,w=[],l=[],m;for(n=0;256>n;n++)l[(w[n]=n<<1^283*(n>>7))^n]=n;for(h=k=0;!f[h];h^=m||1,k=l[k]||1){var t=k^k<<1^k<<2^k<<3^k<<4;t=t>>8^t&255^99;f[h]=t;g[t]=h;var p=w[n=w[m=w[h]]];var r=16843009*
p^65537*n^257*m^16843008*h;p=257*w[t]^16843008*t;for(n=0;4>n;n++)d[n][h]=p=p<<24^p>>>8,e[n][t]=r=r<<24^r>>>8}for(n=0;5>n;n++)d[n]=d[n].slice(0),e[n]=e[n].slice(0);Ee=c}this._tables=[[Ee[0][0].slice(),Ee[0][1].slice(),Ee[0][2].slice(),Ee[0][3].slice(),Ee[0][4].slice()],[Ee[1][0].slice(),Ee[1][1].slice(),Ee[1][2].slice(),Ee[1][3].slice(),Ee[1][4].slice()]];c=this._tables[0][4];d=this._tables[1];h=b.length;k=1;if(4!==h&&6!==h&&8!==h)throw Error("Invalid aes key size");f=b.slice(0);g=[];this._key=[f,
g];for(b=h;b<4*h+28;b++){e=f[b-1];if(0===b%h||8===h&&4===b%h)e=c[e>>>24]<<24^c[e>>16&255]<<16^c[e>>8&255]<<8^c[e&255],0===b%h&&(e=e<<8^e>>>24^k<<24,k=k<<1^283*(k>>7));f[b]=f[b-h]^e}for(h=0;b;h++,b--)e=f[h&3?b:b-4],g[h]=4>=b||4>h?e:d[0][c[e>>>24]]^d[1][c[e>>16&255]]^d[2][c[e>>8&255]]^d[3][c[e&255]]}a.prototype.decrypt=function(a,b,c,d,e,f){var g=this._key[1];a^=g[0];d^=g[1];c^=g[2];b^=g[3];var n=g.length/4-2,h,k=4;var w=this._tables[1];var l=w[0],m=w[1],t=w[2],p=w[3],r=w[4];for(h=0;h<n;h++){w=l[a>>>
24]^m[d>>16&255]^t[c>>8&255]^p[b&255]^g[k];var I=l[d>>>24]^m[c>>16&255]^t[b>>8&255]^p[a&255]^g[k+1];var u=l[c>>>24]^m[b>>16&255]^t[a>>8&255]^p[d&255]^g[k+2];b=l[b>>>24]^m[a>>16&255]^t[d>>8&255]^p[c&255]^g[k+3];k+=4;a=w;d=I;c=u}for(h=0;4>h;h++)e[(3&-h)+f]=r[a>>>24]<<24^r[d>>16&255]<<16^r[c>>8&255]<<8^r[b&255]^g[k++],w=a,a=d,d=c,c=b,b=w};return a}(),xk=function(){function a(){sj(this,a);this.listeners={}}a.prototype.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)};
a.prototype.off=function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b};a.prototype.trigger=function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else{c=Array.prototype.slice.call(arguments,1);d=b.length;for(var e=0;e<d;++e)b[e].apply(this,c)}};a.prototype.dispose=function(){this.listeners={}};a.prototype.pipe=function(a){this.on("data",function(b){a.push(b)})};return a}(),
yk=function(a){function b(){sj(this,b);var c=a.call(this,xk);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.jobs=[];c.delay=1;c.timeout_=null;return c}Il(b,a);b.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};b.prototype.push=function(a){this.jobs.push(a);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),
this.delay))};return b}(xk),Fe=function(a){return a<<24|(a&65280)<<8|(a&16711680)>>8|a>>>24},zk=function(a,b,c){var d=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2);b=new Jl(Array.prototype.slice.call(b));a=new Uint8Array(a.byteLength);var e=new Int32Array(a.buffer),f;var g=c[0];var n=c[1];var h=c[2];c=c[3];for(f=0;f<d.length;f+=4){var k=Fe(d[f]);var w=Fe(d[f+1]);var l=Fe(d[f+2]);var m=Fe(d[f+3]);b.decrypt(k,w,l,m,e,f);e[f]=Fe(e[f]^g);e[f+1]=Fe(e[f+1]^n);e[f+2]=Fe(e[f+2]^h);e[f+3]=Fe(e[f+3]^
c);g=k;n=w;h=l;c=m}return a},Kl=function(){function a(b,c,d,e){sj(this,a);var f=a.STEP,g=new Int32Array(b.buffer),n=new Uint8Array(b.byteLength);b=0;this.asyncStream_=new yk;this.asyncStream_.push(this.decryptChunk_(g.subarray(b,b+f),c,d,n));for(b=f;b<g.length;b+=f)d=new Uint32Array([Fe(g[b-4]),Fe(g[b-3]),Fe(g[b-2]),Fe(g[b-1])]),this.asyncStream_.push(this.decryptChunk_(g.subarray(b,b+f),c,d,n));this.asyncStream_.push(function(){e(null,n.subarray(0,n.byteLength-n[n.byteLength-1]))})}a.prototype.decryptChunk_=
function(a,b,c,d){return function(){var e=zk(a,b,c);d.set(e,a.byteOffset)}};Hl(a,null,[{key:"STEP",get:function(){return 32E3}}]);return a}(),Gh=function(a,b){if(/^[a-z]+:/i.test(b))return b;/\/\//i.test(a)||(a=Fi.buildAbsoluteURL(h.location.href,a));return Fi.buildAbsoluteURL(a,b)},tj=function(a,b,c){return a&&c.responseURL&&b!==c.responseURL?c.responseURL:b},Ge=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},gf=function(){function a(a,b){for(var c=0;c<
b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),Ll=function Qc(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return Qc(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},Cg=function(a,b){if("function"!==typeof b&&null!==
b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},Sf=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b},Ml=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in
Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),n;!(d=(n=g.next()).done)&&(c.push(n.value),!b||c.length!==b);d=!0);}catch(oj){e=!0,f=oj}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),Sj=J.mergeOptions,Nl=J.log,uj=function(a,b){["AUDIO","SUBTITLES"].forEach(function(c){for(var d in a.mediaGroups[c])for(var e in a.mediaGroups[c][d])b(a.mediaGroups[c][d][e],c,d,e)})},
Ol=function(a,b,c){var d=b.slice();c=c||0;b=Math.min(a.length,b.length+c);for(var e=c;e<b;e++)d[e-c]=Sj(a[e],d[e-c]);return d},Tj=function(a,b){a=Sj(a,{});var c=a.playlists[b.uri];if(!c||c.segments&&b.segments&&c.segments.length===b.segments.length&&c.endList===b.endList&&c.mediaSequence===b.mediaSequence)return null;var d=Sj(c,b);c.segments&&(d.segments=Ol(c.segments,b.segments,b.mediaSequence-c.mediaSequence));d.segments.forEach(function(a){var b=d.resolvedUri;a.resolvedUri||(a.resolvedUri=Gh(b,
a.uri));a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=Gh(b,a.key.uri));a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=Gh(b,a.map.uri))});for(c=0;c<a.playlists.length;c++)a.playlists[c].uri===b.uri&&(a.playlists[c]=d);a.playlists[b.uri]=d;return a},Ak=function(a){for(var b=a.playlists.length;b--;){var c=a.playlists[b];a.playlists[c.uri]=c;c.resolvedUri=Gh(a.uri,c.uri);c.id=b;c.attributes||(c.attributes={},Nl.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},Bk=function(a){uj(a,
function(b){b.uri&&(b.resolvedUri=Gh(a.uri,b.uri))})},Ck=function(a,b){var c=a.segments[a.segments.length-1];return b&&c&&c.duration?1E3*c.duration:500*(a.targetDuration||10)},vj=function(a){function b(a,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Ge(this,b);var e=Sf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),f=d.withCredentials;d=d.handleManifestRedirects;e.srcUrl=a;e.hls_=c;e.withCredentials=void 0===f?!1:f;e.handleManifestRedirects=void 0===d?!1:d;f=c.options_;
e.customTagParsers=f&&f.customTagParsers||[];e.customTagMappers=f&&f.customTagMappers||[];if(!e.srcUrl)throw Error("A non-empty playlist URL is required");e.state="HAVE_NOTHING";e.on("mediaupdatetimeout",function(){"HAVE_METADATA"===e.state&&(e.state="HAVE_CURRENT_METADATA",e.request=e.hls_.xhr({uri:Gh(e.master.uri,e.media().uri),withCredentials:e.withCredentials},function(a,b){if(e.request){if(a)return e.playlistRequestError(e.request,e.media().uri,"HAVE_METADATA");e.haveMetadata(e.request,e.media().uri)}}))});
return e}Cg(b,a);gf(b,[{key:"playlistRequestError",value:function(a,b,c){this.request=null;c&&(this.state=c);this.error={playlist:this.master.playlists[b],status:a.status,message:"HLS playlist request error at URL: "+b+".",responseText:a.responseText,code:500<=a.status?4:2};this.trigger("error")}},{key:"haveMetadata",value:function(a,b){var c=this;this.request=null;this.state="HAVE_METADATA";var d=new Qg;this.customTagParsers.forEach(function(a){return d.addParser(a)});this.customTagMappers.forEach(function(a){return d.addTagMapper(a)});
d.push(a.responseText);d.end();d.manifest.uri=b;d.manifest.attributes=d.manifest.attributes||{};a=Tj(this.master,d.manifest);this.targetDuration=d.manifest.targetDuration;a?(this.master=a,this.media_=this.master.playlists[d.manifest.uri]):this.trigger("playlistunchanged");this.media().endList||(h.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=h.setTimeout(function(){c.trigger("mediaupdatetimeout")},Ck(this.media(),!!a)));this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest();
h.clearTimeout(this.mediaUpdateTimeout);h.clearTimeout(this.finalRenditionTimeout)}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"media",value:function(a,b){var c=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}h.clearTimeout(this.finalRenditionTimeout);
if(b)b=a.targetDuration/2*1E3||5E3,this.finalRenditionTimeout=h.setTimeout(this.media.bind(this,a,!1),b);else{var d=this.state;b=!this.media_||a.uri!==this.media_.uri;if(this.master.playlists[a.uri].endList)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,b&&(this.trigger("mediachanging"),this.trigger("mediachange"));else if(b){this.state="SWITCHING_MEDIA";if(this.request){if(a.resolvedUri===this.request.url)return;
this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.request=this.hls_.xhr({uri:a.resolvedUri,withCredentials:this.withCredentials},function(b,e){if(c.request){a.resolvedUri=tj(c.handleManifestRedirects,a.resolvedUri,e);if(b)return c.playlistRequestError(c.request,a.uri,d);c.haveMetadata(e,a.uri);"HAVE_MASTER"===d?c.trigger("loadedmetadata"):c.trigger("mediachange")}})}}}},{key:"pause",value:function(){this.stopRequest();h.clearTimeout(this.mediaUpdateTimeout);
"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(a){var b=this;h.clearTimeout(this.mediaUpdateTimeout);var c=this.media();a?this.mediaUpdateTimeout=h.setTimeout(function(){return b.load()},c?c.targetDuration/2*1E3:5E3):this.started?c&&!c.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},
{key:"start",value:function(){var a=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,c){if(a.request){a.request=null;if(b)return a.error={status:c.status,message:"HLS playlist request error at URL: "+a.srcUrl+".",responseText:c.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");var d=new Qg;a.customTagParsers.forEach(function(a){return d.addParser(a)});a.customTagMappers.forEach(function(a){return d.addTagMapper(a)});
d.push(c.responseText);d.end();a.state="HAVE_MASTER";a.srcUrl=tj(a.handleManifestRedirects,a.srcUrl,c);d.manifest.uri=a.srcUrl;if(d.manifest.playlists)a.master=d.manifest,Ak(a.master),Bk(a.master),a.trigger("loadedplaylist"),a.request||a.media(d.manifest.playlists[0]);else return a.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:h.location.href,playlists:[{uri:a.srcUrl,id:0,resolvedUri:a.srcUrl,attributes:{}}]},a.master.playlists[a.srcUrl]=a.master.playlists[0],a.haveMetadata(c,
a.srcUrl),a.trigger("loadedmetadata")}})}}]);return b}(J.EventTarget),Dk=J.createTimeRange,Pl=function(a,b){var c=0;b-=a.mediaSequence;var d=a.segments[b];if(d){if("undefined"!==typeof d.start)return{result:d.start,precise:!0};if("undefined"!==typeof d.end)return{result:d.end-d.duration,precise:!0}}for(;b--;){d=a.segments[b];if("undefined"!==typeof d.end)return{result:c+d.end,precise:!0};c+=d.duration;if("undefined"!==typeof d.start)return{result:c+d.start,precise:!0}}return{result:c,precise:!1}},
Ek=function(a,b,c){"undefined"===typeof b&&(b=a.mediaSequence+a.segments.length);if(b<a.mediaSequence)return 0;var d=Pl(a,b);if(d.precise)return d.result;a:{var e=0;for(var f=b-a.mediaSequence;f<a.segments.length;f++){b=a.segments[f];if("undefined"!==typeof b.start){a=b.start-e;e=!0;break a}e+=b.duration;if("undefined"!==typeof b.end){a=b.end-e;e=!0;break a}}a=-1;e=!1}return e?a:d.result+c},Fk=function(a,b,c){if(!a)return 0;"number"!==typeof c&&(c=0);if("undefined"===typeof b){if(a.totalDuration)return a.totalDuration;
if(!a.endList)return h.Infinity}return Ek(a,b,c)},Oi=function(a,b,c){var d=0;b>c&&(c=[c,b],b=c[0],c=c[1]);if(0>b){for(;b<Math.min(0,c);b++)d+=a.targetDuration;b=0}for(;b<c;b++)d+=a.segments[b].duration;return d},Gk=function(a){if(!a.segments.length)return 0;for(var b=a.segments.length-1,c=a.segments[b].duration||a.targetDuration,d=c+2*a.targetDuration;b--&&!(c+=a.segments[b].duration,c>=d););return Math.max(0,b)},Hk=function(a,b,c){if(!a||!a.segments)return null;if(a.endList)return Fk(a);if(null===
b)return null;b=b||0;c=c?Gk(a):a.segments.length;return Ek(a,a.mediaSequence+c,b)},Ik=function(a,b){if(0===b-Math.floor(b))return b+.1*a;for(var c=b.toString().split(".")[1].length,d=1;d<=c;d++){var e=Math.pow(10,d),f=b*e;if(0===f-Math.floor(f)||d===c)return(f+a)/e}},Ql=Ik.bind(null,1),Rl=Ik.bind(null,-1),Jk=function(a){return a.excludeUntil&&a.excludeUntil>Date.now()},Uj=function(a){return a.excludeUntil&&Infinity===a.excludeUntil},wj=function(a){var b=Jk(a);return!a.disabled&&!b},Kk=function(a,
b){return b.attributes&&b.attributes[a]},Vj=function(a,b){if(1===a.playlists.length)return!0;var c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(function(a){return wj(a)?(a.attributes.BANDWIDTH||0)<c:!1}).length},Ed={duration:Fk,seekable:function(a,b){var c=b||0;a=Hk(a,b,!0);return null===a?Dk():Dk(c,a)},safeLiveIndex:Gk,getMediaInfoForTime:function(a,b,c,d){var e,f=a.segments.length,g=b-d;if(0>g){if(0<c)for(e=c-1;0<=e;e--){var n=a.segments[e];g+=Rl(n.duration);if(0<g)return{mediaIndex:e,
startTime:d-Oi(a,c,e)}}return{mediaIndex:0,startTime:b}}if(0>c){for(e=c;0>e;e++)if(g-=a.targetDuration,0>g)return{mediaIndex:0,startTime:b};c=0}for(e=c;e<f;e++)if(n=a.segments[e],g-=Ql(n.duration),0>g)return{mediaIndex:e,startTime:d+Oi(a,c,e)};return{mediaIndex:f-1,startTime:b}},isEnabled:wj,isDisabled:function(a){return a.disabled},isBlacklisted:Jk,isIncompatible:Uj,playlistEnd:Hk,isAes:function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].key)return!0;return!1},isFmp4:function(a){for(var b=
0;b<a.segments.length;b++)if(a.segments[b].map)return!0;return!1},hasAttribute:Kk,estimateSegmentRequestTime:function(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return Kk("BANDWIDTH",c)?(a*c.attributes.BANDWIDTH-8*d)/b:NaN},isLowestEnabledRendition:Vj},Sl=J.xhr,Tl=J.mergeOptions,Lk=function(){return function Qc(a,b){a=Tl({timeout:45E3},a);var c=Qc.beforeRequest||J.Hls.xhr.beforeRequest;c&&"function"===typeof c&&(c=c(a))&&(a=c);var d=Sl(a,function(a,c){var e=d.response;!a&&
e&&(d.responseTime=Date.now(),d.roundTripTime=d.responseTime-d.requestTime,d.bytesReceived=e.byteLength||e.length,d.bandwidth||(d.bandwidth=Math.floor(d.bytesReceived/d.roundTripTime*8E3)));c.headers&&(d.responseHeaders=c.headers);a&&"ETIMEDOUT"===a.code&&(d.timedout=!0);a||d.aborted||200===c.statusCode||206===c.statusCode||0===c.statusCode||(a=Error("XHR Failed with a response of: "+(d&&(e||d.responseText))));b(a,d)}),e=d.abort;d.abort=function(){d.aborted=!0;return e.apply(d,arguments)};d.uri=a.uri;
d.requestTime=Date.now();return d}},Wj=function(a){var b={};a.byterange&&(a=a.byterange,b.Range="bytes="+a.offset+"-"+(a.offset+a.length-1));return b},Ul=function(a,b){a=a.toString(16);return"00".substring(0,2-a.length)+a+(b%2?" ":"")},Vl=function(a){return 32<=a&&126>a?String.fromCharCode(a):"."},Mk=function(a){var b={};Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d});return b},xj=function(a){var b=
a.byterange||{length:Infinity,offset:0};return[b.length,b.offset,a.resolvedUri].join()},Nk=function(a){a=Array.prototype.slice.call(a);for(var b="",c,d,e=0;e<a.length/16;e++)c=a.slice(16*e,16*e+16).map(Ul).join(""),d=a.slice(16*e,16*e+16).map(Vl).join(""),b+=c+" "+d+"\n";return b},Wl=Object.freeze({createTransferableMessage:Mk,initSegmentId:xj,segmentKeyId:function(a){return a.resolvedUri},hexDump:Nk,tagDump:function(a){return Nk(a.bytes)},textRanges:function(a){var b="",c;for(c=0;c<a.length;c++){var d=
a;var e=c;d=d.start(e)+"-"+d.end(e);b+=d+" "}return b}}),Xl=function(a,b){var c=void 0;try{c=new Date(a)}catch(Oj){return null}if(!b||!b.segments||0===b.segments.length)return null;a=b.segments[0];if(c<a.dateTimeObject)return null;for(var d=0;d<b.segments.length-1&&!(a=b.segments[d],c<b.segments[d+1].dateTimeObject);d++);d=b.segments[b.segments.length-1];var e=d.dateTimeObject;if(d.videoTimingInfo){var f=d.videoTimingInfo;f=f.transmuxedPresentationEnd-f.transmuxedPresentationStart-f.transmuxerPrependedSeconds}else f=
d.duration+.25*d.duration;f=new Date(e.getTime()+1E3*f);if(c>f)return null;c>e&&(a=d);return{segment:a,estimatedStart:a.videoTimingInfo?a.videoTimingInfo.transmuxedPresentationStart:Ed.duration(b,b.mediaSequence+b.segments.indexOf(a)),type:a.videoTimingInfo?"accurate":"estimate"}},Yl=function(a,b){if(!b||!b.segments||0===b.segments.length)return null;for(var c=0,d=void 0,e=0;e<b.segments.length&&!(d=b.segments[e],c=d.videoTimingInfo?d.videoTimingInfo.transmuxedPresentationEnd:c+d.duration,a<=c);e++);
b=b.segments[b.segments.length-1];if(b.videoTimingInfo&&b.videoTimingInfo.transmuxedPresentationEnd<a)return null;if(a>c){if(a>c+.25*b.duration)return null;d=b}return{segment:d,estimatedStart:d.videoTimingInfo?d.videoTimingInfo.transmuxedPresentationStart:c-d.duration,type:d.videoTimingInfo?"accurate":"estimate"}},Zl=function(a,b){var c=void 0,d=void 0;try{c=new Date(a),d=new Date(b)}catch(Eh){}a=c.getTime();return(d.getTime()-a)/1E3},$l=function(a){if(!a.segments||0===a.segments.length)return!1;
for(var b=0;b<a.segments.length;b++)if(!a.segments[b].dateTimeObject)return!1;return!0},am=function(a){var b=a.playlist,c=a.time;c=void 0===c?void 0:c;a=a.callback;if(!a)throw Error("getProgramTime: callback must be provided");if(!b||void 0===c)return a({message:"getProgramTime: playlist and time must be provided"});var d=Yl(c,b);if(!d)return a({message:"valid programTime was not found"});if("estimate"===d.type)return a({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",
seekTime:d.estimatedStart});b={mediaSeconds:c};d=d.segment;d.dateTimeObject?(c-=d.videoTimingInfo.transmuxedPresentationStart+d.videoTimingInfo.transmuxerPrependedSeconds,c=new Date(d.dateTimeObject.getTime()+1E3*c)):c=null;c&&(b.programDateTime=c.toISOString());return a(null,b)},bm=function Dd(a){var b=a.programTime,c=a.playlist,d=a.retryCount,e=void 0===d?2:d,f=a.seekTo;d=a.pauseAfterSeek;var g=void 0===d?!0:d,n=a.tech,h=a.callback;if(!h)throw Error("seekToProgramTime: callback must be provided");
if("undefined"===typeof b||!c||!f)return h({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!c.endList&&!n.hasStarted_)return h({message:"player must be playing a live stream to start buffering"});if(!$l(c))return h({message:"programDateTime tags must be provided in the manifest "+c.resolvedUri});a=Xl(b,c);if(!a)return h({message:b+" was not found in the stream"});d=a.segment;var k=Zl(d.dateTimeObject,b);if("estimate"===a.type){if(0===e)return h({message:b+" is not buffered yet. Try again"});
f(a.estimatedStart+k);n.one("seeked",function(){Dd({programTime:b,playlist:c,retryCount:e-1,seekTo:f,pauseAfterSeek:g,tech:n,callback:h})})}else a=d.start+k,n.one("seeked",function(){return h(null,n.currentTime())}),g&&n.pause(),f(a)},pi=1/30,Hh=3*pi,Ok=function(a,b){var c=[],d;if(a&&a.length)for(d=0;d<a.length;d++)b(a.start(d),a.end(d))&&c.push([a.start(d),a.end(d)]);return J.createTimeRanges(c)},Pk=function(a,b){return Ok(a,function(a,c){return a-pi<=b&&c+pi>=b})},Qk=function(a,b){return Ok(a,function(a){return a-
pi>=b})},Xj=function(a){var b=[];if(!a||!a.length)return"";for(var c=0;c<a.length;c++)b.push(a.start(c)+" => "+a.end(c));return b.join(", ")},cm=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return((a.length?a.end(a.length-1):0)-b)/c},Rk=function(a){for(var b=[],c=0;c<a.length;c++)b.push({start:a.start(c),end:a.end(c)});return b},qi=function(a,b,c){var d;if(c&&c.cues)for(d=c.cues.length;d--;){var e=c.cues[d];e.startTime<=b&&e.endTime>=a&&c.removeCue(e)}},dm=function(a){Object.defineProperties(a.frame,
{id:{get:function(){J.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return a.value.key}},value:{get:function(){J.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return a.value.data}},privateData:{get:function(){J.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return a.value.data}}})},Sk=function(a){return isNaN(a)||Infinity===Math.abs(a)?Number.MAX_VALUE:a},em=function(a,b,c){var d=h.WebKitDataCue||h.VTTCue;b&&b.forEach(function(a){this.inbandTextTracks_[a.stream].addCue(new d(a.startTime+
this.timestampOffset,a.endTime+this.timestampOffset,a.text))},a);if(c){var e=Sk(a.mediaSource_.duration);c.forEach(function(a){var b=a.cueTime+this.timestampOffset;!("number"!==typeof b||h.isNaN(b)||0>b)&&Infinity>b&&a.frames.forEach(function(a){var c=new d(b,b,a.value||a.url||a.data||"");c.frame=a;c.value=a;dm(c);this.metadataTrack_.addCue(c)},this)},a);if(a.metadataTrack_&&a.metadataTrack_.cues&&a.metadataTrack_.cues.length){a=a.metadataTrack_.cues;b=[];for(c=0;c<a.length;c++)a[c]&&b.push(a[c]);
var f=b.reduce(function(a,b){var c=a[b.startTime]||[];c.push(b);a[b.startTime]=c;return a},{}),g=Object.keys(f).sort(function(a,b){return Number(a)-Number(b)});g.forEach(function(a,b){var c=Number(g[b+1])||e;f[a].forEach(function(a){a.endTime=c})})}}},Ih="undefined"!==typeof window?window:{},Pj="undefined"===typeof Symbol?"__target":Symbol(),zl=Ih.BlobBuilder||Ih.WebKitBlobBuilder||Ih.MozBlobBuilder||Ih.MSBlobBuilder,oi=Ih.URL||Ih.webkitURL||oi&&oi.msURL,ni=Ih.Worker;if(ni){var Tk=Ke("self.onmessage = function () {}"),
Uk=new Uint8Array(1);try{var Yj=new ni(Tk);Yj.postMessage(Uk,[Uk.buffer])}catch(dh){ni=null}finally{oi.revokeObjectURL(Tk),Yj&&Yj.terminate()}}var gm=new lg("./transmuxer-worker.worker.js",function(a,b){var c=this;(function(){var a=Math.pow(2,32)-1,b,d,e,f,g,n,h,k,w,l,m,t,p,r,I,u;(function(){var a;e={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],
stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(a in e)e.hasOwnProperty(a)&&(e[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);f=new Uint8Array([105,115,111,109]);n=new Uint8Array([97,118,99,49]);g=new Uint8Array([0,0,0,1]);h=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);k=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,
0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);w={video:h,audio:k};t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);m=new Uint8Array([0,0,0,0,0,0,0,0]);r=p=new Uint8Array([0,0,0,0,0,0,0,0]);I=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);u=p;l=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var q=function(a){var b=[],c=0,d;for(d=1;d<arguments.length;d++)b.push(arguments[d]);for(d=b.length;d--;)c+=b[d].byteLength;var e=new Uint8Array(c+8);(new DataView(e.buffer,e.byteOffset,
e.byteLength)).setUint32(0,e.byteLength);e.set(a,4);d=0;for(c=8;d<b.length;d++)e.set(b[d],c),c+=b[d].byteLength;return e};var x=function(){return q(e.dinf,q(e.dref,t))};var z=function(a){return q(e.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))};var y=function(){return q(e.ftyp,f,g,f,n)};var P=function(a){return q(e.hdlr,w[a])};var B=function(a){var b=new Uint8Array([0,
0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,a.duration&255,85,196,0,0]);a.samplerate&&(b[12]=a.samplerate>>>24&255,b[13]=a.samplerate>>>16&255,b[14]=a.samplerate>>>8&255,b[15]=a.samplerate&255);return q(e.mdhd,b)};var C=function(a){return q(e.mdia,B(a),P(a.type),Qc(a))};var A=function(a){return q(e.mfhd,new Uint8Array([0,0,0,0,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]))};var Qc=function(a){return q(e.minf,"video"===a.type?q(e.vmhd,l):q(e.smhd,
m),x(),G(a))};var E=function(a){for(var b=a.length,c=[];b--;)c[b]=M(a[b]);return q.apply(null,[e.moov,F(4294967295)].concat(c).concat(Jb(a)))};var Jb=function(a){for(var b=a.length,c=[];b--;)c[b]=K(a[b]);return q.apply(null,[e.mvex].concat(c))};var F=function(a){a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return q(e.mvhd,a)};var H=function(a){a=a.samples||[];var b=new Uint8Array(4+a.length),c;for(c=0;c<a.length;c++){var d=a[c].flags;b[c+4]=d.dependsOn<<4|d.isDependedOn<<2|d.hasRedundancy}return q(e.sdtp,b)};var G=function(a){return q(e.stbl,b(a),q(e.stts,u),q(e.stsc,r),q(e.stsz,I),q(e.stco,p))};(function(){b=function(b){return q(e.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===b.type?a(b):c(b))};var a=function(a){var b=a.sps||[],c=a.pps||[],d=[],f=[],g;for(g=
0;g<b.length;g++)d.push((b[g].byteLength&65280)>>>8),d.push(b[g].byteLength&255),d=d.concat(Array.prototype.slice.call(b[g]));for(g=0;g<c.length;g++)f.push((c[g].byteLength&65280)>>>8),f.push(c[g].byteLength&255),f=f.concat(Array.prototype.slice.call(c[g]));return q(e.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(a.width&65280)>>8,a.width&255,(a.height&65280)>>8,a.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,
115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),q(e.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([b.length]).concat(d).concat([c.length]).concat(f))),q(e.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};var c=function(a){return q(e.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(a.channelcount&65280)>>8,a.channelcount&255,(a.samplesize&65280)>>8,a.samplesize&255,0,0,0,0,(a.samplerate&65280)>>8,a.samplerate&255,0,0]),z(a))}})();var L=function(a){a=
new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,0,(a.duration&4278190080)>>24,(a.duration&16711680)>>16,(a.duration&65280)>>8,a.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(a.width&65280)>>8,a.width&255,0,0,(a.height&65280)>>8,a.height&255,0,0]);return q(e.tkhd,a)};var v=function(b){var c=q(e.tfhd,new Uint8Array([0,0,0,58,(b.id&4278190080)>>24,(b.id&16711680)>>
16,(b.id&65280)>>8,b.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var f=Math.floor(b.baseMediaDecodeTime/(a+1));var g=Math.floor(b.baseMediaDecodeTime%(a+1));f=q(e.tfdt,new Uint8Array([1,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255,g>>>24&255,g>>>16&255,g>>>8&255,g&255]));if("audio"===b.type)return b=d(b,92),q(e.traf,c,f,b);g=H(b);b=d(b,g.length+92);return q(e.traf,c,f,b,g)};var M=function(a){a.duration=a.duration||4294967295;return q(e.trak,L(a),C(a))};var K=function(a){var b=new Uint8Array([0,0,0,0,
(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==a.type&&(b[b.length-1]=0);return q(e.trex,b)};(function(){var a=function(a,b){var c=0,d=0,e=0,f=0;a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(d=2),void 0!==a[0].flags&&(e=4),void 0!==a[0].compositionTimeOffset&&(f=8));return[0,0,c|d|e|f,1,(a.length&4278190080)>>>24,(a.length&16711680)>>>16,(a.length&65280)>>>8,a.length&255,(b&4278190080)>>>24,(b&16711680)>>>16,(b&65280)>>>
8,b&255]};var b=function(b,c){var d;b=b.samples||[];c+=20+16*b.length;c=a(b,c);for(d=0;d<b.length;d++){var f=b[d];c=c.concat([(f.duration&4278190080)>>>24,(f.duration&16711680)>>>16,(f.duration&65280)>>>8,f.duration&255,(f.size&4278190080)>>>24,(f.size&16711680)>>>16,(f.size&65280)>>>8,f.size&255,f.flags.isLeading<<2|f.flags.dependsOn,f.flags.isDependedOn<<6|f.flags.hasRedundancy<<4|f.flags.paddingValue<<1|f.flags.isNonSyncSample,f.flags.degradationPriority&61440,f.flags.degradationPriority&15,(f.compositionTimeOffset&
4278190080)>>>24,(f.compositionTimeOffset&16711680)>>>16,(f.compositionTimeOffset&65280)>>>8,f.compositionTimeOffset&255])}return q(e.trun,new Uint8Array(c))};var c=function(b,c){var d;b=b.samples||[];c+=20+8*b.length;c=a(b,c);for(d=0;d<b.length;d++){var f=b[d];c=c.concat([(f.duration&4278190080)>>>24,(f.duration&16711680)>>>16,(f.duration&65280)>>>8,f.duration&255,(f.size&4278190080)>>>24,(f.size&16711680)>>>16,(f.size&65280)>>>8,f.size&255])}return q(e.trun,new Uint8Array(c))};d=function(a,d){return"audio"===
a.type?c(a,d):b(a,d)}})();var oa={ftyp:y,mdat:function(a){return q(e.mdat,a)},moof:function(a,b){for(var c=[],d=b.length;d--;)c[d]=v(b[d]);return q.apply(null,[e.moof,A(a)].concat(c))},moov:E,initSegment:function(a){var b=y();a=E(a);var c=new Uint8Array(b.byteLength+a.byteLength);c.set(b);c.set(a,b.byteLength);return c}},nb=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]);a[b]=a[b].concat(c)};this.off=function(b,c){if(!a[b])return!1;c=a[b].indexOf(c);a[b]=a[b].slice();
a[b].splice(c,1);return-1<c};this.trigger=function(b){var c,d;if(c=a[b])if(2===arguments.length){var e=c.length;for(d=0;d<e;++d)c[d].call(this,arguments[1])}else{var f=[];for(d=1;d<arguments.length;++d)f.push(arguments[d]);e=c.length;for(d=0;d<e;++d)c[d].apply(this,f)}};this.dispose=function(){a={}}}};nb.prototype.pipe=function(a){this.on("data",function(b){a.push(b)});this.on("done",function(b){a.flush(b)});return a};nb.prototype.push=function(a){this.trigger("data",a)};nb.prototype.flush=function(a){this.trigger("done",
a)};var da={groupNalsIntoFrames:function(a){var b,c=[],d=[];for(b=c.byteLength=0;b<a.length;b++){var e=a[b];"access_unit_delimiter_rbsp"===e.nalUnitType?(c.length&&(c.duration=e.dts-c.dts,d.push(c)),c=[e],c.byteLength=e.data.byteLength,c.pts=e.pts,c.dts=e.dts):("slice_layer_without_partitioning_rbsp_idr"===e.nalUnitType&&(c.keyFrame=!0),c.duration=e.dts-c.dts,c.byteLength+=e.data.byteLength,c.push(e))}d.length&&(!c.duration||0>=c.duration)&&(c.duration=d[d.length-1].duration);d.push(c);return d},
groupFramesIntoGops:function(a){var b,c=[],d=[];c.byteLength=0;c.nalCount=0;c.duration=0;c.pts=a[0].pts;c.dts=a[0].dts;d.byteLength=0;d.nalCount=0;d.duration=0;d.pts=a[0].pts;d.dts=a[0].dts;for(b=0;b<a.length;b++){var e=a[b];e.keyFrame?(c.length&&(d.push(c),d.byteLength+=c.byteLength,d.nalCount+=c.nalCount,d.duration+=c.duration),c=[e],c.nalCount=e.length,c.byteLength=e.byteLength,c.pts=e.pts,c.dts=e.dts,c.duration=e.duration):(c.duration+=e.duration,c.nalCount+=e.length,c.byteLength+=e.byteLength,
c.push(e))}d.length&&0>=c.duration&&(c.duration=d[d.length-1].duration);d.byteLength+=c.byteLength;d.nalCount+=c.nalCount;d.duration+=c.duration;d.push(c);return d},extendFirstKeyFrame:function(a){if(!a[0][0].keyFrame&&1<a.length){var b=a.shift();a.byteLength-=b.byteLength;a.nalCount-=b.nalCount;a[0][0].dts=b.dts;a[0][0].pts=b.pts;a[0][0].duration+=b.duration}return a},generateSampleTable:function(a,b){var c,d=b||0,e=[];for(b=0;b<a.length;b++){var f=a[b];for(c=0;c<f.length;c++){var g=f[c];var n={size:0,
flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};n.dataOffset=d;n.compositionTimeOffset=g.pts-g.dts;n.duration=g.duration;n.size=4*g.length;n.size+=g.byteLength;g.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0);g=n;d+=g.size;e.push(g)}}return e},concatenateNalData:function(a){var b,c,d,e=0,f=new Uint8Array(a.byteLength+4*a.nalCount),g=new DataView(f.buffer);for(b=0;b<a.length;b++){var n=a[b];for(c=0;c<n.length;c++){var h=n[c];for(d=
0;d<h.length;d++){var k=h[d];g.setUint32(e,k.data.byteLength);e+=4;f.set(k.data,e);e+=k.data.byteLength}}}return f}},X=[33,16,5,32,164,27],V=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Q=function(a){for(var b=[];a--;)b.push(0);return b},R=function(a){return Object.keys(a).reduce(function(b,c){b[c]=new Uint8Array(a[c].reduce(function(a,b){return a.concat(b)},[]));return b},{})}({96E3:[X,[227,64],Q(154),[56]],88200:[X,[231],Q(170),[56]],64E3:[X,[248,192],Q(240),[56]],48E3:[X,[255,192],Q(268),[55,148,
128],Q(54),[112]],44100:[X,[255,192],Q(268),[55,163,128],Q(84),[112]],32E3:[X,[255,192],Q(268),[55,234],Q(226),[112]],24E3:[X,[255,192],Q(268),[55,255,128],Q(268),[111,112],Q(126),[224]],16E3:[X,[255,192],Q(268),[55,255,128],Q(268),[111,255],Q(269),[223,108],Q(195),[1,192]],12E3:[V,Q(268),[3,127,248],Q(268),[6,255,240],Q(268),[13,255,224],Q(268),[27,253,128],Q(259),[56]],11025:[V,Q(268),[3,127,248],Q(268),[6,255,240],Q(268),[13,255,224],Q(268),[27,255,192],Q(268),[55,175,128],Q(108),[112]],8E3:[V,
Q(268),[3,121,16],Q(47),[7]]});var ba=function(a){return 9E4*a};var zf=function(a,b){return a*b};var Af=function(a){return a/9E4};var qa=function(a,b){return a/b};var La={secondsToVideoTs:ba,secondsToAudioTs:zf,videoTsToSeconds:Af,audioTsToSeconds:qa,audioTsToVideoTs:function(a,b){return ba(qa(a,b))},videoTsToAudioTs:function(a,b){return zf(Af(a),b)}},Aa={prefixWithSilence:function(a,b,c,d){var e,f=e=0;if(b.length){var g=La.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate);var n=Math.ceil(9E4/
(a.samplerate/1024));c&&d&&(e=g-Math.max(c,d),e=Math.floor(e/n),f=e*n);if(!(1>e||45E3<f)){n=R[a.samplerate];n||(n=b[0].data);for(c=0;c<e;c++)b.splice(c,0,{data:n});a.baseMediaDecodeTime-=Math.floor(La.videoTsToAudioTs(f,a.samplerate))}}},trimAdtsFramesByEarliestDts:function(a,b,c){if(b.minSegmentDts>=c)return a;b.minSegmentDts=Infinity;return a.filter(function(a){return a.dts>=c?(b.minSegmentDts=Math.min(b.minSegmentDts,a.dts),b.minSegmentPts=b.minSegmentDts,!0):!1})},generateSampleTable:function(a){var b,
c=[];for(b=0;b<a.length;b++){var d=a[b];c.push({size:d.data.byteLength,duration:1024})}return c},concatenateFrameData:function(a){var b,c=0;var d=Uint8Array;var e=0;for(b=0;b<a.length;b++){var f=a[b];e+=f.data.byteLength}f=new d(e);for(d=0;d<a.length;d++)b=a[d],f.set(b.data,c),c+=b.data.byteLength;return f}},U={clearDtsInfo:function(a){delete a.minSegmentDts;delete a.maxSegmentDts;delete a.minSegmentPts;delete a.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(a,b){var c=a.minSegmentDts;
b||(c-=a.timelineStartInfo.dts);b=a.timelineStartInfo.baseMediaDecodeTime;b=Math.max(0,b+c);"audio"===a.type&&(a=a.samplerate/9E4,b=Math.floor(b*a));return b},collectDtsInfo:function(a,b){"number"===typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts=void 0===a.minSegmentPts?b.pts:Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts=void 0===a.maxSegmentPts?b.pts:Math.max(a.maxSegmentPts,b.pts));"number"===typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=
b.dts),a.minSegmentDts=void 0===a.minSegmentDts?b.dts:Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?b.dts:Math.max(a.maxSegmentDts,b.dts))}},ed={parseSei:function(a){for(var b=0,c={payloadType:-1,payloadSize:0},d=0,e=0;b<a.byteLength&&128!==a[b];){for(;255===a[b];)d+=255,b++;for(d+=a[b++];255===a[b];)e+=255,b++;e+=a[b++];if(!c.payload&&4===d){c.payloadType=d;c.payloadSize=e;c.payload=a.subarray(b,b+e);break}b+=e;e=d=0}return c},parseUserData:function(a){return 181!==a.payload[0]||
49!==(a.payload[1]<<8|a.payload[2])||"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])||3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},parseCaptionPackets:function(a,b){var c=[],d;if(!(b[0]&64))return c;var e=b[0]&31;for(d=0;d<e;d++){var f=3*d;var g={type:b[f+2]&3,pts:a};b[f+2]&4&&(g.ccData=b[f+3]<<8|b[f+4],c.push(g))}return c},discardEmulationPreventionBytes:function(a){for(var b=a.byteLength,c=[],d=1,e;d<b-2;)0===a[d]&&0===a[d+1]&&3===a[d+2]?(c.push(d+
2),d+=2):d++;if(0===c.length)return a;b-=c.length;e=new Uint8Array(b);var f=0;for(d=0;d<b;f++,d++)f===c[0]&&(f++,c.shift()),e[d]=a[f];return e},USER_DATA_REGISTERED_ITU_T_T35:4};X=function fm(){fm.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new Ba(0,0),new Ba(0,1),new Ba(1,0),new Ba(1,1)];this.reset();this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data"));a.on("done",this.trigger.bind(this,"done"))},this)};X.prototype=new nb;X.prototype.push=function(a){if("sei_rbsp"===
a.nalUnitType){var b=ed.parseSei(a.escapedRBSP);b.payloadType===ed.USER_DATA_REGISTERED_ITU_T_T35&&(b=ed.parseUserData(b))&&(a.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:a.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(b=ed.parseCaptionPackets(a.pts,b),this.captionPackets_=this.captionPackets_.concat(b),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts))}};X.prototype.flush=function(){this.captionPackets_.length?
(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){2>a.type&&this.dispatchCea608Packet(a)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(a){a.flush()},this)):this.ccStreams_.forEach(function(a){a.flush()},this)};X.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=
[null,null];this.ccStreams_.forEach(function(a){a.reset()})};X.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};X.prototype.setsChannel1Active=function(a){return 4096===(a.ccData&30720)};X.prototype.setsChannel2Active=
function(a){return 6144===(a.ccData&30720)};X.prototype.setsTextOrXDSActive=function(a){return 256===(a.ccData&28928)||4138===(a.ccData&30974)||6186===(a.ccData&30974)};var ia={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,
559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ma=function(a){if(null===a)return"";a=ia[a]||a;return String.fromCharCode(a)},D=[4352,4384,4608,4640,5376,
5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Dd=function(){for(var a=[],b=15;b--;)a.push("");return a},Ba=function Zj(a,b){Zj.prototype.init.call(this);this.field_=a||0;this.dataChannel_=b||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(a){var b=a.ccData&32639;if(b===this.lastControlCode_)this.lastControlCode_=null;else{4096===(b&61440)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null);var c=b>>>8;var d=b&255;
b!==this.PADDING_&&(b===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":b===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),d=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=d,this.startPts_=a.pts):b===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(a.pts)):b===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(a.pts)):b===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(a.pts)):b===this.CARRIAGE_RETURN_?(this.clearFormatting(a.pts),
this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts):b===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):b===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(a.pts),this.displayed_=Dd()):b===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=Dd():b===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=Dd()),
this.mode_="paintOn",this.startPts_=a.pts):this.isSpecialCharacter(c,d)?(b=Ma((c&3)<<8|d),this[this.mode_](a.pts,b),this.column_++):this.isExtCharacter(c,d)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),b=Ma((c&3)<<8|d),this[this.mode_](a.pts,b),this.column_++):this.isMidRowCode(c,d)?(this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14===(d&14)&&this.addFormatting(a.pts,
["i"]),1===(d&1)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(c,d)?this.column_+=d&3:this.isPAC(c,d)?(c=D.indexOf(b&7968),"rollUp"===this.mode_&&(0>c-this.rollUpRows_+1&&(c=this.rollUpRows_-1),this.setRollUp(a.pts,c)),c!==this.row_&&(this.clearFormatting(a.pts),this.row_=c),d&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16===(b&16)&&(this.column_=4*((b&14)>>1)),this.isColorPAC(d)&&14===(d&14)&&this.addFormatting(a.pts,["i"])):this.isNormalChar(c)&&(0===d&&(d=
null),b=Ma(c),b+=Ma(d),this[this.mode_](a.pts,b),this.column_+=b.length))}}};Ba.prototype=new nb;Ba.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){try{return a.trim()}catch($m){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})};Ba.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=Dd();this.nonDisplayed_=
Dd();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};Ba.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|
38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};Ba.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&48<=b&&63>=b};Ba.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=b&&63>=b};Ba.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&32<=
b&&47>=b};Ba.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&33<=b&&35>=b};Ba.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&64<=b&&127>=b};Ba.prototype.isColorPAC=function(a){return 64<=a&&79>=a||96<=a&&127>=a};Ba.prototype.isNormalChar=function(a){return 32<=a&&127>=a};Ba.prototype.setRollUp=function(a,b){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=Dd(),this.displayed_=Dd());if(void 0!==b&&b!==this.row_)for(a=
0;a<this.rollUpRows_;a++)this.displayed_[b-a]=this.displayed_[this.row_-a],this.displayed_[this.row_-a]="";void 0===b&&(b=this.row_);this.topRow_=b-this.rollUpRows_+1};Ba.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);b=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,b)};Ba.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[];this[this.mode_](a,
b)}};Ba.prototype.popOn=function(a,b){this.nonDisplayed_[this.row_]+=b};Ba.prototype.rollUp=function(a,b){this.displayed_[this.row_]+=b};Ba.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;15>a;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""};Ba.prototype.paintOn=function(a,b){this.displayed_[this.row_]+=b};V=Ba;var Z={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,
METADATA_STREAM_TYPE:21},Wc=function(a,b){var c=1;for(a>b&&(c=-1);4294967296<Math.abs(b-a);)a+=8589934592*c;return a};Q=function Zj(a){var b,c;Zj.prototype.init.call(this);this.type_=a;this.push=function(a){a.type===this.type_&&(void 0===c&&(c=a.dts),a.dts=Wc(a.dts,c),a.pts=Wc(a.pts,c),b=a.dts,this.trigger("data",a))};this.flush=function(){c=b;this.trigger("done")};this.discontinuity=function(){b=c=void 0}};Q.prototype=new nb;var Mc=function(a,b,c){for(var d="";b<c;b++)d+="%"+("00"+a[b].toString(16)).slice(-2);
return d},dh=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},ya={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(Mc(a.data,1,b));a.value=decodeURIComponent(Mc(a.data,b+1,a.data.length)).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(Mc(a.data,1,b));a.url=decodeURIComponent(Mc(a.data,b+1,a.data.length));break}},
PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=unescape(Mc(a.data,0,b));break}a.privateData=a.data.subarray(b+1);a.data=a.privateData}};var va=function(a){var b=!(!a||!a.debug);a=a&&a.descriptor;var c=0,d=[],e=0,f;va.prototype.init.call(this);this.dispatchType=Z.METADATA_STREAM_TYPE.toString(16);if(a)for(f=0;f<a.length;f++)this.dispatchType+=("00"+a[f].toString(16)).slice(-2);this.push=function(a){var f;if("timed-metadata"===a.type)if(a.dataAlignmentIndicator&&(e=0,d.length=
0),0===d.length&&(10>a.data.length||73!==a.data[0]||68!==a.data[1]||51!==a.data[2]))b&&console.log("Skipping unrecognized metadata packet");else if(d.push(a),e+=a.data.byteLength,1===d.length&&(c=dh(a.data.subarray(6,10)),c+=10),!(e<c)){a={data:new Uint8Array(c),frames:[],pts:d[0].pts,dts:d[0].dts};for(f=0;f<c;)a.data.set(d[0].data.subarray(0,c-f),f),f+=d[0].data.byteLength,e-=d[0].data.byteLength,d.shift();f=10;a.data[5]&64&&(f=f+4+dh(a.data.subarray(10,14)),c-=dh(a.data.subarray(16,20)));do{var g=
dh(a.data.subarray(f+4,f+8));if(1>g)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");var n=String.fromCharCode(a.data[f],a.data[f+1],a.data[f+2],a.data[f+3]);n={id:n,data:a.data.subarray(f+10,f+g+10)};n.key=n.id;if(ya[n.id]&&(ya[n.id](n),"com.apple.streaming.transportStreamTimestamp"===n.owner)){var h=n.data,k=(h[3]&1)<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;k*=4;k+=h[7]&3;n.timeStamp=k;void 0===a.pts&&void 0===a.dts&&(a.pts=n.timeStamp,a.dts=n.timeStamp);this.trigger("timestamp",
n)}a.frames.push(n);f+=10;f+=g}while(f<c);this.trigger("data",a)}}};va.prototype=new nb;var Ud=function(){var a=new Uint8Array(188),b=0;Ud.prototype.init.call(this);this.push=function(c){var d=0,e=188;if(b){var f=new Uint8Array(c.byteLength+b);f.set(a.subarray(0,b));f.set(c,b);b=0}else f=c;for(;e<f.byteLength;)71===f[d]&&71===f[e]?(this.trigger("data",f.subarray(d,e)),d+=188,e+=188):(d++,e++);d<f.byteLength&&(a.set(f.subarray(d),0),b=f.byteLength-d)};this.flush=function(){188===b&&71===a[0]&&(this.trigger("data",
a),b=0);this.trigger("done")}};Ud.prototype=new nb;var ma=function(){ma.prototype.init.call(this);var a=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var b=function(a,b){var e=0;b.payloadUnitStartIndicator&&(e+=a[e]+1);"pat"===b.type?c(a.subarray(e),b):d(a.subarray(e),b)};var c=function(b,c){c.section_number=b[7];c.last_section_number=b[8];a.pmtPid=(b[10]&31)<<8|b[11];c.pmtPid=a.pmtPid};var d=function(b,c){var d;if(b[5]&1){a.programMapTable={video:null,audio:null,"timed-metadata":{}};
var e=3+((b[1]&15)<<8|b[2])-4;for(d=12+((b[10]&15)<<8|b[11]);d<e;){var f=b[d],g=(b[d+1]&31)<<8|b[d+2];f===Z.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=g:f===Z.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?a.programMapTable.audio=g:f===Z.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][g]=f);d+=((b[d+3]&15)<<8|b[d+4])+5}c.programMapTable=a.programMapTable}};this.push=function(a){var c={},d=4;c.payloadUnitStartIndicator=!!(a[1]&64);c.pid=a[1]&31;c.pid<<=8;
c.pid|=a[2];1<(a[3]&48)>>>4&&(d+=a[d]+1);if(0===c.pid)c.type="pat",b(a.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",b(a.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,d,c]):this.processPes_(a,d,c)};this.processPes_=function(a,b,c){c.streamType=c.pid===this.programMapTable.video?Z.H264_STREAM_TYPE:c.pid===
this.programMapTable.audio?Z.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][c.pid];c.type="pes";c.data=a.subarray(b);this.trigger("data",c)}};ma.prototype=new nb;ma.STREAM_TYPES={h264:27,adts:15};var Ea=function(){var a=this,b={data:[],size:0},c={data:[],size:0},d={data:[],size:0},e=function(b,c,d){var e=new Uint8Array(b.size),f={type:c},g,n=0;if(b.data.length&&!(9>b.size)){f.trackId=b.data[0].pid;for(g=0;g<b.data.length;g++){var h=b.data[g];e.set(h.data,n);n+=h.data.byteLength}f.packetLength=
6+(e[4]<<8|e[5]);f.dataAlignmentIndicator=0!==(e[6]&4);g=e[7];g&192&&(f.pts=(e[9]&14)<<27|(e[10]&255)<<20|(e[11]&254)<<12|(e[12]&255)<<5|(e[13]&254)>>>3,f.pts*=4,f.pts+=(e[13]&6)>>>1,f.dts=f.pts,g&64&&(f.dts=(e[14]&14)<<27|(e[15]&255)<<20|(e[16]&254)<<12|(e[17]&255)<<5|(e[18]&254)>>>3,f.dts*=4,f.dts+=(e[18]&6)>>>1));f.data=e.subarray(9+e[8]);c="video"===c||f.packetLength<=b.size;if(d||c)b.size=0,b.data.length=0;c&&a.trigger("data",f)}};Ea.prototype.init.call(this);this.push=function(f){({pat:function(){},
pes:function(){switch(f.streamType){case Z.H264_STREAM_TYPE:case Z.H264_STREAM_TYPE:var a=b;var g="video";break;case Z.ADTS_STREAM_TYPE:a=c;g="audio";break;case Z.METADATA_STREAM_TYPE:a=d;g="timed-metadata";break;default:return}f.payloadUnitStartIndicator&&e(a,g,!0);a.data.push(f);a.size+=f.data.byteLength},pmt:function(){var b={type:"metadata",tracks:[]},c=f.programMapTable;null!==c.video&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.video,codec:"avc",type:"video"});null!==c.audio&&
b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.audio,codec:"adts",type:"audio"});a.trigger("data",b)}})[f.type]()};this.flush=function(){e(b,"video");e(c,"audio");e(d,"timed-metadata");this.trigger("done")}};Ea.prototype=new nb;var ea={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Ud,TransportParseStream:ma,ElementaryStream:Ea,TimestampRolloverStream:Q,CaptionStream:X,Cea608Stream:V,MetadataStream:va},Pb;for(Pb in Z)Z.hasOwnProperty(Pb)&&(ea[Pb]=Z[Pb]);var xb=[96E3,88200,
64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var Ka=function(){var a;Ka.prototype.init.call(this);this.push=function(b){var c=0,d=0;if("audio"===b.type){if(a){var e=a;a=new Uint8Array(e.byteLength+b.data.byteLength);a.set(e);a.set(b.data,e.byteLength)}else a=b.data;for(;c+5<a.length;)if(255!==a[c]||240!==(a[c+1]&246))c++;else{e=2*(~a[c+1]&1);var f=(a[c+3]&3)<<11|a[c+4]<<3|(a[c+5]&224)>>5;var g=1024*((a[c+6]&3)+1);var n=9E4*g/xb[(a[c+2]&60)>>>2];f=c+f;if(a.byteLength<f)break;this.trigger("data",
{pts:b.pts+d*n,dts:b.dts+d*n,sampleCount:g,audioobjecttype:(a[c+2]>>>6&3)+1,channelcount:(a[c+2]&1)<<2|(a[c+3]&192)>>>6,samplerate:xb[(a[c+2]&60)>>>2],samplingfrequencyindex:(a[c+2]&60)>>>2,samplesize:16,data:a.subarray(c+7+e,f)});if(a.byteLength===f){a=void 0;break}d++;a=a.subarray(f)}}};this.flush=function(){this.trigger("done")}};Ka.prototype=new nb;var W=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b};this.bitsAvailable=function(){return 8*b+d};this.loadWord=function(){var e=
a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw Error("no bytes available");f.set(a.subarray(e,e+g));c=(new DataView(f.buffer)).getUint32(0);d=8*g;b-=g};this.skipBits=function(a){if(!(d>a)){a-=d;var e=Math.floor(a/8);a-=8*e;b-=e;this.loadWord()}c<<=a;d-=a};this.readBits=function(a){var e=Math.min(d,a),f=c>>>32-e;d-=e;0<d?c<<=e:0<b&&this.loadWord();e=a-e;return 0<e?f<<e|this.readBits(e):f};this.skipLeadingZeros=function(){var a;for(a=0;a<d;++a)if(0!==(c&2147483648>>>a))return c<<=
a,d-=a,a;this.loadWord();return a+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};
this.loadWord()};var za=function(){var a=0,b,c;za.prototype.init.call(this);this.push=function(d){if(c){var e=new Uint8Array(c.byteLength+d.data.byteLength);e.set(c);e.set(d.data,c.byteLength);c=e}else c=d.data;for(;a<c.byteLength-3;a++)if(1===c[a+2]){b=a+5;break}for(;b<c.byteLength;)switch(c[b]){case 0:if(0!==c[b-1]){b+=2;break}else if(0!==c[b-2]){b++;break}a+3!==b-2&&this.trigger("data",c.subarray(a+3,b-2));do b++;while(1!==c[b]&&b<c.length);a=b-2;b+=3;break;case 1:if(0!==c[b-1]||0!==c[b-2]){b+=
3;break}this.trigger("data",c.subarray(a+3,b-2));a=b-2;b+=3;break;default:b+=3}c=c.subarray(a);b-=a;a=0};this.flush=function(){c&&3<c.byteLength&&this.trigger("data",c.subarray(a+3));c=null;a=0;this.trigger("done")}};za.prototype=new nb;var Qa={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var J=function(){var a=new za,b,c,d;J.prototype.init.call(this);var e=this;this.push=function(e){"video"===e.type&&(b=e.trackId,c=e.pts,d=e.dts,a.push(e))};a.on("data",function(a){var f=
{trackId:b,pts:c,dts:d,data:a};switch(a[0]&31){case 5:f.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:f.nalUnitType="sei_rbsp";f.escapedRBSP=g(a.subarray(1));break;case 7:f.nalUnitType="seq_parameter_set_rbsp";f.escapedRBSP=g(a.subarray(1));f.config=n(f.escapedRBSP);break;case 8:f.nalUnitType="pic_parameter_set_rbsp";break;case 9:f.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",f)});a.on("done",function(){e.trigger("done")});this.flush=function(){a.flush()};var f=
function(a,b){var c=8,d=8,e;for(e=0;e<a;e++)0!==d&&(d=b.readExpGolomb(),d=(c+d+256)%256),c=0===d?c:d};var g=function(a){for(var b=a.byteLength,c=[],d=1,e;d<b-2;)0===a[d]&&0===a[d+1]&&3===a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;b-=c.length;e=new Uint8Array(b);var f=0;for(d=0;d<b;f++,d++)f===c[0]&&(f++,c.shift()),e[d]=a[f];return e};var n=function(a){var b=0,c=0,d=0,e=0,g=1;a=new W(a);var n=a.readUnsignedByte();var h=a.readUnsignedByte();var k=a.readUnsignedByte();a.skipUnsignedExpGolomb();
if(Qa[n]){var w=a.readUnsignedExpGolomb();3===w&&a.skipBits(1);a.skipUnsignedExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);if(a.readBoolean()){var l=3!==w?8:12;for(w=0;w<l;w++)a.readBoolean()&&(6>w?f(16,a):f(64,a))}}a.skipUnsignedExpGolomb();w=a.readUnsignedExpGolomb();if(0===w)a.readUnsignedExpGolomb();else if(1===w)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),l=a.readUnsignedExpGolomb(),w=0;w<l;w++)a.skipExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);w=a.readUnsignedExpGolomb();
l=a.readUnsignedExpGolomb();var m=a.readBits(1);0===m&&a.skipBits(1);a.skipBits(1);a.readBoolean()&&(b=a.readUnsignedExpGolomb(),c=a.readUnsignedExpGolomb(),d=a.readUnsignedExpGolomb(),e=a.readUnsignedExpGolomb());if(a.readBoolean()&&a.readBoolean()){var t=a.readUnsignedByte();switch(t){case 1:var p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=
[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[a.readUnsignedByte()<<8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}p&&(g=p[0]/p[1])}return{profileIdc:n,levelIdc:k,profileCompatibility:h,width:Math.ceil((16*(w+1)-2*b-2*c)*g),height:(2-m)*(l+1)*16-2*d-2*e}}};J.prototype=new nb;var Pa=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],la=function(a){return a[0]<<
21|a[1]<<14|a[2]<<7|a[3]},sa={isLikelyAacData:function(a){return 73===a[0]&&68===a[1]&&51===a[2]?!0:!1},parseId3TagSize:function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(a[b+5]&16)>>4?c+20:c+10},parseAdtsSize:function(a,b){return a[b+3]&6144|a[b+4]<<3|(a[b+5]&224)>>5},parseType:function(a,b){return 73===a[b]&&68===a[b+1]&&51===a[b+2]?"timed-metadata":a[b]&1&&240===(a[b+1]&240)?"audio":null},parseSampleRate:function(a){for(var b=0;b+5<a.length;)if(255!==a[b]||240!==(a[b+1]&246))b++;
else return Pa[(a[b+2]&60)>>>2];return null},parseAacTimestamp:function(a){var b=10;a[5]&64&&(b=b+4+la(a.subarray(10,14)));do{var c=la(a.subarray(b+4,b+8));if(1>c)break;var d=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]);if("PRIV"===d){d=a.subarray(b+10,b+c+10);for(var e=0;e<d.byteLength;e++)if(0===d[e]){var f=unescape,g,n=d,h=e,k="";for(g=0;g<h;g++)k+="%"+("00"+n[g].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===f(k))return a=d.subarray(e+1),b=(a[3]&1)<<30|a[4]<<22|
a[5]<<14|a[6]<<6|a[7]>>>2,b*=4,b+=a[7]&3;break}}b+=10;b+=c}while(b<a.byteLength);return null}};var N=function(){var a=new Uint8Array,b=0;N.prototype.init.call(this);this.setTimestamp=function(a){b=a};this.push=function(c){var d=0;if(a.length){var e=a.length;a=new Uint8Array(c.byteLength+e);a.set(a.subarray(0,e));a.set(c,e)}else a=c;for(;3<=a.length-d;)if(73===a[d]&&68===a[d+1]&&51===a[d+2]){if(10>a.length-d)break;c=sa.parseId3TagSize(a,d);if(d+c>a.length)break;e={type:"timed-metadata",data:a.subarray(d,
d+c)};this.trigger("data",e);d+=c}else if(255===(a[d]&255)&&240===(a[d+1]&240)){if(7>a.length-d)break;c=sa.parseAdtsSize(a,d);if(d+c>a.length)break;e={type:"audio",data:a.subarray(d,d+c),pts:b,dts:b};this.trigger("data",e);d+=c}else d++;a=0<a.length-d?a.subarray(d):new Uint8Array}};N.prototype=new nb;var Vd=sa.isLikelyAacData,Ha=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],ra=["width","height","profileIdc","levelIdc","profileCompatibility"],Ya=function(a,b){var c;
if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},ta=function(a,b,c,d,e,f){return{start:{dts:a,pts:a+(c-b)},end:{dts:a+(d-b),pts:a+(e-c)},prependedContentDuration:f,baseMediaDecodeTime:a}};var Za=function(a,b){var c=[],d=0,e=0,f=0,g=Infinity;b=b||{};Za.prototype.init.call(this);this.push=function(b){U.collectDtsInfo(a,b);a&&Ha.forEach(function(c){a[c]=b[c]});c.push(b)};this.setEarliestDts=function(b){e=b-a.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=
function(a){g=a};this.setAudioAppendStart=function(a){f=a};this.flush=function(){if(0!==c.length){var n=Aa.trimAdtsFramesByEarliestDts(c,a,e);a.baseMediaDecodeTime=U.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps);Aa.prefixWithSilence(a,n,f,g);a.samples=Aa.generateSampleTable(n);var h=oa.mdat(Aa.concatenateFrameData(n));c=[];n=oa.moof(d,[a]);var k=new Uint8Array(n.byteLength+h.byteLength);d++;k.set(n);k.set(h,n.byteLength);U.clearDtsInfo(a);this.trigger("data",{track:a,boxes:k})}this.trigger("done",
"AudioSegmentStream")}};Za.prototype=new nb;var O=function(a,b){var c=0,d=[],e=[],f,g;b=b||{};O.prototype.init.call(this);delete a.minPTS;this.gopCache_=[];this.push=function(b){U.collectDtsInfo(a,b);"seq_parameter_set_rbsp"!==b.nalUnitType||f||(f=b.config,a.sps=[b.data],ra.forEach(function(b){a[b]=f[b]},this));"pic_parameter_set_rbsp"!==b.nalUnitType||g||(g=b.data,a.pps=[b.data]);d.push(b)};this.flush=function(){var f;var g=0;for(var n,h;d.length&&"access_unit_delimiter_rbsp"!==d[0].nalUnitType;)d.shift();
if(0!==d.length){var k=da.groupNalsIntoFrames(d);k=da.groupFramesIntoGops(k);k[0][0].keyFrame||((f=this.getGopForFusion_(d[0],a))?(g=f.duration,k.unshift(f),k.byteLength+=f.byteLength,k.nalCount+=f.nalCount,k.pts=f.pts,k.dts=f.dts,k.duration+=f.duration):k=da.extendFirstKeyFrame(k));if(e.length){f=b.alignGopsAtEnd?this.alignGopsAtEnd_(k):this.alignGopsAtStart_(k);if(!f){this.gopCache_.unshift({gop:k.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);d=[];this.resetStream_();
this.trigger("done","VideoSegmentStream");return}U.clearDtsInfo(a);k=f}U.collectDtsInfo(a,k);a.samples=da.generateSampleTable(k);f=oa.mdat(da.concatenateNalData(k));a.baseMediaDecodeTime=U.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps);this.trigger("processedGopsInfo",k.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));n=k[0];h=k[k.length-1];this.trigger("segmentTimingInfo",ta(a.baseMediaDecodeTime,n.dts,n.pts,h.dts+h.duration,h.pts+h.duration,g));this.gopCache_.unshift({gop:k.pop(),
pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);d=[];this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime);this.trigger("timelineStartInfo",a.timelineStartInfo);g=oa.moof(c,[a]);k=new Uint8Array(g.byteLength+f.byteLength);c++;k.set(g);k.set(f,g.byteLength);this.trigger("data",{track:a,boxes:k})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){U.clearDtsInfo(a);g=f=void 0};this.getGopForFusion_=function(b){var c=Infinity,
d;for(d=0;d<this.gopCache_.length;d++){var e=this.gopCache_[d];var f=e.gop;if(a.pps&&Ya(a.pps[0],e.pps[0])&&a.sps&&Ya(a.sps[0],e.sps[0])&&!(f.dts<a.timelineStartInfo.dts)&&(f=b.dts-f.dts-f.duration,-1E4<=f&&45E3>=f&&(!g||c>f))){var g=e;c=f}}return g?g.gop:null};this.alignGopsAtStart_=function(a){var b,c;var d=a.byteLength;var f=a.nalCount;var g=a.duration;for(b=c=0;b<e.length&&c<a.length;){var n=e[b];var h=a[c];if(n.pts===h.pts)break;h.pts>n.pts?b++:(c++,d-=h.byteLength,f-=h.nalCount,g-=h.duration)}if(0===
c)return a;if(c===a.length)return null;a=a.slice(c);a.byteLength=d;a.duration=g;a.nalCount=f;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=function(a){var b;var c=e.length-1;var d=a.length-1;var f=null;for(b=!1;0<=c&&0<=d;){var g=e[c];var n=a[d];if(g.pts===n.pts){b=!0;break}g.pts>n.pts?c--:(c===e.length-1&&(f=d),d--)}if(!b&&null===f)return null;c=b?d:f;if(0===c)return a;a=a.slice(c);c=a.reduce(function(a,b){a.byteLength+=b.byteLength;a.duration+=b.duration;a.nalCount+=b.nalCount;return a},
{byteLength:0,duration:0,nalCount:0});a.byteLength=c.byteLength;a.duration=c.duration;a.nalCount=c.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsWith=function(a){e=a}};O.prototype=new nb;var gb=function(a,b){this.numberOfTracks=0;this.metadataStream=b;a=a||{};this.remuxTracks="undefined"!==typeof a.remux?!!a.remux:!0;"boolean"===typeof a.keepOriginalTimestamps&&(this.keepOriginalTimestamps=a.keepOriginalTimestamps);this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=
[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;gb.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);this.pendingTracks.push(a.track);this.pendingBoxes.push(a.boxes);this.pendingBytes+=a.boxes.byteLength;"video"===a.track.type&&(this.videoTrack=a.track);"audio"===a.track.type&&(this.audioTrack=a.track)}};gb.prototype=new nb;gb.prototype.flush=function(a){var b=0,c={captions:[],captionStreams:{},
metadata:[],info:{}},d=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(d=this.videoTrack.timelineStartInfo.pts,ra.forEach(function(a){c.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(d=this.audioTrack.timelineStartInfo.pts,Ha.forEach(function(a){c.info[a]=
this.audioTrack[a]},this));c.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;a=oa.initSegment(this.pendingTracks);c.initSegment=new Uint8Array(a.byteLength);c.initSegment.set(a);c.data=new Uint8Array(this.pendingBytes);for(a=0;a<this.pendingBoxes.length;a++)c.data.set(this.pendingBoxes[a],b),b+=this.pendingBoxes[a].byteLength;for(a=0;a<this.pendingCaptions.length;a++)b=this.pendingCaptions[a],b.startTime=b.startPts,this.keepOriginalTimestamps||
(b.startTime-=d),b.startTime/=9E4,b.endTime=b.endPts,this.keepOriginalTimestamps||(b.endTime-=d),b.endTime/=9E4,c.captionStreams[b.stream]=!0,c.captions.push(b);for(a=0;a<this.pendingMetadata.length;a++)b=this.pendingMetadata[a],b.cueTime=b.pts,this.keepOriginalTimestamps||(b.cueTime-=d),b.cueTime/=9E4,c.metadata.push(b);c.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=
0;this.pendingMetadata.length=0;this.trigger("data",c);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};var Sa=function(a){var b=this,c=!0,d,e;Sa.prototype.init.call(this);a=a||{};this.baseMediaDecodeTime=a.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var c={};this.transmuxPipeline_=c;c.type="aac";c.metadataStream=new ea.MetadataStream;c.aacStream=new N;c.audioTimestampRolloverStream=new ea.TimestampRolloverStream("audio");
c.timedMetadataTimestampRolloverStream=new ea.TimestampRolloverStream("timed-metadata");c.adtsStream=new Ka;c.coalesceStream=new gb(a,c.metadataStream);c.headOfPipeline=c.aacStream;c.aacStream.pipe(c.audioTimestampRolloverStream).pipe(c.adtsStream);c.aacStream.pipe(c.timedMetadataTimestampRolloverStream).pipe(c.metadataStream).pipe(c.coalesceStream);c.metadataStream.on("timestamp",function(a){c.aacStream.setTimestamp(a.timeStamp)});c.aacStream.on("data",function(d){"timed-metadata"!==d.type||c.audioSegmentStream||
(e=e||{timelineStartInfo:{baseMediaDecodeTime:b.baseMediaDecodeTime},codec:"adts",type:"audio"},c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new Za(e,a),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream))});c.coalesceStream.on("data",this.trigger.bind(this,"data"));c.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var c={};this.transmuxPipeline_=c;c.type="ts";c.metadataStream=new ea.MetadataStream;c.packetStream=new ea.TransportPacketStream;
c.parseStream=new ea.TransportParseStream;c.elementaryStream=new ea.ElementaryStream;c.videoTimestampRolloverStream=new ea.TimestampRolloverStream("video");c.audioTimestampRolloverStream=new ea.TimestampRolloverStream("audio");c.timedMetadataTimestampRolloverStream=new ea.TimestampRolloverStream("timed-metadata");c.adtsStream=new Ka;c.h264Stream=new J;c.captionStream=new ea.CaptionStream;c.coalesceStream=new gb(a,c.metadataStream);c.headOfPipeline=c.packetStream;c.packetStream.pipe(c.parseStream).pipe(c.elementaryStream);
c.elementaryStream.pipe(c.videoTimestampRolloverStream).pipe(c.h264Stream);c.elementaryStream.pipe(c.audioTimestampRolloverStream).pipe(c.adtsStream);c.elementaryStream.pipe(c.timedMetadataTimestampRolloverStream).pipe(c.metadataStream).pipe(c.coalesceStream);c.h264Stream.pipe(c.captionStream).pipe(c.coalesceStream);c.elementaryStream.on("data",function(f){var g;if("metadata"===f.type){for(g=f.tracks.length;g--;)d||"video"!==f.tracks[g].type?e||"audio"!==f.tracks[g].type||(e=f.tracks[g],e.timelineStartInfo.baseMediaDecodeTime=
b.baseMediaDecodeTime):(d=f.tracks[g],d.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime);d&&!c.videoSegmentStream&&(c.coalesceStream.numberOfTracks++,c.videoSegmentStream=new O(d,a),c.videoSegmentStream.on("timelineStartInfo",function(a){e&&(e.timelineStartInfo=a,c.audioSegmentStream.setEarliestDts(a.dts))}),c.videoSegmentStream.on("processedGopsInfo",b.trigger.bind(b,"gopInfo")),c.videoSegmentStream.on("segmentTimingInfo",b.trigger.bind(b,"videoSegmentTimingInfo")),c.videoSegmentStream.on("baseMediaDecodeTime",
function(a){e&&c.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),c.h264Stream.pipe(c.videoSegmentStream).pipe(c.coalesceStream));e&&!c.audioSegmentStream&&(c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new Za(e,a),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream))}});c.coalesceStream.on("data",this.trigger.bind(this,"data"));c.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(b){var c=this.transmuxPipeline_;a.keepOriginalTimestamps||
(this.baseMediaDecodeTime=b);e&&(e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,U.clearDtsInfo(e),a.keepOriginalTimestamps||(e.timelineStartInfo.baseMediaDecodeTime=b),c.audioTimestampRolloverStream&&c.audioTimestampRolloverStream.discontinuity());d&&(c.videoSegmentStream&&(c.videoSegmentStream.gopCache_=[],c.videoTimestampRolloverStream.discontinuity()),d.timelineStartInfo.dts=void 0,d.timelineStartInfo.pts=void 0,U.clearDtsInfo(d),c.captionStream.reset(),a.keepOriginalTimestamps||
(d.timelineStartInfo.baseMediaDecodeTime=b));c.timedMetadataTimestampRolloverStream&&c.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){e&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};this.alignGopsWith=function(a){d&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)};this.push=function(a){if(c){var b=Vd(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||
this.setupTsPipeline();c=!1}this.transmuxPipeline_.headOfPipeline.push(a)};this.flush=function(){c=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};Sa.prototype=new nb;var zg=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,
c);d&&a(b,d);return b}}(),Va=function(a,b){b.on("data",function(b){var c=b.initSegment;b.initSegment={data:c.buffer,byteOffset:c.byteOffset,byteLength:c.byteLength};c=b.data;b.data=c.buffer;a.postMessage({action:"data",segment:b,byteOffset:c.byteOffset,byteLength:c.byteLength},[b.data])});if(b.captionStream)b.captionStream.on("data",function(b){a.postMessage({action:"caption",data:b})});b.on("done",function(b){a.postMessage({action:"done"})});b.on("gopInfo",function(b){a.postMessage({action:"gopInfo",
gopInfo:b})});b.on("videoSegmentTimingInfo",function(b){a.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:b})})},gc=function(){function a(b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.options=c||{};this.self=b;this.init()}zg(a,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new Sa(this.options);Va(this.self,this.transmuxer)}},{key:"push",value:function(a){a=new Uint8Array(a.data,a.byteOffset,
a.byteLength);this.transmuxer.push(a)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(a){this.transmuxer.setBaseMediaDecodeTime(Math.round(9E4*(a.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(a){this.transmuxer.setAudioAppendStart(Math.ceil(9E4*a.appendStart))}},{key:"flush",value:function(a){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())}}]);
return a}();return new function(a){a.onmessage=function(b){if("init"===b.data.action&&b.data.options)this.messageHandlers=new gc(a,b.data.options);else if(this.messageHandlers||(this.messageHandlers=new gc(a)),b.data&&b.data.action&&"init"!==b.data.action&&this.messageHandlers[b.data.action])this.messageHandlers[b.data.action](b.data)}}(c)})()}),Vk={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},Wk=function(a){return a.map(function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,
function(a,b,c){a=("00"+Number(b).toString(16)).slice(-2);c=("00"+Number(c).toString(16)).slice(-2);return"avc1."+a+"00"+c})})},Pi=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b={codecCount:0},c;b.codecCount=a.split(",").length;b.codecCount=b.codecCount||2;if(c=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(a))b.videoCodec=c[2],b.videoObjectTypeIndicator=c[3];b.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(a);b.audioProfile=b.audioProfile&&b.audioProfile[2];return b},
hm=function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a){return Wk([a])[0]})},ak=function(a,b,c){return a+"/"+b+'; codecs="'+c.filter(function(a){return!!a}).join(", ")+'"'},im=function(a,b){if(!a.mediaGroups.AUDIO||!b)return null;a=a.mediaGroups.AUDIO[b];if(!a)return null;for(var c in a)if(b=a[c],b["default"]&&b.playlists)return Pi(b.playlists[0].attributes.CODECS).audioProfile;return null},jm=function(a){var b={type:"",parameters:{}};a=a.trim().split(";");b.type=a.shift().trim();a.forEach(function(a){var c=
a.trim().split("=");1<c.length&&(a=c[0].replace(/"/g,"").trim(),c=c[1].replace(/"/g,"").trim(),b.parameters[a]=c)});return b},km=function(a,b,c){if("undefined"===typeof b||null===b||!a.length)return[];b=Math.ceil(9E4*(b-c+3));for(c=0;c<a.length&&!(a[c].pts>b);c++);return a.slice(c)},lm=function(a,b,c){var d=null,e=null,f=0,g=[],n=[];if(!a&&!b)return J.createTimeRange();if(!a)return b.buffered;if(!b||c)return a.buffered;if(0===a.buffered.length&&0===b.buffered.length)return J.createTimeRange();a=a.buffered;
b=b.buffered;for(c=a.length;c--;)g.push({time:a.start(c),type:"start"}),g.push({time:a.end(c),type:"end"});for(c=b.length;c--;)g.push({time:b.start(c),type:"start"}),g.push({time:b.end(c),type:"end"});g.sort(function(a,b){return a.time-b.time});for(c=0;c<g.length;c++)"start"===g[c].type?(f++,2===f&&(d=g[c].time)):"end"===g[c].type&&(f--,1===f&&(e=g[c].time)),null!==d&&null!==e&&(n.push([d,e]),e=d=null);return J.createTimeRanges(n)},mm=function(a,b){var c=a.addSourceBuffer(b),d=Object.create(null);
d.updating=!1;d.realBuffer_=c;a=function(a){"function"===typeof c[a]?d[a]=function(){return c[a].apply(c,arguments)}:"undefined"===typeof d[a]&&Object.defineProperty(d,a,{get:function(){return c[a]},set:function(b){return c[a]=b}})};for(var e in c)a(e);return d},nm=function(a){function b(a,c){Ge(this,b);var d=Sf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,J.EventTarget));d.timestampOffset_=0;d.pendingBuffers_=[];d.bufferUpdating_=!1;d.mediaSource_=a;d.codecs_=c;d.audioCodec_=null;d.videoCodec_=
null;d.audioDisabled_=!1;d.appendAudioInitSegment_=!0;d.gopBuffer_=[];d.timeMapping_=0;d.safeAppend_=11<=J.browser.IE_VERSION;a={remux:!1,alignGopsAtEnd:d.safeAppend_};d.codecs_.forEach(function(a){/mp4a\.\d+.\d+/i.test(a)?d.audioCodec_=a:/avc1\.[\da-f]+/i.test(a)&&(d.videoCodec_=a)});d.transmuxer_=new gm;d.transmuxer_.postMessage({action:"init",options:a});d.transmuxer_.onmessage=function(a){if("data"===a.data.action)return d.data_(a);if("done"===a.data.action)return d.done_(a);if("gopInfo"===a.data.action)return d.appendGopInfo_(a);
if("videoSegmentTimingInfo"===a.data.action)return d.videoSegmentTimingInfo_(a.data.videoSegmentTimingInfo)};Object.defineProperty(d,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"===typeof a&&0<=a&&(this.timestampOffset_=a,this.appendAudioInitSegment_=!0,this.timeMapping_=this.gopBuffer_.length=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a}))}});Object.defineProperty(d,"appendWindowStart",{get:function(){return(this.videoBuffer_||
this.audioBuffer_).appendWindowStart},set:function(a){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=a);this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=a)}});Object.defineProperty(d,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(d,"buffered",{get:function(){return lm(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}});return d}
Cg(b,a);gf(b,[{key:"data_",value:function(a){var b=a.data.segment;b.data=new Uint8Array(b.data,a.data.byteOffset,a.data.byteLength);b.initSegment=new Uint8Array(b.initSegment.data,b.initSegment.byteOffset,b.initSegment.byteLength);a=this.mediaSource_.player_;if(b.captions&&b.captions.length){this.inbandTextTracks_||(this.inbandTextTracks_={});for(var c in b.captionStreams)if(!this.inbandTextTracks_[c]){a.tech_.trigger({type:"usage",name:"hls-608"});var d=a.textTracks().getTrackById(c);this.inbandTextTracks_[c]=
d?d:a.addRemoteTextTrack({kind:"captions",id:c,label:c},!1).track}}b.metadata&&b.metadata.length&&!this.metadataTrack_&&(this.metadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,this.metadataTrack_.inBandMetadataTrackDispatchType=b.metadata.dispatchType);this.pendingBuffers_.push(b)}},{key:"done_",value:function(a){"closed"===this.mediaSource_.readyState?this.pendingBuffers_.length=0:this.processPendingSegments_()}},{key:"videoSegmentTimingInfo_",value:function(a){var b=
{start:{decode:a.start.dts/9E4,presentation:a.start.pts/9E4},end:{decode:a.end.dts/9E4,presentation:a.end.pts/9E4},baseMediaDecodeTime:a.baseMediaDecodeTime/9E4};a.prependedContentDuration&&(b.prependedContentDuration=a.prependedContentDuration/9E4);this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:b})}},{key:"createRealSourceBuffers_",value:function(){var a=this,b=["audio","video"];b.forEach(function(c){if(a[c+"Codec_"]&&!a[c+"Buffer_"]){var d=null;a.mediaSource_[c+"Buffer_"]?(d=
a.mediaSource_[c+"Buffer_"],d.updating=!1):(d=mm(a.mediaSource_.nativeMediaSource_,c+'/mp4;codecs="'+a[c+"Codec_"]+'"'),a.mediaSource_[c+"Buffer_"]=d);a[c+"Buffer_"]=d;["update","updatestart","updateend"].forEach(function(e){d.addEventListener(e,function(){if("audio"!==c||!a.audioDisabled_)if("updateend"===e&&(a[c+"Buffer_"].updating=!1),b.every(function(b){return"audio"===b&&a.audioDisabled_?!0:c!==b&&a[b+"Buffer_"]&&a[b+"Buffer_"].updating?!1:!0}))return a.trigger(e)})})}})}},{key:"appendBuffer",
value:function(a){this.bufferUpdating_=!0;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var b=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:b.end(b.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:km(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)});this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,
byteLength:a.byteLength},[a.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(a){var b=this.gopBuffer_;a=a.data.gopInfo;if(a.length)if(this.safeAppend_)b=a.slice();else{var c=a[0].pts,d=0;for(d;d<b.length&&!(b[d].pts>=c);d++);b=b.slice(0,d).concat(a)}this.gopBuffer_=b}},{key:"remove",value:function(a,b){if(this.videoBuffer_){this.videoBuffer_.updating=!0;this.videoBuffer_.remove(a,b);var c=this.gopBuffer_,d=this.timeMapping_,e=Math.ceil(9E4*(a-d)),f=Math.ceil(9E4*
(b-d));d=c.slice();for(var g=c.length;g--&&!(c[g].pts<=f););if(-1!==g){for(f=g+1;f--&&!(c[f].pts<=e););f=Math.max(f,0);d.splice(f,g-f+1)}this.gopBuffer_=d}!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(a,b));qi(a,b,this.metadataTrack_);if(this.inbandTextTracks_)for(var n in this.inbandTextTracks_)qi(a,b,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var a={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],
metadata:[]};a=this.pendingBuffers_.reduce(function(a,b){var c=b.type,d=b.data,e=b.initSegment;a[c].segments.push(d);a[c].bytes+=d.byteLength;a[c].initSegment=e;b.captions&&(a.captions=a.captions.concat(b.captions));b.info&&(a[c].info=b.info);b.metadata&&(a.metadata=a.metadata.concat(b.metadata));return a},a);this.videoBuffer_||this.audioBuffer_||(0===a.video.bytes&&(this.videoCodec_=null),0===a.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_());a.audio.info&&this.mediaSource_.trigger({type:"audioinfo",
info:a.audio.info});a.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:a.video.info});this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(a.audio.segments.unshift(a.audio.initSegment),a.audio.bytes+=a.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var b=!1;this.videoBuffer_&&a.video.bytes?(a.video.segments.unshift(a.video.initSegment),a.video.bytes+=a.video.initSegment.byteLength,this.concatAndAppendSegments_(a.video,this.videoBuffer_)):!this.videoBuffer_||
!this.audioDisabled_&&this.audioBuffer_||(b=!0);em(this,a.captions,a.metadata);!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(a.audio,this.audioBuffer_);this.pendingBuffers_.length=0;b&&this.trigger("updateend");this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(a,b){var c=0,d=void 0;if(a.bytes){d=new Uint8Array(a.bytes);a.segments.forEach(function(a){d.set(a,c);c+=a.byteLength});try{b.updating=!0,b.appendBuffer(d)}catch(mi){this.mediaSource_.player_&&
this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:mi.message,originalError:mi})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort();!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"});this.pendingBuffers_.length=0;this.bufferUpdating_=!1}}]);return b}(J.EventTarget),bk=function(a){function b(){Ge(this,b);var a=Sf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),
c=void 0;a.nativeMediaSource_=new h.MediaSource;for(c in a.nativeMediaSource_)c in b.prototype||"function"!==typeof a.nativeMediaSource_[c]||(a[c]=a.nativeMediaSource_[c].bind(a.nativeMediaSource_));a.duration_=NaN;Object.defineProperty(a,"duration",{get:function(){return Infinity===this.duration_?this.duration_:this.nativeMediaSource_.duration},set:function(a){this.duration_=a;Infinity!==a&&(this.nativeMediaSource_.duration=a)}});Object.defineProperty(a,"seekable",{get:function(){return Infinity===
this.duration_?J.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}});Object.defineProperty(a,"readyState",{get:function(){return this.nativeMediaSource_.readyState}});Object.defineProperty(a,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}});a.sourceBuffers=[];a.activeSourceBuffers_=[];a.updateActiveSourceBuffers_=function(){a.activeSourceBuffers_.length=0;if(1===a.sourceBuffers.length){var b=a.sourceBuffers[0];b.appendAudioInitSegment_=
!0;b.audioDisabled_=!b.audioCodec_;a.activeSourceBuffers_.push(b)}else{var c=!1,d=!0;for(b=0;b<a.player_.audioTracks().length;b++){var e=a.player_.audioTracks()[b];if(e.enabled&&"main"!==e.kind){c=!0;d=!1;break}}a.sourceBuffers.forEach(function(b,e){b.appendAudioInitSegment_=!0;if(b.videoCodec_&&b.audioCodec_)b.audioDisabled_=c;else if(b.videoCodec_&&!b.audioCodec_)b.audioDisabled_=!0,d=!1;else if(!b.videoCodec_&&b.audioCodec_&&(b.audioDisabled_=e?d:!d,b.audioDisabled_))return;a.activeSourceBuffers_.push(b)})}};
a.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(a){a.appendAudioInitSegment_=!0})};a.onHlsReset_=function(){a.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.postMessage({action:"resetCaptions"})})};a.onHlsSegmentTimeMapping_=function(b){a.sourceBuffers.forEach(function(a){return a.timeMapping_=b.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(a){this.nativeMediaSource_.addEventListener(a,this.trigger.bind(this))},a);a.on("sourceopen",function(b){if(b=
f.querySelector('[src="'+a.url_+'"]'))a.player_=J(b.parentNode),a.player_&&(a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_))});
a.on("sourceended",function(b){b=Sk(a.duration);for(var c=0;c<a.sourceBuffers.length;c++){var d=a.sourceBuffers[c];(d=d.metadataTrack_&&d.metadataTrack_.cues)&&d.length&&(d[d.length-1].endTime=b)}});a.on("sourceclose",function(a){this.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.terminate()});this.sourceBuffers.length=0;this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",
this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))});return a}Cg(b,a);gf(b,[{key:"addSeekableRange_",value:function(a,b){if(Infinity!==this.duration)throw a=Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),
a.name="InvalidStateError",a.code=11,a;if(b>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))this.nativeMediaSource_.duration=b}},{key:"addSourceBuffer",value:function(a){var b=void 0;b=jm(a);/^(video|audio)\/mp2t$/i.test(b.type)?(a=[],b.parameters&&b.parameters.codecs&&(a=b.parameters.codecs.split(","),a=Wk(a),a=a.filter(function(a){return/mp4a\.\d+.\d+/i.test(a)||/avc1\.[\da-f]+/i.test(a)})),0===a.length&&(a=["avc1.4d400d","mp4a.40.2"]),b=new nm(this,a),0!==this.sourceBuffers.length&&
(this.sourceBuffers[0].createRealSourceBuffers_(),b.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):b=this.nativeMediaSource_.addSourceBuffer(a);this.sourceBuffers.push(b);return b}}]);return b}(J.EventTarget),Xk=0;J.mediaSources={};var Yk=function(a,b){if(a=J.mediaSources[a])a.trigger({type:"sourceopen",swfId:b});else throw Error("Media Source not found (Video.js)");},ck=function(){return!!h.MediaSource&&!!h.MediaSource.isTypeSupported&&h.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},
Qi=function(){this.MediaSource={open:Yk,supportsNativeMediaSources:ck};if(ck())return new bk;throw Error("Cannot use create a virtual MediaSource for this video");};Qi.open=Yk;Qi.supportsNativeMediaSources=ck;var Zk={createObjectURL:function(a){if(a instanceof bk){var b=h.URL.createObjectURL(a.nativeMediaSource_);return a.url_=b}if(!(a instanceof bk))return b=h.URL.createObjectURL(a),a.url_=b;b="blob:vjs-media-source/"+Xk;Xk++;J.mediaSources[b]=a;return b}};J.MediaSource=Qi;J.URL=Zk;var $k=J.mergeOptions,
al=function(a,b){var c=void 0,d=$k(a,{duration:b.duration,minimumUpdatePeriod:b.minimumUpdatePeriod});for(a=0;a<b.playlists.length;a++){var e=Tj(d,b.playlists[a]);e?d=e:c=!0}uj(b,function(a,b,e,f){if(a.playlists&&a.playlists.length){var g=a.playlists[0].uri;if(a=Tj(d,a.playlists[0]))d=a,d.mediaGroups[b][e][f].playlists[0]=d.playlists[g],c=!1}});return c?null:d},dk=function(a){return a.uri+"-"+a.byterange.offset+"-"+(a.byterange.offset+a.byterange.length-1)},bl=function(a,b){var c={},d;for(d in a){var e=
a[d].sidx;if(e){var f=dk(e);if(!b[f])break;var g=b[f].sidxInfo;(!g.map&&!e.map||g.map&&e.map&&g.map.byterange.offset===e.map.byterange.offset&&g.map.byterange.length===e.map.byterange.length)&&g.uri===e.uri&&g.byterange.offset===e.byterange.offset&&g.byterange.length===e.byterange.length&&(c[f]=b[f])}}return c},om=function(a,b,c,d){a=hj(a,{manifestUri:b,clientOffset:c});var e=bl(a.playlists,d);uj(a,function(a,b,c,f){a.playlists&&a.playlists.length&&(e=$k(e,bl(a.playlists,d)))});return e},cl=function(a,
b,c,d,e){a={uri:tj(d.handleManifestRedirects,a.resolvedUri),byterange:a.byterange,playlist:b};a=J.mergeOptions(a,{responseType:"arraybuffer",headers:Wj(a)});return c(a,e)},ek=function(a){function b(a,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=arguments[3];Ge(this,b);var f=Sf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),g=d.withCredentials;d=d.handleManifestRedirects;f.hls_=c;f.withCredentials=void 0===g?!1:g;f.handleManifestRedirects=void 0===d?!1:d;if(!a)throw Error("A non-empty playlist URL or playlist is required");
f.on("minimumUpdatePeriod",function(){f.refreshXml_()});f.on("mediaupdatetimeout",function(){f.refreshMedia_(f.media().uri)});f.state="HAVE_NOTHING";f.loadedPlaylists_={};if("string"===typeof a)return f.srcUrl=a,f.sidxMapping_={},Sf(f);f.setupChildLoader(e,a);return f}Cg(b,a);gf(b,[{key:"setupChildLoader",value:function(a,b){this.masterPlaylistLoader_=a;this.childPlaylist_=b}},{key:"dispose",value:function(){this.stopRequest();this.loadedPlaylists_={};h.clearTimeout(this.minimumUpdatePeriodTimeout_);
h.clearTimeout(this.mediaRequest_);h.clearTimeout(this.mediaUpdateTimeout)}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"sidxRequestFinished_",value:function(a,b,c,d){var e=this;return function(f,g){if(e.request){e.request=null;if(f)return e.error={status:g.status,message:"DASH playlist request error at URL: "+a.uri,response:g.response,
code:2},c&&(e.state=c),e.trigger("error"),d(b,null);f=new Uint8Array(g.response);f=Wh.parseSidx(f.subarray(8));return d(b,f)}}}},{key:"media",value:function(a){var b=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var c=this.state;if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}var d=!this.media_||a.uri!==this.media_.uri;if(d&&this.loadedPlaylists_[a.uri]&&
this.loadedPlaylists_[a.uri].endList)this.state="HAVE_METADATA",this.media_=a,d&&(this.trigger("mediachanging"),this.trigger("mediachange"));else if(d)if(this.media_&&this.trigger("mediachanging"),a.sidx){var e=d=void 0;this.masterPlaylistLoader_?(d=this.masterPlaylistLoader_.master,e=this.masterPlaylistLoader_.sidxMapping_):(d=this.master,e=this.sidxMapping_);var f=dk(a.sidx);e[f]={sidxInfo:a.sidx};this.request=cl(a.sidx,a,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(a,
d,c,function(d,g){if(!d||!g)throw Error("failed to request sidx");e[f].sidx=g;b.haveMetadata({startingState:c,playlist:d.playlists[a.uri]})}))}else this.mediaRequest_=h.setTimeout(this.haveMetadata.bind(this,{startingState:c,playlist:a}),0)}},{key:"haveMetadata",value:function(a){var b=a.startingState;a=a.playlist;this.state="HAVE_METADATA";this.loadedPlaylists_[a.uri]=a;this.mediaRequest_=null;this.refreshMedia_(a.uri);"HAVE_MASTER"===b?this.trigger("loadedmetadata"):this.trigger("mediachange")}},
{key:"pause",value:function(){this.stopRequest();h.clearTimeout(this.mediaUpdateTimeout);h.clearTimeout(this.minimumUpdatePeriodTimeout_);"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(a){var b=this;h.clearTimeout(this.mediaUpdateTimeout);h.clearTimeout(this.minimumUpdatePeriodTimeout_);var c=this.media();a?this.mediaUpdateTimeout=h.setTimeout(function(){return b.load()},c?c.targetDuration/2*1E3:5E3):this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",
value:function(){var a=hj(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});a.uri=this.srcUrl;for(var b=0;b<a.playlists.length;b++){var c="placeholder-uri-"+b;a.playlists[b].uri=c;a.playlists[c]=a.playlists[b]}uj(a,function(b,c,d,e){b.playlists&&b.playlists.length&&(c="placeholder-uri-"+c+"-"+d+"-"+e,b.playlists[0].uri=c,a.playlists[c]=b.playlists[0])});Ak(a);Bk(a);return a}},{key:"start",value:function(){var a=this;this.started=!0;this.masterPlaylistLoader_?
this.mediaRequest_=h.setTimeout(this.haveMaster_.bind(this),0):this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,c){if(a.request){a.request=null;if(b)return a.error={status:c.status,message:"DASH playlist request error at URL: "+a.srcUrl,responseText:c.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.masterXml_=c.responseText;a.masterLoaded_=c.responseHeaders&&c.responseHeaders.date?Date.parse(c.responseHeaders.date):Date.now();
a.srcUrl=tj(a.handleManifestRedirects,a.srcUrl,c);a.syncClientServerClock_(a.onClientServerClockSync_.bind(a))}})}},{key:"syncClientServerClock_",value:function(a){var b=this,c=gj(Sh(this.masterXml_));if(null===c)return this.clientOffset_=this.masterLoaded_-Date.now(),a();if("DIRECT"===c.method)return this.clientOffset_=c.value-Date.now(),a();this.request=this.hls_.xhr({uri:Gh(this.srcUrl,c.value),method:c.method,withCredentials:this.withCredentials},function(d,e){if(b.request){if(d)return b.clientOffset_=
b.masterLoaded_-Date.now(),a();d="HEAD"===c.method?e.responseHeaders&&e.responseHeaders.date?Date.parse(e.responseHeaders.date):b.masterLoaded_:Date.parse(e.responseText);b.clientOffset_=d-Date.now();a()}})}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER";this.mediaRequest_=null;this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function(){var a=this;this.haveMaster_();
this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]);this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=h.setTimeout(function(){a.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var a=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,c){if(a.request){a.request=null;if(b)return a.error={status:c.status,message:"DASH playlist request error at URL: "+
a.srcUrl,responseText:c.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.masterXml_=c.responseText;a.sidxMapping_=om(a.masterXml_,a.srcUrl,a.clientOffset_,a.sidxMapping_);b=a.parseMasterXml();if(c=al(a.master,b)){var d=dk(a.media().sidx);a.sidxMapping_[d]?a.master=c:(c=a.media(),a.request=cl(c.sidx,c,a.hls_.xhr,{handleManifestRedirects:a.handleManifestRedirects},a.sidxRequestFinished_(c,b,a.state,function(b,c){if(!b||!c)throw Error("failed to request sidx on minimumUpdatePeriod");
a.sidxMapping_[d].sidx=c;a.minimumUpdatePeriodTimeout_=h.setTimeout(function(){a.trigger("minimumUpdatePeriod")},a.master.minimumUpdatePeriod);a.refreshMedia_(a.media().uri)})))}a.minimumUpdatePeriodTimeout_=h.setTimeout(function(){a.trigger("minimumUpdatePeriod")},a.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(a){var b=this;if(!a)throw Error("refreshMedia_ must take a media uri");var c=void 0,d=void 0;this.masterPlaylistLoader_?(c=this.masterPlaylistLoader_.master,d=this.masterPlaylistLoader_.parseMasterXml()):
(c=this.master,d=this.parseMasterXml());(c=al(c,d))?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=c:this.master=c,this.media_=c.playlists[a]):(this.media_=d.playlists[a],this.trigger("playlistunchanged"));this.media().endList||(this.mediaUpdateTimeout=h.setTimeout(function(){b.trigger("mediaupdatetimeout")},Ck(this.media(),!!c)));this.trigger("loadedplaylist")}}]);return b}(J.EventTarget),Ri=function(a){return J.log.debug?J.log.debug.bind(J,"VHS:",a+" >"):function(){}},pm=function(){function a(b,
c,d,e){Ge(this,a);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=b;this.processedAppend_=!1;this.type_=d;this.mimeType_=c;this.logger_=Ri("SourceUpdater["+d+"]["+c+"]");"closed"===b.readyState?b.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,c,e)):this.createSourceBuffer_(c,e)}gf(a,[{key:"createSourceBuffer_",value:function(a,b){var c=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(a);this.logger_("created SourceBuffer");if(b&&(b.trigger("sourcebufferadded"),
2>this.mediaSource.sourceBuffers.length)){b.on("sourcebufferadded",function(){c.start_()});return}this.start_()}},{key:"start_",value:function(){var a=this;this.started_=!0;this.onUpdateendCallback_=function(){var b=a.pendingCallback_;a.pendingCallback_=null;a.sourceBuffer_.removing=!1;a.logger_("buffered ["+Xj(a.buffered())+"]");b&&b();a.runCallback_()};this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function(a){var b=this;this.processedAppend_&&
this.queueCallback_(function(){b.sourceBuffer_.abort()},a)}},{key:"appendBuffer",value:function(a,b){var c=this;this.processedAppend_=!0;this.queueCallback_(function(){a.videoSegmentTimingInfoCallback&&c.sourceBuffer_.addEventListener("videoSegmentTimingInfo",a.videoSegmentTimingInfoCallback);c.sourceBuffer_.appendBuffer(a.bytes)},function(){a.videoSegmentTimingInfoCallback&&c.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",a.videoSegmentTimingInfoCallback);b()})}},{key:"buffered",value:function(){return this.sourceBuffer_?
this.sourceBuffer_.buffered:J.createTimeRanges()}},{key:"remove",value:function(a,b){var c=this,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:je;this.processedAppend_&&this.queueCallback_(function(){c.logger_("remove ["+a+" => "+b+"]");c.sourceBuffer_.removing=!0;c.sourceBuffer_.remove(a,b)},d)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==je}},{key:"timestampOffset",value:function(a){var b=this;
"undefined"!==typeof a&&(this.queueCallback_(function(){b.sourceBuffer_.timestampOffset=a;b.runCallback_()}),this.timestampOffset_=a);return this.timestampOffset_}},{key:"queueCallback_",value:function(a,b){this.callbacks_.push([a.bind(this),b]);this.runCallback_()}},{key:"runCallback_",value:function(){if(!this.updating()&&this.callbacks_.length&&this.started_){var a=this.callbacks_.shift();this.pendingCallback_=a[1];a[0]()}}},{key:"dispose",value:function(){var a=this,b=function Fh(){a.sourceBuffer_&&
"open"===a.mediaSource.readyState&&a.sourceBuffer_.abort();a.sourceBuffer_.removeEventListener("updateend",Fh)};this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",b):b()}}]);return a}(),he={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},dl=
function(a){a.forEach(function(a){a.abort()})},qm=function(a){var b=a.target;b=Date.now()-b.requestTime;b={bandwidth:Infinity,bytesReceived:0,roundTripTime:b||0};b.bytesReceived=a.loaded;b.bandwidth=Math.floor(b.bytesReceived/b.roundTripTime*8E3);return b},fk=function(a,b){return b.timedout?{status:b.status,message:"HLS request timed-out at URL: "+b.uri,code:-101,xhr:b}:b.aborted?{status:b.status,message:"HLS request aborted at URL: "+b.uri,code:-102,xhr:b}:a?{status:b.status,message:"HLS request errored at URL: "+
b.uri,code:2,xhr:b}:null},rm=function(a,b){return function(c,d){var e=d.response;if(c=fk(c,d))return b(c,a);if(16!==e.byteLength)return b({status:d.status,message:"Invalid HLS key at URL: "+d.uri,code:2,xhr:d},a);d=new DataView(e);a.key.bytes=new Uint32Array([d.getUint32(0),d.getUint32(4),d.getUint32(8),d.getUint32(12)]);return b(null,a)}},sm=function(a,b,c){return function(d,e){var f=e.response;if(d=fk(d,e))return c(d,a);if(0===f.byteLength)return c({status:e.status,message:"Empty HLS segment content at URL: "+
e.uri,code:2,xhr:e},a);a.map.bytes=new Uint8Array(e.response);b&&!b.isInitialized()&&b.init();a.map.timescales=De.timescale(a.map.bytes);a.map.videoTrackIds=De.videoTrackIds(a.map.bytes);return c(null,a)}},tm=function(a,b,c){return function(d,e){var f=e.response;if(d=fk(d,e))return c(d,a);if(0===f.byteLength)return c({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:2,xhr:e},a);a.stats={bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0};
a.key?a.encryptedBytes=new Uint8Array(e.response):a.bytes=new Uint8Array(e.response);b&&a.map&&a.map.bytes&&(b.isInitialized()||b.init(),(e=b.parse(a.bytes,a.map.videoTrackIds,a.map.timescales))&&e.captions&&(a.captionStreams=e.captionStreams,a.fmp4Captions=e.captions));return c(null,a)}},um=function(a,b,c){a.addEventListener("message",function mi(d){if(d.data.source===b.requestId)return a.removeEventListener("message",mi),d=d.data.decrypted,b.bytes=new Uint8Array(d.bytes,d.byteOffset,d.byteLength),
c(null,b)});var d=void 0;d=b.key.bytes.slice?b.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(b.key.bytes));a.postMessage(Mk({source:b.requestId,encrypted:b.encryptedBytes,key:d,iv:b.key.iv}),[b.encryptedBytes.buffer,d.buffer])},vm=function(a,b,c){var d=0,e=!1;return function(f,g){if(!e){if(f)return e=!0,dl(a),c(f,g);d+=1;if(d===a.length)return g.endOfAllRequests=Date.now(),g.encryptedBytes?um(b,g,c):c(null,g)}}},wm=function(a,b){return function(c){a.stats=J.mergeOptions(a.stats,qm(c));
!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=Date.now());return b(c,a)}},xm=function(a,b,c,d,e,f,g){var n=[];c=vm(n,c,g);if(e.key&&!e.key.bytes){g=J.mergeOptions(b,{uri:e.key.resolvedUri,responseType:"arraybuffer"});var h=rm(e,c);g=a(g,h);n.push(g)}e.map&&!e.map.bytes&&(g=J.mergeOptions(b,{uri:e.map.resolvedUri,responseType:"arraybuffer",headers:Wj(e.map)}),h=sm(e,d,c),g=a(g,h),n.push(g));b=J.mergeOptions(b,{uri:e.resolvedUri,responseType:"arraybuffer",headers:Wj(e)});
d=tm(e,d,c);a=a(b,d);a.addEventListener("progress",wm(e,f));n.push(a);return function(){return dl(n)}},el=function(a,b){return a?(a=h.getComputedStyle(a))?a[b]:"":""},Si=function(a,b){var c=a.slice();a.sort(function(a,d){var e=b(a,d);return 0===e?c.indexOf(a)-c.indexOf(d):e})},gk=function(a,b){var c=void 0,d=void 0;a.attributes.BANDWIDTH&&(c=a.attributes.BANDWIDTH);c=c||h.Number.MAX_VALUE;b.attributes.BANDWIDTH&&(d=b.attributes.BANDWIDTH);d=d||h.Number.MAX_VALUE;return c-d},ym=function(a,b,c,d,e){a=
a.playlists.map(function(a){var b=a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width;var c=a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height;var d=(d=a.attributes.BANDWIDTH)||h.Number.MAX_VALUE;return{bandwidth:d,width:b,height:c,playlist:a}});Si(a,function(a,b){return a.bandwidth-b.bandwidth});a=a.filter(function(a){return!Ed.isIncompatible(a.playlist)});var f=a.filter(function(a){return Ed.isEnabled(a.playlist)});f.length||(f=a.filter(function(a){return!Ed.isDisabled(a.playlist)}));var g=
f.filter(function(a){return a.bandwidth*he.BANDWIDTH_VARIANCE<b}),n=g[g.length-1],k=g.filter(function(a){return a.bandwidth===n.bandwidth})[0];if(!1===e)return(a=k||f[0]||a[0])?a.playlist:null;e=g.filter(function(a){return a.width&&a.height});Si(e,function(a,b){return a.width-b.width});g=e.filter(function(a){return a.width===c&&a.height===d});n=g[g.length-1];g=g.filter(function(a){return a.bandwidth===n.bandwidth})[0];var w=void 0,l=void 0;l=void 0;g||(w=e.filter(function(a){return a.width>c||a.height>
d}),l=w.filter(function(a){return a.width===w[0].width&&a.height===w[0].height}),n=l[l.length-1],l=l.filter(function(a){return a.bandwidth===n.bandwidth})[0]);return(a=l||g||k||f[0]||a[0])?a.playlist:null},zm=function(a){var b=a.currentTime,c=a.bandwidth,d=a.duration,e=a.segmentDuration,f=a.timeUntilRebuffer,g=a.currentTimeline,n=a.syncController;a=a.master.playlists.filter(function(a){return!Ed.isIncompatible(a)});var h=a.filter(Ed.isEnabled);h.length||(h=a.filter(function(a){return!Ed.isDisabled(a)}));
a=h.filter(Ed.hasAttribute.bind(null,"BANDWIDTH")).map(function(a){var h=n.getSyncPoint(a,d,g,b)?1:2;h=Ed.estimateSegmentRequestTime(e,c,a)*h-f;return{playlist:a,rebufferingImpact:h}});h=a.filter(function(a){return 0>=a.rebufferingImpact});Si(h,function(a,b){return gk(b.playlist,a.playlist)});if(h.length)return h[0];Si(a,function(a,b){return a.rebufferingImpact-b.rebufferingImpact});return a[0]||null},Am=function(a){var b=a.inbandTextTracks,c=a.captionArray,d=a.timestampOffset;if(c){var e=window.WebKitDataCue||
window.VTTCue;c.forEach(function(a){var c=a.stream,f=a.startTime,g=a.endTime;b[c]&&(f+=d,g+=d,b[c].addCue(new e(f,g,a.text)))})}},Bm=function(a,b,c){return"main"===a&&b&&c?c.containsAudio||c.containsVideo?b.containsVideo&&!c.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!b.containsVideo&&c.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":
null:"Neither audio nor video found in segment.":null},Cm=function(a){var b=a.segment,c=a.playlist,d=c.mediaSequence,e=c.segments;return["appending ["+a.mediaIndex+"] of ["+d+", "+(d+(void 0===e?[]:e).length)+"] from playlist ["+c.id+"]","["+b.start+" => "+b.end+"] in timeline ["+a.timeline+"]"].join(" ")},hk=function(a){function b(a){Ge(this,b);var c=Sf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(!a)throw new TypeError("Initialization settings are required");if("function"!==typeof a.currentTime)throw new TypeError("No currentTime getter specified");
if(!a.mediaSource)throw new TypeError("No MediaSource specified");c.bandwidth=a.bandwidth;c.throughput={rate:0,count:0};c.roundTrip=NaN;c.resetStats_();c.mediaIndex=null;c.hasPlayed_=a.hasPlayed;c.currentTime_=a.currentTime;c.seekable_=a.seekable;c.seeking_=a.seeking;c.duration_=a.duration;c.mediaSource_=a.mediaSource;c.hls_=a.hls;c.loaderType_=a.loaderType;c.startingMedia_=void 0;c.segmentMetadataTrack_=a.segmentMetadataTrack;c.goalBufferLength_=a.goalBufferLength;c.sourceType_=a.sourceType;c.inbandTextTracks_=
a.inbandTextTracks;c.state_="INIT";c.checkBufferTimeout_=null;c.error_=void 0;c.currentTimeline_=-1;c.pendingSegment_=null;c.mimeType_=null;c.sourceUpdater_=null;c.xhrOptions_=null;c.activeInitSegmentId_=null;c.initSegments_={};c.cacheEncryptionKeys_=a.cacheEncryptionKeys;c.keyCache_={};c.captionParser_="main"===c.loaderType_?new Fl:null;c.decrypter_=a.decrypter;c.syncController_=a.syncController;c.syncPoint_={segmentIndex:0,time:0};c.syncController_.on("syncinfoupdate",function(){return c.trigger("syncinfoupdate")});
c.mediaSource_.addEventListener("sourceopen",function(){return c.ended_=!1});c.fetchAtBuffer_=!1;c.logger_=Ri("SegmentLoader["+c.loaderType_+"]");Object.defineProperty(c,"state",{get:function(){return this.state_},set:function(a){a!==this.state_&&(this.logger_(this.state_+" -> "+a),this.state_=a)}});return c}Cg(b,a);gf(b,[{key:"resetStats_",value:function(){this.mediaSecondsLoaded=this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=
this.mediaBytesTransferred=0}},{key:"dispose",value:function(){this.state="DISPOSED";this.pause();this.abort_();this.sourceUpdater_&&this.sourceUpdater_.dispose();this.resetStats_();this.captionParser_&&this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"!==this.state?this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests();this.pendingSegment_=
null}},{key:"error",value:function(a){"undefined"!==typeof a&&(this.error_=a);this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function(){this.ended_=!0;this.pause();this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():J.createTimeRanges()}},{key:"initSegment",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var c=xj(a),d=this.initSegments_[c];b&&!d&&a.bytes&&(this.initSegments_[c]=
d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,timescales:a.timescales,videoTrackIds:a.videoTrackIds});return d||a}},{key:"segmentKey",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var c=a.resolvedUri,d=this.keyCache_[c];this.cacheEncryptionKeys_&&b&&!d&&a.bytes&&(this.keyCache_[c]=d={resolvedUri:a.resolvedUri,bytes:a.bytes});b={resolvedUri:(d||a).resolvedUri};d&&(b.bytes=d.bytes);return b}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&
(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){this.monitorBuffer_();if(this.playlist_){this.syncController_.setDateTimeMapping(this.playlist_);if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){this.state="READY";this.sourceUpdater_=new pm(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_);
this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(a){var c=this.playlist_,d=this.pendingSegment_;this.playlist_=a;this.xhrOptions_=b;this.hasPlayed_()||(a.syncInfo={mediaSequence:a.mediaSequence,time:0});b=null;c&&(c.id?b=c.id:c.uri&&(b=c.uri));this.logger_("playlist update ["+b+" => "+(a.id||a.uri)+"]");this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();
c&&c.uri===a.uri?(b=a.mediaSequence-c.mediaSequence,this.logger_("live window shift ["+b+"]"),null!==this.mediaIndex&&(this.mediaIndex-=b),d&&(d.mediaIndex-=b,0<=d.mediaIndex&&(d.segment=a.segments[d.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(c,a)):null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(h.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},
{key:"mimeType",value:function(a,b){this.mimeType_||(this.mimeType_=a,this.sourceBufferEmitter_=b,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(a){this.ended_=!1;this.resetLoader();this.remove(0,this.duration_(),a);this.captionParser_&&this.captionParser_.clearAllCaptions();this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1;this.resyncLoader()}},{key:"resyncLoader",value:function(){this.syncPoint_=this.mediaIndex=
null;this.abort()}},{key:"remove",value:function(a,b,c){this.sourceUpdater_&&this.sourceUpdater_.remove(a,b,c);qi(a,b,this.segmentMetadataTrack_);if(this.inbandTextTracks_)for(var d in this.inbandTextTracks_)qi(a,b,this.inbandTextTracks_[d])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&h.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=h.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_();
this.checkBufferTimeout_&&h.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=h.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var a=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(a)if(this.isEndOfStream_(a.mediaIndex))this.endOfStream();
else if(a.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())a.timeline!==this.currentTimeline_&&(this.syncController_.reset(),a.timestampOffset=a.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(a)}}},{key:"isEndOfStream_",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.playlist_;var c=this.mediaSource_;if(b&&c){var d=a===b.segments.length;b=b.endList&&"open"===c.readyState&&
d}else b=!1;return b&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(a,b,c,d,e,f){var g=0;a.length&&(g=a.end(a.length-1));a=Math.max(0,g-e);if(!b.segments.length||a>=this.goalBufferLength_()||!d&&1<=a)return null;if(null===f)return c=this.getSyncSegmentCandidate_(b),this.generateSegmentInfo_(b,c,null,!0);if(null!==c)return g=(d=b.segments[c])&&d.end?d.end:g,this.generateSegmentInfo_(b,c+1,g,!1);this.fetchAtBuffer_?(g=Ed.getMediaInfoForTime(b,g,f.segmentIndex,f.time),c=g.mediaIndex,
g=g.startTime):(g=Ed.getMediaInfoForTime(b,e,f.segmentIndex,f.time),c=g.mediaIndex,g=g.startTime);return this.generateSegmentInfo_(b,c,g,!1)}},{key:"getSyncSegmentCandidate_",value:function(a){var b=this;if(-1===this.currentTimeline_)return 0;var c=a.segments.map(function(a,b){return{timeline:a.timeline,segmentIndex:b}}).filter(function(a){return a.timeline===b.currentTimeline_});return c.length?c[Math.min(c.length-1,1)].segmentIndex:Math.max(a.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(a,
b,c,d){if(0>b||b>=a.segments.length)return null;var e=a.segments[b];return{requestId:"segment-loader-"+Math.random(),uri:e.resolvedUri,mediaIndex:b,isSyncRequest:d,startOfSegment:c,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:e.timeline,duration:e.duration,segment:e}}},{key:"abortRequestEarly_",value:function(a){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||1E3>Date.now()-(a.firstBytesReceivedAt||Date.now()))return!1;var b=
this.currentTime_(),c=a.bandwidth,d=this.pendingSegment_.duration,e=Ed.estimateSegmentRequestTime(d,c,this.playlist_,a.bytesReceived);a=cm(this.buffered_(),b,this.hls_.tech_.playbackRate())-1;if(e<=a)return!1;if(b=zm({master:this.hls_.playlists.master,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:d,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_})){c=e-a-b.rebufferingImpact;d=.5;a<=pi&&(d=1);if(!b.playlist||b.playlist.uri===this.playlist_.uri||
c<d)return!1;this.bandwidth=b.playlist.attributes.BANDWIDTH*he.BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return!0}}},{key:"handleProgress_",value:function(a,b){this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(b.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(a){this.state="WAITING";this.pendingSegment_=a;this.trimBackBuffer_(a);a.abortRequests=xm(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,
this.createSimplifiedSegmentObj_(a),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(a){var b=this.seekable_();a=this.currentTime_();var c=this.playlist_.targetDuration||10;b=b.length&&0<b.start(0)&&b.start(0)<a?b.start(0):a-30;a=Math.min(b,a-c);0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",value:function(a){var b=a.segment,c={resolvedUri:b.resolvedUri,byterange:b.byterange,requestId:a.requestId};b.key&&(a=b.key.iv||new Uint32Array([0,
0,0,a.mediaIndex+a.playlist.mediaSequence]),c.key=this.segmentKey(b.key),c.key.iv=a);b.map&&(c.map=this.initSegment(b.map));return c}},{key:"segmentRequestFinished_",value:function(a,b){this.mediaRequests+=1;b.stats&&(this.mediaBytesTransferred+=b.stats.bytesReceived,this.mediaTransferDuration+=b.stats.roundTripTime);this.pendingSegment_?b.requestId===this.pendingSegment_.requestId&&(a?(this.pendingSegment_=null,this.state="READY",-102===a.code?this.mediaRequestsAborted+=1:(this.pause(),-101===a.code?
(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(a),this.trigger("error")))):(this.bandwidth=b.stats.bandwidth,this.roundTrip=b.stats.roundTripTime,b.map&&(b.map=this.initSegment(b.map,!0)),b.key&&this.segmentKey(b.key,!0),this.processSegmentResponse_(b))):this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(a){var b=this.pendingSegment_;b.bytes=a.bytes;a.map&&(b.segment.map.bytes=a.map.bytes);
b.endOfAllRequests=a.endOfAllRequests;if(a.fmp4Captions){b=this.inbandTextTracks_;var c=this.hls_.tech_,d=a.captionStreams,e;for(e in d)b[e]||(c.trigger({type:"usage",name:"hls-608"}),d=c.textTracks().getTrackById(e),b[e]=d?d:c.addRemoteTextTrack({kind:"captions",id:e,label:e},!1).track);Am({inbandTextTracks:this.inbandTextTracks_,captionArray:a.fmp4Captions,timestampOffset:0});this.captionParser_&&this.captionParser_.clearParsedCaptions()}this.handleSegment_()}},{key:"handleSegment_",value:function(){var a=
this;if(this.pendingSegment_){var b=this.pendingSegment_,c=b.segment,d=this.syncController_.probeSegmentInfo(b);"undefined"===typeof this.startingMedia_&&d&&(d.containsAudio||d.containsVideo)&&(this.startingMedia_={containsAudio:d.containsAudio,containsVideo:d.containsVideo});if(d=Bm(this.loaderType_,this.startingMedia_,d))this.error({message:d,blacklistDuration:Infinity}),this.trigger("error");else if(b.isSyncRequest)this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";else{null!==
b.timestampOffset&&b.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(b.timestampOffset),this.trigger("timestampoffset"));d=this.syncController_.mappingForTimeline(b.timeline);null!==d&&this.trigger({type:"segmenttimemapping",mapping:d});this.state="APPENDING";if(c.map){var e=xj(c.map);this.activeInitSegmentId_&&this.activeInitSegmentId_===e||(d=this.initSegment(c.map),this.sourceUpdater_.appendBuffer({bytes:d.bytes},function(){a.activeInitSegmentId_=e}))}b.byteLength=
b.bytes.byteLength;this.mediaSecondsLoaded="number"===typeof c.start&&"number"===typeof c.end?this.mediaSecondsLoaded+(c.end-c.start):this.mediaSecondsLoaded+c.duration;this.logger_(Cm(b));this.sourceUpdater_.appendBuffer({bytes:b.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,b.requestId)},this.handleUpdateEnd_.bind(this))}}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function(a,b){this.pendingSegment_&&a===this.pendingSegment_.requestId&&
(a=this.pendingSegment_.segment,a.videoTimingInfo||(a.videoTimingInfo={}),a.videoTimingInfo.transmuxerPrependedSeconds=b.videoSegmentTimingInfo.prependedContentDuration||0,a.videoTimingInfo.transmuxedPresentationStart=b.videoSegmentTimingInfo.start.presentation,a.videoTimingInfo.transmuxedPresentationEnd=b.videoSegmentTimingInfo.end.presentation,a.videoTimingInfo.baseMediaDecodeTime=b.videoSegmentTimingInfo.baseMediaDecodeTime)}},{key:"handleUpdateEnd_",value:function(){if(this.pendingSegment_){var a=
this.pendingSegment_,b=a.segment,c=null!==this.mediaIndex;this.pendingSegment_=null;this.recordThroughput_(a);this.addSegmentMetadataCue_(a);this.state="READY";this.mediaIndex=a.mediaIndex;this.fetchAtBuffer_=!0;this.currentTimeline_=a.timeline;this.trigger("syncinfoupdate");b.end&&this.currentTime_()-b.end>3*a.playlist.targetDuration?this.resetEverything():(c&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(a.mediaIndex+1,a.playlist)&&this.endOfStream(),this.paused()||
this.monitorBuffer_())}else this.state="READY",this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(a){var b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1;this.throughput.rate+=(Math.floor(a.byteLength/c*8E3)-b)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(a){if(this.segmentMetadataTrack_){var b=a.segment,c=b.start,d=b.end;if("number"===typeof c&&isFinite(c)&&"number"===typeof d&&isFinite(d)){qi(c,d,this.segmentMetadataTrack_);var e=h.WebKitDataCue||
h.VTTCue;a={custom:b.custom,dateTimeObject:b.dateTimeObject,dateTimeString:b.dateTimeString,bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.uri,start:c,end:d};b=JSON.stringify(a);c=new e(c,d,b);c.value=a;this.segmentMetadataTrack_.addCue(c)}}}}]);return b}(J.EventTarget),fl=new Uint8Array(["\n","\n"].map(function(a){return a.charCodeAt(0)})),Dm=function(a){function b(a){var c=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Ge(this,b);c=Sf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));c.mediaSource_=null;c.subtitlesTrack_=null;return c}Cg(b,a);gf(b,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return J.createTimeRanges();var a=this.subtitlesTrack_.cues;return J.createTimeRanges([[a[0].startTime,a[a.length-1].startTime]])}},{key:"initSegment",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:!1;if(!a)return null;var c=xj(a),d=this.initSegments_[c];b&&!d&&a.bytes&&(b=new Uint8Array(fl.byteLength+a.bytes.byteLength),b.set(a.bytes),b.set(fl,a.bytes.byteLength),this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:b});return d||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function(a){if("undefined"===
typeof a)return this.subtitlesTrack_;this.subtitlesTrack_=a;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_}},{key:"remove",value:function(a,b){qi(a,b,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var a=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var b=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),
this.syncPoint_);if(b=this.skipEmptySegments_(b))null===this.syncController_.timestampOffsetForTimeline(b.timeline)?(this.syncController_.one("timestampoffset",function(){a.state="READY";a.paused()||a.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(b)}},{key:"skipEmptySegments_",value:function(a){for(;a&&a.segment.empty;)a=this.generateSegmentInfo_(a.playlist,a.mediaIndex+1,a.startOfSegment+a.duration,a.isSyncRequest);return a}},{key:"handleSegment_",value:function(){var a=
this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var b=this.pendingSegment_,c=b.segment;if("function"!==typeof h.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var d=void 0,e=function(){a.subtitlesTrack_.tech_.off("vttjsloaded",d);a.error({message:"Error loading vtt.js"});a.state="READY";a.pause();a.trigger("error")};d=function(){a.subtitlesTrack_.tech_.off("vttjserror",e);a.handleSegment_()};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",
d);this.subtitlesTrack_.tech_.one("vttjserror",e)}else{c.requested=!0;try{this.parseVTTCues_(b)}catch(oj){return this.error({message:oj.message}),this.state="READY",this.pause(),this.trigger("error")}this.updateTimeMapping_(b,this.syncController_.timelines[b.timeline],this.playlist_);b.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(b.byteLength=b.bytes.byteLength,this.mediaSecondsLoaded+=c.duration,b.cues.length&&this.remove(b.cues[0].endTime,b.cues[b.cues.length-
1].endTime),b.cues.forEach(function(b){a.subtitlesTrack_.addCue(b)}),this.handleUpdateEnd_())}}else this.state="READY"}},{key:"parseVTTCues_",value:function(a){var b=void 0,c=!1;"function"===typeof h.TextDecoder?b=new h.TextDecoder("utf8"):(b=h.WebVTT.StringDecoder(),c=!0);b=new h.WebVTT.Parser(h,h.vttjs,b);a.cues=[];a.timestampmap={MPEGTS:0,LOCAL:0};b.oncue=a.cues.push.bind(a.cues);b.ontimestampmap=function(b){return a.timestampmap=b};b.onparsingerror=function(a){J.log.warn("Error encountered when parsing cues: "+
a.message)};if(a.segment.map){var d=a.segment.map.bytes;c&&(d=decodeURIComponent(escape(String.fromCharCode.apply(null,d))));b.parse(d)}d=a.bytes;c&&(d=decodeURIComponent(escape(String.fromCharCode.apply(null,d))));b.parse(d);b.flush()}},{key:"updateTimeMapping_",value:function(a,b,c){var d=a.segment;if(b)if(a.cues.length){var e=a.timestampmap,f=e.MPEGTS/9E4-e.LOCAL+b.mapping;a.cues.forEach(function(a){a.startTime+=f;a.endTime+=f});c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,
time:Math.min(a.cues[0].startTime,a.cues[a.cues.length-1].startTime-d.duration)})}else d.empty=!0}}]);return b}(hk),Em=function(a,b){if(a.segments)for(var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,d=void 0,e=0;e<a.segments.length;e++){var f=a.segments[e];if(!d)a:{var g=c+f.duration/2;d=b.cues;for(var n=0;n<d.length;n++){var k=d[n];if(g>=k.adStartTime&&g<=k.adEndTime){d=k;break a}}d=null}if(d){if("cueIn"in f){d.endTime=c;d.adEndTime=c;c+=f.duration;d=null;continue}if(c<d.endTime){c+=
f.duration;continue}d.endTime+=f.duration}else"cueOut"in f&&(d=new h.VTTCue(c,c+f.duration,f.cueOut),d.adStartTime=c,d.adEndTime=c+parseFloat(f.cueOut),b.addCue(d)),"cueOutCont"in f&&(g=f.cueOutCont.split("/").map(parseFloat),d=Ml(g,2),g=d[0],n=d[1],d=new h.VTTCue(c,c+f.duration,""),d.adStartTime=c-g,d.adEndTime=d.adStartTime+n,b.addCue(d));c+=f.duration}},gl=[{name:"VOD",run:function(a,b,c,d,e){return Infinity!==c?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(a,b,c,d,e){if(!a.datetimeToDisplayTime)return null;
b=b.segments||[];d=c=null;e=e||0;for(var f=0;f<b.length;f++){var g=b[f];if(g.dateTimeObject){g=g.dateTimeObject.getTime()/1E3+a.datetimeToDisplayTime;var n=Math.abs(e-g);if(null!==d&&(0===n||d<n))break;d=n;c={time:g,segmentIndex:f}}}return c}},{name:"Segment",run:function(a,b,c,d,e){a=b.segments||[];c=b=null;e=e||0;for(var f=0;f<a.length;f++){var g=a[f];if(g.timeline===d&&"undefined"!==typeof g.start){var n=Math.abs(e-g.start);if(null!==c&&c<n)break;if(!b||null===c||c>=n)c=n,b={time:g.start,segmentIndex:f}}}return b}},
{name:"Discontinuity",run:function(a,b,c,d,e){c=null;e=e||0;if(b.discontinuityStarts&&b.discontinuityStarts.length){d=null;for(var f=0;f<b.discontinuityStarts.length;f++){var g=b.discontinuityStarts[f],n=a.discontinuities[b.discontinuitySequence+f+1];if(n){var h=Math.abs(e-n.time);if(null!==d&&d<h)break;if(!c||null===d||d>=h)d=h,c={time:n.time,segmentIndex:g}}}}return c}},{name:"Playlist",run:function(a,b,c,d,e){return b.syncInfo?{time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence}:
null}}],Fm=function(a){function b(){Ge(this,b);var a=Sf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.inspectCache_=void 0;a.timelines=[];a.discontinuities=[];a.datetimeToDisplayTime=null;a.logger_=Ri("SyncController");return a}Cg(b,a);gf(b,[{key:"getSyncPoint",value:function(a,b,c,d){a=this.runStrategies_(a,b,c,d);return a.length?this.selectSyncPoint_(a,{key:"time",value:d}):null}},{key:"getExpiredTime",value:function(a,b){if(!a||!a.segments)return null;b=this.runStrategies_(a,b,a.discontinuitySequence,
0);if(!b.length)return null;b=this.selectSyncPoint_(b,{key:"segmentIndex",value:0});0<b.segmentIndex&&(b.time*=-1);return Math.abs(b.time+Oi(a,b.segmentIndex,0))}},{key:"runStrategies_",value:function(a,b,c,d){for(var e=[],f=0;f<gl.length;f++){var g=gl[f],n=g.run(this,a,b,c,d);n&&(n.strategy=g.name,e.push({strategy:g.name,syncPoint:n}))}return e}},{key:"selectSyncPoint_",value:function(a,b){for(var c=a[0].syncPoint,d=Math.abs(a[0].syncPoint[b.key]-b.value),e=a[0].strategy,f=1;f<a.length;f++){var g=
Math.abs(a[f].syncPoint[b.key]-b.value);g<d&&(d=g,c=a[f].syncPoint,e=a[f].strategy)}this.logger_("syncPoint for ["+b.key+": "+b.value+"] chosen with strategy"+(" ["+e+"]: [time:"+c.time+",")+(" segmentIndex:"+c.segmentIndex+"]"));return c}},{key:"saveExpiredSegmentInfo",value:function(a,b){for(var c=b.mediaSequence-a.mediaSequence-1;0<=c;c--){var d=a.segments[c];if(d&&"undefined"!==typeof d.start){b.syncInfo={mediaSequence:a.mediaSequence+c,time:d.start};this.logger_("playlist refresh sync: [time:"+
b.syncInfo.time+","+(" mediaSequence: "+b.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(a){!this.datetimeToDisplayTime&&a.segments&&a.segments.length&&a.segments[0].dateTimeObject&&(this.datetimeToDisplayTime=-(a.segments[0].dateTimeObject.getTime()/1E3))}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(a){var b=a.segment,c=a.playlist,d;(d=b.map?this.probeMp4Segment_(a):this.probeTsSegment_(a))&&
this.calculateSegmentTimeMapping_(a,d)&&(this.saveDiscontinuitySyncInfo_(a),c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:b.start}));return d}},{key:"probeMp4Segment_",value:function(a){var b=a.segment,c=De.timescale(b.map.bytes);c=De.startTime(c,a.bytes);null!==a.timestampOffset&&(a.timestampOffset-=c);return{start:c,end:c+b.duration}}},{key:"probeTsSegment_",value:function(a){var b=a.bytes;a=this.inspectCache_;if(yg.isLikelyAacData(b))b:{for(var c=!1,d=0,e=null,f=null,
g,n=0,h;3<=b.length-n;){switch(yg.parseType(b,n)){case "timed-metadata":if(10>b.length-n){c=!0;break}g=yg.parseId3TagSize(b,n);if(g>b.length){c=!0;break}null===f&&(h=b.subarray(n,n+g),f=yg.parseAacTimestamp(h));n+=g;break;case "audio":if(7>b.length-n){c=!0;break}g=yg.parseAdtsSize(b,n);if(g>b.length){c=!0;break}null===e&&(h=b.subarray(n,n+g),e=yg.parseSampleRate(h));d++;n+=g;break;default:n++}if(c){b=null;break b}}null===e||null===f?b=null:(b=9E4/e,b={audio:[{type:"audio",dts:f,pts:f},{type:"audio",
dts:f+1024*d*b,pts:f+1024*d*b}]})}else{f={pid:null,table:null};c={};e=0;for(g=188;g<b.byteLength;)if(71===b[e]&&71===b[g]){n=b.subarray(e,g);h=Tb.parseType(n,f.pid);switch(h){case "pat":f.pid||(f.pid=Tb.parsePat(n));break;case "pmt":f.table||(f.table=Tb.parsePmt(n))}if(f.pid&&f.table)break;e+=188;g+=188}else e++,g++;for(d in f.table)if(f.table.hasOwnProperty(d))switch(f.table[d]){case mc.H264_STREAM_TYPE:c.video=[];var k;g=b;n=f;h=c;var w=0,l=188,m=!1,t=[];for(k=0;l<g.byteLength;)if(71===g[w]&&71===
g[l]){e=g.subarray(w,l);var p=Tb.parseType(e,n.pid);switch(p){case "pes":var r=Tb.parsePesType(e,n.table);p=Tb.parsePayloadUnitStartIndicator(e);if("video"===r&&(p&&!m&&(r=Tb.parsePesTime(e))&&(r.type="video",h.video.push(r),m=!0),!h.firstKeyFrame)){if(p&&0!==k){r=new Uint8Array(k);for(p=0;t.length;)k=t.shift(),r.set(k,p),p+=k.byteLength;Tb.videoPacketContainsKeyFrame(r)&&((k=Tb.parsePesTime(r))?(h.firstKeyFrame=k,h.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself."));
k=0}t.push(e);k+=e.byteLength}}if(m&&h.firstKeyFrame)break;w+=188;l+=188}else w++,l++;l=g.byteLength;w=l-188;for(m=!1;0<=w;)if(71===g[w]&&71===g[l]){e=g.subarray(w,l);p=Tb.parseType(e,n.pid);switch(p){case "pes":if(r=Tb.parsePesType(e,n.table),p=Tb.parsePayloadUnitStartIndicator(e),"video"===r&&p&&(r=Tb.parsePesTime(e)))r.type="video",h.video.push(r),m=!0}if(m)break;w-=188;l-=188}else w--,l--;0===c.video.length&&delete c.video;break;case mc.ADTS_STREAM_TYPE:c.audio=[];e=b;g=f;n=c;h=0;w=188;for(l=
!1;w<=e.byteLength;)if(71!==e[h]||71!==e[w]&&w!==e.byteLength)h++,w++;else{m=e.subarray(h,w);t=Tb.parseType(m,g.pid);switch(t){case "pes":if(k=Tb.parsePesType(m,g.table),t=Tb.parsePayloadUnitStartIndicator(m),"audio"===k&&t&&(m=Tb.parsePesTime(m)))m.type="audio",n.audio.push(m),l=!0}if(l)break;h+=188;w+=188}w=e.byteLength;h=w-188;for(l=!1;0<=h;)if(71!==e[h]||71!==e[w]&&w!==e.byteLength)h--,w--;else{m=e.subarray(h,w);t=Tb.parseType(m,g.pid);switch(t){case "pes":if(k=Tb.parsePesType(m,g.table),t=Tb.parsePayloadUnitStartIndicator(m),
"audio"===k&&t&&(m=Tb.parsePesTime(m)))m.type="audio",n.audio.push(m),l=!0}if(l)break;h-=188;w-=188}0===c.audio.length&&delete c.audio}b=c}b&&(b.audio||b.video)?(Gl(b,a),a=b):a=null;d=b=void 0;if(!a)return null;a.video&&2===a.video.length?(this.inspectCache_=a.video[1].dts,b=a.video[0].dtsTime,d=a.video[1].dtsTime):a.audio&&2===a.audio.length&&(this.inspectCache_=a.audio[1].dts,b=a.audio[0].dtsTime,d=a.audio[1].dtsTime);return{start:b,end:d,containsVideo:a.video&&2===a.video.length,containsAudio:a.audio&&
2===a.audio.length}}},{key:"timestampOffsetForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].time}},{key:"mappingForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].mapping}},{key:"calculateSegmentTimeMapping_",value:function(a,b){var c=a.segment,d=this.timelines[a.timeline];if(null!==a.timestampOffset)d={time:a.startOfSegment,mapping:a.startOfSegment-b.start},this.timelines[a.timeline]=d,this.trigger("timestampoffset"),
this.logger_("time mapping for timeline "+a.timeline+": "+("[time: "+d.time+"] [mapping: "+d.mapping+"]")),c.start=a.startOfSegment,c.end=b.end+d.mapping;else if(d)c.start=b.start+d.mapping,c.end=b.end+d.mapping;else return!1;return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(a){var b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts&&b.discontinuityStarts.length)for(var d=0;d<b.discontinuityStarts.length;d++){var e=
b.discontinuityStarts[d],f=b.discontinuitySequence+d+1,g=e-a.mediaIndex,n=Math.abs(g);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>n)e=0>g?c.start-Oi(b,a.mediaIndex,e):c.end+Oi(b,a.mediaIndex+1,e),this.discontinuities[f]={time:e,accuracy:n}}}}]);return b}(J.EventTarget),Gm=new lg("./decrypter-worker.worker.js",function(a,b){var c=this;(function(){var a=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},b=function(){function a(a,b){for(var c=
0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)},e=null,f=function(){function b(c){a(this,b);if(!e){var d=[[[],[],[],[],[]],[[],[],[],[],[]]],f=d[0],g=d[1],n=f[4],h=g[4],k,w,l,m=[],t=[],p;for(k=0;256>k;k++)t[(m[k]=k<<1^283*(k>>7))^k]=k;for(w=l=0;!n[w];w^=p||1,l=t[l]||1){var r=l^l<<1^l<<2^l<<3^l<<4;r=r>>8^r&255^99;n[w]=r;h[r]=w;var I=m[k=m[p=m[w]]];var q=16843009*I^65537*k^257*p^16843008*w;I=257*m[r]^16843008*r;for(k=0;4>k;k++)f[k][w]=I=I<<24^I>>>8,g[k][r]=q=q<<24^q>>>8}for(k=0;5>k;k++)f[k]=f[k].slice(0),g[k]=g[k].slice(0);e=d}this._tables=
[[e[0][0].slice(),e[0][1].slice(),e[0][2].slice(),e[0][3].slice(),e[0][4].slice()],[e[1][0].slice(),e[1][1].slice(),e[1][2].slice(),e[1][3].slice(),e[1][4].slice()]];d=this._tables[0][4];f=this._tables[1];w=c.length;l=1;if(4!==w&&6!==w&&8!==w)throw Error("Invalid aes key size");n=c.slice(0);h=[];this._key=[n,h];for(c=w;c<4*w+28;c++){g=n[c-1];if(0===c%w||8===w&&4===c%w)g=d[g>>>24]<<24^d[g>>16&255]<<16^d[g>>8&255]<<8^d[g&255],0===c%w&&(g=g<<8^g>>>24^l<<24,l=l<<1^283*(l>>7));n[c]=n[c-w]^g}for(w=0;c;w++,
c--)g=n[w&3?c:c-4],h[w]=4>=c||4>w?g:f[0][d[g>>>24]]^f[1][d[g>>16&255]]^f[2][d[g>>8&255]]^f[3][d[g&255]]}b.prototype.decrypt=function(a,b,c,d,e,f){var g=this._key[1];a^=g[0];d^=g[1];c^=g[2];b^=g[3];var n=g.length/4-2,h,k=4;var w=this._tables[1];var l=w[0],m=w[1],t=w[2],p=w[3],r=w[4];for(h=0;h<n;h++){w=l[a>>>24]^m[d>>16&255]^t[c>>8&255]^p[b&255]^g[k];var I=l[d>>>24]^m[c>>16&255]^t[b>>8&255]^p[a&255]^g[k+1];var q=l[c>>>24]^m[b>>16&255]^t[a>>8&255]^p[d&255]^g[k+2];b=l[b>>>24]^m[a>>16&255]^t[d>>8&255]^
p[c&255]^g[k+3];k+=4;a=w;d=I;c=q}for(h=0;4>h;h++)e[(3&-h)+f]=r[a>>>24]<<24^r[d>>16&255]<<16^r[c>>8&255]<<8^r[b&255]^g[k++],w=a,a=d,d=c,c=b,b=w};return b}(),g=function(){function b(){a(this,b);this.listeners={}}b.prototype.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)};b.prototype.off=function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b};b.prototype.trigger=function(a){var b=this.listeners[a];if(b)if(2===
arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else{c=Array.prototype.slice.call(arguments,1);d=b.length;for(var e=0;e<d;++e)b[e].apply(this,c)}};b.prototype.dispose=function(){this.listeners={}};b.prototype.pipe=function(a){this.on("data",function(b){a.push(b)})};return b}(),n=function(b){function c(){a(this,c);var d=b.call(this,g);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?
this:d;d.jobs=[];d.delay=1;d.timeout_=null;return d}d(c,b);c.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};c.prototype.push=function(a){this.jobs.push(a);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};return c}(g),h=function(a){return a<<24|(a&65280)<<8|(a&16711680)>>8|a>>>24},k=function(){function c(b,d,e,f){a(this,c);var g=c.STEP,k=new Int32Array(b.buffer),w=new Uint8Array(b.byteLength);
b=0;this.asyncStream_=new n;this.asyncStream_.push(this.decryptChunk_(k.subarray(b,b+g),d,e,w));for(b=g;b<k.length;b+=g)e=new Uint32Array([h(k[b-4]),h(k[b-3]),h(k[b-2]),h(k[b-1])]),this.asyncStream_.push(this.decryptChunk_(k.subarray(b,b+g),d,e,w));this.asyncStream_.push(function(){f(null,w.subarray(0,w.byteLength-w[w.byteLength-1]))})}c.prototype.decryptChunk_=function(a,b,c,d){return function(){var e=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2),g=new f(Array.prototype.slice.call(b)),n=
new Uint8Array(a.byteLength),k=new Int32Array(n.buffer),w;var l=c[0];var m=c[1];var t=c[2];var p=c[3];for(w=0;w<e.length;w+=4){var r=h(e[w]);var I=h(e[w+1]);var q=h(e[w+2]);var u=h(e[w+3]);g.decrypt(r,I,q,u,k,w);k[w]=h(k[w]^l);k[w+1]=h(k[w+1]^m);k[w+2]=h(k[w+2]^t);k[w+3]=h(k[w+3]^p);l=r;m=I;t=q;p=u}d.set(n,a.byteOffset)}};b(c,null,[{key:"STEP",get:function(){return 32E3}}]);return c}(),w=function(a){var b={};Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,
byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d});return b};return new function(a){a.onmessage=function(b){var c=b.data;b=new Uint8Array(c.encrypted.bytes,c.encrypted.byteOffset,c.encrypted.byteLength);var d=new Uint32Array(c.key.bytes,c.key.byteOffset,c.key.byteLength/4),e=new Uint32Array(c.iv.bytes,c.iv.byteOffset,c.iv.byteLength/4);new k(b,d,e,function(b,d){a.postMessage(w({source:c.source,decrypted:d}),[d.buffer])})}}(c)})()}),yj=function(a,b){a.abort();a.pause();b&&b.activePlaylistLoader&&
(b.activePlaylistLoader.pause(),b.activePlaylistLoader=null)},Hm=function(a,b){return function(){var c=b.segmentLoaders,d=c[a],e=c.main;c=b.mediaTypes[a];var f=c.activeTrack();f=c.activeGroup(f);var g=c.activePlaylistLoader;yj(d,c);f&&(f.playlistLoader?(d.resyncLoader(),d=f.playlistLoader,c.activePlaylistLoader=d,d.load()):g&&e.resetEverything())}},Im=function(a,b){return function(){var c=b.segmentLoaders,d=c[a],e=c.main;c=b.mediaTypes[a];var f=c.activeTrack(),g=c.activeGroup(f),n=c.activePlaylistLoader;
yj(d,c);g&&(g.playlistLoader?n===g.playlistLoader?(d=g.playlistLoader,c.activePlaylistLoader=d,d.load()):(d.track&&d.track(f),d.resetEverything(),d=g.playlistLoader,c.activePlaylistLoader=d,d.load()):e.resetEverything())}},zj={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a],d=b.blacklistCurrentPlaylist;yj(b.segmentLoaders[a],c);var e=c.activeTrack(),f=c.activeGroup();f=(f.filter(function(a){return a["default"]})[0]||f[0]).id;f=c.tracks[f];if(e===f)d({message:"Problem encountered loading the default audio track."});
else{J.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var g in c.tracks)c.tracks[g].enabled=c.tracks[g]===f;c.onTrackChanged()}}},SUBTITLES:function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a];J.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");yj(c,d);if(c=d.activeTrack())c.mode="disabled";d.onTrackChanged()}}},hl={AUDIO:function(a,b,c){if(b){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a];
b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e);(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()});b.on("loadedplaylist",function(){f.playlist(b.media(),e);d.paused()||f.load()});b.on("error",zj[a](a,c))}},SUBTITLES:function(a,b,c){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a],g=c.mediaTypes[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e);f.track(g.activeTrack());(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()});b.on("loadedplaylist",function(){f.playlist(b.media(),
e);d.paused()||f.load()});b.on("error",zj[a](a,c))}},Jm={AUDIO:function(a,b){var c=b.hls,d=b.sourceType,e=b.segmentLoaders[a],f=b.requestOptions,g=b.master.mediaGroups,n=b.mediaTypes[a],h=n.groups;n=n.tracks;var k=b.masterPlaylistLoader;g[a]&&0!==Object.keys(g[a]).length||(g[a]={main:{"default":{"default":!0}}});for(var w in g[a]){h[w]||(h[w]=[]);for(var l in g[a][w]){var m=g[a][w][l];var t=m.resolvedUri?new vj(m.resolvedUri,c,f):m.playlists&&"dash"===d?new ek(m.playlists[0],c,f,k):null;m=J.mergeOptions({id:l,
playlistLoader:t},m);hl[a](a,m.playlistLoader,b);h[w].push(m);if("undefined"===typeof n[l]){t=J.AudioTrack;var p=l,r=m["default"]?"main":"alternative";m.characteristics&&0<=m.characteristics.indexOf("public.accessibility.describes-video")&&(r="main-desc");m=new t({id:p,kind:r,enabled:!1,language:m.language,"default":m["default"],label:l});n[l]=m}}}e.on("error",zj[a](a,b))},SUBTITLES:function(a,b){var c=b.tech,d=b.hls,e=b.sourceType,f=b.segmentLoaders[a],g=b.requestOptions,n=b.master.mediaGroups,h=
b.mediaTypes[a],k=h.groups;h=h.tracks;var w=b.masterPlaylistLoader,l;for(l in n[a]){k[l]||(k[l]=[]);for(var m in n[a][l])if(!n[a][l][m].forced){var t=n[a][l][m],p=void 0;"hls"===e?p=new vj(t.resolvedUri,d,g):"dash"===e&&(p=new ek(t.playlists[0],d,g,w));t=J.mergeOptions({id:m,playlistLoader:p},t);hl[a](a,t.playlistLoader,b);k[l].push(t);"undefined"===typeof h[m]&&(t=c.addRemoteTextTrack({id:m,kind:"subtitles","default":t["default"]&&t.autoselect,language:t.language,label:m},!1).track,h[m]=t)}}f.on("error",
zj[a](a,b))},"CLOSED-CAPTIONS":function(a,b){var c=b.tech,d=b.master.mediaGroups,e=b.mediaTypes[a];b=e.groups;e=e.tracks;for(var f in d[a]){b[f]||(b[f]=[]);for(var g in d[a][f]){var n=d[a][f][g];n.instreamId.match(/CC\d/)&&(b[f].push(J.mergeOptions({id:g},n)),"undefined"===typeof e[g]&&(n=c.addRemoteTextTrack({id:n.instreamId,kind:"captions","default":n["default"]&&n.autoselect,language:n.language,label:g},!1).track,e[g]=n))}}}},Km=function(a,b){return function(c){var d=b.mediaTypes[a].groups,e=b.masterPlaylistLoader.media();
if(!e)return null;var f=null;e.attributes[a]&&(f=d[e.attributes[a]]);f=f||d.main;return"undefined"===typeof c?f:null===c?null:f.filter(function(a){return a.id===c.id})[0]||null}},Lm={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a].tracks,d;for(d in c)if(c[d].enabled)return c[d];return null}},SUBTITLES:function(a,b){return function(){var c=b.mediaTypes[a].tracks,d;for(d in c)if("showing"===c[d].mode)return c[d];return null}}},Mm=function(a){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){Jm[b](b,
a)});var b=a.mediaTypes,c=a.masterPlaylistLoader,d=a.tech,e=a.hls;["AUDIO","SUBTITLES"].forEach(function(c){b[c].activeGroup=Km(c,a);b[c].activeTrack=Lm[c](c,a);b[c].onGroupChanged=Hm(c,a);b[c].onTrackChanged=Im(c,a)});var f=b.AUDIO.activeGroup();f=(f.filter(function(a){return a["default"]})[0]||f[0]).id;b.AUDIO.tracks[f].enabled=!0;b.AUDIO.onTrackChanged();c.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return b[a].onGroupChanged()})});var g=function(){b.AUDIO.onTrackChanged();
d.trigger({type:"usage",name:"hls-audio-change"})};d.audioTracks().addEventListener("change",g);d.remoteTextTracks().addEventListener("change",b.SUBTITLES.onTrackChanged);e.on("dispose",function(){d.audioTracks().removeEventListener("change",g);d.remoteTextTracks().removeEventListener("change",b.SUBTITLES.onTrackChanged)});d.clearTracks("audio");for(var n in b.AUDIO.tracks)d.audioTracks().addTrack(b.AUDIO.tracks[n])},Nm=function(){var a={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){a[b]=
{groups:{},tracks:{},activePlaylistLoader:null,activeGroup:je,activeTrack:je,onGroupChanged:je,onTrackChanged:je}});return a},eh=void 0,Om="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),Pm=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},Qm=function(a){function b(a){Ge(this,b);var c=Sf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),d=a.url,e=a.handleManifestRedirects,f=a.withCredentials,
g=a.tech,n=a.bandwidth,h=a.externHls,k=a.useCueTags,w=a.blacklistDuration,l=a.enableLowInitialPlaylist,m=a.sourceType,t=a.seekTo,p=a.cacheEncryptionKeys;if(!d)throw Error("A non-empty playlist URL is required");eh=h;c.withCredentials=f;c.tech_=g;c.hls_=g.hls;c.seekTo_=t;c.sourceType_=m;c.useCueTags_=k;c.blacklistDuration=w;c.enableLowInitialPlaylist=l;c.useCueTags_&&(c.cueTagsTrack_=c.tech_.addTextTrack("metadata","ad-cues"),c.cueTagsTrack_.inBandMetadataTrackDispatchType="");c.requestOptions_={withCredentials:f,
handleManifestRedirects:e,timeout:null};c.mediaTypes_=Nm();c.mediaSource=new J.MediaSource;c.mediaSource.addEventListener("sourceopen",c.handleSourceOpen_.bind(c));c.seekable_=J.createTimeRanges();c.hasPlayed_=function(){return!1};c.syncController_=new Fm(a);c.segmentMetadataTrack_=g.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;c.decrypter_=new Gm;c.inbandTextTracks_={};e={hls:c.hls_,mediaSource:c.mediaSource,currentTime:c.tech_.currentTime.bind(c.tech_),seekable:function(){return c.seekable()},
seeking:function(){return c.tech_.seeking()},duration:function(){return c.mediaSource.duration},hasPlayed:function(){return c.hasPlayed_()},goalBufferLength:function(){return c.goalBufferLength()},bandwidth:n,syncController:c.syncController_,decrypter:c.decrypter_,sourceType:c.sourceType_,inbandTextTracks:c.inbandTextTracks_,cacheEncryptionKeys:p};c.masterPlaylistLoader_="dash"===c.sourceType_?new ek(d,c.hls_,c.requestOptions_):new vj(d,c.hls_,c.requestOptions_);c.setupMasterPlaylistLoaderListeners_();
c.mainSegmentLoader_=new hk(J.mergeOptions(e,{segmentMetadataTrack:c.segmentMetadataTrack_,loaderType:"main"}),a);c.audioSegmentLoader_=new hk(J.mergeOptions(e,{loaderType:"audio"}),a);c.subtitleSegmentLoader_=new Dm(J.mergeOptions(e,{loaderType:"vtt"}),a);c.setupSegmentLoaderListeners_();Om.forEach(function(a){c[a+"_"]=Pm.bind(c,a)});c.logger_=Ri("MPC");c.masterPlaylistLoader_.load();return c}Cg(b,a);gf(b,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",
function(){var b=a.masterPlaylistLoader_.media(),c=1500*b.targetDuration;Vj(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c;b.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load());Mm({sourceType:a.sourceType_,segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,
hls:a.hls_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)});a.triggerPresenceUsage_(a.master(),b);try{a.setupSourceBuffers_()}catch(Oj){return J.log.warn("Failed to create SourceBuffers",Oj),a.mediaSource.endOfStream("decode")}a.setupFirstPlay();if(!a.mediaTypes_.AUDIO.activePlaylistLoader||a.mediaTypes_.AUDIO.activePlaylistLoader.media())a.trigger("selectedinitialmedia");else a.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){a.trigger("selectedinitialmedia")})});
this.masterPlaylistLoader_.on("loadedplaylist",function(){var b=a.masterPlaylistLoader_.media();if(b){if(a.useCueTags_&&a.updateAdCues_(b),a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.updateDuration(),a.tech_.paused()||(a.mainSegmentLoader_.load(),a.audioSegmentLoader_&&a.audioSegmentLoader_.load()),!b.endList){var c=function(){var b=a.seekable();0!==b.length&&a.mediaSource.addSeekableRange_(b.start(0),b.end(0))};if(Infinity!==a.duration())a.tech_.one("durationchange",function mi(){if(Infinity===
a.duration())c();else a.tech_.one("durationchange",mi)});else c()}}else a.excludeUnsupportedVariants_(),b=void 0,a.enableLowInitialPlaylist&&(b=a.selectInitialPlaylist()),b||(b=a.selectPlaylist()),a.initialMedia_=b,a.masterPlaylistLoader_.media(a.initialMedia_)});this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort();a.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",
function(){var b=a.masterPlaylistLoader_.media(),c=1500*b.targetDuration;Vj(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c;a.mainSegmentLoader_.playlist(b,a.requestOptions_);a.mainSegmentLoader_.load();a.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var b=a.masterPlaylistLoader_.media();a.stuckAtPlaylistEnd_(b)&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),
a.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(a,b){a=a.mediaGroups||{};var c=!0,d=Object.keys(a.AUDIO),e;for(e in a.AUDIO)for(var f in a.AUDIO[e])a.AUDIO[e][f].uri||(c=!1);c&&this.tech_.trigger({type:"usage",name:"hls-demuxed"});
Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"});eh.Playlist.isAes(b)&&this.tech_.trigger({type:"usage",name:"hls-aes"});eh.Playlist.isFmp4(b)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"});d.length&&1<Object.keys(a.AUDIO[d[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",
function(){var b=a.selectPlaylist(),c=a.masterPlaylistLoader_.media(),d=a.tech_.buffered();d=d.length?d.end(d.length-1)-a.tech_.currentTime():0;var e=a.bufferLowWaterLine();(!c.endList||a.duration()<he.MAX_BUFFER_LOW_WATER_LINE||b.attributes.BANDWIDTH<c.attributes.BANDWIDTH||d>=e)&&a.masterPlaylistLoader_.media(b);a.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")});this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())});
this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},
120)});this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(b){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:b.mapping})});this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load();
this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var a=this.selectPlaylist();a!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(a),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var a=this,b=this.selectPlaylist();b!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(b),
this.mainSegmentLoader_.resetEverything(function(){J.browser.IE_VERSION||J.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0);this.hasPlayed_()&&this.load();var a=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<a.start(0))return this.seekTo_(a.end(a.length-1))}}},{key:"setupFirstPlay",value:function(){var a=
this,b=this.masterPlaylistLoader_.media();if(!b||this.tech_.paused()||this.hasPlayed_())return!1;if(!b.endList){var c=this.seekable();if(!c.length)return!1;if(J.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){a.trigger("firstplay");a.seekTo_(c.end(0));a.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay");this.seekTo_(c.end(0))}this.hasPlayed_=function(){return!0};this.load();return!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(Eh){return J.log.warn("Failed to create Source Buffers",
Eh),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var a=this.tech_.play();"undefined"!==typeof a&&"function"===typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var a=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_);if(a){this.logger_("calling mediaSource.endOfStream()");
try{this.mediaSource.endOfStream()}catch(Eh){J.log.warn("Failed to call media source endOfStream",Eh)}}}},{key:"stuckAtPlaylistEnd_",value:function(a){if(!this.seekable().length)return!1;var b=this.syncController_.getExpiredTime(a,this.mediaSource.duration);if(null===b)return!1;a=eh.Playlist.playlistEnd(a,b);b=this.tech_.currentTime();var c=this.tech_.buffered();if(!c.length)return a-b<=Hh;c=c.end(c.length-1);return c-b<=Hh&&a-c<=Hh}},{key:"blacklistCurrentPlaylist",value:function(){var a=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{},b=arguments[1],c=void 0;c=void 0;c=a.playlist||this.masterPlaylistLoader_.media();b=b||a.blacklistDuration||this.blacklistDuration;if(!c){this.error=a;try{return this.mediaSource.endOfStream("network")}catch(oj){return this.trigger("error")}}var d=1===this.masterPlaylistLoader_.master.playlists.filter(wj).length,e=this.masterPlaylistLoader_.master.playlists;if(1===e.length)return J.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),
this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(d);d&&(J.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),e.forEach(function(a){Infinity!==a.excludeUntil&&delete a.excludeUntil}),this.tech_.trigger("retryplaylist"));c.excludeUntil=Date.now()+1E3*b;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});c=this.selectPlaylist();J.log.warn("Problem encountered with the current HLS playlist."+
(a.message?" "+a.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(c,d)}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(a){var b=Pk(this.tech_.buffered(),a);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;
if(b&&b.length)return a;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());this.load()}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:eh.Playlist.duration(this.masterPlaylistLoader_.media()):
0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var a=void 0;if(this.masterPlaylistLoader_){var b=this.masterPlaylistLoader_.media();if(b){var c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null!==c){var d=eh.Playlist.seekable(b,c);if(0!==d.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){b=this.mediaTypes_.AUDIO.activePlaylistLoader.media();c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null===
c)return;a=eh.Playlist.seekable(b,c);if(0===a.length)return}c=b=void 0;this.seekable_&&this.seekable_.length&&(b=this.seekable_.end(0),c=this.seekable_.start(0));a?a.start(0)>d.end(0)||d.start(0)>a.end(0)?this.seekable_=d:this.seekable_=J.createTimeRanges([[a.start(0)>d.start(0)?a.start(0):d.start(0),a.end(0)<d.end(0)?a.end(0):d.end(0)]]):this.seekable_=d;this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===b&&this.seekable_.start(0)===c||(this.logger_("seekable updated ["+Xj(this.seekable_)+
"]"),this.tech_.trigger("seekablechanged"))}}}}}},{key:"updateDuration",value:function(){var a=this,b=this.mediaSource.duration,c=eh.Playlist.duration(this.masterPlaylistLoader_.media()),d=this.tech_.buffered(),e=function yl(){a.logger_("Setting duration from "+a.mediaSource.duration+" => "+c);try{a.mediaSource.duration=c}catch(tk){J.log.warn("Failed to set media source duration",tk)}a.tech_.trigger("durationchange");a.mediaSource.removeEventListener("sourceopen",yl)};0<d.length&&(c=Math.max(c,d.end(d.length-
1)));b!==c&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",e):e())}},{key:"dispose",value:function(){var a=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(b){b=a.mediaTypes_[b].groups;for(var c in b)b[c].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},
{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var a=this.masterPlaylistLoader_.media(),b;if(a&&"open"===this.mediaSource.readyState){var c=this.masterPlaylistLoader_.master;var d=a.segments&&a.segments.length&&a.segments[0].map?"mp4":"mp2t";var e=a.attributes||{};var f=e.CODECS?Pi(e.CODECS):Vk;var g=a.attributes||{};e=!0;var n=!1;if(a){if(c.mediaGroups.AUDIO&&g.AUDIO){var h=c.mediaGroups.AUDIO[g.AUDIO];if(h){n=
!0;e=!1;for(var k in h)if(!h[k].uri&&!h[k].playlists){e=!0;break}}}n&&!f.audioProfile&&(e||(f.audioProfile=im(c,g.AUDIO)),f.audioProfile||(J.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),f.audioProfile=Vk.audioProfile));var w;f.videoCodec&&(b=""+f.videoCodec+f.videoObjectTypeIndicator);f.audioProfile&&(w="mp4a.40."+f.audioProfile);c=ak("audio",d,[w]);k=ak("video",d,[b]);d=ak("video",d,[b,w]);b=n?!e&&b?[k,c]:
e||b?[d,c]:[c,c]:b?[d]:[c]}else b=[];if(1>b.length)return this.error="No compatible SourceBuffer configuration for the variant stream:"+a.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(b);this.excludeIncompatibleVariants_(a)}}},{key:"configureLoaderMimeTypes_",value:function(a){var b=1<a.length&&-1===a[0].indexOf(",")&&a[0]!==a[1]?new J.EventTarget:null;this.mainSegmentLoader_.mimeType(a[0],b);a[1]&&this.audioSegmentLoader_.mimeType(a[1],b)}},{key:"excludeUnsupportedVariants_",
value:function(){this.master().playlists.forEach(function(a){a.attributes.CODECS&&h.MediaSource&&h.MediaSource.isTypeSupported&&!h.MediaSource.isTypeSupported('video/mp4; codecs="'+hm(a.attributes.CODECS)+'"')&&(a.excludeUntil=Infinity)})}},{key:"excludeIncompatibleVariants_",value:function(a){var b=2,c=null,d=void 0;a.attributes.CODECS&&(d=Pi(a.attributes.CODECS),c=d.videoCodec,b=d.codecCount);this.master().playlists.forEach(function(a){var d={codecCount:2,videoCodec:null};a.attributes.CODECS&&(d=
Pi(a.attributes.CODECS));d.codecCount!==b&&(a.excludeUntil=Infinity);d.videoCodec!==c&&(a.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function(a){var b=0,c=this.seekable();c.length&&(b=c.start(0));Em(a,this.cueTagsTrack_,b)}},{key:"goalBufferLength",value:function(){var a=this.tech_.currentTime(),b=he.GOAL_BUFFER_LENGTH;return Math.min(b+a*he.GOAL_BUFFER_LENGTH_RATE,Math.max(b,he.MAX_GOAL_BUFFER_LENGTH))}},{key:"bufferLowWaterLine",value:function(){var a=this.tech_.currentTime(),b=he.BUFFER_LOW_WATER_LINE;
return Math.min(b+a*he.BUFFER_LOW_WATER_LINE_RATE,Math.max(b,he.MAX_BUFFER_LOW_WATER_LINE))}}]);return b}(J.EventTarget),Rm=function(a,b,c){return function(d){var e=a.master.playlists[b],f=Uj(e),g=wj(e);if("undefined"===typeof d)return g;d?delete e.disabled:e.disabled=!0;d===g||f||(c(),d?a.trigger("renditionenabled"):a.trigger("renditiondisabled"));return d}},Sm=function Fh(a,b,c){Ge(this,Fh);var d=a.masterPlaylistController_;d=d[(a.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(d);
if(b.attributes.RESOLUTION){var e=b.attributes.RESOLUTION;this.width=e.width;this.height=e.height}this.bandwidth=b.attributes.BANDWIDTH;this.id=c;this.enabled=Rm(a.playlists,b.uri,d)},Tm=function(a){var b=a.playlists;a.representations=function(){return b.master.playlists.filter(function(a){return!Uj(a)}).map(function(b,c){return new Sm(a,b,b.uri)})}},il=["seeking","seeked","pause","playing","error"],Um=function(){function a(b){var c=this;Ge(this,a);this.tech_=b.tech;this.seekable=b.seekable;this.seekTo=
b.seekTo;this.allowSeeksWithinUnsafeLiveWindow=b.allowSeeksWithinUnsafeLiveWindow;this.media=b.media;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=null;this.logger_=Ri("PlaybackWatcher");this.logger_("initialize");var d=function(){return c.monitorCurrentTime_()},e=function(){return c.techWaiting_()},f=function(){return c.cancelTimer_()},g=function(){return c.fixesBadSeeks_()};this.tech_.on("seekablechanged",g);this.tech_.on("waiting",e);this.tech_.on(il,
f);this.tech_.on("canplay",d);this.dispose=function(){c.logger_("dispose");c.tech_.off("seekablechanged",g);c.tech_.off("waiting",e);c.tech_.off(il,f);c.tech_.off("canplay",d);c.checkCurrentTimeTimeout_&&h.clearTimeout(c.checkCurrentTimeTimeout_);c.cancelTimer_()}}gf(a,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&h.clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=h.setTimeout(this.monitorCurrentTime_.bind(this),250)}},
{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime();else if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),b=this.tech_.buffered();if(this.lastRecordedTime===a&&(!b.length||a+Hh>=b.end(b.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:
(this.consecutiveUpdates=0,this.lastRecordedTime=a)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0;this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var a=this.seekable(),b=this.tech_.currentTime(),c=void 0;this.afterSeekableWindow_(a,b,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(c=a.end(a.length-1));this.beforeSeekableWindow_(a,b)&&(c=a.start(0)+Hh);return"undefined"!==
typeof c?(this.logger_("Trying to seek outside of seekable at time "+b+" with "+("seekable range "+Xj(a)+". Seeking to ")+(c+".")),this.seekTo(c),!0):!1}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),b=this.tech_.buffered();b=Pk(b,a);b.length&&a+3<=b.end(0)&&(this.cancelTimer_(),this.seekTo(a),this.logger_("Stopped at "+a+" while inside a buffered region "+("["+b.start(0)+" -> "+b.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),
this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}))}}},{key:"techWaiting_",value:function(){var a=this.seekable(),b=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,b))return a=a.end(a.length-1),this.logger_("Fell out of live window at time "+b+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.seekTo(a),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),
!0;var c=this.tech_.buffered();a=Qk(c,b);return this.videoUnderflow_(a,c,b)?(this.cancelTimer_(),this.seekTo(b),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):0<a.length?(c=a.start(0)-b,this.logger_("Stopped at "+b+", setting timer for "+c+", seeking "+("to "+a.start(0))),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*c,b),!0):!1}},{key:"afterSeekableWindow_",value:function(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!a.length)return!1;var e=
a.end(a.length-1)+Hh;!c.endList&&d&&(e=a.end(a.length-1)+3*c.targetDuration);return b>e?!0:!1}},{key:"beforeSeekableWindow_",value:function(a,b){return a.length&&0<a.start(0)&&b<a.start(0)-Hh?!0:!1}},{key:"videoUnderflow_",value:function(a,b,c){return 0===a.length&&(a=this.gapFromVideoUnderflow_(b,c))?(this.logger_("Encountered a gap in video from "+a.start+" to "+a.end+". "+("Seeking to current time "+c)),!0):!1}},{key:"skipTheGap_",value:function(a){var b=this.tech_.buffered(),c=this.tech_.currentTime();
b=Qk(b,c);this.cancelTimer_();0!==b.length&&c===a&&(this.logger_("skipTheGap_:","currentTime:",c,"scheduled currentTime:",a,"nextRange start:",b.start(0)),this.seekTo(b.start(0)+pi),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(a,b){if(2>a.length)a=J.createTimeRanges();else{for(var c=[],d=1;d<a.length;d++){var e=a.end(d-1),f=a.start(d);c.push([e,f])}a=J.createTimeRanges(c)}for(c=0;c<a.length;c++)if(d=a.start(c),e=a.end(c),4>b-d&&2<b-d)return{start:d,
end:e};return null}}]);return a}(),Vm={errorInterval:30,getSource:function(a){var b=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_;return a(b)}},Wm=function Fh(a,b){var c=0,d=0,e=J.mergeOptions(Vm,b);a.ready(function(){a.trigger({type:"usage",name:"hls-error-reload-initialized"})});var f=function(){d&&a.currentTime(d)},g=function(b){null!==b&&void 0!==b&&(d=Infinity!==a.duration()&&a.currentTime()||0,a.one("loadedmetadata",f),a.src(b),a.trigger({type:"usage",name:"hls-error-reload"}),a.play())},
n=function(){if(Date.now()-c<1E3*e.errorInterval)a.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(e.getSource&&"function"===typeof e.getSource)return c=Date.now(),e.getSource.call(a,g);J.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},h=function Al(){a.off("loadedmetadata",f);a.off("error",n);a.off("dispose",Al)};a.on("error",n);a.on("dispose",h);a.reloadSourceOnError=function(b){h();Fh(a,b)}},jl=function(a){Wm(this,a)};J.use("*",function(a){return{setSource:function(a,
b){b(null,a)},setCurrentTime:function(b){a.vhs&&a.currentSource().src===a.vhs.source_.src&&a.vhs.setCurrentTime(b);return b},play:function(){a.vhs&&a.currentSource().src===a.vhs.source_.src&&a.vhs.setCurrentTime(a.tech_.currentTime())}}});var Fd={PlaylistLoader:vj,Playlist:Ed,Decrypter:Kl,AsyncStream:yk,decrypt:zk,utils:Wl,STANDARD_PLAYLIST_SELECTOR:function(){return ym(this.playlists.master,this.systemBandwidth,parseInt(el(this.tech_.el(),"width"),10),parseInt(el(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},
INITIAL_PLAYLIST_SELECTOR:function(){var a=this.playlists.master.playlists.filter(Ed.isEnabled);Si(a,function(a,b){return gk(a,b)});return a.filter(function(a){return Pi(a.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:gk,comparePlaylistResolution:function(a,b){var c=void 0,d=void 0;a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(c=a.attributes.RESOLUTION.width);c=c||h.Number.MAX_VALUE;b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width&&(d=b.attributes.RESOLUTION.width);
d=d||h.Number.MAX_VALUE;return c===d&&a.attributes.BANDWIDTH&&b.attributes.BANDWIDTH?a.attributes.BANDWIDTH-b.attributes.BANDWIDTH:c-d},xhr:Lk()};"GOAL_BUFFER_LENGTH MAX_GOAL_BUFFER_LENGTH GOAL_BUFFER_LENGTH_RATE BUFFER_LOW_WATER_LINE MAX_BUFFER_LOW_WATER_LINE BUFFER_LOW_WATER_LINE_RATE BANDWIDTH_VARIANCE".split(" ").forEach(function(a){Object.defineProperty(Fd,a,{get:function(){J.log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");return he[a]},set:function(b){J.log.warn("using Hls."+
a+" is UNSAFE be sure you know what you are doing");"number"!==typeof b||0>b?J.log.warn("value of Hls."+a+" must be greater than or equal to 0"):he[a]=b}})});var kl=function(a){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(a)?"hls":/^application\/dash\+xml/i.test(a)?"dash":null},ll=function(a,b){b=b.media();for(var c=-1,d=0;d<a.length;d++)if(a[d].id===b.uri){c=d;break}a.selectedIndex_=c;a.trigger({selectedIndex:c,type:"change"})},Xm=function(a,b){b.representations().forEach(function(b){a.addQualityLevel(b)});
ll(a,b.playlists)};Fd.canPlaySource=function(){return J.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ml=function(){if(!window.localStorage)return null;var a=window.localStorage.getItem("videojs-vhs");if(!a)return null;try{return JSON.parse(a)}catch(Eh){return null}};Fd.supportsNativeHls=function(){var a=f.createElement("video");return J.getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(b){return/maybe|probably/i.test(a.canPlayType(b))}):
!1}();var Ym=J.getTech("Html5").isSupported()?/maybe|probably/i.test(f.createElement("video").canPlayType("application/dash+xml")):!1;Fd.supportsNativeDash=Ym;Fd.supportsTypeNatively=function(a){return"hls"===a?Fd.supportsNativeHls:"dash"===a?Fd.supportsNativeDash:!1};Fd.isSupported=function(){return J.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var nl=function(a){function b(a,c,d){Ge(this,b);var e=Sf(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,
c,d.hls));c.options_&&c.options_.playerId&&(d=J(c.options_.playerId),d.hasOwnProperty("hls")||Object.defineProperty(d,"hls",{get:function(){J.log.warn("player.hls is deprecated. Use player.tech().hls instead.");c.trigger({type:"usage",name:"hls-player-access"});return e},configurable:!0}),d.vhs=e,d.dash=e,e.player_=d);e.tech_=c;e.source_=a;e.stats={};e.setOptions_();if(e.options_.overrideNative&&c.overrideNativeAudioTracks&&c.overrideNativeVideoTracks)c.overrideNativeAudioTracks(!0),c.overrideNativeVideoTracks(!0);
else if(e.options_.overrideNative&&(c.featuresNativeVideoTracks||c.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");e.on(f,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(a){(a=f.fullscreenElement||f.webkitFullscreenElement||f.mozFullScreenElement||f.msFullscreenElement)&&a.contains(e.tech_.el())&&e.masterPlaylistController_.smoothQualityChange_()});e.on(e.tech_,"seeking",function(){0===
this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)});e.on(e.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()});e.on(e.tech_,"play",e.play);return e}Cg(b,a);gf(b,[{key:"setOptions_",value:function(){var a=this;this.options_.withCredentials=this.options_.withCredentials||!1;this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1;this.options_.limitRenditionByPlayerDimensions=!1===this.options_.limitRenditionByPlayerDimensions?
!1:!0;this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1;this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||[];this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1;"number"!==typeof this.options_.blacklistDuration&&
(this.options_.blacklistDuration=300);if("number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var b=ml();b&&b.bandwidth&&(this.options_.bandwidth=b.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"}));b&&b.throughput&&(this.options_.throughput=b.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=he.INITIAL_BANDWIDTH);this.options_.enableLowInitialPlaylist=
this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===he.INITIAL_BANDWIDTH;"withCredentials limitRenditionByPlayerDimensions bandwidth smoothQualityChange customTagParsers customTagMappers handleManifestRedirects cacheEncryptionKeys".split(" ").forEach(function(b){"undefined"!==typeof a.source_[b]&&(a.options_[b]=a.source_[b])});this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(a,b){var c=this;a&&(this.setOptions_(),this.options_.url=
this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Fd,this.options_.sourceType=kl(b),this.options_.seekTo=function(a){c.tech_.setCurrentTime(a);c.setCurrentTime(a)},this.masterPlaylistController_=new Qm(this.options_),this.playbackWatcher_=new Um(J.mergeOptions(this.options_,{seekable:function(){return c.seekable()},media:function(){return c.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",function(){J.players[c.tech_.options_.playerId].error(c.masterPlaylistController_.error)}),
this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Fd.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Fd.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(a){this.masterPlaylistController_.selectPlaylist=
a.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=a;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=a;this.masterPlaylistController_.mainSegmentLoader_.throughput=
{rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){J.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return c.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return c.masterPlaylistController_.mediaRequests_()||
0},enumerable:!0},mediaRequestsAborted:{get:function(){return c.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return c.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return c.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return c.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return c.masterPlaylistController_.mediaBytesTransferred_()||
0},enumerable:!0},mediaSecondsLoaded:{get:function(){return c.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Rk(c.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return c.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return c.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return c.tech_.name_},enumerable:!0},duration:{get:function(){return c.tech_.duration()},enumerable:!0},master:{get:function(){return c.playlists.master},
enumerable:!0},playerDimensions:{get:function(){return c.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Rk(c.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return c.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){if(c.options_.useBandwidthFromLocalStorage){var a=
{bandwidth:c.bandwidth,throughput:Math.round(c.throughput)};if(window.localStorage){var b=ml();b=b?J.mergeOptions(b,a):a;try{window.localStorage.setItem("videojs-vhs",JSON.stringify(b))}catch(tk){}}}}),this.masterPlaylistController_.on("selectedinitialmedia",function(){Tm(c);if("dash"===c.options_.sourceType){var a=J.players[c.tech_.options_.playerId];if(a.eme){var b=c.source_.keySystems;var d=c.playlists.media(),e=c.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media();if(b){var f=
{},g;for(g in b)f[g]={audioContentType:'audio/mp4; codecs="'+e.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+d.attributes.CODECS+'"'},d.contentProtection&&d.contentProtection[g]&&d.contentProtection[g].pssh&&(f[g].pssh=d.contentProtection[g].pssh),"string"===typeof b[g]&&(f[g].url=b[g]);b=J.mergeOptions(b,f)}b&&(a.currentSource().keySystems=b,a.eme.initializeMediaKeys&&a.eme.initializeMediaKeys())}}}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),
this.tech_.ready(function(){return c.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(J.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var a=this,b=J.players[this.tech_.options_.playerId];b&&b.qualityLevels&&(this.qualityLevels_=b.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){Xm(a.qualityLevels_,a)}),this.playlists.on("mediachange",function(){ll(a.qualityLevels_,a.playlists)}))}},{key:"play",
value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(a){this.masterPlaylistController_.setCurrentTime(a)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.masterPlaylistController_&&this.masterPlaylistController_.dispose();this.qualityLevels_&&this.qualityLevels_.dispose();
this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls);this.tech_&&this.tech_.hls&&delete this.tech_.hls;Ll(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(a,b){return am({playlist:this.masterPlaylistController_.media(),time:a,callback:b})}},{key:"seekToProgramTime",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,d=3<arguments.length&&void 0!==arguments[3]?
arguments[3]:2;return bm({programTime:a,playlist:this.masterPlaylistController_.media(),retryCount:d,pauseAfterSeek:c,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:b})}}]);return b}(J.getComponent("Component")),ik={name:"videojs-http-streaming",VERSION:"1.10.3",canHandleSource:function(a){var b=J.mergeOptions(J.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return ik.canPlayType(a.type,b)},handleSource:function(a,b){var c=J.mergeOptions(J.options,2<arguments.length&&
void 0!==arguments[2]?arguments[2]:{});b.hls=new nl(a,b,c);b.hls.xhr=Lk();b.hls.src(a.src,a.type);return b.hls},canPlayType:function(a){var b=J.mergeOptions(J.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).hls.overrideNative,c=kl(a);return!c||Fd.supportsTypeNatively(c)&&!b?"":"maybe"}};if("undefined"===typeof J.MediaSource||"undefined"===typeof J.URL)J.MediaSource=Qi,J.URL=Zk;Qi.supportsNativeMediaSources()&&J.getTech("Html5").registerSourceHandler(ik,0);J.HlsHandler=nl;J.HlsSourceHandler=
ik;J.Hls=Fd;J.use||J.registerComponent("Hls",Fd);J.options.hls=J.options.hls||{};J.registerPlugin?J.registerPlugin("reloadSourceOnError",jl):J.plugin("reloadSourceOnError",jl);return J});!function(){var h=window&&window.videojs;h&&(h.CDN_VERSION="7.6.0");!0}();(function(h,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f(require("video.js")):"function"===typeof define&&define.amd?define(["videojs"],function(b){return h.Youtube=f(b)}):h.Youtube=f(h.videojs)})(this,function(h){function f(){YT.ready(function(){c.isApiReady=!0;for(var a=0;a<c.apiReadyQueue.length;++a)c.apiReadyQueue[a].initYTPlayer()})}function b(a,b){var c=!1,d=document.createElement("script"),e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,
e);d.onload=function(){c||(c=!0,b())};d.onreadystatechange=function(){c||"complete"!==this.readyState&&"loaded"!==this.readyState||(c=!0,b())};d.src=a}function e(){var a=document.head||document.getElementsByTagName("head")[0],b=document.createElement("style");b.type="text/css";b.styleSheet?b.styleSheet.cssText=".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }":
b.appendChild(document.createTextNode(".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }"));a.appendChild(b)}var d=h.browser.IS_IOS||h.browser.IS_NATIVE_ANDROID,k=h.getTech("Tech"),c=h.extend(k,{constructor:function(a,b){k.call(this,a,b);this.setPoster(a.poster);this.setSrc(this.options_.source,!0);this.setTimeout(function(){this.el_&&
(this.el_.parentNode.className+=" vjs-youtube",d&&(this.el_.parentNode.className+=" vjs-youtube-mobile"),c.isApiReady?this.initYTPlayer():c.apiReadyQueue.push(this))}.bind(this))},dispose:function(){if(this.ytPlayer)this.ytPlayer.stopVideo&&this.ytPlayer.stopVideo(),this.ytPlayer.destroy&&this.ytPlayer.destroy();else{var a=c.apiReadyQueue.indexOf(this);-1!==a&&c.apiReadyQueue.splice(a,1)}this.ytPlayer=null;this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-youtube","").replace(" vjs-youtube-mobile",
"");this.el_.parentNode.removeChild(this.el_);k.prototype.dispose.call(this)},createEl:function(){var a=document.createElement("div");a.setAttribute("id",this.options_.techId);a.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute");a.setAttribute("class","vjs-tech");var b=document.createElement("div");b.appendChild(a);d||this.options_.ytControls||(a=document.createElement("div"),a.setAttribute("class","vjs-iframe-blocker"),a.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),
a.onclick=function(){this.pause()}.bind(this),b.appendChild(a));return b},initYTPlayer:function(){var a={controls:0,modestbranding:1,rel:0,showinfo:0,loop:this.options_.loop?1:0};"undefined"!==typeof this.options_.autohide&&(a.autohide=this.options_.autohide);"undefined"!==typeof this.options_.cc_load_policy&&(a.cc_load_policy=this.options_.cc_load_policy);"undefined"!==typeof this.options_.ytControls&&(a.controls=this.options_.ytControls);"undefined"!==typeof this.options_.disablekb&&(a.disablekb=
this.options_.disablekb);"undefined"!==typeof this.options_.end&&(a.end=this.options_.end);"undefined"!==typeof this.options_.color&&(a.color=this.options_.color);a.controls?"undefined"!==typeof this.options_.fs&&(a.fs=this.options_.fs):a.fs=0;"undefined"!==typeof this.options_.end&&(a.end=this.options_.end);"undefined"!==typeof this.options_.hl?a.hl=this.options_.hl:"undefined"!==typeof this.options_.language&&(a.hl=this.options_.language.substr(0,2));"undefined"!==typeof this.options_.iv_load_policy&&
(a.iv_load_policy=this.options_.iv_load_policy);"undefined"!==typeof this.options_.list?a.list=this.options_.list:this.url&&"undefined"!==typeof this.url.listId&&(a.list=this.url.listId);"undefined"!==typeof this.options_.listType&&(a.listType=this.options_.listType);"undefined"!==typeof this.options_.modestbranding&&(a.modestbranding=this.options_.modestbranding);"undefined"!==typeof this.options_.playlist&&(a.playlist=this.options_.playlist);"undefined"!==typeof this.options_.playsinline&&(a.playsinline=
this.options_.playsinline);"undefined"!==typeof this.options_.rel&&(a.rel=this.options_.rel);"undefined"!==typeof this.options_.showinfo&&(a.showinfo=this.options_.showinfo);"undefined"!==typeof this.options_.start&&(a.start=this.options_.start);"undefined"!==typeof this.options_.theme&&(a.theme=this.options_.theme);if("undefined"!==typeof this.options_.customVars){var b=this.options_.customVars;Object.keys(b).forEach(function(c){a[c]=b[c]})}this.activeVideoId=this.url?this.url.videoId:null;this.activeList=
a.list;var c={videoId:this.activeVideoId,playerVars:a,events:{onReady:this.onPlayerReady.bind(this),onPlaybackQualityChange:this.onPlayerPlaybackQualityChange.bind(this),onPlaybackRateChange:this.onPlayerPlaybackRateChange.bind(this),onStateChange:this.onPlayerStateChange.bind(this),onVolumeChange:this.onPlayerVolumeChange.bind(this),onError:this.onPlayerError.bind(this)}};"undefined"!==typeof this.options_.enablePrivacyEnhancedMode&&this.options_.enablePrivacyEnhancedMode&&(c.host="https://www.youtube-nocookie.com");
this.ytPlayer=new YT.Player(this.options_.techId,c)},onPlayerReady:function(){this.options_.muted&&this.ytPlayer.mute();1<this.ytPlayer.getAvailablePlaybackRates().length&&(this.featuresPlaybackRate=!0);this.playerReady_=!0;this.triggerReady();this.playOnReady?this.play():this.cueOnReady&&(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)},onPlayerPlaybackQualityChange:function(){},onPlayerPlaybackRateChange:function(){this.trigger("ratechange")},onPlayerStateChange:function(a){a=
a.data;if(a!==this.lastState&&!this.errorNumber)switch(this.lastState=a,a){case -1:this.trigger("loadstart");this.trigger("loadedmetadata");this.trigger("durationchange");this.trigger("ratechange");break;case YT.PlayerState.ENDED:this.trigger("ended");break;case YT.PlayerState.PLAYING:this.trigger("timeupdate");this.trigger("durationchange");this.trigger("playing");this.trigger("play");if(this.isSeeking)this.onSeeked();break;case YT.PlayerState.PAUSED:this.trigger("canplay");if(this.isSeeking)this.onSeeked();
else this.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate"),this.player_.trigger("waiting")}},onPlayerVolumeChange:function(){this.trigger("volumechange")},onPlayerError:function(a){this.errorNumber=a.data;this.trigger("pause");this.trigger("error")},error:function(){var a=1E3+this.errorNumber;switch(this.errorNumber){case 5:return{code:a,message:"Error while trying to play the video"};case 2:case 100:return{code:a,message:"Unable to find the video"};case 101:case 150:return{code:a,
message:"Playback on other Websites has been disabled by the video owner."}}return{code:a,message:"YouTube unknown error ("+this.errorNumber+")"}},loadVideoById_:function(a){a={videoId:a};this.options_.start&&(a.startSeconds=this.options_.start);this.options_.end&&(a.endEnd=this.options_.end);this.ytPlayer.loadVideoById(a)},cueVideoById_:function(a){a={videoId:a};this.options_.start&&(a.startSeconds=this.options_.start);this.options_.end&&(a.endEnd=this.options_.end);this.ytPlayer.cueVideoById(a)},
src:function(a){a&&this.setSrc({src:a});return this.source},poster:function(){return d?null:this.poster_},setPoster:function(a){this.poster_=a},setSrc:function(a){a&&a.src&&(delete this.errorNumber,this.source=a,this.url=c.parseUrl(a.src),!this.options_.poster&&this.url.videoId&&(this.poster_="https://img.youtube.com/vi/"+this.url.videoId+"/0.jpg",this.trigger("posterchange"),this.checkHighResPoster()),this.options_.autoplay&&!d?this.isReady_?this.play():this.playOnReady=!0:this.activeVideoId!==this.url.videoId&&
(this.isReady_?(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId):this.cueOnReady=!0))},autoplay:function(){return this.options_.autoplay},setAutoplay:function(a){this.options_.autoplay=a},loop:function(){return this.options_.loop},setLoop:function(a){this.options_.loop=a},play:function(){this.url&&this.url.videoId&&(this.wasPausedBeforeSeek=!1,this.isReady_?(this.url.listId&&(this.activeList===this.url.listId?this.ytPlayer.playVideo():(this.ytPlayer.loadPlaylist(this.url.listId),
this.activeList=this.url.listId)),this.activeVideoId===this.url.videoId?this.ytPlayer.playVideo():(this.loadVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)):(this.trigger("waiting"),this.playOnReady=!0))},pause:function(){this.ytPlayer&&this.ytPlayer.pauseVideo()},paused:function(){return this.ytPlayer?this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING:!0},currentTime:function(){return this.ytPlayer?this.ytPlayer.getCurrentTime():0},setCurrentTime:function(a){this.lastState===
YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime());this.isSeeking||(this.wasPausedBeforeSeek=this.paused());this.ytPlayer.seekTo(a,!0);this.trigger("timeupdate");this.trigger("seeking");this.isSeeking=!0;this.lastState===YT.PlayerState.PAUSED&&this.timeBeforeSeek!==a&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval(function(){this.lastState===YT.PlayerState.PAUSED&&this.isSeeking?this.currentTime()!==this.timeBeforeSeek&&(this.trigger("timeupdate"),
this.onSeeked()):clearInterval(this.checkSeekedInPauseInterval)}.bind(this),250))},seeking:function(){return this.isSeeking},seekable:function(){return this.ytPlayer?h.createTimeRange(0,this.ytPlayer.getDuration()):h.createTimeRange()},onSeeked:function(){clearInterval(this.checkSeekedInPauseInterval);this.isSeeking=!1;this.wasPausedBeforeSeek&&this.pause();this.trigger("seeked")},playbackRate:function(){return this.ytPlayer?this.ytPlayer.getPlaybackRate():1},setPlaybackRate:function(a){this.ytPlayer&&
this.ytPlayer.setPlaybackRate(a)},duration:function(){return this.ytPlayer?this.ytPlayer.getDuration():0},currentSrc:function(){return this.source&&this.source.src},ended:function(){return this.ytPlayer?this.lastState===YT.PlayerState.ENDED:!1},volume:function(){return this.ytPlayer?this.ytPlayer.getVolume()/100:1},setVolume:function(a){this.ytPlayer&&this.ytPlayer.setVolume(100*a)},muted:function(){return this.ytPlayer?this.ytPlayer.isMuted():!1},setMuted:function(a){this.ytPlayer&&(this.muted(!0),
a?this.ytPlayer.mute():this.ytPlayer.unMute(),this.setTimeout(function(){this.trigger("volumechange")},50))},buffered:function(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction)return h.createTimeRange();var a=this.ytPlayer.getVideoLoadedFraction()*this.ytPlayer.getDuration();return h.createTimeRange(0,a)},preload:function(){},load:function(){},reset:function(){},networkState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case -1:return 0;case 3:return 2;default:return 1}},
readyState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case -1:return 0;case 5:return 1;case 3:return 2;default:return 4}},supportsFullScreen:function(){return!0},checkHighResPoster:function(){var a="https://img.youtube.com/vi/"+this.url.videoId+"/maxresdefault.jpg";try{var b=new Image;b.onload=function(){if("naturalHeight"in b){if(90>=b.naturalHeight||120>=b.naturalWidth)return}else if(90>=b.height||120>=b.width)return;this.poster_=a;this.trigger("posterchange")}.bind(this);
b.onerror=function(){};b.src=a}catch(u){}}});c.isSupported=function(){return!0};c.canPlaySource=function(a){return c.canPlayType(a.type)};c.canPlayType=function(a){return"video/youtube"===a};c.parseUrl=function(a){var b={videoId:null},c=a.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&\?]*).*/);c&&11===c[2].length&&(b.videoId=c[2]);(c=a.match(/[?&]list=([^#&\?]+)/))&&c[1]&&(b.listId=c[1]);return b};c.apiReadyQueue=[];"undefined"!==typeof document&&(b("https://www.youtube.com/iframe_api",
f),e());"undefined"!==typeof h.registerTech?h.registerTech("Youtube",c):h.registerComponent("Youtube",c)});/*
 2018 Brightcove, Inc
 @license Apache-2.0
*/
(function(h){"object"===typeof exports&&"undefined"!==typeof module?module.exports=h():"function"===typeof define&&define.amd?define([],h):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).videojsContribHls=h()})(function(){return function d(f,b,e){function k(a,u){if(!b[a]){if(!f[a]){var l="function"==typeof require&&require;if(!u&&l)return l(a,!0);if(c)return c(a,!0);u=Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u;
}u=b[a]={exports:{}};f[a][0].call(u.exports,function(b){var c=f[a][1][b];return k(c?c:b)},u,u.exports,d,f,b,e)}return b[a].exports}for(var c="function"==typeof require&&require,a=0;a<e.length;a++)k(e[a]);return k}({1:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});var d=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var k=a[Symbol.iterator](),l;!(d=(l=k.next()).done)&&(c.push(l.value),!b||c.length!==
b);d=!0);}catch(x){e=!0,f=x}finally{try{if(!d&&k["return"])k["return"]()}finally{if(e)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),k=(f=f("global/window"))&&f.__esModule?f:{"default":f},c=function(a,b){a=a.cues;for(var c=0;c<a.length;c++){var d=a[c];if(b>=d.adStartTime&&b<=d.adEndTime)return d}return null};e["default"]={updateAdCues:function(a,b){if(a.segments)for(var e=2>=arguments.length||void 0===arguments[2]?0:arguments[2],f=void 0,l=0;l<
a.segments.length;l++){var y=a.segments[l];f||(f=c(b,e+y.duration/2));if(f){if("cueIn"in y){f.endTime=e;f.adEndTime=e;e+=y.duration;f=null;continue}if(e<f.endTime){e+=y.duration;continue}f.endTime+=y.duration}else if("cueOut"in y&&(f=new k["default"].VTTCue(e,e+y.duration,y.cueOut),f.adStartTime=e,f.adEndTime=e+parseFloat(y.cueOut),b.addCue(f)),"cueOutCont"in y){var z=y.cueOutCont.split("/").map(parseFloat);f=d(z,2);z=f[0];var p=f[1];f=new k["default"].VTTCue(e,e+y.duration,"");f.adStartTime=e-z;
f.adEndTime=f.adStartTime+p;b.addCue(f)}e+=y.duration}},findAdCue:c};b.exports=e["default"]},{"global/window":32}],2:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});var d=function(a,b){a=a.toString(16);return"00".substring(0,2-a.length)+a+(b%2?" ":"")},k=function(a){return 32<=a&&126>a?String.fromCharCode(a):"."},c={hexDump:function(a){a=Array.prototype.slice.call(a);for(var b="",c,e,f=0;f<a.length/16;f++)c=a.slice(16*f,16*f+16).map(d).join(""),e=a.slice(16*f,16*f+16).map(k).join(""),
b+=c+" "+e+"\n";return b},tagDump:function(a){return c.hexDump(a.bytes)},textRanges:function(a){var b="",c;for(c=0;c<a.length;c++){var d=a;var e=c;d=d.start(e)+"-"+d.end(e);b+=d+" "}return b},createTransferableMessage:function(a){var b={};Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d});return b},initSegmentId:function(a){var b=a.byterange||{length:Infinity,offset:0};return[b.length,b.offset,a.resolvedUri].join()}};
e["default"]=c;b.exports=e["default"]},{}],3:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});e["default"]={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1};b.exports=e["default"]},{}],4:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});var d=f("global/window"),k=d&&d.__esModule?d:{"default":d},c=f("aes-decrypter"),a=f("./bin-utils"),l=
function(b){b.onmessage=function(b){var d=b.data;b=new Uint8Array(d.encrypted.bytes,d.encrypted.byteOffset,d.encrypted.byteLength);var e=new Uint32Array(d.key.bytes,d.key.byteOffset,d.key.byteLength/4),f=new Uint32Array(d.iv.bytes,d.iv.byteOffset,d.iv.byteLength/4);new c.Decrypter(b,e,f,function(b,c){k["default"].postMessage((0,a.createTransferableMessage)({source:d.source,decrypted:c}),[c.buffer])})}};e["default"]=function(a){return new l(a)};b.exports=e["default"]},{"./bin-utils":2,"aes-decrypter":25,
"global/window":32}],5:[function(f,b,e){(function(b){function d(a){return a&&a.__esModule?a:{"default":a}}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function a(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},u=f("./playlist-loader"),q=d(u),
r=f("./playlist.js");u=f("./segment-loader");var y=d(u);u=f("./vtt-segment-loader");var z=d(u);u=f("./ranges");var p=d(u),x=d("undefined"!==typeof window?window.videojs:"undefined"!==typeof b?b.videojs:null);b=f("./ad-cue-tags");var t=d(b);b=f("./sync-controller");var B=d(b),C=f("videojs-contrib-media-sources/es5/codec-utils");b=f("webwackify");var F=d(b);b=f("./decrypter-worker");var H=d(b);b=f("./config");var G=d(b),E=f("./util/codecs.js"),K=f("./media-groups"),g=void 0,m={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",
audioProfile:"2"},A="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),M=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},L=function(){var a=void 0;try{a=f.resolve("./decrypter-worker")}catch(U){}return a},Q=function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a){return(0,C.translateLegacyCodecs)([a])[0]})};e.mapLegacyAvcCodecs_=Q;var ia=function(a,b,c){return a+"/"+b+'; codecs="'+
c.filter(function(a){return!!a}).join(", ")+'"'},V=function(a,b){var c=b.segments&&b.segments.length&&b.segments[0].map?"mp4":"mp2t";var d=b.attributes||{};var e=d.CODECS?(0,E.parseCodecs)(d.CODECS):m;var f=b.attributes||{};d=!0;var g=!1;if(!b)return[];if(a.mediaGroups.AUDIO&&f.AUDIO&&(a=a.mediaGroups.AUDIO[f.AUDIO])){g=!0;d=!1;for(var k in a)if(!a[k].uri){d=!0;break}}g&&!e.audioProfile&&(x["default"].log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),
e.audioProfile=m.audioProfile);var l,t;e.videoCodec&&(l=""+e.videoCodec+e.videoObjectTypeIndicator);e.audioProfile&&(t="mp4a.40."+e.audioProfile);k=ia("audio",c,[t]);a=ia("video",c,[l]);c=ia("video",c,[l,t]);return g?!d&&l?[a,k]:[c,k]:l?[c]:[k]};e.mimeTypesForPlaylist_=V;b=function(b){function d(a){var b=this;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");l(Object.getPrototypeOf(d.prototype),"constructor",this).call(this);var c=a.url,e=a.withCredentials,f=a.mode,
k=a.tech,m=a.bandwidth,t=a.externHls,p=a.useCueTags,r=a.blacklistDuration,u=a.enableLowInitialPlaylist;if(!c)throw Error("A non-empty playlist URL is required");g=t;this.withCredentials=e;this.tech_=k;this.hls_=k.hls;this.mode_=f;this.useCueTags_=p;this.blacklistDuration=r;this.enableLowInitialPlaylist=u;this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType="");this.requestOptions_={withCredentials:this.withCredentials,
timeout:null};this.mediaTypes_=(0,K.createMediaTypes)();this.mediaSource=new x["default"].MediaSource({mode:f});this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this));this.seekable_=x["default"].createTimeRanges();this.hasPlayed_=function(){return!1};this.syncController_=new B["default"](a);this.segmentMetadataTrack_=k.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;this.decrypter_=(0,F["default"])(H["default"],L());e={hls:this.hls_,mediaSource:this.mediaSource,
currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function(){return b.seekable()},seeking:function(){return b.tech_.seeking()},duration:function(){return b.mediaSource.duration},hasPlayed:function(){return b.hasPlayed_()},goalBufferLength:function(){return b.goalBufferLength()},bandwidth:m,syncController:this.syncController_,decrypter:this.decrypter_};this.masterPlaylistLoader_=new q["default"](c,this.hls_,this.withCredentials);this.setupMasterPlaylistLoaderListeners_();this.mainSegmentLoader_=
new y["default"](x["default"].mergeOptions(e,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),a);this.audioSegmentLoader_=new y["default"](x["default"].mergeOptions(e,{loaderType:"audio"}),a);this.subtitleSegmentLoader_=new z["default"](x["default"].mergeOptions(e,{loaderType:"vtt"}),a);this.setupSegmentLoaderListeners_();A.forEach(function(a){b[a+"_"]=M.bind(b,a)});this.masterPlaylistLoader_.load()}c(d,b);a(d,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var a=
this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var b=a.masterPlaylistLoader_.media(),c=1500*a.masterPlaylistLoader_.targetDuration;(0,r.isLowestEnabledRendition)(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c;b.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load());(0,K.setupMediaGroups)({segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,
main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,mode:a.mode_,hls:a.hls_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)});a.triggerPresenceUsage_(a.master(),b);try{a.setupSourceBuffers_()}catch(Z){return x["default"].log.warn("Failed to create SourceBuffers",Z),a.mediaSource.endOfStream("decode")}a.setupFirstPlay();a.trigger("selectedinitialmedia")});this.masterPlaylistLoader_.on("loadedplaylist",
function(){var b=a.masterPlaylistLoader_.media();b?(a.useCueTags_&&a.updateAdCues_(b),a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.updateDuration(),a.tech_.paused()||a.mainSegmentLoader_.load(),b.endList||function(){var b=function(){var b=a.seekable();0!==b.length&&a.mediaSource.addSeekableRange_(b.start(0),b.end(0))};Infinity!==a.duration()?function(){a.tech_.one("durationchange",function sa(){if(Infinity===a.duration())b();else a.tech_.one("durationchange",sa)})}():b()}()):(b=void 0,a.enableLowInitialPlaylist&&
(b=a.selectInitialPlaylist()),b||(b=a.selectPlaylist()),a.initialMedia_=b,a.masterPlaylistLoader_.media(a.initialMedia_))});this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort();a.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var b=a.masterPlaylistLoader_.media(),c=1500*a.masterPlaylistLoader_.targetDuration;(0,r.isLowestEnabledRendition)(a.masterPlaylistLoader_.master,
a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c;a.mainSegmentLoader_.playlist(b,a.requestOptions_);a.mainSegmentLoader_.load();a.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var b=a.masterPlaylistLoader_.media();a.stuckAtPlaylistEnd_(b)&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),a.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",
name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(a,b){a=a.mediaGroups||{};var c=!0,d=Object.keys(a.AUDIO),e;for(e in a.AUDIO)for(var f in a.AUDIO[e])a.AUDIO[e][f].uri||(c=!1);c&&this.tech_.trigger({type:"usage",name:"hls-demuxed"});Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"});g.Playlist.isAes(b)&&this.tech_.trigger({type:"usage",
name:"hls-aes"});g.Playlist.isFmp4(b)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"});d.length&&1<Object.keys(a.AUDIO[d[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var b=a.selectPlaylist(),c=a.masterPlaylistLoader_.media(),d=a.tech_.buffered();d=d.length?d.end(d.length-
1)-a.tech_.currentTime():0;var e=a.bufferLowWaterLine();(!c.endList||a.duration()<G["default"].MAX_BUFFER_LOW_WATER_LINE||b.attributes.BANDWIDTH<c.attributes.BANDWIDTH||d>=e)&&a.masterPlaylistLoader_.media(b);a.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")});this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});
this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)});this.mainSegmentLoader_.on("reseteverything",
function(){a.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(b){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:b.mapping})});this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();
this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"fastQualityChange_",value:function(){var a=this.selectPlaylist();a!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(a),this.mainSegmentLoader_.resetLoader())}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0);this.hasPlayed_()&&this.load();var a=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<
a.start(0))return this.tech_.setCurrentTime(a.end(a.length-1))}}},{key:"setupFirstPlay",value:function(){var a=this,b=this.masterPlaylistLoader_.media();if(!b||this.tech_.paused()||this.hasPlayed_())return!1;if(!b.endList&&(b=function(){var b=a.seekable();if(!b.length)return{v:!1};if(x["default"].browser.IE_VERSION&&"html5"===a.mode_&&0===a.tech_.readyState())return a.tech_.one("loadedmetadata",function(){a.trigger("firstplay");a.tech_.setCurrentTime(b.end(0));a.hasPlayed_=function(){return!0}}),
{v:!1};a.trigger("firstplay");a.tech_.setCurrentTime(b.end(0))}(),"object"===typeof b))return b.v;this.hasPlayed_=function(){return!0};this.load();return!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(da){return x["default"].log.warn("Failed to create Source Buffers",da),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var a=this.tech_.play();"undefined"!==typeof a&&"function"===typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")}},
{key:"onEndOfStream",value:function(){var a=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=a&&this.audioSegmentLoader_.ended_);a&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(a){if(!this.seekable().length)return!1;var b=this.syncController_.getExpiredTime(a,this.mediaSource.duration);if(null===b)return!1;a=g.Playlist.playlistEnd(a,b);b=this.tech_.currentTime();var c=this.tech_.buffered();if(!c.length)return a-b<=p["default"].SAFE_TIME_DELTA;
c=c.end(c.length-1);return c-b<=p["default"].SAFE_TIME_DELTA&&a-c<=p["default"].SAFE_TIME_DELTA}},{key:"blacklistCurrentPlaylist",value:function(a,b){void 0===a&&(a={});var c=a.playlist||this.masterPlaylistLoader_.media();b=b||a.blacklistDuration||this.blacklistDuration;if(!c){this.error=a;try{return this.mediaSource.endOfStream("network")}catch(sa){return this.trigger("error")}}var d=1===this.masterPlaylistLoader_.master.playlists.filter(r.isEnabled).length;if(d)return x["default"].log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),
this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(d);c.excludeUntil=Date.now()+1E3*b;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});b=this.selectPlaylist();x["default"].log.warn("Problem encountered with the current HLS playlist."+(a.message?" "+a.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(b)}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause();this.mediaTypes_.AUDIO.activePlaylistLoader&&
this.audioSegmentLoader_.pause();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(a){var b=p["default"].findRange(this.tech_.buffered(),a);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;if(b&&b.length&&"flash"!==this.mode_)return a;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&
(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());this.load()}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:g.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var a=void 0;
if(this.masterPlaylistLoader_){var b=this.masterPlaylistLoader_.media();if(b){var c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null!==c){var d=g.Playlist.seekable(b,c);if(0!==d.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){b=this.mediaTypes_.AUDIO.activePlaylistLoader.media();c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null===c)return;a=g.Playlist.seekable(b,c);if(0===a.length)return}a?a.start(0)>d.end(0)||d.start(0)>a.end(0)?this.seekable_=
d:this.seekable_=x["default"].createTimeRanges([[a.start(0)>d.start(0)?a.start(0):d.start(0),a.end(0)<d.end(0)?a.end(0):d.end(0)]]):this.seekable_=d;this.tech_.trigger("seekablechanged")}}}}}},{key:"updateDuration",value:function(){var a=this,b=this.mediaSource.duration,c=g.Playlist.duration(this.masterPlaylistLoader_.media()),d=this.tech_.buffered(),e=function ma(){a.mediaSource.duration=c;a.tech_.trigger("durationchange");a.mediaSource.removeEventListener("sourceopen",ma)};0<d.length&&(c=Math.max(c,
d.end(d.length-1)));b!==c&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",e):e())}},{key:"dispose",value:function(){var a=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(b){b=a.mediaTypes_[b].groups;for(var c in b)b[c].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",
value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var a=this.masterPlaylistLoader_.media();if(a&&"open"===this.mediaSource.readyState){var b=V(this.masterPlaylistLoader_.master,a);if(1>b.length)return this.error="No compatible SourceBuffer configuration for the variant stream:"+a.resolvedUri,this.mediaSource.endOfStream("decode");this.mainSegmentLoader_.mimeType(b[0]);
b[1]&&this.audioSegmentLoader_.mimeType(b[1]);this.excludeIncompatibleVariants_(a)}}},{key:"excludeIncompatibleVariants_",value:function(a){var b=this.masterPlaylistLoader_.master,c=2,d=null,e=void 0;a.attributes.CODECS&&(e=(0,E.parseCodecs)(a.attributes.CODECS),d=e.videoCodec,c=e.codecCount);b.playlists.forEach(function(a){var b={codecCount:2,videoCodec:null};if(a.attributes.CODECS){var e=a.attributes.CODECS;b=(0,E.parseCodecs)(e);window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+
Q(e)+'"')&&(a.excludeUntil=Infinity)}b.codecCount!==c&&(a.excludeUntil=Infinity);b.videoCodec!==d&&(a.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function(a){var b=0,c=this.seekable();c.length&&(b=c.start(0));t["default"].updateAdCues(a,this.cueTagsTrack_,b)}},{key:"goalBufferLength",value:function(){var a=this.tech_.currentTime(),b=G["default"].GOAL_BUFFER_LENGTH;return Math.min(b+a*G["default"].GOAL_BUFFER_LENGTH_RATE,Math.max(b,G["default"].MAX_GOAL_BUFFER_LENGTH))}},{key:"bufferLowWaterLine",
value:function(){var a=this.tech_.currentTime(),b=G["default"].BUFFER_LOW_WATER_LINE;return Math.min(b+a*G["default"].BUFFER_LOW_WATER_LINE_RATE,Math.max(b,G["default"].MAX_BUFFER_LOW_WATER_LINE))}}]);return d}(x["default"].EventTarget);e.MasterPlaylistController=b}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./ad-cue-tags":1,"./config":3,"./decrypter-worker":4,"./media-groups":6,"./playlist-loader":9,"./playlist.js":11,"./ranges":12,
"./segment-loader":16,"./sync-controller":18,"./util/codecs.js":19,"./vtt-segment-loader":20,"videojs-contrib-media-sources/es5/codec-utils":65,webwackify:76}],6:[function(f,b,e){(function(b){Object.defineProperty(e,"__esModule",{value:!0});var d=(b="undefined"!==typeof window?window.videojs:"undefined"!==typeof b?b.videojs:null)&&b.__esModule?b:{"default":b},c=(b=f("./playlist-loader"))&&b.__esModule?b:{"default":b},a=function(){},l=function(a,b){a.abort();a.pause();b&&b.activePlaylistLoader&&(b.activePlaylistLoader.pause(),
b.activePlaylistLoader=null)};e.stopLoaders=l;var u=function(a,b){b.activePlaylistLoader=a;a.load()};e.startLoaders=u;var q=function(a,b){return function(){var c=b.segmentLoaders,d=c[a];c=c.main;var e=b.mediaTypes[a],f=e.activeTrack();f=e.activeGroup(f);var k=e.activePlaylistLoader;l(d,e);f&&(f.playlistLoader?(d.resyncLoader(),u(f.playlistLoader,e)):k&&c.resetEverything())}};e.onGroupChanged=q;var r=function(a,b){return function(){var c=b.segmentLoaders,d=c[a];c=c.main;var e=b.mediaTypes[a],f=e.activeTrack(),
k=e.activeGroup(f),g=e.activePlaylistLoader;l(d,e);k&&(k.playlistLoader?(g!==k.playlistLoader&&(d.track&&d.track(f),d.resetEverything()),u(k.playlistLoader,e)):c.resetEverything())}};e.onTrackChanged=r;var y={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a],e=b.blacklistCurrentPlaylist;l(b.segmentLoaders[a],c);var f=c.activeTrack(),k=c.activeGroup();k=(k.filter(function(a){return a["default"]})[0]||k[0]).id;k=c.tracks[k];if(f===k)e({message:"Problem encountered loading the default audio track."});
else{d["default"].log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var t in c.tracks)c.tracks[t].enabled=c.tracks[t]===k;c.onTrackChanged()}}},SUBTITLES:function(a,b){return function(){var c=b.segmentLoaders[a],e=b.mediaTypes[a];d["default"].log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");l(c,e);if(c=e.activeTrack())c.mode="disabled";e.onTrackChanged()}}};e.onError=y;var z={AUDIO:function(a,b,c){if(b){var d=c.tech,
e=c.requestOptions,f=c.segmentLoaders[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e);(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()});b.on("loadedplaylist",function(){f.playlist(b.media(),e);d.paused()||f.load()});b.on("error",y[a](a,c))}},SUBTITLES:function(a,b,c){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a],k=c.mediaTypes[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e);f.track(k.activeTrack());(!d.paused()||a.endList&&"none"!==d.preload())&&
f.load()});b.on("loadedplaylist",function(){f.playlist(b.media(),e);d.paused()||f.load()});b.on("error",y[a](a,c))}};e.setupListeners=z;var p={AUDIO:function(a,b){var e=b.mode,f=b.hls,k=b.segmentLoaders[a],l=b.requestOptions.withCredentials,t=b.master.mediaGroups,g=b.mediaTypes[a],m=g.groups;g=g.tracks;t[a]&&0!==Object.keys(t[a]).length&&"html5"===e||(t[a]={main:{"default":{"default":!0}}});for(var p in t[a]){m[p]||(m[p]=[]);for(var r in t[a][p]){e=t[a][p][r];var q=e.resolvedUri?new c["default"](e.resolvedUri,
f,l):null;e=d["default"].mergeOptions({id:r,playlistLoader:q},e);z[a](a,e.playlistLoader,b);m[p].push(e);if("undefined"===typeof g[r]){q=d["default"].AudioTrack;var u=r,x=e["default"]?"main":"alternative";e.characteristics&&0<=e.characteristics.indexOf("public.accessibility.describes-video")&&(x="main-desc");e=new q({id:u,kind:x,enabled:!1,language:e.language,"default":e["default"],label:r});g[r]=e}}}k.on("error",y[a](a,b))},SUBTITLES:function(a,b){var e=b.tech,f=b.hls,k=b.segmentLoaders[a],l=b.requestOptions.withCredentials,
t=b.master.mediaGroups,g=b.mediaTypes[a],m=g.groups;g=g.tracks;for(var p in t[a]){m[p]||(m[p]=[]);for(var r in t[a][p])if(!t[a][p][r].forced){var q=t[a][p][r];q=d["default"].mergeOptions({id:r,playlistLoader:new c["default"](q.resolvedUri,f,l)},q);z[a](a,q.playlistLoader,b);m[p].push(q);"undefined"===typeof g[r]&&(q=e.addRemoteTextTrack({id:r,kind:"subtitles",enabled:!1,language:q.language,label:r},!1).track,g[r]=q)}}k.on("error",y[a](a,b))},"CLOSED-CAPTIONS":function(a,b){var c=b.tech,e=b.master.mediaGroups,
f=b.mediaTypes[a];b=f.groups;f=f.tracks;for(var k in e[a]){b[k]||(b[k]=[]);for(var l in e[a][k]){var g=e[a][k][l];g.instreamId.match(/CC\d/)&&(b[k].push(d["default"].mergeOptions({id:l},g)),"undefined"===typeof f[l]&&(g=c.addRemoteTextTrack({id:g.instreamId,kind:"captions",enabled:!1,language:g.language,label:l},!1).track,f[l]=g))}}}};e.initialize=p;var x=function(a,b){return function(c){var d=b.mediaTypes[a].groups,e=b.masterPlaylistLoader.media();if(!e)return null;var f=null;e.attributes[a]&&(f=
d[e.attributes[a]]);f=f||d.main;return"undefined"===typeof c?f:null===c?null:f.filter(function(a){return a.id===c.id})[0]||null}};e.activeGroup=x;var t={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a].tracks,d;for(d in c)if(c[d].enabled)return c[d];return null}},SUBTITLES:function(a,b){return function(){var c=b.mediaTypes[a].tracks,d;for(d in c)if("showing"===c[d].mode)return c[d];return null}}};e.activeTrack=t;e.setupMediaGroups=function(a){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){p[b](b,
a)});var b=a.mediaTypes,c=a.masterPlaylistLoader,d=a.tech,e=a.hls;["AUDIO","SUBTITLES"].forEach(function(c){b[c].activeGroup=x(c,a);b[c].activeTrack=t[c](c,a);b[c].onGroupChanged=q(c,a);b[c].onTrackChanged=r(c,a)});var f=b.AUDIO.activeGroup();f=(f.filter(function(a){return a["default"]})[0]||f[0]).id;b.AUDIO.tracks[f].enabled=!0;b.AUDIO.onTrackChanged();c.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return b[a].onGroupChanged()})});var k=function(){b.AUDIO.onTrackChanged();
d.trigger({type:"usage",name:"hls-audio-change"})};d.audioTracks().addEventListener("change",k);d.remoteTextTracks().addEventListener("change",b.SUBTITLES.onTrackChanged);e.on("dispose",function(){d.audioTracks().removeEventListener("change",k);d.remoteTextTracks().removeEventListener("change",b.SUBTITLES.onTrackChanged)});d.clearTracks("audio");for(var g in b.AUDIO.tracks)d.audioTracks().addTrack(b.AUDIO.tracks[g])};e.createMediaTypes=function(){var b={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(c){b[c]=
{groups:{},tracks:{},activePlaylistLoader:null,activeGroup:a,activeTrack:a,onGroupChanged:a,onTrackChanged:a}});return b}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./playlist-loader":9}],7:[function(f,b,e){(function(b){Object.defineProperty(e,"__esModule",{value:!0});var d=(b="undefined"!==typeof window?window.videojs:"undefined"!==typeof b?b.videojs:null)&&b.__esModule?b:{"default":b},c=f("./bin-utils"),a={FAILURE:2,TIMEOUT:-101,
ABORTED:-102};e.REQUEST_ERRORS=a;var l=function(a){var b={};a.byterange&&(a=a.byterange,b.Range="bytes="+a.offset+"-"+(a.offset+a.length-1));return b},u=function(a){a.forEach(function(a){a.abort()})},q=function(a){var b=a.target;b=Date.now()-b.requestTime;b={bandwidth:Infinity,bytesReceived:0,roundTripTime:b||0};b.bytesReceived=a.loaded;b.bandwidth=Math.floor(b.bytesReceived/b.roundTripTime*8E3);return b},r=function(b,c){return c.timedout?{status:c.status,message:"HLS request timed-out at URL: "+
c.uri,code:a.TIMEOUT,xhr:c}:c.aborted?{status:c.status,message:"HLS request aborted at URL: "+c.uri,code:a.ABORTED,xhr:c}:b?{status:c.status,message:"HLS request errored at URL: "+c.uri,code:a.FAILURE,xhr:c}:null},y=function(b,c){return function(d,e){var f=e.response;if(d=r(d,e))return c(d,b);if(16!==f.byteLength)return c({status:e.status,message:"Invalid HLS key at URL: "+e.uri,code:a.FAILURE,xhr:e},b);e=new DataView(f);b.key.bytes=new Uint32Array([e.getUint32(0),e.getUint32(4),e.getUint32(8),e.getUint32(12)]);
return c(null,b)}},z=function(b,c){return function(d,e){var f=e.response;if(d=r(d,e))return c(d,b);if(0===f.byteLength)return c({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:a.FAILURE,xhr:e},b);b.map.bytes=new Uint8Array(e.response);return c(null,b)}},p=function(b,c){return function(d,e){var f=e.response;if(d=r(d,e))return c(d,b);if(0===f.byteLength)return c({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:a.FAILURE,xhr:e},b);b.stats={bandwidth:e.bandwidth,
bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0};b.key?b.encryptedBytes=new Uint8Array(e.response):b.bytes=new Uint8Array(e.response);return c(null,b)}},x=function(a,b,d){a.addEventListener("message",function g(c){if(c.data.source===b.requestId)return a.removeEventListener("message",g),c=c.data.decrypted,b.bytes=new Uint8Array(c.bytes,c.byteOffset,c.byteLength),d(null,b)});a.postMessage((0,c.createTransferableMessage)({source:b.requestId,encrypted:b.encryptedBytes,key:b.key.bytes,
iv:b.key.iv}),[b.encryptedBytes.buffer,b.key.bytes.buffer])},t=function(a){return a.reduce(function(a,b){return b.code>a.code?b:a})},B=function(a,b,c){var d=[],e=0;return function(f,k){f&&(u(a),d.push(f));e+=1;if(e===a.length)return k.endOfAllRequests=Date.now(),0<d.length?(f=t(d),c(f,k)):k.encryptedBytes?x(b,k,c):c(null,k)}},C=function(a,b){return function(c){a.stats=d["default"].mergeOptions(a.stats,q(c));!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=Date.now());
return b(c,a)}};e.mediaSegmentRequest=function(a,b,c,e,f,g){var k=[];c=B(k,c,g);if(e.key){g=d["default"].mergeOptions(b,{uri:e.key.resolvedUri,responseType:"arraybuffer"});var t=y(e,c);g=a(g,t);k.push(g)}e.map&&!e.map.bytes&&(g=d["default"].mergeOptions(b,{uri:e.map.resolvedUri,responseType:"arraybuffer",headers:l(e.map)}),t=z(e,c),g=a(g,t),k.push(g));b=d["default"].mergeOptions(b,{uri:e.resolvedUri,responseType:"arraybuffer",headers:l(e)});c=p(e,c);a=a(b,c);a.addEventListener("progress",C(e,f));
k.push(a);return function(){return u(k)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bin-utils":2}],8:[function(f,b,e){(function(d){function k(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,
c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),a=f("global/window"),l=k(a);a=f("./ranges");var u=k(a),q=k("undefined"!==typeof window?window.videojs:"undefined"!==typeof d?d.videojs:null),r=["seeking","seeked","pause","playing","error"];d=function(){function a(b){var c=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.tech_=b.tech;this.seekable=b.seekable;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=null;b.debug&&
(this.logger_=q["default"].log.bind(q["default"],"playback-watcher ->"));this.logger_("initialize");var d=function(){return c.monitorCurrentTime_()},e=function(){return c.techWaiting_()},f=function(){return c.cancelTimer_()},k=function(){return c.fixesBadSeeks_()};this.tech_.on("seekablechanged",k);this.tech_.on("waiting",e);this.tech_.on(r,f);this.tech_.on("canplay",d);this.dispose=function(){c.logger_("dispose");c.tech_.off("seekablechanged",k);c.tech_.off("waiting",e);c.tech_.off(r,f);c.tech_.off("canplay",
d);c.checkCurrentTimeTimeout_&&l["default"].clearTimeout(c.checkCurrentTimeTimeout_);c.cancelTimer_()}}c(a,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&l["default"].clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=l["default"].setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime();
else if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),b=this.tech_.buffered();if(this.lastRecordedTime===a&&(!b.length||a+u["default"].SAFE_TIME_DELTA>=b.end(b.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=a)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0;this.timer_&&
(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var a=this.tech_.seeking(),b=this.seekable(),c=this.tech_.currentTime(),d=void 0;a&&this.afterSeekableWindow_(b,c)&&(d=b.end(b.length-1));a&&this.beforeSeekableWindow_(b,c)&&(d=b.start(0)+u["default"].SAFE_TIME_DELTA);return"undefined"!==typeof d?(this.logger_("Trying to seek outside of seekable at time "+c+" with "+("seekable range "+u["default"].printableRange(b)+". Seeking to ")+(d+
".")),this.tech_.setCurrentTime(d),!0):!1}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),b=this.tech_.buffered();b=u["default"].findRange(b,a);b.length&&a+3<=b.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(a),this.logger_("Stopped at "+a+" while inside a buffered region "+("["+b.start(0)+" -> "+b.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}))}}},{key:"techWaiting_",
value:function(){var a=this.seekable(),b=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,b))return a=a.end(a.length-1),this.logger_("Fell out of live window at time "+b+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0;var c=this.tech_.buffered();a=u["default"].findNextRange(c,b);return this.videoUnderflow_(a,
c,b)?(this.cancelTimer_(),this.tech_.setCurrentTime(b),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):0<a.length?(c=a.start(0)-b,this.logger_("Stopped at "+b+", setting timer for "+c+", seeking "+("to "+a.start(0))),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*c,b),!0):!1}},{key:"afterSeekableWindow_",value:function(a,b){return a.length?b>a.end(a.length-1)+u["default"].SAFE_TIME_DELTA?!0:!1:!1}},{key:"beforeSeekableWindow_",value:function(a,b){return a.length&&0<a.start(0)&&
b<a.start(0)-u["default"].SAFE_TIME_DELTA?!0:!1}},{key:"videoUnderflow_",value:function(a,b,c){return 0===a.length&&(a=this.gapFromVideoUnderflow_(b,c))?(this.logger_("Encountered a gap in video from "+a.start+" to "+a.end+". "+("Seeking to current time "+c)),!0):!1}},{key:"skipTheGap_",value:function(a){var b=this.tech_.buffered(),c=this.tech_.currentTime();b=u["default"].findNextRange(b,c);this.cancelTimer_();0!==b.length&&c===a&&(this.logger_("skipTheGap_:","currentTime:",c,"scheduled currentTime:",
a,"nextRange start:",b.start(0)),this.tech_.setCurrentTime(b.start(0)+u["default"].TIME_FUDGE_FACTOR),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(a,b){a=u["default"].findGaps(a);for(var c=0;c<a.length;c++){var d=a.start(c),e=a.end(c);if(4>b-d&&2<b-d)return{start:d,end:e}}return null}},{key:"logger_",value:function(){}}]);return a}();e["default"]=d;b.exports=e["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{})},{"./ranges":12,"global/window":32}],9:[function(f,b,e){(function(b){function d(a){return a&&a.__esModule?a:{"default":a}}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,
"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===
b?void 0:b.call(c)}},u=f("./resolve-url"),q=d(u),r="undefined"!==typeof window?window.videojs:"undefined"!==typeof b?b.videojs:null;b=f("m3u8-parser");var y=d(b);b=f("global/window");var z=d(b),p=function(a,b,c){var d=b.slice();c=c||0;b=Math.min(a.length,b.length+c);for(var e=c;e<b;e++)d[e-c]=(0,r.mergeOptions)(a[e],d[e-c]);return d};e.updateSegments=p;var x=function(a,b){a.resolvedUri||(a.resolvedUri=(0,q["default"])(b,a.uri));a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=(0,q["default"])(b,a.key.uri));
a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=(0,q["default"])(b,a.map.uri))};e.resolveSegmentUris=x;var t=function(a,b){a=(0,r.mergeOptions)(a,{});var c=a.playlists.filter(function(a){return a.uri===b.uri})[0];if(!c||c.segments&&b.segments&&c.segments.length===b.segments.length&&c.mediaSequence===b.mediaSequence)return null;var d=(0,r.mergeOptions)(c,b);c.segments&&(d.segments=p(c.segments,b.segments,b.mediaSequence-c.mediaSequence));d.segments.forEach(function(a){x(a,d.resolvedUri)});for(c=0;c<
a.playlists.length;c++)a.playlists[c].uri===b.uri&&(a.playlists[c]=d);a.playlists[b.uri]=d;return a};e.updateMaster=t;var B=function(a){for(var b=a.playlists.length;b--;){var c=a.playlists[b];a.playlists[c.uri]=c;c.resolvedUri=(0,q["default"])(a.uri,c.uri);c.attributes||(c.attributes={},r.log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}};e.setupMediaPlaylists=B;var C=function(a){["AUDIO","SUBTITLES"].forEach(function(b){for(var c in a.mediaGroups[b])for(var d in a.mediaGroups[b][c]){var e=
a.mediaGroups[b][c][d];e.uri&&(e.resolvedUri=(0,q["default"])(a.uri,e.uri))}})};e.resolveMediaGroupUris=C;var F=function(a,b){var c=a.segments[a.segments.length-1];return b&&c&&c.duration?1E3*c.duration:500*(a.targetDuration||10)};e.refreshDelay=F;b=function(b){function d(a,b,c){var e=this;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");l(Object.getPrototypeOf(d.prototype),"constructor",this).call(this);this.srcUrl=a;this.hls_=b;this.withCredentials=c;if(!this.srcUrl)throw Error("A non-empty playlist URL is required");
this.state="HAVE_NOTHING";this.on("mediaupdatetimeout",function(){"HAVE_METADATA"===e.state&&(e.state="HAVE_CURRENT_METADATA",e.request=e.hls_.xhr({uri:(0,q["default"])(e.master.uri,e.media().uri),withCredentials:e.withCredentials},function(a,b){if(e.request){if(a)return e.playlistRequestError(e.request,e.media().uri,"HAVE_METADATA");e.haveMetadata(e.request,e.media().uri)}}))})}c(d,b);a(d,[{key:"playlistRequestError",value:function(a,b,c){this.request=null;c&&(this.state=c);this.error={playlist:this.master.playlists[b],
status:a.status,message:"HLS playlist request error at URL: "+b,responseText:a.responseText,code:500<=a.status?4:2};this.trigger("error")}},{key:"haveMetadata",value:function(a,b){var c=this;this.request=null;this.state="HAVE_METADATA";var d=new y["default"].Parser;d.push(a.responseText);d.end();d.manifest.uri=b;d.manifest.attributes=d.manifest.attributes||{};a=t(this.master,d.manifest);this.targetDuration=d.manifest.targetDuration;a?(this.master=a,this.media_=this.master.playlists[d.manifest.uri]):
this.trigger("playlistunchanged");this.media().endList||(z["default"].clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=z["default"].setTimeout(function(){c.trigger("mediaupdatetimeout")},F(this.media(),!!a)));this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest();z["default"].clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"media",
value:function(a){var b=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var c=this.state;if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}var d=!this.media_||a.uri!==this.media_.uri;if(this.master.playlists[a.uri].endList)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,d&&
(this.trigger("mediachanging"),this.trigger("mediachange"));else if(d){this.state="SWITCHING_MEDIA";if(this.request){if((0,q["default"])(this.master.uri,a.uri)===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.request=this.hls_.xhr({uri:(0,q["default"])(this.master.uri,a.uri),withCredentials:this.withCredentials},function(d,e){if(b.request){if(d)return b.playlistRequestError(b.request,a.uri,c);b.haveMetadata(e,
a.uri);"HAVE_MASTER"===c?b.trigger("loadedmetadata"):b.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest();z["default"].clearTimeout(this.mediaUpdateTimeout);"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(a){var b=this;z["default"].clearTimeout(this.mediaUpdateTimeout);var c=this.media();a?this.mediaUpdateTimeout=
z["default"].setTimeout(function(){return b.load()},c?c.targetDuration/2*1E3:5E3):this.started?c&&!c.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var a=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,c){if(a.request){a.request=null;if(b)return a.error={status:c.status,message:"HLS playlist request error at URL: "+a.srcUrl,responseText:c.responseText,code:2},"HAVE_NOTHING"===
a.state&&(a.started=!1),a.trigger("error");b=new y["default"].Parser;b.push(c.responseText);b.end();a.state="HAVE_MASTER";b.manifest.uri=a.srcUrl;if(b.manifest.playlists)a.master=b.manifest,B(a.master),C(a.master),a.trigger("loadedplaylist"),a.request||a.media(b.manifest.playlists[0]);else return a.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:z["default"].location.href,playlists:[{uri:a.srcUrl}]},a.master.playlists[a.srcUrl]=a.master.playlists[0],a.master.playlists[0].resolvedUri=
a.srcUrl,a.master.playlists[0].attributes=a.master.playlists[0].attributes||{},a.haveMetadata(c,a.srcUrl),a.trigger("loadedmetadata")}})}}]);return d}(r.EventTarget);e["default"]=b}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./resolve-url":15,"global/window":32,"m3u8-parser":33}],10:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});var d=(b=f("./config"))&&b.__esModule?b:{"default":b},k=(b=f("./playlist"))&&
b.__esModule?b:{"default":b},c=f("./util/codecs.js"),a=function(a,b){return a?(a=window.getComputedStyle(a))?a[b]:"":""},l=function(a,b){var c=a.slice();a.sort(function(a,d){var e=b(a,d);return 0===e?c.indexOf(a)-c.indexOf(d):e})},u=function(a,b){var c=void 0,d=void 0;a.attributes.BANDWIDTH&&(c=a.attributes.BANDWIDTH);c=c||window.Number.MAX_VALUE;b.attributes.BANDWIDTH&&(d=b.attributes.BANDWIDTH);d=d||window.Number.MAX_VALUE;return c-d};e.comparePlaylistBandwidth=u;e.comparePlaylistResolution=function(a,
b){var c=void 0,d=void 0;a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(c=a.attributes.RESOLUTION.width);c=c||window.Number.MAX_VALUE;b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width&&(d=b.attributes.RESOLUTION.width);d=d||window.Number.MAX_VALUE;return c===d&&a.attributes.BANDWIDTH&&b.attributes.BANDWIDTH?a.attributes.BANDWIDTH-b.attributes.BANDWIDTH:c-d};var q=function(a,b,c,e){a=a.playlists.map(function(a){var b=a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width;var c=a.attributes.RESOLUTION&&
a.attributes.RESOLUTION.height;var d=(d=a.attributes.BANDWIDTH)||window.Number.MAX_VALUE;return{bandwidth:d,width:b,height:c,playlist:a}});l(a,function(a,b){return a.bandwidth-b.bandwidth});a=a.filter(function(a){return!k["default"].isIncompatible(a.playlist)});var f=a.filter(function(a){return k["default"].isEnabled(a.playlist)});f.length||(f=a.filter(function(a){return!k["default"].isDisabled(a.playlist)}));var t=f.filter(function(a){return a.bandwidth*d["default"].BANDWIDTH_VARIANCE<b}),p=t[t.length-
1],r=t.filter(function(a){return a.bandwidth===p.bandwidth})[0];t=t.filter(function(a){return a.width&&a.height});l(t,function(a,b){return a.width-b.width});var q=t.filter(function(a){return a.width===c&&a.height===e});p=q[q.length-1];q=q.filter(function(a){return a.bandwidth===p.bandwidth})[0];var u=void 0,z=void 0;z=void 0;q||(u=t.filter(function(a){return a.width>c||a.height>e}),z=u.filter(function(a){return a.width===u[0].width&&a.height===u[0].height}),p=z[z.length-1],z=z.filter(function(a){return a.bandwidth===
p.bandwidth})[0]);return(a=z||q||r||f[0]||a[0])?a.playlist:null};e.simpleSelector=q;e.lastBandwidthSelector=function(){return q(this.playlists.master,this.systemBandwidth,parseInt(a(this.tech_.el(),"width"),10),parseInt(a(this.tech_.el(),"height"),10))};e.movingAverageBandwidthSelector=function(b){var c=-1;if(0>b||1<b)throw Error("Moving average bandwidth decay must be between 0 and 1.");return function(){0>c&&(c=this.systemBandwidth);c=b*this.systemBandwidth+(1-b)*c;return q(this.playlists.master,
c,parseInt(a(this.tech_.el(),"width"),10),parseInt(a(this.tech_.el(),"height"),10))}};e.minRebufferMaxBandwidthSelector=function(a){var b=a.currentTime,c=a.bandwidth,d=a.duration,e=a.segmentDuration,f=a.timeUntilRebuffer,r=a.currentTimeline,q=a.syncController;a=a.master.playlists.filter(function(a){return!k["default"].isIncompatible(a)});var F=a.filter(k["default"].isEnabled);F.length||(F=a.filter(function(a){return!k["default"].isDisabled(a)}));a=F.filter(k["default"].hasAttribute.bind(null,"BANDWIDTH")).map(function(a){var l=
q.getSyncPoint(a,d,r,b)?1:2;l=k["default"].estimateSegmentRequestTime(e,c,a)*l-f;return{playlist:a,rebufferingImpact:l}});F=a.filter(function(a){return 0>=a.rebufferingImpact});l(F,function(a,b){return u(b.playlist,a.playlist)});if(F.length)return F[0];l(a,function(a,b){return a.rebufferingImpact-b.rebufferingImpact});return a[0]||null};e.lowestBitrateCompatibleVariantSelector=function(){var a=this.playlists.master.playlists.filter(k["default"].isEnabled);l(a,function(a,b){return u(a,b)});return a.filter(function(a){return(0,
c.parseCodecs)(a.attributes.CODECS).videoCodec})[0]||null}},{"./config":3,"./playlist":11,"./util/codecs.js":19}],11:[function(f,b,e){(function(b){Object.defineProperty(e,"__esModule",{value:!0});var d="undefined"!==typeof window?window.videojs:"undefined"!==typeof b?b.videojs:null,c=(b=f("global/window"))&&b.__esModule?b:{"default":b},a=function(a,b){var c=0;b-=a.mediaSequence;var d=a.segments[b];if(d){if("undefined"!==typeof d.start)return{result:d.start,precise:!0};if("undefined"!==typeof d.end)return{result:d.end-
d.duration,precise:!0}}for(;b--;){d=a.segments[b];if("undefined"!==typeof d.end)return{result:c+d.end,precise:!0};c+=d.duration;if("undefined"!==typeof d.start)return{result:c+d.start,precise:!0}}return{result:c,precise:!1}},l=function(b,c,d){"undefined"===typeof c&&(c=b.mediaSequence+b.segments.length);if(c<b.mediaSequence)return 0;var e=a(b,c);if(e.precise)return e.result;a:{var f=0;for(var g=c-b.mediaSequence;g<b.segments.length;g++){c=b.segments[g];if("undefined"!==typeof c.start){b=c.start-f;
f=!0;break a}f+=c.duration;if("undefined"!==typeof c.end){b=c.end-f;f=!0;break a}}b=-1;f=!1}return f?b:e.result+d},u=function(a,b,d){if(!a)return 0;"number"!==typeof d&&(d=0);if("undefined"===typeof b){if(a.totalDuration)return a.totalDuration;if(!a.endList)return c["default"].Infinity}return l(a,b,d)};e.duration=u;var q=function(a,b,c){var d=0;b>c&&(c=[c,b],b=c[0],c=c[1]);if(0>b){for(;b<Math.min(0,c);b++)d+=a.targetDuration;b=0}for(;b<c;b++)d+=a.segments[b].duration;return d};e.sumDurations=q;var r=
function(a){if(!a.segments.length)return 0;for(var b=a.segments.length-1,c=a.segments[b].duration||a.targetDuration,d=c+2*a.targetDuration;b--&&!(c+=a.segments[b].duration,c>=d););return Math.max(0,b)};e.safeLiveIndex=r;var y=function(a,b,c){if(!a||!a.segments)return null;if(a.endList)return u(a);if(null===b)return null;b=b||0;c=c?r(a):a.segments.length;return l(a,a.mediaSequence+c,b)};e.playlistEnd=y;b=function(a,b){var c=b||0;a=y(a,b,!0);return null===a?(0,d.createTimeRange)():(0,d.createTimeRange)(c,
a)};e.seekable=b;var z=function(a,b){if(0===b-Math.floor(b))return b+.1*a;for(var c=b.toString().split(".")[1].length,d=1;d<=c;d++){var e=Math.pow(10,d),f=b*e;if(0===f-Math.floor(f)||d===c)return(f+a)/e}},p=z.bind(null,1),x=z.bind(null,-1);z=function(a,b,c,d){var e,f=a.segments.length,g=b-d;if(0>g){if(0<c)for(e=c-1;0<=e;e--){var k=a.segments[e];g+=x(k.duration);if(0<g)return{mediaIndex:e,startTime:d-q(a,c,e)}}return{mediaIndex:0,startTime:b}}if(0>c){for(e=c;0>e;e++)if(g-=a.targetDuration,0>g)return{mediaIndex:0,
startTime:b};c=0}for(e=c;e<f;e++)if(k=a.segments[e],g-=p(k.duration),0>g)return{mediaIndex:e,startTime:d+q(a,c,e)};return{mediaIndex:f-1,startTime:b}};e.getMediaInfoForTime=z;var t=function(a){return a.excludeUntil&&a.excludeUntil>Date.now()};e.isBlacklisted=t;var B=function(a){return a.excludeUntil&&Infinity===a.excludeUntil};e.isIncompatible=B;var C=function(a){var b=t(a);return!a.disabled&&!b};e.isEnabled=C;var F=function(a){return a.disabled};e.isDisabled=F;var H=function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].key)return!0;
return!1};e.isAes=H;var G=function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].map)return!0;return!1};e.isFmp4=G;var E=function(a,b){return b.attributes&&b.attributes[a]};e.hasAttribute=E;var K=function(a,b,c){var d=3>=arguments.length||void 0===arguments[3]?0:arguments[3];return E("BANDWIDTH",c)?(a*c.attributes.BANDWIDTH-8*d)/b:NaN};e.estimateSegmentRequestTime=K;var g=function(a,b){if(1===a.playlists.length)return!0;var c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(function(a){return C(a)?
(a.attributes.BANDWIDTH||0)<c:!1}).length};e.isLowestEnabledRendition=g;e["default"]={duration:u,seekable:b,safeLiveIndex:r,getMediaInfoForTime:z,isEnabled:C,isDisabled:F,isBlacklisted:t,isIncompatible:B,playlistEnd:y,isAes:H,isFmp4:G,hasAttribute:E,estimateSegmentRequestTime:K,isLowestEnabledRendition:g}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"global/window":32}],12:[function(f,b,e){(function(d){Object.defineProperty(e,
"__esModule",{value:!0});var f=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var k=a[Symbol.iterator](),l;!(d=(l=k.next()).done)&&(c.push(l.value),!b||c.length!==b);d=!0);}catch(F){e=!0,f=F}finally{try{if(!d&&k["return"])k["return"]()}finally{if(e)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),c=(d="undefined"!==typeof window?window.videojs:"undefined"!==typeof d?
d.videojs:null)&&d.__esModule?d:{"default":d},a=1/30,l=function(a,b){b=f(b,2);return Math.min(Math.max(b[0],a),b[1])},u=function(a,b){var d=[],e;if(a&&a.length)for(e=0;e<a.length;e++)b(a.start(e),a.end(e))&&d.push([a.start(e),a.end(e)]);return c["default"].createTimeRanges(d)},q=function(a,b){var d=null,e=null,f=0,k=[],l=[];if(!(a&&a.length&&b&&b.length))return c["default"].createTimeRange();for(var r=a.length;r--;)k.push({time:a.start(r),type:"start"}),k.push({time:a.end(r),type:"end"});for(r=b.length;r--;)k.push({time:b.start(r),
type:"start"}),k.push({time:b.end(r),type:"end"});k.sort(function(a,b){return a.time-b.time});for(r=0;r<k.length;r++)"start"===k[r].type?(f++,2===f&&(d=k[r].time)):"end"===k[r].type&&(f--,1===f&&(e=k[r].time)),null!==d&&null!==e&&(l.push([d,e]),e=d=null);return c["default"].createTimeRanges(l)};e["default"]={findRange:function(b,c){return u(b,function(b,d){return b-a<=c&&d+a>=c})},findNextRange:function(b,c){return u(b,function(b){return b-a>=c})},findGaps:function(a){if(2>a.length)return c["default"].createTimeRanges();
for(var b=[],d=1;d<a.length;d++){var e=a.end(d-1),f=a.start(d);b.push([e,f])}return c["default"].createTimeRanges(b)},findSoleUncommonTimeRangesEnd:function(a,b){var c=void 0,d=void 0,e=void 0,f=[],k=[],l=function(a){return a[0]<=e&&a[1]>=e};if(a)for(c=0;c<a.length;c++)d=a.start(c),e=a.end(c),k.push([d,e]);if(b)for(c=0;c<b.length;c++)d=b.start(c),e=b.end(c),k.some(l)||f.push(e);return 1!==f.length?null:f[0]},getSegmentBufferedPercent:function(a,b,d,e){b=a+b;var f=c["default"].createTimeRanges([[a,
b]]),k=c["default"].createTimeRanges([[l(a,[d,b]),b]]);if(k.start(0)===k.end(0))return 0;a=f.end(0)-f.start(0);b=k.end(0)-k.start(0);b=a-b;k=q(k,e);e=q(f,e);for(var p=f=0,r=k.length;r--;)f+=k.end(r)-k.start(r),k.start(r)===d&&(f+=b);for(r=e.length;r--;)p+=e.end(r)-e.start(r);d=Math.max(f,p)/a*100;return isNaN(d)||Infinity===d||-Infinity===d?0:d},TIME_FUDGE_FACTOR:a,SAFE_TIME_DELTA:3*a,printableRange:function(a){var b=[];if(!a||!a.length)return"";for(var c=0;c<a.length;c++)b.push(a.start(c)+" => "+
a.end(c));return b.join(", ")},timeUntilRebuffer:function(a,b){var c=2>=arguments.length||void 0===arguments[2]?1:arguments[2];return((a.length?a.end(a.length-1):0)-b)/c}};b.exports=e["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],13:[function(f,b,e){(function(d){Object.defineProperty(e,"__esModule",{value:!0});var f=(d="undefined"!==typeof window?window.videojs:"undefined"!==typeof d?d.videojs:null)&&d.__esModule?
d:{"default":d},c={errorInterval:30,getSource:function(a){var b=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_;return a(b)}},a=function r(a,b){var d=0,e=0,k=f["default"].mergeOptions(c,b);a.ready(function(){a.trigger({type:"usage",name:"hls-error-reload-initialized"})});var q=function(){e&&a.currentTime(e)},t=function(b){null!==b&&void 0!==b&&(e=Infinity!==a.duration()&&a.currentTime()||0,a.one("loadedmetadata",q),a.src(b),a.trigger({type:"usage",name:"hls-error-reload"}),a.play())},u=function(){if(Date.now()-
d<1E3*k.errorInterval)a.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(k.getSource&&"function"===typeof k.getSource)return d=Date.now(),k.getSource.call(a,t);f["default"].log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},C=function H(){a.off("loadedmetadata",q);a.off("error",u);a.off("dispose",H)};a.on("error",u);a.on("dispose",C);a.reloadSourceOnError=function(b){C();r(a,b)}};e["default"]=function(b){a(this,b)};b.exports=e["default"]}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],14:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});var d=f("./playlist.js"),k=function(a,b,c){return function(e){var f=a.master.playlists[b],k=(0,d.isIncompatible)(f),l=(0,d.isEnabled)(f);if("undefined"===typeof e)return l;e?delete f.disabled:f.disabled=!0;e===l||k||(c(),e?a.trigger("renditionenabled"):a.trigger("renditiondisabled"));return e}},c=function r(b,c,d){if(!(this instanceof
r))throw new TypeError("Cannot call a class as a function");var e=b.masterPlaylistController_.fastQualityChange_.bind(b.masterPlaylistController_);if(c.attributes.RESOLUTION){var f=c.attributes.RESOLUTION;this.width=f.width;this.height=f.height}this.bandwidth=c.attributes.BANDWIDTH;this.id=d;this.enabled=k(b.playlists,c.uri,e)};e["default"]=function(b){var e=b.playlists;b.representations=function(){return e.master.playlists.filter(function(b){return!(0,d.isIncompatible)(b)}).map(function(d,e){return new c(b,
d,d.uri)})}};b.exports=e["default"]},{"./playlist.js":11}],15:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});var d=f("url-toolkit"),k=d&&d.__esModule?d:{"default":d},c=(f=f("global/window"))&&f.__esModule?f:{"default":f};e["default"]=function(a,b){if(/^[a-z]+:/i.test(b))return b;/\/\//i.test(a)||(a=k["default"].buildAbsoluteURL(c["default"].location.href,a));return k["default"].buildAbsoluteURL(a,b)};b.exports=e["default"]},{"global/window":32,"url-toolkit":63}],16:[function(f,
b,e){(function(b){function d(a){return a&&a.__esModule?a:{"default":a}}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},u=f("./playlist"),q=d(u),r=d("undefined"!==typeof window?window.videojs:
"undefined"!==typeof b?b.videojs:null);b=f("./source-updater");var y=d(b);b=f("./config");var z=d(b);b=f("global/window");var p=d(b);b=f("videojs-contrib-media-sources/es5/remove-cues-from-track.js");var x=d(b),t=f("./bin-utils"),B=f("./media-segment-request"),C=f("./ranges"),F=f("./playlist-selectors"),H=function(a,b,c){if(!a||!b)return!1;c=c===a.segments.length;return a.endList&&"open"===b.readyState&&c},G=function(a,b,c){return"main"===a&&b&&c?c.containsAudio||c.containsVideo?b.containsVideo&&
!c.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!b.containsVideo&&c.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null};e.illegalMediaSwitch=
G;var E=function(a,b,c){a=a.length&&0<a.start(0)&&a.start(0)<b?a.start(0):b-30;return Math.min(a,b-c)};e.safeBackBufferTrimTime=E;b=function(b){function d(a){var b=this,c=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");l(Object.getPrototypeOf(d.prototype),"constructor",this).call(this);if(!a)throw new TypeError("Initialization settings are required");if("function"!==typeof a.currentTime)throw new TypeError("No currentTime getter specified");
if(!a.mediaSource)throw new TypeError("No MediaSource specified");this.state="INIT";this.bandwidth=a.bandwidth;this.throughput={rate:0,count:0};this.roundTrip=NaN;this.resetStats_();this.mediaIndex=null;this.hasPlayed_=a.hasPlayed;this.currentTime_=a.currentTime;this.seekable_=a.seekable;this.seeking_=a.seeking;this.duration_=a.duration;this.mediaSource_=a.mediaSource;this.hls_=a.hls;this.loaderType_=a.loaderType;this.startingMedia_=void 0;this.segmentMetadataTrack_=a.segmentMetadataTrack;this.goalBufferLength_=
a.goalBufferLength;this.checkBufferTimeout_=null;this.error_=void 0;this.currentTimeline_=-1;this.activeInitSegmentId_=this.xhrOptions_=this.sourceUpdater_=this.mimeType_=this.pendingSegment_=null;this.initSegments_={};this.decrypter_=a.decrypter;this.syncController_=a.syncController;this.syncPoint_={segmentIndex:0,time:0};this.syncController_.on("syncinfoupdate",function(){return b.trigger("syncinfoupdate")});this.mediaSource_.addEventListener("sourceopen",function(){return b.ended_=!1});this.fetchAtBuffer_=
!1;c.debug&&(this.logger_=r["default"].log.bind(r["default"],"segment-loader",this.loaderType_,"->"))}c(d,b);a(d,[{key:"resetStats_",value:function(){this.mediaSecondsLoaded=this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=0}},{key:"dispose",value:function(){this.state="DISPOSED";this.pause();this.abort_();this.sourceUpdater_&&this.sourceUpdater_.dispose();this.resetStats_()}},{key:"abort",value:function(){"WAITING"!==
this.state?this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests();this.pendingSegment_=null}},{key:"error",value:function(a){"undefined"!==typeof a&&(this.error_=a);this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function(){this.ended_=!0;this.pause();this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?
this.sourceUpdater_.buffered():r["default"].createTimeRanges()}},{key:"initSegment",value:function(a){var b=1>=arguments.length||void 0===arguments[1]?!1:arguments[1];if(!a)return null;var c=(0,t.initSegmentId)(a),d=this.initSegments_[c];b&&!d&&a.bytes&&(this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes});return d||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},
{key:"load",value:function(){this.monitorBuffer_();if(this.playlist_){this.syncController_.setDateTimeMapping(this.playlist_);if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){this.state="READY";this.sourceUpdater_=new y["default"](this.mediaSource_,this.mimeType_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function(a){var b=
1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if(a){var c=this.playlist_,d=this.pendingSegment_;this.playlist_=a;this.xhrOptions_=b;this.hasPlayed_()||(a.syncInfo={mediaSequence:a.mediaSequence,time:0});this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();c&&c.uri===a.uri?(b=a.mediaSequence-c.mediaSequence,this.logger_("mediaSequenceDiff",b),null!==this.mediaIndex&&(this.mediaIndex-=b),d&&(d.mediaIndex-=b,0<=d.mediaIndex&&(d.segment=a.segments[d.mediaIndex])),
this.syncController_.saveExpiredSegmentInfo(c,a)):null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(p["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(a){this.mimeType_||(this.mimeType_=a,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(){this.ended_=!1;this.resetLoader();
this.remove(0,this.duration_());this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1;this.resyncLoader()}},{key:"resyncLoader",value:function(){this.syncPoint_=this.mediaIndex=null;this.abort()}},{key:"remove",value:function(a,b){this.sourceUpdater_&&this.sourceUpdater_.remove(a,b);(0,x["default"])(a,b,this.segmentMetadataTrack_)}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&p["default"].clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=
p["default"].setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&p["default"].clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=p["default"].setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,
this.currentTime_()));var a=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(a)if(H(this.playlist_,this.mediaSource_,a.mediaIndex))this.endOfStream();else if(a.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_()){if(a.timeline!==this.currentTimeline_||null!==a.startOfSegment&&a.startOfSegment<this.sourceUpdater_.timestampOffset())this.syncController_.reset(),a.timestampOffset=
a.startOfSegment;this.loadSegment_(a)}}}},{key:"checkBuffer_",value:function(a,b,c,d,e,f){var g=0;a.length&&(g=a.end(a.length-1));a=Math.max(0,g-e);if(!b.segments.length||a>=this.goalBufferLength_()||!d&&1<=a)return null;this.logger_("checkBuffer_","mediaIndex:",c,"hasPlayed:",d,"currentTime:",e,"syncPoint:",f,"fetchAtBuffer:",this.fetchAtBuffer_,"bufferedTime:",a);if(null===f)return c=this.getSyncSegmentCandidate_(b),this.logger_("getSync","mediaIndex:",c),this.generateSegmentInfo_(b,c,null,!0);
if(null!==c)return this.logger_("walkForward","mediaIndex:",c+1),g=(d=b.segments[c])&&d.end?d.end:g,this.generateSegmentInfo_(b,c+1,g,!1);g=this.fetchAtBuffer_?q["default"].getMediaInfoForTime(b,g,f.segmentIndex,f.time):q["default"].getMediaInfoForTime(b,e,f.segmentIndex,f.time);c=g.mediaIndex;g=g.startTime;this.logger_("getMediaIndexForTime","mediaIndex:",c,"startOfSegment:",g);return this.generateSegmentInfo_(b,c,g,!1)}},{key:"getSyncSegmentCandidate_",value:function(a){var b=this;if(-1===this.currentTimeline_)return 0;
var c=a.segments.map(function(a,b){return{timeline:a.timeline,segmentIndex:b}}).filter(function(a){return a.timeline===b.currentTimeline_});return c.length?c[Math.min(c.length-1,1)].segmentIndex:Math.max(a.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(a,b,c,d){if(0>b||b>=a.segments.length)return null;var e=a.segments[b];return{requestId:"segment-loader-"+Math.random(),uri:e.resolvedUri,mediaIndex:b,isSyncRequest:d,startOfSegment:c,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,
timeline:e.timeline,duration:e.duration,segment:e}}},{key:"abortRequestEarly_",value:function(a){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||1E3>Date.now()-(a.firstBytesReceivedAt||Date.now()))return!1;var b=this.currentTime_(),c=a.bandwidth,d=this.pendingSegment_.duration,e=q["default"].estimateSegmentRequestTime(d,c,this.playlist_,a.bytesReceived);a=(0,C.timeUntilRebuffer)(this.buffered_(),b,this.hls_.tech_.playbackRate())-1;if(e<=a)return!1;if(b=
(0,F.minRebufferMaxBandwidthSelector)({master:this.hls_.playlists.master,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:d,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_})){c=e-a-b.rebufferingImpact;d=.5;a<=C.TIME_FUDGE_FACTOR&&(d=1);if(!b.playlist||b.playlist.uri===this.playlist_.uri||c<d)return!1;this.bandwidth=b.playlist.attributes.BANDWIDTH*z["default"].BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return!0}}},{key:"handleProgress_",
value:function(a,b){this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(b.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(a){this.state="WAITING";this.pendingSegment_=a;this.trimBackBuffer_(a);a.abortRequests=(0,B.mediaSegmentRequest)(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(a),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(a){a=E(this.seekable_(),
this.currentTime_(),this.playlist_.targetDuration||10);0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",value:function(a){var b=a.segment,c={resolvedUri:b.resolvedUri,byterange:b.byterange,requestId:a.requestId};b.key&&(a=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]),c.key={resolvedUri:b.key.resolvedUri,iv:a});b.map&&(c.map=this.initSegment(b.map));return c}},{key:"segmentRequestFinished_",value:function(a,b){this.mediaRequests+=1;b.stats&&(this.mediaBytesTransferred+=
b.stats.bytesReceived,this.mediaTransferDuration+=b.stats.roundTripTime);this.pendingSegment_?b.requestId===this.pendingSegment_.requestId&&(a?(this.pendingSegment_=null,this.state="READY",a.code===B.REQUEST_ERRORS.ABORTED?this.mediaRequestsAborted+=1:(this.pause(),a.code===B.REQUEST_ERRORS.TIMEOUT?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(a),this.trigger("error")))):(this.bandwidth=b.stats.bandwidth,
this.roundTrip=b.stats.roundTripTime,b.map&&(b.map=this.initSegment(b.map,!0)),this.processSegmentResponse_(b))):this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(a){var b=this.pendingSegment_;b.bytes=a.bytes;a.map&&(b.segment.map.bytes=a.map.bytes);b.endOfAllRequests=a.endOfAllRequests;this.handleSegment_()}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_){var b=this.pendingSegment_,c=b.segment,d=this.syncController_.probeSegmentInfo(b);"undefined"===
typeof this.startingMedia_&&d&&(d.containsAudio||d.containsVideo)&&(this.startingMedia_={containsAudio:d.containsAudio,containsVideo:d.containsVideo});(d=G(this.loaderType_,this.startingMedia_,d))?(this.error({message:d,blacklistDuration:Infinity}),this.trigger("error")):b.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(null!==b.timestampOffset&&b.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(b.timestampOffset),
this.trigger("timestampoffset")),d=this.syncController_.mappingForTimeline(b.timeline),null!==d&&this.trigger({type:"segmenttimemapping",mapping:d}),this.state="APPENDING",c.map&&function(){var b=(0,t.initSegmentId)(c.map);if(!a.activeInitSegmentId_||a.activeInitSegmentId_!==b){var d=a.initSegment(c.map);a.sourceUpdater_.appendBuffer(d.bytes,function(){a.activeInitSegmentId_=b})}}(),b.byteLength=b.bytes.byteLength,this.mediaSecondsLoaded="number"===typeof c.start&&"number"===typeof c.end?this.mediaSecondsLoaded+
(c.end-c.start):this.mediaSecondsLoaded+c.duration,this.sourceUpdater_.appendBuffer(b.bytes,this.handleUpdateEnd_.bind(this)))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){this.logger_("handleUpdateEnd_","segmentInfo:",this.pendingSegment_);if(this.pendingSegment_){var a=this.pendingSegment_,b=a.segment,c=null!==this.mediaIndex;this.pendingSegment_=null;this.recordThroughput_(a);this.addSegmentMetadataCue_(a);this.state="READY";this.mediaIndex=a.mediaIndex;this.fetchAtBuffer_=
!0;this.currentTimeline_=a.timeline;this.trigger("syncinfoupdate");b.end&&this.currentTime_()-b.end>3*a.playlist.targetDuration?this.resetEverything():(c&&this.trigger("bandwidthupdate"),this.trigger("progress"),H(a.playlist,this.mediaSource_,a.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}else this.state="READY",this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(a){var b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1;this.throughput.rate+=
(Math.floor(a.byteLength/c*8E3)-b)/++this.throughput.count}},{key:"logger_",value:function(){}},{key:"addSegmentMetadataCue_",value:function(a){if(this.segmentMetadataTrack_){var b=a.segment,c=b.start;b=b.end;if("number"===typeof c&&isFinite(c)&&"number"===typeof b&&isFinite(b)){(0,x["default"])(c,b,this.segmentMetadataTrack_);var d=p["default"].WebKitDataCue||p["default"].VTTCue;a={bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,
byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.uri,start:c,end:b};var e=JSON.stringify(a);c=new d(c,b,e);c.value=a;this.segmentMetadataTrack_.addCue(c)}}}}]);return d}(r["default"].EventTarget);e["default"]=b}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bin-utils":2,"./config":3,"./media-segment-request":7,"./playlist":11,"./playlist-selectors":10,"./ranges":12,"./source-updater":17,"global/window":32,
"videojs-contrib-media-sources/es5/remove-cues-from-track.js":72}],17:[function(f,b,e){(function(d){Object.defineProperty(e,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),c=(d="undefined"!==typeof window?window.videojs:"undefined"!==typeof d?d.videojs:null)&&d.__esModule?d:
{"default":d},a=function(){};d=function(){function b(a,c){var d=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var e=function(){d.sourceBuffer_=a.addSourceBuffer(c);d.onUpdateendCallback_=function(){var a=d.pendingCallback_;d.pendingCallback_=null;a&&a();d.runCallback_()};d.sourceBuffer_.addEventListener("updateend",d.onUpdateendCallback_);d.runCallback_()};this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=a;this.processedAppend_=
!1;"closed"===a.readyState?a.addEventListener("sourceopen",e):e()}f(b,[{key:"abort",value:function(a){var b=this;this.processedAppend_&&this.queueCallback_(function(){b.sourceBuffer_.abort()},a)}},{key:"appendBuffer",value:function(a,b){var c=this;this.processedAppend_=!0;this.queueCallback_(function(){c.sourceBuffer_.appendBuffer(a)},b)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:c["default"].createTimeRanges()}},{key:"remove",value:function(b,c){var d=
this;this.processedAppend_&&this.queueCallback_(function(){d.sourceBuffer_.remove(b,c)},a)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(a){var b=this;"undefined"!==typeof a&&(this.queueCallback_(function(){b.sourceBuffer_.timestampOffset=a}),this.timestampOffset_=a);return this.timestampOffset_}},{key:"queueCallback_",value:function(a,b){this.callbacks_.push([a.bind(this),b]);this.runCallback_()}},
{key:"runCallback_",value:function(){if(!this.updating()&&this.callbacks_.length){var a=this.callbacks_.shift();this.pendingCallback_=a[1];a[0]()}}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]);return b}();e["default"]=d;b.exports=e["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?
window:{})},{}],18:[function(f,b,e){(function(b){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),a=f("mux.js/lib/mp4/probe"),l=a&&a.__esModule?a:{"default":a},u=f("mux.js/lib/tools/ts-inspector.js"),q=f("./playlist"),r=(b="undefined"!==typeof window?window.videojs:"undefined"!==typeof b?b.videojs:null)&&b.__esModule?b:{"default":b},y=[{name:"VOD",run:function(a,b,c,d,e){return Infinity!==c?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",
run:function(a,b,c,d,e){return a.datetimeToDisplayTime&&b.dateTimeObject?{time:b.dateTimeObject.getTime()/1E3+a.datetimeToDisplayTime,segmentIndex:0}:null}},{name:"Segment",run:function(a,b,c,d,e){a=b.segments||[];c=b=null;e=e||0;for(var f=0;f<a.length;f++){var k=a[f];if(k.timeline===d&&"undefined"!==typeof k.start){var l=Math.abs(e-k.start);if(null!==c&&c<l)break;if(!b||null===c||c>=l)c=l,b={time:k.start,segmentIndex:f}}}return b}},{name:"Discontinuity",run:function(a,b,c,d,e){c=null;e=e||0;if(b.discontinuityStarts&&
b.discontinuityStarts.length){d=null;for(var f=0;f<b.discontinuityStarts.length;f++){var k=b.discontinuityStarts[f],l=a.discontinuities[b.discontinuitySequence+f+1];if(l){var t=Math.abs(e-l.time);if(null!==d&&d<t)break;if(!c||null===d||d>=t)d=t,c={time:l.time,segmentIndex:k}}}}return c}},{name:"Playlist",run:function(a,b,c,d,e){return b.syncInfo?{time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence}:null}}];e.syncPointStrategies=y;b=function(a){function b(){var a=0>=arguments.length||
void 0===arguments[0]?{}:arguments[0];if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");a:{var c=Object.getPrototypeOf(b.prototype),d="constructor";var e=this;var f=!0;for(;f;)if(null===c&&(c=Function.prototype),f=Object.getOwnPropertyDescriptor(c,d),void 0===f){c=Object.getPrototypeOf(c);if(null===c)break;f=!0}else{if("value"in f){e=f.value;break a}d=f.get;e=void 0===d?void 0:d.call(e);break a}e=void 0}e.call(this);this.inspectCache_=void 0;this.timelines=[];this.discontinuities=
[];this.datetimeToDisplayTime=null;a.debug&&(this.logger_=r["default"].log.bind(r["default"],"sync-controller ->"))}d(b,a);c(b,[{key:"getSyncPoint",value:function(a,b,c,d){a=this.runStrategies_(a,b,c,d);return a.length?this.selectSyncPoint_(a,{key:"time",value:d}):null}},{key:"getExpiredTime",value:function(a,b){if(!a||!a.segments)return null;b=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!b.length)return null;b=this.selectSyncPoint_(b,{key:"segmentIndex",value:0});0<b.segmentIndex&&(b.time*=
-1);return Math.abs(b.time+(0,q.sumDurations)(a,b.segmentIndex,0))}},{key:"runStrategies_",value:function(a,b,c,d){for(var e=[],f=0;f<y.length;f++){var k=y[f],l=k.run(this,a,b,c,d);l&&(l.strategy=k.name,e.push({strategy:k.name,syncPoint:l}),this.logger_("syncPoint found via <"+k.name+">:",l))}return e}},{key:"selectSyncPoint_",value:function(a,b){for(var c=a[0].syncPoint,d=Math.abs(a[0].syncPoint[b.key]-b.value),e=a[0].strategy,f=1;f<a.length;f++){var k=Math.abs(a[f].syncPoint[b.key]-b.value);k<d&&
(d=k,c=a[f].syncPoint,e=a[f].strategy)}this.logger_("syncPoint with strategy <"+e+"> chosen: ",c);return c}},{key:"saveExpiredSegmentInfo",value:function(a,b){for(var c=b.mediaSequence-a.mediaSequence-1;0<=c;c--){var d=a.segments[c];if(d&&"undefined"!==typeof d.start){b.syncInfo={mediaSequence:a.mediaSequence+c,time:d.start};this.logger_("playlist sync:",b.syncInfo);this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(a){!this.datetimeToDisplayTime&&a.dateTimeObject&&
(this.datetimeToDisplayTime=-(a.dateTimeObject.getTime()/1E3))}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(a){var b=a.segment,c=a.playlist,d;(d=b.map?this.probeMp4Segment_(a):this.probeTsSegment_(a))&&this.calculateSegmentTimeMapping_(a,d)&&(this.saveDiscontinuitySyncInfo_(a),c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:b.start}));return d}},{key:"probeMp4Segment_",value:function(a){var b=a.segment,c=l["default"].timescale(b.map.bytes);
c=l["default"].startTime(c,a.bytes);null!==a.timestampOffset&&(a.timestampOffset-=c);return{start:c,end:c+b.duration}}},{key:"probeTsSegment_",value:function(a){a=(0,u.inspect)(a.bytes,this.inspectCache_);var b=void 0,c=void 0;if(!a)return null;a.video&&2===a.video.length?(this.inspectCache_=a.video[1].dts,b=a.video[0].dtsTime,c=a.video[1].dtsTime):a.audio&&2===a.audio.length&&(this.inspectCache_=a.audio[1].dts,b=a.audio[0].dtsTime,c=a.audio[1].dtsTime);return{start:b,end:c,containsVideo:a.video&&
2===a.video.length,containsAudio:a.audio&&2===a.audio.length}}},{key:"timestampOffsetForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].time}},{key:"mappingForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].mapping}},{key:"calculateSegmentTimeMapping_",value:function(a,b){var c=a.segment,d=this.timelines[a.timeline];if(null!==a.timestampOffset)this.logger_("tsO:",a.timestampOffset),d={time:a.startOfSegment,
mapping:a.startOfSegment-b.start},this.timelines[a.timeline]=d,this.trigger("timestampoffset"),c.start=a.startOfSegment,c.end=b.end+d.mapping;else if(d)c.start=b.start+d.mapping,c.end=b.end+d.mapping;else return!1;return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(a){var b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts.length)for(var d=0;d<b.discontinuityStarts.length;d++){var e=b.discontinuityStarts[d],f=
b.discontinuitySequence+d+1,k=e-a.mediaIndex,l=Math.abs(k);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>l)e=0>k?c.start-(0,q.sumDurations)(b,a.mediaIndex,e):c.end+(0,q.sumDurations)(b,a.mediaIndex+1,e),this.discontinuities[f]={time:e,accuracy:l}}}},{key:"logger_",value:function(){}}]);return b}(r["default"].EventTarget);e["default"]=b}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./playlist":11,"mux.js/lib/mp4/probe":57,
"mux.js/lib/tools/ts-inspector.js":59}],19:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});e.parseCodecs=function(){var b=0>=arguments.length||void 0===arguments[0]?"":arguments[0],e={codecCount:0},c;e.codecCount=b.split(",").length;e.codecCount=e.codecCount||2;if(c=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(b))e.videoCodec=c[2],e.videoObjectTypeIndicator=c[3];e.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(b);e.audioProfile=e.audioProfile&&e.audioProfile[2];return e}},{}],
20:[function(f,b,e){(function(d){function k(a){return a&&a.__esModule?a:{"default":a}}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=f("./segment-loader");l=k(l);var u=k("undefined"!==typeof window?window.videojs:"undefined"!==typeof d?d.videojs:null);d=f("global/window");var q=k(d);d=f("videojs-contrib-media-sources/es5/remove-cues-from-track.js");var r=k(d),y=f("./bin-utils"),z=new Uint8Array(["\n","\n"].map(function(a){return a.charCodeAt(0)}));
l=function(b){function d(a){var b=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");a:{var c=Object.getPrototypeOf(d.prototype),e="constructor";var f=this;var k=!0;for(;k;)if(null===c&&(c=Function.prototype),k=Object.getOwnPropertyDescriptor(c,e),void 0===k){c=Object.getPrototypeOf(c);if(null===c)break;k=!0}else{if("value"in k){f=k.value;break a}e=k.get;f=void 0===e?void 0:e.call(f);break a}f=void 0}f.call(this,
a,b);this.subtitlesTrack_=this.mediaSource_=null}c(d,b);a(d,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return u["default"].createTimeRanges();var a=this.subtitlesTrack_.cues;return u["default"].createTimeRanges([[a[0].startTime,a[a.length-1].startTime]])}},{key:"initSegment",value:function(a){var b=1>=arguments.length||void 0===arguments[1]?!1:arguments[1];if(!a)return null;var c=(0,y.initSegmentId)(a),d=this.initSegments_[c];b&&!d&&a.bytes&&(b=
new Uint8Array(z.byteLength+a.bytes.byteLength),b.set(a.bytes),b.set(z,a.bytes.byteLength),this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:b});return d||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function(a){if("undefined"===typeof a)return this.subtitlesTrack_;this.subtitlesTrack_=
a;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_}},{key:"remove",value:function(a,b){(0,r["default"])(a,b,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var a=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var b=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(b=this.skipEmptySegments_(b))null===
this.syncController_.timestampOffsetForTimeline(b.timeline)?(this.syncController_.one("timestampoffset",function(){a.state="READY";a.paused()||a.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(b)}},{key:"skipEmptySegments_",value:function(a){for(;a&&a.segment.empty;)a=this.generateSegmentInfo_(a.playlist,a.mediaIndex+1,a.startOfSegment+a.duration,a.isSyncRequest);return a}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state=
"APPENDING";var b=this.pendingSegment_,c=b.segment;if("function"!==typeof q["default"].WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var d=function(){var b=function(){a.handleSegment_()};a.state="WAITING_ON_VTTJS";a.subtitlesTrack_.tech_.one("vttjsloaded",b);a.subtitlesTrack_.tech_.one("vttjserror",function(){a.subtitlesTrack_.tech_.off("vttjsloaded",b);a.error({message:"Error loading vtt.js"});a.state="READY";a.pause();a.trigger("error")});return{v:void 0}}();if("object"===typeof d)return d.v}c.requested=
!0;try{this.parseVTTCues_(b)}catch(H){return this.error({message:H.message}),this.state="READY",this.pause(),this.trigger("error")}this.updateTimeMapping_(b,this.syncController_.timelines[b.timeline],this.playlist_);b.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(b.byteLength=b.bytes.byteLength,this.mediaSecondsLoaded+=c.duration,b.cues.length&&this.remove(b.cues[0].endTime,b.cues[b.cues.length-1].endTime),b.cues.forEach(function(b){a.subtitlesTrack_.addCue(b)}),
this.handleUpdateEnd_())}else this.state="READY"}},{key:"parseVTTCues_",value:function(a){var b=void 0,c=!1;"function"===typeof q["default"].TextDecoder?b=new q["default"].TextDecoder("utf8"):(b=q["default"].WebVTT.StringDecoder(),c=!0);b=new q["default"].WebVTT.Parser(q["default"],q["default"].vttjs,b);a.cues=[];a.timestampmap={MPEGTS:0,LOCAL:0};b.oncue=a.cues.push.bind(a.cues);b.ontimestampmap=function(b){return a.timestampmap=b};b.onparsingerror=function(a){u["default"].log.warn("Error encountered when parsing cues: "+
a.message)};if(a.segment.map){var d=a.segment.map.bytes;c&&(d=String.fromCharCode.apply(null,d));b.parse(d)}d=a.bytes;c&&(d=String.fromCharCode.apply(null,d));b.parse(d);b.flush()}},{key:"updateTimeMapping_",value:function(a,b,c){var d=a.segment;if(b)if(a.cues.length){var e=a.timestampmap,f=e.MPEGTS/9E4-e.LOCAL+b.mapping;a.cues.forEach(function(a){a.startTime+=f;a.endTime+=f});c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:Math.min(a.cues[0].startTime,a.cues[a.cues.length-
1].startTime-d.duration)})}else d.empty=!0}}]);return d}(l["default"]);e["default"]=l;b.exports=e["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bin-utils":2,"./segment-loader":16,"global/window":32,"videojs-contrib-media-sources/es5/remove-cues-from-track.js":72}],21:[function(f,b,e){(function(d){Object.defineProperty(e,"__esModule",{value:!0});var f="undefined"!==typeof window?window.videojs:"undefined"!==typeof d?
d.videojs:null,c=f&&f.__esModule?f:{"default":f};e["default"]=function(){return function q(b,d){b=(0,f.mergeOptions)({timeout:45E3},b);var e=q.beforeRequest||c["default"].Hls.xhr.beforeRequest;e&&"function"===typeof e&&(e=e(b))&&(b=e);var k=(0,f.xhr)(b,function(b,c){var e=k.response;!b&&e&&(k.responseTime=Date.now(),k.roundTripTime=k.responseTime-k.requestTime,k.bytesReceived=e.byteLength||e.length,k.bandwidth||(k.bandwidth=Math.floor(k.bytesReceived/k.roundTripTime*8E3)));b&&"ETIMEDOUT"===b.code&&
(k.timedout=!0);b||k.aborted||200===c.statusCode||206===c.statusCode||0===c.statusCode||(b=Error("XHR Failed with a response of: "+(k&&(e||k.responseText))));d(b,k)}),l=k.abort;k.abort=function(){k.aborted=!0;return l.apply(k,arguments)};k.uri=b.uri;k.requestTime=Date.now();return k}};b.exports=e["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],22:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});var d=
function(){function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(a,c,d){c&&b(a.prototype,c);d&&b(a,d);return a}}(),k=null;f=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");if(!k){var c=[[[],[],[],[],[]],[[],[],[],[],[]]],d=c[0],e=c[1],f=d[4],y=e[4],z,p,x,t=[],B=[],C;for(z=0;256>z;z++)B[(t[z]=z<<1^283*(z>>7))^z]=z;
for(p=x=0;!f[p];p^=C||1,x=B[x]||1){var F=x^x<<1^x<<2^x<<3^x<<4;F=F>>8^F&255^99;f[p]=F;y[F]=p;var H=t[z=t[C=t[p]]];var G=16843009*H^65537*z^257*C^16843008*p;H=257*t[F]^16843008*F;for(z=0;4>z;z++)d[z][p]=H=H<<24^H>>>8,e[z][F]=G=G<<24^G>>>8}for(z=0;5>z;z++)d[z]=d[z].slice(0),e[z]=e[z].slice(0);k=c}this._tables=[[k[0][0].slice(),k[0][1].slice(),k[0][2].slice(),k[0][3].slice(),k[0][4].slice()],[k[1][0].slice(),k[1][1].slice(),k[1][2].slice(),k[1][3].slice(),k[1][4].slice()]];c=this._tables[0][4];d=this._tables[1];
p=a.length;x=1;if(4!==p&&6!==p&&8!==p)throw Error("Invalid aes key size");f=a.slice(0);y=[];this._key=[f,y];for(a=p;a<4*p+28;a++){e=f[a-1];if(0===a%p||8===p&&4===a%p)e=c[e>>>24]<<24^c[e>>16&255]<<16^c[e>>8&255]<<8^c[e&255],0===a%p&&(e=e<<8^e>>>24^x<<24,x=x<<1^283*(x>>7));f[a]=f[a-p]^e}for(p=0;a;p++,a--)e=f[p&3?a:a-4],y[p]=4>=a||4>p?e:d[0][c[e>>>24]]^d[1][c[e>>16&255]]^d[2][c[e>>8&255]]^d[3][c[e&255]]}d(b,[{key:"decrypt",value:function(a,b,c,d,e,f){var k=this._key[1];a^=k[0];d^=k[1];c^=k[2];b^=k[3];
var l=k.length/4-2,r,t=4;var q=this._tables[1];var u=q[0],y=q[1],H=q[2],G=q[3],E=q[4];for(r=0;r<l;r++){q=u[a>>>24]^y[d>>16&255]^H[c>>8&255]^G[b&255]^k[t];var K=u[d>>>24]^y[c>>16&255]^H[b>>8&255]^G[a&255]^k[t+1];var g=u[c>>>24]^y[b>>16&255]^H[a>>8&255]^G[d&255]^k[t+2];b=u[b>>>24]^y[a>>16&255]^H[d>>8&255]^G[c&255]^k[t+3];t+=4;a=q;d=K;c=g}for(r=0;4>r;r++)e[(3&-r)+f]=E[a>>>24]<<24^E[d>>16&255]<<16^E[c>>8&255]<<8^E[b&255]^k[t++],q=a,a=d,d=c,c=b,b=q}}]);return b}();e["default"]=f;b.exports=e["default"]},
{}],23:[function(f,b,e){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});var k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),c=(f=f("./stream"))&&f.__esModule?f:{"default":f};f=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");a:{var a=Object.getPrototypeOf(b.prototype),d="constructor";var e=this;var f=!0;for(;f;)if(null===a&&(a=Function.prototype),f=Object.getOwnPropertyDescriptor(a,d),void 0===f){a=Object.getPrototypeOf(a);if(null===
a)break;f=!0}else{if("value"in f){e=f.value;break a}d=f.get;e=void 0===d?void 0:d.call(e);break a}e=void 0}e.call(this,c["default"]);this.jobs=[];this.delay=1;this.timeout_=null}d(b,a);k(b,[{key:"processJob_",value:function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null}},{key:"push",value:function(a){this.jobs.push(a);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}]);return b}(c["default"]);e["default"]=
f;b.exports=e["default"]},{"./stream":26}],24:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=(b=f("./aes"))&&b.__esModule?b:{"default":b},c=(b=f("./async-stream"))&&b.__esModule?b:{"default":b},a=f("pkcs7"),l=function(a){return a<<
24|(a&65280)<<8|(a&16711680)>>8|a>>>24},u=function(a,b,c){var d=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2);b=new k["default"](Array.prototype.slice.call(b));a=new Uint8Array(a.byteLength);var e=new Int32Array(a.buffer),f;var t=c[0];var r=c[1];var q=c[2];c=c[3];for(f=0;f<d.length;f+=4){var u=l(d[f]);var y=l(d[f+1]);var G=l(d[f+2]);var E=l(d[f+3]);b.decrypt(u,y,G,E,e,f);e[f]=l(e[f]^t);e[f+1]=l(e[f+1]^r);e[f+2]=l(e[f+2]^q);e[f+3]=l(e[f+3]^c);t=u;r=y;q=G;c=E}return a};e.decrypt=u;f=function(){function b(d,
e,f,k){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var p=b.STEP,t=new Int32Array(d.buffer),r=new Uint8Array(d.byteLength);d=0;this.asyncStream_=new c["default"];this.asyncStream_.push(this.decryptChunk_(t.subarray(d,d+p),e,f,r));for(d=p;d<t.length;d+=p)f=new Uint32Array([l(t[d-4]),l(t[d-3]),l(t[d-2]),l(t[d-1])]),this.asyncStream_.push(this.decryptChunk_(t.subarray(d,d+p),e,f,r));this.asyncStream_.push(function(){k(null,(0,a.unpad)(r))})}d(b,[{key:"decryptChunk_",
value:function(a,b,c,d){return function(){var e=u(a,b,c);d.set(e,a.byteOffset)}}}],[{key:"STEP",get:function(){return 32E3}}]);return b}();e.Decrypter=f;e["default"]={Decrypter:f,decrypt:u}},{"./aes":22,"./async-stream":23,pkcs7:28}],25:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});var d=f("./decrypter");f=f("./async-stream");e["default"]={decrypt:d.decrypt,Decrypter:d.Decrypter,AsyncStream:(f&&f.__esModule?f:{"default":f})["default"]};b.exports=e["default"]},{"./async-stream":23,
"./decrypter":24}],26:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});var d=function(){function b(b,a){for(var c=0;c<a.length;c++){var d=a[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(c,a,d){a&&b(c.prototype,a);d&&b(c,d);return c}}();f=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.listeners={}}d(b,[{key:"on",value:function(b,a){this.listeners[b]||
(this.listeners[b]=[]);this.listeners[b].push(a)}},{key:"off",value:function(b,a){if(!this.listeners[b])return!1;a=this.listeners[b].indexOf(a);this.listeners[b].splice(a,1);return-1<a}},{key:"trigger",value:function(b){var a,c;if(a=this.listeners[b])if(2===arguments.length){var d=a.length;for(c=0;c<d;++c)a[c].call(this,arguments[1])}else{var e=Array.prototype.slice.call(arguments,1);d=a.length;for(c=0;c<d;++c)a[c].apply(this,e)}}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(b){this.on("data",
function(a){b.push(a)})}}]);return b}();e["default"]=f;b.exports=e["default"]},{}],27:[function(f,b,e){b.exports=function(b){var c=d[b.byteLength%16||0],a=new Uint8Array(b.byteLength+c.length);a.set(b);a.set(c,b.byteLength);return a};var d=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,
10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],28:[function(f,b,e){e.pad=f("./pad.js");e.unpad=f("./unpad.js")},{"./pad.js":27,"./unpad.js":29}],29:[function(f,b,e){b.exports=function(b){return b.subarray(0,b.byteLength-b[b.byteLength-1])}},{}],30:[function(f,b,e){},{}],31:[function(f,b,e){e="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};e="undefined"!==
typeof e?e:"undefined"!==typeof window?window:{};f=f("min-document");if("undefined"!==typeof document)var d=document;else(d=e["__GLOBAL_DOCUMENT_CACHE@4"])||(d=e["__GLOBAL_DOCUMENT_CACHE@4"]=f);b.exports=d},{"min-document":30}],32:[function(f,b,e){f="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};b.exports="undefined"!==typeof window?window:"undefined"!==typeof f?f:"undefined"!==typeof self?self:{}},{}],33:[function(f,b,e){function d(b){return b&&
b.__esModule?b:{"default":b}}e=f("./line-stream");e=d(e);var k=f("./parse-stream");k=d(k);f=f("./parser");f=d(f);b.exports={LineStream:e["default"],ParseStream:k["default"],Parser:f["default"]}},{"./line-stream":34,"./parse-stream":35,"./parser":36}],34:[function(f,b,e){function d(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});
a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}Object.defineProperty(e,"__esModule",{value:!0});var k=function(){function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(a,c,d){c&&b(a.prototype,c);d&&b(a,d);return a}}();f=f("./stream");f=function(b){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var b=(a.__proto__||
Object.getPrototypeOf(a)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.buffer="";return b}d(a,b);k(a,[{key:"push",value:function(a){this.buffer+=a;for(a=this.buffer.indexOf("\n");-1<a;a=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)}}]);return a}((f&&f.__esModule?f:{"default":f})["default"]);e["default"]=f},{"./stream":37}],
35:[function(f,b,e){function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});var k=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,e=
!1,f=void 0;try{for(var k=a[Symbol.iterator](),l;!(d=(l=k.next()).done)&&(c.push(l.value),!b||c.length!==b);d=!0);}catch(t){e=!0,f=t}finally{try{if(!d&&k["return"])k["return"]()}finally{if(e)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),c=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,
c);d&&a(b,d);return b}}();f=f("./stream");var a=function(a){a=a.split(/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/);for(var b={},c=a.length,d;c--;)""!==a[c]&&(d=/([^=]*)=(.*)/.exec(a[c]).slice(1),d[0]=d[0].replace(/^\s+|\s+$/g,""),d[1]=d[1].replace(/^\s+|\s+$/g,""),d[1]=d[1].replace(/^['"](.*)['"]$/g,"$1"),b[d[0]]=d[1]);return b};f=function(b){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var a=(e.__proto__||Object.getPrototypeOf(e)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!a||"object"!==typeof a&&"function"!==typeof a?this:a}d(e,b);c(e,[{key:"push",value:function(b){var c;b=b.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"");if(0!==b.length)if("#"!==b[0])this.trigger("data",{type:"uri",uri:b});else if(0!==b.indexOf("#EXT"))this.trigger("data",{type:"comment",text:b.slice(1)});else if(b=b.replace("\r",""),c=/^#EXTM3U/.exec(b))this.trigger("data",{type:"tag",tagType:"m3u"});else if(c=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(b))b={type:"tag",tagType:"inf"},c[1]&&(b.duration=
parseFloat(c[1])),c[2]&&(b.title=c[2]),this.trigger("data",b);else if(c=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(b))b={type:"tag",tagType:"targetduration"},c[1]&&(b.duration=parseInt(c[1],10)),this.trigger("data",b);else if(c=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(b))b={type:"tag",tagType:"totalduration"},c[1]&&(b.duration=parseInt(c[1],10)),this.trigger("data",b);else if(c=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(b))b={type:"tag",tagType:"version"},c[1]&&(b.version=parseInt(c[1],10)),this.trigger("data",
b);else if(c=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(b))b={type:"tag",tagType:"media-sequence"},c[1]&&(b.number=parseInt(c[1],10)),this.trigger("data",b);else if(c=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(b))b={type:"tag",tagType:"discontinuity-sequence"},c[1]&&(b.number=parseInt(c[1],10)),this.trigger("data",b);else if(c=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(b))b={type:"tag",tagType:"playlist-type"},c[1]&&(b.playlistType=c[1]),this.trigger("data",b);else if(c=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(b))b=
{type:"tag",tagType:"byterange"},c[1]&&(b.length=parseInt(c[1],10)),c[2]&&(b.offset=parseInt(c[2],10)),this.trigger("data",b);else if(c=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(b))b={type:"tag",tagType:"allow-cache"},c[1]&&(b.allowed=!/NO/.test(c[1])),this.trigger("data",b);else if(c=/^#EXT-X-MAP:?(.*)$/.exec(b)){b={type:"tag",tagType:"map"};if(c[1]&&(c=a(c[1]),c.URI&&(b.uri=c.URI),c.BYTERANGE)){c=c.BYTERANGE.split("@");var d=k(c,2);c=d[0];d=d[1];b.byterange={};c&&(b.byterange.length=parseInt(c,10));
d&&(b.byterange.offset=parseInt(d,10))}this.trigger("data",b)}else(c=/^#EXT-X-STREAM-INF:?(.*)$/.exec(b))?(b={type:"tag",tagType:"stream-inf"},c[1]&&(b.attributes=a(c[1]),b.attributes.RESOLUTION&&(c=b.attributes.RESOLUTION.split("x"),d={},c[0]&&(d.width=parseInt(c[0],10)),c[1]&&(d.height=parseInt(c[1],10)),b.attributes.RESOLUTION=d),b.attributes.BANDWIDTH&&(b.attributes.BANDWIDTH=parseInt(b.attributes.BANDWIDTH,10)),b.attributes["PROGRAM-ID"]&&(b.attributes["PROGRAM-ID"]=parseInt(b.attributes["PROGRAM-ID"],
10))),this.trigger("data",b)):(c=/^#EXT-X-MEDIA:?(.*)$/.exec(b))?(b={type:"tag",tagType:"media"},c[1]&&(b.attributes=a(c[1])),this.trigger("data",b)):(c=/^#EXT-X-ENDLIST/.exec(b))?this.trigger("data",{type:"tag",tagType:"endlist"}):(c=/^#EXT-X-DISCONTINUITY/.exec(b))?this.trigger("data",{type:"tag",tagType:"discontinuity"}):(c=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(b))?(b={type:"tag",tagType:"program-date-time"},c[1]&&(b.dateTimeString=c[1],b.dateTimeObject=new Date(c[1])),this.trigger("data",b)):
(c=/^#EXT-X-KEY:?(.*)$/.exec(b))?(b={type:"tag",tagType:"key"},c[1]&&(b.attributes=a(c[1]),b.attributes.IV&&("0x"===b.attributes.IV.substring(0,2).toLowerCase()&&(b.attributes.IV=b.attributes.IV.substring(2)),b.attributes.IV=b.attributes.IV.match(/.{8}/g),b.attributes.IV[0]=parseInt(b.attributes.IV[0],16),b.attributes.IV[1]=parseInt(b.attributes.IV[1],16),b.attributes.IV[2]=parseInt(b.attributes.IV[2],16),b.attributes.IV[3]=parseInt(b.attributes.IV[3],16),b.attributes.IV=new Uint32Array(b.attributes.IV))),
this.trigger("data",b)):(c=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(b))?(b={type:"tag",tagType:"cue-out-cont"},b.data=c[1]?c[1]:"",this.trigger("data",b)):(c=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(b))?(b={type:"tag",tagType:"cue-out"},b.data=c[1]?c[1]:"",this.trigger("data",b)):(c=/^#EXT-X-CUE-IN:?(.*)?$/.exec(b))?(b={type:"tag",tagType:"cue-in"},b.data=c[1]?c[1]:"",this.trigger("data",b)):this.trigger("data",{type:"tag",data:b.slice(4)})}}]);return e}((f&&f.__esModule?f:{"default":f})["default"]);e["default"]=
f},{"./stream":37}],36:[function(f,b,e){function d(a){return a&&a.__esModule?a:{"default":a}}function k(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,
c);d&&a(b,d);return b}}();b=f("./stream");b=d(b);var u=f("./line-stream"),q=d(u);f=f("./parse-stream");var r=d(f);f=function(b){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var b=k(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));b.lineStream=new q["default"];b.parseStream=new r["default"];b.lineStream.pipe(b.parseStream);var c=[],e={},f=void 0,l=void 0,u=function(){},z={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},y=0;b.manifest={allowCache:!0,
discontinuityStarts:[],segments:[]};b.parseStream.on("data",function(d){var k=void 0,g=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=d.allowed;"allowed"in d||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var a={};"length"in d&&(e.byterange=a,a.length=d.length,"offset"in d||(this.trigger("info",{message:"defaulting offset to zero"}),d.offset=0));"offset"in d&&(e.byterange=a,a.offset=d.offset)},endlist:function(){this.manifest.endList=
!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));0<d.duration&&(e.duration=d.duration);0===d.duration&&(e.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=c},key:function(){d.attributes?
"NONE"===d.attributes.METHOD?l=null:d.attributes.URI?(d.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:d.attributes.METHOD||"AES-128",uri:d.attributes.URI},"undefined"!==typeof d.attributes.IV&&(l.iv=d.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(d.number)?this.manifest.mediaSequence=d.number:
this.trigger("warn",{message:"ignoring invalid media sequence: "+d.number})},"discontinuity-sequence":function(){isFinite(d.number)?y=this.manifest.discontinuitySequence=d.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+d.number})},"playlist-type":function(){/VOD|EVENT/.test(d.playlistType)?this.manifest.playlistType=d.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+d.playlist})},map:function(){f={};d.uri&&(f.uri=d.uri);d.byterange&&(f.byterange=
d.byterange)},"stream-inf":function(){this.manifest.playlists=c;this.manifest.mediaGroups=this.manifest.mediaGroups||z;d.attributes?(e.attributes||(e.attributes={}),a(e.attributes,d.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||z;if(d.attributes&&d.attributes.TYPE&&d.attributes["GROUP-ID"]&&d.attributes.NAME){var a=this.manifest.mediaGroups[d.attributes.TYPE];a[d.attributes["GROUP-ID"]]=a[d.attributes["GROUP-ID"]]||
{};k=a[d.attributes["GROUP-ID"]];g={"default":/yes/i.test(d.attributes.DEFAULT)};g.autoselect=g["default"]?!0:/yes/i.test(d.attributes.AUTOSELECT);d.attributes.LANGUAGE&&(g.language=d.attributes.LANGUAGE);d.attributes.URI&&(g.uri=d.attributes.URI);d.attributes["INSTREAM-ID"]&&(g.instreamId=d.attributes["INSTREAM-ID"]);d.attributes.CHARACTERISTICS&&(g.characteristics=d.attributes.CHARACTERISTICS);d.attributes.FORCED&&(g.forced=/yes/i.test(d.attributes.FORCED));k[d.attributes.NAME]=g}else this.trigger("warn",
{message:"ignoring incomplete or missing media group"})},discontinuity:function(){y+=1;e.discontinuity=!0;this.manifest.discontinuityStarts.push(c.length)},"program-date-time":function(){this.manifest.dateTimeString=d.dateTimeString;this.manifest.dateTimeObject=d.dateTimeObject},targetduration:function(){!isFinite(d.duration)||0>d.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+d.duration}):this.manifest.targetDuration=d.duration},totalduration:function(){!isFinite(d.duration)||
0>d.duration?this.trigger("warn",{message:"ignoring invalid total duration: "+d.duration}):this.manifest.totalDuration=d.duration},"cue-out":function(){e.cueOut=d.data},"cue-out-cont":function(){e.cueOutCont=d.data},"cue-in":function(){e.cueIn=d.data}}[d.tagType]||u).call(b)},uri:function(){e.uri=d.uri;c.push(e);!this.manifest.targetDuration||"duration"in e||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),e.duration=this.manifest.targetDuration);l&&(e.key=l);e.timeline=
y;f&&(e.map=f);e={}},comment:function(){}})[d.type].call(b)});return b}c(d,b);l(d,[{key:"push",value:function(a){this.lineStream.push(a)}},{key:"end",value:function(){this.lineStream.push("\n")}}]);return d}(b["default"]);e["default"]=f},{"./line-stream":34,"./parse-stream":35,"./stream":37}],37:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});var d=function(){function b(b,a){for(var c=0;c<a.length;c++){var d=a[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=
!0);Object.defineProperty(b,d.key,d)}}return function(c,a,d){a&&b(c.prototype,a);d&&b(c,d);return c}}();f=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.listeners={}}d(b,[{key:"on",value:function(b,a){this.listeners[b]||(this.listeners[b]=[]);this.listeners[b].push(a)}},{key:"off",value:function(b,a){if(!this.listeners[b])return!1;a=this.listeners[b].indexOf(a);this.listeners[b].splice(a,1);return-1<a}},{key:"trigger",value:function(b){var a=
this.listeners[b],c;if(a)if(2===arguments.length){var d=a.length;for(c=0;c<d;++c)a[c].call(this,arguments[1])}else{var e=Array.prototype.slice.call(arguments,1);d=a.length;for(c=0;c<d;++c)a[c].apply(this,e)}}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(b){this.on("data",function(a){b.push(a)})}}]);return b}();e["default"]=f},{}],38:[function(f,b,e){f=f("../utils/stream.js");var d=function(){var b=new Uint8Array,c=0;d.prototype.init.call(this);this.setTimestamp=
function(a){c=a};this.parseId3TagSize=function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(a[b+5]&16)>>4?c+20:c+10};this.parseAdtsSize=function(a,b){return a[b+3]&6144|a[b+4]<<3|(a[b+5]&224)>>5};this.push=function(a){var d=0;if(b.length){var e=b.length;b=new Uint8Array(a.byteLength+e);b.set(b.subarray(0,e));b.set(a,e)}else b=a;for(;3<=b.length-d;)if(73===b[d]&&68===b[d+1]&&51===b[d+2]){if(10>b.length-d)break;a=this.parseId3TagSize(b,d);if(a>b.length)break;e={type:"timed-metadata",data:b.subarray(d,
d+a)};this.trigger("data",e);d+=a}else if(b[d]&1&&240===(b[d+1]&240)){if(7>b.length-d)break;a=this.parseAdtsSize(b,d);if(a>b.length)break;e={type:"audio",data:b.subarray(d,d+a),pts:c,dts:c};this.trigger("data",e);d+=a}else d++;b=0<b.length-d?b.subarray(d):new Uint8Array}};d.prototype=new f;b.exports=d},{"../utils/stream.js":62}],39:[function(f,b,e){var d=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],k=function(b){return b[0]<<21|b[1]<<14|b[2]<<7|b[3]};b.exports={parseId3TagSize:function(b,
a){var c=b[a+6]<<21|b[a+7]<<14|b[a+8]<<7|b[a+9];return(b[a+5]&16)>>4?c+20:c+10},parseAdtsSize:function(b,a){return b[a+3]&6144|b[a+4]<<3|(b[a+5]&224)>>5},parseType:function(b,a){return 73===b[a]&&68===b[a+1]&&51===b[a+2]?"timed-metadata":b[a]&1&&240===(b[a+1]&240)?"audio":null},parseSampleRate:function(b){for(var a=0;a+5<b.length;)if(255!==b[a]||240!==(b[a+1]&246))a++;else return d[(b[a+2]&60)>>>2];return null},parseAacTimestamp:function(b){var a=10;b[5]&64&&(a=a+4+k(b.subarray(10,14)));do{var c=
k(b.subarray(a+4,a+8));if(1>c)break;var d=String.fromCharCode(b[a],b[a+1],b[a+2],b[a+3]);if("PRIV"===d){d=b.subarray(a+10,a+c+10);for(var e=0;e<d.byteLength;e++)if(0===d[e]){var f=unescape,y,z=d,p=e,x="";for(y=0;y<p;y++)x+="%"+("00"+z[y].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===f(x))return b=d.subarray(e+1),a=(b[3]&1)<<30|b[4]<<22|b[5]<<14|b[6]<<6|b[7]>>>2,a*=4,a+=b[7]&3;break}}a+=10;a+=c}while(a<b.byteLength);return null}}},{}],40:[function(f,b,e){f=f("../utils/stream.js");
var d=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var k=function(){var b;k.prototype.init.call(this);this.push=function(a){var c=0,e=0;if("audio"===a.type){if(b){var f=b;b=new Uint8Array(f.byteLength+a.data.byteLength);b.set(f);b.set(a.data,f.byteLength)}else b=a.data;for(;c+5<b.length;)if(255!==b[c]||240!==(b[c+1]&246))c++;else{f=2*(~b[c+1]&1);var k=(b[c+3]&3)<<11|b[c+4]<<3|(b[c+5]&224)>>5;var y=1024*((b[c+6]&3)+1);var z=9E4*y/d[(b[c+2]&60)>>>2];k=c+k;if(b.byteLength<k)break;
this.trigger("data",{pts:a.pts+e*z,dts:a.dts+e*z,sampleCount:y,audioobjecttype:(b[c+2]>>>6&3)+1,channelcount:(b[c+2]&1)<<2|(b[c+3]&192)>>>6,samplerate:d[(b[c+2]&60)>>>2],samplingfrequencyindex:(b[c+2]&60)>>>2,samplesize:16,data:b.subarray(c+7+f,k)});if(b.byteLength===k){b=void 0;break}e++;b=b.subarray(k)}}};this.flush=function(){this.trigger("done")}};k.prototype=new f;b.exports=k},{"../utils/stream.js":62}],41:[function(f,b,e){e=f("../utils/stream.js");var d=f("../utils/exp-golomb.js");var k=function(){var a=
0,b,c;k.prototype.init.call(this);this.push=function(d){if(c){var e=new Uint8Array(c.byteLength+d.data.byteLength);e.set(c);e.set(d.data,c.byteLength);c=e}else c=d.data;for(;a<c.byteLength-3;a++)if(1===c[a+2]){b=a+5;break}for(;b<c.byteLength;)switch(c[b]){case 0:if(0!==c[b-1]){b+=2;break}else if(0!==c[b-2]){b++;break}a+3!==b-2&&this.trigger("data",c.subarray(a+3,b-2));do b++;while(1!==c[b]&&b<c.length);a=b-2;b+=3;break;case 1:if(0!==c[b-1]||0!==c[b-2]){b+=3;break}this.trigger("data",c.subarray(a+
3,b-2));a=b-2;b+=3;break;default:b+=3}c=c.subarray(a);b-=a;a=0};this.flush=function(){c&&3<c.byteLength&&this.trigger("data",c.subarray(a+3));c=null;a=0;this.trigger("done")}};k.prototype=new e;var c={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var a=function(){var b=new k,e,f,r;a.prototype.init.call(this);var y=this;this.push=function(a){"video"===a.type&&(e=a.trackId,f=a.pts,r=a.dts,b.push(a))};b.on("data",function(a){var b={trackId:e,pts:f,dts:r,data:a};switch(a[0]&
31){case 5:b.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:b.nalUnitType="sei_rbsp";b.escapedRBSP=p(a.subarray(1));break;case 7:b.nalUnitType="seq_parameter_set_rbsp";b.escapedRBSP=p(a.subarray(1));b.config=x(b.escapedRBSP);break;case 8:b.nalUnitType="pic_parameter_set_rbsp";break;case 9:b.nalUnitType="access_unit_delimiter_rbsp"}y.trigger("data",b)});b.on("done",function(){y.trigger("done")});this.flush=function(){b.flush()};var z=function(a,b){var c=8,d=8,e;for(e=0;e<a;e++)0!==
d&&(d=b.readExpGolomb(),d=(c+d+256)%256),c=0===d?c:d};var p=function(a){for(var b=a.byteLength,c=[],d=1,e;d<b-2;)0===a[d]&&0===a[d+1]&&3===a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;b-=c.length;e=new Uint8Array(b);var f=0;for(d=0;d<b;f++,d++)f===c[0]&&(f++,c.shift()),e[d]=a[f];return e};var x=function(a){var b=0,e=0,f=0,k=0,l=1;a=new d(a);var t=a.readUnsignedByte();var p=a.readUnsignedByte();var g=a.readUnsignedByte();a.skipUnsignedExpGolomb();if(c[t]){var m=a.readUnsignedExpGolomb();
3===m&&a.skipBits(1);a.skipUnsignedExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);if(a.readBoolean()){var r=3!==m?8:12;for(m=0;m<r;m++)a.readBoolean()&&(6>m?z(16,a):z(64,a))}}a.skipUnsignedExpGolomb();m=a.readUnsignedExpGolomb();if(0===m)a.readUnsignedExpGolomb();else if(1===m)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),r=a.readUnsignedExpGolomb(),m=0;m<r;m++)a.skipExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);m=a.readUnsignedExpGolomb();r=a.readUnsignedExpGolomb();var u=a.readBits(1);
0===u&&a.skipBits(1);a.skipBits(1);a.readBoolean()&&(b=a.readUnsignedExpGolomb(),e=a.readUnsignedExpGolomb(),f=a.readUnsignedExpGolomb(),k=a.readUnsignedExpGolomb());if(a.readBoolean()&&a.readBoolean()){var q=a.readUnsignedByte();switch(q){case 1:var x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=
[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:x=[a.readUnsignedByte()<<8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}x&&(l=x[0]/x[1])}return{profileIdc:t,levelIdc:g,profileCompatibility:p,width:Math.ceil((16*(m+1)-2*b-2*e)*l),height:(2-u)*(r+1)*16-2*f-2*k}}};a.prototype=new e;b.exports={H264Stream:a,NalByteStream:k}},{"../utils/exp-golomb.js":61,"../utils/stream.js":62}],42:[function(f,b,e){f=[33,16,5,32,164,
27];e=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var d=function(b){for(var c=[];b--;)c.push(0);return c};f={96E3:[f,[227,64],d(154),[56]],88200:[f,[231],d(170),[56]],64E3:[f,[248,192],d(240),[56]],48E3:[f,[255,192],d(268),[55,148,128],d(54),[112]],44100:[f,[255,192],d(268),[55,163,128],d(84),[112]],32E3:[f,[255,192],d(268),[55,234],d(226),[112]],24E3:[f,[255,192],d(268),[55,255,128],d(268),[111,112],d(126),[224]],16E3:[f,[255,192],d(268),[55,255,128],d(268),[111,255],d(269),[223,108],d(195),[1,192]],
12E3:[e,d(268),[3,127,248],d(268),[6,255,240],d(268),[13,255,224],d(268),[27,253,128],d(259),[56]],11025:[e,d(268),[3,127,248],d(268),[6,255,240],d(268),[13,255,224],d(268),[27,255,192],d(268),[55,175,128],d(108),[112]],8E3:[e,d(268),[3,121,16],d(47),[7]]};b.exports=function(b){return Object.keys(b).reduce(function(c,a){c[a]=new Uint8Array(b[a].reduce(function(a,b){return a.concat(b)},[]));return c},{})}(f)},{}],43:[function(f,b,e){f=f("../utils/stream.js");var d=function(b){this.numberOfTracks=0;
this.metadataStream=b.metadataStream;this.videoTags=[];this.audioTags=[];this.audioTrack=this.videoTrack=null;this.pendingCaptions=[];this.pendingMetadata=[];this.processedTracks=this.pendingTracks=0;d.prototype.init.call(this);this.push=function(b){if(b.text)return this.pendingCaptions.push(b);if(b.frames)return this.pendingMetadata.push(b);"video"===b.track.type&&(this.videoTrack=b.track,this.videoTags=b.tags,this.pendingTracks++);"audio"===b.track.type&&(this.audioTrack=b.track,this.audioTags=
b.tags,this.pendingTracks++)}};d.prototype=new f;d.prototype.flush=function(b){var c={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks&&("VideoSegmentStream"!==b&&"AudioSegmentStream"!==b||0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks)))return;this.processedTracks+=this.pendingTracks;this.pendingTracks=0;if(!(this.processedTracks<this.numberOfTracks)){if(this.videoTrack)var a=this.videoTrack.timelineStartInfo.pts;
else this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts);c.tags.videoTags=this.videoTags;c.tags.audioTags=this.audioTags;for(b=0;b<this.pendingCaptions.length;b++){var d=this.pendingCaptions[b];d.startTime=d.startPts-a;d.startTime/=9E4;d.endTime=d.endPts-a;d.endTime/=9E4;c.captionStreams[d.stream]=!0;c.captions.push(d)}for(b=0;b<this.pendingMetadata.length;b++)d=this.pendingMetadata[b],d.cueTime=d.pts-a,d.cueTime/=9E4,c.metadata.push(d);c.metadata.dispatchType=this.metadataStream.dispatchType;
this.audioTrack=this.videoTrack=null;this.videoTags=[];this.audioTags=[];this.pendingCaptions.length=0;this.processedTracks=this.pendingTracks=this.pendingMetadata.length=0;this.trigger("data",c);this.trigger("done")}};b.exports=d},{"../utils/stream.js":62}],44:[function(f,b,e){var d=f("./flv-tag.js");b.exports=function(b,c,a){var e=new Uint8Array(9),f=new DataView(e.buffer);b=b||0;c=void 0===c?!0:c;a=void 0===a?!0:a;f.setUint8(0,70);f.setUint8(1,76);f.setUint8(2,86);f.setUint8(3,1);f.setUint8(4,
(c?4:0)|(a?1:0));f.setUint32(5,e.byteLength);if(0>=b)return b=new Uint8Array(e.byteLength+4),b.set(e),b.set([0,0,0,0],e.byteLength),b;c=new d(d.METADATA_TAG);c.pts=c.dts=0;c.writeMetaDataDouble("duration",b);c=c.finalize().length;b=new Uint8Array(e.byteLength+c);b.set(e);b.set(f.byteLength,c);return b}},{"./flv-tag.js":45}],45:[function(f,b,e){var d=function(b,c){var a=0,e=16384,f=function(a,b){b=a.position+b;b<a.bytes.byteLength||(b=new Uint8Array(2*b),b.set(a.bytes.subarray(0,a.position),0),a.bytes=
b,a.view=new DataView(a.bytes.buffer))},k=d.widthBytes||new Uint8Array(5),r=d.heightBytes||new Uint8Array(6),y=d.videocodecidBytes||new Uint8Array(12),z;if(!d.widthBytes){for(z=0;5>z;z++)k[z]="width".charCodeAt(z);for(z=0;6>z;z++)r[z]="height".charCodeAt(z);for(z=0;12>z;z++)y[z]="videocodecid".charCodeAt(z);d.widthBytes=k;d.heightBytes=r;d.videocodecidBytes=y}this.keyFrame=!1;switch(b){case d.VIDEO_TAG:this.length=16;e*=6;break;case d.AUDIO_TAG:this.length=13;this.keyFrame=!0;break;case d.METADATA_TAG:this.length=
29;this.keyFrame=!0;break;default:throw Error("Unknown FLV tag type");}this.bytes=new Uint8Array(e);this.view=new DataView(this.bytes.buffer);this.bytes[0]=b;this.position=this.length;this.keyFrame=c;this.dts=this.pts=0;this.writeBytes=function(a,b,c){b=b||0;c=c||a.byteLength;var d=b+c;f(this,c);this.bytes.set(a.subarray(b,d),this.position);this.position+=c;this.length=Math.max(this.length,this.position)};this.writeByte=function(a){f(this,1);this.bytes[this.position]=a;this.position++;this.length=
Math.max(this.length,this.position)};this.writeShort=function(a){f(this,2);this.view.setUint16(this.position,a);this.position+=2;this.length=Math.max(this.length,this.position)};this.negIndex=function(a){return this.bytes[this.length-a]};this.nalUnitSize=function(){return 0===a?0:this.length-(a+4)};this.startNalUnit=function(){if(0<a)throw Error("Attempted to create new NAL wihout closing the old one");a=this.length;this.position=this.length+=4};this.endNalUnit=function(b){if(this.length===a+4)this.length-=
4;else if(0<a){var c=a+4;var d=this.length-c;this.position=a;this.view.setUint32(this.position,d);this.position=this.length;b&&b.push(this.bytes.subarray(c,c+d))}a=0};this.writeMetaDataDouble=function(b,c){var d;f(this,2+b.length+9);this.view.setUint16(this.position,b.length);this.position+=2;if("width"===b)this.bytes.set(k,this.position),this.position+=5;else if("height"===b)this.bytes.set(r,this.position),this.position+=6;else if("videocodecid"===b)this.bytes.set(y,this.position),this.position+=
12;else for(d=0;d<b.length;d++)this.bytes[this.position]=b.charCodeAt(d),this.position++;this.position++;this.view.setFloat64(this.position,c);this.position+=8;this.length=Math.max(this.length,this.position);++a};this.writeMetaDataBoolean=function(b,c){var d;f(this,2);this.view.setUint16(this.position,b.length);this.position+=2;for(d=0;d<b.length;d++)f(this,1),this.bytes[this.position]=b.charCodeAt(d),this.position++;f(this,2);this.view.setUint8(this.position,1);this.position++;this.view.setUint8(this.position,
c?1:0);this.position++;this.length=Math.max(this.length,this.position);++a};this.finalize=function(){switch(this.bytes[0]){case d.VIDEO_TAG:this.bytes[11]=(this.keyFrame||c?16:32)|7;this.bytes[12]=c?0:1;var b=this.pts-this.dts;this.bytes[13]=(b&16711680)>>>16;this.bytes[14]=(b&65280)>>>8;this.bytes[15]=(b&255)>>>0;break;case d.AUDIO_TAG:this.bytes[11]=175;this.bytes[12]=c?0:1;break;case d.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,
10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,a),this.position=this.length,this.bytes.set([0,0,9],this.position),this.length=this.position+=3}b=this.length-11;this.bytes[1]=(b&16711680)>>>16;this.bytes[2]=(b&65280)>>>8;this.bytes[3]=(b&255)>>>0;this.bytes[4]=(this.dts&16711680)>>>16;this.bytes[5]=(this.dts&65280)>>>8;this.bytes[6]=(this.dts&255)>>>0;this.bytes[7]=
(this.dts&4278190080)>>>24;this.bytes[8]=0;this.bytes[9]=0;this.bytes[10]=0;f(this,4);this.view.setUint32(this.length,this.length);this.length+=4;this.position+=4;this.bytes=this.bytes.subarray(0,this.length);this.frameTime=d.frameTime(this.bytes);return this}};d.AUDIO_TAG=8;d.VIDEO_TAG=9;d.METADATA_TAG=18;d.isAudioFrame=function(b){return d.AUDIO_TAG===b[0]};d.isVideoFrame=function(b){return d.VIDEO_TAG===b[0]};d.isMetaData=function(b){return d.METADATA_TAG===b[0]};d.isKeyFrame=function(b){return d.isVideoFrame(b)?
23===b[11]:d.isAudioFrame(b)||d.isMetaData(b)?!0:!1};d.frameTime=function(b){var c=b[4]<<16;c|=b[5]<<8;c|=b[6]<<0;return c|=b[7]<<24};b.exports=d},{}],46:[function(f,b,e){b.exports={tag:f("./flv-tag"),Transmuxer:f("./transmuxer"),getFlvHeader:f("./flv-header")}},{"./flv-header":44,"./flv-tag":45,"./transmuxer":48}],47:[function(f,b,e){b.exports=function(){var b=this;this.list=[];this.push=function(b){this.list.push({bytes:b.bytes,dts:b.dts,pts:b.pts,keyFrame:b.keyFrame,metaDataTag:b.metaDataTag})};
Object.defineProperty(this,"length",{get:function(){return b.list.length}})}},{}],48:[function(f,b,e){e=f("../utils/stream.js");var d=f("./flv-tag.js"),k=f("../m2ts/m2ts.js"),c=f("../codecs/adts.js"),a=f("../codecs/h264").H264Stream,l=f("./coalesce-stream.js"),u=f("./tag-list.js");var q=function(a,b){"number"===typeof b.pts&&(a.timelineStartInfo.pts=void 0===a.timelineStartInfo.pts?b.pts:Math.min(a.timelineStartInfo.pts,b.pts));"number"===typeof b.dts&&(a.timelineStartInfo.dts=void 0===a.timelineStartInfo.dts?
b.dts:Math.min(a.timelineStartInfo.dts,b.dts))};var r=function(a,b){var c=new d(d.METADATA_TAG);c.dts=b;c.pts=b;c.writeMetaDataDouble("videocodecid",7);c.writeMetaDataDouble("width",a.width);c.writeMetaDataDouble("height",a.height);return c};var y=function(a,b){var c=new d(d.VIDEO_TAG,!0);c.dts=b;c.pts=b;c.writeByte(1);c.writeByte(a.profileIdc);c.writeByte(a.profileCompatibility);c.writeByte(a.levelIdc);c.writeByte(255);c.writeByte(225);c.writeShort(a.sps[0].length);c.writeBytes(a.sps[0]);c.writeByte(a.pps.length);
for(b=0;b<a.pps.length;++b)c.writeShort(a.pps[b].length),c.writeBytes(a.pps[b]);return c};var z=function(a){var b=[],c=[],e;z.prototype.init.call(this);this.push=function(c){q(a,c);a&&(a.audioobjecttype=c.audioobjecttype,a.channelcount=c.channelcount,a.samplerate=c.samplerate,a.samplingfrequencyindex=c.samplingfrequencyindex,a.samplesize=c.samplesize,a.extraData=a.audioobjecttype<<11|a.samplingfrequencyindex<<7|a.channelcount<<3);c.pts=Math.round(c.pts/90);c.dts=Math.round(c.dts/90);b.push(c)};this.flush=
function(){var f,k=new u;if(0!==b.length){for(f=-Infinity;b.length;){var l=b.shift();c.length&&l.pts>=c[0]&&(f=c.shift(),this.writeMetaDataTags(k,f));if(a.extraData!==e||1E3<=l.pts-f)this.writeMetaDataTags(k,l.pts),e=a.extraData,f=l.pts;var t=new d(d.AUDIO_TAG);t.pts=l.pts;t.dts=l.dts;t.writeBytes(l.data);k.push(t.finalize())}c.length=0;e=null;this.trigger("data",{track:a,tags:k.list})}this.trigger("done","AudioSegmentStream")};this.writeMetaDataTags=function(b,c){var e=new d(d.METADATA_TAG);e.pts=
c;e.dts=c;e.writeMetaDataDouble("audiocodecid",10);e.writeMetaDataBoolean("stereo",2===a.channelcount);e.writeMetaDataDouble("audiosamplerate",a.samplerate);e.writeMetaDataDouble("audiosamplesize",16);b.push(e.finalize());e=new d(d.AUDIO_TAG,!0);e.pts=c;e.dts=c;e.view.setUint16(e.position,a.extraData);e.position+=2;e.length=Math.max(e.length,e.position);b.push(e.finalize())};this.onVideoKeyFrame=function(a){c.push(a)}};z.prototype=new e;var p=function(a){var b=[],c,e;p.prototype.init.call(this);this.finishFrame=
function(b,d){if(d){if(c&&a&&a.newMetadata&&(d.keyFrame||0===b.length)){var f=r(c,d.dts).finalize(),k=y(a,d.dts).finalize();f.metaDataTag=k.metaDataTag=!0;b.push(f);b.push(k);a.newMetadata=!1;this.trigger("keyframe",d.dts)}d.endNalUnit();b.push(d.finalize());e=null}};this.push=function(c){q(a,c);c.pts=Math.round(c.pts/90);c.dts=Math.round(c.dts/90);b.push(c)};this.flush=function(){for(var f,k=new u;b.length&&"access_unit_delimiter_rbsp"!==b[0].nalUnitType;)b.shift();if(0!==b.length){for(;b.length;)f=
b.shift(),"seq_parameter_set_rbsp"===f.nalUnitType?(a.newMetadata=!0,c=f.config,a.width=c.width,a.height=c.height,a.sps=[f.data],a.profileIdc=c.profileIdc,a.levelIdc=c.levelIdc,a.profileCompatibility=c.profileCompatibility,e.endNalUnit()):"pic_parameter_set_rbsp"===f.nalUnitType?(a.newMetadata=!0,a.pps=[f.data],e.endNalUnit()):"access_unit_delimiter_rbsp"===f.nalUnitType?(e&&this.finishFrame(k,e),e=new d(d.VIDEO_TAG),e.pts=f.pts,e.dts=f.dts):("slice_layer_without_partitioning_rbsp_idr"===f.nalUnitType&&
(e.keyFrame=!0),e.endNalUnit()),e.startNalUnit(),e.writeBytes(f.data);e&&this.finishFrame(k,e);this.trigger("data",{track:a,tags:k.list})}this.trigger("done","VideoSegmentStream")}};p.prototype=new e;var x=function(b){var d=this,e,f;x.prototype.init.call(this);b=b||{};this.metadataStream=new k.MetadataStream;b.metadataStream=this.metadataStream;var t=new k.TransportPacketStream;var r=new k.TransportParseStream;var u=new k.ElementaryStream;var q=new k.TimestampRolloverStream("video");var g=new k.TimestampRolloverStream("audio");
var m=new k.TimestampRolloverStream("timed-metadata");var y=new c;var M=new a;var L=new l(b);t.pipe(r).pipe(u);u.pipe(q).pipe(M);u.pipe(g).pipe(y);u.pipe(m).pipe(this.metadataStream).pipe(L);var Q=new k.CaptionStream;M.pipe(Q).pipe(L);u.on("data",function(a){var b,c,d;if("metadata"===a.type){for(b=a.tracks.length;b--;)"video"===a.tracks[b].type?c=a.tracks[b]:"audio"===a.tracks[b].type&&(d=a.tracks[b]);c&&!e&&(L.numberOfTracks++,e=new p(c),M.pipe(e).pipe(L));if(d&&!f&&(L.numberOfTracks++,f=new z(d),
y.pipe(f).pipe(L),e))e.on("keyframe",f.onVideoKeyFrame)}});this.push=function(a){t.push(a)};this.flush=function(){t.flush()};this.resetCaptions=function(){Q.reset()};L.on("data",function(a){d.trigger("data",a)});L.on("done",function(){d.trigger("done")})};x.prototype=new e;b.exports=x},{"../codecs/adts.js":40,"../codecs/h264":41,"../m2ts/m2ts.js":50,"../utils/stream.js":62,"./coalesce-stream.js":43,"./flv-tag.js":45,"./tag-list.js":47}],49:[function(f,b,e){f=f("../utils/stream");var d=function(a,
b){var c=[],d;if(!(b[0]&64))return c;var e=b[0]&31;for(d=0;d<e;d++){var f=3*d;var k={type:b[f+2]&3,pts:a};b[f+2]&4&&(k.ccData=b[f+3]<<8|b[f+4],c.push(k))}return c},k=function(){k.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new q(0,0),new q(0,1),new q(1,0),new q(1,1)];this.reset();this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data"));a.on("done",this.trigger.bind(this,"done"))},this)};k.prototype=new f;k.prototype.push=function(a){if("sei_rbsp"===a.nalUnitType){var b=
a.escapedRBSP;for(var c=0,e={payloadType:-1,payloadSize:0},f=0,k=0;c<b.byteLength&&128!==b[c];){for(;255===b[c];)f+=255,c++;for(f+=b[c++];255===b[c];)k+=255,c++;k+=b[c++];if(!e.payload&&4===f){e.payloadType=f;e.payloadSize=k;e.payload=b.subarray(c,c+k);break}c+=k;k=f=0}4===e.payloadType&&(b=181!==e.payload[0]||49!==(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1))&&(a.dts<
this.latestDts_?this.ignoreNextEqualDts_=!0:a.dts===this.latestDts_&&this.ignoreNextEqualDts_?this.ignoreNextEqualDts_=!1:(this.captionPackets_=this.captionPackets_.concat(d(a.pts,b)),this.latestDts_=a.dts))}};k.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){2>a.type&&this.dispatchCea608Packet(a)},
this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(a){a.flush()},this)):this.ccStreams_.forEach(function(a){a.flush()},this)};k.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(a){a.reset()})};k.prototype.dispatchCea608Packet=function(a){this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&
this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};k.prototype.setsChannel1Active=function(a){return 4096===(a.ccData&30720)};k.prototype.setsChannel2Active=function(a){return 6144===(a.ccData&30720)};var c={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,
553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},a=function(a){if(null===a)return"";a=c[a]||a;return String.fromCharCode(a)},
l=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],u=function(){for(var a=[],b=15;b--;)a.push("");return a},q=function(b,c){q.prototype.init.call(this);this.field_=b||0;this.dataChannel_=c||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(b){var c=b.ccData&32639;if(c===this.lastControlCode_)this.lastControlCode_=null;else{4096===(c&61440)?this.lastControlCode_=c:c!==this.PADDING_&&(this.lastControlCode_=null);
var d=c>>>8;var e=c&255;c!==this.PADDING_&&(c===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":c===this.END_OF_CAPTION_?(this.clearFormatting(b.pts),this.flushDisplayed(b.pts),e=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=e,this.startPts_=b.pts):c===this.ROLL_UP_2_ROWS_?(this.topRow_=13,this.mode_="rollUp"):c===this.ROLL_UP_3_ROWS_?(this.topRow_=12,this.mode_="rollUp"):c===this.ROLL_UP_4_ROWS_?(this.topRow_=11,this.mode_="rollUp"):c===this.CARRIAGE_RETURN_?(this.clearFormatting(b.pts),
this.flushDisplayed(b.pts),this.shiftRowsUp_(),this.startPts_=b.pts):c===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[14]=this.nonDisplayed_[14].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1):c===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(b.pts),this.displayed_=u()):c===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=u():c===this.RESUME_DIRECT_CAPTIONING_?this.mode_="paintOn":this.isSpecialCharacter(d,e)?(c=a((d&3)<<8|e),this[this.mode_](b.pts,c),this.column_++):
this.isExtCharacter(d,e)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1),c=a((d&3)<<8|e),this[this.mode_](b.pts,c),this.column_++):this.isMidRowCode(d,e)?(this.clearFormatting(b.pts),this[this.mode_](b.pts," "),this.column_++,14===(e&14)&&this.addFormatting(b.pts,["i"]),1===(e&1)&&this.addFormatting(b.pts,["u"])):this.isOffsetControlCode(d,e)?this.column_+=e&3:this.isPAC(d,e)?(d=l.indexOf(c&7968),d!==
this.row_&&(this.clearFormatting(b.pts),this.row_=d),e&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(b.pts,["u"]),16===(c&16)&&(this.column_=4*((c&14)>>1)),this.isColorPAC(e)&&14===(e&14)&&this.addFormatting(b.pts,["i"])):this.isNormalChar(d)&&(0===e&&(e=null),c=a(d),c+=a(e),this[this.mode_](b.pts,c),this.column_+=c.length))}}};q.prototype=new f;q.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){return a.trim()}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&
this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})};q.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=u();this.nonDisplayed_=u();this.lastControlCode_=null;this.column_=0;this.row_=14;this.formatting_=[]};q.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,
this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};q.prototype.isSpecialCharacter=function(a,b){return a===
this.EXT_&&48<=b&&63>=b};q.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=b&&63>=b};q.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&32<=b&&47>=b};q.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&33<=b&&35>=b};q.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&64<=b&&127>=b};q.prototype.isColorPAC=function(a){return 64<=a&&79>=a||96<=a&&127>=a};q.prototype.isNormalChar=function(a){return 32<=a&&127>=a};q.prototype.addFormatting=
function(a,b){this.formatting_=this.formatting_.concat(b);b=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,b)};q.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[];this[this.mode_](a,b)}};q.prototype.popOn=function(a,b){this.nonDisplayed_[this.row_]+=b};q.prototype.rollUp=function(a,b){this.displayed_[14]+=b};q.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]=
"";for(a=this.topRow_;14>a;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[14]=""};q.prototype.paintOn=function(){};b.exports={CaptionStream:k,Cea608Stream:q}},{"../utils/stream":62}],50:[function(f,b,e){e=f("../utils/stream.js");var d=f("./caption-stream"),k=f("./stream-types"),c=f("./timestamp-rollover-stream").TimestampRolloverStream,a=f("./stream-types.js");var l=function(){var a=new Uint8Array(188),b=0;l.prototype.init.call(this);this.push=function(c){var d=0,e=188;if(b){var f=new Uint8Array(c.byteLength+
b);f.set(a.subarray(0,b));f.set(c,b);b=0}else f=c;for(;e<f.byteLength;)71===f[d]&&71===f[e]?(this.trigger("data",f.subarray(d,e)),d+=188,e+=188):(d++,e++);d<f.byteLength&&(a.set(f.subarray(d),0),b=f.byteLength-d)};this.flush=function(){188===b&&71===a[0]&&(this.trigger("data",a),b=0);this.trigger("done")}};l.prototype=new e;var u=function(){u.prototype.init.call(this);var a=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var b=function(a,b){var e=0;b.payloadUnitStartIndicator&&(e+=a[e]+
1);"pat"===b.type?c(a.subarray(e),b):d(a.subarray(e),b)};var c=function(b,c){c.section_number=b[7];c.last_section_number=b[8];a.pmtPid=(b[10]&31)<<8|b[11];c.pmtPid=a.pmtPid};var d=function(b,c){var d;if(b[5]&1){a.programMapTable={video:null,audio:null,"timed-metadata":{}};var e=3+((b[1]&15)<<8|b[2])-4;for(d=12+((b[10]&15)<<8|b[11]);d<e;){var f=b[d],l=(b[d+1]&31)<<8|b[d+2];f===k.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=l:f===k.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?
a.programMapTable.audio=l:f===k.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][l]=f);d+=((b[d+3]&15)<<8|b[d+4])+5}c.programMapTable=a.programMapTable}};this.push=function(a){var c={},d=4;c.payloadUnitStartIndicator=!!(a[1]&64);c.pid=a[1]&31;c.pid<<=8;c.pid|=a[2];1<(a[3]&48)>>>4&&(d+=a[d]+1);if(0===c.pid)c.type="pat",b(a.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",b(a.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,
this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,d,c]):this.processPes_(a,d,c)};this.processPes_=function(a,b,c){c.streamType=c.pid===this.programMapTable.video?k.H264_STREAM_TYPE:c.pid===this.programMapTable.audio?k.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][c.pid];c.type="pes";c.data=a.subarray(b);this.trigger("data",c)}};u.prototype=new e;u.STREAM_TYPES={h264:27,adts:15};var q=function(){var b=this,c={data:[],size:0},d={data:[],
size:0},e={data:[],size:0},f=function(a,c,d){var e=new Uint8Array(a.size),f={type:c},k,l=0;if(a.data.length&&!(9>a.size)){f.trackId=a.data[0].pid;for(k=0;k<a.data.length;k++){var g=a.data[k];e.set(g.data,l);l+=g.data.byteLength}f.packetLength=6+(e[4]<<8|e[5]);f.dataAlignmentIndicator=0!==(e[6]&4);k=e[7];k&192&&(f.pts=(e[9]&14)<<27|(e[10]&255)<<20|(e[11]&254)<<12|(e[12]&255)<<5|(e[13]&254)>>>3,f.pts*=4,f.pts+=(e[13]&6)>>>1,f.dts=f.pts,k&64&&(f.dts=(e[14]&14)<<27|(e[15]&255)<<20|(e[16]&254)<<12|(e[17]&
255)<<5|(e[18]&254)>>>3,f.dts*=4,f.dts+=(e[18]&6)>>>1));f.data=e.subarray(9+e[8]);c="video"===c||f.packetLength<=a.size;if(d||c)a.size=0,a.data.length=0;c&&b.trigger("data",f)}};q.prototype.init.call(this);this.push=function(l){({pat:function(){},pes:function(){switch(l.streamType){case k.H264_STREAM_TYPE:case a.H264_STREAM_TYPE:var b=c;var p="video";break;case k.ADTS_STREAM_TYPE:b=d;p="audio";break;case k.METADATA_STREAM_TYPE:b=e;p="timed-metadata";break;default:return}l.payloadUnitStartIndicator&&
f(b,p,!0);b.data.push(l);b.size+=l.data.byteLength},pmt:function(){var a={type:"metadata",tracks:[]},c=l.programMapTable;null!==c.video&&a.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.video,codec:"avc",type:"video"});null!==c.audio&&a.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.audio,codec:"adts",type:"audio"});b.trigger("data",a)}})[l.type]()};this.flush=function(){f(c,"video");f(d,"audio");f(e,"timed-metadata");this.trigger("done")}};q.prototype=new e;f={PAT_PID:0,
MP2T_PACKET_LENGTH:188,TransportPacketStream:l,TransportParseStream:u,ElementaryStream:q,TimestampRolloverStream:c,CaptionStream:d.CaptionStream,Cea608Stream:d.Cea608Stream,MetadataStream:f("./metadata-stream")};for(var r in k)k.hasOwnProperty(r)&&(f[r]=k[r]);b.exports=f},{"../utils/stream.js":62,"./caption-stream":49,"./metadata-stream":51,"./stream-types":53,"./stream-types.js":53,"./timestamp-rollover-stream":54}],51:[function(f,b,e){e=f("../utils/stream");var d=f("./stream-types"),k=function(a,
b,c){for(var d="";b<c;b++)d+="%"+("00"+a[b].toString(16)).slice(-2);return d},c=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},a={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(k(a.data,1,b));a.value=decodeURIComponent(k(a.data,b+1,a.data.length)).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(k(a.data,1,b));
a.url=decodeURIComponent(k(a.data,b+1,a.data.length));break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=unescape(k(a.data,0,b));break}a.privateData=a.data.subarray(b+1);a.data=a.privateData}};var l=function(b){var e=!(!b||!b.debug);b=b&&b.descriptor;var f=0,k=[],u=0,p;l.prototype.init.call(this);this.dispatchType=d.METADATA_STREAM_TYPE.toString(16);if(b)for(p=0;p<b.length;p++)this.dispatchType+=("00"+b[p].toString(16)).slice(-2);this.push=function(b){var d;if("timed-metadata"===
b.type)if(b.dataAlignmentIndicator&&(u=0,k.length=0),0===k.length&&(10>b.data.length||73!==b.data[0]||68!==b.data[1]||51!==b.data[2]))e&&console.log("Skipping unrecognized metadata packet");else if(k.push(b),u+=b.data.byteLength,1===k.length&&(f=c(b.data.subarray(6,10)),f+=10),!(u<f)){b={data:new Uint8Array(f),frames:[],pts:k[0].pts,dts:k[0].dts};for(d=0;d<f;)b.data.set(k[0].data.subarray(0,f-d),d),d+=k[0].data.byteLength,u-=k[0].data.byteLength,k.shift();d=10;b.data[5]&64&&(d=d+4+c(b.data.subarray(10,
14)),f-=c(b.data.subarray(16,20)));do{var l=c(b.data.subarray(d+4,d+8));if(1>l)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");var p=String.fromCharCode(b.data[d],b.data[d+1],b.data[d+2],b.data[d+3]);p={id:p,data:b.data.subarray(d+10,d+l+10)};p.key=p.id;if(a[p.id]&&(a[p.id](p),"com.apple.streaming.transportStreamTimestamp"===p.owner)){var r=p.data,q=(r[3]&1)<<30|r[4]<<22|r[5]<<14|r[6]<<6|r[7]>>>2;q*=4;q+=r[7]&3;p.timeStamp=q;void 0===b.pts&&void 0===b.dts&&(b.pts=
p.timeStamp,b.dts=p.timeStamp);this.trigger("timestamp",p)}b.frames.push(p);d+=10;d+=l}while(d<f);this.trigger("data",b)}}};l.prototype=new e;b.exports=l},{"../utils/stream":62,"./stream-types":53}],52:[function(f,b,e){var d=f("./stream-types.js"),k=function(a){var b=a[1]&31;return b=b<<8|a[2]},c=function(a){return!!(a[1]&64)},a=function(a){var b=0;1<(a[3]&48)>>>4&&(b+=a[4]+1);return b},l=function(a){switch(a){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";
case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};b.exports={parseType:function(a,b){a=k(a);return 0===a?"pat":a===b?"pmt":b?"pes":null},parsePat:function(b){var d=c(b),e=4+a(b);d&&(e+=b[e]+1);return(b[e+10]&31)<<8|b[e+11]},parsePmt:function(b){var d={},e=c(b),f=4+a(b);e&&(f+=b[f]+1);if(b[f+5]&1){e=3+((b[f+1]&15)<<8|b[f+2])-4;for(var k=12+((b[f+10]&15)<<8|b[f+11]);k<e;){var l=f+k;d[(b[l+1]&31)<<8|b[l+2]]=b[l];k+=((b[l+3]&15)<<8|b[l+4])+5}return d}},
parsePayloadUnitStartIndicator:c,parsePesType:function(a,b){a=k(a);switch(b[a]){case d.H264_STREAM_TYPE:return"video";case d.ADTS_STREAM_TYPE:return"audio";case d.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(b){if(!c(b))return null;var d=4+a(b);if(d>=b.byteLength)return null;var e=null;var f=b[d+7];f&192&&(e={},e.pts=(b[d+9]&14)<<27|(b[d+10]&255)<<20|(b[d+11]&254)<<12|(b[d+12]&255)<<5|(b[d+13]&254)>>>3,e.pts*=4,e.pts+=(b[d+13]&6)>>>1,e.dts=e.pts,f&64&&(e.dts=
(b[d+14]&14)<<27|(b[d+15]&255)<<20|(b[d+16]&254)<<12|(b[d+17]&255)<<5|(b[d+18]&254)>>>3,e.dts*=4,e.dts+=(b[d+18]&6)>>>1));return e},videoPacketContainsKeyFrame:function(b){var c=4+a(b);b=b.subarray(c);for(var d=c=0,e=!1;d<b.byteLength-3;d++)if(1===b[d+2]){c=d+5;break}for(;c<b.byteLength;)switch(b[c]){case 0:if(0!==b[c-1]){c+=2;break}else if(0!==b[c-2]){c++;break}d+3!==c-2&&(d=l(b[d+3]&31),"slice_layer_without_partitioning_rbsp_idr"===d&&(e=!0));do c++;while(1!==b[c]&&c<b.length);d=c-2;c+=3;break;
case 1:if(0!==b[c-1]||0!==b[c-2]){c+=3;break}d=l(b[d+3]&31);"slice_layer_without_partitioning_rbsp_idr"===d&&(e=!0);d=c-2;c+=3;break;default:c+=3}(b=b.subarray(d))&&3<b.byteLength&&(d=l(b[3]&31),"slice_layer_without_partitioning_rbsp_idr"===d&&(e=!0));return e}}},{"./stream-types.js":53}],53:[function(f,b,e){b.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],54:[function(f,b,e){f=f("../utils/stream");var d=function(b,a){var c=1;for(b>a&&(c=-1);4294967296<Math.abs(a-b);)b+=
8589934592*c;return b},k=function(b){var a,c;k.prototype.init.call(this);this.type_=b;this.push=function(b){b.type===this.type_&&(void 0===c&&(c=b.dts),b.dts=d(b.dts,c),b.pts=d(b.pts,c),a=b.dts,this.trigger("data",b))};this.flush=function(){c=a;this.trigger("done")};this.discontinuity=function(){a=c=void 0}};k.prototype=new f;b.exports={TimestampRolloverStream:k,handleRollover:d}},{"../utils/stream":62}],55:[function(f,b,e){b.exports={generator:f("./mp4-generator"),Transmuxer:f("./transmuxer").Transmuxer,
AudioSegmentStream:f("./transmuxer").AudioSegmentStream,VideoSegmentStream:f("./transmuxer").VideoSegmentStream}},{"./mp4-generator":56,"./transmuxer":58}],56:[function(f,b,e){var d=Math.pow(2,32)-1,k,c,a,l,u,q,r,y,z,p,x,t,B,C,F,H;(function(){var b;a={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],
trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(b in a)a.hasOwnProperty(b)&&(a[b]=[b.charCodeAt(0),b.charCodeAt(1),b.charCodeAt(2),b.charCodeAt(3)]);l=new Uint8Array([105,115,111,109]);q=new Uint8Array([97,118,99,49]);u=new Uint8Array([0,0,0,1]);r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);y=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,
114,0]);z={video:r,audio:y};t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);x=new Uint8Array([0,0,0,0,0,0,0,0]);C=B=new Uint8Array([0,0,0,0,0,0,0,0]);F=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);H=B;p=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var G=function(a){var b=[],c=0,d;for(d=1;d<arguments.length;d++)b.push(arguments[d]);for(d=b.length;d--;)c+=b[d].byteLength;var e=new Uint8Array(c+8);(new DataView(e.buffer,e.byteOffset,e.byteLength)).setUint32(0,e.byteLength);e.set(a,
4);d=0;for(c=8;d<b.length;d++)e.set(b[d],c),c+=b[d].byteLength;return e};var E=function(){return G(a.dinf,G(a.dref,t))};var K=function(b){return G(a.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,b.audioobjecttype<<3|b.samplingfrequencyindex>>>1,b.samplingfrequencyindex<<7|b.channelcount<<3,6,1,2]))};var g=function(){return G(a.ftyp,l,u,l,q)};var m=function(b){return G(a.hdlr,z[b])};var A=function(b){var c=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,b.duration>>>
24&255,b.duration>>>16&255,b.duration>>>8&255,b.duration&255,85,196,0,0]);b.samplerate&&(c[12]=b.samplerate>>>24&255,c[13]=b.samplerate>>>16&255,c[14]=b.samplerate>>>8&255,c[15]=b.samplerate&255);return G(a.mdhd,c)};var M=function(b){return G(a.mdia,A(b),m(b.type),Q(b))};var L=function(b){return G(a.mfhd,new Uint8Array([0,0,0,0,(b&4278190080)>>24,(b&16711680)>>16,(b&65280)>>8,b&255]))};var Q=function(b){return G(a.minf,"video"===b.type?G(a.vmhd,p):G(a.smhd,x),E(),X(b))};var ia=function(b){for(var c=
b.length,d=[];c--;)d[c]=Z(b[c]);return G.apply(null,[a.moov,Aa(4294967295)].concat(d).concat(V(b)))};var V=function(b){for(var c=b.length,d=[];c--;)d[c]=sa(b[c]);return G.apply(null,[a.mvex].concat(d))};var Aa=function(b){b=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(b&4278190080)>>24,(b&16711680)>>16,(b&65280)>>8,b&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);
return G(a.mvhd,b)};var U=function(b){b=b.samples||[];var c=new Uint8Array(4+b.length),d;for(d=0;d<b.length;d++){var e=b[d].flags;c[d+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy}return G(a.sdtp,c)};var X=function(b){return G(a.stbl,k(b),G(a.stts,H),G(a.stsc,C),G(a.stsz,F),G(a.stco,B))};(function(){k=function(d){return G(a.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===d.type?b(d):c(d))};var b=function(b){var c=b.sps||[],d=b.pps||[],e=[],f=[],g;for(g=0;g<c.length;g++)e.push((c[g].byteLength&
65280)>>>8),e.push(c[g].byteLength&255),e=e.concat(Array.prototype.slice.call(c[g]));for(g=0;g<d.length;g++)f.push((d[g].byteLength&65280)>>>8),f.push(d[g].byteLength&255),f=f.concat(Array.prototype.slice.call(d[g]));return G(a.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(b.width&65280)>>8,b.width&255,(b.height&65280)>>8,b.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),
G(a.avcC,new Uint8Array([1,b.profileIdc,b.profileCompatibility,b.levelIdc,255].concat([c.length]).concat(e).concat([d.length]).concat(f))),G(a.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};var c=function(b){return G(a.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(b.channelcount&65280)>>8,b.channelcount&255,(b.samplesize&65280)>>8,b.samplesize&255,0,0,0,0,(b.samplerate&65280)>>8,b.samplerate&255,0,0]),K(b))}})();var da=function(b){b=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,
0,(b.id&4278190080)>>24,(b.id&16711680)>>16,(b.id&65280)>>8,b.id&255,0,0,0,0,(b.duration&4278190080)>>24,(b.duration&16711680)>>16,(b.duration&65280)>>8,b.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(b.width&65280)>>8,b.width&255,0,0,(b.height&65280)>>8,b.height&255,0,0]);return G(a.tkhd,b)};var R=function(b){var e=G(a.tfhd,new Uint8Array([0,0,0,58,(b.id&4278190080)>>24,(b.id&16711680)>>16,(b.id&65280)>>8,b.id&255,0,0,0,1,0,
0,0,0,0,0,0,0,0,0,0,0]));var f=Math.floor(b.baseMediaDecodeTime/(d+1));var g=Math.floor(b.baseMediaDecodeTime%(d+1));f=G(a.tfdt,new Uint8Array([1,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255,g>>>24&255,g>>>16&255,g>>>8&255,g&255]));if("audio"===b.type)return b=c(b,92),G(a.traf,e,f,b);g=U(b);b=c(b,g.length+92);return G(a.traf,e,f,b,g)};var Z=function(b){b.duration=b.duration||4294967295;return G(a.trak,da(b),M(b))};var sa=function(b){var c=new Uint8Array([0,0,0,0,(b.id&4278190080)>>24,(b.id&16711680)>>
16,(b.id&65280)>>8,b.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==b.type&&(c[c.length-1]=0);return G(a.trex,c)};(function(){var b=function(a,b){var c=0,d=0,e=0,f=0;a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(d=2),void 0!==a[0].flags&&(e=4),void 0!==a[0].compositionTimeOffset&&(f=8));return[0,0,c|d|e|f,1,(a.length&4278190080)>>>24,(a.length&16711680)>>>16,(a.length&65280)>>>8,a.length&255,(b&4278190080)>>>24,(b&16711680)>>>16,(b&65280)>>>8,b&255]};var d=function(c,d){var e;
c=c.samples||[];d+=20+16*c.length;d=b(c,d);for(e=0;e<c.length;e++){var f=c[e];d=d.concat([(f.duration&4278190080)>>>24,(f.duration&16711680)>>>16,(f.duration&65280)>>>8,f.duration&255,(f.size&4278190080)>>>24,(f.size&16711680)>>>16,(f.size&65280)>>>8,f.size&255,f.flags.isLeading<<2|f.flags.dependsOn,f.flags.isDependedOn<<6|f.flags.hasRedundancy<<4|f.flags.paddingValue<<1|f.flags.isNonSyncSample,f.flags.degradationPriority&61440,f.flags.degradationPriority&15,(f.compositionTimeOffset&4278190080)>>>
24,(f.compositionTimeOffset&16711680)>>>16,(f.compositionTimeOffset&65280)>>>8,f.compositionTimeOffset&255])}return G(a.trun,new Uint8Array(d))};var e=function(c,d){var e;c=c.samples||[];d+=20+8*c.length;d=b(c,d);for(e=0;e<c.length;e++){var f=c[e];d=d.concat([(f.duration&4278190080)>>>24,(f.duration&16711680)>>>16,(f.duration&65280)>>>8,f.duration&255,(f.size&4278190080)>>>24,(f.size&16711680)>>>16,(f.size&65280)>>>8,f.size&255])}return G(a.trun,new Uint8Array(d))};c=function(a,b){return"audio"===
a.type?e(a,b):d(a,b)}})();b.exports={ftyp:g,mdat:function(b){return G(a.mdat,b)},moof:function(b,c){for(var d=[],e=c.length;e--;)d[e]=R(c[e]);return G.apply(null,[a.moof,L(b)].concat(d))},moov:ia,initSegment:function(a){var b=g();a=ia(a);var c=new Uint8Array(b.byteLength+a.byteLength);c.set(b);c.set(a,b.byteLength);return c}}},{}],57:[function(f,b,e){var d=function(b,a){var c=[],e;if(!a.length)return null;for(e=0;e<b.byteLength;){var f=b[e]<<24;f|=b[e+1]<<16;f|=b[e+2]<<8;f|=b[e+3];var r=k(b.subarray(e+
4,e+8));f=1<f?e+f:b.byteLength;r===a[0]&&(1===a.length?c.push(b.subarray(e+8,f)):(e=d(b.subarray(e+8,f),a.slice(1)),e.length&&(c=c.concat(e))));e=f}return c};var k=function(b){var a=""+String.fromCharCode(b[0]);a+=String.fromCharCode(b[1]);a+=String.fromCharCode(b[2]);return a+=String.fromCharCode(b[3])};b.exports={parseType:k,timescale:function(b){return d(b,["moov","trak"]).reduce(function(a,b){var c=d(b,["tkhd"])[0];if(!c)return null;var e=c[0];e=0===e?12:20;c=c[e]<<24|c[e+1]<<16|c[e+2]<<8|c[e+
3];b=d(b,["mdia","mdhd"])[0];if(!b)return null;e=b[0];e=0===e?12:20;a[c]=b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3];return a},{})},startTime:function(b,a){a=d(a,["moof","traf"]);a=[].concat.apply([],a.map(function(a){return d(a,["tfhd"]).map(function(c){c=b[c[4]<<24|c[5]<<16|c[6]<<8|c[7]]||9E4;var e=(e=d(a,["tfdt"]).map(function(a){var b=a[0];var c=a[4]<<24|a[5]<<16|a[6]<<8|a[7];1===b&&(c*=Math.pow(2,32),c+=a[8]<<24|a[9]<<16|a[10]<<8|a[11]);return c})[0])||Infinity;return e/c})}));a=Math.min.apply(null,
a);return isFinite(a)?a:0}}},{}],58:[function(f,b,e){e=f("../utils/stream.js");var d=f("./mp4-generator.js"),k=f("../m2ts/m2ts.js"),c=f("../codecs/adts.js"),a=f("../codecs/h264").H264Stream,l=f("../aac"),u=f("../data/silence"),q=f("../utils/clock"),r=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],y=["width","height","profileIdc","levelIdc","profileCompatibility"];var z=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}};
var p=function(a){return 73===a[0]&&68===a[1]&&51===a[2]?!0:!1};var x=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};var t=function(a){var b,c=0;for(b=0;b<a.length;b++){var d=a[b];c+=d.data.byteLength}return c};var B=function(a){var b=[],c=0,e=0,f=0,g=Infinity;B.prototype.init.call(this);this.push=function(c){F(a,c);a&&r.forEach(function(b){a[b]=c[b]});b.push(c)};this.setEarliestDts=function(b){e=b-a.timelineStartInfo.baseMediaDecodeTime};
this.setVideoBaseMediaDecodeTime=function(a){g=a};this.setAudioAppendStart=function(a){f=a};this.flush=function(){if(0!==b.length){var e=this.trimAdtsFramesByEarliestDts_(b);a.baseMediaDecodeTime=G(a);this.prefixWithSilence_(a,e);a.samples=this.generateSampleTable_(e);var f=d.mdat(this.concatenateFrameData_(e));b=[];e=d.moof(c,[a]);var g=new Uint8Array(e.byteLength+f.byteLength);c++;g.set(e);g.set(f,e.byteLength);H(a);this.trigger("data",{track:a,boxes:g})}this.trigger("done","AudioSegmentStream")};
this.prefixWithSilence_=function(a,b){var c,d=c=0;if(b.length){var e=q.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate);var k=Math.ceil(9E4/(a.samplerate/1024));f&&g&&(c=e-Math.max(f,g),c=Math.floor(c/k),d=c*k);if(!(1>c||45E3<d)){k=u[a.samplerate];k||(k=b[0].data);for(e=0;e<c;e++)b.splice(e,0,{data:k});a.baseMediaDecodeTime-=Math.floor(q.videoTsToAudioTs(d,a.samplerate))}}};this.trimAdtsFramesByEarliestDts_=function(b){if(a.minSegmentDts>=e)return b;a.minSegmentDts=Infinity;return b.filter(function(b){return b.dts>=
e?(a.minSegmentDts=Math.min(a.minSegmentDts,b.dts),a.minSegmentPts=a.minSegmentDts,!0):!1})};this.generateSampleTable_=function(a){var b,c=[];for(b=0;b<a.length;b++){var d=a[b];c.push({size:d.data.byteLength,duration:1024})}return c};this.concatenateFrameData_=function(a){var b,c=0,d=new Uint8Array(t(a));for(b=0;b<a.length;b++){var e=a[b];d.set(e.data,c);c+=e.data.byteLength}return d}};B.prototype=new e;var C=function(a,b){var c=0,e=[],f=[],g,k;b=b||{};C.prototype.init.call(this);delete a.minPTS;
this.gopCache_=[];this.push=function(b){F(a,b);"seq_parameter_set_rbsp"!==b.nalUnitType||g||(g=b.config,a.sps=[b.data],y.forEach(function(b){a[b]=g[b]},this));"pic_parameter_set_rbsp"!==b.nalUnitType||k||(k=b.data,a.pps=[b.data]);e.push(b)};this.flush=function(){for(var g,k,l;e.length&&"access_unit_delimiter_rbsp"!==e[0].nalUnitType;)e.shift();if(0!==e.length){g=this.groupNalsIntoFrames_(e);g=this.groupFramesIntoGops_(g);g[0][0].keyFrame||((k=this.getGopForFusion_(e[0],a))?(g.unshift(k),g.byteLength+=
k.byteLength,g.nalCount+=k.nalCount,g.pts=k.pts,g.dts=k.dts,g.duration+=k.duration):g=this.extendFirstKeyFrame_(g));if(f.length){k=b.alignGopsAtEnd?this.alignGopsAtEnd_(g):this.alignGopsAtStart_(g);if(!k){this.gopCache_.unshift({gop:g.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);e=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}H(a);g=k}F(a,g);a.samples=this.generateSampleTable_(g);k=d.mdat(this.concatenateNalData_(g));a.baseMediaDecodeTime=
G(a);this.trigger("processedGopsInfo",g.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));this.gopCache_.unshift({gop:g.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);e=[];this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime);this.trigger("timelineStartInfo",a.timelineStartInfo);g=d.moof(c,[a]);l=new Uint8Array(g.byteLength+k.byteLength);c++;l.set(g);l.set(k,g.byteLength);this.trigger("data",{track:a,boxes:l})}this.resetStream_();this.trigger("done",
"VideoSegmentStream")};this.resetStream_=function(){H(a);k=g=void 0};this.getGopForFusion_=function(b){var c=Infinity,d;for(d=0;d<this.gopCache_.length;d++){var e=this.gopCache_[d];var f=e.gop;if(a.pps&&x(a.pps[0],e.pps[0])&&a.sps&&x(a.sps[0],e.sps[0])&&!(f.dts<a.timelineStartInfo.dts)&&(f=b.dts-f.dts-f.duration,-1E4<=f&&45E3>=f&&(!g||c>f))){var g=e;c=f}}return g?g.gop:null};this.extendFirstKeyFrame_=function(a){if(!a[0][0].keyFrame&&1<a.length){var b=a.shift();a.byteLength-=b.byteLength;a.nalCount-=
b.nalCount;a[0][0].dts=b.dts;a[0][0].pts=b.pts;a[0][0].duration+=b.duration}return a};this.groupNalsIntoFrames_=function(a){var b,c=[],d=[];for(b=c.byteLength=0;b<a.length;b++){var e=a[b];"access_unit_delimiter_rbsp"===e.nalUnitType?(c.length&&(c.duration=e.dts-c.dts,d.push(c)),c=[e],c.byteLength=e.data.byteLength,c.pts=e.pts,c.dts=e.dts):("slice_layer_without_partitioning_rbsp_idr"===e.nalUnitType&&(c.keyFrame=!0),c.duration=e.dts-c.dts,c.byteLength+=e.data.byteLength,c.push(e))}d.length&&(!c.duration||
0>=c.duration)&&(c.duration=d[d.length-1].duration);d.push(c);return d};this.groupFramesIntoGops_=function(a){var b,c=[],d=[];c.byteLength=0;c.nalCount=0;c.duration=0;c.pts=a[0].pts;c.dts=a[0].dts;d.byteLength=0;d.nalCount=0;d.duration=0;d.pts=a[0].pts;d.dts=a[0].dts;for(b=0;b<a.length;b++){var e=a[b];e.keyFrame?(c.length&&(d.push(c),d.byteLength+=c.byteLength,d.nalCount+=c.nalCount,d.duration+=c.duration),c=[e],c.nalCount=e.length,c.byteLength=e.byteLength,c.pts=e.pts,c.dts=e.dts,c.duration=e.duration):
(c.duration+=e.duration,c.nalCount+=e.length,c.byteLength+=e.byteLength,c.push(e))}d.length&&0>=c.duration&&(c.duration=d[d.length-1].duration);d.byteLength+=c.byteLength;d.nalCount+=c.nalCount;d.duration+=c.duration;d.push(c);return d};this.generateSampleTable_=function(a,b){var c,d=b||0,e=[];for(b=0;b<a.length;b++){var f=a[b];for(c=0;c<f.length;c++){var g=f[c];var k=z();k.dataOffset=d;k.compositionTimeOffset=g.pts-g.dts;k.duration=g.duration;k.size=4*g.length;k.size+=g.byteLength;g.keyFrame&&(k.flags.dependsOn=
2);d+=k.size;e.push(k)}}return e};this.concatenateNalData_=function(a){var b,c,d,e=0,f=new Uint8Array(a.byteLength+4*a.nalCount),g=new DataView(f.buffer);for(b=0;b<a.length;b++){var k=a[b];for(c=0;c<k.length;c++){var l=k[c];for(d=0;d<l.length;d++){var m=l[d];g.setUint32(e,m.data.byteLength);e+=4;f.set(m.data,e);e+=m.data.byteLength}}}return f};this.alignGopsAtStart_=function(a){var b,c;var d=a.byteLength;var e=a.nalCount;var g=a.duration;for(b=c=0;b<f.length&&c<a.length;){var k=f[b];var l=a[c];if(k.pts===
l.pts)break;l.pts>k.pts?b++:(c++,d-=l.byteLength,e-=l.nalCount,g-=l.duration)}if(0===c)return a;if(c===a.length)return null;a=a.slice(c);a.byteLength=d;a.duration=g;a.nalCount=e;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=function(a){var b;var c=f.length-1;var d=a.length-1;var e=null;for(b=!1;0<=c&&0<=d;){var g=f[c];var k=a[d];if(g.pts===k.pts){b=!0;break}g.pts>k.pts?c--:(c===f.length-1&&(e=d),d--)}if(!b&&null===e)return null;c=b?d:e;if(0===c)return a;a=a.slice(c);c=a.reduce(function(a,
b){a.byteLength+=b.byteLength;a.duration+=b.duration;a.nalCount+=b.nalCount;return a},{byteLength:0,duration:0,nalCount:0});a.byteLength=c.byteLength;a.duration=c.duration;a.nalCount=c.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsWith=function(a){f=a}};C.prototype=new e;var F=function(a,b){"number"===typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts=void 0===a.minSegmentPts?b.pts:Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts=void 0===
a.maxSegmentPts?b.pts:Math.max(a.maxSegmentPts,b.pts));"number"===typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),a.minSegmentDts=void 0===a.minSegmentDts?b.dts:Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?b.dts:Math.max(a.maxSegmentDts,b.dts))};var H=function(a){delete a.minSegmentDts;delete a.maxSegmentDts;delete a.minSegmentPts;delete a.maxSegmentPts};var G=function(a){var b=a.minSegmentDts-a.timelineStartInfo.dts;var c=a.timelineStartInfo.baseMediaDecodeTime;
c=Math.max(0,c+b);"audio"===a.type&&(a=a.samplerate/9E4,c=Math.floor(c*a));return c};var E=function(a,b){this.numberOfTracks=0;this.metadataStream=b;this.remuxTracks="undefined"!==typeof a.remux?!!a.remux:!0;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;E.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);
this.pendingTracks.push(a.track);this.pendingBoxes.push(a.boxes);this.pendingBytes+=a.boxes.byteLength;"video"===a.track.type&&(this.videoTrack=a.track);"audio"===a.track.type&&(this.audioTrack=a.track)}};E.prototype=new e;E.prototype.flush=function(a){var b=0,c={captions:[],captionStreams:{},metadata:[],info:{}},e=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;
this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(e=this.videoTrack.timelineStartInfo.pts,y.forEach(function(a){c.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(e=this.audioTrack.timelineStartInfo.pts,r.forEach(function(a){c.info[a]=this.audioTrack[a]},this));c.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;a=d.initSegment(this.pendingTracks);c.initSegment=new Uint8Array(a.byteLength);
c.initSegment.set(a);c.data=new Uint8Array(this.pendingBytes);for(a=0;a<this.pendingBoxes.length;a++)c.data.set(this.pendingBoxes[a],b),b+=this.pendingBoxes[a].byteLength;for(a=0;a<this.pendingCaptions.length;a++)b=this.pendingCaptions[a],b.startTime=b.startPts-e,b.startTime/=9E4,b.endTime=b.endPts-e,b.endTime/=9E4,c.captionStreams[b.stream]=!0,c.captions.push(b);for(a=0;a<this.pendingMetadata.length;a++)b=this.pendingMetadata[a],b.cueTime=b.pts-e,b.cueTime/=9E4,c.metadata.push(b);c.metadata.dispatchType=
this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",c);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};var K=function(b){var d=this,e=!0,f,g;K.prototype.init.call(this);b=b||{};this.baseMediaDecodeTime=b.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var a={};this.transmuxPipeline_=
a;a.type="aac";a.metadataStream=new k.MetadataStream;a.aacStream=new l;a.audioTimestampRolloverStream=new k.TimestampRolloverStream("audio");a.timedMetadataTimestampRolloverStream=new k.TimestampRolloverStream("timed-metadata");a.adtsStream=new c;a.coalesceStream=new E(b,a.metadataStream);a.headOfPipeline=a.aacStream;a.aacStream.pipe(a.audioTimestampRolloverStream).pipe(a.adtsStream);a.aacStream.pipe(a.timedMetadataTimestampRolloverStream).pipe(a.metadataStream).pipe(a.coalesceStream);a.metadataStream.on("timestamp",
function(b){a.aacStream.setTimestamp(b.timeStamp)});a.aacStream.on("data",function(b){"timed-metadata"!==b.type||a.audioSegmentStream||(g=g||{timelineStartInfo:{baseMediaDecodeTime:d.baseMediaDecodeTime},codec:"adts",type:"audio"},a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new B(g),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream))});a.coalesceStream.on("data",this.trigger.bind(this,"data"));a.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=
function(){var e={};this.transmuxPipeline_=e;e.type="ts";e.metadataStream=new k.MetadataStream;e.packetStream=new k.TransportPacketStream;e.parseStream=new k.TransportParseStream;e.elementaryStream=new k.ElementaryStream;e.videoTimestampRolloverStream=new k.TimestampRolloverStream("video");e.audioTimestampRolloverStream=new k.TimestampRolloverStream("audio");e.timedMetadataTimestampRolloverStream=new k.TimestampRolloverStream("timed-metadata");e.adtsStream=new c;e.h264Stream=new a;e.captionStream=
new k.CaptionStream;e.coalesceStream=new E(b,e.metadataStream);e.headOfPipeline=e.packetStream;e.packetStream.pipe(e.parseStream).pipe(e.elementaryStream);e.elementaryStream.pipe(e.videoTimestampRolloverStream).pipe(e.h264Stream);e.elementaryStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream);e.elementaryStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream);e.h264Stream.pipe(e.captionStream).pipe(e.coalesceStream);e.elementaryStream.on("data",
function(a){var c;if("metadata"===a.type){for(c=a.tracks.length;c--;)f||"video"!==a.tracks[c].type?g||"audio"!==a.tracks[c].type||(g=a.tracks[c],g.timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime):(f=a.tracks[c],f.timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime);f&&!e.videoSegmentStream&&(e.coalesceStream.numberOfTracks++,e.videoSegmentStream=new C(f,b),e.videoSegmentStream.on("timelineStartInfo",function(a){g&&(g.timelineStartInfo=a,e.audioSegmentStream.setEarliestDts(a.dts))}),
e.videoSegmentStream.on("processedGopsInfo",d.trigger.bind(d,"gopInfo")),e.videoSegmentStream.on("baseMediaDecodeTime",function(a){g&&e.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),e.h264Stream.pipe(e.videoSegmentStream).pipe(e.coalesceStream));g&&!e.audioSegmentStream&&(e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new B(g),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}});e.coalesceStream.on("data",this.trigger.bind(this,"data"));e.coalesceStream.on("done",this.trigger.bind(this,
"done"))};this.setBaseMediaDecodeTime=function(a){var b=this.transmuxPipeline_;this.baseMediaDecodeTime=a;g&&(g.timelineStartInfo.dts=void 0,g.timelineStartInfo.pts=void 0,H(g),g.timelineStartInfo.baseMediaDecodeTime=a,b.audioTimestampRolloverStream&&b.audioTimestampRolloverStream.discontinuity());f&&(b.videoSegmentStream&&(b.videoSegmentStream.gopCache_=[],b.videoTimestampRolloverStream.discontinuity()),f.timelineStartInfo.dts=void 0,f.timelineStartInfo.pts=void 0,H(f),b.captionStream.reset(),f.timelineStartInfo.baseMediaDecodeTime=
a);b.timedMetadataTimestampRolloverStream&&b.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){g&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};this.alignGopsWith=function(a){f&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)};this.push=function(a){if(e){var b=p(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();
e=!1}this.transmuxPipeline_.headOfPipeline.push(a)};this.flush=function(){e=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};K.prototype=new e;b.exports={Transmuxer:K,VideoSegmentStream:C,AudioSegmentStream:B,AUDIO_PROPERTIES:r,VIDEO_PROPERTIES:y}},{"../aac":38,"../codecs/adts.js":40,"../codecs/h264":41,"../data/silence":42,"../m2ts/m2ts.js":50,"../utils/clock":60,"../utils/stream.js":62,
"./mp4-generator.js":56}],59:[function(f,b,e){var d=f("../m2ts/stream-types.js"),k=f("../m2ts/timestamp-rollover-stream.js").handleRollover;var c=f("../m2ts/probe.js");var a=f("../aac/probe.js");var l=function(a,b){if(a.audio&&a.audio.length){var c=b;"undefined"===typeof c&&(c=a.audio[0].dts);a.audio.forEach(function(a){a.dts=k(a.dts,c);a.pts=k(a.pts,c);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4})}if(a.video&&a.video.length){var d=b;"undefined"===typeof d&&(d=a.video[0].dts);a.video.forEach(function(a){a.dts=
k(a.dts,d);a.pts=k(a.pts,d);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4});a.firstKeyFrame&&(a=a.firstKeyFrame,a.dts=k(a.dts,d),a.pts=k(a.pts,d),a.dtsTime=a.dts/9E4,a.ptsTime=a.dts/9E4)}};b.exports={inspect:function(b,e){var f=73===b[0]&&68===b[1]&&51===b[2]?!0:!1;if(f)a:{var k=!1,z=0,p=null;f=null;for(var x,t=0,q;3<=b.length-t;){switch(a.parseType(b,t)){case "timed-metadata":if(10>b.length-t){k=!0;break}x=a.parseId3TagSize(b,t);if(x>b.length){k=!0;break}null===f&&(q=b.subarray(t,t+x),f=a.parseAacTimestamp(q));
t+=x;break;case "audio":if(7>b.length-t){k=!0;break}x=a.parseAdtsSize(b,t);if(x>b.length){k=!0;break}null===p&&(q=b.subarray(t,t+x),p=a.parseSampleRate(q));z++;t+=x;break;default:t++}if(k){b=null;break a}}null===p||null===f?b=null:(b=9E4/p,b={audio:[{type:"audio",dts:f,pts:f},{type:"audio",dts:f+1024*z*b,pts:f+1024*z*b}]})}else{f={pid:null,table:null};k={};p=0;for(x=188;x<b.byteLength;)if(71===b[p]&&71===b[x]){t=b.subarray(p,x);q=c.parseType(t,f.pid);switch(q){case "pat":f.pid||(f.pid=c.parsePat(t));
break;case "pmt":f.table||(f.table=c.parsePmt(t))}if(f.pid&&f.table)break;p+=188;x+=188}else p++,x++;for(z in f.table)if(f.table.hasOwnProperty(z))switch(f.table[z]){case d.H264_STREAM_TYPE:k.video=[];var u;x=b;t=f;q=k;var F=0,H=188,G=!1,E=[];for(u=0;H<x.byteLength;)if(71===x[F]&&71===x[H]){p=x.subarray(F,H);var K=c.parseType(p,t.pid);switch(K){case "pes":var g=c.parsePesType(p,t.table);K=c.parsePayloadUnitStartIndicator(p);if("video"===g&&(K&&!G&&(g=c.parsePesTime(p))&&(g.type="video",q.video.push(g),
G=!0),!q.firstKeyFrame)){if(K&&0!==u){g=new Uint8Array(u);for(K=0;E.length;)u=E.shift(),g.set(u,K),K+=u.byteLength;c.videoPacketContainsKeyFrame(g)&&(q.firstKeyFrame=c.parsePesTime(g),q.firstKeyFrame.type="video");u=0}E.push(p);u+=p.byteLength}}if(G&&q.firstKeyFrame)break;F+=188;H+=188}else F++,H++;H=x.byteLength;F=H-188;for(G=!1;0<=F;)if(71===x[F]&&71===x[H]){p=x.subarray(F,H);K=c.parseType(p,t.pid);switch(K){case "pes":if(g=c.parsePesType(p,t.table),K=c.parsePayloadUnitStartIndicator(p),"video"===
g&&K&&(g=c.parsePesTime(p)))g.type="video",q.video.push(g),G=!0}if(G)break;F-=188;H-=188}else F--,H--;0===k.video.length&&delete k.video;break;case d.ADTS_STREAM_TYPE:k.audio=[];p=b;x=f;t=k;q=0;F=188;for(H=!1;F<p.byteLength;)if(71===p[q]&&71===p[F]){G=p.subarray(q,F);E=c.parseType(G,x.pid);switch(E){case "pes":if(u=c.parsePesType(G,x.table),E=c.parsePayloadUnitStartIndicator(G),"audio"===u&&E&&(G=c.parsePesTime(G)))G.type="audio",t.audio.push(G),H=!0}if(H)break;q+=188;F+=188}else q++,F++;F=p.byteLength;
q=F-188;for(H=!1;0<=q;)if(71===p[q]&&71===p[F]){G=p.subarray(q,F);E=c.parseType(G,x.pid);switch(E){case "pes":if(u=c.parsePesType(G,x.table),E=c.parsePayloadUnitStartIndicator(G),"audio"===u&&E&&(G=c.parsePesTime(G)))G.type="audio",t.audio.push(G),H=!0}if(H)break;q-=188;F-=188}else q--,F--;0===k.audio.length&&delete k.audio}b=k}if(!b||!b.audio&&!b.video)return null;l(b,e);return b}}},{"../aac/probe.js":39,"../m2ts/probe.js":52,"../m2ts/stream-types.js":53,"../m2ts/timestamp-rollover-stream.js":54}],
60:[function(f,b,e){var d=function(a){return 9E4*a};var k=function(a,b){return a*b};var c=function(a){return a/9E4};var a=function(a,b){return a/b};b.exports={secondsToVideoTs:d,secondsToAudioTs:k,videoTsToSeconds:c,audioTsToSeconds:a,audioTsToVideoTs:function(b,c){return d(a(b,c))},videoTsToAudioTs:function(a,b){return k(c(a),b)}}},{}],61:[function(f,b,e){b.exports=function(b){var d=b.byteLength,c=0,a=0;this.length=function(){return 8*d};this.bitsAvailable=function(){return 8*d+a};this.loadWord=
function(){var e=b.byteLength-d,f=new Uint8Array(4),k=Math.min(4,d);if(0===k)throw Error("no bytes available");f.set(b.subarray(e,e+k));c=(new DataView(f.buffer)).getUint32(0);a=8*k;d-=k};this.skipBits=function(b){if(!(a>b)){b-=a;var e=Math.floor(b/8);b-=8*e;d-=e;this.loadWord()}c<<=b;a-=b};this.readBits=function(b){var e=Math.min(a,b),f=c>>>32-e;a-=e;0<a?c<<=e:0<d&&this.loadWord();e=b-e;return 0<e?f<<e|this.readBits(e):f};this.skipLeadingZeros=function(){var b;for(b=0;b<a;++b)if(0!==(c&2147483648>>>
b))return c<<=b,a-=b,b;this.loadWord();return b+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};
this.loadWord()}},{}],62:[function(f,b,e){f=function(){this.init=function(){var b={};this.on=function(d,c){b[d]||(b[d]=[]);b[d]=b[d].concat(c)};this.off=function(d,c){if(!b[d])return!1;c=b[d].indexOf(c);b[d]=b[d].slice();b[d].splice(c,1);return-1<c};this.trigger=function(d){var c,a;if(c=b[d])if(2===arguments.length){var e=c.length;for(a=0;a<e;++a)c[a].call(this,arguments[1])}else{var f=[];for(a=1;a<arguments.length;++a)f.push(arguments[a]);e=c.length;for(a=0;a<e;++a)c[a].apply(this,f)}};this.dispose=
function(){b={}}}};f.prototype.pipe=function(b){this.on("data",function(d){b.push(d)});this.on("done",function(d){b.flush(d)});return b};f.prototype.push=function(b){this.trigger("data",b)};f.prototype.flush=function(b){this.trigger("done",b)};b.exports=f},{}],63:[function(f,b,e){(function(d){var f=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,c=/^([^\/;?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,l=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,u={buildAbsoluteURL:function(a,b,d){d=d||{};
a=a.trim();b=b.trim();if(!b){if(!d.alwaysNormalize)return a;d=this.parseURL(a);if(!d)throw Error("Error trying to parse base URL.");d.path=u.normalizePath(d.path);return u.buildURLFromParts(d)}var e=this.parseURL(b);if(!e)throw Error("Error trying to parse relative URL.");if(e.scheme){if(!d.alwaysNormalize)return b;e.path=u.normalizePath(e.path);return u.buildURLFromParts(e)}b=this.parseURL(a);if(!b)throw Error("Error trying to parse base URL.");!b.netLoc&&b.path&&"/"!==b.path[0]&&(a=c.exec(b.path),
b.netLoc=a[1],b.path=a[2]);b.netLoc&&!b.path&&(b.path="/");a={scheme:b.scheme,netLoc:e.netLoc,path:null,params:e.params,query:e.query,fragment:e.fragment};e.netLoc||(a.netLoc=b.netLoc,"/"!==e.path[0]&&(e.path?(b=b.path,b=b.substring(0,b.lastIndexOf("/")+1)+e.path,a.path=u.normalizePath(b)):(a.path=b.path,e.params||(a.params=b.params,e.query||(a.query=b.query)))));null===a.path&&(a.path=d.alwaysNormalize?u.normalizePath(e.path):e.path);return u.buildURLFromParts(a)},parseURL:function(a){return(a=f.exec(a))?
{scheme:a[1]||"",netLoc:a[2]||"",path:a[3]||"",params:a[4]||"",query:a[5]||"",fragment:a[6]||""}:null},normalizePath:function(b){for(b=b.split("").reverse().join("").replace(a,"");b.length!==(b=b.replace(l,"")).length;);return b.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};"object"===typeof e&&"object"===typeof b?b.exports=u:"object"===typeof e?e.URLToolkit=u:d.URLToolkit=u})(this)},{}],64:[function(f,b,e){(function(d){Object.defineProperty(e,
"__esModule",{value:!0});var k=f("global/window"),c=k&&k.__esModule?k:{"default":k},a=(d="undefined"!==typeof window?window.videojs:"undefined"!==typeof d?d.videojs:null)&&d.__esModule?d:{"default":d},l=function(b){Object.defineProperties(b.frame,{id:{get:function(){a["default"].log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return b.value.key}},value:{get:function(){a["default"].log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return b.value.data}},privateData:{get:function(){a["default"].log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");
return b.value.data}}})},u=function(a){return isNaN(a)||Infinity===Math.abs(a)?Number.MAX_VALUE:a};e["default"]={addTextTrackData:function(a,b,d){var e=c["default"].WebKitDataCue||c["default"].VTTCue;b&&b.forEach(function(a){this.inbandTextTracks_[a.stream].addCue(new e(a.startTime+this.timestampOffset,a.endTime+this.timestampOffset,a.text))},a);d&&function(){var b=u(a.mediaSource_.duration);d.forEach(function(a){var b=a.cueTime+this.timestampOffset;a.frames.forEach(function(a){var c=new e(b,b,a.value||
a.url||a.data||"");c.frame=a;c.value=a;l(c);this.metadataTrack_.addCue(c)},this)},a);a.metadataTrack_&&a.metadataTrack_.cues&&a.metadataTrack_.cues.length&&function(){for(var c=a.metadataTrack_.cues,d=[],e=0;e<c.length;e++)c[e]&&d.push(c[e]);var f=d.reduce(function(a,b){var c=a[b.startTime]||[];c.push(b);a[b.startTime]=c;return a},{}),k=Object.keys(f).sort(function(a,b){return Number(a)-Number(b)});k.forEach(function(a,c){var d=Number(k[c+1])||b;f[a].forEach(function(a){a.endTime=d})})}()}()},durationOfVideo:u};
b.exports=e["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"global/window":32}],65:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});e["default"]={isAudioCodec:function(b){return/mp4a\.\d+.\d+/i.test(b)},parseContentType:function(b){var d={type:"",parameters:{}};b=b.trim().split(";");d.type=b.shift().trim();b.forEach(function(b){var a=b.trim().split("=");1<a.length&&(b=a[0].replace(/"/g,"").trim(),a=
a[1].replace(/"/g,"").trim(),d.parameters[b]=a)});return d},isVideoCodec:function(b){return/avc1\.[\da-f]+/i.test(b)},translateLegacyCodecs:function(b){return b.map(function(b){return b.replace(/avc1\.(\d+)\.(\d+)/i,function(b,a,d){b=("00"+Number(a).toString(16)).slice(-2);d=("00"+Number(d).toString(16)).slice(-2);return"avc1."+b+"00"+d})})}};b.exports=e["default"]},{}],66:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});e["default"]=function(b,e,c){e=e.player_;if(c.captions&&c.captions.length){b.inbandTextTracks_||
(b.inbandTextTracks_={});for(var a in c.captionStreams)if(!b.inbandTextTracks_[a]){e.tech_.trigger({type:"usage",name:"hls-608"});var d=e.textTracks().getTrackById(a);b.inbandTextTracks_[a]=d?d:e.addRemoteTextTrack({kind:"captions",id:a,label:a},!1).track}}c.metadata&&c.metadata.length&&!b.metadataTrack_&&(b.metadataTrack_=e.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,b.metadataTrack_.inBandMetadataTrackDispatchType=c.metadata.dispatchType)};b.exports=e["default"]},{}],67:[function(f,
b,e){Object.defineProperty(e,"__esModule",{value:!0});e["default"]={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:32768};b.exports=e["default"]},{}],68:[function(f,b,e){(function(d){function k(a){return a&&a.__esModule?a:{"default":a}}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;
d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},u=f("global/document"),q=k(u),r=k("undefined"!==typeof window?window.videojs:"undefined"!==typeof d?d.videojs:null);d=f("./flash-source-buffer");var y=k(d);d=f("./flash-constants");d=k(d);var z=f("./codec-utils");u=function(b){function d(){var a=this;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");l(Object.getPrototypeOf(d.prototype),"constructor",this).call(this);this.sourceBuffers=
[];this.readyState="closed";this.on(["sourceopen","webkitsourceopen"],function(b){a.swfObj=q["default"].getElementById(b.swfId);a.player_=(0,r["default"])(a.swfObj.parentNode);a.tech_=a.swfObj.tech;a.readyState="open";a.tech_.on("seeking",function(){for(var b=a.sourceBuffers.length;b--;)a.sourceBuffers[b].abort()});a.swfObj&&a.swfObj.vjs_load()})}c(d,b);a(d,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(a){a=(0,z.parseContentType)(a);if("video/mp2t"===a.type||
"audio/mp2t"===a.type)a=new y["default"](this);else throw Error("NotSupportedError (Video.js)");this.sourceBuffers.push(a);return a}},{key:"endOfStream",value:function(a){"network"===a?this.tech_.error(2):"decode"===a&&this.tech_.error(3);"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]);return d}(r["default"].EventTarget);e["default"]=u;try{Object.defineProperty(u.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):
NaN},set:function(a){var b,c=this.swfObj.vjs_getProperty("duration");this.swfObj.vjs_setProperty("duration",a);if(a<c)for(b=0;b<this.sourceBuffers.length;b++)this.sourceBuffers[b].remove(a,c);return a}})}catch(x){u.prototype.duration=NaN}for(var p in d["default"])u[p]=d["default"][p];b.exports=e["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./codec-utils":65,"./flash-constants":67,"./flash-source-buffer":69,"global/document":31}],
69:[function(f,b,e){(function(d){function k(a){return a&&a.__esModule?a:{"default":a}}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},u=f("global/window"),q=k(u),r=k("undefined"!==typeof window?window.videojs:
"undefined"!==typeof d?d.videojs:null);d=f("mux.js/lib/flv");var y=k(d);d=f("./remove-cues-from-track");var z=k(d);d=f("./create-text-tracks-if-necessary");var p=k(d),x=f("./add-text-track-data");d=f("./flash-transmuxer-worker");var t=k(d);d=f("webwackify");var B=k(d);d=f("./flash-constants");var C=k(d),F=function(){var a=void 0;try{a=f.resolve("./flash-transmuxer-worker")}catch(K){}return a},H=function(a){q["default"].setTimeout(a,C["default"].TIME_BETWEEN_CHUNKS)},G=function(a,b){if("number"!==
typeof b||0>b)b=0;b=Math.pow(10,b);return Math.round(a*b)/b};d=function(b){function d(a){var b=this;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");l(Object.getPrototypeOf(d.prototype),"constructor",this).call(this);var c=void 0;this.chunkSize_=C["default"].BYTES_PER_CHUNK;this.buffer_=[];this.bufferSize_=0;this.basePtsOffset_=NaN;this.mediaSource_=a;this.videoBufferEnd_=this.audioBufferEnd_=NaN;this.updating=!1;this.timestampOffset_=0;c=q["default"].btoa(String.fromCharCode.apply(null,
Array.prototype.slice.call(y["default"].getFlvHeader())));a=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+a+Math.random().toString(36).slice(2,8);this.flashEncodedDataName_="vjs_flashEncodedData_"+a+Math.random().toString(36).slice(2,8);q["default"][this.flashEncodedHeaderName_]=function(){delete q["default"][b.flashEncodedHeaderName_];return c};this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_);this.transmuxer_=
(0,B["default"])(t["default"],F());this.transmuxer_.postMessage({action:"init",options:{}});this.transmuxer_.onmessage=function(a){"data"===a.data.action&&b.receiveBuffer_(a.data.segment)};this.one("updateend",function(){b.mediaSource_.tech_.trigger("loadedmetadata")});Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"===typeof a&&0<=a&&(this.timestampOffset_=a,this.mediaSource_.swfObj.vjs_discontinuity(),this.videoBufferEnd_=this.audioBufferEnd_=
this.basePtsOffset_=NaN,this.transmuxer_.postMessage({action:"reset"}))}});Object.defineProperty(this,"buffered",{get:function(){if(!(this.mediaSource_&&this.mediaSource_.swfObj&&"vjs_getProperty"in this.mediaSource_.swfObj))return r["default"].createTimeRange();var a=this.mediaSource_.swfObj.vjs_getProperty("buffered");a&&a.length&&(a[0][0]=G(a[0][0],3),a[0][1]=G(a[0][1],3));return r["default"].createTimeRanges(a)}});this.mediaSource_.player_.on("seeked",function(){(0,z["default"])(0,Infinity,b.metadataTrack_);
if(b.inbandTextTracks_)for(var a in b.inbandTextTracks_)(0,z["default"])(0,Infinity,b.inbandTextTracks_[a])});var e=this.onHlsReset_.bind(this);this.mediaSource_.player_.tech_.on("hls-reset",e);this.mediaSource_.player_.tech_.hls.on("dispose",function(){b.transmuxer_.terminate();b.mediaSource_.player_.tech_.off("hls-reset",e)})}c(d,b);a(d,[{key:"appendBuffer",value:function(a){if(this.updating)throw a=Error("SourceBuffer.append() cannot be called while an update is in progress"),a.name="InvalidStateError",
a.code=11,a;this.updating=!0;this.mediaSource_.readyState="open";this.trigger({type:"update"});this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"abort",value:function(){this.buffer_=[];this.bufferSize_=0;this.mediaSource_.swfObj.vjs_abort();this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(a,b){(0,z["default"])(a,b,this.metadataTrack_);
if(this.inbandTextTracks_)for(var c in this.inbandTextTracks_)(0,z["default"])(a,b,this.inbandTextTracks_[c]);this.trigger({type:"update"});this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(a){var b=this;(0,p["default"])(this,this.mediaSource_,a);(0,x.addTextTrackData)(this,a.captions,a.metadata);H(function(){var c=b.convertTagsToData_(a);0===b.buffer_.length&&H(b.processBuffer_.bind(b));c&&(b.buffer_.push(c),b.bufferSize_+=c.byteLength)})}},{key:"processBuffer_",value:function(){var a=
this,b=C["default"].BYTES_PER_CHUNK;if(this.buffer_.length){var c=this.buffer_[0].subarray(0,b);c.byteLength<b||this.buffer_[0].byteLength===b?this.buffer_.shift():this.buffer_[0]=this.buffer_[0].subarray(b);this.bufferSize_-=c.byteLength;b=[];for(var d=c.byteLength,e=0;e<d;e++)b.push(String.fromCharCode(c[e]));var f=q["default"].btoa(b.join(""));q["default"][this.flashEncodedDataName_]=function(){H(a.processBuffer_.bind(a));delete q["default"][a.flashEncodedDataName_];return f};this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}else!1!==
this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function(a){var b=0,c=this.mediaSource_.tech_,d=0,e=a.tags.videoTags;a=a.tags.audioTags;isNaN(this.basePtsOffset_)&&(e.length||a.length)&&(this.basePtsOffset_=Math.min((a[0]||{pts:Infinity}).pts,(e[0]||{pts:Infinity}).pts));c.seeking()&&(this.audioBufferEnd_=this.videoBufferEnd_=NaN);isNaN(this.videoBufferEnd_)?(c.buffered().length&&(d=c.buffered().end(0)-this.timestampOffset),c.seeking()&&(d=Math.max(d,
c.currentTime()-this.timestampOffset)),d=1E3*d+this.basePtsOffset_):d=this.videoBufferEnd_+.1;var f=e.length;if(f&&e[f-1].pts>=d){for(;--f;){var g=e[f];if(!(g.pts>d)&&(g.keyFrame||g.metaDataTag))break}for(;f&&e[f-1].metaDataTag;)f--}e=e.slice(f);g=isNaN(this.audioBufferEnd_)?d:this.audioBufferEnd_+.1;e.length&&(g=Math.min(g,e[0].pts));for(f=0;f<a.length&&!(a[f].pts>=g);)f++;a=a.slice(f);a.length&&(this.audioBufferEnd_=a[a.length-1].pts);e.length&&(this.videoBufferEnd_=e[e.length-1].pts);a=this.getOrderedTags_(e,
a);if(0!==a.length){if(a[0].pts<d&&c.seeking()){f=1/30;c=c.currentTime()-(d-a[0].pts)/1E3;c<f&&(c=0);try{this.mediaSource_.swfObj.vjs_adjustCurrentTime(c)}catch(V){}}for(c=0;c<a.length;c++)b+=a[c].bytes.byteLength;b=new Uint8Array(b);for(d=c=0;c<a.length;c++)b.set(a[c].bytes,d),d+=a[c].bytes.byteLength;return b}}},{key:"getOrderedTags_",value:function(a,b){for(var c,d=[];a.length||b.length;)c=a.length?b.length?b[0].dts<a[0].dts?b.shift():a.shift():a.shift():b.shift(),d.push(c);return d}},{key:"onHlsReset_",
value:function(){this.transmuxer_.postMessage({action:"resetCaptions"})}}]);return d}(r["default"].EventTarget);e["default"]=d;b.exports=e["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./add-text-track-data":64,"./create-text-tracks-if-necessary":66,"./flash-constants":67,"./flash-transmuxer-worker":70,"./remove-cues-from-track":72,"global/window":32,"mux.js/lib/flv":46,webwackify:76}],70:[function(f,b,e){Object.defineProperty(e,
"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=f("global/window"),c=k&&k.__esModule?k:{"default":k},a=(f=f("mux.js/lib/flv"))&&f.__esModule?f:{"default":f},l=function(a){a.on("data",function(a){c["default"].postMessage({action:"data",segment:a})});a.on("done",function(a){c["default"].postMessage({action:"done"})})},
u=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.options=a||{};this.init()}d(b,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new a["default"].Transmuxer(this.options);l(this.transmuxer)}},{key:"push",value:function(a){a=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(a)}},{key:"reset",value:function(){this.init()}},{key:"flush",value:function(){this.transmuxer.flush()}},
{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}}]);return b}(),q=function(a){a.onmessage=function(a){if("init"===a.data.action&&a.data.options)this.messageHandlers=new u(a.data.options);else if(this.messageHandlers||(this.messageHandlers=new u),a.data&&a.data.action&&"init"!==a.data.action&&this.messageHandlers[a.data.action])this.messageHandlers[a.data.action](a.data)}};e["default"]=function(a){return new q(a)};b.exports=e["default"]},{"global/window":32,"mux.js/lib/flv":46}],
71:[function(f,b,e){(function(d){function k(a){return a&&a.__esModule?a:{"default":a}}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},u=f("global/window"),q=k(u);u=f("global/document");var r=k(u),y=k("undefined"!==
typeof window?window.videojs:"undefined"!==typeof d?d.videojs:null);d=f("./virtual-source-buffer");var z=k(d),p=f("./add-text-track-data"),x=f("./codec-utils");d=function(b){function d(){var a=this;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");l(Object.getPrototypeOf(d.prototype),"constructor",this).call(this);var b=void 0;this.nativeMediaSource_=new q["default"].MediaSource;for(b in this.nativeMediaSource_)b in d.prototype||"function"!==typeof this.nativeMediaSource_[b]||
(this[b]=this.nativeMediaSource_[b].bind(this.nativeMediaSource_));this.duration_=NaN;Object.defineProperty(this,"duration",{get:function(){return Infinity===this.duration_?this.duration_:this.nativeMediaSource_.duration},set:function(a){this.duration_=a;Infinity!==a&&(this.nativeMediaSource_.duration=a)}});Object.defineProperty(this,"seekable",{get:function(){return Infinity===this.duration_?y["default"].createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}});
Object.defineProperty(this,"readyState",{get:function(){return this.nativeMediaSource_.readyState}});Object.defineProperty(this,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}});this.sourceBuffers=[];this.activeSourceBuffers_=[];this.updateActiveSourceBuffers_=function(){a.activeSourceBuffers_.length=0;if(1===a.sourceBuffers.length){var b=a.sourceBuffers[0];b.appendAudioInitSegment_=!0;b.audioDisabled_=!b.audioCodec_;a.activeSourceBuffers_.push(b)}else{var c=!1,d=!0;for(b=
0;b<a.player_.audioTracks().length;b++){var e=a.player_.audioTracks()[b];if(e.enabled&&"main"!==e.kind){c=!0;d=!1;break}}a.sourceBuffers.forEach(function(b){b.appendAudioInitSegment_=!0;if(b.videoCodec_&&b.audioCodec_)b.audioDisabled_=c;else if(b.videoCodec_&&!b.audioCodec_)b.audioDisabled_=!0,d=!1;else if(!b.videoCodec_&&b.audioCodec_&&(b.audioDisabled_=d))return;a.activeSourceBuffers_.push(b)})}};this.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(a){a.appendAudioInitSegment_=
!0})};this.onHlsReset_=function(){a.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.postMessage({action:"resetCaptions"})})};this.onHlsSegmentTimeMapping_=function(b){a.sourceBuffers.forEach(function(a){return a.timeMapping_=b.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(a){this.nativeMediaSource_.addEventListener(a,this.trigger.bind(this))},this);this.on("sourceopen",function(b){if(b=r["default"].querySelector('[src="'+a.url_+'"]'))a.player_=(0,y["default"])(b.parentNode),
a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_)});this.on("sourceended",function(b){b=(0,p.durationOfVideo)(a.duration);for(var c=
0;c<a.sourceBuffers.length;c++){var d=a.sourceBuffers[c];(d=d.metadataTrack_&&d.metadataTrack_.cues)&&d.length&&(d[d.length-1].endTime=b)}});this.on("sourceclose",function(a){this.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.terminate()});this.sourceBuffers.length=0;this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),
this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))})}c(d,b);a(d,[{key:"addSeekableRange_",value:function(a,b){if(Infinity!==this.duration)throw a=Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),a.name="InvalidStateError",
a.code=11,a;if(b>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))this.nativeMediaSource_.duration=b}},{key:"addSourceBuffer",value:function(a){var b=void 0;b=(0,x.parseContentType)(a);/^(video|audio)\/mp2t$/i.test(b.type)?(a=[],b.parameters&&b.parameters.codecs&&(a=b.parameters.codecs.split(","),a=(0,x.translateLegacyCodecs)(a),a=a.filter(function(a){return(0,x.isAudioCodec)(a)||(0,x.isVideoCodec)(a)})),0===a.length&&(a=["avc1.4d400d","mp4a.40.2"]),b=new z["default"](this,
a),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),b.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):b=this.nativeMediaSource_.addSourceBuffer(a);this.sourceBuffers.push(b);return b}}]);return d}(y["default"].EventTarget);e["default"]=d;b.exports=e["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./add-text-track-data":64,"./codec-utils":65,"./virtual-source-buffer":75,
"global/document":31,"global/window":32}],72:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});e["default"]=function(b,e,c){var a;if(c&&c.cues)for(a=c.cues.length;a--;){var d=c.cues[a];d.startTime<=e&&d.endTime>=b&&c.removeCue(d)}};b.exports=e["default"]},{}],73:[function(f,b,e){Object.defineProperty(e,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=f("global/window"),c=k&&k.__esModule?k:{"default":k},a=(f=f("mux.js/lib/mp4"))&&f.__esModule?f:{"default":f},l=function(a){a.on("data",function(a){var b=a.initSegment;a.initSegment={data:b.buffer,byteOffset:b.byteOffset,byteLength:b.byteLength};b=a.data;a.data=b.buffer;c["default"].postMessage({action:"data",segment:a,byteOffset:b.byteOffset,byteLength:b.byteLength},[a.data])});if(a.captionStream)a.captionStream.on("data",
function(a){c["default"].postMessage({action:"caption",data:a})});a.on("done",function(a){c["default"].postMessage({action:"done"})});a.on("gopInfo",function(a){c["default"].postMessage({action:"gopInfo",gopInfo:a})})},u=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.options=a||{};this.init()}d(b,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new a["default"].Transmuxer(this.options);l(this.transmuxer)}},
{key:"push",value:function(a){a=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(a)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(a){this.transmuxer.setBaseMediaDecodeTime(Math.round(9E4*(a.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(a){this.transmuxer.setAudioAppendStart(Math.ceil(9E4*a.appendStart))}},{key:"flush",value:function(a){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},
{key:"alignGopsWith",value:function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())}}]);return b}(),q=function(a){a.onmessage=function(a){if("init"===a.data.action&&a.data.options)this.messageHandlers=new u(a.data.options);else if(this.messageHandlers||(this.messageHandlers=new u),a.data&&a.data.action&&"init"!==a.data.action&&this.messageHandlers[a.data.action])this.messageHandlers[a.data.action](a.data)}};e["default"]=function(a){return new q(a)};b.exports=e["default"]},{"global/window":32,
"mux.js/lib/mp4":55}],74:[function(f,b,e){(function(b){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(e,"__esModule",{value:!0});var c=f("global/window"),a=d(c);c=f("./flash-media-source");var l=d(c);c=f("./html-media-source");var u=d(c),q=d("undefined"!==typeof window?window.videojs:"undefined"!==typeof b?b.videojs:null),r=0,y={mode:"auto"};q["default"].mediaSources={};var z=function(a,b){if(a=q["default"].mediaSources[a])a.trigger({type:"sourceopen",swfId:b});else throw Error("Media Source not found (Video.js)");
},p=function(){return!!a["default"].MediaSource&&!!a["default"].MediaSource.isTypeSupported&&a["default"].MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')};b=function(a){a=q["default"].mergeOptions(y,a);this.MediaSource={open:z,supportsNativeMediaSources:p};if("html5"===a.mode||"auto"===a.mode&&p())return new u["default"];if(q["default"].getTech("Flash"))return new l["default"];throw Error("Cannot use Flash or Html5 to create a MediaSource for this video");};e.MediaSource=b;
b.open=z;b.supportsNativeMediaSources=p;c={createObjectURL:function(b){if(b instanceof u["default"]){var c=a["default"].URL.createObjectURL(b.nativeMediaSource_);return b.url_=c}if(!(b instanceof l["default"]))return c=a["default"].URL.createObjectURL(b),b.url_=c;c="blob:vjs-media-source/"+r;r++;q["default"].mediaSources[c]=b;return c}};e.URL=c;q["default"].MediaSource=b;q["default"].URL=c}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:
{})},{"./flash-media-source":68,"./html-media-source":71,"global/window":32}],75:[function(f,b,e){(function(b){function d(a){return a&&a.__esModule?a:{"default":a}}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,
"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===
b?void 0:b.call(c)}},u=d("undefined"!==typeof window?window.videojs:"undefined"!==typeof b?b.videojs:null);b=f("./create-text-tracks-if-necessary");var q=d(b);b=f("./remove-cues-from-track");var r=d(b),y=f("./add-text-track-data");b=f("webwackify");var z=d(b);b=f("./transmuxer-worker");var p=d(b),x=f("./codec-utils"),t=function(){var a=void 0;try{a=f.resolve("./transmuxer-worker")}catch(E){}return a},B=function(a,b){var c=a.addSourceBuffer(b),d=Object.create(null);d.updating=!1;d.realBuffer_=c;a=
function(a){"function"===typeof c[a]?d[a]=function(){return c[a].apply(c,arguments)}:"undefined"===typeof d[a]&&Object.defineProperty(d,a,{get:function(){return c[a]},set:function(b){return c[a]=b}})};for(var e in c)a(e);return d},C=function(a,b,c){if(!b||!a.length)return[];b=Math.ceil(9E4*(b.currentTime()-c+3));for(c=0;c<a.length&&!(a[c].pts>b);c++);return a.slice(c)};e.gopsSafeToAlignWith=C;var F=function(a,b,c){if(!b.length)return a;if(c)return b.slice();c=b[0].pts;var d=0;for(d;d<a.length&&!(a[d].pts>=
c);d++);return a.slice(0,d).concat(b)};e.updateGopBuffer=F;var H=function(a,b,c,d){b=Math.ceil(9E4*(b-d));var e=Math.ceil(9E4*(c-d));c=a.slice();for(d=a.length;d--&&!(a[d].pts<=e););if(-1===d)return c;for(e=d+1;e--&&!(a[e].pts<=b););e=Math.max(e,0);c.splice(e,d-e+1);return c};e.removeGopBuffer=H;b=function(b){function d(a,b){var c=this;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");l(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,u["default"].EventTarget);
this.timestampOffset_=0;this.pendingBuffers_=[];this.bufferUpdating_=!1;this.mediaSource_=a;this.codecs_=b;this.videoCodec_=this.audioCodec_=null;this.audioDisabled_=!1;this.appendAudioInitSegment_=!0;this.gopBuffer_=[];this.timeMapping_=0;this.safeAppend_=11<=u["default"].browser.IE_VERSION;a={remux:!1,alignGopsAtEnd:this.safeAppend_};this.codecs_.forEach(function(a){(0,x.isAudioCodec)(a)?c.audioCodec_=a:(0,x.isVideoCodec)(a)&&(c.videoCodec_=a)});this.transmuxer_=(0,z["default"])(p["default"],t());
this.transmuxer_.postMessage({action:"init",options:a});this.transmuxer_.onmessage=function(a){if("data"===a.data.action)return c.data_(a);if("done"===a.data.action)return c.done_(a);if("gopInfo"===a.data.action)return c.appendGopInfo_(a)};Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"===typeof a&&0<=a&&(this.timestampOffset_=a,this.appendAudioInitSegment_=!0,this.timeMapping_=this.gopBuffer_.length=0,this.transmuxer_.postMessage({action:"setTimestampOffset",
timestampOffset:a}))}});Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(a){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=a);this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=a)}});Object.defineProperty(this,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(this,
"buffered",{get:function(){var a=null,b=null,c=0,d=[],e=[];if(!this.videoBuffer_&&!this.audioBuffer_)return u["default"].createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_||this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return u["default"].createTimeRange();for(var f=this.videoBuffer_.buffered,g=this.audioBuffer_.buffered,k=f.length;k--;)d.push({time:f.start(k),type:"start"}),
d.push({time:f.end(k),type:"end"});for(k=g.length;k--;)d.push({time:g.start(k),type:"start"}),d.push({time:g.end(k),type:"end"});d.sort(function(a,b){return a.time-b.time});for(k=0;k<d.length;k++)"start"===d[k].type?(c++,2===c&&(a=d[k].time)):"end"===d[k].type&&(c--,1===c&&(b=d[k].time)),null!==a&&null!==b&&(e.push([a,b]),b=a=null);return u["default"].createTimeRanges(e)}})}c(d,b);a(d,[{key:"data_",value:function(a){var b=a.data.segment;b.data=new Uint8Array(b.data,a.data.byteOffset,a.data.byteLength);
b.initSegment=new Uint8Array(b.initSegment.data,b.initSegment.byteOffset,b.initSegment.byteLength);(0,q["default"])(this,this.mediaSource_,b);this.pendingBuffers_.push(b)}},{key:"done_",value:function(a){"closed"===this.mediaSource_.readyState?this.pendingBuffers_.length=0:this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var a=this,b=["audio","video"];b.forEach(function(c){if(a[c+"Codec_"]&&!a[c+"Buffer_"]){var d=null;a.mediaSource_[c+"Buffer_"]?(d=a.mediaSource_[c+
"Buffer_"],d.updating=!1):(d=B(a.mediaSource_.nativeMediaSource_,c+'/mp4;codecs="'+a[c+"Codec_"]+'"'),a.mediaSource_[c+"Buffer_"]=d);a[c+"Buffer_"]=d;["update","updatestart","updateend"].forEach(function(e){d.addEventListener(e,function(){if("audio"!==c||!a.audioDisabled_)if("updateend"===e&&(a[c+"Buffer_"].updating=!1),b.every(function(b){return"audio"===b&&a.audioDisabled_?!0:c!==b&&a[b+"Buffer_"]&&a[b+"Buffer_"].updating?!1:!0}))return a.trigger(e)})})}})}},{key:"appendBuffer",value:function(a){this.bufferUpdating_=
!0;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var b=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:b.end(b.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:C(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)});this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]);this.transmuxer_.postMessage({action:"flush"})}},
{key:"appendGopInfo_",value:function(a){this.gopBuffer_=F(this.gopBuffer_,a.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(a,b){this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(a,b),this.gopBuffer_=H(this.gopBuffer_,a,b,this.timeMapping_));!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(a,b));(0,r["default"])(a,b,this.metadataTrack_);if(this.inbandTextTracks_)for(var c in this.inbandTextTracks_)(0,r["default"])(a,
b,this.inbandTextTracks_[c])}},{key:"processPendingSegments_",value:function(){var a={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};a=this.pendingBuffers_.reduce(function(a,b){var c=b.type,d=b.data,e=b.initSegment;a[c].segments.push(d);a[c].bytes+=d.byteLength;a[c].initSegment=e;b.captions&&(a.captions=a.captions.concat(b.captions));b.info&&(a[c].info=b.info);b.metadata&&(a.metadata=a.metadata.concat(b.metadata));return a},a);this.videoBuffer_||this.audioBuffer_||
(0===a.video.bytes&&(this.videoCodec_=null),0===a.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_());a.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:a.audio.info});a.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:a.video.info});this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(a.audio.segments.unshift(a.audio.initSegment),a.audio.bytes+=a.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var b=!1;this.videoBuffer_&&
a.video.bytes?(a.video.segments.unshift(a.video.initSegment),a.video.bytes+=a.video.initSegment.byteLength,this.concatAndAppendSegments_(a.video,this.videoBuffer_),(0,y.addTextTrackData)(this,a.captions,a.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(b=!0);!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(a.audio,this.audioBuffer_);this.pendingBuffers_.length=0;b&&this.trigger("updateend");this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(a,
b){var c=0,d=void 0;if(a.bytes){d=new Uint8Array(a.bytes);a.segments.forEach(function(a){d.set(a,c);c+=a.byteLength});try{b.updating=!0,b.appendBuffer(d)}catch(M){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:M.message,originalError:M})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort();!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"});
this.pendingBuffers_.length=0;this.bufferUpdating_=!1}}]);return d}(u["default"].EventTarget);e["default"]=b}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./add-text-track-data":64,"./codec-utils":65,"./create-text-tracks-if-necessary":66,"./remove-cues-from-track":72,"./transmuxer-worker":73,webwackify:76}],76:[function(f,b,e,d,k,c){var a=d,l=k,u=JSON.stringify,q=!1;f=function(a){function b(d){if(c[d])return c[d].exports;var e=
c[d]={i:d,l:!1,exports:{}};a[d].call(e.exports,e,e.exports,b);e.l=!0;return e.exports}var c={};b.m=a;b.c=c;b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})};b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};b.d(c,"a",c);return c};b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};b.p="";return b(b.s=entryModule)};"undefined"===typeof a&&(q=!0,a=f,l=__webpack_modules__);var r=function(b){for(var d=
Object.keys(c),e,f=0;f<d.length;f++){var k=d[f],r=c[k].exports;if(r===b||r&&r.default===b){e=k;break}}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);r={};for(f=0;f<d.length;f++)k=d[f],r[k]=k;l[e]=["function(require,module,exports){"+b+"(self); }",r]}b=Math.floor(Math.pow(16,8)*Math.random()).toString(16);d={};d[e]=e;l[b]=["function(require,module,exports){var f = require("+u(e)+");(f.default ? f.default : f)(self);}",d];return"("+a+")({"+Object.keys(l).map(function(a){return u(a)+
":["+l[a][0]+","+u(l[a][1])+"]"}).join(",")+"},{},["+u(b)+"])"},y=function(b,c){var d="string"===typeof c;var e=d?{}:[];Object.keys(l).forEach(function(a){l[a]&&(e[a]=l[a].toString())});var f=__webpack_require__(c);if(!f||f!==b&&f.default!==b)f=e[c],e[c]=f.substring(0,f.length-1)+"\n"+b.name+"();\n}";d?(c=u(c),b="{"+Object.keys(e).map(function(a){return u(a)+":"+e[a]}).join(",")+"}"):b="["+e.join(",")+"]";return"var fn = ("+a.toString().replace("entryModule",c)+")("+b+');\n(typeof fn === "function") && fn(self);'};
b.exports=function(a,b){a=q?y(a,b):r(a);a=new Blob([a],{type:"text/javascript"});a=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(a);b=new Worker(a);b.objectURL=a;return b}},{}],77:[function(f,b,e){(function(d){function e(a){return a&&a.__esModule?a:{"default":a}}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===
a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},u=f("global/document"),q=e(u);u=f("./playlist-loader");u=e(u);var r=f("./playlist");r=e(r);var y=f("./xhr"),z=e(y),p=f("aes-decrypter");y=f("./bin-utils");var x=e(y);y=f("videojs-contrib-media-sources");var t=f("m3u8-parser");t=e(t);var B=e("undefined"!==typeof window?window.videojs:"undefined"!==typeof d?d.videojs:null),C=f("./master-playlist-controller");d=f("./config");var F=e(d);d=f("./rendition-mixin");
var H=e(d);d=f("global/window");d=e(d);var G=f("./playback-watcher"),E=e(G);G=f("./reload-source-on-error");G=e(G);var K=f("./playlist-selectors.js"),g={PlaylistLoader:u["default"],Playlist:r["default"],Decrypter:p.Decrypter,AsyncStream:p.AsyncStream,decrypt:p.decrypt,utils:x["default"],STANDARD_PLAYLIST_SELECTOR:K.lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:K.lowestBitrateCompatibleVariantSelector,comparePlaylistBandwidth:K.comparePlaylistBandwidth,comparePlaylistResolution:K.comparePlaylistResolution,
xhr:(0,z["default"])()};"GOAL_BUFFER_LENGTH MAX_GOAL_BUFFER_LENGTH GOAL_BUFFER_LENGTH_RATE BUFFER_LOW_WATER_LINE MAX_BUFFER_LOW_WATER_LINE BUFFER_LOW_WATER_LINE_RATE BANDWIDTH_VARIANCE".split(" ").forEach(function(a){Object.defineProperty(g,a,{get:function(){B["default"].log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");return F["default"][a]},set:function(b){B["default"].log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");"number"!==typeof b||0>b?B["default"].log.warn("value of Hls."+
a+" must be greater than or equal to 0"):F["default"][a]=b}})});var m=function(a,b){b=b.media();for(var c=-1,d=0;d<a.length;d++)if(a[d].id===b.uri){c=d;break}a.selectedIndex_=c;a.trigger({selectedIndex:c,type:"change"})},A=function(a,b){b.representations().forEach(function(b){a.addQualityLevel(b)});m(a,b.playlists)};g.canPlaySource=function(){return B["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};g.supportsNativeHls=function(){var a=q["default"].createElement("video");
return B["default"].getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(b){return/maybe|probably/i.test(a.canPlayType(b))}):!1}();g.isSupported=function(){return B["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var M=function(b){function d(a,b,c){var e=this;if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
l(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,b,c.hls);b.options_&&b.options_.playerId&&(c=(0,B["default"])(b.options_.playerId),c.hasOwnProperty("hls")||Object.defineProperty(c,"hls",{get:function(){B["default"].log.warn("player.hls is deprecated. Use player.tech_.hls instead.");b.trigger({type:"usage",name:"hls-player-access"});return e}}));this.tech_=b;this.source_=a;this.stats={};this.ignoreNextSeekingEvent_=!1;this.setOptions_();if(this.options_.overrideNative&&(b.featuresNativeVideoTracks||
b.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");this.on(q["default"],["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(a){(a=q["default"].fullscreenElement||q["default"].webkitFullscreenElement||q["default"].mozFullScreenElement||q["default"].msFullscreenElement)&&a.contains(e.tech_.el())&&e.masterPlaylistController_.fastQualityChange_()});this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?
this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())});this.on(this.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()});this.on(this.tech_,"play",this.play)}c(d,b);a(d,[{key:"setOptions_",value:function(){var a=this;this.options_.withCredentials=this.options_.withCredentials||!1;"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300);"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=
4194304);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&4194304===this.options_.bandwidth;["withCredentials","bandwidth"].forEach(function(b){"undefined"!==typeof a.source_[b]&&(a.options_[b]=a.source_[b])});this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(a){var b=this;a&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=g,this.masterPlaylistController_=new C.MasterPlaylistController(this.options_),
this.playbackWatcher_=new E["default"](B["default"].mergeOptions(this.options_,{seekable:function(){return b.seekable()}})),this.masterPlaylistController_.on("error",function(){B["default"].players[b.tech_.options_.playerId].error(b.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):g.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=g.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=
this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(a){this.masterPlaylistController_.selectPlaylist=a.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=a;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=
1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=a;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){B["default"].log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return b.bandwidth||
0},enumerable:!0},mediaRequests:{get:function(){return b.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return b.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return b.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return b.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return b.masterPlaylistController_.mediaTransferDuration_()||
0},enumerable:!0},mediaBytesTransferred:{get:function(){return b.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return b.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){(0,H["default"])(b)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),
this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return b.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(B["default"].URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var a=this,b=B["default"].players[this.tech_.options_.playerId];b&&b.qualityLevels&&(this.qualityLevels_=b.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){A(a.qualityLevels_,
a)}),this.playlists.on("mediachange",function(){m(a.qualityLevels_,a.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(a){this.masterPlaylistController_.setCurrentTime(a)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.masterPlaylistController_&&
this.masterPlaylistController_.dispose();this.qualityLevels_&&this.qualityLevels_.dispose();l(Object.getPrototypeOf(d.prototype),"dispose",this).call(this)}}]);return d}(B["default"].getComponent("Component"));u=function ia(a){return{canHandleSource:function(b){var c=B["default"].mergeOptions(B["default"].options,1>=arguments.length||void 0===arguments[1]?{}:arguments[1]);return c.hls&&c.hls.mode&&c.hls.mode!==a?!1:ia.canPlayType(b.type,c)},handleSource:function(b,c){var d=B["default"].mergeOptions(B["default"].options,
2>=arguments.length||void 0===arguments[2]?{}:arguments[2],{hls:{mode:a}});"flash"===a&&c.setTimeout(function(){c.trigger("loadstart")},1);c.hls=new M(b,c,d);c.hls.xhr=(0,z["default"])();c.hls.src(b.src);return c.hls},canPlayType:function(a){var b=B["default"].mergeOptions(B["default"].options,1>=arguments.length||void 0===arguments[1]?{}:arguments[1]);return ia.canPlayType(a,b)?"maybe":""}}};u.canPlayType=function(a,b){return B["default"].browser.IE_VERSION&&10>=B["default"].browser.IE_VERSION||
!b.hls.overrideNative&&g.supportsNativeHls?!1:/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(a)};if("undefined"===typeof B["default"].MediaSource||"undefined"===typeof B["default"].URL)B["default"].MediaSource=y.MediaSource,B["default"].URL=y.URL;r=B["default"].getTech("Flash");y.MediaSource.supportsNativeMediaSources()&&B["default"].getTech("Html5").registerSourceHandler(u("html5"),0);d["default"].Uint8Array&&r&&r.registerSourceHandler(u("flash"));B["default"].HlsHandler=M;B["default"].HlsSourceHandler=
u;B["default"].Hls=g;B["default"].use||B["default"].registerComponent("Hls",g);B["default"].m3u8=t["default"];B["default"].options.hls=B["default"].options.hls||{};B["default"].registerPlugin?B["default"].registerPlugin("reloadSourceOnError",G["default"]):B["default"].plugin("reloadSourceOnError",G["default"]);b.exports={Hls:g,HlsHandler:M,HlsSourceHandler:u}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bin-utils":2,"./config":3,
"./master-playlist-controller":5,"./playback-watcher":8,"./playlist":11,"./playlist-loader":9,"./playlist-selectors.js":10,"./reload-source-on-error":13,"./rendition-mixin":14,"./xhr":21,"aes-decrypter":25,"global/document":31,"global/window":32,"m3u8-parser":33,"videojs-contrib-media-sources":74}]},{},[77])(77)});(function(h){var f=function(b){return{hide:function(){b.style.display="none";return this},attach:function(e,d){b.addEventListener?b.addEventListener(e,d,!1):b.attachEvent&&b.attachEvent("on"+e,d);return function(){f(b).detach(e,d)}},detach:function(e,d){b.removeEventListener?b.removeEventListener(e,d,!1):b.attachEvent&&b.detachEvent("on"+e,d);return this},contains:function(e){return e?b===e?!0:b.contains?b.contains(e):!!(e.compareDocumentPosition(b)&8):!1},insertBefore:function(e){e.parentNode.insertBefore(b,
e);return this},remove:function(){b.parentNode.removeChild(b);return this},css:function(e){if(null==b.style)throw new f.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!");null!=e.opacity&&"string"!==typeof b.style.opacity&&"undefined"!==typeof b.filters&&(e.filter="alpha(opacity="+Math.round(100*e.opacity)+")");f.extend(b.style,e);return this},hasClass:function(e,d){e=new RegExp("(^| )"+e+"( |$)");return e.test(b.className)||!(!d||!e.test(b.parentNode.className))},
addClass:function(e){f(b).hasClass(e)||(b.className+=" "+e);return this},removeClass:function(e){b.className=b.className.replace(new RegExp("(^| )"+e+"( |$)")," ").replace(/^\s+|\s+$/g,"");return this},getByClass:function(e,d){var h=[];if(d&&b.querySelector)return b.querySelector("."+e);if(b.querySelectorAll)return b.querySelectorAll("."+e);var c=b.getElementsByTagName("*");f.each(c,function(a,b){f(b).hasClass(e)&&h.push(b)});return d?h[0]:h},getFirstByClass:function(e){return f(b).getByClass(e,!0)},
children:function(){for(var e=[],d=b.firstChild;d;)1===d.nodeType&&e.push(d),d=d.nextSibling;return e},setText:function(e){b.innerText=e;b.textContent=e;return this},clearText:function(){return f(b).setText("")},hasAttribute:function(e){if(b.hasAttribute)return b.hasAttribute(e)?null==/^false$/i.exec(b.getAttribute(e)):!1;e=b[e];return void 0===e?!1:null==/^false$/i.exec(e)}}};(function(){f.canvasToBlob=function(b,e,d){return f.dataUriToBlob(b.toDataURL(e,d))};f.dataUriToBlob=function(b){var e=0<=
b.split(",")[0].indexOf("base64")?atob(b.split(",")[1]):decodeURI(b.split(",")[1]);var d=b.split(",")[0].split(":")[1].split(";")[0];b=new ArrayBuffer(e.length);var h=new Uint8Array(b);f.each(e,function(b,a){h[b]=a.charCodeAt(0)});return function(b,a){var c=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;return(c=c&&new c)?(c.append(b),c.getBlob(a)):new Blob([b],{type:a})}(b,d)};f.log=function(b,e){if(window.console)if(e&&"info"!==e)if(window.console[e])window.console[e](b);
else window.console.log("<"+e+"> "+b);else window.console.log(b)};f.isObject=function(b){return b&&!b.nodeType&&"[object Object]"===Object.prototype.toString.call(b)};f.isFunction=function(b){return"function"===typeof b};f.isArray=function(b){return"[object Array]"===Object.prototype.toString.call(b)||b&&window.ArrayBuffer&&b.buffer&&b.buffer.constructor===ArrayBuffer};f.isItemList=function(b){return"[object DataTransferItemList]"===Object.prototype.toString.call(b)};f.isNodeList=function(b){return"[object NodeList]"===
Object.prototype.toString.call(b)||b.item&&b.namedItem};f.isString=function(b){return"[object String]"===Object.prototype.toString.call(b)};f.trimStr=function(b){return String.prototype.trim?b.trim():b.replace(/^\s+|\s+$/g,"")};f.format=function(b){var e=Array.prototype.slice.call(arguments,1),d=b,h=d.indexOf("{}");f.each(e,function(b,a){b=d.substring(0,h);var c=d.substring(h+2);d=b+a+c;h=d.indexOf("{}",h+a.length);if(0>h)return!1});return d};f.isFile=function(b){return window.File&&"[object File]"===
Object.prototype.toString.call(b)};f.isFileList=function(b){return window.FileList&&"[object FileList]"===Object.prototype.toString.call(b)};f.isFileOrInput=function(b){return f.isFile(b)||f.isInput(b)};f.isInput=function(b,e){var d=function(b){b=b.toLowerCase();return e?"file"!==b:"file"===b};return window.HTMLInputElement&&"[object HTMLInputElement]"===Object.prototype.toString.call(b)&&b.type&&d(b.type)||b.tagName&&"input"===b.tagName.toLowerCase()&&b.type&&d(b.type)?!0:!1};f.isBlob=function(b){if(window.Blob&&
"[object Blob]"===Object.prototype.toString.call(b))return!0};f.isXhrUploadSupported=function(){var b=document.createElement("input");b.type="file";return void 0!==b.multiple&&"undefined"!==typeof File&&"undefined"!==typeof FormData&&"undefined"!==typeof f.createXhrInstance().upload};f.createXhrInstance=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){return f.log("Neither XHR or ActiveX are supported!","error"),null}};f.isFolderDropSupported=
function(b){return b.items&&0<b.items.length&&b.items[0].webkitGetAsEntry};f.isFileChunkingSupported=function(){return!f.androidStock()&&f.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)};f.sliceBlob=function(b,e,d){return(b.slice||b.mozSlice||b.webkitSlice).call(b,e,d)};f.arrayBufferToHex=function(b){var e="";b=new Uint8Array(b);f.each(b,function(b,f){b=f.toString(16);2>b.length&&(b="0"+b);e+=b});return e};f.readBlobToHex=
function(b,e,d){b=f.sliceBlob(b,e,e+d);var h=new FileReader,c=new f.Promise;h.onload=function(){c.success(f.arrayBufferToHex(h.result))};h.onerror=c.failure;h.readAsArrayBuffer(b);return c};f.extend=function(b,e,d){f.each(e,function(e,c){d&&f.isObject(c)?(void 0===b[e]&&(b[e]={}),f.extend(b[e],c,!0)):b[e]=c});return b};f.override=function(b,e){var d={};e=e(d);f.each(e,function(e,c){void 0!==b[e]&&(d[e]=b[e]);b[e]=c});return b};f.indexOf=function(b,e,d){if(b.indexOf)return b.indexOf(e,d);d=d||0;var f=
b.length;for(0>d&&(d+=f);d<f;d+=1)if(b.hasOwnProperty(d)&&b[d]===e)return d;return-1};f.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var e=16*Math.random()|0;return("x"==b?e:e&3|8).toString(16)})};f.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident")};f.ie7=function(){return-1!==navigator.userAgent.indexOf("MSIE 7")};f.ie8=function(){return-1!==navigator.userAgent.indexOf("MSIE 8")};f.ie10=function(){return-1!==
navigator.userAgent.indexOf("MSIE 10")};f.ie11=function(){return f.ie()&&-1!==navigator.userAgent.indexOf("rv:11")};f.edge=function(){return 0<=navigator.userAgent.indexOf("Edge")};f.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")};f.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")};f.opera=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Opera")};f.firefox=function(){return!f.edge()&&
!f.ie11()&&-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor};f.windows=function(){return"Win32"===navigator.platform};f.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")};f.androidStock=function(){return f.android()&&0>navigator.userAgent.toLowerCase().indexOf("chrome")};f.ios6=function(){return f.ios()&&-1!==navigator.userAgent.indexOf(" OS 6_")};f.ios7=function(){return f.ios()&&-1!==navigator.userAgent.indexOf(" OS 7_")};
f.ios8=function(){return f.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_")};f.ios800=function(){return f.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_0 ")};f.ios=function(){return-1!==navigator.userAgent.indexOf("iPad")||-1!==navigator.userAgent.indexOf("iPod")||-1!==navigator.userAgent.indexOf("iPhone")};f.iosChrome=function(){return f.ios()&&-1!==navigator.userAgent.indexOf("CriOS")};f.iosSafari=function(){return f.ios()&&!f.iosChrome()&&-1!==navigator.userAgent.indexOf("Safari")};f.iosSafariWebView=
function(){return f.ios()&&!f.iosChrome()&&!f.iosSafari()};f.preventDefault=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1};f.toElement=function(){var b=document.createElement("div");return function(e){b.innerHTML=e;e=b.firstChild;b.removeChild(e);return e}}();f.each=function(b,e){var d;if(b)if(window.Storage&&b.constructor===window.Storage)for(d=0;d<b.length;d++){var h=e(b.key(d),b.getItem(b.key(d)));if(!1===h)break}else if(f.isArray(b)||f.isItemList(b)||f.isNodeList(b))for(d=0;d<
b.length&&(h=e(d,b[d]),!1!==h);d++);else if(f.isString(b))for(d=0;d<b.length&&(h=e(d,b.charAt(d)),!1!==h);d++);else for(d in b)if(Object.prototype.hasOwnProperty.call(b,d)&&(h=e(d,b[d]),!1===h))break};f.bind=function(b,e){if(f.isFunction(b)){var d=Array.prototype.slice.call(arguments,2);return function(){var h=f.extend([],d);arguments.length&&(h=h.concat(Array.prototype.slice.call(arguments)));return b.apply(e,h)}}throw Error("first parameter must be a function!");};f.obj2url=function(b,e,d){var h=
[],c="&",a=function(a,b){var c=e?/\[\]$/.test(e)?e:e+"["+b+"]":b;"undefined"!==c&&"undefined"!==b&&h.push("object"===typeof a?f.obj2url(a,c,!0):"[object Function]"===Object.prototype.toString.call(a)?encodeURIComponent(c)+"="+encodeURIComponent(a()):encodeURIComponent(c)+"="+encodeURIComponent(a))};!d&&e?(c=/\?/.test(e)?/\?$/.test(e)?"":"&":"?",h.push(e),h.push(f.obj2url(b))):"[object Array]"===Object.prototype.toString.call(b)&&"undefined"!==typeof b?f.each(b,function(b,c){a(c,b)}):"undefined"!==
typeof b&&null!==b&&"object"===typeof b?f.each(b,function(b,c){a(c,b)}):h.push(encodeURIComponent(e)+"="+encodeURIComponent(b));return e?h.join(c):h.join(c).replace(/^&/,"").replace(/%20/g,"+")};f.obj2FormData=function(b,e,d){e||(e=new FormData);f.each(b,function(b,c){b=d?d+"["+b+"]":b;f.isObject(c)?f.obj2FormData(c,e,b):f.isFunction(c)?e.append(b,c()):e.append(b,c)});return e};f.obj2Inputs=function(b,e){var d;e||(e=document.createElement("form"));f.obj2FormData(b,{append:function(b,c){d=document.createElement("input");
d.setAttribute("name",b);d.setAttribute("value",c);e.appendChild(d)}});return e};f.parseJson=function(b){return window.JSON&&f.isFunction(JSON.parse)?JSON.parse(b):eval("("+b+")")};f.getExtension=function(b){var e=b.lastIndexOf(".")+1;if(0<e)return b.substr(e,b.length-e)};f.getFilename=function(b){return f.isInput(b)?b.value.replace(/.*(\/|\\)/,""):f.isFile(b)&&null!==b.fileName&&void 0!==b.fileName?b.fileName:b.name};f.DisposeSupport=function(){var b=[];return{dispose:function(){var e;do(e=b.shift())&&
e();while(e)},attach:function(){this.addDisposer(f(arguments[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(e){b.push(e)}}}})();(function(){"function"===typeof define&&define.amd?define(function(){return f}):"undefined"!==typeof module&&module.exports?module.exports=f:h.qq=f})();(function(){f.Error=function(b){this.message="[Fine Uploader "+f.version+"] "+b};f.Error.prototype=Error()})();f.version="5.15.4";f.supportedFeatures=function(){function b(){var a=document.createElement("span");
return("draggable"in a||"ondragstart"in a&&"ondrop"in a)&&!f.android()&&!f.ios()}var e,d,h,c;var a=(h=(e=function(){var a=!0;try{var b=document.createElement("input");b.type="file";f(b).hide();b.disabled&&(a=!1)}catch(H){a=!1}return a}())&&f.isXhrUploadSupported())&&!f.androidStock();var l=(d=h&&b())&&(f.chrome()||f.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/);var u=h&&f.isFileChunkingSupported();if(c=h&&u)try{c=!!window.localStorage&&f.isFunction(window.localStorage.setItem)}catch(C){c=
!1}var q=h&&(f.chrome()||f.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/);var r=e&&(void 0!==window.postMessage||h);var y=window.XMLHttpRequest?void 0!==f.createXhrInstance().withCredentials:!1;var z=void 0!==window.XDomainRequest;var p=window.XMLHttpRequest&&void 0!==f.createXhrInstance().withCredentials?!0:void 0!==window.XDomainRequest;var x=void 0!==document.createElement("input").webkitdirectory;var t=h&&void 0!==window.FileReader;var B=h?!f.androidStock()&&
!f.iosChrome():!1;return{ajaxUploading:h,blobUploading:a,canDetermineSize:h,chunking:u,deleteFileCors:p,deleteFileCorsXdr:z,deleteFileCorsXhr:y,dialogElement:!!window.HTMLDialogElement,fileDrop:d,folderDrop:l,folderSelection:x,imagePreviews:t,imageValidation:t,itemSizeValidation:h,pause:u,progressBar:B,resume:c,scaling:t&&a,tiffPreviews:f.safari(),unlimitedScaledImageSize:!f.ios(),uploading:e,uploadCors:r,uploadCustomHeaders:h,uploadNonMultipart:h,uploadViaPaste:q}}();f.isGenericPromise=function(b){return!!(b&&
b.then&&f.isFunction(b.then))};f.Promise=function(){var b,e,d=[],h=[],c=[],a=0;f.extend(this,{then:function(c,f){0===a?(c&&d.push(c),f&&h.push(f)):-1===a?f&&f.apply(null,e):c&&c.apply(null,b);return this},done:function(d){0===a?c.push(d):d.apply(null,void 0===e?b:e);return this},success:function(){a=1;b=arguments;d.length&&f.each(d,function(a,c){c.apply(null,b)});c.length&&f.each(c,function(a,c){c.apply(null,b)});return this},failure:function(){a=-1;e=arguments;h.length&&f.each(h,function(a,b){b.apply(null,
e)});c.length&&f.each(c,function(a,b){b.apply(null,e)});return this}})};f.BlobProxy=function(b,e){f.extend(this,{referenceBlob:b,create:function(){return e(b)}})};f.UploadButton=function(b){function e(){var b=document.createElement("input");b.setAttribute(f.UploadButton.BUTTON_ID_ATTR_NAME,a);b.setAttribute("title",c.title);d.setMultiple(c.multiple,b);c.folders&&f.supportedFeatures.folderSelection&&b.setAttribute("webkitdirectory","");c.acceptFiles&&b.setAttribute("accept",c.acceptFiles);b.setAttribute("type",
"file");b.setAttribute("name",c.name);f(b).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:f.ie()&&!f.ie8()?"3500px":"118px",margin:0,padding:0,cursor:"pointer",opacity:0});!f.ie7()&&f(b).css({height:"100%"});c.element.appendChild(b);h.attach(b,"change",function(){c.onChange(b)});h.attach(b,"mouseover",function(){f(c.element).addClass(c.hoverClass)});h.attach(b,"mouseout",function(){f(c.element).removeClass(c.hoverClass)});h.attach(b,"focus",function(){f(c.element).addClass(c.focusClass)});
h.attach(b,"blur",function(){f(c.element).removeClass(c.focusClass)});return b}var d=this,h=new f.DisposeSupport,c={acceptFiles:null,element:null,focusClass:"qq-upload-button-focus",folders:!1,hoverClass:"qq-upload-button-hover",ios8BrowserCrashWorkaround:!1,multiple:!1,name:"qqfile",onChange:function(a){},title:null};f.extend(c,b);var a=f.getUniqueId();f(c.element).css({position:"relative",overflow:"hidden",direction:"ltr"});f.extend(this,{getInput:function(){return l},getButtonId:function(){return a},
setMultiple:function(a,b){b=b||this.getInput();c.ios8BrowserCrashWorkaround&&f.ios8()&&(f.iosChrome()||f.iosSafariWebView())?b.setAttribute("multiple",""):a?b.setAttribute("multiple",""):b.removeAttribute("multiple")},setAcceptFiles:function(a){a!==c.acceptFiles&&l.setAttribute("accept",a)},reset:function(){l.parentNode&&f(l).remove();f(c.element).removeClass(c.focusClass);l=null;l=e()}});var l=e()};f.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id";f.UploadData=function(b){function e(a){if(f.isArray(a)){var b=
[];f.each(a,function(a,d){b.push(c[d])});return b}return c[a]}function d(b){if(f.isArray(b)){var d=[];f.each(b,function(b,e){d.push(c[a[e]])});return d}return c[a[b]]}function h(a){var b=[];a=[].concat(a);f.each(a,function(a,d){a=l[d];void 0!==a&&f.each(a,function(a,d){b.push(c[d])})});return b}var c=[],a={},l={},u={},q={};f.extend(this,{addFile:function(d){var e=d.status||f.status.SUBMITTING,h=c.push({name:d.name,originalName:d.name,uuid:d.uuid,size:null==d.size?-1:d.size,status:e})-1;d.batchId&&
(c[h].batchId=d.batchId,void 0===q[d.batchId]&&(q[d.batchId]=[]),q[d.batchId].push(h));d.proxyGroupId&&(c[h].proxyGroupId=d.proxyGroupId,void 0===u[d.proxyGroupId]&&(u[d.proxyGroupId]=[]),u[d.proxyGroupId].push(h));c[h].id=h;a[d.uuid]=h;void 0===l[e]&&(l[e]=[]);l[e].push(h);d.onBeforeStatusChange&&d.onBeforeStatusChange(h);b.onStatusChange(h,null,e);return h},retrieve:function(a){if(f.isObject(a)&&c.length){if(void 0!==a.id)return e(a.id);if(void 0!==a.uuid)return d(a.uuid);if(a.status)return h(a.status)}else return f.extend([],
c,!0)},reset:function(){c=[];a={};l={};q={}},setStatus:function(a,d){var e=c[a].status,h=f.indexOf(l[e],a);l[e].splice(h,1);c[a].status=d;void 0===l[d]&&(l[d]=[]);l[d].push(a);b.onStatusChange(a,e,d)},uuidChanged:function(b,d){var e=c[b].uuid;c[b].uuid=d;a[d]=b;delete a[e]},updateName:function(a,b){c[a].name=b},updateSize:function(a,b){c[a].size=b},setParentId:function(a,b){c[a].parentId=b},getIdsInProxyGroup:function(a){return(a=c[a].proxyGroupId)?u[a]:[]},getIdsInBatch:function(a){return q[c[a].batchId]}})};
f.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"};(function(){f.basePublicApi={addBlobs:function(b,e,d){this.addFiles(b,e,d)},addInitialFiles:function(b){var e=this;f.each(b,function(b,f){e._addCannedFile(f)})},addFiles:function(b,
e,d){this._maybeHandleIos8SafariWorkaround();var h=0===this._storedIds.length?f.getUniqueId():this._currentBatchId,c=f.bind(function(a){this._handleNewFile({blob:a,name:this._options.blobs.defaultName},h,y)},this),a=f.bind(function(a){this._handleNewFile(a,h,y)},this),l=f.bind(function(a){a=f.canvasToBlob(a);this._handleNewFile({blob:a,name:this._options.blobs.defaultName+".png"},h,y)},this),u=f.bind(function(a){var b=f.canvasToBlob(a.canvas,a.type,a.quality&&a.quality/100);this._handleNewFile({blob:b,
name:a.name},h,y)},this),q=f.bind(function(a){if(f.isInput(a)&&f.supportedFeatures.ajaxUploading){a=Array.prototype.slice.call(a.files);var b=this;f.each(a,function(a,c){b._handleNewFile(c,h,y)})}else this._handleNewFile(a,h,y)},this),r=this,y=[];this._currentBatchId=h;b&&(f.isFileList(b)&&(b=Array.prototype.slice.call(b)),b=[].concat(b),f.each(b,function(b,d){f.isFileOrInput(d)?q(d):f.isBlob(d)?c(d):f.isObject(d)?d.blob&&d.name?a(d):d.canvas&&d.name&&u(d):d.tagName&&"canvas"===d.tagName.toLowerCase()?
l(d):r.log(d+" is not a valid file container!  Ignoring!","warn")}),this.log("Received "+y.length+" files."),this._prepareItemsForUpload(y,e,d))},cancel:function(b){this._handler.cancel(b)},cancelAll:function(){var b=[],e=this;f.extend(b,this._storedIds);f.each(b,function(b,f){e.cancel(f)});this._handler.cancelAll()},clearStoredFiles:function(){this._storedIds=[]},continueUpload:function(b){var e=this._uploadData.retrieve({id:b});if(!f.supportedFeatures.pause||!this._options.chunking.enabled)return!1;
if(e.status===f.status.PAUSED)return this.log(f.format("Paused file ID {} ({}) will be continued.  Not paused.",b,this.getName(b))),this._uploadFile(b),!0;this.log(f.format("Ignoring continue for file ID {} ({}).  Not paused.",b,this.getName(b)),"error");return!1},deleteFile:function(b){return this._onSubmitDelete(b)},doesExist:function(b){return this._handler.isValid(b)},drawThumbnail:function(b,e,d,h,c){var a=new f.Promise;if(this._imageGenerator){var k=this._thumbnailUrls[b];d={customResizeFunction:c,
maxSize:0<d?d:null,scale:0<d};!h&&f.supportedFeatures.imagePreviews&&(k=this.getFile(b));null==k?a.failure({container:e,error:"File or URL not found."}):this._imageGenerator.generate(k,e,d).then(function(b){a.success(b)},function(b,c){a.failure({container:b,error:c||"Problem generating thumbnail"})})}else a.failure({container:e,error:"Missing image generator module"});return a},getButton:function(b){return this._getButton(this._buttonIdsForFileIds[b])},getEndpoint:function(b){return this._endpointStore.get(b)},
getFile:function(b){return this._handler.getFile(b)||null},getInProgress:function(){return this._uploadData.retrieve({status:[f.status.UPLOADING,f.status.UPLOAD_RETRYING,f.status.QUEUED]}).length},getName:function(b){return this._uploadData.retrieve({id:b}).name},getParentId:function(b){b=this.getUploads({id:b});var e=null;b&&void 0!==b.parentId&&(e=b.parentId);return e},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(b){return this._uploadData.retrieve({id:b}).size},
getNetUploads:function(){return this._netUploaded},getRemainingAllowedItems:function(){var b=this._currentItemLimit;return 0<b?b-this._netUploadedOrQueued:null},getUploads:function(b){return this._uploadData.retrieve(b)},getUuid:function(b){return this._uploadData.retrieve({id:b}).uuid},log:function(b,e){!this._options.debug||e&&"info"!==e?e&&"info"!==e&&f.log("[Fine Uploader "+f.version+"] "+b,e):f.log("[Fine Uploader "+f.version+"] "+b)},pauseUpload:function(b){var e=this._uploadData.retrieve({id:b});
if(!f.supportedFeatures.pause||!this._options.chunking.enabled)return!1;if(0<=f.indexOf([f.status.UPLOADING,f.status.UPLOAD_RETRYING],e.status)){if(this._handler.pause(b))return this._uploadData.setStatus(b,f.status.PAUSED),!0;this.log(f.format("Unable to pause file ID {} ({}).",b,this.getName(b)),"error")}else this.log(f.format("Ignoring pause for file ID {} ({}).  Not in progress.",b,this.getName(b)),"error");return!1},removeFileRef:function(b){this._handler.expunge(b)},reset:function(){this.log("Resetting uploader...");
this._handler.reset();this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._thumbnailUrls=[];f.each(this._buttons,function(b,e){e.reset()});this._paramsStore.reset();this._endpointStore.reset();this._netUploaded=this._netUploadedOrQueued=0;this._uploadData.reset();this._buttonIdsForFileIds=[];this._pasteHandler&&this._pasteHandler.reset();this._options.session.refreshOnReset&&this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=
[];this._totalProgress&&this._totalProgress.reset()},retry:function(b){return this._manualRetry(b)},scaleImage:function(b,e){return f.Scaler.prototype.scaleImage(b,e,{log:f.bind(this.log,this),getFile:f.bind(this.getFile,this),uploadData:this._uploadData})},setCustomHeaders:function(b,e){this._customHeadersStore.set(b,e)},setDeleteFileCustomHeaders:function(b,e){this._deleteFileCustomHeadersStore.set(b,e)},setDeleteFileEndpoint:function(b,e){this._deleteFileEndpointStore.set(b,e)},setDeleteFileParams:function(b,
e){this._deleteFileParamsStore.set(b,e)},setEndpoint:function(b,e){this._endpointStore.set(b,e)},setForm:function(b){this._updateFormSupportAndParams(b)},setItemLimit:function(b){this._currentItemLimit=b},setName:function(b,e){this._uploadData.updateName(b,e)},setParams:function(b,e){this._paramsStore.set(b,e)},setUuid:function(b,e){return this._uploadData.uuidChanged(b,e)},setStatus:function(b,e){if(!this.getUploads({id:b}))throw new f.Error(b+" is not a valid file ID.");switch(e){case f.status.DELETED:this._onDeleteComplete(b,
null,!1);break;case f.status.DELETE_FAILED:this._onDeleteComplete(b,null,!0);break;default:throw b="Method setStatus called on '"+name+"' not implemented yet for "+e,this.log(b),new f.Error(b);}},uploadStoredFiles:function(){0===this._storedIds.length?this._itemError("noFilesError"):this._uploadStoredFiles()}};f.basePrivateApi={_addCannedFile:function(b){var e=this;return this._uploadData.addFile({uuid:b.uuid,name:b.name,size:b.size,status:f.status.UPLOAD_SUCCESSFUL,onBeforeStatusChange:function(d){b.deleteFileEndpoint&&
e.setDeleteFileEndpoint(b.deleteFileEndpoint,d);b.deleteFileParams&&e.setDeleteFileParams(b.deleteFileParams,d);b.thumbnailUrl&&(e._thumbnailUrls[d]=b.thumbnailUrl);e._netUploaded++;e._netUploadedOrQueued++}})},_annotateWithButtonId:function(b,e){f.isFile(b)&&(b.qqButtonId=this._getButtonId(e))},_batchError:function(b){this._options.callbacks.onError(null,null,b,void 0)},_createDeleteHandler:function(){var b=this;return new f.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),
maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._deleteFileCustomHeadersStore,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,cors:this._options.cors,log:f.bind(b.log,b),onDelete:function(e){b._onDelete(e);b._options.callbacks.onDelete(e)},onDeleteComplete:function(e,d,f){b._onDeleteComplete(e,d,f);b._options.callbacks.onDeleteComplete(e,d,f)}})},_createPasteHandler:function(){var b=this;return new f.PasteSupport({targetElement:this._options.paste.targetElement,
callbacks:{log:f.bind(b.log,b),pasteReceived:function(e){b._handleCheckedCallback({name:"onPasteReceived",callback:f.bind(b._options.callbacks.onPasteReceived,b,e),onSuccess:f.bind(b._handlePasteSuccess,b,e),identifier:"pasted image"})}}})},_createStore:function(b,e){var d={},h=b,c={},a=e,l=function(a){return f.isObject(a)?f.extend({},a):a};return{set:function(a,b){null==b?(d={},h=l(a)):d[b]=l(a)},get:function(b){var e=null!=b&&d[b]?d[b]:l(h);a&&f.isObject(e)&&f.extend(e,f.isFunction(a)?a():a);c[b]&&
f.extend(e,c[b]);return l(e)},addReadOnly:function(b,e){f.isObject(d)&&(null===b?f.isFunction(e)?a=e:(a=a||{},f.extend(a,e)):(c[b]=c[b]||{},f.extend(c[b],e)))},remove:function(a){return delete d[a]},reset:function(){d={};c={};h=b}}},_createUploadDataTracker:function(){var b=this;return new f.UploadData({getName:function(e){return b.getName(e)},getUuid:function(e){return b.getUuid(e)},getSize:function(e){return b.getSize(e)},onStatusChange:function(e,d,f){b._onUploadStatusChange(e,d,f);b._options.callbacks.onStatusChange(e,
d,f);b._maybeAllComplete(e,f);b._totalProgress&&setTimeout(function(){b._totalProgress.onStatusChange(e,d,f)},0)}})},_createUploadButton:function(b){var e=this,d=b.allowedExtensions||this._options.validation.allowedExtensions;var h=new f.UploadButton({acceptFiles:b.accept||this._options.validation.acceptFiles,element:b.element,focusClass:this._options.classes.buttonFocus,folders:b.folders,hoverClass:this._options.classes.buttonHover,ios8BrowserCrashWorkaround:this._options.workarounds.ios8BrowserCrash,
multiple:f.supportedFeatures.ajaxUploading?e._options.workarounds.iosEmptyVideos&&f.ios()&&!f.ios6()&&e._isAllowedExtension(d,".mov")?!1:void 0===b.multiple?e._options.multiple:b.multiple:!1,name:this._options.request.inputName,onChange:function(b){e._onInputChange(b)},title:null==b.title?this._options.text.fileInputTitle:b.title});this._disposeSupport.addDisposer(function(){h.dispose()});e._buttons.push(h);return h},_createUploadHandler:function(b,e){var d=this,h={},c={debug:this._options.debug,
maxConnections:this._options.maxConnections,cors:this._options.cors,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:f.bind(d.log,d),preventRetryParam:this._options.retry.preventRetryResponseProperty,onProgress:function(a,b,c,e){if(!(0>c||0>e)){if(h[a]){if(h[a].loaded!==c||h[a].total!==e)d._onProgress(a,b,c,e),d._options.callbacks.onProgress(a,b,c,e)}else d._onProgress(a,b,c,e),d._options.callbacks.onProgress(a,
b,c,e);h[a]={loaded:c,total:e}}},onComplete:function(a,b,c,e){delete h[a];var k=d.getUploads({id:a}).status;if(k!==f.status.UPLOAD_SUCCESSFUL&&k!==f.status.UPLOAD_FAILED)if(k=d._onComplete(a,b,c,e),k instanceof f.Promise)k.done(function(){d._options.callbacks.onComplete(a,b,c,e)});else d._options.callbacks.onComplete(a,b,c,e)},onCancel:function(a,b,c){var e=new f.Promise;d._handleCheckedCallback({name:"onCancel",callback:f.bind(d._options.callbacks.onCancel,d,a,b),onFailure:e.failure,onSuccess:function(){c.then(function(){d._onCancel(a,
b)});e.success()},identifier:a});return e},onUploadPrep:f.bind(this._onUploadPrep,this),onUpload:function(a,b){d._onUpload(a,b);d._options.callbacks.onUpload(a,b)},onUploadChunk:function(a,b,c){d._onUploadChunk(a,c);d._options.callbacks.onUploadChunk(a,b,c)},onUploadChunkSuccess:function(a,b,c,e){d._options.callbacks.onUploadChunkSuccess.apply(d,arguments)},onResume:function(a,b,c){return d._options.callbacks.onResume(a,b,c)},onAutoRetry:function(a,b,c,e){return d._onAutoRetry.apply(d,arguments)},
onUuidChanged:function(a,b){d.log("Server requested UUID change from '"+d.getUuid(a)+"' to '"+b+"'");d.setUuid(a,b)},getName:f.bind(d.getName,d),getUuid:f.bind(d.getUuid,d),getSize:f.bind(d.getSize,d),setSize:f.bind(d._setSize,d),getDataByUuid:function(a){return d.getUploads({uuid:a})},isQueued:function(a){a=d.getUploads({id:a}).status;return a===f.status.QUEUED||a===f.status.SUBMITTED||a===f.status.UPLOAD_RETRYING||a===f.status.PAUSED},getIdsInProxyGroup:d._uploadData.getIdsInProxyGroup,getIdsInBatch:d._uploadData.getIdsInBatch};
f.each(this._options.request,function(a,b){c[a]=b});c.customHeaders=this._customHeadersStore;b&&f.each(b,function(a,b){c[a]=b});return new f.UploadHandlerController(c,e)},_fileOrBlobRejected:function(b){this._netUploadedOrQueued--;this._uploadData.setStatus(b,f.status.REJECTED)},_formatSize:function(b){if(0===b)return b+this._options.text.sizeSymbols[0];var e=-1;do b/=1E3,e++;while(999<b);return Math.max(b,.1).toFixed(1)+this._options.text.sizeSymbols[e]},_generateExtraButtonSpecs:function(){var b=
this;this._extraButtonSpecs={};f.each(this._options.extraButtons,function(e,d){e=d.multiple;var h=f.extend({},b._options.validation,!0),c=f.extend({},d);void 0===e&&(e=b._options.multiple);c.validation&&f.extend(h,d.validation,!0);f.extend(c,{multiple:e,validation:h},!0);b._initExtraButton(c)})},_getButton:function(b){var e=this._extraButtonSpecs[b];if(e)return e.element;if(b===this._defaultButtonId)return this._options.button},_getButtonId:function(b){var e;b instanceof f.BlobProxy&&(b=b.referenceBlob);
if(b&&!f.isBlob(b)){if(f.isFile(b))return b.qqButtonId;if("input"===b.tagName.toLowerCase()&&"file"===b.type.toLowerCase())return b.getAttribute(f.UploadButton.BUTTON_ID_ATTR_NAME);b=b.getElementsByTagName("input");f.each(b,function(b,f){if("file"===f.getAttribute("type"))return e=f,!1});if(e)return e.getAttribute(f.UploadButton.BUTTON_ID_ATTR_NAME)}},_getNotFinished:function(){return this._uploadData.retrieve({status:[f.status.UPLOADING,f.status.UPLOAD_RETRYING,f.status.QUEUED,f.status.SUBMITTING,
f.status.SUBMITTED,f.status.PAUSED]}).length},_getValidationBase:function(b){return(b=this._extraButtonSpecs[b])?b.validation:this._options.validation},_getValidationDescriptor:function(b){return b.file instanceof f.BlobProxy?{name:f.getFilename(b.file.referenceBlob),size:b.file.referenceBlob.size}:{name:this.getUploads({id:b.id}).name,size:this.getUploads({id:b.id}).size}},_getValidationDescriptors:function(b){var e=this,d=[];f.each(b,function(b,c){d.push(e._getValidationDescriptor(c))});return d},
_handleCameraAccess:function(){if(this._options.camera.ios&&f.ios()){var b=this._options.camera.button,e=b?this._getButtonId(b):this._defaultButtonId,d=this._options;e&&e!==this._defaultButtonId&&(d=this._extraButtonSpecs[e]);d.multiple=!1;d.validation.acceptFiles=null===d.validation.acceptFiles?"image/*;capture=camera":d.validation.acceptFiles+",image/*;capture=camera";f.each(this._buttons,function(b,c){if(c.getButtonId()===e)return c.setMultiple(d.multiple),c.setAcceptFiles(d.acceptFiles),!1})}},
_handleCheckedCallback:function(b){var e=this,d=b.callback();if(f.isGenericPromise(d))return this.log(b.name+" - waiting for "+b.name+" promise to be fulfilled for "+b.identifier),d.then(function(d){e.log(b.name+" promise success for "+b.identifier);b.onSuccess(d)},function(){b.onFailure?(e.log(b.name+" promise failure for "+b.identifier),b.onFailure()):e.log(b.name+" promise failure for "+b.identifier)});if(!1!==d)b.onSuccess(d);else b.onFailure?(this.log(b.name+" - return value was 'false' for "+
b.identifier+".  Invoking failure callback."),b.onFailure()):this.log(b.name+" - return value was 'false' for "+b.identifier+".  Will not proceed.");return d},_handleNewFile:function(b,e,d){var h=this,c=f.getUniqueId(),a=-1,l=f.getFilename(b);b=b.blob||b;var u=this._customNewFileHandler?this._customNewFileHandler:f.bind(h._handleNewFileGeneric,h);!f.isInput(b)&&0<=b.size&&(a=b.size);u(b,l,c,a,d,e,this._options.request.uuidName,{uploadData:h._uploadData,paramsStore:h._paramsStore,addFileToHandler:function(a,
b){h._handler.add(a,b);h._netUploadedOrQueued++;h._trackButton(a)}})},_handleNewFileGeneric:function(b,e,d,f,c,a){e=this._uploadData.addFile({uuid:d,name:e,size:f,batchId:a});this._handler.add(e,b);this._trackButton(e);this._netUploadedOrQueued++;c.push({id:e,file:b})},_handlePasteSuccess:function(b,e){var d=b.type.split("/")[1];null==e&&(e=this._options.paste.defaultName);this.addFiles({name:e+("."+d),blob:b})},_handleDeleteSuccess:function(b){if(this.getUploads({id:b}).status!==f.status.DELETED){var e=
this.getName(b);this._netUploadedOrQueued--;this._netUploaded--;this._handler.expunge(b);this._uploadData.setStatus(b,f.status.DELETED);this.log("Delete request for '"+e+"' has succeeded.")}},_handleDeleteFailed:function(b,e){var d=this.getName(b);this._uploadData.setStatus(b,f.status.DELETE_FAILED);this.log("Delete request for '"+d+"' has failed.","error");if(e&&void 0!==e.withCredentials)this._options.callbacks.onError(b,d,"Delete request failed with response code "+e.status,e);else this._options.callbacks.onError(b,
d,"Delete request failed",e)},_initExtraButton:function(b){var e=this._createUploadButton({accept:b.validation.acceptFiles,allowedExtensions:b.validation.allowedExtensions,element:b.element,folders:b.folders,multiple:b.multiple,title:b.fileInputTitle});this._extraButtonSpecs[e.getButtonId()]=b},_initFormSupportAndParams:function(){(this._formSupport=f.FormSupport&&new f.FormSupport(this._options.form,f.bind(this.uploadStoredFiles,this),f.bind(this.log,this)))&&this._formSupport.attachedToForm?(this._paramsStore=
this._createStore(this._options.request.params,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&(this._options.request.endpoint=this._formSupport.newEndpoint)):this._paramsStore=this._createStore(this._options.request.params)},_isDeletePossible:function(){return f.DeleteFileAjaxRequester&&this._options.deleteFile.enabled?this._options.cors.expected?f.supportedFeatures.deleteFileCorsXhr||f.supportedFeatures.deleteFileCorsXdr&&
this._options.cors.allowXdr?!0:!1:!0:!1},_isAllowedExtension:function(b,e){var d=!1;if(!b.length)return!0;f.each(b,function(b,c){if(f.isString(c)&&null!=e.match(new RegExp("\\."+c+"$","i")))return d=!0,!1});return d},_itemError:function(b,e,d){function h(a,b){c=c.replace(a,b)}var c=this._options.messages[b],a=[],l=[].concat(e);b=l[0];d=this._getButtonId(d);d=this._getValidationBase(d);f.each(d.allowedExtensions,function(b,c){f.isString(c)&&a.push(c)});e=a.join(", ").toLowerCase();h("{file}",this._options.formatFileName(b));
h("{extensions}",e);h("{sizeLimit}",this._formatSize(d.sizeLimit));h("{minSizeLimit}",this._formatSize(d.minSizeLimit));d=c.match(/(\{\w+\})/g);null!==d&&f.each(d,function(a,b){h(b,l[a])});this._options.callbacks.onError(null,b,c,void 0);return c},_manualRetry:function(b,e){if(this._onBeforeManualRetry(b))return this._netUploadedOrQueued++,this._uploadData.setStatus(b,f.status.UPLOAD_RETRYING),e?e(b):this._handler.retry(b),!0},_maybeAllComplete:function(b,e){var d=this,h=this._getNotFinished();e===
f.status.UPLOAD_SUCCESSFUL?this._succeededSinceLastAllComplete.push(b):e===f.status.UPLOAD_FAILED&&this._failedSinceLastAllComplete.push(b);0===h&&(this._succeededSinceLastAllComplete.length||this._failedSinceLastAllComplete.length)&&setTimeout(function(){d._onAllComplete(d._succeededSinceLastAllComplete,d._failedSinceLastAllComplete)},0)},_maybeHandleIos8SafariWorkaround:function(){var b=this;if(this._options.workarounds.ios8SafariUploads&&f.ios800()&&f.iosSafari())throw setTimeout(function(){window.alert(b._options.messages.unsupportedBrowserIos8Safari)},
0),new f.Error(this._options.messages.unsupportedBrowserIos8Safari);},_maybeParseAndSendUploadError:function(b,e,d,f){if(!d.success)if(f&&200!==f.status&&!d.error)this._options.callbacks.onError(b,e,"XHR returned response code "+f.status,f);else this._options.callbacks.onError(b,e,d.error?d.error:this._options.text.defaultResponseError,f)},_maybeProcessNextItemAfterOnValidateCallback:function(b,e,d,h,c){var a=this;if(e.length>d)if(b||!this._options.validation.stopOnFirstInvalidFile)setTimeout(function(){var b=
a._getValidationDescriptor(e[d]),k=a._getButtonId(e[d].file);k=a._getButton(k);a._handleCheckedCallback({name:"onValidate",callback:f.bind(a._options.callbacks.onValidate,a,b,k),onSuccess:f.bind(a._onValidateCallbackSuccess,a,e,d,h,c),onFailure:f.bind(a._onValidateCallbackFailure,a,e,d,h,c),identifier:"Item '"+b.name+"', size: "+b.size})},0);else if(!b)for(;d<e.length;d++)a._fileOrBlobRejected(e[d].id)},_onAllComplete:function(b,e){this._totalProgress&&this._totalProgress.onAllComplete(b,e,this._preventRetries);
this._options.callbacks.onAllComplete(f.extend([],b),f.extend([],e));this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[]},_onAutoRetry:function(b,e,d,h,c){var a=this;a._preventRetries[b]=d[a._options.retry.preventRetryResponseProperty];if(a._shouldAutoRetry(b,e,d)){var k=1E3*a._options.retry.autoAttemptDelay;a._maybeParseAndSendUploadError.apply(a,arguments);a._options.callbacks.onAutoRetry(b,e,a._autoRetries[b]);a._onBeforeAutoRetry(b,e);a._uploadData.setStatus(b,f.status.UPLOAD_RETRYING);
a._retryTimeouts[b]=setTimeout(function(){a.log("Starting retry for "+e+"...");c?c(b):a._handler.retry(b)},k);return!0}},_onBeforeAutoRetry:function(b,e){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+e+"...")},_onBeforeManualRetry:function(b){var e=this._currentItemLimit;if(this._preventRetries[b])return this.log("Retries are forbidden for id "+b,"warn"),!1;if(this._handler.isValid(b)){var d=this.getName(b);if(!1===this._options.callbacks.onManualRetry(b,d))return!1;
if(0<e&&this._netUploadedOrQueued+1>e)return this._itemError("retryFailTooManyItems"),!1;this.log("Retrying upload for '"+d+"' (id: "+b+")...");return!0}this.log("'"+b+"' is not a valid file ID","error");return!1},_onCancel:function(b,e){this._netUploadedOrQueued--;clearTimeout(this._retryTimeouts[b]);e=f.indexOf(this._storedIds,b);!this._options.autoUpload&&0<=e&&this._storedIds.splice(e,1);this._uploadData.setStatus(b,f.status.CANCELED)},_onComplete:function(b,e,d,h){d.success?(d.thumbnailUrl&&
(this._thumbnailUrls[b]=d.thumbnailUrl),this._netUploaded++,this._uploadData.setStatus(b,f.status.UPLOAD_SUCCESSFUL)):(this._netUploadedOrQueued--,this._uploadData.setStatus(b,f.status.UPLOAD_FAILED),!0===d[this._options.retry.preventRetryResponseProperty]&&(this._preventRetries[b]=!0));this._maybeParseAndSendUploadError(b,e,d,h);return d.success?!0:!1},_onDelete:function(b){this._uploadData.setStatus(b,f.status.DELETING)},_onDeleteComplete:function(b,e,d){this.getName(b);d?this._handleDeleteFailed(b,
e):this._handleDeleteSuccess(b)},_onInputChange:function(b){var e;if(f.supportedFeatures.ajaxUploading){for(e=0;e<b.files.length;e++)this._annotateWithButtonId(b.files[e],b);this.addFiles(b.files)}else 0<b.value.length&&this.addFiles(b);f.each(this._buttons,function(b,e){e.reset()})},_onProgress:function(b,e,d,f){this._totalProgress&&this._totalProgress.onIndividualProgress(b,d,f)},_onSubmit:function(b,e){},_onSubmitCallbackSuccess:function(b,e){this._onSubmit.apply(this,arguments);this._uploadData.setStatus(b,
f.status.SUBMITTED);this._onSubmitted.apply(this,arguments);this._options.autoUpload?(this._options.callbacks.onSubmitted.apply(this,arguments),this._uploadFile(b)):(this._storeForLater(b),this._options.callbacks.onSubmitted.apply(this,arguments))},_onSubmitDelete:function(b,e,d){var h=this.getUuid(b),c;e&&(c=f.bind(e,this,b,h,d));if(this._isDeletePossible())return this._handleCheckedCallback({name:"onSubmitDelete",callback:f.bind(this._options.callbacks.onSubmitDelete,this,b),onSuccess:c||f.bind(this._deleteHandler.sendDelete,
this,b,h,d),identifier:b}),!0;this.log("Delete request ignored for ID "+b+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.","warn");return!1},_onSubmitted:function(b){},_onTotalProgress:function(b,e){this._options.callbacks.onTotalProgress(b,e)},_onUploadPrep:function(b){},_onUpload:function(b,e){this._uploadData.setStatus(b,f.status.UPLOADING)},_onUploadChunk:function(b,e){},_onUploadStatusChange:function(b,e,d){d===f.status.PAUSED&&
clearTimeout(this._retryTimeouts[b])},_onValidateBatchCallbackFailure:function(b){var e=this;f.each(b,function(b,f){e._fileOrBlobRejected(f.id)})},_onValidateBatchCallbackSuccess:function(b,e,d,h,c){var a=this._currentItemLimit,k=this._netUploadedOrQueued;0===a||k<=a?0<e.length?this._handleCheckedCallback({name:"onValidate",callback:f.bind(this._options.callbacks.onValidate,this,b[0],c),onSuccess:f.bind(this._onValidateCallbackSuccess,this,e,0,d,h),onFailure:f.bind(this._onValidateCallbackFailure,
this,e,0,d,h),identifier:"Item '"+e[0].file.name+"', size: "+e[0].file.size}):this._itemError("noFilesError"):(this._onValidateBatchCallbackFailure(e),b=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,k).replace(/\{itemLimit\}/g,a),this._batchError(b))},_onValidateCallbackFailure:function(b,e,d,f){var c=e+1;this._fileOrBlobRejected(b[e].id,b[e].file.name);this._maybeProcessNextItemAfterOnValidateCallback(!1,b,c,d,f)},_onValidateCallbackSuccess:function(b,e,d,f){var c=this,a=e+1,h=
this._getValidationDescriptor(b[e]);this._validateFileOrBlobData(b[e],h).then(function(){c._upload(b[e].id,d,f);c._maybeProcessNextItemAfterOnValidateCallback(!0,b,a,d,f)},function(){c._maybeProcessNextItemAfterOnValidateCallback(!1,b,a,d,f)})},_prepareItemsForUpload:function(b,e,d){if(0===b.length)this._itemError("noFilesError");else{var h=this._getValidationDescriptors(b),c=this._getButtonId(b[0].file);c=this._getButton(c);this._handleCheckedCallback({name:"onValidateBatch",callback:f.bind(this._options.callbacks.onValidateBatch,
this,h,c),onSuccess:f.bind(this._onValidateBatchCallbackSuccess,this,h,b,e,d,c),onFailure:f.bind(this._onValidateBatchCallbackFailure,this,b),identifier:"batch validation"})}},_preventLeaveInProgress:function(){var b=this;this._disposeSupport.attach(window,"beforeunload",function(e){if(b.getInProgress())return e=e||window.event,e.returnValue=b._options.messages.onLeave})},_refreshSessionData:function(){var b=this,e=this._options.session;f.Session&&null!=this._options.session.endpoint&&(this._session||
(f.extend(e,{cors:this._options.cors}),e.log=f.bind(this.log,this),e.addFileRecord=f.bind(this._addCannedFile,this),this._session=new f.Session(e)),setTimeout(function(){b._session.refresh().then(function(d,e){b._sessionRequestComplete();b._options.callbacks.onSessionRequestComplete(d,!0,e)},function(d,e){b._options.callbacks.onSessionRequestComplete(d,!1,e)})},0))},_sessionRequestComplete:function(){},_setSize:function(b,e){this._uploadData.updateSize(b,e);this._totalProgress&&this._totalProgress.onNewSize(b)},
_shouldAutoRetry:function(b,e,d){e=this._uploadData.retrieve({id:b});return!this._preventRetries[b]&&this._options.retry.enableAuto&&e.status!==f.status.PAUSED&&(void 0===this._autoRetries[b]&&(this._autoRetries[b]=0),this._autoRetries[b]<this._options.retry.maxAutoAttempts)?(this._autoRetries[b]+=1,!0):!1},_storeForLater:function(b){this._storedIds.push(b)},_trackButton:function(b){var e;(e=f.supportedFeatures.ajaxUploading?this._handler.getFile(b).qqButtonId:this._getButtonId(this._handler.getInput(b)))&&
(this._buttonIdsForFileIds[b]=e)},_updateFormSupportAndParams:function(b){this._options.form.element=b;(this._formSupport=f.FormSupport&&new f.FormSupport(this._options.form,f.bind(this.uploadStoredFiles,this),f.bind(this.log,this)))&&this._formSupport.attachedToForm&&(this._paramsStore.addReadOnly(null,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&this.setEndpoint(this._formSupport.newEndpoint))},_upload:function(b,
e,d){var h=this.getName(b);e&&this.setParams(e,b);d&&this.setEndpoint(d,b);this._handleCheckedCallback({name:"onSubmit",callback:f.bind(this._options.callbacks.onSubmit,this,b,h),onSuccess:f.bind(this._onSubmitCallbackSuccess,this,b,h),onFailure:f.bind(this._fileOrBlobRejected,this,b,h),identifier:b})},_uploadFile:function(b){this._handler.upload(b)||this._uploadData.setStatus(b,f.status.QUEUED)},_uploadStoredFiles:function(){for(var b,e=this;this._storedIds.length;)b=this._storedIds.shift(),this._uploadFile(b);
if(b=this.getUploads({status:f.status.SUBMITTING}).length)f.log("Still waiting for "+b+" files to clear submit queue. Will re-parse stored IDs array shortly."),setTimeout(function(){e._uploadStoredFiles()},1E3)},_validateFileOrBlobData:function(b,e){var d=this;var h=b.file instanceof f.BlobProxy?b.file.referenceBlob:b.file;var c=e.name;e=e.size;var a=this._getButtonId(b.file);a=this._getValidationBase(a);var l=new f.Promise;l.then(function(){},function(){d._fileOrBlobRejected(b.id,c)});if(f.isFileOrInput(h)&&
!this._isAllowedExtension(a.allowedExtensions,c))return this._itemError("typeError",c,h),l.failure();if(!this._options.validation.allowEmpty&&0===e)return this._itemError("emptyError",c,h),l.failure();if(0<e&&a.sizeLimit&&e>a.sizeLimit)return this._itemError("sizeError",c,h),l.failure();if(0<e&&e<a.minSizeLimit)return this._itemError("minSizeError",c,h),l.failure();f.ImageValidation&&f.supportedFeatures.imagePreviews&&f.isFile(h)?(new f.ImageValidation(h,f.bind(d.log,d))).validate(a.image).then(l.success,
function(a){d._itemError(a+"ImageError",c,h);l.failure()}):l.success();return l},_wrapCallbacks:function(){var b;var e=this;var d=function(b,c,a){try{return c.apply(e,a)}catch(l){c=l.message||l.toString(),e.log("Caught exception in '"+b+"' callback - "+c,"error")}};for(b in this._options.callbacks)(function(){var f=b;var c=e._options.callbacks[f];e._options.callbacks[f]=function(){return d(f,c,arguments)}})()}}})();(function(){f.FineUploaderBasic=function(b){var e=this;this._options={debug:!1,button:null,
multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{customHeaders:{},endpoint:"/server/upload",filenameParam:"qqfilename",forceMultipart:!0,inputName:"qqfile",method:"POST",params:{},paramsInBody:!0,totalFileSizeName:"qqtotalfilesize",uuidName:"qquuid"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0},allowEmpty:!1},callbacks:{onSubmit:function(b,e){},
onSubmitted:function(b,e){},onComplete:function(b,e,c,a){},onAllComplete:function(b,e){},onCancel:function(b,e){},onUpload:function(b,e){},onUploadChunk:function(b,e,c){},onUploadChunkSuccess:function(b,e,c,a){},onResume:function(b,e,c){},onProgress:function(b,e,c,a){},onTotalProgress:function(b,e){},onError:function(b,e,c,a){},onAutoRetry:function(b,e,c){},onManualRetry:function(b,e){},onValidateBatch:function(b){},onValidate:function(b){},onSubmitDelete:function(b){},onDelete:function(b){},onDeleteComplete:function(b,
e,c){},onPasteReceived:function(b){},onStatusChange:function(b,e,c){},onSessionRequestComplete:function(b,e,c){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",
maxHeightImageError:"Image is too tall.",maxWidthImageError:"Image is too wide.",minHeightImageError:"Image is not tall enough.",minWidthImageError:"Image is not wide enough.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be canceled.",unsupportedBrowserIos8Safari:"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues."},
retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,concurrent:{enabled:!1},mandatory:!1,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"},partSize:2E6,success:{endpoint:null}},resume:{enabled:!1,recordsExpireIn:7,paramNames:{resuming:"qqresume"}},
formatFileName:function(b){return b},text:{defaultResponseError:"Upload failure reason unknown",fileInputTitle:"file input",sizeSymbols:"kB MB GB TB PB EB".split(" ")},deleteFile:{enabled:!1,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1,allowXdr:!1},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:!1,button:null},extraButtons:[],session:{endpoint:null,params:{},customHeaders:{},refreshOnReset:!0},
form:{element:"qq-form",autoUpload:!1,interceptSubmit:!0},scaling:{customResizer:null,sendOriginal:!0,orient:!0,defaultType:null,defaultQuality:80,failureText:"Failed to scale",includeExif:!1,sizes:[]},workarounds:{iosEmptyVideos:!0,ios8SafariUploads:!0,ios8BrowserCrash:!1}};f.extend(this._options,b,!0);this._buttons=[];this._extraButtonSpecs={};this._buttonIdsForFileIds=[];this._wrapCallbacks();this._disposeSupport=new f.DisposeSupport;this._storedIds=[];this._autoRetries=[];this._retryTimeouts=
[];this._preventRetries=[];this._thumbnailUrls=[];this._netUploaded=this._netUploadedOrQueued=0;this._uploadData=this._createUploadDataTracker();this._initFormSupportAndParams();this._customHeadersStore=this._createStore(this._options.request.customHeaders);this._deleteFileCustomHeadersStore=this._createStore(this._options.deleteFile.customHeaders);this._deleteFileParamsStore=this._createStore(this._options.deleteFile.params);this._endpointStore=this._createStore(this._options.request.endpoint);this._deleteFileEndpointStore=
this._createStore(this._options.deleteFile.endpoint);this._handler=this._createUploadHandler();this._deleteHandler=f.DeleteFileAjaxRequester&&this._createDeleteHandler();this._options.button&&(this._defaultButtonId=this._createUploadButton({element:this._options.button,title:this._options.text.fileInputTitle}).getButtonId());this._generateExtraButtonSpecs();this._handleCameraAccess();this._options.paste.targetElement&&(f.PasteSupport?this._pasteHandler=this._createPasteHandler():this.log("Paste support module not found",
"error"));this._preventLeaveInProgress();this._imageGenerator=f.ImageGenerator&&new f.ImageGenerator(f.bind(this.log,this));this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[];this._scaler=f.Scaler&&new f.Scaler(this._options.scaling,f.bind(this.log,this))||{};this._scaler.enabled&&(this._customNewFileHandler=f.bind(this._scaler.handleNewFile,this._scaler));f.TotalProgress&&f.supportedFeatures.progressBar&&(this._totalProgress=new f.TotalProgress(f.bind(this._onTotalProgress,
this),function(b){return(b=e._uploadData.retrieve({id:b}))&&b.size||0}));this._currentItemLimit=this._options.validation.itemLimit};f.FineUploaderBasic.prototype=f.basePublicApi;f.extend(f.FineUploaderBasic.prototype,f.basePrivateApi)})();f.AjaxRequester=function(b){function e(a){var b=!1;f.each(b,function(a,c){if(0>f.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],c))return b=!0,!1});return b}function d(a){return C.cors.expected&&void 0===a.withCredentials}function h(){if(window.XMLHttpRequest||
window.ActiveXObject){var a=f.createXhrInstance();void 0===a.withCredentials&&(a=new XDomainRequest,a.onload=function(){},a.onerror=function(){},a.ontimeout=function(){},a.onprogress=function(){})}return a}function c(a,b){var c=B[a].xhr;c||(c=b?b:C.cors.expected?h():f.createXhrInstance(),B[a].xhr=c);return c}function a(a){var b=f.indexOf(t,a),c=C.maxConnections;delete B[a];t.splice(b,1);t.length>=c&&b<c&&(a=t[c-1],q(a))}function l(b,e){var h=c(b),g=C.method;e=!0===e;a(b);e?F(g+" request for "+b+" has failed",
"error"):d(h)||0<=f.indexOf(C.successfulResponseCodes[C.method],h.status)||(e=!0,F(g+" request for "+b+" has failed - response code "+h.status,"error"));C.onComplete(b,h,e)}function u(a){var b=B[a].additionalParams,c=C.mandatedParams,d;C.paramsStore.get&&(d=C.paramsStore.get(a));b&&f.each(b,function(a,b){d=d||{};d[a]=b});c&&f.each(c,function(a,b){d=d||{};d[a]=b});return d}function q(a,b){b=c(a,b);var e=C.method,g=u(a),h=B[a].payload;C.onSend(a);var k=B[a].additionalQueryParams;var l=C.endpointStore.get(a),
t=B[a].addToPath;void 0!=t&&(l+="/"+t);H&&g&&(l=f.obj2url(g,l));k&&(l=f.obj2url(k,l));k=l;d(b)?(b.onload=z(a),b.onerror=p(a)):b.onreadystatechange=r(a);y(a);b.open(e,k,!0);C.cors.expected&&C.cors.sendCredentials&&!d(b)&&(b.withCredentials=!0);x(a);F("Sending "+e+" request for "+a);h?b.send(h):H||!g?b.send():g&&C.contentType&&0<=C.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")?b.send(f.obj2url(g,"")):g&&C.contentType&&0<=C.contentType.toLowerCase().indexOf("application/json")?
b.send(JSON.stringify(g)):b.send(g);return b}function r(a){return function(){4===c(a).readyState&&l(a)}}function y(a){var b=C.onProgress;b&&(c(a).upload.onprogress=function(c){c.lengthComputable&&b(a,c.loaded,c.total)})}function z(a){return function(){l(a)}}function p(a){return function(){l(a,!0)}}function x(a){var b=c(a),h=C.customHeaders,g=B[a].additionalHeaders||{},k=C.method,l={};d(b)||(C.acceptHeader&&b.setRequestHeader("Accept",C.acceptHeader),!C.allowXRequestedWithAndCacheControl||C.cors.expected&&
0<=f.indexOf(["GET","POST","HEAD"],C.method)&&!e(h)||(b.setRequestHeader("X-Requested-With","XMLHttpRequest"),b.setRequestHeader("Cache-Control","no-cache")),!C.contentType||"POST"!==k&&"PUT"!==k||b.setRequestHeader("Content-Type",C.contentType),f.extend(l,f.isFunction(h)?h(a):h),f.extend(l,g),f.each(l,function(a,c){b.setRequestHeader(a,c)}))}var t=[],B={},C={acceptHeader:null,validMethods:["PATCH","POST","PUT"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},
endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:!0,successfulResponseCodes:{DELETE:[200,202,204],PATCH:[200,201,202,203,204],POST:[200,201,202,203,204],PUT:[200,201,202,203,204],GET:[200]},cors:{expected:!1,sendCredentials:!1},log:function(a,b){},onSend:function(a){},onComplete:function(a,b,c){},onProgress:null};f.extend(C,b);var F=C.log;if(0>f.indexOf(C.validMethods,C.method))throw Error("'"+C.method+"' is not a supported method for this type of request!");var H=
"GET"===C.method||"DELETE"===C.method;f.extend(this,{initTransport:function(a){var b,c,d,e,h,k;return{withPath:function(a){b=a;return this},withParams:function(a){c=a;return this},withQueryParams:function(a){k=a;return this},withHeaders:function(a){d=a;return this},withPayload:function(a){e=a;return this},withCacheBuster:function(){h=!0;return this},send:function(g){h&&0<=f.indexOf(["GET","DELETE"],C.method)&&(c.qqtimestamp=(new Date).getTime());B[a]={addToPath:b,additionalParams:c,additionalQueryParams:k,
additionalHeaders:d,payload:e};g=t.push(a)<=C.maxConnections?q(a,g):void 0;return g}}},canceled:function(b){a(b)}})};f.UploadHandler=function(b){b=b.proxy;var e={},d=b.onCancel,h=b.getName;f.extend(this,{add:function(b,a){e[b]=a;e[b].temp={}},cancel:function(b){var a=this,c=new f.Promise;d(b,h(b),c).then(function(){a.isValid(b)&&(e[b].canceled=!0,a.expunge(b));c.success()})},expunge:function(b){delete e[b]},getThirdPartyFileId:function(b){return e[b].key},isValid:function(b){return void 0!==e[b]},
reset:function(){e={}},_getFileState:function(b){return e[b]},_setThirdPartyFileId:function(b,a){e[b].key=a},_wasCanceled:function(b){return!!e[b].canceled}})};f.UploadHandlerController=function(b,e){var d=this,h=!1,c=!1,a,l={paramsStore:{},maxConnections:3,chunking:{enabled:!1,multiple:{enabled:!1}},log:function(a,b){},onProgress:function(a,b,c,d){},onComplete:function(a,b,c,d){},onCancel:function(a,b){},onUploadPrep:function(a){},onUpload:function(a,b){},onUploadChunk:function(a,b,c){},onUploadChunkSuccess:function(a,
b,c,d){},onAutoRetry:function(a,b,c,d){},onResume:function(a,b,c){},onUuidChanged:function(a,b){},getName:function(a){},setSize:function(a,b){},isQueued:function(a){},getIdsInProxyGroup:function(a){},getIdsInBatch:function(a){}},u={done:function(b,c,d,e){var f=a._getChunkData(b,c);a._getFileState(b).attemptingResume=!1;delete a._getFileState(b).temp.chunkProgress[c];a._getFileState(b).loaded+=f.size;l.onUploadChunkSuccess(b,a._getChunkDataForCallback(f),d,e)},finalize:function(b){var c=l.getSize(b),
d=l.getName(b);z("All chunks have been uploaded for "+b+" - finalizing....");a.finalizeChunks(b).then(function(e,f){z("Finalize successful for "+b);e=y.normalizeResponse(e,!0);l.onProgress(b,d,c,c);a._maybeDeletePersistedChunkData(b);y.cleanup(b,e,f)},function(a,c){a=y.normalizeResponse(a,!1);z("Problem finalizing chunks for file ID "+b+" - "+a.error,"error");a.reset&&u.reset(b);l.onAutoRetry(b,d,a,c)||y.cleanup(b,a,c)})},handleFailure:function(b,d,e,h){var k=l.getName(d);z("Chunked upload request failed for "+
d+", chunk "+b);a.clearCachedChunk(d,b);e=y.normalizeResponse(e,!1);if(e.reset)u.reset(d);else{var p=f.indexOf(a._getFileState(d).chunking.inProgress,b);0<=p&&(a._getFileState(d).chunking.inProgress.splice(p,1),a._getFileState(d).chunking.remaining.unshift(b))}a._getFileState(d).temp.ignoreFailure||(c&&(a._getFileState(d).temp.ignoreFailure=!0,z(f.format("Going to attempt to abort these chunks: {}. These are currently in-progress: {}.",JSON.stringify(Object.keys(a._getXhrs(d))),JSON.stringify(a._getFileState(d).chunking.inProgress))),
f.each(a._getXhrs(d),function(a,b){z(f.format("Attempting to abort file {}.{}. XHR readyState {}. ",d,a,b.readyState));b.abort();b._cancelled=!0}),a.moveInProgressToRemaining(d),q.free(d,!0)),l.onAutoRetry(d,k,e,h)||y.cleanup(d,e,h))},hasMoreParts:function(b){return!!a._getFileState(b).chunking.remaining.length},nextPart:function(b){var c=a._getFileState(b).chunking.remaining.shift();c>=a._getTotalChunks(b)&&(c=null);return c},reset:function(b){z("Server or callback has ordered chunking effort to be restarted on next attempt for item ID "+
b,"error");a._maybeDeletePersistedChunkData(b);a.reevaluateChunking(b);a._getFileState(b).loaded=0},sendNext:function(b){var d=l.getSize(b),e=l.getName(b),h=u.nextPart(b),k=a._getChunkData(b,h),p=a._getFileState(b).attemptingResume,r=a._getFileState(b).chunking.inProgress||[];null==a._getFileState(b).loaded&&(a._getFileState(b).loaded=0);p&&!1===l.onResume(b,e,k)&&(u.reset(b),h=u.nextPart(b),k=a._getChunkData(b,h),p=!1);null==h&&0===r.length?u.finalize(b):(z(f.format("Sending chunked upload request for item {}.{}, bytes {}-{} of {}.",
b,h,k.start+1,k.end,d)),l.onUploadChunk(b,e,a._getChunkDataForCallback(k)),r.push(h),a._getFileState(b).chunking.inProgress=r,c&&q.open(b,h),c&&q.available()&&a._getFileState(b).chunking.remaining.length&&u.sendNext(b),0===k.blob.size?(z(f.format("Chunk {} for file {} will not be uploaded, zero sized chunk.",h,b),"error"),u.handleFailure(h,b,"File is no longer available",null)):a.uploadChunk(b,h,p).then(function(c,d){z("Chunked upload request succeeded for "+b+", chunk "+h);a.clearCachedChunk(b,h);
var e=a._getFileState(b).chunking.inProgress||[];c=y.normalizeResponse(c,!0);var k=f.indexOf(e,h);z(f.format("Chunk {} for file {} uploaded successfully.",h,b));u.done(b,h,c,d);0<=k&&e.splice(k,1);a._maybePersistChunkedState(b);u.hasMoreParts(b)||0!==e.length?u.hasMoreParts(b)?u.sendNext(b):z(f.format("File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}",b,JSON.stringify(e))):u.finalize(b)},function(a,c){u.handleFailure(h,b,a,c)}).done(function(){a.clearXhr(b,
h)}))}},q={_open:[],_openChunks:{},_waiting:[],available:function(){var a=l.maxConnections,b=0,c=0;f.each(q._openChunks,function(a,d){b++;c+=d.length});return a-(q._open.length-b+c)},free:function(b,c){c=!c;var d=f.indexOf(q._waiting,b),e=f.indexOf(q._open,b);delete q._openChunks[b];y.getProxyOrBlob(b)instanceof f.BlobProxy&&(z("Generated blob upload has ended for "+b+", disposing generated blob."),delete a._getFileState(b).file);0<=d?q._waiting.splice(d,1):c&&0<=e&&(q._open.splice(e,1),b=q._waiting.shift(),
0<=b&&(q._open.push(b),y.start(b)))},getWaitingOrConnected:function(){var a=[];f.each(q._openChunks,function(b,c){c&&c.length&&a.push(parseInt(b))});f.each(q._open,function(b,c){q._openChunks[c]||a.push(parseInt(c))});return a=a.concat(q._waiting)},isUsingConnection:function(a){return 0<=f.indexOf(q._open,a)},open:function(a,b){null==b&&q._waiting.push(a);if(q.available()){if(null==b)q._waiting.pop(),q._open.push(a);else{var c=q._openChunks[a]||[];c.push(b);q._openChunks[a]=c}return!0}return!1},reset:function(){q._waiting=
[];q._open=[]}},r={send:function(b,c){a._getFileState(b).loaded=0;z("Sending simple upload request for "+b);a.uploadFile(b).then(function(a,d){z("Simple upload request succeeded for "+b);a=y.normalizeResponse(a,!0);var e=l.getSize(b);l.onProgress(b,c,e,e);y.maybeNewUuid(b,a);y.cleanup(b,a,d)},function(a,d){z("Simple upload request failed for "+b);a=y.normalizeResponse(a,!1);l.onAutoRetry(b,c,a,d)||y.cleanup(b,a,d)})}},y={cancel:function(a){z("Cancelling "+a);l.paramsStore.remove(a);q.free(a)},cleanup:function(b,
c,d){var e=l.getName(b);l.onComplete(b,e,c,d);a._getFileState(b)&&a._clearXhrs&&a._clearXhrs(b);q.free(b)},getProxyOrBlob:function(b){return a.getProxy&&a.getProxy(b)||a.getFile&&a.getFile(b)},initHandler:function(){a=new (e?f[e]:f.traditional)[(f.supportedFeatures.ajaxUploading?"Xhr":"Form")+"UploadHandler"](l,{getDataByUuid:l.getDataByUuid,getName:l.getName,getSize:l.getSize,getUuid:l.getUuid,log:z,onCancel:l.onCancel,onProgress:l.onProgress,onUuidChanged:l.onUuidChanged});a._removeExpiredChunkingRecords&&
a._removeExpiredChunkingRecords()},isDeferredEligibleForUpload:function(a){return l.isQueued(a)},maybeDefer:function(b,c){if(c&&!a.getFile(b)&&c instanceof f.BlobProxy)l.onUploadPrep(b),z("Attempting to generate a blob on-demand for "+b),c.create().then(function(c){z("Generated an on-demand blob for "+b);a.updateBlob(b,c);l.setSize(b,c.size);a.reevaluateChunking(b);y.maybeSendDeferredFiles(b)},function(a){var c={};a&&(c.error=a);z(f.format("Failed to generate blob for ID {}.  Error message: {}.",
b,a),"error");l.onComplete(b,l.getName(b),f.extend(c,p),null);y.maybeSendDeferredFiles(b);q.free(b)});else return y.maybeSendDeferredFiles(b);return!1},maybeSendDeferredFiles:function(b){var c=l.getIdsInProxyGroup(b),d=!1;c&&c.length?(z("Maybe ready to upload proxy group file "+b),f.each(c,function(c,e){if(y.isDeferredEligibleForUpload(e)&&a.getFile(e))d=e===b,y.now(e);else if(y.isDeferredEligibleForUpload(e))return!1})):(d=!0,y.now(b));return d},maybeNewUuid:function(a,b){if(void 0!==b.newUuid)l.onUuidChanged(a,
b.newUuid)},normalizeResponse:function(a,b){var c=a;f.isObject(a)||(c={},f.isString(a)&&!b&&(c.error=a));c.success=b;return c},now:function(b){var c=l.getName(b);if(!d.isValid(b))throw new f.Error(b+" is not a valid file ID to upload!");l.onUpload(b,c);h&&a._shouldChunkThisFile(b)?u.sendNext(b):r.send(b,c)},start:function(a){var b=y.getProxyOrBlob(a);if(b)return y.maybeDefer(a,b);y.now(a);return!0}};f.extend(this,{add:function(b,c){a.add.apply(this,arguments)},upload:function(a){return q.open(a)?
y.start(a):!1},retry:function(b){c&&(a._getFileState(b).temp.ignoreFailure=!1);return q.isUsingConnection(b)?y.start(b):d.upload(b)},cancel:function(b){var c=a.cancel(b);f.isGenericPromise(c)?c.then(function(){y.cancel(b)}):!1!==c&&y.cancel(b)},cancelAll:function(){var a=q.getWaitingOrConnected(),b;if(a.length)for(b=a.length-1;0<=b;b--)d.cancel(a[b]);q.reset()},getFile:function(b){return a.getProxy&&a.getProxy(b)?a.getProxy(b).referenceBlob:a.getFile&&a.getFile(b)},isProxied:function(b){return!(!a.getProxy||
!a.getProxy(b))},getInput:function(b){if(a.getInput)return a.getInput(b)},reset:function(){z("Resetting upload handler");d.cancelAll();q.reset();a.reset()},expunge:function(b){if(d.isValid(b))return a.expunge(b)},isValid:function(b){return a.isValid(b)},getResumableFilesData:function(){return a.getResumableFilesData?a.getResumableFilesData():[]},getThirdPartyFileId:function(b){if(d.isValid(b))return a.getThirdPartyFileId(b)},pause:function(b){return d.isResumable(b)&&a.pause&&d.isValid(b)&&a.pause(b)?
(q.free(b),a.moveInProgressToRemaining(b),!0):!1},isResumable:function(b){return!!a.isResumable&&a.isResumable(b)}});f.extend(l,b);var z=l.log;c=(h=l.chunking.enabled&&f.supportedFeatures.chunking)&&l.chunking.concurrent.enabled;var p=function(){var a={};a[l.preventRetryParam]=!0;return a}();y.initHandler()};f.WindowReceiveMessage=function(b){var e={};f.extend({log:function(b,e){}},b);f.extend(this,{receiveMessage:function(b,h){var c=function(a){h(a.data)};window.postMessage?e[b]=f(window).attach("message",
c):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(b){window.postMessage&&(b=e[b])&&b()}})};f.FormUploadHandler=function(b){function e(a,b){var c=a.id,d=c.split("_")[0],e=z(d);l[e]=b;u[d]=f(a).attach("load",function(){h.getInput(d)&&(p("Received iframe load event for CORS upload request (iframe name "+c+")"),q[c]=setTimeout(function(){var a="No valid message received from loaded iframe for iframe name "+c;p(a,"error");b({error:a})},1E3))});x.receiveMessage(c,
function(a){p("Received the following window message: '"+a+"'");c.split("_");var b=h._parseJsonResponse(a),d=b.uuid;d&&l[d]?(p("Handling response for iframe name "+c),clearTimeout(q[c]),delete q[c],h._detachLoadEvent(c),a=l[d],delete l[d],x.stopReceivingMessages(c),a(b)):d||p("'"+a+"' does not contain a UUID - ignoring.")})}var d=b.options,h=this,c=b.proxy,a=f.getUniqueId(),l={},u={},q={},r=d.isCors,y=d.inputName,z=c.getUuid,p=c.log,x=new f.WindowReceiveMessage({log:p});f.extend(this,new f.UploadHandler(b));
f.override(this,function(a){return{add:function(b,c){a.add(b,{input:c});c.setAttribute("name",y);c.parentNode&&f(c).remove()},expunge:function(b){delete u[b];r&&(clearTimeout(q[b]),delete q[b],x.stopReceivingMessages(b));var c=document.getElementById(h._getIframeName(b));c&&(c.setAttribute("src","javascript:false;"),f(c).remove());a.expunge(b)},isValid:function(b){return a.isValid(b)&&void 0!==h._getFileState(b).input}}});f.extend(this,{getInput:function(a){return h._getFileState(a).input},_attachLoadEvent:function(a,
b){var c;r?e(a,b):u[a.id]=f(a).attach("load",function(){p("Received response for "+a.id);if(a.parentNode){try{if(a.contentDocument&&a.contentDocument.body&&"false"==a.contentDocument.body.innerHTML)return}catch(F){p("Error when attempting to access iframe during handling of upload response ("+F.message+")","error"),c={success:!1}}b(c)}})},_createIframe:function(a){a=h._getIframeName(a);var b=f.toElement("<iframe src='javascript:false;' name='"+a+"' />");b.setAttribute("id",a);b.style.display="none";
document.body.appendChild(b);return b},_detachLoadEvent:function(a){void 0!==u[a]&&(u[a](),delete u[a])},_getIframeName:function(b){return b+"_"+a},_initFormForUpload:function(a){var b=a.endpoint,c=a.params,d=a.paramsInBody,e=a.targetName;a=f.toElement("<form method='"+a.method+"' enctype='multipart/form-data'></form>");var h=b;d?f.obj2Inputs(c,a):h=f.obj2url(c,b);a.setAttribute("action",h);a.setAttribute("target",e);a.style.display="none";document.body.appendChild(a);return a},_parseJsonResponse:function(a){var b=
{};try{b=f.parseJson(a)}catch(C){p("Error when attempting to parse iframe upload response ("+C.message+")","error")}return b}})};f.XhrUploadHandler=function(b){function e(a){f.each(d._getXhrs(a),function(b,c){b=d._getAjaxRequester(a,b);c.onreadystatechange=null;c.upload.onprogress=null;c.abort();b&&b.canceled&&b.canceled(a)})}var d=this,h=b.options.namespace,c=b.proxy,a=b.options.chunking,l=b.options.resume,u=a&&b.options.chunking.enabled&&f.supportedFeatures.chunking,q=l&&b.options.resume.enabled&&
u&&f.supportedFeatures.resume,r=c.getName,y=c.getSize,z=c.getUuid,p=c.getEndpoint,x=c.getDataByUuid,t=c.onUuidChanged,B=c.onProgress,C=c.log;f.extend(this,new f.UploadHandler(b));f.override(this,function(a){return{add:function(b,c){if(f.isFile(c)||f.isBlob(c))a.add(b,{file:c});else if(c instanceof f.BlobProxy)a.add(b,{proxy:c});else throw Error("Passed obj is not a File, Blob, or proxy");d._initTempState(b);q&&d._maybePrepareForResume(b)},expunge:function(b){e(b);d._maybeDeletePersistedChunkData(b);
d._clearXhrs(b);a.expunge(b)}}});f.extend(this,{clearCachedChunk:function(a,b){delete d._getFileState(a).temp.cachedChunks[b]},clearXhr:function(a,b){a=d._getFileState(a).temp;a.xhrs&&delete a.xhrs[b];a.ajaxRequesters&&delete a.ajaxRequesters[b]},finalizeChunks:function(a,b){var c=d._getTotalChunks(a)-1;a=d._getXhr(a,c);return b?(new f.Promise).success(b(a),a):(new f.Promise).success({},a)},getFile:function(a){return d.isValid(a)&&d._getFileState(a).file},getProxy:function(a){return d.isValid(a)&&
d._getFileState(a).proxy},getResumableFilesData:function(){var a=[];d._iterateResumeRecords(function(b,c){d.moveInProgressToRemaining(null,c.chunking.inProgress,c.chunking.remaining);b={name:c.name,remaining:c.chunking.remaining,size:c.size,uuid:c.uuid};c.key&&(b.key=c.key);a.push(b)});return a},isResumable:function(b){return!!a&&d.isValid(b)&&!d._getFileState(b).notResumable},moveInProgressToRemaining:function(a,b,c){b=b||d._getFileState(a).chunking.inProgress;var e=c||d._getFileState(a).chunking.remaining;
b&&(C(f.format("Moving these chunks from in-progress {}, to remaining.",JSON.stringify(b))),b.reverse(),f.each(b,function(a,b){e.unshift(b)}),b.length=0)},pause:function(a){if(d.isValid(a))return C(f.format("Aborting XHR upload for {} '{}' due to pause instruction.",a,r(a))),d._getFileState(a).paused=!0,e(a),!0},reevaluateChunking:function(b){if(a&&d.isValid(b)){var c=d._getFileState(b),e;delete c.chunking;c.chunking={};var f=d._getTotalChunks(b);if(1<f||a.mandatory){c.chunking.enabled=!0;c.chunking.parts=
f;c.chunking.remaining=[];for(e=0;e<f;e++)c.chunking.remaining.push(e);d._initTempState(b)}else c.chunking.enabled=!1}},updateBlob:function(a,b){d.isValid(a)&&(d._getFileState(a).file=b)},_clearXhrs:function(a){var b=d._getFileState(a).temp;f.each(b.ajaxRequesters,function(a){delete b.ajaxRequesters[a]});f.each(b.xhrs,function(a){delete b.xhrs[a]})},_createXhr:function(a,b){return d._registerXhr(a,b,f.createXhrInstance())},_getAjaxRequester:function(a,b){b=null==b?-1:b;return d._getFileState(a).temp.ajaxRequesters[b]},
_getChunkData:function(b,c){var e=a.partSize,h=y(b),k=d.getFile(b),g=e*c;e=g+e>=h?h:g+e;h=d._getTotalChunks(b);b=this._getFileState(b).temp.cachedChunks;k=b[c]||f.sliceBlob(k,g,e);b[c]=k;return{part:c,start:g,end:e,count:h,blob:k,size:e-g}},_getChunkDataForCallback:function(a){return{partIndex:a.part,startByte:a.start+1,endByte:a.end,totalParts:a.count}},_getLocalStorageId:function(b){var c=r(b),d=y(b),e=a.partSize;b=p(b);return f.format("qq{}resume{}-{}-{}-{}-{}",h,"5.0",c,d,e,b)},_getMimeType:function(a){return d.getFile(a).type},
_getPersistableData:function(a){return d._getFileState(a).chunking},_getTotalChunks:function(b){if(a)return b=y(b),Math.ceil(b/a.partSize)},_getXhr:function(a,b){b=null==b?-1:b;return d._getFileState(a).temp.xhrs[b]},_getXhrs:function(a){return d._getFileState(a).temp.xhrs},_iterateResumeRecords:function(a){q&&f.each(localStorage,function(b,c){0===b.indexOf(f.format("qq{}resume",h))&&(c=JSON.parse(c),a(b,c))})},_initTempState:function(a){d._getFileState(a).temp={ajaxRequesters:{},chunkProgress:{},
xhrs:{},cachedChunks:{}}},_markNotResumable:function(a){d._getFileState(a).notResumable=!0},_maybeDeletePersistedChunkData:function(a){return q&&d.isResumable(a)&&(a=d._getLocalStorageId(a))&&localStorage.getItem(a)?(localStorage.removeItem(a),!0):!1},_maybePrepareForResume:function(a){var b=d._getFileState(a);if(q&&void 0===b.key){var c=d._getLocalStorageId(a);if(c=localStorage.getItem(c))c=JSON.parse(c),x(c.uuid)?d._markNotResumable(a):(C(f.format("Identified file with ID {} and name of {} as resumable.",
a,r(a))),t(a,c.uuid),b.key=c.key,b.chunking=c.chunking,b.loaded=c.loaded,b.attemptingResume=!0,d.moveInProgressToRemaining(a))}},_maybePersistChunkedState:function(a){var b=d._getFileState(a);if(q&&d.isResumable(a)){var c=d._getLocalStorageId(a);b={name:r(a),size:y(a),uuid:z(a),key:b.key,chunking:b.chunking,loaded:b.loaded,lastUpdated:Date.now()};try{localStorage.setItem(c,JSON.stringify(b))}catch(E){C(f.format("Unable to save resume data for '{}' due to error: '{}'.",a,E.toString()),"warn")}}},_registerProgressHandler:function(a,
b,c){var e=d._getXhr(a,b),h=r(a),g={simple:function(b,c){var d=y(a);b===c?B(a,h,d,d):B(a,h,b>=d?d-1:b,d)},chunked:function(e,g){var k=d._getFileState(a).temp.chunkProgress,l=d._getFileState(a).loaded,m=y(a),p=l;k[b]=e-(g-c);f.each(k,function(a,b){p+=b});B(a,h,p,m)}};e.upload.onprogress=function(a){if(a.lengthComputable)g[null==c?"simple":"chunked"](a.loaded,a.total)}},_registerXhr:function(a,b,c,e){b=null==b?-1:b;a=d._getFileState(a).temp;a.xhrs=a.xhrs||{};a.ajaxRequesters=a.ajaxRequesters||{};a.xhrs[b]=
c;e&&(a.ajaxRequesters[b]=e);return c},_removeExpiredChunkingRecords:function(){var a=l.recordsExpireIn;d._iterateResumeRecords(function(b,c){c=new Date(c.lastUpdated);c.setDate(c.getDate()+a);c.getTime()<=Date.now()&&(C("Removing expired resume record with key "+b),localStorage.removeItem(b))})},_shouldChunkThisFile:function(a){var b=d._getFileState(a);b.chunking||d.reevaluateChunking(a);return b.chunking.enabled}})};f.DeleteFileAjaxRequester=function(b){var e={method:"DELETE",uuidParamName:"qquuid",
endpointStore:{},maxConnections:3,customHeaders:function(b){return{}},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(b,c){},onDelete:function(b){},onDeleteComplete:function(b,c,a){}};f.extend(e,b);var d=f.extend(this,new f.AjaxRequester({acceptHeader:"application/json",validMethods:["POST","DELETE"],method:e.method,endpointStore:e.endpointStore,paramsStore:e.paramsStore,mandatedParams:"POST"===e.method.toUpperCase()?{_method:"DELETE"}:{},maxConnections:e.maxConnections,customHeaders:function(b){return e.customHeaders.get(b)},
log:e.log,onSend:e.onDelete,onComplete:e.onDeleteComplete,cors:e.cors}));f.extend(this,{sendDelete:function(b,c,a){a=a||{};e.log("Submitting delete file request for "+b);"DELETE"===e.method?d.initTransport(b).withPath(c).withParams(a).send():(a[e.uuidParamName]=c,d.initTransport(b).withParams(a).send())}})};(function(){function b(a,b,c,d){var h=document.createElement("canvas"),k=c.mime||"image/jpeg",l=new f.Promise;e(a,b,h,c,d).then(function(){l.success(h.toDataURL(k,c.quality||.8))});return l}function e(a,
b,c,e,k){var l=a.naturalWidth,r=a.naturalHeight,p=e.width,q=e.height,t=c.getContext("2d"),u=new f.Promise;t.save();if(e.resize)return d({blob:b,canvas:c,image:a,imageHeight:r,imageWidth:l,orientation:e.orientation,resize:e.resize,targetHeight:q,targetWidth:p});if(!f.supportedFeatures.unlimitedScaledImageSize){b=p;var C=q;if(!f.ios())throw new f.Error("Downsampled dimensions can only be reliably calculated for iOS!");b=5241E3<C*b?{newHeight:Math.round(Math.sqrt(C/b*5241E3)),newWidth:Math.round(Math.sqrt(b/
C*5241E3))}:void 0;b&&(f.log(f.format("Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h",p,q,b.newWidth,b.newHeight),"warn"),p=b.newWidth,q=b.newHeight)}h(c,p,q,e.orientation);if(f.ios()){e=a.naturalWidth;b=a.naturalHeight;C=document.createElement("canvas");1048576<e*b?(C.width=C.height=1,b=C.getContext("2d"),b.drawImage(a,-e+1,0),e=0===b.getImageData(0,0,1,1).data[3]):e=!1;e&&(l/=2,r/=2);e=document.createElement("canvas");if(k){k=r;var F=document.createElement("canvas");
b=0;var H=C=k;F.width=1;F.height=k;F=F.getContext("2d");F.drawImage(a,0,0);for(F=F.getImageData(0,0,1,k).data;H>b;){var G=F[4*(H-1)+3];0===G?C=H:b=H;H=C+b>>1}k=H/k;k=0===k?1:k}else k=1;p=Math.ceil(1024*p/l);q=Math.ceil(1024*q/r/k);b=k=0;e.width=e.height=1024;for(C=e.getContext("2d");k<r;){for(F=H=0;H<l;)C.clearRect(0,0,1024,1024),C.drawImage(a,-H,-k),t.drawImage(e,0,0,1024,1024,F,b,p,q),H+=1024,F+=p;k+=1024;b+=q}t.restore()}else t.drawImage(a,0,0,p,q);c.qqImageRendered&&c.qqImageRendered();u.success();
return u}function d(a){var b=a.blob,c=a.image,d=a.imageHeight,e=a.imageWidth,k=a.orientation,z=new f.Promise,p=a.resize,x=document.createElement("canvas"),t=x.getContext("2d"),B=a.canvas,C=a.targetHeight;a=a.targetWidth;h(x,e,d,k);B.height=C;B.width=a;t.drawImage(c,0,0);p({blob:b,height:C,image:c,sourceCanvas:x,targetCanvas:B,width:a}).then(function(){B.qqImageRendered&&B.qqImageRendered();z.success()},z.failure);return z}function h(a,b,c,d){switch(d){case 5:case 6:case 7:case 8:a.width=c;a.height=
b;break;default:a.width=b,a.height=c}a=a.getContext("2d");switch(d){case 2:a.translate(b,0);a.scale(-1,1);break;case 3:a.translate(b,c);a.rotate(Math.PI);break;case 4:a.translate(0,c);a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI);a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI);a.translate(0,-c);break;case 7:a.rotate(.5*Math.PI);a.translate(b,-c);a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI),a.translate(-b,0)}}function c(a,b){var c=this;window.Blob&&a instanceof Blob&&function(){var b=new Image,
d=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!d)throw Error("No createObjectURL function found to create blob url");b.src=d.createObjectURL(a);c.blob=a;a=b}();a.naturalWidth||a.naturalHeight||(a.onload=function(){var a=c.imageLoadListeners;a&&(c.imageLoadListeners=null,setTimeout(function(){for(var b=0,c=a.length;b<c;b++)a[b]()},0))},a.onerror=b,this.imageLoadListeners=[]);this.srcImage=a}c.prototype.render=function(a,
c){c=c||{};var d=this,h=this.srcImage.naturalWidth,k=this.srcImage.naturalHeight,l=c.width,z=c.height,p=c.maxWidth,x=c.maxHeight,t=!this.blob||"image/jpeg"===this.blob.type,B=a.tagName.toLowerCase();if(this.imageLoadListeners)this.imageLoadListeners.push(function(){d.render(a,c)});else{l&&!z?z=k*l/h<<0:z&&!l?l=h*z/k<<0:(l=h,z=k);p&&l>p&&(l=p,z=k*l/h<<0);x&&z>x&&(z=x,l=h*z/k<<0);var C={width:l,height:z};f.each(c,function(a,b){C[a]=b});"img"===B?function(){var c=a.src;b(d.srcImage,d.blob,C,t).then(function(b){a.src=
b;c===a.src&&a.onload()})}():"canvas"===B&&e(this.srcImage,this.blob,a,C,t);if("function"===typeof this.onrender)this.onrender(a)}};f.MegaPixImage=c})();f.ImageGenerator=function(b){function e(a){return"img"===a.tagName.toLowerCase()}function d(a){return"canvas"===a.tagName.toLowerCase()}function h(a){a=a.split("/");a=a[a.length-1].split("?")[0];a=(a=f.getExtension(a))&&a.toLowerCase();switch(a){case "jpeg":case "jpg":return"image/jpeg";case "png":return"image/png";case "bmp":return"image/bmp";case "gif":return"image/gif";
case "tiff":case "tif":return"image/tiff"}}function c(a){var b=document.createElement("a");b.href=a;a=b.protocol;var c=b.port;b=b.hostname;return a.toLowerCase()!==window.location.protocol.toLowerCase()||b.toLowerCase()!==window.location.hostname.toLowerCase()||c!==window.location.port&&!f.ie()?!0:!1}function a(a,c){a.onload=function(){a.onload=null;a.onerror=null;c.success(a)};a.onerror=function(){a.onload=null;a.onerror=null;b("Problem drawing thumbnail!","error");c.failure(a,"Problem drawing thumbnail!")}}
function l(a,b){a.qqImageRendered=function(){b.success(a)}}function u(c,h){var k=e(c)||d(c);e(c)?a(c,h):d(c)?l(c,h):(h.failure(c),b(f.format("Element container of type {} is not supported!",c.tagName),"error"));return k}function q(a,c,d){var e=new f.Promise,h=new f.Identify(a,b),k=d.maxSize,l=null==d.orient?!0:d.orient,p=function(){c.onerror=null;c.onload=null;b("Could not render preview, file may be too large!","error");e.failure(c,"Browser cannot render image!")};h.isPreviewable().then(function(h){var t=
{parse:function(){return(new f.Promise).success()}};t=l?new f.Exif(a,b):t;var r=new f.MegaPixImage(a,p);u(c,e)&&t.parse().then(function(a){r.render(c,{maxWidth:k,maxHeight:k,orientation:a&&a.Orientation,mime:h,resize:d.customResizeFunction})},function(a){b(f.format("EXIF data could not be parsed ({}).  Assuming orientation = 1.",a));r.render(c,{maxWidth:k,maxHeight:k,mime:h,resize:d.customResizeFunction})})},function(){b("Not previewable");e.failure(c,"Not previewable")});return e}function r(a,b,
d,e,k){var l=new Image,p=new f.Promise;u(l,p);c(a)&&(l.crossOrigin="anonymous");l.src=a;p.then(function(){u(b,d);(new f.MegaPixImage(l)).render(b,{maxWidth:e,maxHeight:e,mime:h(a),resize:k})},d.failure)}function y(a,b,c,d){u(b,c);f(b).css({maxWidth:d+"px",maxHeight:d+"px"});b.src=a}f.extend(this,{generate:function(a,h,k){if(f.isString(a)){b("Attempting to update thumbnail based on server response.");var l=k||{};k=new f.Promise;var p=l.scale;l=p?l.maxSize:null;p&&e(h)?(p=document.createElement("canvas"),
p.getContext&&p.getContext("2d")?c(a)&&void 0===(new Image).crossOrigin?y(a,h,k,l):r(a,h,k,l):y(a,h,k,l)):d(h)?r(a,h,k,l):u(h,k)&&(h.src=a);return k}b("Attempting to draw client-side image preview.");return q(a,h,k||{})}});this._testing={};this._testing.isImg=e;this._testing.isCanvas=d;this._testing.isCrossOrigin=c;this._testing.determineMimeOfFileName=h};f.Exif=function(b,e){function d(a){for(var b=0,c=0;0<a.length;)b+=parseInt(a.substring(0,2),16)*Math.pow(2,c),a=a.substring(2,a.length),c+=8;return b}
function h(a,c){var d=a,e=c;void 0===d&&(d=2,e=new f.Promise);f.readBlobToHex(b,d,4).then(function(a){var b=/^ffe([0-9])/.exec(a);b?"1"!==b[1]?(a=parseInt(a.slice(4,8),16),h(d+a+2,e)):e.success(d):e.failure("No EXIF header to be found!")});return e}function c(){var a=new f.Promise;f.readBlobToHex(b,0,6).then(function(b){0!==b.indexOf("ffd8")?a.failure("Not a valid JPEG!"):h().then(function(b){a.success(b)},function(b){a.failure(b)})});return a}function a(a){var c=new f.Promise;f.readBlobToHex(b,a+
10,2).then(function(a){c.success("4949"===a)});return c}function l(a,c){var e=new f.Promise;f.readBlobToHex(b,a+18,2).then(function(a){if(c)return e.success(d(a));e.success(parseInt(a,16))});return e}function u(a,b){var c=f.extend([],q),e={};f.each(b,function(b,f){b=f.slice(0,4);var h=a?d(b):parseInt(b,16);b=c.indexOf(h);if(0<=b){var k=r[h].name;h=r[h].bytes;f=f.slice(16,16+2*h);e[k]=a?d(f):parseInt(f,16);c.splice(b,1)}if(0===c.length)return!1});return e}var q=[274],r={274:{name:"Orientation",bytes:2}};
f.extend(this,{parse:function(){var d=new f.Promise,h=function(a){e(f.format("EXIF header parse failed: '{}' ",a));d.failure(a)};c().then(function(c){e(f.format("Moving forward with EXIF header parsing for '{}'",void 0===b.name?"blob":b.name));a(c).then(function(a){e(f.format("EXIF Byte order is {} endian",a?"little":"big"));l(c,a).then(function(k){e(f.format("Found {} APP1 directory entries",k));f.readBlobToHex(b,c+20,12*k).then(function(b){for(var c=[],f=0;f+24<=b.length;)c.push(b.slice(f,f+24)),
f+=24;b=u(a,c);e("Successfully parsed some EXIF tags");d.success(b)},h)},h)},h)},h);return d}});this._testing={};this._testing.parseLittleEndian=d};f.Identify=function(b,e){function d(b,c){var a=!1;b=[].concat(b);f.each(b,function(b,d){if(0===c.indexOf(d))return a=!0,!1});return a}f.extend(this,{isPreviewable:function(){var h=this,c=new f.Promise,a=!1,l=void 0===b.name?"blob":b.name;e(f.format("Attempting to determine if {} can be rendered in this browser",l));e("First pass: check type attribute of blob object.");
this.isPreviewableSync()?(e("Second pass: check for magic bytes in file header."),f.readBlobToHex(b,0,4).then(function(b){f.each(h.PREVIEWABLE_MIME_TYPES,function(e,h){if(d(h,b)){if("image/tiff"!==e||f.supportedFeatures.tiffPreviews)a=!0,c.success(e);return!1}});e(f.format("'{}' is {} able to be rendered in this browser",l,a?"":"NOT"));a||c.failure()},function(){e("Error reading file w/ name '"+l+"'.  Not able to be rendered in this browser.");c.failure()})):c.failure();return c},isPreviewableSync:function(){var d=
b.type,c=0<=f.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES),d),a=!1,h=void 0===b.name?"blob":b.name;c&&(a="image/tiff"===d?f.supportedFeatures.tiffPreviews:!0);!a&&e(h+" is not previewable in this browser per the blob's type attr");return a}})};f.Identify.prototype.PREVIEWABLE_MIME_TYPES={"image/jpeg":"ffd8ff","image/gif":"474946","image/png":"89504e","image/bmp":"424d","image/tiff":["49492a00","4d4d002a"]};f.ImageValidation=function(b,e){function d(a){var b=!1;f.each(a,function(a,c){if(0<c)return b=
!0,!1});return b}function h(){var a=new f.Promise;(new f.Identify(b,e)).isPreviewable().then(function(){var c=new Image,d=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;d?(c.onerror=function(){e("Cannot determine dimensions for image.  May be too large.","error");a.failure()},c.onload=function(){a.success({width:this.width,height:this.height})},c.src=d.createObjectURL(b)):(e("No createObjectURL function available to generate image URL!",
"error"),a.failure())},a.failure);return a}function c(a,b){var c;f.each(a,function(a,d){if(0<d){var e=/(max|min)(Width|Height)/.exec(a),f=e[2].charAt(0).toLowerCase()+e[2].slice(1);f=b[f];switch(e[1]){case "min":if(f<d)return c=a,!1;break;case "max":if(f>d)return c=a,!1}}});return c}this.validate=function(a){var b=new f.Promise;e("Attempting to validate image.");d(a)?h().then(function(d){(d=c(a,d))?b.failure(d):b.success()},b.success):b.success();return b}};f.Session=function(b){function e(b,c,a,
e){var h=!1;c&&(f.isArray(b)?c=!0:(d.log("Session response is not an array.","error"),c=void 0));c&&f.each(b,function(a,b){if(null==b.uuid)h=!0,d.log(f.format("Session response item {} did not include a valid UUID - ignoring.",a),"error");else if(null==b.name)h=!0,d.log(f.format("Session response item {} did not include a valid name - ignoring.",a),"error");else try{return d.addFileRecord(b),!0}catch(y){h=!0,d.log(y.message,"error")}return!1});e[c&&!h?"success":"failure"](b,a)}var d={endpoint:null,
params:{},customHeaders:{},cors:{},addFileRecord:function(b){},log:function(b,c){}};f.extend(d,b,!0);this.refresh=function(){var b=new f.Promise,c=f.extend({},d);(new f.SessionAjaxRequester(f.extend(c,{onComplete:function(a,c,d){e(a,c,d,b)}}))).queryServer();return b}};f.SessionAjaxRequester=function(b){var e={endpoint:null,customHeaders:{},params:{},cors:{expected:!1,sendCredentials:!1},onComplete:function(b,c,a){},log:function(b,c){}};f.extend(e,b);var d=f.extend(this,new f.AjaxRequester({acceptHeader:"application/json",
validMethods:["GET"],method:"GET",endpointStore:{get:function(){return e.endpoint}},customHeaders:e.customHeaders,log:e.log,onComplete:function(b,c,a){b=null;if(null!=c.responseText)try{b=f.parseJson(c.responseText)}catch(l){e.log("Problem parsing session response: "+l.message,"error"),a=!0}e.onComplete(b,!a,c)},cors:e.cors}));f.extend(this,{queryServer:function(){var b=f.extend({},e.params);e.log("Session query request.");d.initTransport("sessionRefresh").withParams(b).withCacheBuster().send()}})};
f.Scaler=function(b,e){var d=b.customResizer,h=b.sendOriginal,c=b.orient,a=b.defaultType,l=b.defaultQuality/100,u=b.failureText,q=b.includeExif,r=this._getSortedSizes(b.sizes);f.extend(this,{enabled:f.supportedFeatures.scaling&&0<r.length,getFileRecords:function(b,k,p){var z=this,t=[],y=p.blob?p.blob:p;(new f.Identify(y,e)).isPreviewableSync()?(f.each(r,function(b,h){b=z._determineOutputType({defaultType:a,requestedType:h.type,refType:y.type});t.push({uuid:f.getUniqueId(),name:z._getName(k,{name:h.name,
type:b,refType:y.type}),blob:new f.BlobProxy(y,f.bind(z._generateScaledImage,z,{customResizeFunction:d,maxSize:h.maxSize,orient:c,type:b,quality:l,failedText:u,includeExif:q,log:e}))})}),t.push({uuid:b,name:k,size:y.size,blob:h?y:null})):t.push({uuid:b,name:k,size:y.size,blob:y});return t},handleNewFile:function(a,b,c,d,e,h,k,l){var p=[],t=null,r=l.addFileToHandler,q=l.uploadData,g=l.paramsStore,m=f.getUniqueId();f.each(this.getFileRecords(c,b,a),function(a,b){a=b.size;b.blob instanceof f.BlobProxy&&
(a=-1);a=q.addFile({uuid:b.uuid,name:b.name,size:a,batchId:h,proxyGroupId:m});b.blob instanceof f.BlobProxy?p.push(a):t=a;b.blob?(r(a,b.blob),e.push({id:a,file:b.blob})):q.setStatus(a,f.status.REJECTED)});null!==t&&(f.each(p,function(a,b){a={qqparentuuid:q.retrieve({id:t}).uuid,qqparentsize:q.retrieve({id:t}).size};a[k]=q.retrieve({id:b}).uuid;q.setParentId(b,t);g.addReadOnly(b,a)}),p.length&&function(){var a={};a[k]=q.retrieve({id:t}).uuid;g.addReadOnly(t,a)}())}})};f.extend(f.Scaler.prototype,{scaleImage:function(b,
e,d){if(!f.supportedFeatures.scaling)throw new f.Error("Scaling is not supported in this browser!");var h=new f.Promise,c=d.log,a=d.getFile(b),l=(d=d.uploadData.retrieve({id:b}))&&d.name,u=d&&d.uuid,q=new f.Scaler({customResizer:e.customResizer,sendOriginal:!1,orient:e.orient,defaultType:e.type||null,defaultQuality:e.quality,failedToScaleText:"Unable to scale",sizes:[{name:"",maxSize:e.maxSize}]},c);f.Scaler&&f.supportedFeatures.imagePreviews&&a?f.bind(function(){var d=q.getFileRecords(u,l,a)[0];
d&&d.blob instanceof f.BlobProxy?d.blob.create().then(h.success,h.failure):(c(b+" is not a scalable image!","error"),h.failure())},this)():(h.failure(),c("Could not generate requested scaled image for "+b+".  Scaling is either not possible in this browser, or the file could not be located.","error"));return h},_determineOutputType:function(b){var e=b.requestedType,d=b.defaultType;b=b.refType;return d||e?e?0<=f.indexOf(Object.keys(f.Identify.prototype.PREVIEWABLE_MIME_TYPES),e)?"image/tiff"===e?f.supportedFeatures.tiffPreviews?
e:d:e:d:d:"image/jpeg"!==b?"image/png":b},_getName:function(b,e){var d=b.lastIndexOf("."),h=e.type||"image/png",c=e.refType,a=f.getExtension(b),l="";e.name&&e.name.trim().length&&(l=" ("+e.name+")");0<=d?(b=b.substr(0,d),c!==h&&(a=h.split("/")[1]),b+=l+"."+a):b+=l;return b},_getSortedSizes:function(b){b=f.extend([],b);return b.sort(function(b,d){return b.maxSize>d.maxSize?1:b.maxSize<d.maxSize?-1:0})},_generateScaledImage:function(b,e){var d=this,h=b.customResizeFunction,c=b.log,a=b.maxSize,l=b.orient,
u=b.type,q=b.quality,r=b.failedText,y=b.includeExif&&"image/jpeg"===e.type&&"image/jpeg"===u,z=new f.Promise;b=new f.ImageGenerator(c);var p=document.createElement("canvas");c("Attempting to generate scaled version for "+e.name);b.generate(e,p,{maxSize:a,orient:l,customResizeFunction:h}).then(function(){var a=p.toDataURL(u,q),b=function(){c("Success generating scaled version for "+e.name);var b=f.dataUriToBlob(a);z.success(b)};y?d._insertExifHeader(e,a,c).then(function(c){a=c;b()},function(){c("Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.",
"error");b()}):b()},function(){c("Failed attempt to generate scaled version for "+e.name,"error");z.failure(r)});return z},_insertExifHeader:function(b,e,d){var h=new FileReader,c=new f.Promise,a="";h.onload=function(){a=h.result;c.success(f.ExifRestorer.restore(a,e))};h.onerror=function(){d("Problem reading "+b.name+" during attempt to transfer EXIF data to scaled version.","error");c.failure()};h.readAsDataURL(b);return c},_dataUriToBlob:function(b){var e=0<=b.split(",")[0].indexOf("base64")?atob(b.split(",")[1]):
decodeURI(b.split(",")[1]);b=b.split(",")[0].split(":")[1].split(";")[0];var d=new ArrayBuffer(e.length);var h=new Uint8Array(d);f.each(e,function(b,a){h[b]=a.charCodeAt(0)});return this._createBlob(d,b)},_createBlob:function(b,e){var d=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;return(d=d&&new d)?(d.append(b),d.getBlob(e)):new Blob([b],{type:e})}});f.ExifRestorer=function(){return{KEY_STR:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
encode64:function(b){var e="",d=0;do{var f=b[d++];var c=b[d++];var a=b[d++];var h=f>>2;f=(f&3)<<4|c>>4;var u=(c&15)<<2|a>>6;var q=a&63;isNaN(c)?u=q=64:isNaN(a)&&(q=64);e=e+this.KEY_STR.charAt(h)+this.KEY_STR.charAt(f)+this.KEY_STR.charAt(u)+this.KEY_STR.charAt(q)}while(d<b.length);return e},restore:function(b,e){if(!b.match("data:image/jpeg;base64,"))return e;b=this.decode64(b.replace("data:image/jpeg;base64,",""));b=this.slice2Segments(b);e=this.exifManipulation(e,b);return"data:image/jpeg;base64,"+
this.encode64(e)},exifManipulation:function(b,e){e=this.getExifArray(e);b=this.insertExif(b,e);return new Uint8Array(b)},getExifArray:function(b){for(var e,d=0;d<b.length;d++)if(e=b[d],255==e[0]&225==e[1])return e;return[]},insertExif:function(b,e){b=b.replace("data:image/jpeg;base64,","");var d=this.decode64(b),f=d.indexOf(255,3);b=d.slice(0,f);d=d.slice(f);e=b.concat(e);return e=e.concat(d)},slice2Segments:function(b){for(var e=0,d=[];!(255==b[e]&218==b[e+1]);){if(255==b[e]&216==b[e+1])e+=2;else{var f=
e+(256*b[e+2]+b[e+3])+2;e=b.slice(e,f);d.push(e);e=f}if(e>b.length)break}return d},decode64:function(b){var e=0,d=[];if(/[^A-Za-z0-9\+\/=]/g.exec(b))throw Error("There were invalid base64 characters in the input text.  Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='");b=b.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var f=this.KEY_STR.indexOf(b.charAt(e++));var c=this.KEY_STR.indexOf(b.charAt(e++));var a=this.KEY_STR.indexOf(b.charAt(e++));var h=this.KEY_STR.indexOf(b.charAt(e++));f=f<<2|c>>4;
c=(c&15)<<4|a>>2;var u=(a&3)<<6|h;d.push(f);64!=a&&d.push(c);64!=h&&d.push(u)}while(e<b.length);return d}}}();f.TotalProgress=function(b,e){var d={},h=0,c=0,a=-1,l=-1,u=function(c,d){c===a&&d===l||b(c,d);a=c;l=d},q=function(a,b){var c=!0;f.each(a,function(a,d){if(0<=f.indexOf(b,d))return c=!1});return c},r=function(a){var b=e(a);0<b&&(y(a,0,b),d[a]={loaded:0,total:b})},y=function(a,b,e){var f=d[a]?d[a].loaded:0;a=d[a]?d[a].total:0;-1===b&&-1===e?(h-=f,c-=a):(b&&(h+=b-f),e&&(c+=e-a));u(h,c)};f.extend(this,
{onAllComplete:function(a,b,d){if(0===b.length||q(b,d))u(c,c),this.reset()},onStatusChange:function(a,b,c){c===f.status.CANCELED||c===f.status.REJECTED?(y(a,-1,-1),delete d[a]):c===f.status.SUBMITTING&&r(a)},onIndividualProgress:function(a,b,c){y(a,b,c);d[a]={loaded:b,total:c}},onNewSize:function(a){r(a)},reset:function(){d={};c=h=0}})};f.PasteSupport=function(b){var e;var d={targetElement:null,callbacks:{log:function(b,c){},pasteReceived:function(b){}}};f.extend(d,b);(function(){e=f(d.targetElement).attach("paste",
function(b){(b=b.clipboardData)&&f.each(b.items,function(b,a){a.type&&0===a.type.indexOf("image/")&&(b=a.getAsFile(),d.callbacks.pasteReceived(b))})})})();f.extend(this,{reset:function(){e&&e()}})};f.FormSupport=function(b,e,d){function h(a,b){if(a.checkValidity&&!a.checkValidity())d("Form did not pass validation checks - will not upload.","error"),b();else return!0}function c(a){var b=a.submit;f(a).attach("submit",function(c){c=c||window.event;c.preventDefault?c.preventDefault():c.returnValue=!1;
h(a,b)&&e()});a.submit=function(){h(a,b)&&e()}}var a=this,l=b.interceptSubmit,u=b.element;f.extend(this,{newEndpoint:null,newAutoUpload:b.autoUpload,attachedToForm:!1,getFormInputsAsObject:function(){return null==u?null:a._form2Obj(u)}});u=function(b){if(b&&(f.isString(b)&&(b=document.getElementById(b)),b)){d("Attaching to form element.");var e=b;e.getAttribute("action")&&(a.newEndpoint=e.getAttribute("action"));l&&c(b)}return b}(u);this.attachedToForm=!!u};f.extend(f.FormSupport.prototype,{_form2Obj:function(b){var e=
{},d=function(b){return 0<=f.indexOf(["checkbox","radio"],b.type.toLowerCase())&&!b.checked?!0:b.disabled&&"hidden"!==b.type.toLowerCase()},h=function(b){var a=null;f.each(f(b).children(),function(b,c){if("option"===c.tagName.toLowerCase()&&c.selected)return a=c.value,!1});return a};f.each(b.elements,function(b,a){if(b=f.isInput(a,!0)||"textarea"===a.tagName.toLowerCase())b=0>f.indexOf(["button","image","reset","submit"],a.type.toLowerCase());b&&!d(a)?e[a.name]=a.value:"select"!==a.tagName.toLowerCase()||
d(a)||(b=h(a),null!==b&&(e[a.name]=b))});return e}});f.CryptoJS=function(b,e){var d={},f=d.lib={},c=f.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;b&&c.mixIn(b);c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&
(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=f.WordArray=c.extend({init:function(a,b){a=this.words=a||[];this.sigBytes=b!=e?b:4*a.length},toString:function(a){return(a||u).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;a=a.sigBytes;this.clamp();if(d%4)for(var e=0;e<a;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-e%4*8&255)<<24-(d+e)%4*8;else if(65535<c.length)for(e=0;e<a;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);this.sigBytes+=
a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<32-c%4*8;a.length=b.ceil(c/4)},clone:function(){var a=c.clone.call(this);a.words=this.words.slice(0);return a},random:function(c){for(var d=[],e=0;e<c;e+=4)d.push(4294967296*b.random()|0);return new a.init(d,c)}}),h=d.enc={},u=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;d<a;d++){var e=b[d>>>2]>>>24-d%4*8&255;c.push((e>>>4).toString(16));c.push((e&15).toString(16))}return c.join("")},
parse:function(b){for(var c=b.length,d=[],e=0;e<c;e+=2)d[e>>>3]|=parseInt(b.substr(e,2),16)<<24-e%8*4;return new a.init(d,c/2)}},q=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;d<a;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-d%4*8&255));return c.join("")},parse:function(b){for(var c=b.length,d=[],e=0;e<c;e++)d[e>>>2]|=(b.charCodeAt(e)&255)<<24-e%4*8;return new a.init(d,c)}},r=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(q.stringify(a)))}catch(x){throw Error("Malformed UTF-8 data");
}},parse:function(a){return q.parse(unescape(encodeURIComponent(a)))}},y=f.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new a.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=r.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(c){var d=this._data,e=d.words,f=d.sigBytes,h=this.blockSize,k=f/(4*h);k=c?b.ceil(k):b.max((k|0)-this._minBufferSize,0);c=k*h;f=b.min(4*c,f);if(c){for(var l=0;l<c;l+=h)this._doProcessBlock(e,l);l=e.splice(0,c);d.sigBytes-=
f}return new a.init(l,f)},clone:function(){var a=c.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});f.Hasher=y.extend({cfg:c.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){y.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return(new a.init(c)).finalize(b)}},_createHmacHelper:function(a){return function(b,
c){return(new z.HMAC.init(a,c)).finalize(b)}}});var z=d.algo={};return d}(Math);(function(){var b=f.CryptoJS,e=b.lib.WordArray;b.enc.Base64={stringify:function(b){var d=b.words,c=b.sigBytes,a=this._map;b.clamp();b=[];for(var e=0;e<c;e+=3)for(var f=(d[e>>>2]>>>24-e%4*8&255)<<16|(d[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|d[e+2>>>2]>>>24-(e+2)%4*8&255,h=0;4>h&&e+.75*h<c;h++)b.push(a.charAt(f>>>6*(3-h)&63));if(d=a.charAt(64))for(;b.length%4;)b.push(d);return b.join("")},parse:function(b){var d=b.length,c=this._map,
a=c.charAt(64);a&&(a=b.indexOf(a),-1!=a&&(d=a));a=[];for(var f=0,h=0;h<d;h++)if(h%4){var q=c.indexOf(b.charAt(h-1))<<h%4*2,r=c.indexOf(b.charAt(h))>>>6-h%4*2;a[f>>>2]|=(q|r)<<24-f%4*8;f++}return e.create(a,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(){var b=f.CryptoJS,e=b.enc.Utf8;b.algo.HMAC=b.lib.Base.extend({init:function(b,f){b=this._hasher=new b.init;"string"==typeof f&&(f=e.parse(f));var c=b.blockSize,a=4*c;f.sigBytes>a&&(f=b.finalize(f));f.clamp();
b=this._oKey=f.clone();f=this._iKey=f.clone();for(var d=b.words,h=f.words,k=0;k<c;k++)d[k]^=1549556828,h[k]^=909522486;b.sigBytes=f.sigBytes=a;this.reset()},reset:function(){var b=this._hasher;b.reset();b.update(this._iKey)},update:function(b){this._hasher.update(b);return this},finalize:function(b){var d=this._hasher;b=d.finalize(b);d.reset();return d.finalize(this._oKey.clone().concat(b))}})})();(function(){var b=f.CryptoJS,e=b.lib,d=e.WordArray,h=e.Hasher,c=[];e=b.algo.SHA1=h.extend({_doReset:function(){this._hash=
new d.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var d=this._hash.words,e=d[0],f=d[1],h=d[2],k=d[3],l=d[4],x=0;80>x;x++){if(16>x)c[x]=a[b+x]|0;else{var t=c[x-3]^c[x-8]^c[x-14]^c[x-16];c[x]=t<<1|t>>>31}t=(e<<5|e>>>27)+l+c[x];t=20>x?t+((f&h|~f&k)+1518500249):40>x?t+((f^h^k)+1859775393):60>x?t+((f&h|f&k|h&k)-1894007588):t+((f^h^k)-899497514);l=k;k=h;h=f<<30|f>>>2;f=e;e=t}d[0]=d[0]+e|0;d[1]=d[1]+f|0;d[2]=d[2]+h|0;d[3]=d[3]+k|0;d[4]=d[4]+l|0},_doFinalize:function(){var a=
this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;b[d>>>5]|=128<<24-d%32;b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296);b[(d+64>>>9<<4)+15]=c;a.sigBytes=4*b.length;this._process();return this._hash},clone:function(){var a=h.clone.call(this);a._hash=this._hash.clone();return a}});b.SHA1=h._createHelper(e);b.HmacSHA1=h._createHmacHelper(e)})();(function(b){var e=f.CryptoJS,d=e.lib,h=d.WordArray,c=d.Hasher;d=e.algo;var a=[],l=[];(function(){function c(a){for(var c=b.sqrt(a),d=2;d<=c;d++)if(!(a%
d))return!1;return!0}function d(a){return 4294967296*(a-(a|0))|0}for(var e=2,f=0;64>f;)c(e)&&(8>f&&(a[f]=d(b.pow(e,.5))),l[f]=d(b.pow(e,1/3)),f++),e++})();var u=[];d=d.SHA256=c.extend({_doReset:function(){this._hash=new h.init(a.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],h=c[3],k=c[4],r=c[5],q=c[6],H=c[7],G=0;64>G;G++){if(16>G)u[G]=a[b+G]|0;else{var E=u[G-15],K=u[G-2];u[G]=((E<<25|E>>>7)^(E<<14|E>>>18)^E>>>3)+u[G-7]+((K<<15|K>>>17)^(K<<13|K>>>19)^K>>>
10)+u[G-16]}E=H+((k<<26|k>>>6)^(k<<21|k>>>11)^(k<<7|k>>>25))+(k&r^~k&q)+l[G]+u[G];K=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&e^d&f^e&f);H=q;q=r;r=k;k=h+E|0;h=f;f=e;e=d;d=E+K|0}c[0]=c[0]+d|0;c[1]=c[1]+e|0;c[2]=c[2]+f|0;c[3]=c[3]+h|0;c[4]=c[4]+k|0;c[5]=c[5]+r|0;c[6]=c[6]+q|0;c[7]=c[7]+H|0},_doFinalize:function(){var a=this._data,c=a.words,d=8*this._nDataBytes,e=8*a.sigBytes;c[e>>>5]|=128<<24-e%32;c[(e+64>>>9<<4)+14]=b.floor(d/4294967296);c[(e+64>>>9<<4)+15]=d;a.sigBytes=4*c.length;this._process();
return this._hash},clone:function(){var a=c.clone.call(this);a._hash=this._hash.clone();return a}});e.SHA256=c._createHelper(d);e.HmacSHA256=c._createHmacHelper(d)})(Math);(function(){if("function"==typeof ArrayBuffer){var b=f.CryptoJS.lib.WordArray,e=b.init;(b.init=function(b){b instanceof ArrayBuffer&&(b=new Uint8Array(b));if(b instanceof Int8Array||b instanceof Uint8ClampedArray||b instanceof Int16Array||b instanceof Uint16Array||b instanceof Int32Array||b instanceof Uint32Array||b instanceof Float32Array||
b instanceof Float64Array)b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength);if(b instanceof Uint8Array){for(var d=b.byteLength,c=[],a=0;a<d;a++)c[a>>>2]|=b[a]<<24-a%4*8;e.call(this,c,d)}else e.apply(this,arguments)}).prototype=b}})();f.s3=f.s3||{};f.s3.util=f.s3.util||function(){return{ALGORITHM_PARAM_NAME:"x-amz-algorithm",AWS_PARAM_PREFIX:"x-amz-meta-",CREDENTIAL_PARAM_NAME:"x-amz-credential",DATE_PARAM_NAME:"x-amz-date",REDUCED_REDUNDANCY_PARAM_NAME:"x-amz-storage-class",REDUCED_REDUNDANCY_PARAM_VALUE:"REDUCED_REDUNDANCY",
SERVER_SIDE_ENCRYPTION_PARAM_NAME:"x-amz-server-side-encryption",SERVER_SIDE_ENCRYPTION_PARAM_VALUE:"AES256",SESSION_TOKEN_PARAM_NAME:"x-amz-security-token",V4_ALGORITHM_PARAM_VALUE:"AWS4-HMAC-SHA256",V4_SIGNATURE_PARAM_NAME:"x-amz-signature",CASE_SENSITIVE_PARAM_NAMES:["Cache-Control","Content-Disposition","Content-Encoding","Content-MD5"],UNSIGNABLE_REST_HEADER_NAMES:["Cache-Control","Content-Disposition","Content-Encoding","Content-MD5"],UNPREFIXED_PARAM_NAMES:"Cache-Control Content-Disposition Content-Encoding Content-MD5 x-amz-server-side-encryption x-amz-server-side-encryption-aws-kms-key-id x-amz-server-side-encryption-customer-algorithm x-amz-server-side-encryption-customer-key x-amz-server-side-encryption-customer-key-MD5".split(" "),
getBucket:function(b){var e;f.each([/^(?:https?:\/\/)?([a-z0-9.\-_]+)\.s3(?:-[a-z0-9\-]+)?\.amazonaws\.com/i,/^(?:https?:\/\/)?s3(?:-[a-z0-9\-]+)?\.amazonaws\.com\/([a-z0-9.\-_]+)/i,/^(?:https?:\/\/)?([a-z0-9.\-_]+)/i],function(d,f){if(d=f.exec(b))return e=d[1],!1});return e},_getPrefixedParamName:function(b){return 0<=f.indexOf(f.s3.util.UNPREFIXED_PARAM_NAMES,b)?b:f.s3.util.AWS_PARAM_PREFIX+b},getPolicy:function(b){var e={},d=[],h=b.bucket,c=b.date,a=b.clockDrift,l=b.key,u=b.accessKey,q=b.acl,r=
b.type,y=b.expectedStatus,z=b.sessionToken,p=b.params,x=f.s3.util.getSuccessRedirectAbsoluteUrl(b.successRedirectUrl),t=b.minFileSize,B=b.maxFileSize,C=b.reducedRedundancy,F=b.region,H=b.serverSideEncryption;b=b.signatureVersion;e.expiration=f.s3.util.getPolicyExpirationDate(c,a);d.push({acl:q});d.push({bucket:h});r&&d.push({"Content-Type":r});y&&d.push({success_action_status:y.toString()});x&&d.push({success_action_redirect:x});C&&(d.push({}),d[d.length-1][f.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=
f.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE);z&&(d.push({}),d[d.length-1][f.s3.util.SESSION_TOKEN_PARAM_NAME]=z);H&&(d.push({}),d[d.length-1][f.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=f.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE);2===b?d.push({key:l}):4===b&&(d.push({}),d[d.length-1][f.s3.util.ALGORITHM_PARAM_NAME]=f.s3.util.V4_ALGORITHM_PARAM_VALUE,d.push({}),d[d.length-1].key=l,d.push({}),d[d.length-1][f.s3.util.CREDENTIAL_PARAM_NAME]=f.s3.util.getV4CredentialsString({date:c,key:u,region:F}),d.push({}),
d[d.length-1][f.s3.util.DATE_PARAM_NAME]=f.s3.util.getV4PolicyDate(c,a));f.each(p,function(a,b){a=f.s3.util._getPrefixedParamName(a);var c={};0<=f.indexOf(f.s3.util.UNPREFIXED_PARAM_NAMES,a)?c[a]=b:c[a]=encodeURIComponent(b);d.push(c)});e.conditions=d;f.s3.util.enforceSizeLimits(e,t,B);return e},refreshPolicyCredentials:function(b,e){var d=!1;f.each(b.conditions,function(b,c){f.each(c,function(a,b){a===f.s3.util.SESSION_TOKEN_PARAM_NAME&&(c[a]=e,d=!0)})});d||(b.conditions.push({}),b.conditions[b.conditions.length-
1][f.s3.util.SESSION_TOKEN_PARAM_NAME]=e)},generateAwsParams:function(b,e){var d={},h=b.params,c=new f.Promise,a=b.sessionToken,l=b.clockDrift,u=b.type,q=b.key,r=b.accessKey,y=b.acl,z=b.expectedStatus,p=f.s3.util.getSuccessRedirectAbsoluteUrl(b.successRedirectUrl),x=b.reducedRedundancy,t=b.region,B=b.serverSideEncryption,C=b.signatureVersion,F=new Date,H=b.log;b.date=F;var G=f.s3.util.getPolicy(b);d.key=q;u&&(d["Content-Type"]=u);z&&(d.success_action_status=z);p&&(d.success_action_redirect=p);x&&
(d[f.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=f.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE);B&&(d[f.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=f.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE);a&&(d[f.s3.util.SESSION_TOKEN_PARAM_NAME]=a);d.acl=y;f.each(h,function(a,b){a=f.s3.util._getPrefixedParamName(a);0<=f.indexOf(f.s3.util.UNPREFIXED_PARAM_NAMES,a)?d[a]=b:d[a]=encodeURIComponent(b)});2===C?d.AWSAccessKeyId=r:4===C&&(d[f.s3.util.ALGORITHM_PARAM_NAME]=f.s3.util.V4_ALGORITHM_PARAM_VALUE,d[f.s3.util.CREDENTIAL_PARAM_NAME]=
f.s3.util.getV4CredentialsString({date:F,key:r,region:t}),d[f.s3.util.DATE_PARAM_NAME]=f.s3.util.getV4PolicyDate(F,l));e(G).then(function(a,e,g){d.policy=a.policy;2===b.signatureVersion?(d.signature=a.signature,e&&(d.AWSAccessKeyId=e)):4===b.signatureVersion&&(d[f.s3.util.V4_SIGNATURE_PARAM_NAME]=a.signature);g&&(d[f.s3.util.SESSION_TOKEN_PARAM_NAME]=g);c.success(d)},function(a){a=a||"Can't continue further with request to S3 as we did not receive a valid signature and policy from the server.";H("Policy signing failed.  "+
a,"error");c.failure(a)});return c},enforceSizeLimits:function(b,e,d){(0<e||0<d)&&b.conditions.push(["content-length-range",(0>e?0:e).toString(),(0>=d?9007199254740992:d).toString()])},getPolicyExpirationDate:function(b,e){b=new Date(b.getTime()+e);return f.s3.util.getPolicyDate(b,5)},getCredentialsDate:function(b){return b.getUTCFullYear()+""+("0"+(b.getUTCMonth()+1)).slice(-2)+("0"+b.getUTCDate()).slice(-2)},getPolicyDate:function(b,e){e=e||0;var d;b.setMinutes(b.getMinutes()+(e||0));if(Date.prototype.toISOString)return b.toISOString();
e=function(b){d=String(b);1===d.length&&(d="0"+d);return d};return b.getUTCFullYear()+"-"+e(b.getUTCMonth()+1)+"-"+e(b.getUTCDate())+"T"+e(b.getUTCHours())+":"+e(b.getUTCMinutes())+":"+e(b.getUTCSeconds())+"."+String((b.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"},parseIframeResponse:function(b){if(b=/bucket=(.+)&key=(.+)&etag=(.+)/.exec((b.contentDocument||b.contentWindow.document).location.search))return{bucket:b[1],key:b[2],etag:b[3].replace(/%22/g,"")}},getSuccessRedirectAbsoluteUrl:function(b){if(b){var e=
document.createElement("div");f.ie7()?(e.innerHTML="<a href='"+b+"'></a>",e=e.firstChild):(e=document.createElement("a"),e.href=b,e.href=e.href);return e.href}},getV4CredentialsString:function(b){return b.key+"/"+f.s3.util.getCredentialsDate(b.date)+"/"+b.region+"/s3/aws4_request"},getV4PolicyDate:function(b,e){b=new Date(b.getTime()+e);return f.s3.util.getCredentialsDate(b)+"T"+("0"+b.getUTCHours()).slice(-2)+("0"+b.getUTCMinutes()).slice(-2)+("0"+b.getUTCSeconds()).slice(-2)+"Z"},encodeQueryStringParam:function(b){b=
encodeURIComponent(b);b=b.replace(/[!'()]/g,escape);b=b.replace(/\*/g,"%2A");return b.replace(/%20/g,"+")},uriEscape:function(b){b=encodeURIComponent(b);b=b.replace(/[^A-Za-z0-9_.~\-%]+/g,escape);return b=b.replace(/[*]/g,function(b){return"%"+b.charCodeAt(0).toString(16).toUpperCase()})},uriEscapePath:function(b){var e=[];f.each(b.split("/"),function(b,h){e.push(f.s3.util.uriEscape(h))});return e.join("/")}}}();(function(){f.nonTraditionalBasePublicApi={setUploadSuccessParams:function(b,e){this._uploadSuccessParamsStore.set(b,
e)},setUploadSuccessEndpoint:function(b,e){this._uploadSuccessEndpointStore.set(b,e)}};f.nonTraditionalBasePrivateApi={_onComplete:function(b,e,d,h){var c=d.success?!0:!1,a=this,k=arguments,u=this._uploadSuccessEndpointStore.get(b),q=this._options.uploadSuccess.customHeaders,r=this._options.uploadSuccess.method,y=this._options.cors,z=new f.Promise,p=this._uploadSuccessParamsStore.get(b),x=this._paramsStore.get(b),t=function(c){delete a._failedSuccessRequestCallbacks[b];f.extend(d,c);f.FineUploaderBasic.prototype._onComplete.apply(a,
k);z.success(c)},B=function(c){var l=F;f.extend(d,c);d&&d.reset&&(l=null);l?a._failedSuccessRequestCallbacks[b]=l:delete a._failedSuccessRequestCallbacks[b];a._onAutoRetry(b,e,d,h,l)||(f.FineUploaderBasic.prototype._onComplete.apply(a,k),z.failure(c))};if(c&&u){var C=new f.UploadSuccessAjaxRequester({endpoint:u,method:r,customHeaders:q,cors:y,log:f.bind(this.log,this)});f.extend(p,a._getEndpointSpecificParams(b,d,h),!0);x&&f.extend(p,x,!0);var F=f.bind(function(){C.sendSuccessRequest(b,p).then(t,
B)},a);F();return z}return f.FineUploaderBasic.prototype._onComplete.apply(this,arguments)},_manualRetry:function(b){return f.FineUploaderBasic.prototype._manualRetry.call(this,b,this._failedSuccessRequestCallbacks[b])}}})();(function(){f.s3.FineUploaderBasic=function(b){var e={request:{accessKey:null,clockDrift:0},objectProperties:{acl:"private",bucket:f.bind(function(b){return f.s3.util.getBucket(this.getEndpoint(b))},this),host:f.bind(function(b){return/(?:http|https):\/\/(.+)(?:\/.+)?/.exec(this._endpointStore.get(b))[1]},
this),key:"uuid",reducedRedundancy:!1,region:"us-east-1",serverSideEncryption:!1},credentials:{accessKey:null,secretKey:null,expiration:null,sessionToken:null},signature:{customHeaders:{},endpoint:null,version:2},uploadSuccess:{endpoint:null,method:"POST",params:{},customHeaders:{}},iframeSupport:{localBlankPagePath:null},chunking:{partSize:5242880},cors:{allowXdr:!0},callbacks:{onCredentialsExpired:function(){}}};f.extend(e,b,!0);this.setCredentials(e.credentials,!0)||(this._currentCredentials.accessKey=
e.request.accessKey);this._aclStore=this._createStore(e.objectProperties.acl);f.FineUploaderBasic.call(this,e);this._uploadSuccessParamsStore=this._createStore(this._options.uploadSuccess.params);this._uploadSuccessEndpointStore=this._createStore(this._options.uploadSuccess.endpoint);this._failedSuccessRequestCallbacks={};this._cannedKeys={};this._cannedBuckets={};this._buckets={};this._hosts={}};f.extend(f.s3.FineUploaderBasic.prototype,f.basePublicApi);f.extend(f.s3.FineUploaderBasic.prototype,
f.basePrivateApi);f.extend(f.s3.FineUploaderBasic.prototype,f.nonTraditionalBasePublicApi);f.extend(f.s3.FineUploaderBasic.prototype,f.nonTraditionalBasePrivateApi);f.extend(f.s3.FineUploaderBasic.prototype,{getBucket:function(b){return null==this._cannedBuckets[b]?this._buckets[b]:this._cannedBuckets[b]},getKey:function(b){return null==this._cannedKeys[b]?this._handler.getThirdPartyFileId(b):this._cannedKeys[b]},reset:function(){f.FineUploaderBasic.prototype.reset.call(this);this._failedSuccessRequestCallbacks=
[];this._buckets={};this._hosts={}},setCredentials:function(b,e){if(b&&b.secretKey){if(b.accessKey)if(b.expiration)this._currentCredentials=f.extend({},b),f.isString(b.expiration)&&(this._currentCredentials.expiration=new Date(b.expiration));else throw new f.Error("Invalid credentials: no expiration");else throw new f.Error("Invalid credentials: no accessKey");return!0}if(e)this._currentCredentials={};else throw new f.Error("Invalid credentials parameter!");},setAcl:function(b,e){this._aclStore.set(b,
e)},_createUploadHandler:function(){var b=this,e={aclStore:this._aclStore,getBucket:f.bind(this._determineBucket,this),getHost:f.bind(this._determineHost,this),getKeyName:f.bind(this._determineKeyName,this),iframeSupport:this._options.iframeSupport,objectProperties:this._options.objectProperties,signature:this._options.signature,clockDrift:this._options.request.clockDrift,validation:{minSizeLimit:this._options.validation.minSizeLimit,maxSizeLimit:this._options.validation.sizeLimit}};f.override(this._endpointStore,
function(b){return{get:function(d){d=b.get(d);return 0>d.indexOf("http")?"http://"+d:d}}});f.override(this._paramsStore,function(b){return{get:function(d){d=b.get(d);var c={};f.each(d,function(a,b){0>f.indexOf(f.s3.util.CASE_SENSITIVE_PARAM_NAMES,a)&&(a=a.toLowerCase());c[a]=f.isFunction(b)?b():b});return c}}});e.signature.credentialsProvider={get:function(){return b._currentCredentials},onExpired:function(){var d=new f.Promise,e=b._options.callbacks.onCredentialsExpired();f.isGenericPromise(e)?e.then(function(c){try{b.setCredentials(c),
d.success()}catch(a){b.log("Invalid credentials returned from onCredentialsExpired callback! ("+a.message+")","error"),d.failure("onCredentialsExpired did not return valid credentials.")}},function(c){b.log("onCredentialsExpired callback indicated failure! ("+c+")","error");d.failure("onCredentialsExpired callback failed.")}):(b.log("onCredentialsExpired callback did not return a promise!","error"),d.failure("Unexpected return value for onCredentialsExpired."));return d}};return f.FineUploaderBasic.prototype._createUploadHandler.call(this,
e,"s3")},_determineObjectPropertyValue:function(b,e){var d=this._options.objectProperties[e],h=new f.Promise,c=this;f.isFunction(d)?(d=d(b),f.isGenericPromise(d)?h=d:h.success(d)):f.isString(d)&&h.success(d);h.then(function(a){c["_"+e+"s"][b]=a},function(a){f.log("Problem determining "+e+" for ID "+b+" ("+a+")","error")});return h},_determineBucket:function(b){return this._determineObjectPropertyValue(b,"bucket")},_determineHost:function(b){return this._determineObjectPropertyValue(b,"host")},_determineKeyName:function(b,
e){var d=new f.Promise,h=this._options.objectProperties.key,c=f.getExtension(e),a=d.failure,l=function(a,b){void 0!==b&&(a+="."+b);d.success(a)};switch(h){case "uuid":l(this.getUuid(b),c);break;case "filename":l(e);break;default:f.isFunction(h)?this._handleKeynameFunction(h,b,l,a):(this.log(h+" is not a valid value for the s3.keyname option!","error"),a())}return d},_handleKeynameFunction:function(b,e,d,h){var c=this,a=function(a){d(a)},k=function(a){c.log(f.format("Failed to retrieve key name for {}.  Reason: {}",
e,a||"null"),"error");h(a)};b=b.call(this,e);f.isGenericPromise(b)?b.then(a,k):null==b?k():d(b)},_getEndpointSpecificParams:function(b,e,d){b={key:this.getKey(b),uuid:this.getUuid(b),name:this.getName(b),bucket:this.getBucket(b)};d&&d.getResponseHeader("ETag")?b.etag=d.getResponseHeader("ETag"):e.etag&&(b.etag=e.etag);return b},_onSubmitDelete:function(b,e){var d={key:this.getKey(b),bucket:this.getBucket(b)};return f.FineUploaderBasic.prototype._onSubmitDelete.call(this,b,e,d)},_addCannedFile:function(b){if(null==
b.s3Key)throw new f.Error("Did not find s3Key property in server session response.  This is required!");var e=f.FineUploaderBasic.prototype._addCannedFile.apply(this,arguments);this._cannedKeys[e]=b.s3Key;this._cannedBuckets[e]=b.s3Bucket;return e}})})();window.Uint8ClampedArray||(window.Uint8ClampedArray=function(){});f.s3.RequestSigner=function(b){function e(a,b,d){var e=new f.Promise,h="POST",k=[],p="",t=new Date,u,z,g=function(a){var c,d=[];f.each(a.headers,function(a){k.push(a)});k.sort();f.each(k,
function(b,e){0>f.indexOf(f.s3.util.UNSIGNABLE_REST_HEADER_NAMES,e)?p+=e.toLowerCase()+":"+a.headers[e].trim()+"\n":"Content-MD5"===e?c=a.headers[e]:d.unshift(b)});f.each(d,function(a,b){k.splice(b,1)});u={bucket:a.bucket,contentMd5:c,contentType:a.contentType,date:t,drift:l.signatureSpec.drift,endOfUrl:m,hashedContent:a.hashedContent,headerNames:k,headersStr:p,method:h};z=2===b?q.getStringToSign(u):r.getStringToSign(u);return{date:t,endOfUrl:m,signedHeaders:4===b?r.getSignedHeaders(u.headerNames):
null,toSign:4===b?z.hashed:z,toSignRaw:4===b?z.raw:z}};switch(d.type){case c.REQUEST_TYPE.MULTIPART_ABORT:h="DELETE";var m=f.format("uploadId={}",d.uploadId);break;case c.REQUEST_TYPE.MULTIPART_INITIATE:m="uploads";break;case c.REQUEST_TYPE.MULTIPART_COMPLETE:m=f.format("uploadId={}",d.uploadId);break;case c.REQUEST_TYPE.MULTIPART_UPLOAD:h="PUT",m=f.format("partNumber={}&uploadId={}",d.partNum,d.uploadId)}m=d.key+"?"+m;4===b?r.getEncodedHashedPayload(d.content).then(function(a){d.headers["x-amz-content-sha256"]=
a;d.headers.Host=d.host;d.headers["x-amz-date"]=f.s3.util.getV4PolicyDate(t,l.signatureSpec.drift);d.hashedContent=a;e.success(g(d))},function(a){e.failure(a)}):e.success(g(d));return e}function d(a,b,c,d,e){b.signatureConstructor?(e&&(d=b.signatureConstructor.getHeaders(),d[f.s3.util.SESSION_TOKEN_PARAM_NAME]=e,b.signatureConstructor.withHeaders(d)),b.signatureConstructor.getToSign(a).then(function(a){var d=b.signatureConstructor;a=a.stringToSign;4===l.signatureSpec.version?r.signApiRequest(d,a,
c):q.signApiRequest(d,a,c)},function(a){c.failure(a)})):(e&&f.s3.util.refreshPolicyCredentials(b,e),h(b,c,d,e))}function h(a,b,c,d){4===l.signatureSpec.version?r.signPolicy(a,b,c,d):q.signPolicy(a,b,c,d)}var c=this,a={},l={expectingPolicy:!1,method:"POST",signatureSpec:{drift:0,credentialsProvider:{},endpoint:null,customHeaders:{},version:2},maxConnections:3,endpointStore:{},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(a,b){}},u=function(a,b,c){var d=a.getHeaders();d.Authorization=
4===l.signatureSpec.version?f.s3.util.V4_ALGORITHM_PARAM_VALUE+" Credential="+l.signatureSpec.credentialsProvider.get().accessKey+"/"+f.s3.util.getCredentialsDate(a.getRequestDate())+"/"+l.signatureSpec.region+"/s3/aws4_request,SignedHeaders="+a.getSignedHeaders()+",Signature="+b:"AWS "+l.signatureSpec.credentialsProvider.get().accessKey+":"+b;c.success(d,a.getEndOfUrl())},q={getStringToSign:function(a){return f.format("{}\n{}\n{}\n\n{}/{}/{}",a.method,a.contentMd5||"",a.contentType||"",a.headersStr||
"\n",a.bucket,a.endOfUrl)},signApiRequest:function(a,b,c){b=f.CryptoJS.enc.Utf8.parse(b);b=f.CryptoJS.HmacSHA1(b,y.get().secretKey);b=f.CryptoJS.enc.Base64.stringify(b);u(a,b,c)},signPolicy:function(a,b,c,d){a=JSON.stringify(a);a=f.CryptoJS.enc.Utf8.parse(a);a=f.CryptoJS.enc.Base64.stringify(a);var e=f.CryptoJS.HmacSHA1(a,y.get().secretKey);e=f.CryptoJS.enc.Base64.stringify(e);b.success({policy:a,signature:e},c,d)}},r={getCanonicalQueryString:function(a){var b=a.indexOf("?"),c="";if(0<=b){var d={};
a=a.substr(b+1).split("&");f.each(a,function(a,b){a=b.split("=");b=a[1];null==b&&(b="");d[encodeURIComponent(a[0])]=encodeURIComponent(b)});var e=Object.keys(d).sort();e.forEach(function(a,b){c+=a+"="+d[a];b<e.length-1&&(c+="&")})}return c},getCanonicalRequest:function(a){return f.format("{}\n{}\n{}\n{}\n{}\n{}",a.method,r.getCanonicalUri(a.endOfUrl),r.getCanonicalQueryString(a.endOfUrl),a.headersStr||"\n",r.getSignedHeaders(a.headerNames),a.hashedContent)},getCanonicalUri:function(a){var b=a,c=a.indexOf("?");
0<c&&(b=a.substr(0,c));return"/"+b},getEncodedHashedPayload:function(a){var b=new f.Promise;if(f.isBlob(a)){var c=new FileReader;c.onloadend=function(a){a.target.readyState===FileReader.DONE&&(a.target.error?b.failure(a.target.error):(a=f.CryptoJS.lib.WordArray.create(a.target.result),b.success(f.CryptoJS.SHA256(a).toString())))};c.readAsArrayBuffer(a)}else b.success(f.CryptoJS.SHA256(a||"").toString());return b},getScope:function(a,b){return f.s3.util.getCredentialsDate(a)+"/"+b+"/s3/aws4_request"},
getStringToSign:function(a){var b=r.getCanonicalRequest(a),c=f.s3.util.getV4PolicyDate(a.date,a.drift),d=f.CryptoJS.SHA256(b).toString();a=r.getScope(a.date,l.signatureSpec.region);return{hashed:f.format("AWS4-HMAC-SHA256\n{}\n{}\n{}",c,a,d),raw:f.format("AWS4-HMAC-SHA256\n{}\n{}\n{}",c,a,b)}},getSignedHeaders:function(a){var b="";a.forEach(function(c,d){b+=c.toLowerCase();d<a.length-1&&(b+=";")});return b},signApiRequest:function(a,b,c){var d=y.get().secretKey,e=/.+\n.+\n(\d+)\/(.+)\/s3\/.+\n(.+)/.exec(b);
d=f.CryptoJS.HmacSHA256(e[1],"AWS4"+d);e=f.CryptoJS.HmacSHA256(e[2],d);e=f.CryptoJS.HmacSHA256("s3",e);e=f.CryptoJS.HmacSHA256("aws4_request",e);u(a,f.CryptoJS.HmacSHA256(b,e),c)},signPolicy:function(a,b,c,d){var e=JSON.stringify(a);e=f.CryptoJS.enc.Utf8.parse(e);e=f.CryptoJS.enc.Base64.stringify(e);var h=y.get().secretKey,k=function(){var b=null;f.each(a.conditions,function(a,c){if(a=c["x-amz-credential"])return b=a,!1});return b}();k=/.+\/(.+)\/(.+)\/s3\/aws4_request/.exec(k);h=f.CryptoJS.HmacSHA256(k[1],
"AWS4"+h);h=f.CryptoJS.HmacSHA256(k[2],h);h=f.CryptoJS.HmacSHA256("s3",h);h=f.CryptoJS.HmacSHA256("aws4_request",h);b.success({policy:e,signature:f.CryptoJS.HmacSHA256(e,h).toString()},c,d)}};f.extend(l,b,!0);var y=l.signatureSpec.credentialsProvider;var z=f.extend(this,new f.AjaxRequester({acceptHeader:"application/json",method:l.method,contentType:"application/json; charset=utf-8",endpointStore:{get:function(){return l.signatureSpec.endpoint}},paramsStore:l.paramsStore,maxConnections:l.maxConnections,
customHeaders:l.signatureSpec.customHeaders,log:l.log,onComplete:function(b,c,d){c=c.responseText;var e=a[b],h=e.promise;e=e.signatureConstructor;delete a[b];if(c)try{var k=f.parseJson(c)}catch(G){l.log("Error attempting to parse signature response: "+G,"error")}if(k&&k.error){d=!0;var p=k.error}else k&&k.invalid?(d=!0,p="Invalid policy document or request headers!"):k?l.expectingPolicy&&!k.policy?(d=!0,p="Response does not include the base64 encoded policy!"):k.signature||(d=!0,p="Response does not include the signature!"):
(d=!0,p="Received an empty or invalid response from the server!");d?(p&&l.log(p,"error"),h.failure(p)):e?u(e,k.signature,h):h.success(k)},cors:l.cors}));f.extend(this,{getSignature:function(b,c){var e=c,h=c.signatureConstructor,k=new f.Promise,p;4===l.signatureSpec.version&&(p={v4:!0});y.get().secretKey&&f.CryptoJS?y.get().expiration.getTime()>Date.now()?d(b,c,k):y.onExpired().then(function(){d(b,c,k,y.get().accessKey,y.get().sessionToken)},function(a){l.log("Attempt to update expired credentials apparently failed! Unable to sign request.  ",
"error");k.failure("Unable to sign request - expired credentials.")}):(l.log("Submitting S3 signature request for "+b),h?h.getToSign(b).then(function(a){e={headers:a.stringToSignRaw};z.initTransport(b).withParams(e).withQueryParams(p).send()},function(a){l.log("Failed to construct signature. ","error");k.failure("Failed to construct signature.")}):z.initTransport(b).withParams(e).withQueryParams(p).send(),a[b]={promise:k,signatureConstructor:h});return k},constructStringToSign:function(a,b,c,d){var h=
{},k,p,t,r,q;return{withHeaders:function(a){h=a;return this},withUploadId:function(a){k=a;return this},withContent:function(a){p=a;return this},withContentType:function(a){t=a;return this},withPartNum:function(a){r=a;return this},getToSign:function(g){var m=y.get().sessionToken,u=new f.Promise,z=new Date(Date.now()+l.signatureSpec.drift);h["x-amz-date"]=z.toUTCString();m&&(h[f.s3.util.SESSION_TOKEN_PARAM_NAME]=m);e(g,l.signatureSpec.version,{bucket:b,content:p,contentType:t,headers:h,host:c,key:d,
partNum:r,type:a,uploadId:k}).then(function(a){q=a;u.success({headers:function(){t&&(h["Content-Type"]=t);delete h.Host;return h}(),date:q.date,endOfUrl:q.endOfUrl,signedHeaders:q.signedHeaders,stringToSign:q.toSign,stringToSignRaw:q.toSignRaw})},function(a){u.failure(a)});return u},getHeaders:function(){return f.extend({},h)},getEndOfUrl:function(){return q&&q.endOfUrl},getRequestDate:function(){return q&&q.date},getSignedHeaders:function(){return q&&q.signedHeaders}}}})};f.s3.RequestSigner.prototype.REQUEST_TYPE=
{MULTIPART_INITIATE:"multipart_initiate",MULTIPART_COMPLETE:"multipart_complete",MULTIPART_ABORT:"multipart_abort",MULTIPART_UPLOAD:"multipart_upload"};f.UploadSuccessAjaxRequester=function(b){var e=[],d={method:"POST",endpoint:null,maxConnections:3,customHeaders:{},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(b,a){}};f.extend(d,b);var h=f.extend(this,new f.AjaxRequester({acceptHeader:"application/json",method:d.method,endpointStore:{get:function(){return d.endpoint}},paramsStore:d.paramsStore,
maxConnections:d.maxConnections,customHeaders:d.customHeaders,log:d.log,onComplete:function(b,a,h){var c=e[b];a=a.responseText;var k={success:!0},l={success:!1};delete e[b];d.log(f.format("Received the following response body to an upload success request for id {}: {}",b,a));try{var y=f.parseJson(a);h||y&&(y.error||!1===y.success)?(d.log("Upload success request was rejected by the server.","error"),c.failure(f.extend(y,l))):(d.log("Upload success was acknowledged by the server."),c.success(f.extend(y,
k)))}catch(z){h?(d.log(f.format("Your server indicated failure in its upload success request response for id {}!",b),"error"),c.failure(l)):(d.log("Upload success was acknowledged by the server."),c.success(k))}},cors:d.cors}));f.extend(this,{sendSuccessRequest:function(b,a){var c=new f.Promise;d.log("Submitting upload success request/notification for "+b);h.initTransport(b).withParams(a).send();return e[b]=c}})};f.s3.InitiateMultipartAjaxRequester=function(b){function e(a){var b=h.getBucket(a),d=
h.getHost(a),e={},k=new f.Promise,l=h.getKey(a);e["x-amz-acl"]=h.aclStore.get(a);h.reducedRedundancy&&(e[f.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=f.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE);h.serverSideEncryption&&(e[f.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=f.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE);e[f.s3.util.AWS_PARAM_PREFIX+h.filenameParam]=encodeURIComponent(h.getName(a));f.each(h.paramsStore.get(a),function(a,b){0<=f.indexOf(f.s3.util.UNPREFIXED_PARAM_NAMES,a)?e[a]=b:e[f.s3.util.AWS_PARAM_PREFIX+
a]=encodeURIComponent(b)});b=c.constructStringToSign(c.REQUEST_TYPE.MULTIPART_INITIATE,b,d,l).withContentType(h.getContentType(a)).withHeaders(e);c.getSignature(a,{signatureConstructor:b}).then(k.success,k.failure);return k}var d={},h={filenameParam:"qqfilename",method:"POST",endpointStore:null,paramsStore:null,signatureSpec:null,aclStore:null,reducedRedundancy:!1,serverSideEncryption:!1,maxConnections:3,getContentType:function(a){},getBucket:function(a){},getHost:function(a){},getKey:function(a){},
getName:function(a){},log:function(a,b){}};f.extend(h,b);var c=new f.s3.RequestSigner({endpointStore:h.endpointStore,signatureSpec:h.signatureSpec,cors:h.cors,log:h.log});var a=f.extend(this,new f.AjaxRequester({method:h.method,contentType:null,endpointStore:h.endpointStore,maxConnections:h.maxConnections,allowXRequestedWithAndCacheControl:!1,log:h.log,onComplete:function(a,b,c){var e=d[a],k=(new DOMParser).parseFromString(b.responseText,"application/xml"),l;delete d[a];if(c){var p=b.status;c=k.getElementsByTagName("Message");
if(0<c.length)var q=c[0].textContent}else c=k.getElementsByTagName("UploadId"),0<c.length?l=c[0].textContent:q="Upload ID missing from request";void 0===l?(q?h.log(f.format("Specific problem detected initiating multipart upload request for {}: '{}'.",a,q),"error"):h.log(f.format("Unexplained error with initiate multipart upload request for {}.  Status code {}.",a,p),"error"),e.failure("Problem initiating upload request.",b)):(h.log(f.format("Initiate multipart upload request successful for {}.  Upload ID is {}",
a,l)),e.success(l,b))},successfulResponseCodes:{POST:[200]}}));f.extend(this,{send:function(b){var c=new f.Promise;e(b).then(function(e,f){h.log("Submitting S3 initiate multipart upload request for "+b);d[b]=c;a.initTransport(b).withPath(f).withHeaders(e).send()},c.failure);return c}})};f.s3.CompleteMultipartAjaxRequester=function(b){function e(b,d,e){var h=new f.Promise,k=c.getBucket(b),l=c.getHost(b);d=a.constructStringToSign(a.REQUEST_TYPE.MULTIPART_COMPLETE,k,l,c.getKey(b)).withUploadId(d).withContent(e).withContentType("application/xml; charset=UTF-8");
a.getSignature(b,{signatureConstructor:d}).then(h.success,h.failure);return h}function d(a){var b=document.implementation.createDocument(null,"CompleteMultipartUpload",null);a.sort(function(a,b){return a.part-b.part});f.each(a,function(a,c){var d=c.part,e=c.etag;c=b.createElement("Part");a=b.createElement("PartNumber");d=b.createTextNode(d);e=b.createTextNode(e);var h=b.createElement("ETag");h.appendChild(e);a.appendChild(d);c.appendChild(a);c.appendChild(h);f(b).children()[0].appendChild(c)});return(new XMLSerializer).serializeToString(b)}
var h={},c={method:"POST",contentType:"text/xml",endpointStore:null,signatureSpec:null,maxConnections:3,getBucket:function(a){},getHost:function(a){},getKey:function(a){},log:function(a,b){}};f.extend(c,b);var a=new f.s3.RequestSigner({endpointStore:c.endpointStore,signatureSpec:c.signatureSpec,cors:c.cors,log:c.log});var l=f.extend(this,new f.AjaxRequester({method:c.method,contentType:"application/xml; charset=UTF-8",endpointStore:c.endpointStore,maxConnections:c.maxConnections,allowXRequestedWithAndCacheControl:!1,
log:c.log,onComplete:function(a,b,d){var e=h[a],k=new DOMParser,l=c.getBucket(a);c.getKey(a);var r=k.parseFromString(b.responseText,"application/xml");k=r.getElementsByTagName("Bucket");r=r.getElementsByTagName("Key");delete h[a];c.log(f.format("Complete response status {}, body = {}",b.status,b.responseText));d?c.log(f.format("Complete Multipart Upload request for {} failed with status {}.",a,b.status),"error"):k.length&&r.length?k[0].textContent!==l&&(d=!0,c.log(f.format("Wrong bucket in response to Complete Multipart Upload request for {}.",
a),"error")):(d=!0,c.log(f.format("Missing bucket and/or key in response to Complete Multipart Upload request for {}.",a),"error"));d?e.failure("Problem combining the file parts!",b):e.success({},b)},successfulResponseCodes:{POST:[200]}}));f.extend(this,{send:function(a,b,k){var r=new f.Promise,q=d(k);e(a,b,q).then(function(b,d){c.log("Submitting S3 complete multipart upload request for "+a);h[a]=r;delete b["Content-Type"];l.initTransport(a).withPath(d).withHeaders(b).withPayload(q).send()},r.failure);
return r}})};f.s3.AbortMultipartAjaxRequester=function(b){function e(a,b){var c=new f.Promise,e=d.getBucket(a),k=d.getHost(a);b=h.constructStringToSign(h.REQUEST_TYPE.MULTIPART_ABORT,e,k,d.getKey(a)).withUploadId(b);h.getSignature(a,{signatureConstructor:b}).then(c.success,c.failure);return c}var d={method:"DELETE",endpointStore:null,signatureSpec:null,maxConnections:3,getBucket:function(a){},getHost:function(a){},getKey:function(a){},log:function(a,b){}};f.extend(d,b);var h=new f.s3.RequestSigner({endpointStore:d.endpointStore,
signatureSpec:d.signatureSpec,cors:d.cors,log:d.log});var c=f.extend(this,new f.AjaxRequester({validMethods:["DELETE"],method:d.method,contentType:null,endpointStore:d.endpointStore,maxConnections:d.maxConnections,allowXRequestedWithAndCacheControl:!1,log:d.log,onComplete:function(a,b,c){var e=(new DOMParser).parseFromString(b.responseText,"application/xml"),h=e.getElementsByTagName("Error");d.log(f.format("Abort response status {}, body = {}",b.status,b.responseText));c?d.log(f.format("Abort Multipart Upload request for {} failed with status {}.",
a,b.status),"error"):h.length?(b=e.getElementsByTagName("Message")[0].textContent,d.log(f.format("Failed to Abort Multipart Upload request for {}.  Error: {}",a,b),"error")):d.log(f.format("Abort MPU request succeeded for file ID {}.",a))},successfulResponseCodes:{DELETE:[204]}}));f.extend(this,{send:function(a,b){e(a,b).then(function(b,e){d.log("Submitting S3 Abort multipart upload request for "+a);c.initTransport(a).withPath(e).withHeaders(b).send()})}})};f.s3.XhrUploadHandler=function(b,e){var d=
e.getName,h=e.log,c=b.clockDrift,a=b.getBucket,l=b.getHost,u=b.getKeyName,q=b.filenameParam,r=b.paramsStore,y=b.endpointStore,z=b.aclStore,p=b.objectProperties.reducedRedundancy,x=b.objectProperties.region,t=b.objectProperties.serverSideEncryption,B=b.validation,C=f.extend({region:x,drift:c},b.signature),F=this,H=b.signature.credentialsProvider,G={combine:function(a){var b=F._getPersistableData(a).uploadId,c=F._getPersistableData(a).etags,d=new f.Promise;E.completeMultipart.send(a,b,c).then(d.success,
function(b,c){d.failure(g.done(a,c).response,c)});return d},done:function(a,b,c){g.response.parse(a,b).success&&(b=b.getResponseHeader("ETag"),F._getPersistableData(a).etags||(F._getPersistableData(a).etags=[]),F._getPersistableData(a).etags.push({part:c+1,etag:b}))},initHeaders:function(a,b,c){var d=g.bucket.getName(a),e=g.host.getName(a),h=g.key.urlSafe(a),k=new f.Promise;c=E.restSignature.constructStringToSign(E.restSignature.REQUEST_TYPE.MULTIPART_UPLOAD,d,e,h).withPartNum(b+1).withContent(c).withUploadId(F._getPersistableData(a).uploadId);
E.restSignature.getSignature(a+"."+b,{signatureConstructor:c}).then(k.success,k.failure);return k},put:function(a,c){var d=F._createXhr(a,c),e=F._getChunkData(a,c),k=b.endpointStore.get(a),l=new f.Promise;G.initHeaders(a,c,e.blob).then(function(b,m){if(d._cancelled)h(f.format("Upload of item {}.{} cancelled. Upload will not start after successful signature request.",a,c)),l.failure({error:"Chunk upload cancelled"});else{m=k+"/"+m;F._registerProgressHandler(a,c,e.size);g.track(a,d,c).then(l.success,
l.failure);d.open("PUT",m,!0);var p=!1;f.each(b,function(a,b){"Content-Type"===a&&(p=!0);d.setRequestHeader(a,b)});p||d.setRequestHeader("Content-Type","");d.send(e.blob)}},function(){l.failure({error:"Problem signing the chunk!"},d)});return l},send:function(a,b){var c=new f.Promise;G.setup(a).then(function(){G.put(a,b).then(c.success,c.failure)},function(a,b){c.failure({error:a},b)});return c},setup:function(a){var b=new f.Promise,c=F._getPersistableData(a).uploadId,d=new f.Promise;c?c instanceof
f.Promise?c.then(function(a){b.success(a)}):b.success(c):(F._getPersistableData(a).uploadId=d,E.initiateMultipart.send(a).then(function(c){F._getPersistableData(a).uploadId=c;d.success(c);b.success(c)},function(c,e){F._getPersistableData(a).uploadId=null;b.failure(c,e);d.failure(c,e)}));return b}},E={abortMultipart:new f.s3.AbortMultipartAjaxRequester({endpointStore:y,signatureSpec:C,cors:b.cors,log:h,getBucket:function(a){return g.bucket.getName(a)},getHost:function(a){return g.host.getName(a)},
getKey:function(a){return g.key.urlSafe(a)}}),completeMultipart:new f.s3.CompleteMultipartAjaxRequester({endpointStore:y,signatureSpec:C,cors:b.cors,log:h,getBucket:function(a){return g.bucket.getName(a)},getHost:function(a){return g.host.getName(a)},getKey:function(a){return g.key.urlSafe(a)}}),initiateMultipart:new f.s3.InitiateMultipartAjaxRequester({filenameParam:q,endpointStore:y,paramsStore:r,signatureSpec:C,aclStore:z,reducedRedundancy:p,serverSideEncryption:t,cors:b.cors,log:h,getContentType:function(a){return F._getMimeType(a)},
getBucket:function(a){return g.bucket.getName(a)},getHost:function(a){return g.host.getName(a)},getKey:function(a){return g.key.urlSafe(a)},getName:function(a){return d(a)}}),policySignature:new f.s3.RequestSigner({expectingPolicy:!0,signatureSpec:C,cors:b.cors,log:h}),restSignature:new f.s3.RequestSigner({endpointStore:y,signatureSpec:C,cors:b.cors,log:h})},K={initParams:function(a){var b=r.get(a);b[q]=d(a);return f.s3.util.generateAwsParams({endpoint:y.get(a),clockDrift:c,params:b,type:F._getMimeType(a),
bucket:g.bucket.getName(a),key:F.getThirdPartyFileId(a),accessKey:H.get().accessKey,sessionToken:H.get().sessionToken,acl:z.get(a),expectedStatus:200,minFileSize:B.minSizeLimit,maxFileSize:B.maxSizeLimit,reducedRedundancy:p,region:x,serverSideEncryption:t,signatureVersion:C.version,log:h},f.bind(E.policySignature.getSignature,this,a))},send:function(a){var b=new f.Promise,c=F._createXhr(a),d=F.getFile(a);F._registerProgressHandler(a);g.track(a,c).then(b.success,b.failure);K.setup(a,c,d).then(function(b){h("Sending upload request for "+
a);c.send(b)},b.failure);return b},setup:function(a,b,c){var d=new FormData,e=y.get(a),g=new f.Promise;K.initParams(a).then(function(a){b.open("POST",e,!0);f.obj2FormData(a,d);d.append("file",c);g.success(d)},function(a){g.failure({error:a})});return g}},g={bucket:{promise:function(b){var c=new f.Promise,d=F._getFileState(b).bucket;d?c.success(d):a(b).then(function(a){F._getFileState(b).bucket=a;c.success(a)},c.failure);return c},getName:function(a){return F._getFileState(a).bucket}},host:{promise:function(a){var b=
new f.Promise,c=F._getFileState(a).host;c?b.success(c):l(a).then(function(c){F._getFileState(a).host=c;b.success(c)},b.failure);return b},getName:function(a){return F._getFileState(a).host}},done:function(a,b){a=g.response.parse(a,b);(b=!0!==a.success)&&g.response.shouldReset(a.code)&&(h("This is an unrecoverable error, we must restart the upload entirely on the next retry attempt.","error"),a.reset=!0);return{success:!b,response:a}},key:{promise:function(a){var b=new f.Promise,c=F.getThirdPartyFileId(a);
null==c?(F._setThirdPartyFileId(a,b),u(a,d(a)).then(function(c){F._setThirdPartyFileId(a,c);b.success(c)},function(c){F._setThirdPartyFileId(a,null);b.failure(c)})):f.isGenericPromise(c)?c.then(b.success,b.failure):b.success(c);return b},urlSafe:function(a){a=F.getThirdPartyFileId(a);return f.s3.util.uriEscapePath(a)}},response:{parse:function(a,b){a={};var c;try{if(h(f.format("Received response status {} with body: {}",b.status,b.responseText)),200===b.status)a.success=!0;else if(c=g.response.parseError(b.responseText))a.error=
c.message,a.code=c.code}catch(L){h("Error when attempting to parse xhr response text ("+L.message+")","error")}return a},parseError:function(a){var b=(new DOMParser).parseFromString(a,"application/xml");a={};if(b.getElementsByTagName("Error").length){var c=b.getElementsByTagName("Code");b=b.getElementsByTagName("Message");b.length&&(a.message=b[0].textContent);c.length&&(a.code=c[0].textContent);return a}},shouldReset:function(a){return"EntityTooSmall"===a||"InvalidPart"===a||"InvalidPartOrder"===
a||"NoSuchUpload"===a}},start:function(a,b){var c=new f.Promise;g.key.promise(a).then(function(){g.bucket.promise(a).then(function(){g.host.promise(a).then(function(){null==b?K.send(a).then(c.success,c.failure):G.send(a,b).then(c.success,c.failure)})})},function(a){c.failure({error:a})});return c},track:function(a,b,c){var d=new f.Promise;b.onreadystatechange=function(){if(4===b.readyState){null!=c&&G.done(a,b,c);var e=g.done(a,b);d[e.success?"success":"failure"](e.response,b)}};return d}};f.extend(this,
{uploadChunk:g.start,uploadFile:g.start});f.extend(this,new f.XhrUploadHandler({options:f.extend({namespace:"s3"},b),proxy:f.extend({getEndpoint:b.endpointStore.get},e)}));f.override(this,function(a){return{expunge:function(b){var c=F._getPersistableData(b)&&F._getPersistableData(b).uploadId,d=F._maybeDeletePersistedChunkData(b);void 0!==c&&d&&E.abortMultipart.send(b,c);a.expunge(b)},finalizeChunks:function(a){return G.combine(a)},_getLocalStorageId:function(b){var c=a._getLocalStorageId(b);b=g.bucket.getName(b);
return c+"-"+b}}})};f.s3.FormUploadHandler=function(b,e){function d(b){var c=t.get(b);c[x]=q(b);return f.s3.util.generateAwsParams({endpoint:B.get(b),clockDrift:l,params:c,bucket:a._getFileState(b).bucket,key:a.getThirdPartyFileId(b),accessKey:m.get().accessKey,sessionToken:m.get().sessionToken,acl:C.get(b),minFileSize:E.minSizeLimit,maxFileSize:E.maxSizeLimit,successRedirectUrl:g,reducedRedundancy:F,region:H,serverSideEncryption:G,signatureVersion:K.version,log:y},f.bind(A.getSignature,this,b))}
function h(c,e){var g=new f.Promise,h=b.endpointStore.get(c);q(c);d(c).then(function(b){b=a._initFormForUpload({method:"POST",endpoint:h,params:b,paramsInBody:!0,targetName:e.name});g.success(b)},function(b){g.failure(b);a._detachLoadEvent(c);e&&f(e).remove()});return g}function c(c){var d=a._createIframe(c),e=a.getInput(c),g=new f.Promise;h(c,d).then(function(h){h.appendChild(e);a._attachLoadEvent(d,function(e){y("iframe loaded");if(e)!1===e.success&&(y("Amazon likely rejected the upload request",
"error"),g.failure(e));else{var h=e={};a:{b.endpointStore.get(c);var k=a._getFileState(c).bucket;try{var l=f.s3.util.parseIframeResponse(d);if(l.bucket===k&&l.key===f.s3.util.encodeQueryStringParam(a.getThirdPartyFileId(c))){var m=!0;break a}y("Response from AWS included an unexpected bucket or key name.","error")}catch(Z){y("Error when attempting to parse form upload response ("+Z.message+")","error")}m=!1}h.success=m;!1===e.success?(y("A success response was received by Amazon, but it was invalid in some way.",
"error"),g.failure(e)):(f.extend(e,f.s3.util.parseIframeResponse(d)),g.success(e))}a._detachLoadEvent(c);d&&f(d).remove()});y("Sending upload request for "+c);h.submit();f(h).remove()},g.failure);return g}var a=this,l=b.clockDrift,u=e.onUuidChanged,q=e.getName,r=e.getUuid,y=e.log,z=b.getBucket,p=b.getKeyName,x=b.filenameParam,t=b.paramsStore,B=b.endpointStore,C=b.aclStore,F=b.objectProperties.reducedRedundancy,H=b.objectProperties.region,G=b.objectProperties.serverSideEncryption,E=b.validation,K=
b.signature,g=b.iframeSupport.localBlankPagePath,m=b.signature.credentialsProvider,A=new f.s3.RequestSigner({signatureSpec:K,cors:b.cors,log:y});if(void 0===g)throw Error("successRedirectEndpoint MUST be defined if you intend to use browsers that do not support the File API!");f.extend(this,new f.FormUploadHandler({options:{isCors:!1,inputName:"file"},proxy:{onCancel:b.onCancel,onUuidChanged:u,getName:q,getUuid:r,log:y}}));f.extend(this,{uploadFile:function(b){var d=q(b),e=new f.Promise;a.getThirdPartyFileId(b)?
a._getFileState(b).bucket?c(b).then(e.success,e.failure):z(b).then(function(d){a._getFileState(b).bucket=d;c(b).then(e.success,e.failure)}):p(b,d).then(function(d){z(b).then(function(f){a._getFileState(b).bucket=f;a._setThirdPartyFileId(b,d);c(b).then(e.success,e.failure)},function(a){e.failure({error:a})})},function(a){e.failure({error:a})});return e}})};f.DragAndDrop=function(b){function e(a){var b=new f.Promise;a.isFile?a.file(function(c){var d=a.fullPath,e=d.indexOf(a.name);d=d.substr(0,e);"/"===
d.charAt(0)&&(d=d.substr(1));c.qqPath=d;u.push(c);b.success()},function(c){r.callbacks.dropLog("Problem parsing '"+a.fullPath+"'.  FileError code "+c.code+".","error");b.failure()}):a.isDirectory&&d(a).then(function(a){var c=a.length;f.each(a,function(a,d){e(d).done(function(){--c;0===c&&b.success()})});a.length||b.success()},function(c){r.callbacks.dropLog("Problem parsing '"+a.fullPath+"'.  FileError code "+c.code+".","error");b.failure()});return b}function d(a,b,c,e){var h=e||new f.Promise,k=
b||a.createReader();k.readEntries(function(b){var e=c?c.concat(b):b;b.length?setTimeout(function(){d(a,k,e,h)},0):h.success(e)},h.failure);return h}function h(a,b){var c=[],d=new f.Promise;r.callbacks.processingDroppedFiles();b.dropDisabled(!0);1<a.files.length&&!r.allowMultipleItems?(r.callbacks.processingDroppedFilesComplete([]),r.callbacks.dropError("tooManyFilesError",""),b.dropDisabled(!1),d.failure()):(u=[],f.isFolderDropSupported(a)?f.each(a.items,function(a,b){(a=b.webkitGetAsEntry())&&(a.isFile?
u.push(b.getAsFile()):c.push(e(a).done(function(){c.pop();0===c.length&&d.success()})))}):u=a.files,0===c.length&&d.success());return d}function c(a){var b=new f.UploadDropZone({HIDE_ZONES_EVENT_NAME:"qq-hidezones",element:a,onEnter:function(b){f(a).addClass(r.classes.dropActive);b.stopPropagation()},onLeaveNotDescendants:function(b){f(a).removeClass(r.classes.dropActive)},onDrop:function(a){h(a.dataTransfer,b).then(function(){var a=u,c=b,d=Array.prototype.slice.call(a);r.callbacks.dropLog("Grabbed "+
a.length+" dropped files.");c.dropDisabled(!1);r.callbacks.processingDroppedFilesComplete(d,c.getElement())},function(){r.callbacks.dropLog("Drop event DataTransfer parsing failed.  No files will be uploaded.","error")})}});q.addDisposer(function(){b.dispose()});f(a).hasAttribute("qq-hide-dropzone")&&f(a).hide();l.push(b);return b}function a(a){var b;f.each(a.dataTransfer.types,function(a,c){if("Files"===c)return b=!0,!1});return b}var l=[],u=[],q=new f.DisposeSupport;var r={dropZoneElements:[],allowMultipleItems:!0,
classes:{dropActive:null},callbacks:new f.DragAndDrop.callbacks};f.extend(r,b,!0);(function(){var b=r.dropZoneElements,d=function(){setTimeout(function(){f.each(b,function(a,b){f(b).hasAttribute("qq-hide-dropzone")&&f(b).hide();f(b).removeClass(r.classes.dropActive)})},10)};f.each(b,function(d,e){var h=c(e);b.length&&f.supportedFeatures.fileDrop&&q.attach(document,"dragenter",function(c){!h.dropDisabled()&&a(c)&&f.each(b,function(a,b){b instanceof HTMLElement&&f(b).hasAttribute("qq-hide-dropzone")&&
f(b).css({display:"block"})})})});q.attach(document,"dragleave",function(a){a=f.safari()?0>a.x||0>a.y:0===a.x&&0===a.y;a&&d()});q.attach(f(document).children()[0],"mouseenter",function(a){d()});q.attach(document,"drop",function(b){a(b)&&(b.preventDefault(),d());b.preventDefault&&b.preventDefault()});q.attach(document,"qq-hidezones",d)})();f.extend(this,{setupExtraDropzone:function(a){r.dropZoneElements.push(a);c(a)},removeDropzone:function(a){var b,c=r.dropZoneElements;for(b in c)if(c[b]===a)return c.splice(b,
1)},dispose:function(){q.dispose();f.each(l,function(a,b){b.dispose()})}})};f.DragAndDrop.callbacks=function(){return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(b,e){},dropError:function(b,e){f.log("Drag & drop error code '"+b+" with these specifics: '"+e+"'","error")},dropLog:function(b,e){f.log(b,e)}}};f.UploadDropZone=function(b){function e(){return f.safari()||f.firefox()&&f.windows()}function d(a){if(!f.supportedFeatures.fileDrop)return!1;var b=a.dataTransfer,
c=f.safari();a=f.ie()&&f.supportedFeatures.fileDrop?!0:"none"!==b.effectAllowed;return b&&a&&(b.files&&b.files.length||!c&&b.types.contains&&b.types.contains("Files")||b.types.includes&&b.types.includes("Files"))}function h(a){void 0!==a&&(l=a);return l}function c(){function a(){b=document.createEvent("Event");b.initEvent(q.HIDE_ZONES_EVENT_NAME,!0,!0)}if(window.CustomEvent)try{var b=new CustomEvent(q.HIDE_ZONES_EVENT_NAME)}catch(p){a()}else a();document.dispatchEvent(b)}var a=new f.DisposeSupport,
l,u;var q={element:null,onEnter:function(a){},onLeave:function(a){},onLeaveNotDescendants:function(a){},onDrop:function(a){}};f.extend(q,b);var r=q.element;(function(b){u||(e?a.attach(document,"dragover",function(a){a.preventDefault()}):a.attach(document,"dragover",function(a){a.dataTransfer&&(a.dataTransfer.dropEffect="none",a.preventDefault())}),u=!0)})();(function(){a.attach(r,"dragover",function(a){if(d(a)){var b=f.ie()&&f.supportedFeatures.fileDrop?null:a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect=
"move"===b||"linkMove"===b?"move":"copy";a.stopPropagation();a.preventDefault()}});a.attach(r,"dragenter",function(a){virtualclass.vutil.initAcitveElement();console.log("testdragenter");if(!h()&&d(a))q.onEnter(a)});a.attach(r,"dragleave",function(a){console.log("testdragleave");if(d(a)){q.onLeave(a);var b=document.elementFromPoint(a.clientX,a.clientY);if(!f(this).contains(b))q.onLeaveNotDescendants(a)}});a.attach(r,"drop",function(a){!h()&&d(a)&&(a.preventDefault(),a.stopPropagation(),q.onDrop(a),
c(),console.log("testdrop"),virtualclass.vutil.initAcitveElement())})})();f.extend(this,{dropDisabled:function(a){return h(a)},dispose:function(){a.dispose()},getElement:function(){return r}});this._testing={};this._testing.isValidFileDrag=d};(function(){f.uiPublicApi={addInitialFiles:function(b){this._parent.prototype.addInitialFiles.apply(this,arguments);this._templating.addCacheToDom()},clearStoredFiles:function(){this._parent.prototype.clearStoredFiles.apply(this,arguments);this._templating.clearFiles()},
addExtraDropzone:function(b){this._dnd&&this._dnd.setupExtraDropzone(b)},removeExtraDropzone:function(b){if(this._dnd)return this._dnd.removeDropzone(b)},getItemByFileId:function(b){if(!this._templating.isHiddenForever(b))return this._templating.getFileContainer(b)},reset:function(){this._parent.prototype.reset.apply(this,arguments);this._templating.reset();!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton(),title:this._options.text.fileInputTitle}).getButtonId());
this._dnd&&(this._dnd.dispose(),this._dnd=this._setupDragAndDrop());this._filesInBatchAddedToUi=this._totalFilesInBatch=0;this._setupClickAndEditEventHandlers()},setName:function(b,e){var d=this._options.formatFileName(e);this._parent.prototype.setName.apply(this,arguments);this._templating.updateFilename(b,d)},pauseUpload:function(b){var e=this._parent.prototype.pauseUpload.apply(this,arguments);e&&this._templating.uploadPaused(b);return e},continueUpload:function(b){var e=this._parent.prototype.continueUpload.apply(this,
arguments);e&&this._templating.uploadContinued(b);return e},getId:function(b){return this._templating.getFileId(b)},getDropTarget:function(b){return this.getFile(b).qqDropTarget}};f.uiPrivateApi={_getButton:function(b){var e=this._parent.prototype._getButton.apply(this,arguments);e||b===this._defaultButtonId&&(e=this._templating.getButton());return e},_removeFileItem:function(b){this._templating.removeFile(b)},_setupClickAndEditEventHandlers:function(){this._fileButtonsClickHandler=f.FileButtonsClickHandler&&
this._bindFileButtonsClickEvent();this._focusinEventSupported=!f.firefox();this._isEditFilenameEnabled()&&(this._filenameClickHandler=this._bindFilenameClickEvent(),this._filenameInputFocusInHandler=this._bindFilenameInputFocusInEvent(),this._filenameInputFocusHandler=this._bindFilenameInputFocusEvent())},_setupDragAndDrop:function(){var b=this,e=this._options.dragAndDrop.extraDropzones,d=this._templating,h=d.getDropZone();h&&e.push(h);return new f.DragAndDrop({dropZoneElements:e,allowMultipleItems:this._options.multiple,
classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){d.showDropProcessing()},processingDroppedFilesComplete:function(c,a){d.hideDropProcessing();f.each(c,function(b,c){c.qqDropTarget=a});c.length&&b.addFiles(c,null,null)},dropError:function(c,a){b._itemError(c,a)},dropLog:function(c,a){b.log(c,a)}}})},_bindFileButtonsClickEvent:function(){var b=this;return new f.FileButtonsClickHandler({templating:this._templating,log:function(e,d){b.log(e,d)},onDeleteFile:function(e){b.deleteFile(e)},
onCancel:function(e){b.cancel(e)},onRetry:function(e){b.retry(e)},onPause:function(e){b.pauseUpload(e)},onContinue:function(e){b.continueUpload(e)},onGetName:function(e){return b.getName(e)}})},_isEditFilenameEnabled:function(){return this._templating.isEditFilenamePossible()&&!this._options.autoUpload&&f.FilenameClickHandler&&f.FilenameInputFocusHandler&&f.FilenameInputFocusHandler},_filenameEditHandler:function(){var b=this,e=this._templating;return{templating:e,log:function(d,e){b.log(d,e)},onGetUploadStatus:function(d){return b.getUploads({id:d}).status},
onGetName:function(d){return b.getName(d)},onSetName:function(d,e){b.setName(d,e)},onEditingStatusChange:function(b,h){var c=f(e.getEditInput(b)),a=f(e.getFileContainer(b));h?(c.addClass("qq-editing"),e.hideFilename(b),e.hideEditIcon(b)):(c.removeClass("qq-editing"),e.showFilename(b),e.showEditIcon(b));a.addClass("qq-temp").removeClass("qq-temp")}}},_onUploadStatusChange:function(b,e,d){this._parent.prototype._onUploadStatusChange.apply(this,arguments);this._isEditFilenameEnabled()&&this._templating.getFileContainer(b)&&
d!==f.status.SUBMITTED&&(this._templating.markFilenameEditable(b),this._templating.hideEditIcon(b));e===f.status.UPLOAD_RETRYING&&d===f.status.UPLOADING?(this._templating.hideRetry(b),this._templating.setStatusText(b),f(this._templating.getFileContainer(b)).removeClass(this._classes.retrying)):d===f.status.UPLOAD_FAILED&&this._templating.hidePause(b)},_bindFilenameInputFocusInEvent:function(){var b=f.extend({},this._filenameEditHandler());return new f.FilenameInputFocusInHandler(b)},_bindFilenameInputFocusEvent:function(){var b=
f.extend({},this._filenameEditHandler());return new f.FilenameInputFocusHandler(b)},_bindFilenameClickEvent:function(){var b=f.extend({},this._filenameEditHandler());return new f.FilenameClickHandler(b)},_storeForLater:function(b){this._parent.prototype._storeForLater.apply(this,arguments);this._templating.hideSpinner(b)},_onAllComplete:function(b,e){this._parent.prototype._onAllComplete.apply(this,arguments);this._templating.resetTotalProgress()},_onSubmit:function(b,e){var d=this.getFile(b);d&&
d.qqPath&&this._options.dragAndDrop.reportDirectoryPaths&&this._paramsStore.addReadOnly(b,{qqpath:d.qqPath});this._parent.prototype._onSubmit.apply(this,arguments);this._addToList(b,e)},_onSubmitted:function(b){this._isEditFilenameEnabled()&&(this._templating.markFilenameEditable(b),this._templating.showEditIcon(b),this._focusinEventSupported||this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(b)))},_onProgress:function(b,e,d,f){this._parent.prototype._onProgress.apply(this,
arguments);this._templating.updateProgress(b,d,f);0===f||100===Math.round(d/f*100)?(this._templating.hideCancel(b),this._templating.hidePause(b),this._templating.hideProgress(b),this._templating.setStatusText(b,this._options.text.waitingForResponse),this._displayFileSize(b)):this._displayFileSize(b,d,f)},_onTotalProgress:function(b,e){this._parent.prototype._onTotalProgress.apply(this,arguments);this._templating.updateTotalProgress(b,e)},_onComplete:function(b,e,d,h){function c(a){u&&(k.setStatusText(b),
f(u).removeClass(q._classes.retrying),k.hideProgress(b),q.getUploads({id:b}).status!==f.status.UPLOAD_FAILED&&k.hideCancel(b),k.hideSpinner(b),a.success?q._markFileAsSuccessful(b):(f(u).addClass(q._classes.fail),k.showCancel(b),k.isRetryPossible()&&!q._preventRetries[b]&&(f(u).addClass(q._classes.retryable),k.showRetry(b)),q._controlFailureTextDisplay(b,a)))}var a=this._parent.prototype._onComplete.apply(this,arguments),k=this._templating,u=k.getFileContainer(b),q=this;a instanceof f.Promise?a.done(function(a){c(a)}):
c(d);return a},_markFileAsSuccessful:function(b){var e=this._templating;this._isDeletePossible()&&e.showDeleteButton(b);f(e.getFileContainer(b)).addClass(this._classes.success);this._maybeUpdateThumbnail(b)},_onUploadPrep:function(b){this._parent.prototype._onUploadPrep.apply(this,arguments);this._templating.showSpinner(b)},_onUpload:function(b,e){var d=this._parent.prototype._onUpload.apply(this,arguments);this._templating.showSpinner(b);return d},_onUploadChunk:function(b,e){this._parent.prototype._onUploadChunk.apply(this,
arguments);0<e.partIndex&&this._handler.isResumable(b)&&this._templating.allowPause(b)},_onCancel:function(b,e){this._parent.prototype._onCancel.apply(this,arguments);this._removeFileItem(b);0===this._getNotFinished()&&this._templating.resetTotalProgress()},_onBeforeAutoRetry:function(b){this._parent.prototype._onBeforeAutoRetry.apply(this,arguments);this._showCancelLink(b);if(this._options.retry.showAutoRetryNote){var e=this._autoRetries[b];var d=this._options.retry.maxAutoAttempts;e=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,
e);e=e.replace(/\{maxAuto\}/g,d);this._templating.setStatusText(b,e);f(this._templating.getFileContainer(b)).addClass(this._classes.retrying)}},_onBeforeManualRetry:function(b){if(this._parent.prototype._onBeforeManualRetry.apply(this,arguments))return this._templating.resetProgress(b),f(this._templating.getFileContainer(b)).removeClass(this._classes.fail),this._templating.setStatusText(b),this._templating.showSpinner(b),this._showCancelLink(b),!0;f(this._templating.getFileContainer(b)).addClass(this._classes.retryable);
this._templating.showRetry(b);return!1},_onSubmitDelete:function(b){var e=f.bind(this._onSubmitDeleteSuccess,this);this._parent.prototype._onSubmitDelete.call(this,b,e)},_onSubmitDeleteSuccess:function(b,e,d){this._options.deleteFile.forceConfirm?this._showDeleteConfirm.apply(this,arguments):this._sendDeleteRequest.apply(this,arguments)},_onDeleteComplete:function(b,e,d){this._parent.prototype._onDeleteComplete.apply(this,arguments);this._templating.hideSpinner(b);d?(this._templating.setStatusText(b,
this._options.deleteFile.deletingFailedText),this._templating.showDeleteButton(b)):this._removeFileItem(b)},_sendDeleteRequest:function(b,e,d){this._templating.hideDeleteButton(b);this._templating.showSpinner(b);this._templating.setStatusText(b,this._options.deleteFile.deletingStatusText);this._deleteHandler.sendDelete.apply(this,arguments)},_showDeleteConfirm:function(b,e,d){var h=this.getName(b);h=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,h);e=this.getUuid(b);var c=arguments,
a=this;h=this._options.showConfirm(h);f.isGenericPromise(h)?h.then(function(){a._sendDeleteRequest.apply(a,c)}):!1!==h&&a._sendDeleteRequest.apply(a,c)},_addToList:function(b,e,d){var h=0,c=this._handler.isProxied(b)&&this._options.scaling.hideScaled;if(this._options.display.prependFiles){1<this._totalFilesInBatch&&0<this._filesInBatchAddedToUi&&(h=this._filesInBatchAddedToUi-1);var a={index:h}}d||(this._options.disableCancelForFormUploads&&!f.supportedFeatures.ajaxUploading&&this._templating.disableCancel(),
this._options.multiple||(h=this.getUploads({id:b}),this._handledProxyGroup=this._handledProxyGroup||h.proxyGroupId,h.proxyGroupId===this._handledProxyGroup&&h.proxyGroupId||(this._handler.cancelAll(),this._clearList(),this._handledProxyGroup=null)));d?(this._templating.addFileToCache(b,this._options.formatFileName(e),a,c),this._templating.updateThumbnail(b,this._thumbnailUrls[b],!0,this._options.thumbnails.customResizer)):(this._templating.addFile(b,this._options.formatFileName(e),a,c),this._templating.generatePreview(b,
this.getFile(b),this._options.thumbnails.customResizer));this._filesInBatchAddedToUi+=1;(d||this._options.display.fileSizeOnSubmit&&f.supportedFeatures.ajaxUploading)&&this._displayFileSize(b)},_clearList:function(){this._templating.clearFiles();this.clearStoredFiles()},_displayFileSize:function(b,e,d){var f=this.getSize(b),c=this._formatSize(f);0<=f&&(void 0!==e&&void 0!==d&&(c=this._formatProgress(e,d)),this._templating.updateSize(b,c))},_formatProgress:function(b,e){var d=this._options.text.formatProgress;
d=d.replace("{percent}",Math.round(b/e*100));b=this._formatSize(e);return d=d.replace("{total_size}",b)},_controlFailureTextDisplay:function(b,e){var d=this._options.failedUploadTextDisplay.mode;var f=this._options.failedUploadTextDisplay.responseProperty;"custom"===d?(e=e[f],e||(e=this._options.text.failUpload),this._templating.setStatusText(b,e),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(b,e)):"default"===d?this._templating.setStatusText(b,this._options.text.failUpload):
"none"!==d&&this.log("failedUploadTextDisplay.mode value of '"+d+"' is not valid","warn")},_showTooltip:function(b,e){this._templating.getFileContainer(b).title=e},_showCancelLink:function(b){this._options.disableCancelForFormUploads&&!f.supportedFeatures.ajaxUploading||this._templating.showCancel(b)},_itemError:function(b,e,d){var f=this._parent.prototype._itemError.apply(this,arguments);this._options.showMessage(f)},_batchError:function(b){this._parent.prototype._batchError.apply(this,arguments);
this._options.showMessage(b)},_setupPastePrompt:function(){var b=this;this._options.callbacks.onPasteReceived=function(){return b._options.showPrompt(b._options.paste.namePromptMessage,b._options.paste.defaultName)}},_fileOrBlobRejected:function(b,e){--this._totalFilesInBatch;this._parent.prototype._fileOrBlobRejected.apply(this,arguments)},_prepareItemsForUpload:function(b,e,d){this._totalFilesInBatch=b.length;this._filesInBatchAddedToUi=0;this._parent.prototype._prepareItemsForUpload.apply(this,
arguments)},_maybeUpdateThumbnail:function(b){var e=this._thumbnailUrls[b];this.getUploads({id:b}).status===f.status.DELETED||!e&&!this._options.thumbnails.placeholders.waitUntilResponse&&f.supportedFeatures.imagePreviews||this._templating.updateThumbnail(b,e,this._options.thumbnails.customResizer)},_addCannedFile:function(b){var e=this._parent.prototype._addCannedFile.apply(this,arguments);this._addToList(e,this.getName(e),!0);this._templating.hideSpinner(e);this._templating.hideCancel(e);this._markFileAsSuccessful(e);
return e},_setSize:function(b,e){this._parent.prototype._setSize.apply(this,arguments);this._templating.updateSize(b,this._formatSize(e))},_sessionRequestComplete:function(){this._templating.addCacheToDom();this._parent.prototype._sessionRequestComplete.apply(this,arguments)}}})();f.FineUploader=function(b,e){var d=this;this._parent=e?f[e].FineUploaderBasic:f.FineUploaderBasic;this._parent.apply(this,arguments);f.extend(this._options,{element:null,button:null,listElement:null,dragAndDrop:{extraDropzones:[],
reportDirectoryPaths:!1},text:{formatProgress:"{percent}% of {total_size}",failUpload:"Upload failed",waitingForResponse:"Processing...",paused:"Paused"},template:"qq-template",classes:{retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",success:"qq-upload-success",fail:"qq-upload-fail",editable:"qq-editable",hide:"qq-hide",dropActive:"qq-upload-drop-area-active"},failedUploadTextDisplay:{mode:"default",responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",
unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}..."},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1,prependFiles:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},thumbnails:{customResizer:null,maxCount:0,placeholders:{waitUntilResponse:!1,
notAvailablePath:null,waitingPath:null},timeBetweenThumbs:750},scaling:{hideScaled:!1},showMessage:function(b){if(d._templating.hasDialog("alert"))return d._templating.showDialog("alert",b);setTimeout(function(){window.alert(b)},0)},showConfirm:function(b){return d._templating.hasDialog("confirm")?d._templating.showDialog("confirm",b):window.confirm(b)},showPrompt:function(b,c){return d._templating.hasDialog("prompt")?d._templating.showDialog("prompt",b,c):window.prompt(b,c)}},!0);f.extend(this._options,
b,!0);this._templating=new f.Templating({log:f.bind(this.log,this),templateIdOrEl:this._options.template,containerEl:this._options.element,fileContainerEl:this._options.listElement,button:this._options.button,imageGenerator:this._imageGenerator,classes:{hide:this._options.classes.hide,editable:this._options.classes.editable},limits:{maxThumbs:this._options.thumbnails.maxCount,timeBetweenThumbs:this._options.thumbnails.timeBetweenThumbs},placeholders:{waitUntilUpdate:this._options.thumbnails.placeholders.waitUntilResponse,
thumbnailNotAvailable:this._options.thumbnails.placeholders.notAvailablePath,waitingForThumbnail:this._options.thumbnails.placeholders.waitingPath},text:this._options.text});this._options.workarounds.ios8SafariUploads&&f.ios800()&&f.iosSafari()?this._templating.renderFailure(this._options.messages.unsupportedBrowserIos8Safari):!f.supportedFeatures.uploading||this._options.cors.expected&&!f.supportedFeatures.uploadCors?this._templating.renderFailure(this._options.messages.unsupportedBrowser):(this._wrapCallbacks(),
this._templating.render(),this._classes=this._options.classes,!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton(),title:this._options.text.fileInputTitle}).getButtonId()),this._setupClickAndEditEventHandlers(),f.DragAndDrop&&f.supportedFeatures.fileDrop&&(this._dnd=this._setupDragAndDrop()),this._options.paste.targetElement&&this._options.paste.promptForName&&(f.PasteSupport?this._setupPastePrompt():this.log("Paste support module not found.",
"error")),this._filesInBatchAddedToUi=this._totalFilesInBatch=0)};f.extend(f.FineUploader.prototype,f.basePublicApi);f.extend(f.FineUploader.prototype,f.basePrivateApi);f.extend(f.FineUploader.prototype,f.uiPublicApi);f.extend(f.FineUploader.prototype,f.uiPrivateApi);f.Templating=function(b){var e=document.createDocumentFragment(),d={},h=!1,c=0,a=!1,l=[],u=-1,q={log:null,limits:{maxThumbs:0,timeBetweenThumbs:750},templateIdOrEl:"qq-template",containerEl:null,fileContainerEl:null,button:null,imageGenerator:null,
classes:{hide:"qq-hide",editable:"qq-editable"},placeholders:{waitUntilUpdate:!1,thumbnailNotAvailable:null,waitingForThumbnail:null},text:{paused:"Paused"}},r={button:"qq-upload-button-selector",alertDialog:"qq-alert-dialog-selector",dialogCancelButton:"qq-cancel-button-selector",confirmDialog:"qq-confirm-dialog-selector",dialogMessage:"qq-dialog-message-selector",dialogOkButton:"qq-ok-button-selector",promptDialog:"qq-prompt-dialog-selector",uploader:"qq-uploader-selector",drop:"qq-upload-drop-area-selector",
list:"qq-upload-list-selector",progressBarContainer:"qq-progress-bar-container-selector",progressBar:"qq-progress-bar-selector",totalProgressBarContainer:"qq-total-progress-bar-container-selector",totalProgressBar:"qq-total-progress-bar-selector",file:"qq-upload-file-selector",spinner:"qq-upload-spinner-selector",size:"qq-upload-size-selector",cancel:"qq-upload-cancel-selector",pause:"qq-upload-pause-selector",continueButton:"qq-upload-continue-selector",deleteButton:"qq-upload-delete-selector",retry:"qq-upload-retry-selector",
statusText:"qq-upload-status-text-selector",editFilenameInput:"qq-edit-filename-selector",editNameIcon:"qq-edit-filename-icon-selector",dropText:"qq-upload-drop-area-text-selector",dropProcessing:"qq-drop-processing-selector",dropProcessingSpinner:"qq-drop-processing-spinner-selector",thumbnail:"qq-thumbnail-selector"},y={},z=new f.Promise,p=new f.Promise,x,t,B,C,F=function(a){var b=new f.Promise;p.then(function(c){M(c,a);a.src?b.success():(a.src=c.src,a.onload=function(){a.onload=null;U(a);b.success()})},
function(){A(a);b.success()});return b},H=function(a,b,d){var e=m(a);da("Generating new thumbnail for "+a);b.qqThumbnailId=a;return q.imageGenerator.generate(b,e,d).then(function(){c++;U(e);y[a].success()},function(){y[a].failure();q.placeholders.waitUntilUpdate||L(a,e)})},G=function(){if(l.length){a=!0;var b=l.shift();b.update?V(b):ia(b)}else a=!1},E=function(a){return d[a]||f(B).getFirstByClass("qq-file-id-"+a)},K=function(a){return null==a?g(R,r.totalProgressBarContainer)||g(R,r.totalProgressBar):
g(E(a),r.progressBarContainer)||g(E(a),r.progressBar)},g=function(a,b){return a&&f(a).getFirstByClass(b)},m=function(a){return Z&&g(E(a),r.thumbnail)},A=function(a){a&&f(a).addClass(q.classes.hide)},M=function(a,b){var c=a.style.maxWidth;(a=a.style.maxHeight)&&c&&!b.style.maxWidth&&!b.style.maxHeight&&f(b).css({maxWidth:c,maxHeight:a})},L=function(a,b){var c=y[a]||(new f.Promise).failure(),d=new f.Promise;z.then(function(a){c.then(function(){d.success()},function(){M(a,b);b.onload=function(){b.onload=
null;d.success()};b.src=a.src;U(b)})});return d},Q=function(a,b,c){var d=c.firstChild;0<b&&(d=f(c).children()[b].nextSibling);c.insertBefore(a,d)},ia=function(a){var b=a.id,d=a.optFileOrBlob,e=d&&d.qqThumbnailId,g=m(b),h={customResizeFunction:a.customResizeFunction,maxSize:u,orient:!0,scale:!0};f.supportedFeatures.imagePreviews?g?q.limits.maxThumbs&&q.limits.maxThumbs<=c?(L(b,g),G()):F(g).done(function(){y[b]=new f.Promise;y[b].done(function(){setTimeout(G,q.limits.timeBetweenThumbs)});null!=e?X(b,
e):H(b,d,h)}):G():g&&(F(g),G())},V=function(a){var b=a.id,d=a.thumbnailUrl,e=a.showWaitingImg,f=m(b);a={customResizeFunction:a.customResizeFunction,scale:C,maxSize:u};if(f)if(d)if(q.limits.maxThumbs&&q.limits.maxThumbs<=c)L(b,f),G();else return e&&F(f),q.imageGenerator.generate(d,f,a).then(function(){U(f);c++;setTimeout(G,q.limits.timeBetweenThumbs)},function(){L(b,f);setTimeout(G,q.limits.timeBetweenThumbs)});else L(b,f),G()},Aa=function(a,b){var c=K(a);a=null==a?r.totalProgressBar:r.progressBar;
c&&!f(c).hasClass(a)&&(c=f(c).getFirstByClass(a));c&&(f(c).css({width:b+"%"}),c.setAttribute("aria-valuenow",b))},U=function(a){a&&f(a).removeClass(q.classes.hide)},X=function(a,b){var d=m(a),e=m(b);da(f.format("ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.",a,b,b));y[b].then(function(){c++;y[a].success();da(f.format("Now using previously generated thumbnail created for ID {} on ID {}.",b,a));d.src=e.src;U(d)},function(){y[a].failure();q.placeholders.waitUntilUpdate||
L(a,d)})};f.extend(q,b);var da=q.log;f.supportedFeatures.imagePreviews||(q.limits.timeBetweenThumbs=0,q.limits.maxThumbs=0);var R=q.containerEl;var Z=void 0!==q.imageGenerator;var sa=function(){var a;da("Parsing template");if(null==q.templateIdOrEl)throw Error("You MUST specify either a template element or ID!");if(f.isString(q.templateIdOrEl)){var b=document.getElementById(q.templateIdOrEl);if(null===b)throw Error(f.format("Cannot find template script at ID '{}'!",q.templateIdOrEl));var c=b.innerHTML}else{if(void 0===
q.templateIdOrEl.innerHTML)throw Error("You have specified an invalid value for the template option!  It must be an ID or an Element.");c=q.templateIdOrEl.innerHTML}c=f.trimStr(c);b=document.createElement("div");b.appendChild(f.toElement(c));c=f(b).getFirstByClass(r.uploader);q.button&&(a=f(b).getFirstByClass(r.button))&&f(a).remove();f.DragAndDrop&&f.supportedFeatures.fileDrop||(a=f(b).getFirstByClass(r.dropProcessing))&&f(a).remove();(a=f(b).getFirstByClass(r.drop))&&!f.DragAndDrop&&(da("DnD module unavailable.",
"info"),f(a).remove());f.supportedFeatures.fileDrop?f(c).hasAttribute("qq-drop-area-text")&&a&&(c=f(a).getFirstByClass(r.dropText))&&f(c).remove():(c.removeAttribute("qq-drop-area-text"),a&&f(a).hasAttribute("qq-hide-dropzone")&&f(a).css({display:"none"}));c=f(b).getFirstByClass(r.thumbnail);Z?c&&(u=parseInt(c.getAttribute("qq-max-size")),u=0<u?u:null,C=f(c).hasAttribute("qq-server-scale")):c&&f(c).remove();Z=Z&&c;x=0<f(b).getByClass(r.editFilenameInput).length;t=0<f(b).getByClass(r.retry).length;
c=f(b).getFirstByClass(r.list);if(null==c)throw Error("Could not find the file list container in the template!");a=c.children[0].cloneNode(!0);c.innerHTML="";b.getElementsByTagName("DIALOG").length&&document.createElement("dialog");da("Template parsing complete");return{template:b,fileTemplate:a}}();(function(){var a=q.placeholders.thumbnailNotAvailable,b=q.placeholders.waitingForThumbnail,c={maxSize:u,scale:C};Z&&(a?q.imageGenerator.generate(a,new Image,c).then(function(a){z.success(a)},function(){z.failure();
da("Problem loading 'not available' placeholder image at "+a,"error")}):z.failure(),b?q.imageGenerator.generate(b,new Image,c).then(function(a){p.success(a)},function(){p.failure();da("Problem loading 'waiting for thumbnail' placeholder image at "+b,"error")}):p.failure())})();f.extend(this,{render:function(){da("Rendering template in DOM.");c=0;R.appendChild(sa.template.cloneNode(!0));A(g(R,r.dropProcessing));this.hideTotalProgress();B=q.fileContainerEl||g(R,r.list);da("Template rendering complete")},
renderFailure:function(a){a=f.toElement(a);R.innerHTML="";R.appendChild(a)},reset:function(){this.render()},clearFiles:function(){B.innerHTML=""},disableCancel:function(){h=!0},addFile:function(a,b,c,k,l){var t=sa.fileTemplate.cloneNode(!0),q=g(t,r.file),u=g(R,r.uploader),z=l?e:B,y;l&&(d[a]=t);f(t).addClass("qq-file-id-"+a);u.removeAttribute("qq-drop-area-text");q&&(f(q).setText(b),q.setAttribute("title",b));t.setAttribute("qq-file-id",a);c?Q(t,c.index,z):z.appendChild(t);k?(t.style.display="none",
f(t).addClass("qq-hidden-forever")):(A(K(a)),A(g(E(a),r.size)),A(g(E(a),r.deleteButton)),A(g(E(a),r.retry)),A(g(E(a),r.pause)),A(g(E(a),r.continueButton)),h&&this.hideCancel(a),(y=m(a))&&!y.src&&p.then(function(a){y.src=a.src;a.style.maxHeight&&a.style.maxWidth&&f(y).css({maxHeight:a.style.maxHeight,maxWidth:a.style.maxWidth});U(y)}))},addFileToCache:function(a,b,c,d){this.addFile(a,b,c,d,!0)},addCacheToDom:function(){B.appendChild(e);e=document.createDocumentFragment();d={}},removeFile:function(a){f(E(a)).remove()},
getFileId:function(a){if(a){for(;null==a.getAttribute("qq-file-id");)a=a.parentNode;return parseInt(a.getAttribute("qq-file-id"))}},getFileList:function(){return B},markFilenameEditable:function(a){(a=g(E(a),r.file))&&f(a).addClass(q.classes.editable)},updateFilename:function(a,b){if(a=g(E(a),r.file))f(a).setText(b),a.setAttribute("title",b)},hideFilename:function(a){A(g(E(a),r.file))},showFilename:function(a){U(g(E(a),r.file))},isFileName:function(a){return f(a).hasClass(r.file)},getButton:function(){return q.button||
g(R,r.button)},hideDropProcessing:function(){A(g(R,r.dropProcessing))},showDropProcessing:function(){U(g(R,r.dropProcessing))},getDropZone:function(){return g(R,r.drop)},isEditFilenamePossible:function(){return x},hideRetry:function(a){A(g(E(a),r.retry))},isRetryPossible:function(){return t},showRetry:function(a){U(g(E(a),r.retry))},getFileContainer:function(a){return E(a)},showEditIcon:function(a){(a=g(E(a),r.editNameIcon))&&f(a).addClass(q.classes.editable)},isHiddenForever:function(a){return f(E(a)).hasClass("qq-hidden-forever")},
hideEditIcon:function(a){(a=g(E(a),r.editNameIcon))&&f(a).removeClass(q.classes.editable)},isEditIcon:function(a){return f(a).hasClass(r.editNameIcon,!0)},getEditInput:function(a){return g(E(a),r.editFilenameInput)},isEditInput:function(a){return f(a).hasClass(r.editFilenameInput,!0)},updateProgress:function(a,b,c){var d=K(a);d&&0<c&&(b=Math.round(b/c*100),100===b?A(d):U(d),Aa(a,b))},updateTotalProgress:function(a,b){this.updateProgress(null,a,b)},hideProgress:function(a){(a=K(a))&&A(a)},hideTotalProgress:function(){this.hideProgress()},
resetProgress:function(a){Aa(a,0);this.hideTotalProgress(a)},resetTotalProgress:function(){this.resetProgress()},showCancel:function(a){h||(a=g(E(a),r.cancel))&&f(a).removeClass(q.classes.hide)},hideCancel:function(a){A(g(E(a),r.cancel))},isCancel:function(a){return f(a).hasClass(r.cancel,!0)},allowPause:function(a){U(g(E(a),r.pause));A(g(E(a),r.continueButton))},uploadPaused:function(a){this.setStatusText(a,q.text.paused);this.allowContinueButton(a);A(g(E(a),r.spinner))},hidePause:function(a){A(g(E(a),
r.pause))},isPause:function(a){return f(a).hasClass(r.pause,!0)},isContinueButton:function(a){return f(a).hasClass(r.continueButton,!0)},allowContinueButton:function(a){U(g(E(a),r.continueButton));A(g(E(a),r.pause))},uploadContinued:function(a){this.setStatusText(a,"");this.allowPause(a);U(g(E(a),r.spinner))},showDeleteButton:function(a){U(g(E(a),r.deleteButton))},hideDeleteButton:function(a){A(g(E(a),r.deleteButton))},isDeleteButton:function(a){return f(a).hasClass(r.deleteButton,!0)},isRetry:function(a){return f(a).hasClass(r.retry,
!0)},updateSize:function(a,b){if(a=g(E(a),r.size))U(a),f(a).setText(b)},setStatusText:function(a,b){(a=g(E(a),r.statusText))&&(null==b?f(a).clearText():f(a).setText(b))},hideSpinner:function(a){f(E(a)).removeClass("qq-in-progress");A(g(E(a),r.spinner))},showSpinner:function(a){f(E(a)).addClass("qq-in-progress");U(g(E(a),r.spinner))},generatePreview:function(b,c,d){this.isHiddenForever(b)||(l.push({id:b,customResizeFunction:d,optFileOrBlob:c}),!a&&G())},updateThumbnail:function(b,c,d,e){this.isHiddenForever(b)||
(l.push({customResizeFunction:e,update:!0,id:b,thumbnailUrl:c,showWaitingImg:d}),!a&&G())},hasDialog:function(a){return f.supportedFeatures.dialogElement&&!!g(R,r[a+"Dialog"])},showDialog:function(a,b,c){var d=g(R,r[a+"Dialog"]);a=g(d,r.dialogMessage);var e=d.getElementsByTagName("INPUT")[0],h=g(d,r.dialogCancelButton),k=g(d,r.dialogOkButton),l=new f.Promise,m=function(){h.removeEventListener("click",p);k&&k.removeEventListener("click",t);l.failure()},p=function(){h.removeEventListener("click",p);
d.close()},t=function(){d.removeEventListener("close",m);k.removeEventListener("click",t);d.close();l.success(e&&e.value)};d.addEventListener("close",m);h.addEventListener("click",p);k&&k.addEventListener("click",t);e&&(e.value=c);a.textContent=b;d.showModal();return l}})};f.UiEventHandler=function(b,e){function d(a){h.attach(a,c.eventType,function(a){a=a||window.event;c.onHandled(a.target||a.srcElement,a)})}var h=new f.DisposeSupport,c={eventType:"click",attachTo:null,onHandled:function(a,b){}};
f.extend(this,{addHandler:function(a){d(a)},dispose:function(){h.dispose()}});f.extend(e,{getFileIdFromItem:function(a){return a.qqFileId},getDisposeSupport:function(){return h}});f.extend(c,b);c.attachTo&&d(c.attachTo)};f.FileButtonsClickHandler=function(b){var e={templating:null,log:function(b,c){},onDeleteFile:function(b){},onCancel:function(b){},onRetry:function(b){},onPause:function(b){},onContinue:function(b){},onGetName:function(b){}},d={cancel:function(b){e.onCancel(b)},retry:function(b){e.onRetry(b)},
deleteButton:function(b){e.onDeleteFile(b)},pause:function(b){e.onPause(b)},continueButton:function(b){e.onContinue(b)}};f.extend(e,b);e.eventType="click";e.onHandled=function(b,c){f.each(d,function(a,d){a=a.charAt(0).toUpperCase()+a.slice(1);if(e.templating["is"+a](b))return a=e.templating.getFileId(b),f.preventDefault(c),e.log(f.format("Detected valid file button click event on file '{}', ID: {}.",e.onGetName(a),a)),d(a),!1})};e.attachTo=e.templating.getFileList();f.extend(this,new f.UiEventHandler(e,
{}))};f.FilenameClickHandler=function(b){var e={},d={templating:null,log:function(b,c){},classes:{file:"qq-upload-file",editNameIcon:"qq-edit-filename-icon"},onGetUploadStatus:function(b){},onGetName:function(b){}};f.extend(d,b);d.eventType="click";d.onHandled=function(b,c){if(d.templating.isFileName(b)||d.templating.isEditIcon(b)){var a=d.templating.getFileId(b);d.onGetUploadStatus(a)===f.status.SUBMITTED&&(d.log(f.format("Detected valid filename click event on file '{}', ID: {}.",d.onGetName(a),
a)),f.preventDefault(c),e.handleFilenameEdit(a,b,!0))}};f.extend(this,new f.FilenameEditHandler(d,e))};f.FilenameInputFocusInHandler=function(b,e){var d={templating:null,onGetUploadStatus:function(b){},log:function(b,c){}};e||(e={});d.eventType="focusin";d.onHandled=function(b,c){d.templating.isEditInput(b)&&(c=d.templating.getFileId(b),d.onGetUploadStatus(c)===f.status.SUBMITTED&&(d.log(f.format("Detected valid filename input focus event on file '{}', ID: {}.",d.onGetName(c),c)),e.handleFilenameEdit(c,
b)))};f.extend(d,b);f.extend(this,new f.FilenameEditHandler(d,e))};f.FilenameInputFocusHandler=function(b){b.eventType="focus";b.attachTo=null;f.extend(this,new f.FilenameInputFocusInHandler(b,{}))};f.FilenameEditHandler=function(b,e){function d(b,c){b=b.value;if(void 0!==b&&0<f.trimStr(b).length){var d=a.onGetName(c);d=f.getExtension(d);void 0!==d&&(b=b+"."+d);a.onSetName(c,b)}a.onEditingStatusChange(c,!1)}function h(a,b){e.getDisposeSupport().attach(a,"blur",function(){d(a,b)})}function c(a,b){e.getDisposeSupport().attach(a,
"keyup",function(c){13===(c.keyCode||c.which)&&d(a,b)})}var a={templating:null,log:function(a,b){},onGetUploadStatus:function(a){},onGetName:function(a){},onSetName:function(a,b){},onEditingStatusChange:function(a,b){}};f.extend(a,b);a.attachTo=a.templating.getFileList();f.extend(this,new f.UiEventHandler(a,e));f.extend(e,{handleFilenameEdit:function(b,d,e){d=a.templating.getEditInput(b);a.onEditingStatusChange(b,!0);var f=a.onGetName(b),k=f.lastIndexOf(".");0<k&&(f=f.substr(0,k));d.value=f;e&&d.focus();
h(d,b);c(d,b)}})};(function(){f.s3.FineUploader=function(b){var e={failedUploadTextDisplay:{mode:"custom"}};f.extend(e,b,!0);f.FineUploader.call(this,e,"s3");f.supportedFeatures.ajaxUploading||void 0!==e.iframeSupport.localBlankPagePath||(this._options.element.innerHTML="<div>You MUST set the <code>localBlankPagePath</code> property of the <code>iframeSupport</code> option since this browser does not support the File API!</div>")};f.extend(f.s3.FineUploader.prototype,f.s3.FineUploaderBasic.prototype);
f.extend(f.s3.FineUploader.prototype,f.uiPublicApi);f.extend(f.s3.FineUploader.prototype,f.uiPrivateApi)})()})(window);(function(h,f){"function"===typeof define&&define.amd?define("pdfjs-dist/build/pdf",["exports"],f):"undefined"!==typeof exports?f(exports):f(h.pdfjsDistBuildPdf={})})(this,function(h){var f="undefined"!==typeof document&&document.currentScript?document.currentScript.src:null,b={};(function(){(function(b,d){d(b.pdfjsSharedUtil={})})(this,function(b){function d(a){x>=p.warnings&&console.log("Warning: "+a)}function e(a){x>=p.errors&&(console.log("Error: "+a),console.log(c()));throw Error(a);}function c(){try{throw Error();
}catch(V){return V.stack?V.stack.split("\n").slice(2).join("\n"):""}}function a(a,b){a||e(b)}function f(b){a("string"===typeof b,"Invalid argument for stringToBytes");for(var c=b.length,d=new Uint8Array(c),e=0;e<c;++e)d[e]=b.charCodeAt(e)&255;return d}function h(b){if(void 0!==b.length)return b.length;a(void 0!==b.byteLength);return b.byteLength}function q(a){return"number"===typeof a&&(a|0)===a}function r(){var a={};a.promise=new Promise(function(b,c){a.resolve=b;a.reject=c});return a}function y(a,
b,c){this.sourceName=a;this.targetName=b;this.comObj=c;this.callbackIndex=1;this.postMessageTransfers=!0;var d=this.callbacksCapabilities=Object.create(null),f=this.actionHandler=Object.create(null);this._onComObjOnMessage=function(a){var b=a.data;if(b.targetName===this.sourceName)if(b.isReply)if(a=b.callbackId,b.callbackId in d){var g=d[a];delete d[a];"error"in b?g.reject(b.error):g.resolve(b.data)}else e("Cannot resolve callback "+a);else if(b.action in f){var h=f[b.action];if(b.callbackId){var k=
this.sourceName,l=b.sourceName;Promise.resolve().then(function(){return h[0].call(h[1],b.data)}).then(function(a){c.postMessage({sourceName:k,targetName:l,isReply:!0,callbackId:b.callbackId,data:a})},function(a){a instanceof Error&&(a+="");c.postMessage({sourceName:k,targetName:l,isReply:!0,callbackId:b.callbackId,error:a})})}else h[0].call(h[1],b.data)}else e("Unknown action from worker: "+b.action)}.bind(this);c.addEventListener("message",this._onComObjOnMessage)}var z="undefined"!==typeof window?
window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this,p={errors:0,warnings:1,infos:5},x=p.warnings,t=function(){function a(a,b){this.name="PasswordException";this.message=a;this.code=b}a.prototype=Error();return a.constructor=a}(),B=function(){function a(a,b){this.name="UnknownErrorException";this.message=a;this.details=b}a.prototype=Error();return a.constructor=a}(),C=function(){function a(a){this.name="InvalidPDFException";this.message=a}a.prototype=Error();return a.constructor=
a}(),F=function(){function a(a){this.name="MissingPDFException";this.message=a}a.prototype=Error();return a.constructor=a}(),H=function(){function a(a,b){this.name="UnexpectedResponseException";this.message=a;this.status=b}a.prototype=Error();return a.constructor=a}(),G=function(){function a(a){this.message=a}a.prototype=Error();a.prototype.name="NotImplementedException";return a.constructor=a}(),E=function(){function a(a,b){this.begin=a;this.end=b;this.message="Missing data ["+a+", "+b+")"}a.prototype=
Error();a.prototype.name="MissingDataException";return a.constructor=a}(),K=function(){function a(a){this.message=a}a.prototype=Error();a.prototype.name="XRefParseException";return a.constructor=a}(),g=/\x00/g,m=function(){function a(d,e){this.buffer=d;this.byteLength=d.length;for(d=this.length=void 0===e?this.byteLength>>2:e;c<d;)Object.defineProperty(a.prototype,c,b(c)),c++}function b(a){return{get:function(){var b=this.buffer,c=a<<2;return(b[c]|b[c+1]<<8|b[c+2]<<16|b[c+3]<<24)>>>0},set:function(b){var c=
this.buffer,d=a<<2;c[d]=b&255;c[d+1]=b>>8&255;c[d+2]=b>>16&255;c[d+3]=b>>>24&255}}}a.prototype=Object.create(null);var c=0;return a}();b.Uint32ArrayView=m;var A=function(){function b(){}var c=["rgb(",0,",",0,",",0,")"];b.makeCssRgb=function(a,b,d){c[1]=a;c[3]=b;c[5]=d;return c.join("")};b.transform=function(a,b){return[a[0]*b[0]+a[2]*b[1],a[1]*b[0]+a[3]*b[1],a[0]*b[2]+a[2]*b[3],a[1]*b[2]+a[3]*b[3],a[0]*b[4]+a[2]*b[5]+a[4],a[1]*b[4]+a[3]*b[5]+a[5]]};b.applyTransform=function(a,b){return[a[0]*b[0]+
a[1]*b[2]+b[4],a[0]*b[1]+a[1]*b[3]+b[5]]};b.applyInverseTransform=function(a,b){var c=b[0]*b[3]-b[1]*b[2];return[(a[0]*b[3]-a[1]*b[2]+b[2]*b[5]-b[4]*b[3])/c,(-a[0]*b[1]+a[1]*b[0]+b[4]*b[1]-b[5]*b[0])/c]};b.getAxialAlignedBoundingBox=function(a,c){var d=b.applyTransform(a,c),e=b.applyTransform(a.slice(2,4),c),f=b.applyTransform([a[0],a[3]],c);a=b.applyTransform([a[2],a[1]],c);return[Math.min(d[0],e[0],f[0],a[0]),Math.min(d[1],e[1],f[1],a[1]),Math.max(d[0],e[0],f[0],a[0]),Math.max(d[1],e[1],f[1],a[1])]};
b.inverseTransform=function(a){var b=a[0]*a[3]-a[1]*a[2];return[a[3]/b,-a[1]/b,-a[2]/b,a[0]/b,(a[2]*a[5]-a[4]*a[3])/b,(a[4]*a[1]-a[5]*a[0])/b]};b.apply3dTransform=function(a,b){return[a[0]*b[0]+a[1]*b[1]+a[2]*b[2],a[3]*b[0]+a[4]*b[1]+a[5]*b[2],a[6]*b[0]+a[7]*b[1]+a[8]*b[2]]};b.singularValueDecompose2dScale=function(a){var b=[a[0],a[2],a[1],a[3]],c=a[0]*b[0]+a[1]*b[2],d=a[2]*b[1]+a[3]*b[3],e=(c+d)/2;a=Math.sqrt((c+d)*(c+d)-4*(c*d-(a[2]*b[0]+a[3]*b[2])*(a[0]*b[1]+a[1]*b[3])))/2;return[Math.sqrt(e+a||
1),Math.sqrt(e-a||1)]};b.normalizeRect=function(a){var b=a.slice(0);a[0]>a[2]&&(b[0]=a[2],b[2]=a[0]);a[1]>a[3]&&(b[1]=a[3],b[3]=a[1]);return b};b.intersect=function(a,c){function d(a,b){return a-b}var e=[a[0],a[2],c[0],c[2]].sort(d),f=[a[1],a[3],c[1],c[3]].sort(d),g=[];a=b.normalizeRect(a);c=b.normalizeRect(c);if(e[0]===a[0]&&e[1]===c[0]||e[0]===c[0]&&e[1]===a[0])g[0]=e[1],g[2]=e[2];else return!1;if(f[0]===a[1]&&f[1]===c[1]||f[0]===c[1]&&f[1]===a[1])g[1]=f[1],g[3]=f[2];else return!1;return g};b.sign=
function(a){return 0>a?-1:1};var d=" C CC CCC CD D DC DCC DCCC CM  X XX XXX XL L LX LXX LXXX XC  I II III IV V VI VII VIII IX".split(" ");b.toRoman=function(b,c){a(q(b)&&0<b,"The number should be a positive integer.");for(var e,f=[];1E3<=b;)b-=1E3,f.push("M");e=b/100|0;b%=100;f.push(d[e]);e=b/10|0;b%=10;f.push(d[10+e]);f.push(d[20+b]);b=f.join("");return c?b.toLowerCase():b};b.appendToArray=function(a,b){Array.prototype.push.apply(a,b)};b.prependToArray=function(a,b){Array.prototype.unshift.apply(a,
b)};b.extendObj=function(a,b){for(var c in b)a[c]=b[c]};b.getInheritableProperty=function(a,b){for(;a&&!a.has(b);)a=a.get("Parent");return a?a.get(b):null};b.inherit=function(a,b,c){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;for(var d in c)a.prototype[d]=c[d]};b.loadScript=function(a,b){var c=document.createElement("script"),d=!1;c.setAttribute("src",a);b&&(c.onload=function(){d||b();d=!0});document.getElementsByTagName("head")[0].appendChild(c)};return b}();m=function(){function a(a,
b,c,d,e,f){this.viewBox=a;this.scale=b;this.rotation=c;this.offsetX=d;this.offsetY=e;var g=(a[2]+a[0])/2,h=(a[3]+a[1])/2,k;c%=360;switch(0>c?c+360:c){case 180:c=-1;var l=k=0;var m=1;break;case 90:c=0;l=k=1;m=0;break;case 270:c=0;l=k=-1;m=0;break;default:c=1,l=k=0,m=-1}f&&(l=-l,m=-m);0===c?(d=Math.abs(h-a[1])*b+d,e=Math.abs(g-a[0])*b+e,f=Math.abs(a[3]-a[1])*b,a=Math.abs(a[2]-a[0])*b):(d=Math.abs(g-a[0])*b+d,e=Math.abs(h-a[1])*b+e,f=Math.abs(a[2]-a[0])*b,a=Math.abs(a[3]-a[1])*b);this.transform=[c*b,
k*b,l*b,m*b,d-c*b*g-l*b*h,e-k*b*g-m*b*h];this.width=f;this.height=a;this.fontScale=b}a.prototype={clone:function(b){b=b||{};var c="scale"in b?b.scale:this.scale,d="rotation"in b?b.rotation:this.rotation;return new a(this.viewBox.slice(),c,d,this.offsetX,this.offsetY,b.dontFlip)},convertToViewportPoint:function(a,b){return A.applyTransform([a,b],this.transform)},convertToViewportRectangle:function(a){var b=A.applyTransform([a[0],a[1]],this.transform);a=A.applyTransform([a[2],a[3]],this.transform);
return[b[0],b[1],a[0],a[1]]},convertToPdfPoint:function(a,b){return A.applyInverseTransform([a,b],this.transform)}};return a}();var M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,
64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];(function(){function a(a){this._status=0;this._handlers=[];try{a.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(X){this._reject(X)}}if(z.Promise)"function"!==typeof z.Promise.all&&(z.Promise.all=function(a){var b=0,c=[],d,e,f=new z.Promise(function(a,b){d=a;e=b});a.forEach(function(a,f){b++;a.then(function(a){c[f]=a;b--;0===b&&d(c)},e)});0===b&&d(c);return f}),"function"!==typeof z.Promise.resolve&&(z.Promise.resolve=function(a){return new z.Promise(function(b){b(a)})}),
"function"!==typeof z.Promise.reject&&(z.Promise.reject=function(a){return new z.Promise(function(b,c){c(a)})}),"function"!==typeof z.Promise.prototype.catch&&(z.Promise.prototype.catch=function(a){return z.Promise.prototype.then(void 0,a)});else{var b={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(a){0!==a._status&&(this.handlers=this.handlers.concat(a._handlers),a._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),
0)))},runHandlers:function(){for(var a=Date.now()+1;0<this.handlers.length;){var b=this.handlers.shift(),c=b.thisPromise._status,d=b.thisPromise._value;try{1===c?"function"===typeof b.onResolve&&(d=b.onResolve(d)):"function"===typeof b.onReject&&(d=b.onReject(d),c=1,b.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(b.thisPromise))}catch(Z){c=2,d=Z}b.nextPromise._updateStatus(c,d);if(Date.now()>=a)break}0<this.handlers.length?setTimeout(this.runHandlers.bind(this),0):this.running=!1},
addUnhandledRejection:function(a){this.unhandledRejections.push({promise:a,time:Date.now()});this.scheduleRejectionCheck()},removeUnhandeledRejection:function(a){a._unhandledRejection=!1;for(var b=0;b<this.unhandledRejections.length;b++)this.unhandledRejections[b].promise===a&&(this.unhandledRejections.splice(b),b--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=!1;for(var a=Date.now(),b=0;b<this.unhandledRejections.length;b++)if(500<
a-this.unhandledRejections[b].time){var c=this.unhandledRejections[b].promise._value,e="Unhandled rejection: "+c;c.stack&&(e+="\n"+c.stack);d(e);this.unhandledRejections.splice(b);b--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};a.all=function(b){function c(a){2!==f._status&&(h=[],e(a))}var d,e,f=new a(function(a,b){d=a;e=b}),g=b.length,h=[];if(0===g)return d(h),f;for(var k=0,l=b.length;k<l;++k){var m=b[k],p=function(a){return function(b){2!==f._status&&(h[a]=
b,g--,0===g&&d(h))}}(k);a.isPromise(m)?m.then(p,c):p(m)}return f};a.isPromise=function(a){return a&&"function"===typeof a.then};a.resolve=function(b){return new a(function(a){a(b)})};a.reject=function(b){return new a(function(a,c){c(b)})};a.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(c,d){1!==this._status&&2!==this._status&&(1===c&&a.isPromise(d)?d.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,2)):(this._status=c,this._value=
d,2===c&&0===this._handlers.length&&(this._unhandledRejection=!0,b.addUnhandledRejection(this)),b.scheduleHandlers(this)))},_resolve:function(a){this._updateStatus(1,a)},_reject:function(a){this._updateStatus(2,a)},then:function(c,d){var e=new a(function(a,b){this.resolve=a;this.reject=b});this._handlers.push({thisPromise:this,onResolve:c,onReject:d,nextPromise:e});b.scheduleHandlers(this);return e},catch:function(a){return this.then(void 0,a)}};z.Promise=a}})();var L=function(){function a(){this.started=
Object.create(null);this.times=[];this.enabled=!0}a.prototype={time:function(a){this.enabled&&(a in this.started&&d("Timer is already running for "+a),this.started[a]=Date.now())},timeEnd:function(a){this.enabled&&(a in this.started||d("Timer has not been started for "+a),this.times.push({name:a,start:this.started[a],end:Date.now()}),delete this.started[a])},toString:function(){var a,b=this.times,c="",d=0;var e=0;for(a=b.length;e<a;++e){var f=b[e].name;f.length>d&&(d=f.length)}e=0;for(a=b.length;e<
a;++e){var g=b[e];f=g.end-g.start;for(g=g.name;g.length<d;)g+=" ";c+=g+" "+f+"ms\n"}return c}};return a}(),Q=function(a,b){if("undefined"!==typeof Blob)return new Blob([a],{type:b});var c=new MozBlobBuilder;c.append(a);return c.getBlob(b)},ia=function(){return function(a,b,c){if(!c&&"undefined"!==typeof URL&&URL.createObjectURL)return a=Q(a,b),URL.createObjectURL(a);b="data:"+b+";base64,";c=0;for(var d=a.length;c<d;c+=3){var e=a[c]&255,f=a[c+1]&255,g=a[c+2]&255;b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[e>>
2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[(e&3)<<4|f>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[c+1<d?(f&15)<<2|g>>6:64]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[c+2<d?g&63:64]}return b}}();y.prototype={on:function(a,b,c){var d=this.actionHandler;d[a]&&e('There is already an actionName called "'+a+'"');d[a]=[b,c]},send:function(a,b,c){this.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,
data:b},c)},sendWithPromise:function(a,b,c){var d=this.callbackIndex++;a={sourceName:this.sourceName,targetName:this.targetName,action:a,data:b,callbackId:d};b=r();this.callbacksCapabilities[d]=b;try{this.postMessage(a,c)}catch(da){b.reject(da)}return b.promise},postMessage:function(a,b){b&&this.postMessageTransfers?this.comObj.postMessage(a,b):this.comObj.postMessage(a)},destroy:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}};(function(a){function b(a){""==a&&(f.call(this),
this._isInvalid=!0);return a.toLowerCase()}function c(a){var b=a.charCodeAt(0);return 32<b&&127>b&&-1==[34,35,60,62,63,96].indexOf(b)?a:encodeURIComponent(a)}function d(a){var b=a.charCodeAt(0);return 32<b&&127>b&&-1==[34,35,60,62,96].indexOf(b)?a:encodeURIComponent(a)}function e(a,e,g){function h(a){y.push(a)}var k=e||"scheme start",r=0,q="",u=!1,z=!1,y=[];a:for(;(void 0!=a[r-1]||0==r)&&!this._isInvalid;){var x=a[r];switch(k){case "scheme start":if(x&&p.test(x))q+=x.toLowerCase(),k="scheme";else if(e){h("Invalid scheme.");
break a}else{q="";k="no scheme";continue}break;case "scheme":if(x&&t.test(x))q+=x.toLowerCase();else if(":"==x){this._scheme=q;q="";if(e)break a;void 0!==l[this._scheme]&&(this._isRelative=!0);k="file"==this._scheme?"relative":this._isRelative&&g&&g._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}else if(e){void 0!=x&&h("Code point not allowed in scheme: "+x);break a}else{q="";r=0;k="no scheme";continue}break;case "scheme data":"?"==x?(this._query=
"?",k="query"):"#"==x?(this._fragment="#",k="fragment"):void 0!=x&&"\t"!=x&&"\n"!=x&&"\r"!=x&&(this._schemeData+=c(x));break;case "no scheme":if(g&&void 0!==l[g._scheme]){k="relative";continue}else h("Missing scheme."),f.call(this),this._isInvalid=!0;break;case "relative or authority":if("/"==x&&"/"==a[r+1])k="authority ignore slashes";else{h("Expected /, got: "+x);k="relative";continue}break;case "relative":this._isRelative=!0;"file"!=this._scheme&&(this._scheme=g._scheme);if(void 0==x){this._host=
g._host;this._port=g._port;this._path=g._path.slice();this._query=g._query;this._username=g._username;this._password=g._password;break a}else if("/"==x||"\\"==x)"\\"==x&&h("\\ is an invalid code point."),k="relative slash";else if("?"==x)this._host=g._host,this._port=g._port,this._path=g._path.slice(),this._query="?",this._username=g._username,this._password=g._password,k="query";else if("#"==x)this._host=g._host,this._port=g._port,this._path=g._path.slice(),this._query=g._query,this._fragment="#",
this._username=g._username,this._password=g._password,k="fragment";else{k=a[r+1];var A=a[r+2];if("file"!=this._scheme||!p.test(x)||":"!=k&&"|"!=k||void 0!=A&&"/"!=A&&"\\"!=A&&"?"!=A&&"#"!=A)this._host=g._host,this._port=g._port,this._username=g._username,this._password=g._password,this._path=g._path.slice(),this._path.pop();k="relative path";continue}break;case "relative slash":if("/"==x||"\\"==x)"\\"==x&&h("\\ is an invalid code point."),k="file"==this._scheme?"file host":"authority ignore slashes";
else{"file"!=this._scheme&&(this._host=g._host,this._port=g._port,this._username=g._username,this._password=g._password);k="relative path";continue}break;case "authority first slash":if("/"==x)k="authority second slash";else{h("Expected '/', got: "+x);k="authority ignore slashes";continue}break;case "authority second slash":k="authority ignore slashes";if("/"!=x){h("Expected '/', got: "+x);continue}break;case "authority ignore slashes":if("/"!=x&&"\\"!=x){k="authority";continue}else h("Expected authority, got: "+
x);break;case "authority":if("@"==x){u&&(h("@ already seen."),q+="%40");u=!0;for(x=0;x<q.length;x++)A=q[x],"\t"==A||"\n"==A||"\r"==A?h("Invalid whitespace in authority."):":"==A&&null===this._password?this._password="":(A=c(A),null!==this._password?this._password+=A:this._username+=A);q=""}else if(void 0==x||"/"==x||"\\"==x||"?"==x||"#"==x){r-=q.length;q="";k="host";continue}else q+=x;break;case "file host":if(void 0==x||"/"==x||"\\"==x||"?"==x||"#"==x){2!=q.length||!p.test(q[0])||":"!=q[1]&&"|"!=
q[1]?(0!=q.length&&(this._host=b.call(this,q),q=""),k="relative path start"):k="relative path";continue}else"\t"==x||"\n"==x||"\r"==x?h("Invalid whitespace in file host."):q+=x;break;case "host":case "hostname":if(":"!=x||z)if(void 0==x||"/"==x||"\\"==x||"?"==x||"#"==x){this._host=b.call(this,q);q="";k="relative path start";if(e)break a;continue}else"\t"!=x&&"\n"!=x&&"\r"!=x?("["==x?z=!0:"]"==x&&(z=!1),q+=x):h("Invalid code point in host/hostname: "+x);else if(this._host=b.call(this,q),q="",k="port",
"hostname"==e)break a;break;case "port":if(/[0-9]/.test(x))q+=x;else if(void 0==x||"/"==x||"\\"==x||"?"==x||"#"==x||e){""!=q&&(q=parseInt(q,10),q!=l[this._scheme]&&(this._port=q+""),q="");if(e)break a;k="relative path start";continue}else"\t"==x||"\n"==x||"\r"==x?h("Invalid code point in port: "+x):(f.call(this),this._isInvalid=!0);break;case "relative path start":"\\"==x&&h("'\\' not allowed in path.");k="relative path";if("/"!=x&&"\\"!=x)continue;break;case "relative path":if(void 0!=x&&"/"!=x&&
"\\"!=x&&(e||"?"!=x&&"#"!=x))"\t"!=x&&"\n"!=x&&"\r"!=x&&(q+=c(x));else{"\\"==x&&h("\\ not allowed in relative path.");if(A=m[q.toLowerCase()])q=A;".."==q?(this._path.pop(),"/"!=x&&"\\"!=x&&this._path.push("")):"."==q&&"/"!=x&&"\\"!=x?this._path.push(""):"."!=q&&("file"==this._scheme&&0==this._path.length&&2==q.length&&p.test(q[0])&&"|"==q[1]&&(q=q[0]+":"),this._path.push(q));q="";"?"==x?(this._query="?",k="query"):"#"==x&&(this._fragment="#",k="fragment")}break;case "query":e||"#"!=x?void 0!=x&&"\t"!=
x&&"\n"!=x&&"\r"!=x&&(this._query+=d(x)):(this._fragment="#",k="fragment");break;case "fragment":void 0!=x&&"\t"!=x&&"\n"!=x&&"\r"!=x&&(this._fragment+=x)}r++}}function f(){this._username=this._schemeData=this._scheme="";this._password=null;this._port=this._host="";this._path=[];this._fragment=this._query="";this._isRelative=this._isInvalid=!1}function g(a,b){void 0===b||b instanceof g||(b=new g(String(b)));this._url=a;f.call(this);a=a.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");e.call(this,a,null,
b)}var h=!1;try{if("function"===typeof URL&&"object"===typeof URL.prototype&&"origin"in URL.prototype){var k=new URL("b","http://a");k.pathname="c%20d";h="http://a/c%20d"===k.href}}catch(Za){}if(!h){var l=Object.create(null);l.ftp=21;l.file=0;l.gopher=70;l.http=80;l.https=443;l.ws=80;l.wss=443;var m=Object.create(null);m["%2e"]=".";m[".%2e"]="..";m["%2e."]="..";m["%2e%2e"]="..";var p=/[a-zA-Z]/,t=/[a-zA-Z0-9\+\-\.]/;g.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;
var a="";if(""!=this._username||null!=this._password)a=this._username+(null!=this._password?":"+this._password:"")+"@";return this.protocol+(this._isRelative?"//"+a+this.host:"")+this.pathname+this._query+this._fragment},set href(a){f.call(this);e.call(this,a)},get protocol(){return this._scheme+":"},set protocol(a){this._isInvalid||e.call(this,a+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(a){!this._isInvalid&&this._isRelative&&
e.call(this,a,"host")},get hostname(){return this._host},set hostname(a){!this._isInvalid&&this._isRelative&&e.call(this,a,"hostname")},get port(){return this._port},set port(a){!this._isInvalid&&this._isRelative&&e.call(this,a,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(a){!this._isInvalid&&this._isRelative&&(this._path=[],e.call(this,a,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?
"":this._query},set search(a){!this._isInvalid&&this._isRelative&&(this._query="?","?"==a[0]&&(a=a.slice(1)),e.call(this,a,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(a){this._isInvalid||(this._fragment="#","#"==a[0]&&(a=a.slice(1)),e.call(this,a,"fragment"))},get origin(){var a;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case "data":case "file":case "javascript":case "mailto":return"null"}return(a=this.host)?this._scheme+
"://"+a:""}};var r=a.URL;r&&(g.createObjectURL=function(a){return r.createObjectURL.apply(r,arguments)},g.revokeObjectURL=function(a){r.revokeObjectURL(a)});a.URL=g}})(z);b.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];b.IDENTITY_MATRIX=[1,0,0,1,0,0];b.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,
closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,
setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,
endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};b.VERBOSITY_LEVELS=p;b.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"};b.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};
b.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};b.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};b.FontType={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,
CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10};b.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};b.InvalidPDFException=C;b.MessageHandler=y;b.MissingDataException=E;b.MissingPDFException=F;b.NotImplementedException=G;b.PageViewport=m;b.PasswordException=t;b.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};b.StatTimer=L;b.StreamType={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9};b.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,
STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};b.UnexpectedResponseException=H;b.UnknownErrorException=B;b.Util=A;b.XRefParseException=K;b.arrayByteLength=h;b.arraysToBytes=function(a){if(1===a.length&&a[0]instanceof Uint8Array)return a[0];var b=0,c,d=a.length;for(c=0;c<d;c++){var e=a[c];var g=h(e);b+=g}var k=0;b=new Uint8Array(b);for(c=0;c<d;c++)e=a[c],e instanceof Uint8Array||(e="string"===typeof e?f(e):new Uint8Array(e)),g=e.byteLength,b.set(e,
k),k+=g;return b};b.assert=a;b.bytesToString=function(b){a(null!==b&&"object"===typeof b&&void 0!==b.length,"Invalid argument for bytesToString");var c=b.length;if(8192>c)return String.fromCharCode.apply(null,b);for(var d=[],e=0;e<c;e+=8192){var f=b.subarray(e,Math.min(e+8192,c));d.push(String.fromCharCode.apply(null,f))}return d.join("")};b.createBlob=Q;b.createPromiseCapability=r;b.createObjectURL=ia;b.deprecated=function(a){console.log("Deprecated API usage: "+a)};b.error=e;b.getLookupTableFactory=
function(a){var b;return function(){a&&(b=Object.create(null),a(b),a=null);return b}};b.getVerbosityLevel=function(){return x};b.globalScope=z;b.info=function(a){x>=p.infos&&console.log("Info: "+a)};b.isArray=function(a){return a instanceof Array};b.isArrayBuffer=function(a){return"object"===typeof a&&null!==a&&void 0!==a.byteLength};b.isBool=function(a){return"boolean"===typeof a};b.isEmptyObj=function(a){for(var b in a)return!1;return!0};b.isInt=q;b.isNum=function(a){return"number"===typeof a};
b.isString=function(a){return"string"===typeof a};b.isSameOrigin=function(a,b){try{var c=new URL(a);if(!c.origin||"null"===c.origin)return!1}catch(X){return!1}a=new URL(b,c);return c.origin===a.origin};b.isValidUrl=function(a,b){if(!a||"string"!==typeof a)return!1;a=/^[a-z][a-z0-9+\-.]*(?=:)/i.exec(a);if(!a)return b;a=a[0].toLowerCase();switch(a){case "http":case "https":case "ftp":case "mailto":case "tel":return!0;default:return!1}};b.isLittleEndian=function(){var a=new Uint8Array(2);a[0]=1;return 1===
(new Uint16Array(a.buffer))[0]};b.isEvalSupported=function(){try{return new Function(""),!0}catch(V){return!1}};b.loadJpegStream=function(a,b,c){var e=new Image;e.onload=function(){c.resolve(a,e)};e.onerror=function(){c.resolve(a,null);d("Error during JPEG image loading")};e.src=b};b.log2=function(a){for(var b=1,c=0;a>b;)b<<=1,c++;return c};b.readInt8=function(a,b){return a[b]<<24>>24};b.readUint16=function(a,b){return a[b]<<8|a[b+1]};b.readUint32=function(a,b){return(a[b]<<24|a[b+1]<<16|a[b+2]<<
8|a[b+3])>>>0};b.removeNullCharacters=function(a){return"string"!==typeof a?(d("The argument for removeNullCharacters must be a string."),a):a.replace(g,"")};b.setVerbosityLevel=function(a){x=a};b.shadow=function(a,b,c){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!1});return c};b.string32=function(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)};b.stringToBytes=f;b.stringToPDFString=function(a){var b,c=a.length,d=[];if("\u00fe"===a[0]&&"\u00ff"===a[1])for(b=
2;b<c;b+=2)d.push(String.fromCharCode(a.charCodeAt(b)<<8|a.charCodeAt(b+1)));else for(b=0;b<c;++b){var e=M[a.charCodeAt(b)];d.push(e?String.fromCharCode(e):a.charAt(b))}return d.join("")};b.stringToUTF8String=function(a){return decodeURIComponent(escape(a))};b.utf8StringToString=function(a){return unescape(encodeURIComponent(a))};b.warn=d});(function(b,d){d(b.pdfjsDisplayDOMUtils={},b.pdfjsSharedUtil)})(this,function(b,d){function e(b){var c=d.globalScope.PDFJS;switch(b){case "pdfBug":return c?c.pdfBug:
!1;case "disableAutoFetch":return c?c.disableAutoFetch:!1;case "disableStream":return c?c.disableStream:!1;case "disableRange":return c?c.disableRange:!1;case "disableFontFace":return c?c.disableFontFace:!1;case "disableCreateObjectURL":return c?c.disableCreateObjectURL:!1;case "disableWebGL":return c?c.disableWebGL:!0;case "cMapUrl":return c?c.cMapUrl:null;case "cMapPacked":return c?c.cMapPacked:!1;case "postMessageTransfers":return c?c.postMessageTransfers:!0;case "workerSrc":return c?c.workerSrc:
null;case "disableWorker":return c?c.disableWorker:!1;case "maxImageSize":return c?c.maxImageSize:-1;case "imageResourcesPath":return c?c.imageResourcesPath:"";case "isEvalSupported":return c?c.isEvalSupported:!0;case "externalLinkTarget":if(!c)return h.NONE;switch(c.externalLinkTarget){case h.NONE:case h.SELF:case h.BLANK:case h.PARENT:case h.TOP:return c.externalLinkTarget}a("PDFJS.externalLinkTarget is invalid: "+c.externalLinkTarget);return c.externalLinkTarget=h.NONE;case "externalLinkRel":return c?
c.externalLinkRel:"noreferrer";case "enableStats":return!(!c||!c.enableStats);default:throw Error("Unknown default setting: "+b);}}var c=d.removeNullCharacters,a=d.warn,f=function(){function a(){}var b=["ms","Moz","Webkit","O"],c=Object.create(null);a.getProp=function(a,d){if(1===arguments.length&&"string"===typeof c[a])return c[a];d=d||document.documentElement;var e=d.style;if("string"===typeof e[a])return c[a]=a;var f=a.charAt(0).toUpperCase()+a.slice(1);for(var h=0,k=b.length;h<k;h++){var l=b[h]+
f;if("string"===typeof e[l])return c[a]=l}return c[a]="undefined"};a.setProp=function(a,b,c){a=this.getProp(a);"undefined"!==a&&(b.style[a]=c)};return a}(),h={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},q=["","_self","_blank","_parent","_top"];b.CustomStyle=f;b.addLinkAttributes=function(a,b){var d=b&&b.url;a.href=a.title=d?c(d):"";d&&(d=b.target,"undefined"===typeof d&&(d=e("externalLinkTarget")),a.target=q[d],b=b.rel,"undefined"===typeof b&&(b=e("externalLinkRel")),a.rel=b)};b.isExternalLinkTargetSet=
function(){switch(e("externalLinkTarget")){case h.NONE:return!1;case h.SELF:case h.BLANK:case h.PARENT:case h.TOP:return!0}};b.getFilenameFromUrl=function(a){var b=a.indexOf("#"),c=a.indexOf("?");b=Math.min(0<b?b:a.length,0<c?c:a.length);return a.substring(a.lastIndexOf("/",b)+1,b)};b.LinkTarget=h;b.hasCanvasTypedArrays=function(){var a=document.createElement("canvas");a.width=a.height=1;return"undefined"!==typeof a.getContext("2d").createImageData(1,1).data.buffer};b.getDefaultSetting=e});(function(b,
d){d(b.pdfjsDisplayFontLoader={},b.pdfjsSharedUtil)})(this,function(b,d){function e(a){this.docId=a;this.styleElement=null;this.nativeFontFaces=[];this.loadTestFontId=0;this.loadingContext={requests:[],nextRequestId:0}}var c=d.assert,a=d.bytesToString,f=d.string32,h=d.shadow,q=d.warn;e.prototype={insertRule:function(a){var b=this.styleElement;b||(b=this.styleElement=document.createElement("style"),b.id="PDFJS_FONT_STYLE_TAG_"+this.docId,document.documentElement.getElementsByTagName("head")[0].appendChild(b));
b=b.sheet;b.insertRule(a,b.cssRules.length)},clear:function(){var a=this.styleElement;a&&(a.parentNode.removeChild(a),a=this.styleElement=null);this.nativeFontFaces.forEach(function(a){document.fonts.delete(a)});this.nativeFontFaces.length=0},get loadTestFont(){return h(this,"loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))},
addNativeFontFace:function(a){this.nativeFontFaces.push(a);document.fonts.add(a)},bind:function(a,b){for(var c=[],d=[],f=[],h=function(a){return a.loaded.catch(function(b){q('Failed to load font "'+a.family+'": '+b)})},k=0,l=a.length;k<l;k++){var p=a[k];if(!p.attached&&!1!==p.loading)if(p.attached=!0,e.isFontLoadingAPISupported){if(p=p.createNativeFontFace())this.addNativeFontFace(p),f.push(h(p))}else{var r=p.createFontFaceRule();r&&(this.insertRule(r),c.push(r),d.push(p))}}var u=this.queueLoadingCallback(b);
e.isFontLoadingAPISupported?Promise.all(f).then(function(){u.complete()}):0<c.length&&!e.isSyncFontLoadingSupported?this.prepareFontLoadEvent(c,d,u):u.complete()},queueLoadingCallback:function(a){var b=this.loadingContext,d={id:"pdfjs-font-loading-"+b.nextRequestId++,complete:function(){c(!d.end,"completeRequest() cannot be called twice");for(d.end=Date.now();0<b.requests.length&&b.requests[0].end;){var a=b.requests.shift();setTimeout(a.callback,0)}},callback:a,started:Date.now()};b.requests.push(d);
return d},prepareFontLoadEvent:function(a,b,c){function d(a,b){return a.charCodeAt(b)<<24|a.charCodeAt(b+1)<<16|a.charCodeAt(b+2)<<8|a.charCodeAt(b+3)&255}function e(a,b,c,d){var e=a.substr(0,b);a=a.substr(b+c);return e+d+a}function h(a,b){p++;30<p?(q("Load test font never loaded."),b()):(l.font="30px "+a,l.fillText(".",0,20),0<l.getImageData(0,0,1,1).data[3]?b():setTimeout(h.bind(null,a,b)))}var k;a=document.createElement("canvas");a.width=1;a.height=1;var l=a.getContext("2d"),p=0;a="lt"+Date.now()+
this.loadTestFontId++;var r=this.loadTestFont;r=e(r,976,a.length,a);var u=d(r,16);var g=0;for(k=a.length-3;g<k;g+=4)u=u-1482184792+d(a,g)|0;g<a.length&&(u=u-1482184792+d(a+"XXX",g)|0);r=e(r,16,4,f(u));g="url(data:font/opentype;base64,"+btoa(r)+");";this.insertRule('@font-face { font-family:"'+a+'";src:'+g+"}");r=[];g=0;for(k=b.length;g<k;g++)r.push(b[g].loadedName);r.push(a);var m=document.createElement("div");m.setAttribute("style","visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;");
g=0;for(k=r.length;g<k;++g)b=document.createElement("span"),b.textContent="Hi",b.style.fontFamily=r[g],m.appendChild(b);document.body.appendChild(m);h(a,function(){document.body.removeChild(m);c.complete()})}};e.isFontLoadingAPISupported="undefined"!==typeof document&&!!document.fonts;Object.defineProperty(e,"isSyncFontLoadingSupported",{get:function(){if("undefined"===typeof navigator)return h(e,"isSyncFontLoadingSupported",!0);var a=!1,b=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);
b&&14<=b[1]&&(a=!0);return h(e,"isSyncFontLoadingSupported",a)},enumerable:!0,configurable:!0});var r={get value(){return h(this,"value",d.isEvalSupported())}},y=function(){function b(a,b){this.compiledGlyphs=Object.create(null);for(var c in a)this[c]=a[c];this.options=b}b.prototype={createNativeFontFace:function(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var a=new FontFace(this.loadedName,this.data,{});this.options.fontRegistry&&this.options.fontRegistry.registerFont(this);
return a},createFontFaceRule:function(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var b=a(new Uint8Array(this.data)),c=this.loadedName;b="url(data:"+this.mimetype+";base64,"+btoa(b)+");";c='@font-face { font-family:"'+c+'";src:'+b+"}";this.options.fontRegistry&&this.options.fontRegistry.registerFont(this,b);return c},getPathGenerator:function(a,b){if(!(b in this.compiledGlyphs)){var c=a.get(this.loadedName+"_path_"+b),d;if(this.options.isEvalSupported&&
r.value){var e="";var f=0;for(d=c.length;f<d;f++){var h=c[f];a=void 0!==h.args?h.args.join(","):"";e+="c."+h.cmd+"("+a+");\n"}this.compiledGlyphs[b]=new Function("c","size",e)}else this.compiledGlyphs[b]=function(a,b){f=0;for(d=c.length;f<d;f++)h=c[f],"scale"===h.cmd&&(h.args=[b,-b]),a[h.cmd].apply(a,h.args)}}return this.compiledGlyphs[b]}};return b}();b.FontFaceObject=y;b.FontLoader=e});(function(b,d){d(b.pdfjsDisplayMetadata={},b.pdfjsSharedUtil)})(this,function(b,d){function e(a){return a.replace(/>\\376\\377([^<]+)/g,
function(a,b){a=b.replace(/\\([0-3])([0-7])([0-7])/g,function(a,b,c,d){return String.fromCharCode(64*b+8*c+1*d)});b="";for(var c=0;c<a.length;c+=2){var d=256*a.charCodeAt(c)+a.charCodeAt(c+1);b+="&#x"+(65536+d).toString(16).substring(1)+";"}return">"+b})}function c(b){"string"===typeof b?(b=e(b),b=(new DOMParser).parseFromString(b,"application/xml")):b instanceof Document||a("Metadata: Invalid metadata object");this.metaDocument=b;this.metadata=Object.create(null);this.parse()}var a=d.error;c.prototype=
{parse:function(){var a=this.metaDocument.documentElement;if("rdf:rdf"!==a.nodeName.toLowerCase())for(a=a.firstChild;a&&"rdf:rdf"!==a.nodeName.toLowerCase();)a=a.nextSibling;var b=a?a.nodeName.toLowerCase():null;if(a&&"rdf:rdf"===b&&a.hasChildNodes()){a=a.childNodes;var c,d;var e=0;for(c=a.length;e<c;e++)if(b=a[e],"rdf:description"===b.nodeName.toLowerCase()){var f=0;for(d=b.childNodes.length;f<d;f++)if("#text"!==b.childNodes[f].nodeName.toLowerCase()){var h=b.childNodes[f];var k=h.nodeName.toLowerCase();
this.metadata[k]=h.textContent.trim()}}}},get:function(a){return this.metadata[a]||null},has:function(a){return"undefined"!==typeof this.metadata[a]}};b.Metadata=c});(function(b,d){d(b.pdfjsDisplaySVG={},b.pdfjsSharedUtil)})(this,function(b,d){var e=d.FONT_IDENTITY_MATRIX,c=d.IDENTITY_MATRIX,a=d.ImageKind,f=d.OPS,h=d.Util,q=d.isNum,r=d.isArray,y=d.warn,z=d.createObjectURL,p=function(){function b(a,b,c,e){var f=e,g=b.length;c[f]=g>>24&255;c[f+1]=g>>16&255;c[f+2]=g>>8&255;c[f+3]=g&255;f+=4;c[f]=a.charCodeAt(0)&
255;c[f+1]=a.charCodeAt(1)&255;c[f+2]=a.charCodeAt(2)&255;c[f+3]=a.charCodeAt(3)&255;f+=4;c.set(b,f);f+=b.length;a=-1;for(e+=4;e<f;e++)a=a>>>8^d[(a^c[e])&255];e=a^-1;c[f]=e>>24&255;c[f+1]=e>>16&255;c[f+2]=e>>8&255;c[f+3]=e&255}for(var c=new Uint8Array([137,80,78,71,13,10,26,10]),d=new Int32Array(256),e=0;256>e;e++){for(var f=e,h=0;8>h;h++)f=f&1?3988292384^f>>1&2147483647:f>>1&2147483647;d[e]=f}return function(d,e){var f=void 0===d.kind?a.GRAYSCALE_1BPP:d.kind,h=d.width,k=d.height,l=d.data;switch(f){case a.GRAYSCALE_1BPP:var p=
0;var t=1;var r=h+7>>3;break;case a.RGB_24BPP:p=2;t=8;r=3*h;break;case a.RGBA_32BPP:p=6;t=8;r=4*h;break;default:throw Error("invalid format");}d=new Uint8Array((1+r)*k);var q=0,u=0,x;for(x=0;x<k;++x)d[q++]=0,d.set(l.subarray(u,u+r),q),u+=r,q+=r;if(f===a.GRAYSCALE_1BPP)for(x=q=0;x<k;x++)for(q++,f=0;f<r;f++)d[q++]^=255;h=new Uint8Array([h>>24&255,h>>16&255,h>>8&255,h&255,k>>24&255,k>>16&255,k>>8&255,k&255,t,p,0,0,0]);t=d.length;k=new Uint8Array(2+t+5*Math.ceil(t/65535)+4);f=0;k[f++]=120;k[f++]=156;
for(p=0;65535<t;)k[f++]=0,k[f++]=255,k[f++]=255,k[f++]=0,k[f++]=0,k.set(d.subarray(p,p+65535),f),f+=65535,p+=65535,t-=65535;k[f++]=1;k[f++]=t&255;k[f++]=t>>8&255;k[f++]=~t&255;k[f++]=(~t&65535)>>8&255;k.set(d.subarray(p),f);f+=d.length-p;t=1;for(r=p=0;r<d.length;++r)t=(t+(d[r]&255))%65521,p=(p+t)%65521;d=p<<16|t;k[f++]=d>>24&255;k[f++]=d>>16&255;k[f++]=d>>8&255;k[f++]=d&255;d=new Uint8Array(c.length+36+h.length+k.length);f=0;d.set(c,f);f+=c.length;b("IHDR",h,d,f);f+=12+h.length;b("IDATA",k,d,f);f+=
12+k.length;b("IEND",new Uint8Array(0),d,f);return z(d,"image/png",e)}}(),x=function(){function a(){this.fontSizeScale=1;this.fontWeight="normal";this.fontSize=0;this.textMatrix=c;this.fontMatrix=e;this.wordSpacing=this.charSpacing=this.lineY=this.lineX=this.y=this.x=this.leading=0;this.textHScale=1;this.textRise=0;this.strokeColor=this.fillColor="#000000";this.lineWidth=this.strokeAlpha=this.fillAlpha=1;this.lineCap=this.lineJoin="";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=
[];this.clipId="";this.pendingClip=!1;this.maskId=""}a.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(a,b){this.x=a;this.y=b}};return a}();d=function(){function a(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","svg:svg");c.setAttributeNS(null,"version","1.1");c.setAttributeNS(null,"width",a+"px");c.setAttributeNS(null,"height",b+"px");c.setAttributeNS(null,"viewBox","0 0 "+a+" "+b);return c}function b(a){if(a===(a|0))return a.toString();a=a.toFixed(10);
var b=a.length-1;if("0"!==a[b])return a;do b--;while("0"===a[b]);return a.substr(0,"."===a[b]?b:b+1)}function d(a){if(0===a[4]&&0===a[5]){if(0===a[1]&&0===a[2])return 1===a[0]&&1===a[3]?"":"scale("+b(a[0])+" "+b(a[3])+")";if(a[0]===a[3]&&a[1]===-a[2])return"rotate("+b(180*Math.acos(a[0])/Math.PI)+")"}else if(1===a[0]&&0===a[1]&&0===a[2]&&1===a[3])return"translate("+b(a[4])+" "+b(a[5])+")";return"matrix("+b(a[0])+" "+b(a[1])+" "+b(a[2])+" "+b(a[3])+" "+b(a[4])+" "+b(a[5])+")"}function k(a,b,d){this.current=
new x;this.transformMatrix=c;this.transformStack=[];this.extraStack=[];this.commonObjs=a;this.objs=b;this.embedFonts=this.pendingEOFill=!1;this.embeddedFonts=Object.create(null);this.cssStyle=null;this.forceDataSchema=!!d}var l=["butt","round","square"],u=["miter","round","bevel"],E=0,K=0;k.prototype={save:function(){this.transformStack.push(this.transformMatrix);var a=this.current;this.extraStack.push(a);this.current=a.clone()},restore:function(){this.transformMatrix=this.transformStack.pop();this.current=
this.extraStack.pop();this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,"transform",d(this.transformMatrix));this.pgrp.appendChild(this.tgrp)},group:function(a){this.save();this.executeOpTree(a);this.restore()},loadDependencies:function(a){var b=a.fnArray,c=b.length;a=a.argsArray;for(var d=this,e=0;e<c;e++)if(f.dependency===b[e])for(var g=a[e],h=0,k=g.length;h<k;h++){var l=g[h];var p="g_"===l.substring(0,2)?new Promise(function(a){d.commonObjs.get(l,
a)}):new Promise(function(a){d.objs.get(l,a)});this.current.dependencies.push(p)}return Promise.all(this.current.dependencies)},transform:function(a,b,c,e,f,k){this.transformMatrix=h.transform(this.transformMatrix,[a,b,c,e,f,k]);this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,"transform",d(this.transformMatrix))},getSVG:function(b,e){this.svg=a(e.width,e.height);this.viewport=e;return this.loadDependencies(b).then(function(){this.transformMatrix=
c;this.pgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.pgrp.setAttributeNS(null,"transform",d(e.transform));this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,"transform",d(this.transformMatrix));this.defs=document.createElementNS("http://www.w3.org/2000/svg","svg:defs");this.pgrp.appendChild(this.defs);this.pgrp.appendChild(this.tgrp);this.svg.appendChild(this.pgrp);var a=this.convertOpList(b);this.executeOpTree(a);return this.svg}.bind(this))},
convertOpList:function(a){var b=a.argsArray,c=a.fnArray,d=c.length,e=[];a=[];for(var g in f)e[f[g]]=g;for(g=0;g<d;g++){var h=c[g];a.push({fnId:h,fn:e[h],args:b[g]})}b=[];c=[];d=a.length;for(e=0;e<d;e++)"save"===a[e].fn?(b.push({fnId:92,fn:"group",items:[]}),c.push(b),b=b[b.length-1].items):"restore"===a[e].fn?b=c.pop():b.push(a[e]);return b},executeOpTree:function(a){for(var b=a.length,c=0;c<b;c++){var d=a[c].fn,e=a[c].args;switch(a[c].fnId|0){case f.beginText:this.beginText();break;case f.setLeading:this.setLeading(e);
break;case f.setLeadingMoveText:this.setLeadingMoveText(e[0],e[1]);break;case f.setFont:this.setFont(e);break;case f.showText:this.showText(e[0]);break;case f.showSpacedText:this.showText(e[0]);break;case f.endText:this.endText();break;case f.moveText:this.moveText(e[0],e[1]);break;case f.setCharSpacing:this.setCharSpacing(e[0]);break;case f.setWordSpacing:this.setWordSpacing(e[0]);break;case f.setHScale:this.setHScale(e[0]);break;case f.setTextMatrix:this.setTextMatrix(e[0],e[1],e[2],e[3],e[4],e[5]);
break;case f.setLineWidth:this.setLineWidth(e[0]);break;case f.setLineJoin:this.setLineJoin(e[0]);break;case f.setLineCap:this.setLineCap(e[0]);break;case f.setMiterLimit:this.setMiterLimit(e[0]);break;case f.setFillRGBColor:this.setFillRGBColor(e[0],e[1],e[2]);break;case f.setStrokeRGBColor:this.setStrokeRGBColor(e[0],e[1],e[2]);break;case f.setDash:this.setDash(e[0],e[1]);break;case f.setGState:this.setGState(e[0]);break;case f.fill:this.fill();break;case f.eoFill:this.eoFill();break;case f.stroke:this.stroke();
break;case f.fillStroke:this.fillStroke();break;case f.eoFillStroke:this.eoFillStroke();break;case f.clip:this.clip("nonzero");break;case f.eoClip:this.clip("evenodd");break;case f.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case f.paintJpegXObject:this.paintJpegXObject(e[0],e[1],e[2]);break;case f.paintImageXObject:this.paintImageXObject(e[0]);break;case f.paintInlineImageXObject:this.paintInlineImageXObject(e[0]);break;case f.paintImageMaskXObject:this.paintImageMaskXObject(e[0]);
break;case f.paintFormXObjectBegin:this.paintFormXObjectBegin(e[0],e[1]);break;case f.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case f.closePath:this.closePath();break;case f.closeStroke:this.closeStroke();break;case f.closeFillStroke:this.closeFillStroke();break;case f.nextLine:this.nextLine();break;case f.transform:this.transform(e[0],e[1],e[2],e[3],e[4],e[5]);break;case f.constructPath:this.constructPath(e[0],e[1]);break;case f.endPath:this.endPath();break;case 92:this.group(a[c].items);
break;default:y("Unimplemented method "+d)}}},setWordSpacing:function(a){this.current.wordSpacing=a},setCharSpacing:function(a){this.current.charSpacing=a},nextLine:function(){this.moveText(0,this.current.leading)},setTextMatrix:function(a,c,d,e,f,h){var g=this.current;this.current.textMatrix=this.current.lineMatrix=[a,c,d,e,f,h];this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;g.xcoords=[];g.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");g.tspan.setAttributeNS(null,
"font-family",g.fontFamily);g.tspan.setAttributeNS(null,"font-size",b(g.fontSize)+"px");g.tspan.setAttributeNS(null,"y",b(-g.y));g.txtElement=document.createElementNS("http://www.w3.org/2000/svg","svg:text");g.txtElement.appendChild(g.tspan)},beginText:function(){this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;this.current.textMatrix=c;this.current.lineMatrix=c;this.current.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");this.current.txtElement=document.createElementNS("http://www.w3.org/2000/svg",
"svg:text");this.current.txtgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.current.xcoords=[]},moveText:function(a,c){var d=this.current;this.current.x=this.current.lineX+=a;this.current.y=this.current.lineY+=c;d.xcoords=[];d.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");d.tspan.setAttributeNS(null,"font-family",d.fontFamily);d.tspan.setAttributeNS(null,"font-size",b(d.fontSize)+"px");d.tspan.setAttributeNS(null,"y",b(-d.y))},showText:function(a){var c=
this.current,e=c.fontSize;if(0!==e){var f=c.charSpacing,g=c.wordSpacing,h=c.fontDirection,k=c.textHScale*h,l=a.length,p=c.font.vertical,t=e*c.fontMatrix[0],r=0,u;for(u=0;u<l;++u){var z=a[u];if(null===z)r+=h*g;else if(q(z))r+=-z*e*.001;else{c.xcoords.push(c.x+r*k);var x=z.fontChar;r+=z.width*t+f*h;c.tspan.textContent+=x}}p?c.y-=r*k:c.x+=r*k;c.tspan.setAttributeNS(null,"x",c.xcoords.map(b).join(" "));c.tspan.setAttributeNS(null,"y",b(-c.y));c.tspan.setAttributeNS(null,"font-family",c.fontFamily);c.tspan.setAttributeNS(null,
"font-size",b(c.fontSize)+"px");"normal"!==c.fontStyle&&c.tspan.setAttributeNS(null,"font-style",c.fontStyle);"normal"!==c.fontWeight&&c.tspan.setAttributeNS(null,"font-weight",c.fontWeight);"#000000"!==c.fillColor&&c.tspan.setAttributeNS(null,"fill",c.fillColor);c.txtElement.setAttributeNS(null,"transform",d(c.textMatrix)+" scale(1, -1)");c.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve");c.txtElement.appendChild(c.tspan);c.txtgrp.appendChild(c.txtElement);
this.tgrp.appendChild(c.txtElement)}},setLeadingMoveText:function(a,b){this.setLeading(-b);this.moveText(a,b)},addFontStyle:function(a){this.cssStyle||(this.cssStyle=document.createElementNS("http://www.w3.org/2000/svg","svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var b=z(a.data,a.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'+a.loadedName+'"; src: url('+b+"); }\n"},setFont:function(a){var c=this.current,
d=this.commonObjs.get(a[0]);a=a[1];this.current.font=d;this.embedFonts&&d.data&&!this.embeddedFonts[d.loadedName]&&(this.addFontStyle(d),this.embeddedFonts[d.loadedName]=d);c.fontMatrix=d.fontMatrix?d.fontMatrix:e;var f=d.black?d.bold?"bolder":"bold":d.bold?"bold":"normal",g=d.italic?"italic":"normal";0>a?(a=-a,c.fontDirection=-1):c.fontDirection=1;c.fontSize=a;c.fontFamily=d.loadedName;c.fontWeight=f;c.fontStyle=g;c.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");c.tspan.setAttributeNS(null,
"y",b(-c.y));c.xcoords=[]},endText:function(){this.current.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp);this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,"transform",d(this.transformMatrix))},setLineWidth:function(a){this.current.lineWidth=a},setLineCap:function(a){this.current.lineCap=l[a]},setLineJoin:function(a){this.current.lineJoin=u[a]},setMiterLimit:function(a){this.current.miterLimit=
a},setStrokeRGBColor:function(a,b,c){a=h.makeCssRgb(a,b,c);this.current.strokeColor=a},setFillRGBColor:function(a,b,c){a=h.makeCssRgb(a,b,c);this.current.fillColor=a;this.current.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");this.current.xcoords=[]},setDash:function(a,b){this.current.dashArray=a;this.current.dashPhase=b},constructPath:function(a,c){var d=this.current,e=d.x,g=d.y;d.path=document.createElementNS("http://www.w3.org/2000/svg","svg:path");for(var h=[],k=a.length,
l=0,m=0;l<k;l++)switch(a[l]|0){case f.rectangle:e=c[m++];g=c[m++];var p=c[m++],t=c[m++];p=e+p;t=g+t;h.push("M",b(e),b(g),"L",b(p),b(g),"L",b(p),b(t),"L",b(e),b(t),"Z");break;case f.moveTo:e=c[m++];g=c[m++];h.push("M",b(e),b(g));break;case f.lineTo:e=c[m++];g=c[m++];h.push("L",b(e),b(g));break;case f.curveTo:e=c[m+4];g=c[m+5];h.push("C",b(c[m]),b(c[m+1]),b(c[m+2]),b(c[m+3]),b(e),b(g));m+=6;break;case f.curveTo2:e=c[m+2];g=c[m+3];h.push("C",b(e),b(g),b(c[m]),b(c[m+1]),b(c[m+2]),b(c[m+3]));m+=4;break;
case f.curveTo3:e=c[m+2];g=c[m+3];h.push("C",b(c[m]),b(c[m+1]),b(e),b(g),b(e),b(g));m+=4;break;case f.closePath:h.push("Z")}d.path.setAttributeNS(null,"d",h.join(" "));d.path.setAttributeNS(null,"stroke-miterlimit",b(d.miterLimit));d.path.setAttributeNS(null,"stroke-linecap",d.lineCap);d.path.setAttributeNS(null,"stroke-linejoin",d.lineJoin);d.path.setAttributeNS(null,"stroke-width",b(d.lineWidth)+"px");d.path.setAttributeNS(null,"stroke-dasharray",d.dashArray.map(b).join(" "));d.path.setAttributeNS(null,
"stroke-dashoffset",b(d.dashPhase)+"px");d.path.setAttributeNS(null,"fill","none");this.tgrp.appendChild(d.path);d.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp);d.element=d.path;d.setCurrentPoint(e,g)},endPath:function(){this.current.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp);this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,
"transform",d(this.transformMatrix))},clip:function(a){var b=this.current;b.clipId="clippath"+E;E++;this.clippath=document.createElementNS("http://www.w3.org/2000/svg","svg:clipPath");this.clippath.setAttributeNS(null,"id",b.clipId);var c=b.element.cloneNode();"evenodd"===a?c.setAttributeNS(null,"clip-rule","evenodd"):c.setAttributeNS(null,"clip-rule","nonzero");this.clippath.setAttributeNS(null,"transform",d(this.transformMatrix));this.clippath.appendChild(c);this.defs.appendChild(this.clippath);
b.pendingClip=!0;this.cgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.cgrp.setAttributeNS(null,"clip-path","url(#"+b.clipId+")");this.pgrp.appendChild(this.cgrp)},closePath:function(){var a=this.current,b=a.path.getAttributeNS(null,"d");a.path.setAttributeNS(null,"d",b+"Z")},setLeading:function(a){this.current.leading=-a},setTextRise:function(a){this.current.textRise=a},setHScale:function(a){this.current.textHScale=a/100},setGState:function(a){for(var b=0,c=a.length;b<c;b++){var d=
a[b],e=d[1];switch(d[0]){case "LW":this.setLineWidth(e);break;case "LC":this.setLineCap(e);break;case "LJ":this.setLineJoin(e);break;case "ML":this.setMiterLimit(e);break;case "D":this.setDash(e[0],e[1]);break;case "Font":this.setFont(e)}}},fill:function(){var a=this.current;a.element.setAttributeNS(null,"fill",a.fillColor)},stroke:function(){var a=this.current;a.element.setAttributeNS(null,"stroke",a.strokeColor);a.element.setAttributeNS(null,"fill","none")},eoFill:function(){var a=this.current;
a.element.setAttributeNS(null,"fill",a.fillColor);a.element.setAttributeNS(null,"fill-rule","evenodd")},fillStroke:function(){this.stroke();this.fill()},eoFillStroke:function(){this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fillStroke()},closeStroke:function(){this.closePath();this.stroke()},closeFillStroke:function(){this.closePath();this.fillStroke()},paintSolidColorImageMask:function(){var a=this.current,b=document.createElementNS("http://www.w3.org/2000/svg","svg:rect");
b.setAttributeNS(null,"x","0");b.setAttributeNS(null,"y","0");b.setAttributeNS(null,"width","1px");b.setAttributeNS(null,"height","1px");b.setAttributeNS(null,"fill",a.fillColor);this.tgrp.appendChild(b)},paintJpegXObject:function(a,c,d){var e=this.current;a=this.objs.get(a);var f=document.createElementNS("http://www.w3.org/2000/svg","svg:image");f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a.src);f.setAttributeNS(null,"width",a.width+"px");f.setAttributeNS(null,"height",a.height+
"px");f.setAttributeNS(null,"x","0");f.setAttributeNS(null,"y",b(-d));f.setAttributeNS(null,"transform","scale("+b(1/c)+" "+b(-1/d)+")");this.tgrp.appendChild(f);e.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp)},paintImageXObject:function(a){(a=this.objs.get(a))?this.paintInlineImageXObject(a):y("Dependent image isn't ready yet")},paintInlineImageXObject:function(a,c){var d=this.current,e=a.width,f=a.height;a=p(a,this.forceDataSchema);
var g=document.createElementNS("http://www.w3.org/2000/svg","svg:rect");g.setAttributeNS(null,"x","0");g.setAttributeNS(null,"y","0");g.setAttributeNS(null,"width",b(e));g.setAttributeNS(null,"height",b(f));d.element=g;this.clip("nonzero");g=document.createElementNS("http://www.w3.org/2000/svg","svg:image");g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);g.setAttributeNS(null,"x","0");g.setAttributeNS(null,"y",b(-f));g.setAttributeNS(null,"width",b(e)+"px");g.setAttributeNS(null,"height",
b(f)+"px");g.setAttributeNS(null,"transform","scale("+b(1/e)+" "+b(-1/f)+")");c?c.appendChild(g):this.tgrp.appendChild(g);d.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp)},paintImageMaskXObject:function(a){var c=this.current,d=a.width,e=a.height,f=c.fillColor;c.maskId="mask"+K++;var g=document.createElementNS("http://www.w3.org/2000/svg","svg:mask");g.setAttributeNS(null,"id",c.maskId);var h=document.createElementNS("http://www.w3.org/2000/svg",
"svg:rect");h.setAttributeNS(null,"x","0");h.setAttributeNS(null,"y","0");h.setAttributeNS(null,"width",b(d));h.setAttributeNS(null,"height",b(e));h.setAttributeNS(null,"fill",f);h.setAttributeNS(null,"mask","url(#"+c.maskId+")");this.defs.appendChild(g);this.tgrp.appendChild(h);this.paintInlineImageXObject(a,g)},paintFormXObjectBegin:function(a,c){this.save();r(a)&&6===a.length&&this.transform(a[0],a[1],a[2],a[3],a[4],a[5]);if(r(c)&&4===c.length){a=c[2]-c[0];var d=c[3]-c[1],e=document.createElementNS("http://www.w3.org/2000/svg",
"svg:rect");e.setAttributeNS(null,"x",c[0]);e.setAttributeNS(null,"y",c[1]);e.setAttributeNS(null,"width",b(a));e.setAttributeNS(null,"height",b(d));this.current.element=e;this.clip("nonzero");this.endPath()}},paintFormXObjectEnd:function(){this.restore()}};return k}();b.SVGGraphics=d});(function(b,d){d(b.pdfjsDisplayAnnotationLayer={},b.pdfjsSharedUtil,b.pdfjsDisplayDOMUtils)})(this,function(b,d,f){function c(){}var a=d.AnnotationBorderStyleType,e=d.AnnotationType,h=d.Util,k=f.addLinkAttributes,
r=f.LinkTarget,y=f.getFilenameFromUrl,z=d.warn,p=f.CustomStyle,x=f.getDefaultSetting;c.prototype={create:function(a){switch(a.data.annotationType){case e.LINK:return new B(a);case e.TEXT:return new C(a);case e.WIDGET:return new F(a);case e.POPUP:return new H(a);case e.HIGHLIGHT:return new E(a);case e.UNDERLINE:return new K(a);case e.SQUIGGLY:return new g(a);case e.STRIKEOUT:return new m(a);case e.FILEATTACHMENT:return new A(a);default:return new t(a)}}};var t=function(){function b(a,b){this.isRenderable=
b||!1;this.data=a.data;this.layer=a.layer;this.page=a.page;this.viewport=a.viewport;this.linkService=a.linkService;this.downloadManager=a.downloadManager;this.imageResourcesPath=a.imageResourcesPath;b&&(this.container=this._createContainer())}b.prototype={_createContainer:function(){var b=this.data,c=this.page,d=this.viewport,e=document.createElement("section"),f=b.rect[2]-b.rect[0],g=b.rect[3]-b.rect[1];e.setAttribute("data-annotation-id",b.id);c=h.normalizeRect([b.rect[0],c.view[3]-b.rect[1]+c.view[1],
b.rect[2],c.view[3]-b.rect[3]+c.view[1]]);p.setProp("transform",e,"matrix("+d.transform.join(",")+")");p.setProp("transformOrigin",e,-c[0]+"px "+-c[1]+"px");if(0<b.borderStyle.width){e.style.borderWidth=b.borderStyle.width+"px";b.borderStyle.style!==a.UNDERLINE&&(f-=2*b.borderStyle.width,g-=2*b.borderStyle.width);d=b.borderStyle.horizontalCornerRadius;var k=b.borderStyle.verticalCornerRadius;(0<d||0<k)&&p.setProp("borderRadius",e,d+"px / "+k+"px");switch(b.borderStyle.style){case a.SOLID:e.style.borderStyle=
"solid";break;case a.DASHED:e.style.borderStyle="dashed";break;case a.BEVELED:z("Unimplemented border style: beveled");break;case a.INSET:z("Unimplemented border style: inset");break;case a.UNDERLINE:e.style.borderBottomStyle="solid"}b.color?e.style.borderColor=h.makeCssRgb(b.color[0]|0,b.color[1]|0,b.color[2]|0):e.style.borderWidth=0}e.style.left=c[0]+"px";e.style.top=c[1]+"px";e.style.width=f+"px";e.style.height=g+"px";return e},_createPopup:function(a,b,c){b||(b=document.createElement("div"),b.style.height=
a.style.height,b.style.width=a.style.width,a.appendChild(b));b=(new G({container:a,trigger:b,color:c.color,title:c.title,contents:c.contents,hideWrapper:!0})).render();b.style.left=a.style.width;a.appendChild(b)},render:function(){throw Error("Abstract method AnnotationElement.render called");}};return b}(),B=function(){function a(a){t.call(this,a,!0)}h.inherit(a,t,{render:function(){this.container.className="linkAnnotation";var a=document.createElement("a");k(a,{url:this.data.url,target:this.data.newWindow?
r.BLANK:void 0});this.data.url||(this.data.action?this._bindNamedAction(a,this.data.action):this._bindLink(a,this.data.dest||null));this.container.appendChild(a);return this.container},_bindLink:function(a,b){var c=this;a.href=this.linkService.getDestinationHash(b);a.onclick=function(){b&&c.linkService.navigateTo(b);return!1};b&&(a.className="internalLink")},_bindNamedAction:function(a,b){var c=this;a.href=this.linkService.getAnchorUrl("");a.onclick=function(){c.linkService.executeNamedAction(b);
return!1};a.className="internalLink"}});return a}(),C=function(){function a(a){t.call(this,a,!!(a.data.hasPopup||a.data.title||a.data.contents))}h.inherit(a,t,{render:function(){this.container.className="textAnnotation";var a=document.createElement("img");a.style.height=this.container.style.height;a.style.width=this.container.style.width;a.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";a.alt="[{{type}} Annotation]";a.dataset.l10nId="text_annotation_type";a.dataset.l10nArgs=
JSON.stringify({type:this.data.name});this.data.hasPopup||this._createPopup(this.container,a,this.data);this.container.appendChild(a);return this.container}});return a}(),F=function(){function a(a){t.call(this,a,!a.data.hasAppearance&&!!a.data.fieldValue)}h.inherit(a,t,{render:function(){var a=document.createElement("div");a.textContent=this.data.fieldValue;a.style.textAlign=["left","center","right"][this.data.textAlignment];a.style.verticalAlign="middle";a.style.display="table-cell";var b=this.data.fontRefName?
this.page.commonObjs.getData(this.data.fontRefName):null;this._setTextStyle(a,b);this.container.appendChild(a);return this.container},_setTextStyle:function(a,b){a=a.style;a.fontSize=this.data.fontSize+"px";a.direction=0>this.data.fontDirection?"rtl":"ltr";b&&(a.fontWeight=b.black?b.bold?"900":"bold":b.bold?"bold":"normal",a.fontStyle=b.italic?"italic":"normal",a.fontFamily=(b.loadedName?'"'+b.loadedName+'", ':"")+(b.fallbackName||"Helvetica, sans-serif"))}});return a}(),H=function(){function a(a){t.call(this,
a,!(!a.data.title&&!a.data.contents))}h.inherit(a,t,{render:function(){this.container.className="popupAnnotation";var a=this.layer.querySelector('[data-annotation-id="'+this.data.parentId+'"]');if(!a)return this.container;var b=new G({container:this.container,trigger:a,color:this.data.color,title:this.data.title,contents:this.data.contents}),c=parseFloat(a.style.left),d=parseFloat(a.style.width);p.setProp("transformOrigin",this.container,-(c+d)+"px -"+a.style.top);this.container.style.left=c+d+"px";
this.container.appendChild(b.render());return this.container}});return a}(),G=function(){function a(a){this.container=a.container;this.trigger=a.trigger;this.color=a.color;this.title=a.title;this.contents=a.contents;this.hideWrapper=a.hideWrapper||!1;this.pinned=!1}a.prototype={render:function(){var a=document.createElement("div");a.className="popupWrapper";this.hideElement=this.hideWrapper?a:this.container;this.hideElement.setAttribute("hidden",!0);var b=document.createElement("div");b.className=
"popup";var c=this.color;c&&(b.style.backgroundColor=h.makeCssRgb(.7*(255-c[0])+c[0]|0,.7*(255-c[1])+c[1]|0,.7*(255-c[2])+c[2]|0));c=this._formatContents(this.contents);var d=document.createElement("h1");d.textContent=this.title;this.trigger.addEventListener("click",this._toggle.bind(this));this.trigger.addEventListener("mouseover",this._show.bind(this,!1));this.trigger.addEventListener("mouseout",this._hide.bind(this,!1));b.addEventListener("click",this._hide.bind(this,!0));b.appendChild(d);b.appendChild(c);
a.appendChild(b);return a},_formatContents:function(a){var b=document.createElement("p");a=a.split(/(?:\r\n?|\n)/);for(var c=0,d=a.length;c<d;++c)b.appendChild(document.createTextNode(a[c])),c<d-1&&b.appendChild(document.createElement("br"));return b},_toggle:function(){this.pinned?this._hide(!0):this._show(!0)},_show:function(a){a&&(this.pinned=!0);this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)},_hide:function(a){a&&(this.pinned=
!1);this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),--this.container.style.zIndex)}};return a}(),E=function(){function a(a){t.call(this,a,!!(a.data.hasPopup||a.data.title||a.data.contents))}h.inherit(a,t,{render:function(){this.container.className="highlightAnnotation";this.data.hasPopup||this._createPopup(this.container,null,this.data);return this.container}});return a}(),K=function(){function a(a){t.call(this,a,!!(a.data.hasPopup||a.data.title||
a.data.contents))}h.inherit(a,t,{render:function(){this.container.className="underlineAnnotation";this.data.hasPopup||this._createPopup(this.container,null,this.data);return this.container}});return a}(),g=function(){function a(a){t.call(this,a,!!(a.data.hasPopup||a.data.title||a.data.contents))}h.inherit(a,t,{render:function(){this.container.className="squigglyAnnotation";this.data.hasPopup||this._createPopup(this.container,null,this.data);return this.container}});return a}(),m=function(){function a(a){t.call(this,
a,!!(a.data.hasPopup||a.data.title||a.data.contents))}h.inherit(a,t,{render:function(){this.container.className="strikeoutAnnotation";this.data.hasPopup||this._createPopup(this.container,null,this.data);return this.container}});return a}(),A=function(){function a(a){t.call(this,a,!0);this.filename=y(a.data.file.filename);this.content=a.data.file.content}h.inherit(a,t,{render:function(){this.container.className="fileAttachmentAnnotation";var a=document.createElement("div");a.style.height=this.container.style.height;
a.style.width=this.container.style.width;a.addEventListener("dblclick",this._download.bind(this));this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,a,this.data);this.container.appendChild(a);return this.container},_download:function(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):z("Download cannot be started due to unavailable download manager")}});return a}();d=function(){return{render:function(a){for(var b=new c,
d=0,e=a.annotations.length;d<e;d++){var f=a.annotations[d];f&&(f={data:f,layer:a.div,page:a.page,viewport:a.viewport,linkService:a.linkService,downloadManager:a.downloadManager,imageResourcesPath:a.imageResourcesPath||x("imageResourcesPath")},f=b.create(f),f.isRenderable&&a.div.appendChild(f.render()))}},update:function(a){for(var b=0,c=a.annotations.length;b<c;b++){var d=a.div.querySelector('[data-annotation-id="'+a.annotations[b].id+'"]');d&&p.setProp("transform",d,"matrix("+a.viewport.transform.join(",")+
")")}a.div.removeAttribute("hidden")}}}();b.AnnotationLayer=d});(function(b,d){d(b.pdfjsDisplayTextLayer={},b.pdfjsSharedUtil,b.pdfjsDisplayDOMUtils)})(this,function(b,d,f){var c=d.Util,a=d.createPromiseCapability,e=f.CustomStyle,h=f.getDefaultSetting;d=function(){function b(a,b,d,e){e=e[d.fontName];var f=document.createElement("div");a.push(f);if(k.test(d.str)){var l=c.transform(b.transform,d.transform);a=Math.atan2(l[1],l[0]);e.vertical&&(a+=Math.PI/2);var p=Math.sqrt(l[2]*l[2]+l[3]*l[3]),t=p;e.ascent?
t*=e.ascent:e.descent&&(t*=1+e.descent);if(0===a){var r=l[4];l=l[5]-t}else r=l[4]+t*Math.sin(a),l=l[5]-t*Math.cos(a);f.style.left=r+"px";f.style.top=l+"px";f.style.fontSize=p+"px";f.style.fontFamily=e.fontFamily;f.textContent=d.str;h("pdfBug")&&(f.dataset.fontName=d.fontName);0!==a&&(f.dataset.angle=180/Math.PI*a);1<d.str.length&&(f.dataset.canvasWidth=e.vertical?d.height*b.scale:d.width*b.scale)}else f.dataset.isWhitespace=!0}function d(a){if(!a._canceled){var b=a._container,c=a._textDivs;a=a._capability;
var d=c.length;if(!(1E5<d)){var f=document.createElement("canvas");f.mozOpaque=!0;f=f.getContext("2d",{alpha:!1});for(var h,k,l=0;l<d;l++){var p=c[l];if(void 0===p.dataset.isWhitespace){var r=p.style.fontSize,g=p.style.fontFamily;if(r!==h||g!==k)f.font=r+" "+g,h=r,k=g;r=f.measureText(p.textContent).width;0<r&&(b.appendChild(p),r=void 0!==p.dataset.canvasWidth?"scaleX("+p.dataset.canvasWidth/r+")":"",(g=p.dataset.angle)&&(r="rotate("+g+"deg) "+r),r&&e.setProp("transform",p,r))}}}a.resolve()}}function f(b,
c,d,e){this._textContent=b;this._container=c;this._viewport=d;this._textDivs=e=e||[];this._canceled=!1;this._capability=a();this._renderTimer=null}var k=/\S/;f.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0;null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null);this._capability.reject("canceled")},_render:function(a){for(var c=this._textContent.items,e=this._textContent.styles,f=this._textDivs,h=this._viewport,k=0,l=c.length;k<
l;k++)b(f,h,c[k],e);if(a){var p=this;this._renderTimer=setTimeout(function(){d(p);p._renderTimer=null},a)}else d(this)}};return function(a){var b=new f(a.textContent,a.container,a.viewport,a.textDivs);b._render(a.timeout);return b}}();b.renderTextLayer=d});(function(b,d){d(b.pdfjsDisplayWebGL={},b.pdfjsSharedUtil,b.pdfjsDisplayDOMUtils)})(this,function(b,d,f){var c=d.shadow,a=f.getDefaultSetting;d=function(){function b(a,b,c){c=a.createShader(c);a.shaderSource(c,b);a.compileShader(c);if(!a.getShaderParameter(c,
a.COMPILE_STATUS))throw a=a.getShaderInfoLog(c),Error("Error during shader compilation: "+a);return c}function d(a,b){for(var c=a.createProgram(),d=0,e=b.length;d<e;++d)a.attachShader(c,b[d]);a.linkProgram(c);if(!a.getProgramParameter(c,a.LINK_STATUS))throw a=a.getProgramInfoLog(c),Error("Error during program linking: "+a);return c}function e(a,b,c){a.activeTexture(c);c=a.createTexture();a.bindTexture(a.TEXTURE_2D,c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b);return c}function f(){h||(k=document.createElement("canvas"),h=k.getContext("webgl",{premultipliedalpha:!1}))}var h,k,p=null,x=null;return{get isEnabled(){if(a("disableWebGL"))return!1;var b=!1;try{f(),b=!!h}catch(B){}return c(this,"isEnabled",b)},composeSMask:function(a,c,l){var r=a.width,
t=a.height;if(!p){f();var q=k;k=null;var u=h;h=null;var z=b(u,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",
u.VERTEX_SHADER),g=b(u,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",
u.FRAGMENT_SHADER),m=d(u,[z,g]);u.useProgram(m);z={};z.gl=u;z.canvas=q;z.resolutionLocation=u.getUniformLocation(m,"u_resolution");z.positionLocation=u.getAttribLocation(m,"a_position");z.backdropLocation=u.getUniformLocation(m,"u_backdrop");z.subtypeLocation=u.getUniformLocation(m,"u_subtype");q=u.getAttribLocation(m,"a_texCoord");g=u.getUniformLocation(m,"u_image");m=u.getUniformLocation(m,"u_mask");var x=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,x);u.bufferData(u.ARRAY_BUFFER,new Float32Array([0,
0,1,0,0,1,0,1,1,0,1,1]),u.STATIC_DRAW);u.enableVertexAttribArray(q);u.vertexAttribPointer(q,2,u.FLOAT,!1,0,0);u.uniform1i(g,0);u.uniform1i(m,1);p=z}u=p;z=u.canvas;q=u.gl;z.width=r;z.height=t;q.viewport(0,0,q.drawingBufferWidth,q.drawingBufferHeight);q.uniform2f(u.resolutionLocation,r,t);l.backdrop?q.uniform4f(u.resolutionLocation,l.backdrop[0],l.backdrop[1],l.backdrop[2],1):q.uniform4f(u.resolutionLocation,0,0,0,0);q.uniform1i(u.subtypeLocation,"Luminosity"===l.subtype?1:0);a=e(q,a,q.TEXTURE0);c=
e(q,c,q.TEXTURE1);l=q.createBuffer();q.bindBuffer(q.ARRAY_BUFFER,l);q.bufferData(q.ARRAY_BUFFER,new Float32Array([0,0,r,0,0,t,0,t,r,0,r,t]),q.STATIC_DRAW);q.enableVertexAttribArray(u.positionLocation);q.vertexAttribPointer(u.positionLocation,2,q.FLOAT,!1,0,0);q.clearColor(0,0,0,0);q.enable(q.BLEND);q.blendFunc(q.ONE,q.ONE_MINUS_SRC_ALPHA);q.clear(q.COLOR_BUFFER_BIT);q.drawArrays(q.TRIANGLES,0,6);q.flush();q.deleteTexture(a);q.deleteTexture(c);q.deleteBuffer(l);return z},drawFigures:function(a,c,e,
l,p){if(!x){f();var r=k;k=null;var t=h;h=null;var q=b(t,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",
t.VERTEX_SHADER),g=b(t,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",t.FRAGMENT_SHADER);q=d(t,[q,
g]);t.useProgram(q);g={};g.gl=t;g.canvas=r;g.resolutionLocation=t.getUniformLocation(q,"u_resolution");g.scaleLocation=t.getUniformLocation(q,"u_scale");g.offsetLocation=t.getUniformLocation(q,"u_offset");g.positionLocation=t.getAttribLocation(q,"a_position");g.colorLocation=t.getAttribLocation(q,"a_color");x=g}r=x;t=r.canvas;q=r.gl;t.width=a;t.height=c;q.viewport(0,0,q.drawingBufferWidth,q.drawingBufferHeight);q.uniform2f(r.resolutionLocation,a,c);a=0;var m;var u=0;for(m=l.length;u<m;u++)switch(l[u].type){case "lattice":var z=
l[u].coords.length/l[u].verticesPerRow|0;a+=(z-1)*(l[u].verticesPerRow-1)*6;break;case "triangles":a+=l[u].coords.length}g=new Float32Array(2*a);c=new Uint8Array(3*a);var y=p.coords,C=p.colors,B=0,H=0;u=0;for(m=l.length;u<m;u++){z=l[u];var F=z.coords,U=z.colors;switch(z.type){case "lattice":var X=z.verticesPerRow;z=F.length/X|0;for(var da=1;da<z;da++)for(var R=da*X+1,Z=1;Z<X;Z++,R++)g[B]=y[F[R-X-1]],g[B+1]=y[F[R-X-1]+1],g[B+2]=y[F[R-X]],g[B+3]=y[F[R-X]+1],g[B+4]=y[F[R-1]],g[B+5]=y[F[R-1]+1],c[H]=
C[U[R-X-1]],c[H+1]=C[U[R-X-1]+1],c[H+2]=C[U[R-X-1]+2],c[H+3]=C[U[R-X]],c[H+4]=C[U[R-X]+1],c[H+5]=C[U[R-X]+2],c[H+6]=C[U[R-1]],c[H+7]=C[U[R-1]+1],c[H+8]=C[U[R-1]+2],g[B+6]=g[B+2],g[B+7]=g[B+3],g[B+8]=g[B+4],g[B+9]=g[B+5],g[B+10]=y[F[R]],g[B+11]=y[F[R]+1],c[H+9]=c[H+3],c[H+10]=c[H+4],c[H+11]=c[H+5],c[H+12]=c[H+6],c[H+13]=c[H+7],c[H+14]=c[H+8],c[H+15]=C[U[R]],c[H+16]=C[U[R]+1],c[H+17]=C[U[R]+2],B+=12,H+=18;break;case "triangles":for(z=0,X=F.length;z<X;z++)g[B]=y[F[z]],g[B+1]=y[F[z]+1],c[H]=C[U[z]],c[H+
1]=C[U[z]+1],c[H+2]=C[U[z]+2],B+=2,H+=3}}e?q.clearColor(e[0]/255,e[1]/255,e[2]/255,1):q.clearColor(0,0,0,0);q.clear(q.COLOR_BUFFER_BIT);e=q.createBuffer();q.bindBuffer(q.ARRAY_BUFFER,e);q.bufferData(q.ARRAY_BUFFER,g,q.STATIC_DRAW);q.enableVertexAttribArray(r.positionLocation);q.vertexAttribPointer(r.positionLocation,2,q.FLOAT,!1,0,0);l=q.createBuffer();q.bindBuffer(q.ARRAY_BUFFER,l);q.bufferData(q.ARRAY_BUFFER,c,q.STATIC_DRAW);q.enableVertexAttribArray(r.colorLocation);q.vertexAttribPointer(r.colorLocation,
3,q.UNSIGNED_BYTE,!1,0,0);q.uniform2f(r.scaleLocation,p.scaleX,p.scaleY);q.uniform2f(r.offsetLocation,p.offsetX,p.offsetY);q.drawArrays(q.TRIANGLES,0,a);q.flush();q.deleteBuffer(e);q.deleteBuffer(l);return t},clear:function(){p&&p.canvas&&(p.canvas.width=0,p.canvas.height=0);x&&x.canvas&&(x.canvas.width=0,x.canvas.height=0);x=p=null}}}();b.WebGLUtils=d});(function(b,d){d(b.pdfjsDisplayPatternHelper={},b.pdfjsSharedUtil,b.pdfjsDisplayWebGL)})(this,function(b,d,f){var c=d.Util,a=d.info,e=d.isArray,
h=d.error,k=f.WebGLUtils,r={RadialAxial:{fromIR:function(a){var b=a[1],c=a[2],d=a[3],e=a[4],f=a[5],h=a[6];return{type:"Pattern",getPattern:function(a){var k;"axial"===b?k=a.createLinearGradient(d[0],d[1],e[0],e[1]):"radial"===b&&(k=a.createRadialGradient(d[0],d[1],f,e[0],e[1],h));a=0;for(var l=c.length;a<l;++a){var p=c[a];k.addColorStop(p[0],p[1])}return k}}}}},y=function(){function a(a,b,c,d,e,f,h,k){var l=b.coords,p=b.colors,g=a.data;a=4*a.width;if(l[c+1]>l[d+1]){var m=c;c=d;d=m;m=f;f=h;h=m}l[d+
1]>l[e+1]&&(m=d,d=e,e=m,m=h,h=k,k=m);l[c+1]>l[d+1]&&(m=c,c=d,d=m,m=f,f=h,h=m);m=(l[c]+b.offsetX)*b.scaleX;c=(l[c+1]+b.offsetY)*b.scaleY;var q=(l[d]+b.offsetX)*b.scaleX;d=(l[d+1]+b.offsetY)*b.scaleY;var r=(l[e]+b.offsetX)*b.scaleX;b=(l[e+1]+b.offsetY)*b.scaleY;if(!(c>=b)){e=p[f];l=p[f+1];f=p[f+2];var t=p[h],u=p[h+1];h=p[h+2];var z=p[k],y=p[k+1];k=p[k+2];p=Math.round(b);for(var x,C,B,H,G,F,sa,qa,ma,ea=Math.round(c);ea<=p;ea++){ea<d?(ma=ea<c?0:c===d?1:(c-ea)/(c-d),x=m-(m-q)*ma,C=e-(e-t)*ma,B=l-(l-u)*
ma,H=f-(f-h)*ma):(ma=ea>b?1:d===b?0:(d-ea)/(d-b),x=q-(q-r)*ma,C=t-(t-z)*ma,B=u-(u-y)*ma,H=h-(h-k)*ma);ma=ea<c?0:ea>b?1:(c-ea)/(c-b);G=m-(m-r)*ma;F=e-(e-z)*ma;sa=l-(l-y)*ma;qa=f-(f-k)*ma;ma=Math.round(Math.min(x,G));for(var Ya=Math.round(Math.max(x,G)),Va=a*ea+4*ma,ub=ma;ub<=Ya;ub++)ma=(x-ub)/(x-G),ma=0>ma?0:1<ma?1:ma,g[Va++]=C-(C-F)*ma|0,g[Va++]=B-(B-sa)*ma|0,g[Va++]=H-(H-qa)*ma|0,g[Va++]=255}}}return function(b,c,d,e,f,l,q){var p=Math.floor(b[0]),r=Math.floor(b[1]),t=Math.ceil(b[2])-p;b=Math.ceil(b[3])-
r;var g=Math.min(Math.ceil(Math.abs(t*c[0]*1.1)),3E3);c=Math.min(Math.ceil(Math.abs(b*c[1]*1.1)),3E3);t/=g;b/=c;d={coords:d,colors:e,offsetX:-p,offsetY:-r,scaleX:1/t,scaleY:1/b};e=g+4;var m=c+4;if(k.isEnabled)f=k.drawFigures(g,c,l,f,d),q=q.getCanvas("mesh",e,m,!1),q.context.drawImage(f,2,2);else{q=q.getCanvas("mesh",e,m,!1);e=q.context;c=e.createImageData(g,c);if(l){var u=c.data;g=0;for(m=u.length;g<m;g+=4)u[g]=l[0],u[g+1]=l[1],u[g+2]=l[2],u[g+3]=255}for(g=0;g<f.length;g++){l=c;var z=f[g];m=d;u=z.coords;
var y=z.colors;switch(z.type){case "lattice":var x=z.verticesPerRow;var C=Math.floor(u.length/x)-1,B=x-1;for(z=0;z<C;z++)for(var H=z*x,F=0;F<B;F++,H++)a(l,m,u[H],u[H+1],u[H+x],y[H],y[H+1],y[H+x]),a(l,m,u[H+x+1],u[H+1],u[H+x],y[H+x+1],y[H+1],y[H+x]);break;case "triangles":z=0;for(x=u.length;z<x;z+=3)a(l,m,u[z],u[z+1],u[z+2],y[z],y[z+1],y[z+2]);break;default:h("illigal figure")}}e.putImageData(c,2,2)}f=q.canvas;return{canvas:f,offsetX:p-2*t,offsetY:r-2*b,scaleX:t,scaleY:b}}}();r.Mesh={fromIR:function(a){var b=
a[2],d=a[3],e=a[4],f=a[5],h=a[6],k=a[8];return{type:"Pattern",getPattern:function(a,l,p){if(p)var q=c.singularValueDecompose2dScale(a.mozCurrentTransform);else if(q=c.singularValueDecompose2dScale(l.baseTransform),h){var g=c.singularValueDecompose2dScale(h);q=[q[0]*g[0],q[1]*g[1]]}q=y(f,q,b,d,e,p?null:k,l.cachedCanvases);p||(a.setTransform.apply(a,l.baseTransform),h&&a.transform.apply(a,h));a.translate(q.offsetX,q.offsetY);a.scale(q.scaleX,q.scaleY);return a.createPattern(q.canvas,"no-repeat")}}}};
r.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};d=function(){function b(a,b,c,d,e){this.operatorList=a[2];this.matrix=a[3]||[1,0,0,1,0,0];this.bbox=a[4];this.xstep=a[5];this.ystep=a[6];this.paintType=a[7];this.tilingType=a[8];this.color=b;this.canvasGraphicsFactory=d;this.baseTransform=e;this.type="Pattern";this.ctx=c}b.prototype={createPatternCanvas:function(b){var d=this.operatorList,e=this.bbox,f=this.xstep,h=this.ystep,k=this.paintType,l=this.color,p=
this.canvasGraphicsFactory;a("TilingType: "+this.tilingType);var q=e[0],r=e[1],g=e[2],m=e[3],u=[q,r],z=[q+f,r+h],y=z[0]-u[0];z=z[1]-u[1];var Q=c.singularValueDecompose2dScale(this.matrix),ia=c.singularValueDecompose2dScale(this.baseTransform);Q=[Q[0]*ia[0],Q[1]*ia[1]];y=Math.min(Math.ceil(Math.abs(y*Q[0])),3E3);z=Math.min(Math.ceil(Math.abs(z*Q[1])),3E3);Q=b.cachedCanvases.getCanvas("pattern",y,z,!0);ia=Q.context;p=p.createCanvasGraphics(ia);p.groupLevel=b.groupLevel;this.setFillAndStrokeStyleToContext(ia,
k,l);this.setScale(y,z,f,h);this.transformToScale(p);p.transform.apply(p,[1,0,0,1,-u[0],-u[1]]);this.clipBbox(p,e,q,r,g,m);p.executeOperatorList(d);return Q.canvas},setScale:function(a,b,c,d){this.scale=[a/c,b/d]},transformToScale:function(a){var b=this.scale;a.transform.apply(a,[b[0],0,0,b[1],0,0])},scaleToContext:function(){var a=this.scale;this.ctx.scale(1/a[0],1/a[1])},clipBbox:function(a,b,c,d,f,h){b&&e(b)&&4===b.length&&(a.ctx.rect(c,d,f-c,h-d),a.clip(),a.endPath())},setFillAndStrokeStyleToContext:function(a,
b,d){switch(b){case 1:b=this.ctx;a.fillStyle=b.fillStyle;a.strokeStyle=b.strokeStyle;break;case 2:b=c.makeCssRgb(d[0],d[1],d[2]);a.fillStyle=b;a.strokeStyle=b;break;default:h("Unsupported paint type: "+b)}},getPattern:function(a,b){b=this.createPatternCanvas(b);a=this.ctx;a.setTransform.apply(a,this.baseTransform);a.transform.apply(a,this.matrix);this.scaleToContext();return a.createPattern(b,"repeat")}};return b}();b.getShadingPatternFromIR=function(a){var b=r[a[0]];b||h("Unknown IR type: "+a[0]);
return b.fromIR(a)};b.TilingPattern=d});(function(b,d){d(b.pdfjsDisplayCanvas={},b.pdfjsSharedUtil,b.pdfjsDisplayDOMUtils,b.pdfjsDisplayPatternHelper,b.pdfjsDisplayWebGL)})(this,function(b,d,f,c,a){function e(a,b){var c=document.createElement("canvas");c.width=a;c.height=b;return c}function h(a){a.mozCurrentTransform||(a._originalSave=a.save,a._originalRestore=a.restore,a._originalRotate=a.rotate,a._originalScale=a.scale,a._originalTranslate=a.translate,a._originalTransform=a.transform,a._originalSetTransform=
a.setTransform,a._transformMatrix=a._transformMatrix||[1,0,0,1,0,0],a._transformStack=[],Object.defineProperty(a,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(a,"mozCurrentTransformInverse",{get:function(){var a=this._transformMatrix,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4];a=a[5];var g=b*e-c*d,h=c*d-b*e;return[e/g,c/h,d/h,b/g,(e*f-d*a)/h,(c*f-b*a)/g]}}),a.save=function(){var a=this._transformMatrix;this._transformStack.push(a);this._transformMatrix=a.slice(0,
6);this._originalSave()},a.restore=function(){var a=this._transformStack.pop();a&&(this._transformMatrix=a,this._originalRestore())},a.translate=function(a,b){var c=this._transformMatrix;c[4]=c[0]*a+c[2]*b+c[4];c[5]=c[1]*a+c[3]*b+c[5];this._originalTranslate(a,b)},a.scale=function(a,b){var c=this._transformMatrix;c[0]*=a;c[1]*=a;c[2]*=b;c[3]*=b;this._originalScale(a,b)},a.transform=function(b,c,d,e,f,g){var h=this._transformMatrix;this._transformMatrix=[h[0]*b+h[2]*c,h[1]*b+h[3]*c,h[0]*d+h[2]*e,h[1]*
d+h[3]*e,h[0]*f+h[2]*g+h[4],h[1]*f+h[3]*g+h[5]];a._originalTransform(b,c,d,e,f,g)},a.setTransform=function(b,c,d,e,f,g){this._transformMatrix=[b,c,d,e,f,g];a._originalSetTransform(b,c,d,e,f,g)},a.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this._transformMatrix;this._transformMatrix=[d[0]*b+d[2]*c,d[1]*b+d[3]*c,d[0]*-c+d[2]*b,d[1]*-c+d[3]*b,d[4],d[5]];this._originalRotate(a)})}function k(a){var b=a.width,c=a.height,d,e=b+1,f=new Uint8Array(e*(c+1)),g=new Uint8Array([0,2,4,0,1,0,5,4,8,10,
0,8,0,2,1,0]),h=b+7&-8,k=a.data,l=new Uint8Array(h*c),m=0;a=0;for(d=k.length;a<d;a++){var p=128;for(var q=k[a];0<p;)l[m++]=q&p?0:255,p>>=1}m=k=0;0!==l[m]&&(f[0]=1,++k);for(d=1;d<b;d++)l[m]!==l[m+1]&&(f[d]=l[m]?2:1,++k),m++;0!==l[m]&&(f[d]=2,++k);for(a=1;a<c;a++){m=a*h;p=a*e;l[m-h]!==l[m]&&(f[p]=l[m]?1:8,++k);q=(l[m]?4:0)+(l[m-h]?8:0);for(d=1;d<b;d++)q=(q>>2)+(l[m+1]?4:0)+(l[m-h+1]?8:0),g[q]&&(f[p+d]=g[q],++k),m++;l[m-h]!==l[m]&&(f[p+d]=l[m]?2:4,++k);if(1E3<k)return null}m=h*(c-1);p=a*e;0!==l[m]&&
(f[p]=8,++k);for(d=1;d<b;d++)l[m]!==l[m+1]&&(f[p+d]=l[m]?4:8,++k),m++;0!==l[m]&&(f[p+d]=4,++k);if(1E3<k)return null;g=new Int32Array([0,e,-1,0,-e,0,0,0,1]);var r=[];for(a=0;k&&a<=c;a++){h=a*e;for(l=h+b;h<l&&!f[h];)h++;if(h!==l){l=[h%e,a];m=f[h];d=h;do{p=g[m];do h+=p;while(!f[h]);p=f[h];5!==p&&10!==p?(m=p,f[h]=0):(m=p&51*m>>4,f[h]&=m>>2|m<<2);l.push(h%e);l.push(h/e|0);--k}while(d!==h);r.push(l);--a}}return function(a){a.save();a.scale(1/b,-1/c);a.translate(0,-c);a.beginPath();for(var d=0,e=r.length;d<
e;d++){var f=r[d];a.moveTo(f[0],f[1]);for(var g=2,h=f.length;g<h;g+=2)a.lineTo(f[g],f[g+1])}a.fill();a.beginPath();a.restore()}}var r=d.FONT_IDENTITY_MATRIX,y=d.IDENTITY_MATRIX,z=d.ImageKind,p=d.OPS,x=d.TextRenderingMode,t=d.Uint32ArrayView,B=d.Util,C=d.assert,F=d.info,H=d.isNum,G=d.isArray,E=d.isLittleEndian,K=d.error,g=d.shadow,m=d.warn,A=c.TilingPattern,M=c.getShadingPatternFromIR,L=a.WebGLUtils,Q=f.hasCanvasTypedArrays,ia={get value(){return g(ia,"value",Q())}},V={get value(){return g(V,"value",
E())}},Aa=function(){function a(){this.cache=Object.create(null)}a.prototype={getCanvas:function(a,b,c,d){void 0!==this.cache[a]?(a=this.cache[a],a.canvas.width=b,a.canvas.height=c,a.context.setTransform(1,0,0,1,0,0)):(b=e(b,c),c=b.getContext("2d"),d&&h(c),this.cache[a]=a={canvas:b,context:c});return a},clear:function(){for(var a in this.cache){var b=this.cache[a];b.canvas.width=0;b.canvas.height=0;delete this.cache[a]}}};return a}(),U=function(){function a(a){this.alphaIsShape=!1;this.fontSize=0;
this.fontSizeScale=1;this.textMatrix=y;this.textMatrixScale=1;this.fontMatrix=r;this.wordSpacing=this.charSpacing=this.lineY=this.lineX=this.y=this.x=this.leading=0;this.textHScale=1;this.textRenderingMode=x.FILL;this.textRise=0;this.strokeColor=this.fillColor="#000000";this.patternFill=!1;this.lineWidth=this.strokeAlpha=this.fillAlpha=1;this.resumeSMaskCtx=this.activeSMask=null;this.old=a}a.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(a,b){this.x=a;this.y=b}};
return a}();d=function(){function a(a,b,c,d){this.ctx=a;this.current=new U;this.stateStack=[];this.pendingClip=null;this.pendingEOFill=!1;this.xobjs=this.res=null;this.commonObjs=b;this.objs=c;this.imageLayer=d;this.groupStack=[];this.baseTransform=this.processingType3=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.cachedCanvases=new Aa;a&&h(a);this.cachedGetSinglePixelWidth=null}function b(a,b){if("undefined"!==typeof ImageData&&
b instanceof ImageData)a.putImageData(b,0,0);else{var c=b.height,d=b.width,e=c%16;c=(c-e)/16;var f=0===e?c:c+1,g=a.createImageData(d,16),h=0,k=b.data,l=g.data,m,p;if(b.kind===z.GRAYSCALE_1BPP){var q=k.byteLength;l=ia.value?new Uint32Array(l.buffer):new t(l);var r=l.length,u=d+7>>3,v=V.value||!ia.value?4278190080:255;for(m=0;m<f;m++){var y=m<c?16:e;for(p=b=0;p<y;p++){var x=q-h,A=0;x=x>u?d:8*x-7;for(var C=x&-8,oa=0,ba=0;A<C;A+=8)ba=k[h++],l[b++]=ba&128?4294967295:v,l[b++]=ba&64?4294967295:v,l[b++]=
ba&32?4294967295:v,l[b++]=ba&16?4294967295:v,l[b++]=ba&8?4294967295:v,l[b++]=ba&4?4294967295:v,l[b++]=ba&2?4294967295:v,l[b++]=ba&1?4294967295:v;for(;A<x;A++)0===oa&&(ba=k[h++],oa=128),l[b++]=ba&oa?4294967295:v,oa>>=1}for(;b<r;)l[b++]=0;a.putImageData(g,0,16*m)}}else if(b.kind===z.RGBA_32BPP){p=0;y=64*d;for(m=0;m<c;m++)l.set(k.subarray(h,h+y)),h+=y,a.putImageData(g,0,p),p+=16;m<f&&(l.set(k.subarray(h,h+d*e*4)),a.putImageData(g,0,p))}else if(b.kind===z.RGB_24BPP)for(y=16*d,m=0;m<f;m++){m>=c&&(y=e,
y*=d);b=0;for(p=y;p--;)l[b++]=k[h++],l[b++]=k[h++],l[b++]=k[h++],l[b++]=255;a.putImageData(g,0,16*m)}else K("bad image kind: "+b.kind)}}function c(a,b){var c=b.height,d=b.width,e=c%16;c=(c-e)/16;var f=0===e?c:c+1,g=a.createImageData(d,16),h=0;b=b.data;for(var k=g.data,l=0;l<f;l++){for(var m=l<c?16:e,p=3,q=0;q<m;q++)for(var r=0,t=0;t<d;t++){if(!r){var u=b[h++];r=128}k[p]=u&r?0:255;p+=4;r>>=1}a.putImageData(g,0,16*l)}}function d(a,b){for(var c="strokeStyle fillStyle fillRule globalAlpha lineWidth lineCap lineJoin miterLimit globalCompositeOperation font".split(" "),
d=0,e=c.length;d<e;d++){var f=c[d];void 0!==a[f]&&(b[f]=a[f])}void 0!==a.setLineDash?(b.setLineDash(a.getLineDash()),b.lineDashOffset=a.lineDashOffset):void 0!==a.mozDashOffset&&(b.mozDash=a.mozDash,b.mozDashOffset=a.mozDashOffset)}function e(a,b,c){for(var d=a.length,e=1/255,f=3;f<d;f+=4)b[f]=b[f]*(c?c[a[f]]:a[f])*e|0}function f(a,b,c){for(var d=a.length,e=3;e<d;e+=4){var f=77*a[e-3]+152*a[e-2]+28*a[e-1];b[e]=c?b[e]*c[f>>8]>>8:b[e]*f>>16}}function l(a,b,c){var d=b.canvas,g=b.context;a.setTransform(b.scaleX,
0,0,b.scaleY,b.offsetX,b.offsetY);var h=b.backdrop||null;if(!b.transferMap&&L.isEnabled)c=L.composeSMask(c.canvas,d,{subtype:b.subtype,backdrop:h}),a.setTransform(1,0,0,1,0,0),a.drawImage(c,b.offsetX,b.offsetY);else{var k=d.width,l=d.height,m=b.transferMap,p=!!h,q=p?h[0]:0,r=p?h[1]:0;h=p?h[2]:0;b="Luminosity"===b.subtype?f:e;for(var t=Math.min(l,Math.ceil(1048576/k)),u=0;u<l;u+=t){var z=Math.min(t,l-u),y=g.getImageData(0,u,k,z);z=c.getImageData(0,u,k,z);if(p)for(var x=y.data,A=q,C=r,B=h,oa=x.length,
ba=3;ba<oa;ba+=4){var La=x[ba];if(0===La)x[ba-3]=A,x[ba-2]=C,x[ba-1]=B;else if(255>La){var H=255-La;x[ba-3]=x[ba-3]*La+A*H>>8;x[ba-2]=x[ba-2]*La+C*H>>8;x[ba-1]=x[ba-1]*La+B*H>>8}}b(y.data,z.data,m);g.putImageData(z,0,u)}a.drawImage(d,0,0)}}var q=["butt","round","square"],u=["miter","round","bevel"],E={},Q={};a.prototype={beginDrawing:function(a,b,c){var d=this.ctx.canvas.width,e=this.ctx.canvas.height;this.ctx.save();this.ctx.fillStyle="rgb(255, 255, 255)";this.ctx.fillRect(0,0,d,e);this.ctx.restore();
c&&(c=this.cachedCanvases.getCanvas("transparent",d,e,!0),this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform));this.ctx.save();a&&this.ctx.transform.apply(this.ctx,a);this.ctx.transform.apply(this.ctx,b.transform);this.baseTransform=this.ctx.mozCurrentTransform.slice();this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(a,b,c,d){var e=a.argsArray;a=a.fnArray;
b=b||0;var f=e.length;if(f===b)return b;for(var g=10<f-b&&"function"===typeof c,h=g?Date.now()+15:0,k=0,l=this.commonObjs,m=this.objs,q;;){if(void 0!==d&&b===d.nextBreakPoint)return d.breakIt(b,c),b;q=a[b];if(q!==p.dependency)this[q].apply(this,e[b]);else{q=e[b];for(var r=0,t=q.length;r<t;r++){var u=q[r],z="g"===u[0]&&"_"===u[1]?l:m;if(!z.isResolved(u))return z.get(u,c),b}}b++;if(b===f)return b;if(g&&10<++k){if(Date.now()>h)return c(),b;k=0}}},endDrawing:function(){null!==this.current.activeSMask&&
this.endSMaskGroup();this.ctx.restore();this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null);this.cachedCanvases.clear();L.clear();this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(a){this.current.lineWidth=a;this.ctx.lineWidth=a},setLineCap:function(a){this.ctx.lineCap=q[a]},setLineJoin:function(a){this.ctx.lineJoin=u[a]},setMiterLimit:function(a){this.ctx.miterLimit=
a},setDash:function(a,b){var c=this.ctx;void 0!==c.setLineDash?(c.setLineDash(a),c.lineDashOffset=b):(c.mozDash=a,c.mozDashOffset=b)},setRenderingIntent:function(a){},setFlatness:function(a){},setGState:function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b],e=d[1];switch(d[0]){case "LW":this.setLineWidth(e);break;case "LC":this.setLineCap(e);break;case "LJ":this.setLineJoin(e);break;case "ML":this.setMiterLimit(e);break;case "D":this.setDash(e[0],e[1]);break;case "RI":this.setRenderingIntent(e);break;
case "FL":this.setFlatness(e);break;case "Font":this.setFont(e[0],e[1]);break;case "CA":this.current.strokeAlpha=d[1];break;case "ca":this.current.fillAlpha=d[1];this.ctx.globalAlpha=d[1];break;case "BM":e&&e.name&&"Normal"!==e.name?(d=e.name.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}).substring(1),this.ctx.globalCompositeOperation=d,this.ctx.globalCompositeOperation!==d&&m('globalCompositeOperation "'+d+'" is not supported')):this.ctx.globalCompositeOperation="source-over";break;case "SMask":this.current.activeSMask&&
(0<this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=e?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function(){var a=this.current.activeSMask,b=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,a.canvas.width,a.canvas.height,!0),c=this.ctx,e=c.mozCurrentTransform;this.ctx.save();b=b.context;b.scale(1/
a.scaleX,1/a.scaleY);b.translate(-a.offsetX,-a.offsetY);b.transform.apply(b,e);a.startTransformInverse=b.mozCurrentTransformInverse;d(c,b);this.ctx=b;this.setGState([["BM","Normal"],["ca",1],["CA",1]]);this.groupStack.push(c);this.groupLevel++},suspendSMaskGroup:function(){var a=this.ctx;this.groupLevel--;this.ctx=this.groupStack.pop();l(this.ctx,this.current.activeSMask,a);this.ctx.restore();this.ctx.save();d(a,this.ctx);this.current.resumeSMaskCtx=a;var b=B.transform(this.current.activeSMask.startTransformInverse,
a.mozCurrentTransform);this.ctx.transform.apply(this.ctx,b);a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,a.canvas.width,a.canvas.height);a.restore()},resumeSMaskGroup:function(){var a=this.ctx;this.ctx=this.current.resumeSMaskCtx;this.groupStack.push(a);this.groupLevel++},endSMaskGroup:function(){var a=this.ctx;this.groupLevel--;this.ctx=this.groupStack.pop();l(this.ctx,this.current.activeSMask,a);this.ctx.restore();d(a,this.ctx);a=B.transform(this.current.activeSMask.startTransformInverse,
a.mozCurrentTransform);this.ctx.transform.apply(this.ctx,a)},save:function(){this.ctx.save();var a=this.current;this.stateStack.push(a);this.current=a.clone();this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup();null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup();0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),
this.cachedGetSinglePixelWidth=this.pendingClip=null)},transform:function(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f);this.cachedGetSinglePixelWidth=null},constructPath:function(a,b){for(var c=this.ctx,d=this.current,e=d.x,f=d.y,g=0,h=0,k=a.length;g<k;g++)switch(a[g]|0){case p.rectangle:e=b[h++];f=b[h++];var l=b[h++],m=b[h++];0===l&&(l=this.getSinglePixelWidth());0===m&&(m=this.getSinglePixelWidth());l=e+l;m=f+m;this.ctx.moveTo(e,f);this.ctx.lineTo(l,f);this.ctx.lineTo(l,m);this.ctx.lineTo(e,m);
this.ctx.lineTo(e,f);this.ctx.closePath();break;case p.moveTo:e=b[h++];f=b[h++];c.moveTo(e,f);break;case p.lineTo:e=b[h++];f=b[h++];c.lineTo(e,f);break;case p.curveTo:e=b[h+4];f=b[h+5];c.bezierCurveTo(b[h],b[h+1],b[h+2],b[h+3],e,f);h+=6;break;case p.curveTo2:c.bezierCurveTo(e,f,b[h],b[h+1],b[h+2],b[h+3]);e=b[h+2];f=b[h+3];h+=4;break;case p.curveTo3:e=b[h+2];f=b[h+3];c.bezierCurveTo(b[h],b[h+1],e,f,e,f);h+=4;break;case p.closePath:c.closePath()}d.setCurrentPoint(e,f)},closePath:function(){this.ctx.closePath()},
stroke:function(a){a="undefined"!==typeof a?a:!0;var b=this.ctx,c=this.current.strokeColor;b.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth);b.globalAlpha=this.current.strokeAlpha;c&&c.hasOwnProperty("type")&&"Pattern"===c.type?(b.save(),b.strokeStyle=c.getPattern(b,this),b.stroke(),b.restore()):b.stroke();a&&this.consumePath();b.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath();this.stroke()},fill:function(a){a="undefined"!==typeof a?a:!0;var b=
this.ctx,c=this.current.fillColor,d=!1;this.current.patternFill&&(b.save(),this.baseTransform&&b.setTransform.apply(b,this.baseTransform),b.fillStyle=c.getPattern(b,this),d=!0);this.pendingEOFill?(void 0!==b.mozFillRule?(b.mozFillRule="evenodd",b.fill(),b.mozFillRule="nonzero"):b.fill("evenodd"),this.pendingEOFill=!1):b.fill();d&&b.restore();a&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0;this.fill()},fillStroke:function(){this.fill(!1);this.stroke(!1);this.consumePath()},eoFillStroke:function(){this.pendingEOFill=
!0;this.fillStroke()},closeFillStroke:function(){this.closePath();this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0;this.closePath();this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=E},eoClip:function(){this.pendingClip=Q},beginText:function(){this.current.textMatrix=y;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},endText:function(){var a=this.pendingTextPaths,b=this.ctx;if(void 0===
a)b.beginPath();else{b.save();b.beginPath();for(var c=0;c<a.length;c++){var d=a[c];b.setTransform.apply(b,d.transform);b.translate(d.x,d.y);d.addToPath(b,d.fontSize)}b.restore();b.clip();b.beginPath();delete this.pendingTextPaths}},setCharSpacing:function(a){this.current.charSpacing=a},setWordSpacing:function(a){this.current.wordSpacing=a},setHScale:function(a){this.current.textHScale=a/100},setLeading:function(a){this.current.leading=-a},setFont:function(a,b){var c=this.commonObjs.get(a),d=this.current;
c||K("Can't find font for "+a);d.fontMatrix=c.fontMatrix?c.fontMatrix:r;0!==d.fontMatrix[0]&&0!==d.fontMatrix[3]||m("Invalid font matrix for font "+a);0>b?(b=-b,d.fontDirection=-1):d.fontDirection=1;this.current.font=c;this.current.fontSize=b;if(!c.isType3Font){a=c.black?c.bold?"900":"bold":c.bold?"bold":"normal";d=c.italic?"italic":"normal";c='"'+(c.loadedName||"sans-serif")+'", '+c.fallbackName;var e=16>b?16:100<b?100:b;this.current.fontSizeScale=b/e;this.ctx.font=d+" "+a+" "+e+"px "+c}},setTextRenderingMode:function(a){this.current.textRenderingMode=
a},setTextRise:function(a){this.current.textRise=a},moveText:function(a,b){this.current.x=this.current.lineX+=a;this.current.y=this.current.lineY+=b},setLeadingMoveText:function(a,b){this.setLeading(-b);this.moveText(a,b)},setTextMatrix:function(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f];this.current.textMatrixScale=Math.sqrt(a*a+b*b);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function(a,b,c){var d=
this.ctx,e=this.current,f=e.font,g=e.textRenderingMode;e=e.fontSize/e.fontSizeScale;var h=g&x.FILL_STROKE_MASK;g=!!(g&x.ADD_TO_PATH_FLAG);if(f.disableFontFace||g)var k=f.getPathGenerator(this.commonObjs,a);f.disableFontFace?(d.save(),d.translate(b,c),d.beginPath(),k(d,e),h!==x.FILL&&h!==x.FILL_STROKE||d.fill(),h!==x.STROKE&&h!==x.FILL_STROKE||d.stroke(),d.restore()):(h!==x.FILL&&h!==x.FILL_STROKE||d.fillText(a,b,c),h!==x.STROKE&&h!==x.FILL_STROKE||d.strokeText(a,b,c));g&&(this.pendingTextPaths||(this.pendingTextPaths=
[])).push({transform:d.mozCurrentTransform,x:b,y:c,fontSize:e,addToPath:k})},get isFontSubpixelAAEnabled(){var a=document.createElement("canvas").getContext("2d");a.scale(1.5,1);a.fillText("I",0,10);a=a.getImageData(0,0,10,10).data;for(var b=!1,c=3;c<a.length;c+=4)if(0<a[c]&&255>a[c]){b=!0;break}return g(this,"isFontSubpixelAAEnabled",b)},showText:function(a){var b=this.current,c=b.font;if(c.isType3Font)return this.showType3Text(a);var d=b.fontSize;if(0!==d){var e=this.ctx,f=b.fontSizeScale,g=b.charSpacing,
h=b.wordSpacing,k=b.fontDirection,l=b.textHScale*k,m=a.length,p=c.vertical,q=p?1:-1,r=c.defaultVMetrics,t=d*b.fontMatrix[0],u=b.textRenderingMode===x.FILL&&!c.disableFontFace;e.save();e.transform.apply(e,b.textMatrix);e.translate(b.x,b.y+b.textRise);b.patternFill&&(e.fillStyle=b.fillColor.getPattern(e,this));0<k?e.scale(l,-1):e.scale(l,1);var z=b.lineWidth,y=b.textMatrixScale;if(0===y||0===z){if(y=b.textRenderingMode&x.FILL_STROKE_MASK,y===x.STROKE||y===x.FILL_STROKE)this.cachedGetSinglePixelWidth=
null,z=.65*this.getSinglePixelWidth()}else z/=y;1!==f&&(e.scale(f,f),z/=f);e.lineWidth=z;for(y=z=0;y<m;++y){var A=a[y];if(H(A))z+=q*A*d/1E3;else{var C=!1,oa=(A.isSpace?h:0)+g,ba=A.fontChar,B=A.accent,G=A.width;if(p){var E=A.vmetric||r;var F=A.vmetric?E[1]:.5*G;F=-F*t;var R=E[2]*t;G=E?-E[0]:G;E=F/f;R=(z+R)/f}else E=z/f,R=0;c.remeasure&&0<G&&(F=1E3*e.measureText(ba).width/d*f,G<F&&this.isFontSubpixelAAEnabled?(F=G/F,C=!0,e.save(),e.scale(F,1),E/=F):G!==F&&(E+=(G-F)/2E3*d/f));if(A.isInFont||c.missingFile)u&&
!B?e.fillText(ba,E,R):(this.paintChar(ba,E,R),B&&(A=E+B.offset.x/f,ba=R-B.offset.y/f,this.paintChar(B.fontChar,A,ba)));z+=G*t+oa*k;C&&e.restore()}}p?b.y-=z*l:b.x+=z*l;e.restore()}},showType3Text:function(a){var b=this.ctx,c=this.current,d=c.font,e=c.fontSize,f=c.fontDirection,g=d.vertical?1:-1,h=c.charSpacing,k=c.wordSpacing,l=c.textHScale*f,p=c.fontMatrix||r,q=a.length;if(c.textRenderingMode!==x.INVISIBLE&&0!==e){this.cachedGetSinglePixelWidth=null;b.save();b.transform.apply(b,c.textMatrix);b.translate(c.x,
c.y);b.scale(l,f);for(f=0;f<q;++f){var t=a[f];if(H(t))t=g*t*e/1E3,this.ctx.translate(t,0),c.x+=t*l;else{var u=(t.isSpace?k:0)+h,z=d.charProcOperatorList[t.operatorListId];z?(this.processingType3=t,this.save(),b.scale(e,e),b.transform.apply(b,p),this.executeOperatorList(z),this.restore(),t=B.applyTransform([t.width,0],p)[0]*e+u,b.translate(t,0),c.x+=t*l):m('Type3 character "'+t.operatorListId+'" is not available')}}b.restore();this.processingType3=null}},setCharWidth:function(a,b){},setCharWidthAndBounds:function(a,
b,c,d,e,f){this.ctx.rect(c,d,e-c,f-d);this.clip();this.endPath()},getColorN_Pattern:function(b){if("TilingPattern"===b[0]){var c=b[1],d=this.baseTransform||this.ctx.mozCurrentTransform.slice(),e=this;b=new A(b,c,this.ctx,{createCanvasGraphics:function(b){return new a(b,e.commonObjs,e.objs)}},d)}else b=M(b);return b},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=
!0},setStrokeRGBColor:function(a,b,c){a=B.makeCssRgb(a,b,c);this.ctx.strokeStyle=a;this.current.strokeColor=a},setFillRGBColor:function(a,b,c){a=B.makeCssRgb(a,b,c);this.ctx.fillStyle=a;this.current.fillColor=a;this.current.patternFill=!1},shadingFill:function(a){var b=this.ctx;this.save();a=M(a);b.fillStyle=a.getPattern(b,this,!0);var c=b.mozCurrentTransformInverse;if(c){b=b.canvas;var d=b.width,e=b.height;b=B.applyTransform([0,0],c);a=B.applyTransform([0,e],c);var f=B.applyTransform([d,0],c);c=
B.applyTransform([d,e],c);d=Math.min(b[0],a[0],f[0],c[0]);e=Math.min(b[1],a[1],f[1],c[1]);this.ctx.fillRect(d,e,Math.max(b[0],a[0],f[0],c[0])-d,Math.max(b[1],a[1],f[1],c[1])-e)}else this.ctx.fillRect(-1E10,-1E10,2E10,2E10);this.restore()},beginInlineImage:function(){K("Should not call beginInlineImage")},beginImageData:function(){K("Should not call beginImageData")},paintFormXObjectBegin:function(a,b){this.save();this.baseTransformStack.push(this.baseTransform);G(a)&&6===a.length&&this.transform.apply(this,
a);this.baseTransform=this.ctx.mozCurrentTransform;G(b)&&4===b.length&&(this.ctx.rect(b[0],b[1],b[2]-b[0],b[3]-b[1]),this.clip(),this.endPath())},paintFormXObjectEnd:function(){this.restore();this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(a){this.save();var b=this.ctx;a.isolated||F("TODO: Support non-isolated groups.");a.knockout&&m("Knockout groups not supported.");var c=b.mozCurrentTransform;a.matrix&&b.transform.apply(b,a.matrix);C(a.bbox,"Bounding box is required.");var e=
B.getAxialAlignedBoundingBox(a.bbox,b.mozCurrentTransform);e=B.intersect(e,[0,0,b.canvas.width,b.canvas.height])||[0,0,0,0];var f=Math.floor(e[0]),g=Math.floor(e[1]),h=Math.max(Math.ceil(e[2])-f,1),k=Math.max(Math.ceil(e[3])-g,1),l=e=1;4096<h&&(e=h/4096,h=4096);4096<k&&(l=k/4096,k=4096);var p="groupAt"+this.groupLevel;a.smask&&(p+="_smask_"+this.smaskCounter++%2);h=this.cachedCanvases.getCanvas(p,h,k,!0);k=h.context;k.scale(1/e,1/l);k.translate(-f,-g);k.transform.apply(k,c);a.smask?this.smaskStack.push({canvas:h.canvas,
context:k,offsetX:f,offsetY:g,scaleX:e,scaleY:l,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(b.setTransform(1,0,0,1,0,0),b.translate(f,g),b.scale(e,l));d(b,k);this.ctx=k;this.setGState([["BM","Normal"],["ca",1],["CA",1]]);this.groupStack.push(b);this.groupLevel++;this.current.activeSMask=null},endGroup:function(a){this.groupLevel--;var b=this.ctx;this.ctx=this.groupStack.pop();void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=
!1:this.ctx.mozImageSmoothingEnabled=!1;a.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(b.canvas,0,0);this.restore()},beginAnnotations:function(){this.save();this.current=new U;this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(a,b,c){this.save();G(a)&&4===a.length&&(this.ctx.rect(a[0],a[1],a[2]-a[0],a[3]-a[1]),this.clip(),this.endPath());this.transform.apply(this,b);this.transform.apply(this,
c)},endAnnotation:function(){this.restore()},paintJpegXObject:function(a,b,c){var d=this.objs.get(a);if(d){this.save();var e=this.ctx;e.scale(1/b,-1/c);e.drawImage(d,0,0,d.width,d.height,0,-c,b,c);this.imageLayer&&(d=e.mozCurrentTransformInverse,e=this.getCanvasPosition(0,0),this.imageLayer.appendImage({objId:a,left:e[0],top:e[1],width:b/d[0],height:c/d[3]}));this.restore()}else m("Dependent image isn't ready yet")},paintImageMaskXObject:function(a){var b=this.ctx,d=a.width,e=a.height,f=this.current.fillColor,
g=this.current.patternFill,h=this.processingType3;h&&void 0===h.compiled&&(h.compiled=1E3>=d&&1E3>=e?k({data:a.data,width:d,height:e}):null);h&&h.compiled?h.compiled(b):(b=this.cachedCanvases.getCanvas("maskCanvas",d,e),h=b.context,h.save(),c(h,a),h.globalCompositeOperation="source-in",h.fillStyle=g?f.getPattern(h,this):f,h.fillRect(0,0,d,e),h.restore(),this.paintInlineImageXObject(b.canvas))},paintImageMaskXObjectRepeat:function(a,b,d,e){var f=a.width,g=a.height,h=this.current.fillColor,k=this.current.patternFill,
l=this.cachedCanvases.getCanvas("maskCanvas",f,g),m=l.context;m.save();c(m,a);m.globalCompositeOperation="source-in";m.fillStyle=k?h.getPattern(m,this):h;m.fillRect(0,0,f,g);m.restore();a=this.ctx;h=0;for(k=e.length;h<k;h+=2)a.save(),a.transform(b,0,0,d,e[h],e[h+1]),a.scale(1,-1),a.drawImage(l.canvas,0,0,f,g,0,-1,1,1),a.restore()},paintImageMaskXObjectGroup:function(a){for(var b=this.ctx,d=this.current.fillColor,e=this.current.patternFill,f=0,g=a.length;f<g;f++){var h=a[f],k=h.width,l=h.height,m=
this.cachedCanvases.getCanvas("maskCanvas",k,l),p=m.context;p.save();c(p,h);p.globalCompositeOperation="source-in";p.fillStyle=e?d.getPattern(p,this):d;p.fillRect(0,0,k,l);p.restore();b.save();b.transform.apply(b,h.transform);b.scale(1,-1);b.drawImage(m.canvas,0,0,k,l,0,-1,1,1);b.restore()}},paintImageXObject:function(a){(a=this.objs.get(a))?this.paintInlineImageXObject(a):m("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(a,b,c,d){if(a=this.objs.get(a)){for(var e=a.width,f=a.height,
g=[],h=0,k=d.length;h<k;h+=2)g.push({transform:[b,0,0,c,d[h],d[h+1]],x:0,y:0,w:e,h:f});this.paintInlineImageXObjectGroup(a,g)}else m("Dependent image isn't ready yet")},paintInlineImageXObject:function(a){var c=a.width,d=a.height,e=this.ctx;this.save();e.scale(1/c,-1/d);var f=e.mozCurrentTransformInverse,g=f[0],h=f[1];g=Math.max(Math.sqrt(g*g+h*h),1);h=f[2];var k=f[3];h=Math.max(Math.sqrt(h*h+k*k),1);if(a instanceof HTMLElement||!a.data)k=a;else{var l=this.cachedCanvases.getCanvas("inlineImage",c,
d);var m=l.context;b(m,a);k=l.canvas}for(var p=c,q=d,r="prescale1";2<g&&1<p||2<h&&1<q;){var t=p,u=q;2<g&&1<p&&(t=Math.ceil(p/2),g/=p/t);2<h&&1<q&&(u=Math.ceil(q/2),h/=q/u);l=this.cachedCanvases.getCanvas(r,t,u);m=l.context;m.clearRect(0,0,t,u);m.drawImage(k,0,0,p,q,0,0,t,u);k=l.canvas;p=t;q=u;r="prescale1"===r?"prescale2":"prescale1"}e.drawImage(k,0,0,p,q,0,-d,c,d);this.imageLayer&&(e=this.getCanvasPosition(0,-d),this.imageLayer.appendImage({imgData:a,left:e[0],top:e[1],width:c/f[0],height:d/f[3]}));
this.restore()},paintInlineImageXObjectGroup:function(a,c){var d=this.ctx,e=a.width,f=a.height,g=this.cachedCanvases.getCanvas("inlineImage",e,f);b(g.context,a);for(var h=0,k=c.length;h<k;h++){var l=c[h];d.save();d.transform.apply(d,l.transform);d.scale(1,-1);d.drawImage(g.canvas,l.x,l.y,l.w,l.h,0,-1,1,1);this.imageLayer&&(l=this.getCanvasPosition(l.x,l.y),this.imageLayer.appendImage({imgData:a,left:l[0],top:l[1],width:e,height:f}));d.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,
0,1,1)},paintXObject:function(){m("Unsupported 'paintXObject' command.")},markPoint:function(a){},markPointProps:function(a,b){},beginMarkedContent:function(a){},beginMarkedContentProps:function(a,b){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var a=this.ctx;this.pendingClip&&(this.pendingClip===Q?void 0!==a.mozFillRule?(a.mozFillRule="evenodd",a.clip(),a.mozFillRule="nonzero"):a.clip("evenodd"):a.clip(),this.pendingClip=null);a.beginPath()},
getSinglePixelWidth:function(a){null===this.cachedGetSinglePixelWidth&&(a=this.ctx.mozCurrentTransformInverse,this.cachedGetSinglePixelWidth=Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])));return this.cachedGetSinglePixelWidth},getCanvasPosition:function(a,b){var c=this.ctx.mozCurrentTransform;return[c[0]*a+c[2]*b+c[4],c[1]*a+c[3]*b+c[5]]}};for(var Za in p)a.prototype[p[Za]]=a.prototype[Za];return a}();b.CanvasGraphics=d;b.createScratchCanvas=e});(function(b,d){d(b.pdfjsDisplayAPI={},
b.pdfjsSharedUtil,b.pdfjsDisplayFontLoader,b.pdfjsDisplayCanvas,b.pdfjsDisplayMetadata,b.pdfjsDisplayDOMUtils)})(this,function(b,d,h,c,a,l,u){function e(a,b,c,d){if(a.destroyed)return Promise.reject(Error("Worker was destroyed"));b.disableAutoFetch=Z("disableAutoFetch");b.disableStream=Z("disableStream");b.chunkedViewerLoading=!!c;c&&(b.length=c.length,b.initialData=c.initialData);return a.messageHandler.sendWithPromise("GetDocRequest",{docId:d,source:b,disableRange:Z("disableRange"),maxImageSize:Z("maxImageSize"),
cMapUrl:Z("cMapUrl"),cMapPacked:Z("cMapPacked"),disableFontFace:Z("disableFontFace"),disableCreateObjectURL:Z("disableCreateObjectURL"),postMessageTransfers:Z("postMessageTransfers")&&!ma}).then(function(b){if(a.destroyed)throw Error("Worker was destroyed");return b})}var k=d.InvalidPDFException,y=d.MessageHandler,z=d.MissingPDFException,p=d.PageViewport,x=d.PasswordResponses,t=d.PasswordException,B=d.StatTimer,C=d.UnexpectedResponseException,F=d.UnknownErrorException,H=d.Util,G=d.createPromiseCapability,
E=d.error,K=d.deprecated,g=d.getVerbosityLevel,m=d.info,A=d.isArrayBuffer,M=d.isSameOrigin,L=d.loadJpegStream,Q=d.stringToBytes,ia=d.globalScope,V=d.warn,Aa=h.FontFaceObject,U=h.FontLoader,X=c.CanvasGraphics,da=c.createScratchCanvas,R=a.Metadata,Z=l.getDefaultSetting,sa=!1,qa,ma=!1;d=!1;"undefined"===typeof window&&(sa=!0,"undefined"===typeof require.ensure&&(require.ensure=require("node-ensure")),d=!0);"undefined"!==typeof __webpack_require__&&(d=!0);"undefined"!==typeof requirejs&&requirejs.toUrl&&
(qa=requirejs.toUrl("pdfjs-dist/build/pdf.worker.js"));h="undefined"!==typeof requirejs&&requirejs.load;var ea=d?function(a){require.ensure([],function(){var b=require("./pdf.worker.js");a(b.WorkerMessageHandler)})}:h?function(a){requirejs(["pdfjs-dist/build/pdf.worker"],function(b){a(b.WorkerMessageHandler)})}:null,Ya=function(){function a(){this._capability=G();this._worker=this._transport=null;this.docId="d"+b++;this.destroyed=!1;this.onUnsupportedFeature=this.onProgress=this.onPassword=null}var b=
0;a.prototype={get promise(){return this._capability.promise},destroy:function(){this.destroyed=!0;return(this._transport?this._transport.destroy():Promise.resolve()).then(function(){this._transport=null;this._worker&&(this._worker.destroy(),this._worker=null)}.bind(this))},then:function(a,b){return this.promise.then.apply(this.promise,arguments)}};return a}(),Va=function(){function a(a,b){this.length=a;this.initialData=b;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=
[];this._readyCapability=G()}a.prototype={addRangeListener:function(a){this._rangeListeners.push(a)},addProgressListener:function(a){this._progressListeners.push(a)},addProgressiveReadListener:function(a){this._progressiveReadListeners.push(a)},onDataRange:function(a,b){for(var c=this._rangeListeners,d=0,e=c.length;d<e;++d)c[d](a,b)},onDataProgress:function(a){this._readyCapability.promise.then(function(){for(var b=this._progressListeners,c=0,d=b.length;c<d;++c)b[c](a)}.bind(this))},onDataProgressiveRead:function(a){this._readyCapability.promise.then(function(){for(var b=
this._progressiveReadListeners,c=0,d=b.length;c<d;++c)b[c](a)}.bind(this))},transportReady:function(){this._readyCapability.resolve()},requestDataRange:function(a,b){throw Error("Abstract method PDFDataRangeTransport.requestDataRange");},abort:function(){}};return a}(),ub=function(){function a(a,b,c){this.pdfInfo=a;this.transport=b;this.loadingTask=c}a.prototype={get numPages(){return this.pdfInfo.numPages},get fingerprint(){return this.pdfInfo.fingerprint},getPage:function(a){return this.transport.getPage(a)},
getPageIndex:function(a){return this.transport.getPageIndex(a)},getDestinations:function(){return this.transport.getDestinations()},getDestination:function(a){return this.transport.getDestination(a)},getPageLabels:function(){return this.transport.getPageLabels()},getAttachments:function(){return this.transport.getAttachments()},getJavaScript:function(){return this.transport.getJavaScript()},getOutline:function(){return this.transport.getOutline()},getMetadata:function(){return this.transport.getMetadata()},
getData:function(){return this.transport.getData()},getDownloadInfo:function(){return this.transport.downloadInfoCapability.promise},getStats:function(){return this.transport.getStats()},cleanup:function(){this.transport.startCleanup()},destroy:function(){return this.loadingTask.destroy()}};return a}(),Za=function(){function a(a,b,c){this.pageIndex=a;this.pageInfo=b;this.transport=c;this.stats=new B;this.stats.enabled=Z("enableStats");this.commonObjs=c.commonObjs;this.objs=new Ea;this.pendingCleanup=
this.cleanupAfterRender=!1;this.intentStates=Object.create(null);this.destroyed=!1}a.prototype={get pageNumber(){return this.pageIndex+1},get rotate(){return this.pageInfo.rotate},get ref(){return this.pageInfo.ref},get view(){return this.pageInfo.view},getViewport:function(a,b){2>arguments.length&&(b=this.rotate);return new p(this.view,a,b,0,0)},getAnnotations:function(a){a=a&&a.intent||null;this.annotationsPromise&&this.annotationsIntent===a||(this.annotationsPromise=this.transport.getAnnotations(this.pageIndex,
a),this.annotationsIntent=a);return this.annotationsPromise},render:function(a){function b(a){var b=e.renderTasks.indexOf(f);0<=b&&e.renderTasks.splice(b,1);g.cleanupAfterRender&&(g.pendingCleanup=!0);g._tryCleanup();a?f.capability.reject(a):f.capability.resolve();c.timeEnd("Rendering");c.timeEnd("Overall")}var c=this.stats;c.time("Overall");this.pendingCleanup=!1;var d="print"===a.intent?"print":"display";this.intentStates[d]||(this.intentStates[d]=Object.create(null));var e=this.intentStates[d];
e.displayReadyCapability||(e.receivingOperatorList=!0,e.displayReadyCapability=G(),e.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this.stats.time("Page Request"),this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:d}));var f=new Ha(b,a,this.objs,this.commonObjs,e.operatorList,this.pageNumber);f.useRequestAnimationFrame="print"!==d;e.renderTasks||(e.renderTasks=[]);e.renderTasks.push(f);d=f.task;a.continueCallback&&(K("render is used with continueCallback parameter"),
d.onContinue=a.continueCallback);var g=this;e.displayReadyCapability.promise.then(function(a){g.pendingCleanup?b():(c.time("Rendering"),f.initalizeGraphics(a),f.operatorListChanged())},function(a){b(a)});return d},getOperatorList:function(){function a(){if(b.operatorList.lastChunk){b.opListReadCapability.resolve(b.operatorList);var a=b.renderTasks.indexOf(c);0<=a&&b.renderTasks.splice(a,1)}}this.intentStates.oplist||(this.intentStates.oplist=Object.create(null));var b=this.intentStates.oplist;if(!b.opListReadCapability){var c=
{};c.operatorListChanged=a;b.receivingOperatorList=!0;b.opListReadCapability=G();b.renderTasks=[];b.renderTasks.push(c);b.operatorList={fnArray:[],argsArray:[],lastChunk:!1};this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:"oplist"})}return b.opListReadCapability.promise},getTextContent:function(a){return this.transport.messageHandler.sendWithPromise("GetTextContent",{pageIndex:this.pageNumber-1,normalizeWhitespace:a&&a.normalizeWhitespace||!1})},_destroy:function(){this.destroyed=
!0;this.transport.pageCache[this.pageIndex]=null;var a=[];Object.keys(this.intentStates).forEach(function(b){"oplist"!==b&&this.intentStates[b].renderTasks.forEach(function(b){var c=b.capability.promise.catch(function(){});a.push(c);b.cancel()})},this);this.objs.clear();this.annotationsPromise=null;this.pendingCleanup=!1;return Promise.all(a)},destroy:function(){K("page destroy method, use cleanup() instead");this.cleanup()},cleanup:function(){this.pendingCleanup=!0;this._tryCleanup()},_tryCleanup:function(){this.pendingCleanup&&
!Object.keys(this.intentStates).some(function(a){a=this.intentStates[a];return 0!==a.renderTasks.length||a.receivingOperatorList},this)&&(Object.keys(this.intentStates).forEach(function(a){delete this.intentStates[a]},this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1)},_startRenderPage:function(a,b){b=this.intentStates[b];b.displayReadyCapability&&b.displayReadyCapability.resolve(a)},_renderPageChunk:function(a,b){b=this.intentStates[b];var c;var d=0;for(c=a.length;d<c;d++)b.operatorList.fnArray.push(a.fnArray[d]),
b.operatorList.argsArray.push(a.argsArray[d]);b.operatorList.lastChunk=a.lastChunk;for(d=0;d<b.renderTasks.length;d++)b.renderTasks[d].operatorListChanged();a.lastChunk&&(b.receivingOperatorList=!1,this._tryCleanup())}};return a}(),Ba=function(){function a(){if("undefined"!==typeof qa)return qa;if(Z("workerSrc"))return Z("workerSrc");if(f)return f.replace(/\.js$/i,".worker.js");E("No PDFJS.workerSrc specified")}function b(){e||(e=G(),(ea||function(b){H.loadScript(a(),function(){b(window.pdfjsDistBuildPdfWorker.WorkerMessageHandler)})})(e.resolve));
return e.promise}function c(a){this.name=a;this.destroyed=!1;this._readyCapability=G();this._messageHandler=this._webWorker=this._port=null;this._initialize()}var d=0,e;c.prototype={get promise(){return this._readyCapability.promise},get port(){return this._port},get messageHandler(){return this._messageHandler},_initialize:function(){if(!sa&&!Z("disableWorker")&&"undefined"!==typeof Worker){var b=a();try{M(window.location.href,b)||(b=URL.createObjectURL(new Blob(["importScripts('"+(new URL(b,window.location)).href+
"');"])));var c=new Worker(b),d=new y("main","worker",c),e=function(){c.removeEventListener("error",f);d.destroy();c.terminate();this.destroyed?this._readyCapability.reject(Error("Worker was destroyed")):this._setupFakeWorker()}.bind(this),f=function(a){this._webWorker||e()}.bind(this);c.addEventListener("error",f);d.on("test",function(a){c.removeEventListener("error",f);this.destroyed?e():a&&a.supportTypedArray?(this._messageHandler=d,this._webWorker=this._port=c,a.supportTransfers||(ma=!0),this._readyCapability.resolve(),
d.send("configure",{verbosity:g()})):(this._setupFakeWorker(),d.destroy(),c.terminate())}.bind(this));d.on("console_log",function(a){console.log.apply(console,a)});d.on("console_error",function(a){console.error.apply(console,a)});d.on("ready",function(a){c.removeEventListener("error",f);if(this.destroyed)e();else try{h()}catch(Ra){this._setupFakeWorker()}}.bind(this));var h=function(){var a=Z("postMessageTransfers")&&!ma;a=new Uint8Array([a?255:0]);try{d.send("test",a,[a.buffer])}catch(Ra){m("Cannot use postMessage transfers"),
a[0]=0,d.send("test",a)}};h();return}catch(ca){m("The worker has been disabled.")}}this._setupFakeWorker()},_setupFakeWorker:function(){sa||Z("disableWorker")||(V("Setting up fake worker."),sa=!0);b().then(function(a){if(this.destroyed)this._readyCapability.reject(Error("Worker was destroyed"));else{var b={_listeners:[],postMessage:function(a){var b={data:a};this._listeners.forEach(function(a){a.call(this,b)},this)},addEventListener:function(a,b){this._listeners.push(b)},removeEventListener:function(a,
b){a=this._listeners.indexOf(b);this._listeners.splice(a,1)},terminate:function(){}};this._port=b;var c="fake"+d++,e=new y(c+"_worker",c,b);a.setup(e,b);this._messageHandler=new y(c,c+"_worker",b);this._readyCapability.resolve()}}.bind(this))},destroy:function(){this.destroyed=!0;this._webWorker&&(this._webWorker.terminate(),this._webWorker=null);this._port=null;this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}};return c}(),Ma=function(){function a(a,b,c){this.messageHandler=
a;this.loadingTask=b;this.pdfDataRangeTransport=c;this.commonObjs=new Ea;this.fontLoader=new U(b.docId);this.destroyed=!1;this.destroyCapability=null;this.pageCache=[];this.pagePromises=[];this.downloadInfoCapability=G();this.setupMessageHandler()}a.prototype={destroy:function(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0;this.destroyCapability=G();var a=[];this.pageCache.forEach(function(b){b&&a.push(b._destroy())});this.pageCache=[];this.pagePromises=[];var b=
this,c=this.messageHandler.sendWithPromise("Terminate",null);a.push(c);Promise.all(a).then(function(){b.fontLoader.clear();b.pdfDataRangeTransport&&(b.pdfDataRangeTransport.abort(),b.pdfDataRangeTransport=null);b.messageHandler&&(b.messageHandler.destroy(),b.messageHandler=null);b.destroyCapability.resolve()},this.destroyCapability.reject);return this.destroyCapability.promise},setupMessageHandler:function(){function a(a){b.send("UpdatePassword",a)}var b=this.messageHandler,c=this.pdfDataRangeTransport;
c&&(c.addRangeListener(function(a,c){b.send("OnDataRange",{begin:a,chunk:c})}),c.addProgressListener(function(a){b.send("OnDataProgress",{loaded:a})}),c.addProgressiveReadListener(function(a){b.send("OnDataRange",{chunk:a})}),b.on("RequestDataRange",function(a){c.requestDataRange(a.begin,a.end)},this));b.on("GetDoc",function(a){var b=a.pdfInfo;this.numPages=a.pdfInfo.numPages;a=this.loadingTask;this.pdfDocument=b=new ub(b,this,a);a._capability.resolve(b)},this);b.on("NeedPassword",function(b){var c=
this.loadingTask;if(c.onPassword)return c.onPassword(a,x.NEED_PASSWORD);c._capability.reject(new t(b.message,b.code))},this);b.on("IncorrectPassword",function(b){var c=this.loadingTask;if(c.onPassword)return c.onPassword(a,x.INCORRECT_PASSWORD);c._capability.reject(new t(b.message,b.code))},this);b.on("InvalidPDF",function(a){this.loadingTask._capability.reject(new k(a.message))},this);b.on("MissingPDF",function(a){this.loadingTask._capability.reject(new z(a.message))},this);b.on("UnexpectedResponse",
function(a){this.loadingTask._capability.reject(new C(a.message,a.status))},this);b.on("UnknownError",function(a){this.loadingTask._capability.reject(new F(a.message,a.details))},this);b.on("DataLoaded",function(a){this.downloadInfoCapability.resolve(a)},this);b.on("PDFManagerReady",function(a){this.pdfDataRangeTransport&&this.pdfDataRangeTransport.transportReady()},this);b.on("StartRenderPage",function(a){if(!this.destroyed){var b=this.pageCache[a.pageIndex];b.stats.timeEnd("Page Request");b._startRenderPage(a.transparency,
a.intent)}},this);b.on("RenderPageChunk",function(a){this.destroyed||this.pageCache[a.pageIndex]._renderPageChunk(a.operatorList,a.intent)},this);b.on("commonobj",function(a){if(!this.destroyed){var b=a[0],c=a[1];if(!this.commonObjs.hasData(b))switch(c){case "Font":a=a[2];if("error"in a){var d=a.error;V("Error during font loading: "+d);this.commonObjs.resolve(b,d);break}else{c=null;Z("pdfBug")&&ia.FontInspector&&ia.FontInspector.enabled&&(c={registerFont:function(a,b){ia.FontInspector.fontAdded(a,
b)}});var e=new Aa(a,{isEvalSuported:Z("isEvalSupported"),disableFontFace:Z("disableFontFace"),fontRegistry:c})}this.fontLoader.bind([e],function(a){this.commonObjs.resolve(b,e)}.bind(this));break;case "FontPath":this.commonObjs.resolve(b,a[2]);break;default:d("Got unknown common object type "+c)}}},this);b.on("obj",function(a){if(!this.destroyed){var b=a[0],c=a[2],d=this.pageCache[a[1]];if(!d.objs.hasData(b))switch(c){case "JpegStream":a=a[3];L(b,a,d.objs);break;case "Image":a=a[3];d.objs.resolve(b,
a);a&&"data"in a&&8E6<a.data.length&&(d.cleanupAfterRender=!0);break;default:E("Got unknown object type "+c)}}},this);b.on("DocProgress",function(a){if(!this.destroyed){var b=this.loadingTask;if(b.onProgress)b.onProgress({loaded:a.loaded,total:a.total})}},this);b.on("PageError",function(a){if(!this.destroyed){var b=this.pageCache[a.pageNum-1].intentStates[a.intent];b.displayReadyCapability?b.displayReadyCapability.reject(a.error):E(a.error);if(b.operatorList)for(b.operatorList.lastChunk=!0,a=0;a<
b.renderTasks.length;a++)b.renderTasks[a].operatorListChanged()}},this);b.on("UnsupportedFeature",function(a){if(!this.destroyed){a=a.featureId;var b=this.loadingTask;if(b.onUnsupportedFeature)b.onUnsupportedFeature(a);la.notify(a)}},this);b.on("JpegDecode",function(a){if(this.destroyed)return Promise.reject("Worker was terminated");var b=a[0],c=a[1];return 3!==c&&1!==c?Promise.reject(Error("Only 3 components or 1 component can be returned")):new Promise(function(a,d){var e=new Image;e.onload=function(){var b=
e.width,d=e.height,f=b*d,g=4*f;f=new Uint8Array(f*c);var h=da(b,d).getContext("2d");h.drawImage(e,0,0);h=h.getImageData(0,0,b,d).data;var k,l;if(3===c)for(l=k=0;k<g;k+=4,l+=3)f[l]=h[k],f[l+1]=h[k+1],f[l+2]=h[k+2];else if(1===c)for(l=k=0;k<g;k+=4,l++)f[l]=h[k];a({data:f,width:b,height:d})};e.onerror=function(){d(Error("JpegDecode failed to load image"))};e.src=b})},this)},getData:function(){return this.messageHandler.sendWithPromise("GetData",null)},getPage:function(a,b){if(0>=a||a>this.numPages||
(a|0)!==a)return Promise.reject(Error("Invalid page request"));var c=a-1;if(c in this.pagePromises)return this.pagePromises[c];a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:c}).then(function(a){if(this.destroyed)throw Error("Transport destroyed");a=new Za(c,a,this);return this.pageCache[c]=a}.bind(this));return this.pagePromises[c]=a},getPageIndex:function(a){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:a})},getAnnotations:function(a,b){return this.messageHandler.sendWithPromise("GetAnnotations",
{pageIndex:a,intent:b})},getDestinations:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)},getDestination:function(a){return this.messageHandler.sendWithPromise("GetDestination",{id:a})},getPageLabels:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)},getAttachments:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)},getJavaScript:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)},getOutline:function(){return this.messageHandler.sendWithPromise("GetOutline",
null)},getMetadata:function(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(function(a){return{info:a[0],metadata:a[1]?new R(a[1]):null}})},getStats:function(){return this.messageHandler.sendWithPromise("GetStats",null)},startCleanup:function(){this.messageHandler.sendWithPromise("Cleanup",null).then(function(){for(var a=0,b=this.pageCache.length;a<b;a++){var c=this.pageCache[a];c&&c.cleanup()}this.commonObjs.clear();this.fontLoader.clear()}.bind(this))}};return a}(),Ea=function(){function a(){this.objs=
Object.create(null)}a.prototype={ensureObj:function(a){if(this.objs[a])return this.objs[a];var b={capability:G(),data:null,resolved:!1};return this.objs[a]=b},get:function(a,b){if(b)return this.ensureObj(a).capability.promise.then(b),null;(b=this.objs[a])&&b.resolved||E("Requesting object that isn't resolved yet "+a);return b.data},resolve:function(a,b){a=this.ensureObj(a);a.resolved=!0;a.data=b;a.capability.resolve(b)},isResolved:function(a){var b=this.objs;return b[a]?b[a].resolved:!1},hasData:function(a){return this.isResolved(a)},
getData:function(a){var b=this.objs;return b[a]&&b[a].resolved?b[a].data:null},clear:function(){this.objs=Object.create(null)}};return a}(),Qa=function(){function a(a){this._internalRenderTask=a;this.onContinue=null}a.prototype={get promise(){return this._internalRenderTask.capability.promise},cancel:function(){this._internalRenderTask.cancel()},then:function(a,b){return this.promise.then.apply(this.promise,arguments)}};return a}(),Ha=function(){function a(a,b,c,d,e,f){this.callback=a;this.params=
b;this.objs=c;this.commonObjs=d;this.operatorListIdx=null;this.operatorList=e;this.pageNumber=f;this.running=!1;this.graphicsReadyCallback=null;this.cancelled=this.useRequestAnimationFrame=this.graphicsReady=!1;this.capability=G();this.task=new Qa(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this)}a.prototype={initalizeGraphics:function(a){if(!this.cancelled){Z("pdfBug")&&ia.StepperManager&&ia.StepperManager.enabled&&
(this.stepper=ia.StepperManager.create(this.pageNumber-1),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var b=this.params;this.gfx=new X(b.canvasContext,this.commonObjs,this.objs,b.imageLayer);this.gfx.beginDrawing(b.transform,b.viewport,a);this.operatorListIdx=0;this.graphicsReady=!0;this.graphicsReadyCallback&&this.graphicsReadyCallback()}},cancel:function(){this.running=!1;this.cancelled=!0;this.callback("cancelled")},operatorListChanged:function(){this.graphicsReady?
(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)},_continue:function(){this.running=!0;this.cancelled||(this.task.onContinue?this.task.onContinue.call(this.task,this._scheduleNextBound):this._scheduleNext())},_scheduleNext:function(){this.useRequestAnimationFrame&&"undefined"!==typeof window?window.requestAnimationFrame(this._nextBound):Promise.resolve(void 0).then(this._nextBound)},
_next:function(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this.callback())))}};return a}(),la=function(){var a=[];return{listen:function(b){K("Global UnsupportedManager.listen is used:  use PDFDocumentLoadingTask.onUnsupportedFeature instead");a.push(b)},notify:function(b){for(var c=
0,d=a.length;c<d;c++)a[c](b)}}}();b.version="1.5.188";b.build="0e2d50f";b.getDocument=function(a,b,c,d){var f=new Ya;1<arguments.length&&K("getDocument is called with pdfDataRangeTransport, passwordCallback or progressCallback argument");b&&(b instanceof Va||(b=Object.create(b),b.length=a.length,b.initialData=a.initialData,b.abort||(b.abort=function(){})),a=Object.create(a),a.range=b);f.onPassword=c||null;f.onProgress=d||null;if("string"===typeof a)var g={url:a};else A(a)?g={data:a}:a instanceof Va?
g={range:a}:("object"!==typeof a&&E("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object"),a.url||a.data||a.range||E("Invalid parameter object: need either .data, .range or .url"),g=a);var h={},k=null,l=null,m;for(m in g)if("url"===m&&"undefined"!==typeof window)h[m]=(new URL(g[m],window.location)).href;else if("range"===m)k=g[m];else if("worker"===m)l=g[m];else if("data"!==m||g[m]instanceof Uint8Array)h[m]=g[m];else{var p=g[m];"string"===typeof p?h[m]=Q(p):"object"!==
typeof p||null===p||isNaN(p.length)?A(p)?h[m]=new Uint8Array(p):E("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property."):h[m]=new Uint8Array(p)}h.rangeChunkSize=h.rangeChunkSize||65536;l||(l=new Ba,f._worker=l);var q=f.docId;l.promise.then(function(){if(f.destroyed)throw Error("Loading aborted");return e(l,h,k,q).then(function(a){if(f.destroyed)throw Error("Loading aborted");a=new y(q,a,l.port);var b=new Ma(a,f,k);f._transport=b;a.send("Ready",
null)})}).catch(f._capability.reject);return f};b.PDFDataRangeTransport=Va;b.PDFWorker=Ba;b.PDFDocumentProxy=ub;b.PDFPageProxy=Za;b._UnsupportedManager=la});(function(b,d){d(b.pdfjsDisplayGlobal={},b.pdfjsSharedUtil,b.pdfjsDisplayDOMUtils,b.pdfjsDisplayAPI,b.pdfjsDisplayAnnotationLayer,b.pdfjsDisplayTextLayer,b.pdfjsDisplayMetadata,b.pdfjsDisplaySVG)})(this,function(b,d,f,c,a,h,u,q){var e=d.globalScope,k=d.deprecated,l=d.warn,p=f.LinkTarget,x="undefined"===typeof window;e.PDFJS||(e.PDFJS={});var t=
e.PDFJS;t.version="1.5.188";t.build="0e2d50f";t.pdfBug=!1;void 0!==t.verbosity&&d.setVerbosityLevel(t.verbosity);delete t.verbosity;Object.defineProperty(t,"verbosity",{get:function(){return d.getVerbosityLevel()},set:function(a){d.setVerbosityLevel(a)},enumerable:!0,configurable:!0});t.VERBOSITY_LEVELS=d.VERBOSITY_LEVELS;t.OPS=d.OPS;t.UNSUPPORTED_FEATURES=d.UNSUPPORTED_FEATURES;t.isValidUrl=d.isValidUrl;t.shadow=d.shadow;t.createBlob=d.createBlob;t.createObjectURL=function(a,b){return d.createObjectURL(a,
b,t.disableCreateObjectURL)};Object.defineProperty(t,"isLittleEndian",{configurable:!0,get:function(){var a=d.isLittleEndian();return d.shadow(t,"isLittleEndian",a)}});t.removeNullCharacters=d.removeNullCharacters;t.PasswordResponses=d.PasswordResponses;t.PasswordException=d.PasswordException;t.UnknownErrorException=d.UnknownErrorException;t.InvalidPDFException=d.InvalidPDFException;t.MissingPDFException=d.MissingPDFException;t.UnexpectedResponseException=d.UnexpectedResponseException;t.Util=d.Util;
t.PageViewport=d.PageViewport;t.createPromiseCapability=d.createPromiseCapability;t.maxImageSize=void 0===t.maxImageSize?-1:t.maxImageSize;t.cMapUrl=void 0===t.cMapUrl?null:t.cMapUrl;t.cMapPacked=void 0===t.cMapPacked?!1:t.cMapPacked;t.disableFontFace=void 0===t.disableFontFace?!1:t.disableFontFace;t.imageResourcesPath=void 0===t.imageResourcesPath?"":t.imageResourcesPath;t.disableWorker=void 0===t.disableWorker?!1:t.disableWorker;t.workerSrc=void 0===t.workerSrc?null:t.workerSrc;t.disableRange=void 0===
t.disableRange?!1:t.disableRange;t.disableStream=void 0===t.disableStream?!1:t.disableStream;t.disableAutoFetch=void 0===t.disableAutoFetch?!1:t.disableAutoFetch;t.pdfBug=void 0===t.pdfBug?!1:t.pdfBug;t.postMessageTransfers=void 0===t.postMessageTransfers?!0:t.postMessageTransfers;t.disableCreateObjectURL=void 0===t.disableCreateObjectURL?!1:t.disableCreateObjectURL;t.disableWebGL=void 0===t.disableWebGL?!0:t.disableWebGL;t.externalLinkTarget=void 0===t.externalLinkTarget?p.NONE:t.externalLinkTarget;
t.externalLinkRel=void 0===t.externalLinkRel?"noreferrer":t.externalLinkRel;t.isEvalSupported=void 0===t.isEvalSupported?!0:t.isEvalSupported;var B=t.openExternalLinksInNewWindow;delete t.openExternalLinksInNewWindow;Object.defineProperty(t,"openExternalLinksInNewWindow",{get:function(){return t.externalLinkTarget===p.BLANK},set:function(a){a&&k('PDFJS.openExternalLinksInNewWindow, please use "PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK" instead.');t.externalLinkTarget!==p.NONE?l("PDFJS.externalLinkTarget is already initialized"):
t.externalLinkTarget=a?p.BLANK:p.NONE},enumerable:!0,configurable:!0});B&&(t.openExternalLinksInNewWindow=B);t.getDocument=c.getDocument;t.PDFDataRangeTransport=c.PDFDataRangeTransport;t.PDFWorker=c.PDFWorker;Object.defineProperty(t,"hasCanvasTypedArrays",{configurable:!0,get:function(){var a=f.hasCanvasTypedArrays();return d.shadow(t,"hasCanvasTypedArrays",a)}});t.CustomStyle=f.CustomStyle;t.LinkTarget=p;t.addLinkAttributes=f.addLinkAttributes;t.getFilenameFromUrl=f.getFilenameFromUrl;t.isExternalLinkTargetSet=
f.isExternalLinkTargetSet;t.AnnotationLayer=a.AnnotationLayer;t.renderTextLayer=h.renderTextLayer;t.Metadata=u.Metadata;t.SVGGraphics=q.SVGGraphics;t.UnsupportedManager=c._UnsupportedManager;b.globalScope=e;b.isWorker=x;b.PDFJS=e.PDFJS})}).call(b);h.PDFJS=b.pdfjsDisplayGlobal.PDFJS;h.build=b.pdfjsDisplayAPI.build;h.version=b.pdfjsDisplayAPI.version;h.getDocument=b.pdfjsDisplayAPI.getDocument;h.PDFDataRangeTransport=b.pdfjsDisplayAPI.PDFDataRangeTransport;h.PDFWorker=b.pdfjsDisplayAPI.PDFWorker;h.renderTextLayer=
b.pdfjsDisplayTextLayer.renderTextLayer;h.AnnotationLayer=b.pdfjsDisplayAnnotationLayer.AnnotationLayer;h.CustomStyle=b.pdfjsDisplayDOMUtils.CustomStyle;h.PasswordResponses=b.pdfjsSharedUtil.PasswordResponses;h.InvalidPDFException=b.pdfjsSharedUtil.InvalidPDFException;h.MissingPDFException=b.pdfjsSharedUtil.MissingPDFException;h.SVGGraphics=b.pdfjsDisplaySVG.SVGGraphics;h.UnexpectedResponseException=b.pdfjsSharedUtil.UnexpectedResponseException;h.OPS=b.pdfjsSharedUtil.OPS;h.UNSUPPORTED_FEATURES=b.pdfjsSharedUtil.UNSUPPORTED_FEATURES;
h.isValidUrl=b.pdfjsSharedUtil.isValidUrl;h.createObjectURL=b.pdfjsSharedUtil.createObjectURL;h.removeNullCharacters=b.pdfjsSharedUtil.removeNullCharacters;h.shadow=b.pdfjsSharedUtil.shadow;h.createBlob=b.pdfjsSharedUtil.createBlob;h.getFilenameFromUrl=b.pdfjsDisplayDOMUtils.getFilenameFromUrl;h.addLinkAttributes=b.pdfjsDisplayDOMUtils.addLinkAttributes});var CodeMirror=function(){function h(a,b){if(!(this instanceof h))return new h(a,b);this.options=b=b?Dc(b):{};Dc(Zh,b,!1);y(b);var d=b.value;"string"==typeof d&&(d=new kb(d,b.mode,null,b.lineSeparator));this.doc=d;var e=new h.inputStyles[b.inputStyle](this);a=this.display=new f(a,d,e);a.wrapper.CodeMirror=this;l(this);c(this);b.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");b.autofocus&&!xe&&a.input.focus();t(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,
focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new kf,keySeq:null,specialChars:null};var g=this;Fa&&11>eb&&setTimeout(function(){g.display.input.reset(!0)},20);Me(this);ec||(Ai(),ec=!0);xa(this);this.curOp.forceUpdate=!0;dg(this,d);b.autofocus&&!xe||g.hasFocus()?setTimeout(nf(og,this),20):Td(this);for(var n in Ae)if(Ae.hasOwnProperty(n))Ae[n](this,b[n],Wg);G(this);b.finishInit&&b.finishInit(this);for(d=0;d<Xg.length;++d)Xg[d](this);Ic(this);Hb&&b.lineWrapping&&
"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}function f(a,b,c){this.input=c;this.scrollbarFiller=fa("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=fa("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=fa("div",null,"CodeMirror-code");this.selectionDiv=fa("div",null,null,"position: relative; z-index: 1");this.cursorDiv=
fa("div",null,"CodeMirror-cursors");this.measure=fa("div",null,"CodeMirror-measure");this.lineMeasure=fa("div",null,"CodeMirror-measure");this.lineSpace=fa("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");this.mover=fa("div",[fa("div",[this.lineSpace],"CodeMirror-lines")],null,"position: relative");this.sizer=fa("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=fa("div",null,null,"position: absolute; height: "+
yh+"px; width: 1px;");this.gutters=fa("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=fa("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=fa("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");Fa&&8>eb&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);Hb||yd&&xe||(this.scroller.draggable=!0);a&&(a.appendChild?a.appendChild(this.wrapper):a(this.wrapper));this.reportedViewFrom=
this.reportedViewTo=this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=
this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;c.init(this)}function b(a){a.doc.mode=h.getMode(a.options,a.doc.modeOption);e(a)}function e(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;ob(a,100);a.state.modeGen++;a.curOp&&ab(a)}function d(a){var b=hb(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/Cc(a.display)-3);return function(e){if(Ld(a.doc,
e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function k(a){var b=a.doc,c=d(a);b.iter(function(a){var b=c(a);b!=a.height&&od(a,b)})}function c(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");sd(a)}function a(a){l(a);ab(a);setTimeout(function(){H(a)},20)}function l(a){var b=a.display.gutters,c=a.options.gutters;
Jd(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(fa("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none";u(a)}function u(a){a.display.sizer.style.marginLeft=a.display.gutters.offsetWidth+"px"}function q(a){if(0==a.height)return 0;for(var b=a.text.length,c,d=a;c=oe(d,!0);)c=c.find(0,!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=oe(d,!1);)c=c.find(0,!0),b-=d.text.length-c.from.ch,
d=c.to.line,b+=d.text.length-c.to.ch;return b}function r(a){var b=a.display;a=a.doc;b.maxLine=ka(a,a.first);b.maxLineLength=q(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var c=q(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function y(a){var b=Xb(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function z(a){var b=a.display,c=b.gutters.offsetWidth,
d=Math.round(a.doc.height+Vb(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+Xa(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}function p(a,b,c){this.cm=c;var d=this.vert=fa("div",[fa("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.horiz=fa("div",[fa("div",null,
null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a(d);a(e);pa(d,"scroll",function(){d.clientHeight&&b(d.scrollTop,"vertical")});pa(e,"scroll",function(){e.clientWidth&&b(e.scrollLeft,"horizontal")});this.checkedOverlay=!1;Fa&&8>eb&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function x(){}function t(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&se(a.display.wrapper,a.display.scrollbars.addClass));a.display.scrollbars=new h.scrollbarModel[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,
a.display.scrollbarFiller);pa(b,"mousedown",function(){a.state.focused&&setTimeout(function(){a.display.input.focus()},0)});b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?Zc(a,b):vb(a,b)},a);a.display.scrollbars.addClass&&ha(a.display.wrapper,a.display.scrollbars.addClass)}function B(a,b){b||(b=z(a));var c=a.display.barWidth,d=a.display.barHeight;C(a,b);for(b=0;4>b&&c!=a.display.barWidth||d!=a.display.barHeight;b++)c!=a.display.barWidth&&a.options.lineWrapping&&Q(a),C(a,z(a)),
c=a.display.barWidth,d=a.display.barHeight}function C(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px";c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px";d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=d.bottom+"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="";d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=
d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function F(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop;d=Math.floor(d-a.lineSpace.offsetTop);var e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight;d=Qe(b,d);e=Qe(b,e);if(c&&c.ensure){var f=c.ensure.from.line;c=c.ensure.to.line;f<d?(d=f,e=Qe(b,Fc(ka(b,f))+a.wrapper.clientHeight)):Math.min(c,b.lastLine())>=e&&(d=Qe(b,Fc(ka(b,c))-a.wrapper.clientHeight),e=c)}return{from:d,to:Math.max(e,
d+1)}}function H(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=K(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&c[g].gutter&&(c[g].gutter.style.left=f);var h=c[g].alignable;if(h)for(var n=0;n<h.length;n++)h[n].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function G(a){if(!a.options.lineNumbers)return!1;var b=a.doc;b=E(a.options,b.first+
b.size-1);var c=a.display;if(b.length!=c.lineNumChars){var d=c.measure.appendChild(fa("div",[fa("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=d.firstChild.offsetWidth;d=d.offsetWidth-e;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(e,c.lineGutter.offsetWidth-d)+1;c.lineNumWidth=c.lineNumInnerWidth+d;c.lineNumChars=c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";u(a);return!0}return!1}function E(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}
function K(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function g(a,b,c){var d=a.display;this.viewport=b;this.visible=F(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;this.wrapperWidth=d.wrapper.clientWidth;this.oldDisplayWidth=$b(a);this.force=c;this.dims=V(a);this.events=[]}function m(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return Cb(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&
(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&0==Nd(a))return!1;G(a)&&(Cb(a),b.dims=V(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);c.viewFrom<f&&20>f-c.viewFrom&&(f=Math.max(d.first,c.viewFrom));c.viewTo>g&&20>c.viewTo-g&&(g=Math.min(e,c.viewTo));ze&&(f=Kd(a.doc,f),g=Ec(a.doc,g));d=f!=c.viewFrom||g!=c.viewTo||c.lastWrapHeight!=b.wrapperHeight||c.lastWrapWidth!=b.wrapperWidth;
e=a.display;0==e.view.length||f>=e.viewTo||g<=e.viewFrom?(e.view=bc(a,f,g),e.viewFrom=f):(e.viewFrom>f?e.view=bc(a,f,e.viewFrom).concat(e.view):e.viewFrom<f&&(e.view=e.view.slice(rc(a,f))),e.viewFrom=f,e.viewTo<g?e.view=e.view.concat(bc(a,e.viewTo,g)):e.viewTo>g&&(e.view=e.view.slice(0,rc(a,g))));e.viewTo=g;c.viewOffset=Fc(ka(a.doc,c.viewFrom));a.display.mover.style.top=c.viewOffset+"px";g=Nd(a);if(!d&&0==g&&!b.force&&c.renderedView==c.view&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;
f=Sc();4<g&&(c.lineDiv.style.display="none");Aa(a,c.updateLineNumbers,b.dims);4<g&&(c.lineDiv.style.display="");c.renderedView=c.view;f&&Sc()!=f&&f.offsetHeight&&f.focus();Jd(c.cursorDiv);Jd(c.selectionDiv);c.gutters.style.height=c.sizer.style.minHeight=0;d&&(c.lastWrapHeight=b.wrapperHeight,c.lastWrapWidth=b.wrapperWidth,ob(a,400));c.updateLineNumbers=null;return!0}function A(a,b){for(var c=b.viewport,d=!0;;d=!1){if(!d||!a.options.lineWrapping||b.oldDisplayWidth==$b(a))if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+
Vb(a.display)-gc(a),c.top)}),b.visible=F(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!m(a,b))break;Q(a);d=z(a);Gc(a);L(a,d);B(a,d)}b.signal(a,"update",a);if(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo}function M(a,b){b=new g(a,b);if(m(a,b)){Q(a);A(a,
b);var c=z(a);Gc(a);L(a,c);B(a,c);b.finish()}}function L(a,b){a.display.sizer.style.minHeight=b.docHeight+"px";var c=b.docHeight+a.display.barHeight;a.display.heightForcer.style.top=c+"px";a.display.gutters.style.height=Math.max(c+Xa(a),b.clientHeight)+"px"}function Q(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=0;c<a.view.length;c++){var d=a.view[c];if(!d.hidden){if(Fa&&8>eb){var e=d.node.offsetTop+d.node.offsetHeight;var f=e-b;b=e}else f=d.node.getBoundingClientRect(),f=f.bottom-f.top;e=d.line.height-
f;2>f&&(f=hb(a));if(.001<e||-.001>e)if(od(d.line,f),ia(d.line),d.rest)for(f=0;f<d.rest.length;f++)ia(d.rest[f])}}}function ia(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.offsetHeight}function V(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g)c[a.options.gutters[g]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[g]]=f.clientWidth;return{fixedPos:K(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,
gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function Aa(a,b,c){function d(b){var c=b.nextSibling;Hb&&Nc&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b);return c}var e=a.display,f=a.options.lineNumbers,g=e.lineDiv,h=g.firstChild,n=e.view;e=e.viewFrom;for(var k=0;k<n.length;k++){var w=n[k];if(!w.hidden)if(w.node&&w.node.parentNode==g){for(;h!=w.node;)h=d(h);h=f&&null!=b&&b<=e&&w.lineNumber;w.changes&&(-1<Xb(w.changes,"gutter")&&(h=!1),U(a,w,e,c));h&&(Jd(w.lineNumber),
w.lineNumber.appendChild(document.createTextNode(E(a.options,e))));h=w.node.nextSibling}else{var l=sa(a,w,e,c);g.insertBefore(l,h)}e+=w.size}for(;h;)h=d(h)}function U(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];if("text"==f){f=b;var g=f.text.className,h=da(a,f);f.text==f.node&&(f.node=h.pre);f.text.parentNode.replaceChild(h.pre,f.text);f.text=h.pre;h.bgClass!=f.bgClass||h.textClass!=f.textClass?(f.bgClass=h.bgClass,f.textClass=h.textClass,R(f)):g&&(f.text.className=g)}else if("gutter"==
f)Z(a,b,c,d);else if("class"==f)R(b);else if("widget"==f){g=a;h=b;var n=d;h.alignable&&(h.alignable=null);for(var k=h.node.firstChild;k;k=f)f=k.nextSibling,"CodeMirror-linewidget"==k.className&&h.node.removeChild(k);qa(g,h,n)}}b.changes=null}function X(a){a.node==a.text&&(a.node=fa("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),Fa&&8>eb&&(a.node.style.zIndex=2));return a.node}function da(a,b){var c=a.display.externalMeasured;
return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):hh(a,b)}function R(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;b&&(b+=" CodeMirror-linebackground");if(a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=X(a);a.background=c.insertBefore(fa("div",null,b),c.firstChild)}a.line.wrapClass?X(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");a.text.className=
(a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass)||""}function Z(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=null);if(b.line.gutterClass){var e=X(b);b.gutterBackground=fa("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px");e.insertBefore(b.gutterBackground,b.text)}var f=
b.line.gutterMarkers;if(a.options.lineNumbers||f){e=X(b);var g=b.gutter=fa("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");a.display.input.setUneditable(g);e.insertBefore(g,b.text);b.line.gutterClass&&(g.className+=" "+b.line.gutterClass);!a.options.lineNumbers||f&&f["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(fa("div",E(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+
"px; width: "+a.display.lineNumInnerWidth+"px")));if(f)for(b=0;b<a.options.gutters.length;++b)c=a.options.gutters[b],(e=f.hasOwnProperty(c)&&f[c])&&g.appendChild(fa("div",[e],"CodeMirror-gutter-elt","left: "+d.gutterLeft[c]+"px; width: "+d.gutterWidth[c]+"px"))}}function sa(a,b,c,d){var e=da(a,b);b.text=b.node=e.pre;e.bgClass&&(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);R(b);Z(a,b,c,d);qa(a,b,d);return b.node}function qa(a,b,c){ma(a,b.line,b,c,!0);if(b.rest)for(var d=0;d<b.rest.length;d++)ma(a,
b.rest[d],b,c,!1)}function ma(a,b,c,d,e){if(b.widgets){var f=X(c),g=0;for(b=b.widgets;g<b.length;++g){var h=b[g],n=fa("div",[h.node],"CodeMirror-linewidget");h.handleMouseEvents||n.setAttribute("cm-ignore-events","true");var k=h,w=n,l=d;if(k.noHScroll){(c.alignable||(c.alignable=[])).push(w);var m=l.wrapperWidth;w.style.left=l.fixedPos+"px";k.coverGutter||(m-=l.gutterTotalWidth,w.style.paddingLeft=l.gutterTotalWidth+"px");w.style.width=m+"px"}k.coverGutter&&(w.style.zIndex=5,w.style.position="relative",
k.noHScroll||(w.style.marginLeft=-l.gutterTotalWidth+"px"));a.display.input.setUneditable(n);e&&h.above?f.insertBefore(n,c.gutter||c.text):f.appendChild(n);Bb(h,"redraw")}}}function ea(a){return T(a.line,a.ch)}function Ya(a,b){return 0>wa(a,b)?b:a}function Va(a,b){return 0>wa(a,b)?a:b}function ub(a){a.state.focused||(a.display.input.focus(),og(a))}function Za(a){return a.options.readOnly||a.doc.cantEdit}function Ba(a,b,c,d,e){var f=a.doc;a.display.shift=!1;d||(d=f.sel);var g=a.state.pasteIncoming||
"paste"==e,h=f.splitLines(b),n=null;if(g&&1<d.ranges.length)if(zc&&zc.join("\n")==b){if(0==d.ranges.length%zc.length){n=[];for(var k=0;k<zc.length;k++)n.push(f.splitLines(zc[k]))}}else h.length==d.ranges.length&&(n=Vf(h,function(a){return[a]}));for(k=d.ranges.length-1;0<=k;k--){var w=d.ranges[k],l=w.from(),m=w.to();w.empty()&&(c&&0<c?l=T(l.line,l.ch-c):a.state.overwrite&&!g&&(m=T(m.line,Math.min(ka(f,m.line).text.length,m.ch+Na(h).length))));w=a.curOp.updateInput;l={from:l,to:m,text:n?n[k%n.length]:
h,origin:e||(g?"paste":a.state.cutIncoming?"cut":"+input")};ic(a.doc,l);Bb(a,"inputRead",a,l)}b&&!g&&Ea(a,b);xc(a);a.curOp.updateInput=w;a.curOp.typing=!0;a.state.pasteIncoming=a.state.cutIncoming=!1}function Ma(a,b){var c=a.clipboardData&&a.clipboardData.getData("text/plain");if(c)return a.preventDefault(),pb(b,function(){Ba(b,c,0,null,"paste")}),!0}function Ea(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;0<=d;d--){var e=c.ranges[d];if(!(100<e.head.ch||
d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars)for(var h=0;h<f.electricChars.length;h++){if(-1<b.indexOf(f.electricChars.charAt(h))){g=ud(a,e.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(ka(a.doc,e.head.line).text.slice(0,e.head.ch))&&(g=ud(a,e.head.line,"smart"));g&&Bb(a,"electricInput",a,e.head.line)}}}function Qa(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line;e={anchor:T(e,0),head:T(e+
1,0)};c.push(e);b.push(a.getRange(e.anchor,e.head))}return{text:b,ranges:c}}function Ha(a){a.setAttribute("autocorrect","off");a.setAttribute("autocapitalize","off");a.setAttribute("spellcheck","false")}function la(a){this.cm=a;this.prevInput="";this.pollingFast=!1;this.polling=new kf;this.hasSelection=this.inaccurateSelection=!1;this.composing=null}function W(){var a=fa("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),b=fa("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");
Hb?a.style.width="1000px":a.setAttribute("wrap","off");zd&&(a.style.border="1px solid black");Ha(a);return b}function ya(a){this.cm=a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new kf;this.gracePeriod=!1}function Pa(a,b){var c=lb(a,b.line);if(!c||c.hidden)return null;a=ka(a.doc,b.line);c=jf(c,a,b.line);a=Vc(a);var d="left";a&&(d=ae(a,b.ch)%2?"right":"left");b=Yc(c.map,b.ch,d);b.offset="right"==b.collapse?b.end:b.start;return b}function va(a,
b){b&&(a.bad=!0);return a}function Ka(a,b,c){if(b==a.display.lineDiv){var d=a.display.lineDiv.childNodes[c];if(!d)return va(a.clipPos(T(a.display.viewTo-1)),!0);b=null;c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return ta(f,b,c)}}function ta(a,b,c){function d(b,c,d){for(var e=-1;e<(k?k.length:0);e++)for(var f=0>e?n.map:k[e],g=0;g<f.length;g+=
3){var h=f[g+2];if(h==b||h==c){c=Wa(0>e?a.line:a.rest[e]);e=f[g]+d;if(0>d||h!=b)e=f[g+(d?1:0)];return T(c,e)}}}var e=a.text.firstChild,f=!1;if(!b||!Og(e,b))return va(T(Wa(a.line),0),!0);if(b==e&&(f=!0,b=e.childNodes[c],c=0,!b))return c=a.rest?Na(a.rest):a.line,va(T(Wa(c),c.text.length),f);var g=3==b.nodeType?b:null,h=b;g||1!=b.childNodes.length||3!=b.firstChild.nodeType||(g=b.firstChild,c&&(c=g.nodeValue.length));for(;h.parentNode!=e;)h=h.parentNode;var n=a.measure,k=n.maps;if(b=d(g,h,c))return va(b,
f);e=h.nextSibling;for(g=g?g.nodeValue.length-c:0;e;e=e.nextSibling){if(b=d(e,e.firstChild,0))return va(T(b.line,b.ch-g),f);g+=e.textContent.length}h=h.previousSibling;for(g=c;h;h=h.previousSibling){if(b=d(h,h.firstChild,-1))return va(T(b.line,b.ch+g),f);g+=e.textContent.length}}function qb(a,b,c,d,e){function f(a){return function(b){return b.id==a}}function g(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(null!=c)""==c&&(c=b.textContent.replace(/\u200b/g,"")),h+=c;else{c=b.getAttribute("cm-marker");
var w;if(c)b=a.findMarks(T(d,0),T(e+1,0),f(+c)),b.length&&(w=b[0].find())&&(h+=Uc(a.doc,w.from,w.to).join(k));else if("false"!=b.getAttribute("contenteditable")){for(w=0;w<b.childNodes.length;w++)g(b.childNodes[w]);/^(pre|div|p)$/i.test(b.nodeName)&&(n=!0)}}}else 3==b.nodeType&&(b=b.nodeValue)&&(n&&(h+=k,n=!1),h+=b)}for(var h="",n=!1,k=a.doc.lineSeparator();;){g(b);if(b==c)break;b=b.nextSibling}return h}function cb(a,b){this.ranges=a;this.primIndex=b}function N(a,b){this.anchor=a;this.head=b}function v(a,
b){b=a[b];a.sort(function(a,b){return wa(a.from(),b.from())});b=Xb(a,b);for(var c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=wa(e.to(),d.from())){var f=Va(e.from(),d.from()),g=Ya(e.to(),d.to());d=e.empty()?d.from()==d.head:e.from()==e.head;c<=b&&--b;a.splice(--c,2,new N(d?g:f,d?f:g))}}return new cb(a,b)}function Ca(a,b){return new cb([new N(a,b||a)],0)}function ca(a,b){if(b.line<a.first)return T(a.first,0);var c=a.first+a.size-1;if(b.line>c)return T(c,ka(a,c).text.length);a=ka(a,b.line).text.length;
c=b.ch;b=null==c||c>a?T(b.line,a):0>c?T(b.line,0):b;return b}function Ra(a,b){return b>=a.first&&b<a.first+a.size}function hc(a,b,c,d){return a.cm&&a.cm.display.shift||a.extend?(a=b.anchor,d&&(b=0>wa(c,a),b!=0>wa(d,a)?(a=c,c=d):b!=0>wa(c,d)&&(c=d)),new N(a,c)):new N(d||c,c)}function oa(a,b,c,d){za(a,new cb([hc(a,a.sel.primary(),b,c)],0),d)}function ba(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=hc(a,a.sel.ranges[e],b[e],null);b=v(d,a.sel.primIndex);za(a,b,c)}function La(a,b,c,d){var e=
a.sel.ranges.slice(0);e[b]=c;za(a,v(e,a.sel.primIndex),d)}function Wc(a,b){var c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new N(ca(a,b[c].anchor),ca(a,b[c].head))}};aa(a,"beforeSelectionChange",a,c);a.cm&&aa(a.cm,"beforeSelectionChange",a.cm,c);return c.ranges!=b.ranges?v(c.ranges,c.ranges.length-1):b}function Pb(a,b,c){var d=a.history.done,e=Na(d);e&&e.ranges?(d[d.length-1]=b,ra(a,b,c)):za(a,b,c)}function za(a,b,c){ra(a,b,c);b=a.sel;var d=a.cm?
a.cm.curOp.id:NaN,e=a.history,f=c&&c.origin,g;if(!(g=d==e.lastSelOp)&&(g=f&&e.lastSelOrigin==f)&&!(g=e.lastModTime==e.lastSelTime&&e.lastOrigin==f)){g=Na(e.done);var h=f.charAt(0);g="*"==h||"+"==h&&g.ranges.length==b.ranges.length&&g.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}g?e.done[e.done.length-1]=b:Rc(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=f;e.lastSelOp=d;c&&!1!==c.clearRedo&&fh(e.undone)}function ra(a,b,c){if(rb(a,
"beforeSelectionChange")||a.cm&&rb(a.cm,"beforeSelectionChange"))b=Wc(a,b);var d=c&&c.bias||(0>wa(b.primary().head,a.sel.primary().head)?-1:1);Sa(a,Ue(a,b,d,!0));c&&!1===c.scroll||!a.cm||xc(a.cm)}function Sa(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,ke(a.cm)),Bb(a,"cursorActivity",a))}function qd(a){Sa(a,Ue(a,a.sel,null,!1),lc)}function Ue(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=gb(a,g.anchor,c,d),n=gb(a,g.head,c,d);if(e||
h!=g.anchor||n!=g.head)e||(e=b.ranges.slice(0,f)),e[f]=new N(h,n)}return e?v(e,b.primIndex):b}function gb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=ka(a,f.line);if(h.markedSpans)for(var n=0;n<h.markedSpans.length;++n){var k=h.markedSpans[n],w=k.marker;if((null==k.from||(w.inclusiveLeft?k.from<=f.ch:k.from<f.ch))&&(null==k.to||(w.inclusiveRight?k.to>=f.ch:k.to>f.ch))){if(d&&(aa(w,"beforeCursorEnter"),w.explicitlyCleared))if(h.markedSpans){--n;continue}else break;if(w.atomic){n=w.find(0>
g?-1:1);if(0==wa(n,f)&&(n.ch+=g,0>n.ch?n=n.line>a.first?ca(a,T(n.line-1)):null:n.ch>h.text.length&&(n=n.line<a.first+a.size-1?T(n.line+1,0):null),!n)){if(e){if(!d)return gb(a,b,c,!0);a.cantEdit=!0;return T(a.first,0)}e=!0;n=b;g=-g}f=n;continue a}}}return f}}function Gc(a){a.display.input.showSelection(a.display.input.prepareSelection())}function ig(a,b){for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(!1!==
b||g!=c.sel.primIndex){var h=c.sel.ranges[g],n=h.empty();if(n||a.options.showCursorWhenSelecting){var k=a,w=e,l=Hc(k,h.head,"div",null,null,!k.options.singleCursorHeightPerLine),m=w.appendChild(fa("div","\u00a0","CodeMirror-cursor"));m.style.left=l.left+"px";m.style.top=l.top+"px";m.style.height=Math.max(0,l.bottom-l.top)*k.options.cursorHeight+"px";l.other&&(k=w.appendChild(fa("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),k.style.display="",k.style.left=l.other.left+"px",k.style.top=
l.other.top+"px",k.style.height=.85*(l.other.bottom-l.other.top)+"px")}n||kd(a,h,f)}return d}function kd(a,b,c){function d(a,b,c,d){0>b&&(b=0);b=Math.round(b);d=Math.round(d);h.appendChild(fa("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?w-a:c)+"px; height: "+(d-b)+"px"))}function e(b,c,e){var f=ka(g,b),h=f.text.length,n,l;qh(Vc(f),c||0,null==e?h:e,function(g,m,I){var p=Md(a,T(b,g),"div",f,"left"),q;if(g==m){var P=p;I=q=p.left}else P=Md(a,T(b,
m-1),"div",f,"right"),"rtl"==I&&(I=p,p=P,P=I),I=p.left,q=P.right;null==c&&0==g&&(I=k);3<P.top-p.top&&(d(I,p.top,null,p.bottom),I=k,p.bottom<P.top&&d(I,p.bottom,null,P.top));null==e&&m==h&&(q=w);if(!n||p.top<n.top||p.top==n.top&&p.left<n.left)n=p;if(!l||P.bottom>l.bottom||P.bottom==l.bottom&&P.right>l.right)l=P;I<k+1&&(I=k);d(I,P.top,q-I,P.bottom)});return{start:n,end:l}}var f=a.display,g=a.doc,h=document.createDocumentFragment(),n=Xc(a.display),k=n.left,w=Math.max(f.sizerWidth,$b(a)-f.sizer.offsetLeft)-
n.right;f=b.from();b=b.to();if(f.line==b.line)e(f.line,f.ch,b.ch);else{var l=ka(g,f.line);n=ka(g,b.line);n=nd(l)==nd(n);f=e(f.line,f.ch,n?l.text.length+1:null).end;b=e(b.line,n?0:null,b.ch).start;n&&(f.top<b.top-2?(d(f.right,f.top,null,f.bottom),d(k,b.top,b.left,b.bottom)):d(f.right,f.top,b.left-f.right,f.bottom));f.bottom<b.top&&d(k,f.bottom,null,b.top)}c.appendChild(h)}function jd(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?
b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}function ob(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,nf(rd,a))}function rd(a){var b=a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=hd(b.mode,tb(a,b.frontier)),e=[];b.iter(b.frontier,Math.min(b.first+b.size,
a.display.viewTo+500),function(f){if(b.frontier>=a.display.viewFrom){var g=f.styles,h=ne(a,f,d,!0);f.styles=h.styles;var n=f.styleClasses;(h=h.classes)?f.styleClasses=h:n&&(f.styleClasses=null);n=!g||g.length!=f.styles.length||n!=h&&(!n||!h||n.bgClass!=h.bgClass||n.textClass!=h.textClass);for(h=0;!n&&h<g.length;++h)n=g[h]!=f.styles[h];n&&e.push(b.frontier);f.stateAfter=hd(b.mode,d)}else mf(a,f.text,d),f.stateAfter=0==b.frontier%5?hd(b.mode,d):null;++b.frontier;if(+new Date>c)return ob(a,a.options.workDelay),
!0});e.length&&pb(a,function(){for(var b=0;b<e.length;b++)Lb(a,e[b],"text")})}}function Zb(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>g;--b){if(b<=f.first)return f.first;var h=ka(f,b-1);if(h.stateAfter&&(!c||b<=f.frontier))return b;h=Kc(h.text,null,a.options.tabSize);if(null==e||d>h)e=b-1,d=h}return e}function tb(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=Zb(a,b,c),g=f>d.first&&ka(d,f-1).stateAfter;g=g?hd(d.mode,g):Yg(d.mode);d.iter(f,b,function(c){mf(a,
c.text,g);c.stateAfter=f==b-1||0==f%5||f>=e.viewFrom&&f<e.viewTo?hd(d.mode,g):null;++f});c&&(d.frontier=f);return g}function Vb(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function Xc(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=Ob(a.measure,fa("pre","x"));b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle;b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function Xa(a){return yh-a.display.nativeBarWidth}
function $b(a){return a.display.scroller.clientWidth-Xa(a)-a.display.barWidth}function gc(a){return a.display.scroller.clientHeight-Xa(a)-a.display.barHeight}function jf(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(d=0;d<a.rest.length;d++)if(Wa(a.rest[d])>c)return{map:a.measure.maps[d],cache:a.measure.caches[d],before:!0}}function lb(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[rc(a,
b)];if((a=a.display.externalMeasured)&&b>=a.lineN&&b<a.lineN+a.size)return a}function Je(a,b){var c=Wa(b),d=lb(a,c);d&&!d.text?d=null:d&&d.changes&&(U(a,d,c,V(a)),a.curOp.forceUpdate=!0);if(!d){var e=nd(b);d=Wa(e);e=a.display.externalMeasured=new ac(a.doc,e,d);e.lineN=d;d=e.built=hh(a,e);e.text=d.pre;Ob(a.display.lineMeasure,d.pre);d=e}a=jf(d,b,c);return{line:b,view:d,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function ie(a,b,c,d,e){b.before&&(c=-1);var f=c+(d||"");if(b.cache.hasOwnProperty(f))a=
b.cache[f];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var g=b.view,h=b.rect,n=a.options.lineWrapping,k=n&&$b(a);if(!g.measure.heights||n&&g.measure.width!=k){var l=g.measure.heights=[];if(n)for(g.measure.width=k,g=g.text.firstChild.getClientRects(),n=0;n<g.length-1;n++){k=g[n];var w=g[n+1];2<Math.abs(k.bottom-w.bottom)&&l.push((k.bottom+w.top)/2-h.top)}l.push(h.bottom-h.top)}b.hasHeights=!0}g=d;n=Yc(b.map,c,g);d=n.node;h=n.start;k=n.end;c=n.collapse;if(3==d.nodeType){for(l=
0;4>l;l++){for(;h&&of(b.line.text.charAt(n.coverStart+h));)--h;for(;n.coverStart+k<n.coverEnd&&of(b.line.text.charAt(n.coverStart+k));)++k;if(Fa&&9>eb&&0==h&&k==n.coverEnd-n.coverStart)var m=d.parentNode.getBoundingClientRect();else if(Fa&&a.options.lineWrapping){var I=dd(d,h,k).getClientRects();m=I.length?I["right"==g?I.length-1:0]:th}else m=dd(d,h,k).getBoundingClientRect()||th;if(m.left||m.right||0==h)break;k=h;--h;c="right"}Fa&&11>eb&&((I=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==
screen.deviceXDPI)||(null!=Qf?I=Qf:(l=Ob(a.display.measure,fa("span","x")),I=l.getBoundingClientRect(),l=dd(l,0,1).getBoundingClientRect(),I=Qf=1<Math.abs(I.left-l.left)),I=!I),I||(I=screen.logicalXDPI/screen.deviceXDPI,l=screen.logicalYDPI/screen.deviceYDPI,m={left:m.left*I,right:m.right*I,top:m.top*l,bottom:m.bottom*l}))}else 0<h&&(c=g="right"),m=a.options.lineWrapping&&1<(I=d.getClientRects()).length?I["right"==g?I.length-1:0]:d.getBoundingClientRect();!(Fa&&9>eb)||h||m&&(m.left||m.right)||(m=
(m=d.parentNode.getClientRects()[0])?{left:m.left,right:m.left+Cc(a.display),top:m.top,bottom:m.bottom}:th);I=m.top-b.rect.top;d=m.bottom-b.rect.top;h=(I+d)/2;g=b.view.measure.heights;for(l=0;l<g.length-1&&!(h<g[l]);l++);c={left:("right"==c?m.right:m.left)-b.rect.left,right:("left"==c?m.left:m.right)-b.rect.left,top:l?g[l-1]:0,bottom:g[l]};m.left||m.right||(c.bogus=!0);a.options.singleCursorHeightPerLine||(c.rtop=I,c.rbottom=d);a=c;a.bogus||(b.cache[f]=a)}return{left:a.left,right:a.right,top:e?a.rtop:
a.top,bottom:e?a.rbottom:a.bottom}}function Yc(a,b,c){for(var d,e,f,g,h=0;h<a.length;h+=3){var n=a[h],k=a[h+1];if(b<n)e=0,f=1,g="left";else if(b<k)e=b-n,f=e+1;else if(h==a.length-3||b==k&&a[h+3]>b)f=k-n,e=f-1,b>=k&&(g="right");if(null!=e){d=a[h+2];n==k&&c==(d.insertLeft?"left":"right")&&(g=c);if("left"==c&&0==e)for(;h&&a[h-2]==a[h-3]&&a[h-1].insertLeft;)d=a[(h-=3)+2],g="left";if("right"==c&&e==k-n)for(;h<a.length-3&&a[h+3]==a[h+4]&&!a[h+5].insertLeft;)d=a[(h+=3)+2],g="right";break}}return{node:d,
start:e,end:f,collapse:g,coverStart:n,coverEnd:k}}function jg(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function kg(a){a.display.externalMeasure=null;Jd(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)jg(a.display.view[b])}function sd(a){kg(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}
function J(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Tc(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=Fc(b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),
c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function Ve(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),d+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();return{left:d-a.left,top:b-a.top}}function Md(a,b,c,d,e){d||(d=ka(a.doc,b.line));var f=d;b=b.ch;d=ie(a,
Je(a,d),b,e);return J(a,f,d,c)}function Hc(a,b,c,d,e,f){function g(b,g){b=ie(a,e,b,g?"right":"left",f);g?b.left=b.right:b.right=b.left;return J(a,d,b,c)}function h(a,b){var c=n[b],d=c.level%2;a==Tg(c)&&b&&c.level<n[b-1].level?(c=n[--b],a=$d(c)-(c.level%2?0:1),d=!0):a==$d(c)&&b<n.length-1&&c.level<n[b+1].level&&(c=n[++b],a=Tg(c)-c.level%2,d=!1);return d&&a==c.to&&a>c.from?g(a-1):g(a,d)}d=d||ka(a.doc,b.line);e||(e=Je(a,d));var n=Vc(d);b=b.ch;if(!n)return g(b);var k=ae(n,b);k=h(b,k);null!=ff&&(k.other=
h(b,ff));return k}function lg(a,b){var c=0;b=ca(a.doc,b);a.options.lineWrapping||(c=Cc(a.display)*b.ch);b=ka(a.doc,b.line);a=Fc(b)+a.display.lineSpace.offsetTop;return{left:c,right:c,top:a,bottom:a+b.height}}function Ke(a,b,c,d){a=T(a,b);a.xRel=d;c&&(a.outside=!0);return a}function Uf(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return Ke(d.first,0,!0,-1);var e=Qe(d,c),f=d.first+d.size-1;if(e>f)return Ke(d.first+d.size-1,ka(d,f).text.length,!0,1);0>b&&(b=0);for(d=ka(d,e);;)if(e=je(a,d,e,b,c),
f=(d=oe(d,!1))&&d.find(0,!0),d&&(e.ch>f.from.ch||e.ch==f.from.ch&&0<e.xRel))e=Wa(d=f.to.line);else return e}function je(a,b,c,d,e){function f(d){d=Hc(a,T(c,d),"line",b,k);h=!0;if(g>d.bottom)return d.left-n;if(g<d.top)return d.left+n;h=!1;return d.left}var g=e-Fc(b),h=!1,n=2*a.display.wrapper.clientWidth,k=Je(a,b),l=Vc(b),w=b.text.length;e=Ze(b);var m=sg(b),I=f(e),p=h,q=f(m),r=h;if(d>q)return Ke(c,m,r,1);for(;;){if(l?m==e||m==Gf(b,e,1):1>=m-e){l=d<I||d-I<=q-d?e:m;for(d-=l==e?I:q;of(b.text.charAt(l));)++l;
return Ke(c,l,l==e?p:r,-1>d?-1:1<d?1:0)}var t=Math.ceil(w/2),P=e+t;if(l){P=e;for(var u=0;u<t;++u)P=Gf(b,P,1)}u=f(P);if(u>d){m=P;q=u;if(r=h)q+=1E3;w=t}else e=P,I=u,p=h,w-=t}}function hb(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Ad){Ad=fa("pre");for(var b=0;49>b;++b)Ad.appendChild(document.createTextNode("x")),Ad.appendChild(fa("br"));Ad.appendChild(document.createTextNode("x"))}Ob(a.measure,Ad);b=Ad.offsetHeight/50;3<b&&(a.cachedTextHeight=b);Jd(a.measure);return b||1}function Cc(a){if(null!=
a.cachedCharWidth)return a.cachedCharWidth;var b=fa("span","xxxxxxxxxx"),c=fa("pre",[b]);Ob(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/10;2<b&&(a.cachedCharWidth=b);return b||10}function xa(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++uh};Ib?Ib.ops.push(a.curOp):a.curOp.ownsGroup=
Ib={ops:[a.curOp],delayedCallbacks:[]}}function Ic(a){if(a=a.curOp.ownsGroup)try{var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c].call(null);for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++].call(null,e.cm)}}while(c<b.length)}finally{Ib=null;for(b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++){e=a[b];c=e.cm;var f=d=c.display;
!f.scrollbarsClipped&&f.scroller.offsetWidth&&(f.nativeBarWidth=f.scroller.offsetWidth-f.scroller.clientWidth,f.heightForcer.style.height=Xa(c)+"px",f.sizer.style.marginBottom=-f.nativeBarWidth+"px",f.sizer.style.borderRightWidth=Xa(c)+"px",f.scrollbarsClipped=!0);e.updateMaxLine&&r(c);e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<d.viewFrom||e.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&c.options.lineWrapping;e.update=e.mustUpdate&&new g(c,
e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}for(b=0;b<a.length;b++)e=a[b],e.updatedDisplay=e.mustUpdate&&m(e.cm,e.update);for(b=0;b<a.length;b++)if(e=a[b],c=e.cm,d=c.display,e.updatedDisplay&&Q(c),e.barMeasure=z(c),d.maxLineChanged&&!c.options.lineWrapping&&(f=d.maxLine.text.length,f=ie(c,Je(c,d.maxLine),f,void 0),e.adjustWidthTo=f.left+3,c.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(d.scroller.clientWidth,d.sizer.offsetLeft+e.adjustWidthTo+Xa(c)+c.display.barWidth),
e.maxScrollLeft=Math.max(0,d.sizer.offsetLeft+e.adjustWidthTo-$b(c))),e.updatedDisplay||e.selectionChanged)e.preparedSelection=d.input.prepareSelection();for(b=0;b<a.length;b++)e=a[b],c=e.cm,null!=e.adjustWidthTo&&(c.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<c.doc.scrollLeft&&Zc(c,Math.min(c.display.scroller.scrollLeft,e.maxScrollLeft),!0),c.display.maxLineChanged=!1),e.preparedSelection&&c.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&L(c,e.barMeasure),
(e.updatedDisplay||e.startHeight!=c.doc.height)&&B(c,e.barMeasure),e.selectionChanged&&jd(c),c.state.focused&&e.updateInput&&c.display.input.reset(e.typing),e.focus&&e.focus==Sc()&&ub(e.cm);for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;f=c.doc;e.updatedDisplay&&A(c,e.update);null==d.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(d.wheelStartX=d.wheelStartY=null);null==e.scrollTop||d.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(f.scrollTop=Math.max(0,Math.min(d.scroller.scrollHeight-
d.scroller.clientHeight,e.scrollTop)),d.scrollbars.setScrollTop(f.scrollTop),d.scroller.scrollTop=f.scrollTop);null==e.scrollLeft||d.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(f.scrollLeft=Math.max(0,Math.min(d.scroller.scrollWidth-$b(c),e.scrollLeft)),d.scrollbars.setScrollLeft(f.scrollLeft),d.scroller.scrollLeft=f.scrollLeft,H(c));if(e.scrollToPos){var h=ca(f,e.scrollToPos.from);var n=ca(f,e.scrollToPos.to);var k=e.scrollToPos.margin;null==k&&(k=0);for(var l=0;5>l;l++){var p=!1,q=Hc(c,
h),t=n&&n!=h?Hc(c,n):q;t=qe(c,Math.min(q.left,t.left),Math.min(q.top,t.top)-k,Math.max(q.left,t.left),Math.max(q.bottom,t.bottom)+k);var u=c.doc.scrollTop,y=c.doc.scrollLeft;null!=t.scrollTop&&(vb(c,t.scrollTop),1<Math.abs(c.doc.scrollTop-u)&&(p=!0));null!=t.scrollLeft&&(Zc(c,t.scrollLeft),1<Math.abs(c.doc.scrollLeft-y)&&(p=!0));if(!p)break}n=q;e.scrollToPos.isCursor&&c.state.focused&&(cc(c,"scrollCursorIntoView")||(k=c.display,l=k.sizer.getBoundingClientRect(),h=null,0>n.top+l.top?h=!0:n.bottom+
l.top>(window.innerHeight||document.documentElement.clientHeight)&&(h=!1),null==h||Ug||(n=fa("div","\u200b",null,"position: absolute; top: "+(n.top-k.viewOffset-c.display.lineSpace.offsetTop)+"px; height: "+(n.bottom-n.top+Xa(c)+k.barHeight)+"px; left: "+n.left+"px; width: 2px;"),c.display.lineSpace.appendChild(n),n.scrollIntoView(h),c.display.lineSpace.removeChild(n))))}h=e.maybeHiddenMarkers;n=e.maybeUnhiddenMarkers;if(h)for(k=0;k<h.length;++k)h[k].lines.length||aa(h[k],"hide");if(n)for(k=0;k<n.length;++k)n[k].lines.length&&
aa(n[k],"unhide");d.wrapper.offsetHeight&&(f.scrollTop=c.display.scroller.scrollTop);e.changeObjs&&aa(c,"changes",c,e.changeObjs);e.update&&e.update.finish()}}}function pb(a,b){if(a.curOp)return b();xa(a);try{return b()}finally{Ic(a)}}function ib(a,b){return function(){if("EditorRich"!=virtualclass.currApp||!arguments[0].ctrlKey||90!=arguments[0].keyCode&&89!=arguments[0].keyCode){if(a.curOp)return b.apply(a,arguments);xa(a);try{return b.apply(a,arguments)}finally{Ic(a)}}else virtualclass.editorRich.undoManager(arguments[0].keyCode)}}
function db(a){return function(){if(this.curOp)return a.apply(this,arguments);xa(this);try{return a.apply(this,arguments)}finally{Ic(this)}}}function $a(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);xa(b);try{return a.apply(this,arguments)}finally{Ic(b)}}}function ac(a,b,c){for(var d=this.line=b,e;d=oe(d,!1);)d=d.find(1,!0).line,(e||(e=[])).push(d);this.size=(this.rest=e)?Wa(Na(this.rest))-c+1:1;this.node=this.text=null;this.hidden=Ld(a,b)}function bc(a,b,c){var d=
[],e;for(e=b;e<c;)b=new ac(a.doc,ka(a.doc,e),e),e+=b.size,d.push(b);return d}function ab(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=e.viewTo)ze&&Kd(a.doc,b)<e.viewTo&&Cb(a);else if(c<=e.viewFrom)ze&&Ec(a.doc,c+d)>e.viewFrom?Cb(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Cb(a);else if(b<=e.viewFrom){var f=pe(a,
c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):Cb(a)}else if(c>=e.viewTo)(f=pe(a,b,b,-1))?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):Cb(a);else{f=pe(a,b,b,-1);var g=pe(a,c,c+d,1);f&&g?(e.view=e.view.slice(0,f.index).concat(bc(a,f.lineN,g.lineN)).concat(e.view.slice(g.index)),e.viewTo+=d):Cb(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:b<a.lineN+a.size&&(e.externalMeasured=null)}function Lb(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;
e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[rc(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==Xb(a,c)&&a.push(c)))}function Cb(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function rc(a,b){if(b>=a.display.viewTo)return null;b-=a.display.viewFrom;if(0>b)return null;a=a.display.view;for(var c=0;c<a.length;c++)if(b-=a[c].size,0>b)return c}function pe(a,b,c,d){var e=rc(a,b),f=a.display.view;if(!ze||
c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var g=0,h=a.display.viewFrom;g<e;g++)h+=f[g].size;if(h!=b){if(0<d){if(e==f.length-1)return null;b=h+f[e].size-b;e++}else b=h-b;c+=b}for(;Kd(a.doc,c)!=c;){if(e==(0>d?0:f.length-1))return null;c+=d*f[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function Nd(a){a=a.display.view;for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&!d.changes||++b}return b}function Me(a){function b(){d.activeTouch&&(e=setTimeout(function(){d.activeTouch=null},
1E3),f=d.activeTouch,f.end=+new Date)}function c(a,b){if(null==b.left)return!0;var c=b.left-a.left;a=b.top-a.top;return 400<c*c+a*a}var d=a.display;pa(d.scroller,"mousedown",ib(a,td));Fa&&11>eb?pa(d.scroller,"dblclick",ib(a,function(b){if(!cc(a,b)){var c=uc(a,b);!c||Ta(a,b,"gutterClick",!0,Bb)||Wb(a.display,b)||(Nb(b),b=a.findWordAt(c),oa(a.doc,b.anchor,b.head))}})):pa(d.scroller,"dblclick",function(b){cc(a,b)||Nb(b)});Vg||pa(d.scroller,"contextmenu",function(b){We(a,b)});var e,f={end:0};pa(d.scroller,
"touchstart",function(a){if(1!=a.touches.length)var b=!1;else b=a.touches[0],b=1>=b.radiusX&&1>=b.radiusY;b||(clearTimeout(e),b=+new Date,d.activeTouch={start:b,moved:!1,prev:300>=b-f.end?f:null},1==a.touches.length&&(d.activeTouch.left=a.touches[0].pageX,d.activeTouch.top=a.touches[0].pageY))});pa(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)});pa(d.scroller,"touchend",function(e){var f=d.activeTouch;if(f&&!Wb(d,e)&&null!=f.left&&!f.moved&&300>new Date-f.start){var g=
a.coordsChar(d.activeTouch,"page");f=!f.prev||c(f,f.prev)?new N(g,g):!f.prev.prev||c(f,f.prev.prev)?a.findWordAt(g):new N(T(g.line,0),ca(a.doc,T(g.line+1,0)));a.setSelection(f.anchor,f.head);a.focus();Nb(e)}b()});pa(d.scroller,"touchcancel",b);pa(d.scroller,"scroll",function(){d.scroller.clientHeight&&(vb(a,d.scroller.scrollTop),Zc(a,d.scroller.scrollLeft,!0),aa(a,"scroll",a))});pa(d.scroller,"mousewheel",function(b){mg(a,b)});pa(d.scroller,"DOMMouseScroll",function(b){mg(a,b)});pa(d.wrapper,"scroll",
function(){d.wrapper.scrollTop=d.wrapper.scrollLeft=0});d.dragFunctions={simple:function(b){cc(a,b)||Nf(b)},start:function(b){if(Fa&&(!a.state.draggingText||100>+new Date-tg))Nf(b);else if(!cc(a,b)&&!Wb(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.setDragImage&&!Ua)){var c=fa("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";oc&&(c.width=c.height=1,a.display.wrapper.appendChild(c),
c._top=c.offsetTop);b.dataTransfer.setDragImage(c,0,0);oc&&c.parentNode.removeChild(c)}},drop:ib(a,Pd)};var g=d.input.getField();pa(g,"keyup",function(b){S.call(a,b)});pa(g,"keydown",ib(a,sf));pa(g,"keypress",ib(a,sb));pa(g,"focus",nf(og,a));pa(g,"blur",nf(Td,a))}function Le(a){var b=a.display;if(b.lastWrapHeight!=b.wrapper.clientHeight||b.lastWrapWidth!=b.wrapper.clientWidth)b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,a.setSize()}function Wb(a,b){for(b=b.target||
b.srcElement;b!=a.wrapper;b=b.parentNode)if(!b||1==b.nodeType&&"true"==b.getAttribute("cm-ignore-events")||b.parentNode==a.sizer&&b!=a.mover)return!0}function uc(a,b,c,d){var e=a.display;if(!c&&"true"==(b.target||b.srcElement).getAttribute("cm-not-content"))return null;c=e.lineSpace.getBoundingClientRect();try{var f=b.clientX-c.left;var g=b.clientY-c.top}catch(ed){return null}b=Uf(a,f,g);var h;d&&1==b.xRel&&(h=ka(a.doc,b.line).text).length==b.ch&&(d=Kc(h,h.length,a.options.tabSize)-h.length,b=T(b.line,
Math.max(0,Math.round((f-Xc(a.display).left)/Cc(a.display))-d)));return b}function td(a){var b=this.display;if(!(b.activeTouch&&b.input.supportsTouch()||cc(this,a)))if(b.shift=a.shiftKey,Wb(b,a))Hb||(b.scroller.draggable=!1,setTimeout(function(){b.scroller.draggable=!0},100));else if(!Ta(this,a,"gutterClick",!0,Bb)){var c=uc(this,a);window.focus();switch(Zf(a)){case 1:c?Ja(this,a,c):(a.target||a.srcElement)==b.scroller&&Nb(a);break;case 2:Hb&&(this.state.lastMiddleDown=+new Date);c&&oa(this.doc,c);
setTimeout(function(){b.input.focus()},20);Nb(a);break;case 3:Vg?We(this,a):uf(this)}}}function Ja(a,b,c){Fa?setTimeout(nf(ub,a),0):a.curOp.focus=Sc();var d=+new Date;if(cf&&cf.time>d-400&&0==wa(cf.pos,c))var e="triple";else Yb&&Yb.time>d-400&&0==wa(Yb.pos,c)?(e="double",cf={time:d,pos:c}):(e="single",Yb={time:d,pos:c});d=a.doc.sel;var f=Nc?b.metaKey:b.ctrlKey,g;a.options.dragDrop&&zh&&!Za(a)&&"single"==e&&-1<(g=d.contains(c))&&(0>wa((g=d.ranges[g]).from(),c)||0<c.xRel)&&(0<wa(g.to(),c)||0>c.xRel)?
Od(a,b,c,f):rf(a,b,c,e,f)}function Od(a,b,c,d){var e=a.display,f=+new Date,g=ib(a,function(h){Hb&&(e.scroller.draggable=!1);a.state.draggingText=!1;Ac(document,"mouseup",g);Ac(e.scroller,"drop",g);10>Math.abs(b.clientX-h.clientX)+Math.abs(b.clientY-h.clientY)&&(Nb(h),!d&&+new Date-200<f&&oa(a.doc,c),Hb||Fa&&9==eb?setTimeout(function(){document.body.focus();e.input.focus()},20):e.input.focus())});Hb&&(e.scroller.draggable=!0);a.state.draggingText=g;e.scroller.dragDrop&&e.scroller.dragDrop();pa(document,
"mouseup",g);pa(e.scroller,"drop",g)}function rf(a,b,c,d,e){function f(b){if(0!=wa(q,b))if(q=b,"rect"==d){var e=[],f=a.options.tabSize,g=Kc(ka(k,c.line).text,c.ch,f),h=Kc(ka(k,b.line).text,b.ch,f),n=Math.min(g,h);g=Math.max(g,h);h=Math.min(c.line,b.line);for(var w=Math.min(a.lastLine(),Math.max(c.line,b.line));h<=w;h++){var I=ka(k,h).text,r=Jh(I,n,f);n==g?e.push(new N(T(h,r),T(h,r))):I.length>r&&e.push(new N(T(h,r),T(h,Jh(I,g,f))))}e.length||e.push(new N(c,c));za(k,v(l.ranges.slice(0,m).concat(e),
m),{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else e=p,f=e.anchor,n=b,"single"!=d&&(b="double"==d?a.findWordAt(b):new N(T(b.line,0),ca(k,T(b.line+1,0))),0<wa(b.anchor,f)?(n=b.head,f=Va(e.from(),b.anchor)):(n=b.anchor,f=Ya(e.to(),b.head))),e=l.ranges.slice(0),e[m]=new N(ca(k,f),n),za(k,v(e,m),yf)}function g(b){var c=++t,e=uc(a,b,!0,"rect"==d);if(e)if(0!=wa(e,q)){a.curOp.focus=Sc();f(e);var h=F(n,k);(e.line>=h.to||e.line<h.from)&&setTimeout(ib(a,function(){t==c&&g(b)}),150)}else{var l=b.clientY<
r.top?-20:b.clientY>r.bottom?20:0;l&&setTimeout(ib(a,function(){t==c&&(n.scroller.scrollTop+=l,g(b))}),50)}}function h(a){t=Infinity;Nb(a);n.input.focus();Ac(document,"mousemove",u);Ac(document,"mouseup",P);k.history.lastSelOrigin=null}var n=a.display,k=a.doc;Nb(b);var l=k.sel,w=l.ranges;if(e&&!b.shiftKey){var m=k.sel.contains(c);var p=-1<m?w[m]:new N(c,c)}else p=k.sel.primary(),m=k.sel.primIndex;if(b.altKey)d="rect",e||(p=new N(c,c)),c=uc(a,b,!0,!0),m=-1;else if("double"==d){var I=a.findWordAt(c);
p=a.display.shift||k.extend?hc(k,p,I.anchor,I.head):I}else"triple"==d?(I=new N(T(c.line,0),ca(k,T(c.line+1,0))),p=a.display.shift||k.extend?hc(k,p,I.anchor,I.head):I):p=hc(k,p,c);e?-1==m?(m=w.length,za(k,v(w.concat([p]),m),{scroll:!1,origin:"*mouse"})):1<w.length&&w[m].empty()&&"single"==d&&!b.shiftKey?(za(k,v(w.slice(0,m).concat(w.slice(m+1)),0)),l=k.sel):La(k,m,p,yf):(m=0,za(k,new cb([p],0),yf),l=k.sel);var q=c,r=n.wrapper.getBoundingClientRect(),t=0,u=ib(a,function(a){Zf(a)?g(a):h(a)}),P=ib(a,
h);pa(document,"mousemove",u);pa(document,"mouseup",P)}function Ta(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(Mc){return!1}if(f>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&Nb(b);d=a.display;var h=d.lineDiv.getBoundingClientRect();if(g>h.bottom||!rb(a,c))return jh(b);g-=h.top-d.viewOffset;for(h=0;h<a.options.gutters.length;++h){var n=d.gutters.childNodes[h];if(n&&n.getBoundingClientRect().right>=f)return f=Qe(a.doc,g),e(a,c,a,f,a.options.gutters[h],b),jh(b)}}function Pd(a){var b=
this;if(!cc(b,a)&&!Wb(b.display,a)){Nb(a);Fa&&(tg=+new Date);var c=uc(b,a,!0),d=a.dataTransfer.files;if(c&&!Za(b))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(a,d){var h=new FileReader;h.onload=ib(b,function(){f[d]=h.result;if(++g==e){c=ca(b.doc,c);var a={from:c,to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"};ic(b.doc,a);Pb(b.doc,Ca(c,gd(a)))}});h.readAsText(a)};for(var h=0;h<e;++h)a(d[h],h)}else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),
setTimeout(function(){b.display.input.focus()},20);else try{if(f=a.dataTransfer.getData("Text")){if(b.state.draggingText&&(Nc?!a.altKey:!a.ctrlKey))var n=b.listSelections();ra(b.doc,Ca(c,c));if(n)for(h=0;h<n.length;++h)bd(b.doc,"",n[h].anchor,n[h].head,"drag");b.replaceSelection(f,"around","paste");b.display.input.focus()}}catch(Mc){}}}function vb(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,yd||M(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbars.setScrollTop(b),
yd&&M(a),ob(a,100))}function Zc(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,H(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function mg(a,b){var c=ug(b),d=c.x;c=c.y;var e=a.display,f=e.scroller;if(d&&f.scrollWidth>f.clientWidth||c&&f.scrollHeight>f.clientHeight){if(c&&Nc&&Hb){var g=b.target,h=e.view;a:for(;g!=f;g=g.parentNode)for(var n=
0;n<h.length;n++)if(h[n].node==g){a.display.currentWheelTarget=g;break a}}!d||yd||oc||null==yb?(c&&null!=yb&&(b=c*yb,g=a.doc.scrollTop,h=g+e.wrapper.clientHeight,0>b?g=Math.max(0,g+b-50):h=Math.min(a.doc.height,h+b+50),M(a,{top:g,bottom:h})),20>be&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=d,e.wheelDY=c,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY;a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;
e.wheelStartX=e.wheelStartY=null;a&&(yb=(yb*be+a)/(be+1),++be)}},200)):(e.wheelDX+=d,e.wheelDY+=c))):(c&&vb(a,Math.max(0,Math.min(f.scrollTop+c*yb,f.scrollHeight-f.clientHeight))),Zc(a,Math.max(0,Math.min(f.scrollLeft+d*yb,f.scrollWidth-f.clientWidth))),Nb(b),e.wheelStartX=null)}}function vc(a,b,c){if("string"==typeof b&&(b=xg[b],!b))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{Za(a)&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=xf}finally{a.display.shift=d,
a.state.suppressEdits=!1}return e}function ng(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=Be(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&Be(b,a.options.extraKeys,c,a)||Be(b,a.options.keyMap,c,a)}function Qd(a,b,c,d){var e=a.state.keySeq;if(e){if(wh(b))return"handled";pc.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())});b=e+" "+b}d=ng(a,b,d);"multi"==d&&(a.state.keySeq=b);"handled"==d&&Bb(a,"keyHandled",a,b,c);if("handled"==d||"multi"==
d)Nb(c),jd(a);return e&&!d&&/'$/.test(b)?(Nb(c),!0):!!d}function Rd(a,b){var c=$h(b,!0);return c?b.shiftKey&&!a.state.keySeq?Qd(a,"Shift-"+c,b,function(b){return vc(a,b,!0)})||Qd(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return vc(a,b)}):Qd(a,c,b,function(b){return vc(a,b)}):!1}function Sd(a,b,c){return Qd(a,"'"+c+"'",b,function(b){return vc(a,b,!0)})}function sf(a){this.curOp.focus=Sc();if(!cc(this,a)){Fa&&11>eb&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=
16==b||a.shiftKey;var c=Rd(this,a);oc&&(vg=c?b:null,!c&&88==b&&!Ah&&(Nc?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||tf(this)}}function tf(a){function b(a){18!=a.keyCode&&a.altKey||(se(c,"CodeMirror-crosshair"),Ac(document,"keyup",b),Ac(document,"mouseover",b))}var c=a.display.lineDiv;ha(c,"CodeMirror-crosshair");pa(document,"keyup",b);pa(document,"mouseover",b)}function S(a){16==a.keyCode&&(this.doc.sel.shift=
!1);cc(this,a)}function sb(a){if(!(Wb(this.display,a)||cc(this,a)||a.ctrlKey&&!a.altKey||Nc&&a.metaKey)){var b=a.keyCode,c=a.charCode;if(oc&&b==vg)vg=null,Nb(a);else if(!oc||a.which&&!(10>a.which)||!Rd(this,a))if(b=String.fromCharCode(null==c?b:c),!Sd(this,a,b))this.display.input.onKeyPress(a)}}function uf(a){a.state.delayingBlurEvent=!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,Td(a))},100)}function og(a){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=
!1);"nocursor"!=a.options.readOnly&&(a.state.focused||(aa(a,"focus",a),a.state.focused=!0,ha(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),Hb&&setTimeout(function(){a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),jd(a))}function Td(a){a.state.delayingBlurEvent||(a.state.focused&&(aa(a,"blur",a),a.state.focused=!1,se(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||
(a.display.shift=!1)},150))}function We(a,b){var c;(c=Wb(a.display,b))||(c=rb(a,"gutterContextMenu")?Ta(a,b,"gutterContextMenu",!1,aa):!1);if(!c)a.display.input.onContextMenu(b)}function vf(a,b){if(0>wa(a,b.from))return a;if(0>=wa(a,b.to))return gd(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=gd(b).ch-b.to.ch);return T(c,d)}function Qb(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new N(vf(e.anchor,b),vf(e.head,b)))}return v(c,
a.sel.primIndex)}function Ne(a,b,c){return a.line==b.line?T(c.line,a.ch-b.ch+c.ch):T(c.line+(a.line-b.line),a.ch)}function Db(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};c&&(b.update=function(b,c,d,e){b&&(this.from=ca(a,b));c&&(this.to=ca(a,c));d&&(this.text=d);void 0!==e&&(this.origin=e)});aa(a,"beforeChange",a,b);a.cm&&aa(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function ic(a,
b,c){if(a.cm){if(!a.cm.curOp)return ib(a.cm,ic)(a,b,c);if(a.cm.state.suppressEdits)return}if(rb(a,"beforeChange")||a.cm&&rb(a.cm,"beforeChange"))if(b=Db(a,b,!0),!b)return;if(c=Xh&&!c&&ri(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)$c(a,{from:c[d].from,to:c[d].to,text:d?[""]:b.text});else $c(a,b)}function $c(a,b){if(1!=b.text.length||""!=b.text[0]||0!=wa(b.from,b.to)){var c=Qb(a,b);Id(a,b,c,a.cm?a.cm.curOp.id:NaN);Mb(a,b,c,Ie(a,b));var d=[];tc(a,function(a,c){c||-1!=Xb(d,a.history)||(Kh(a.history,
b),d.push(a.history));Mb(a,b,null,Ie(a,b))})}}function ad(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d=a.history,e,f=a.sel,g="undo"==b?d.done:d.undone,h="undo"==b?d.undone:d.done,n=0;n<g.length&&(e=g[n],c?!e.ranges||e.equals(a.sel):e.ranges);n++);if(n!=g.length){for(d.lastOrigin=d.lastSelOrigin=null;;)if(e=g.pop(),e.ranges){Rc(e,h);if(c&&!e.equals(a.sel)){za(a,e,{clearRedo:!1});return}f=e}else break;c=[];Rc(f,h);h.push({changes:c,generation:d.generation});d.generation=e.generation||++d.maxGeneration;
d=rb(a,"beforeChange")||a.cm&&rb(a.cm,"beforeChange");for(n=e.changes.length-1;0<=n;--n){var k=e.changes[n];k.origin=b;if(d&&!Db(a,k,!1)){g.length=0;break}c.push(gg(a,k));f=n?Qb(a,k):Na(g);Mb(a,k,f,Gd(a,k));!n&&a.cm&&a.cm.scrollIntoView({from:k.from,to:gd(k)});var l=[];tc(a,function(a,b){b||-1!=Xb(l,a.history)||(Kh(a.history,k),l.push(a.history));Mb(a,k,null,Gd(a,k))})}}}}function Oe(a,b){if(0!=b&&(a.first+=b,a.sel=new cb(Vf(a.sel.ranges,function(a){return new N(T(a.anchor.line+b,a.anchor.ch),T(a.head.line+
b,a.head.ch))}),a.sel.primIndex),a.cm)){ab(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)Lb(a.cm,d,"gutter")}}function Mb(a,b,c,d){if(a.cm&&!a.cm.curOp)return ib(a.cm,Mb)(a,b,c,d);if(b.to.line<a.first)Oe(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Oe(a,e);b={from:T(a.first,0),to:T(b.to.line+e,b.to.ch),text:[Na(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&
(b={from:b.from,to:T(e,ka(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=Uc(a,b.from,b.to);c||(c=Qb(a,b));a.cm?pg(a.cm,b,d):Kg(a,b,d);ra(a,c,lc)}}function pg(a,b,c){var e=a.doc,f=a.display,g=b.from,h=b.to,n=!1,k=g.line;a.options.lineWrapping||(k=Wa(nd(ka(e,g.line))),e.iter(k,h.line+1,function(a){if(a==f.maxLine)return n=!0}));-1<e.sel.contains(b.from,b.to)&&ke(a);Kg(e,b,c,d(a));a.options.lineWrapping||(e.iter(k,g.line+b.text.length,function(a){var b=q(a);b>f.maxLineLength&&(f.maxLine=
a,f.maxLineLength=b,f.maxLineChanged=!0,n=!1)}),n&&(a.curOp.updateMaxLine=!0));e.frontier=Math.min(e.frontier,g.line);ob(a,400);c=b.text.length-(h.line-g.line)-1;b.full?ab(a):g.line!=h.line||1!=b.text.length||pf(a.doc,b)?ab(a,g.line,h.line+1,c):Lb(a,g.line,"text");c=rb(a,"changes");if((e=rb(a,"change"))||c)b={from:g,to:h,text:b.text,removed:b.removed,origin:b.origin},e&&Bb(a,"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function bd(a,b,c,d,
e){d||(d=c);if(0>wa(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=a.splitLines(b));ic(a,{from:c,to:d,text:b,origin:e})}function qe(a,b,c,d,e){var f=a.display,g=hb(a.display);0>c&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,n=gc(a),k={};e-c>n&&(e=c+n);var l=a.doc.height+Vb(f),m=c<g;g=e>l-g;c<h?k.scrollTop=m?0:c:e>h+n&&(c=Math.min(c,(g?l:e)-n),c!=h&&(k.scrollTop=c));h=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft;a=$b(a)-(a.options.fixedGutter?
f.gutters.offsetWidth:0);(f=d-b>a)&&(d=b+a);10>b?k.scrollLeft=0:b<h?k.scrollLeft=Math.max(0,b-(f?0:10)):d>a+h-3&&(k.scrollLeft=d+(f?0:10)-a);return k}function wc(a,b,c){null==b&&null==c||Jc(a);null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b);null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+c)}function xc(a){Jc(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?T(b.line,b.ch-1):b,d=T(b.line,b.ch+1));a.curOp.scrollToPos=
{from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function Jc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=lg(a,b.from),d=lg(a,b.to);b=qe(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(b.scrollLeft,b.scrollTop)}}function ud(a,b,c,d){var e=a.doc,f;null==c&&(c="add");"smart"==c&&(e.mode.indent?f=tb(a,b):c="prev");var g=a.options.tabSize,h=ka(e,b),n=Kc(h.text,null,g);h.stateAfter&&(h.stateAfter=
null);var k=h.text.match(/^\s*/)[0];if(!d&&!/\S/.test(h.text)){var l=0;c="not"}else if("smart"==c&&(l=e.mode.indent(f,h.text.slice(k.length),h.text),l==xf||150<l)){if(!d)return;c="prev"}"prev"==c?l=b>e.first?Kc(ka(e,b-1).text,null,g):0:"add"==c?l=n+a.options.indentUnit:"subtract"==c?l=n-a.options.indentUnit:"number"==typeof c&&(l=n+c);l=Math.max(0,l);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(l/g);a;--a)d+=g,c+="\t";d<l&&(c+=Fg(l-d));if(c!=k)return bd(e,c,T(b,0),T(b,k.length),"+input"),
h.stateAfter=null,!0;for(a=0;a<e.sel.ranges.length;a++)if(g=e.sel.ranges[a],g.head.line==b&&g.head.ch<k.length){d=T(b,k.length);La(e,a,new N(d,d));break}}function cd(a,b,c,d){var e=b,f=b;"number"==typeof b?f=ka(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):e=Wa(b);if(null==e)return null;d(f,e)&&a.cm&&Lb(a.cm,e,c);return f}function yc(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=wa(f.from,Na(d).to);){var g=d.pop();if(0>wa(g.from,f.from)){f.from=g.from;
break}}d.push(f)}pb(a,function(){for(var b=d.length-1;0<=b;b--)bd(a.doc,"",d[b].from,d[b].to,"+delete");xc(a)})}function wf(a,b,c,d,e){function f(b){var d=(e?Gf:af)(n,h,c,!0);if(null==d){if(b=!b)b=g+c,b<a.first||b>=a.first+a.size?b=l=!1:(g=b,b=n=ka(a,b));if(b)h=e?(0>c?sg:Ze)(n):0>c?n.text.length:0;else return l=!1}else h=d;return!0}var g=b.line,h=b.ch,k=c,n=ka(a,g),l=!0;if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var m=null;d="group"==d;b=a.cm&&a.cm.getHelper(b,"wordChars");
for(var w=!0;!(0>c)||f(!w);w=!1){var p=n.text.charAt(h)||"\n";p=$f(p,b)?"w":d&&"\n"==p?"n":!d||/\s/.test(p)?null:"p";!d||w||p||(p="s");if(m&&m!=p){0>c&&(c=1,f());break}p&&(m=p);if(0<c&&!f(!w))break}}k=gb(a,T(g,h),k,!0);l||(k.hitSide=!0);return k}function Kb(a,b,c,d){var e=a.doc,f=b.left,g;for("page"==d?g=b.top+c*(Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight)-(0>c?1.5:.5)*hb(a.display)):"line"==d&&(g=0<c?b.bottom+3:b.top-3);;){b=Uf(a,f,g);if(!b.outside)break;
if(0>c?0>=g:g>=e.height){b.hitSide=!0;break}g+=5*c}return b}function na(a,b,c,d){h.defaults[a]=b;c&&(Ae[a]=d?function(a,b,d){d!=Wg&&c(a,b,d)}:c)}function He(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,d,e,f,g=0;g<b.length-1;g++){var h=b[g];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))c=!0;else if(/^(c|ctrl|control)$/i.test(h))d=!0;else if(/^s(hift)$/i.test(h))e=!0;else throw Error("Unrecognized modifier name: "+h);}c&&(a="Alt-"+a);d&&(a="Ctrl-"+a);f&&(a="Cmd-"+a);e&&(a="Shift-"+
a);return a}function Ub(a){return"string"==typeof a?de[a]:a}function id(a,b,c,d,e){if(d&&d.shared)return Tf(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return ib(a.cm,id)(a,b,c,d,e);var f=new qc(a,e);e=wa(b,c);d&&Dc(d,f,!1);if(0<e||0==e&&!1!==f.clearWhenEmpty)return f;f.replacedWith&&(f.collapsed=!0,f.widgetNode=fa("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||f.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(f.widgetNode.insertLeft=!0));if(f.collapsed){if(gh(a,b.line,b,
c,f)||b.line!=c.line&&gh(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");ze=!0}f.addToHistory&&Id(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var g=b.line,h=a.cm,k;a.iter(g,c.line+1,function(a){h&&f.collapsed&&!h.options.lineWrapping&&nd(a)==h.display.maxLine&&(k=!0);f.collapsed&&g!=b.line&&od(a,0);var d=new md(f,g==b.line?b.ch:null,g==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.attachLine(a);++g});f.collapsed&&
a.iter(b.line,c.line+1,function(b){Ld(a,b)&&od(b,0)});f.clearOnEnter&&pa(f,"beforeCursorEnter",function(){f.clear()});f.readOnly&&(Xh=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());f.collapsed&&(f.id=++Kf,f.atomic=!0);if(h){k&&(h.curOp.updateMaxLine=!0);if(f.collapsed)ab(h,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle||f.css)for(d=b.line;d<=c.line;d++)Lb(h,d,"text");f.atomic&&qd(h.doc);Bb(h,"markerAdded",h,f)}return f}function Tf(a,b,c,d,e){d=Dc(d);
d.shared=!1;var f=[id(a,b,c,d,e)],g=f[0],h=d.widgetNode;tc(a,function(a){h&&(d.widgetNode=h.cloneNode(!0));f.push(id(a,ca(a,b),ca(a,c),d,e));for(var k=0;k<a.linked.length;++k)if(a.linked[k].isParent)return;g=Na(f)});return new Lf(f,g)}function ua(a){return a.findMarks(T(a.first,0),a.clipPos(T(a.lastLine())),function(a){return a.parent})}function ld(a){for(var b=0;b<a.length;b++){var c=a[b],d=[c.primary.doc];tc(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];
-1==Xb(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}}function md(a,b,c){this.marker=a;this.from=b;this.to=c}function hf(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Ie(a,b){if(b.full)return null;var c=Ra(a,b.from.line)&&ka(a,b.from.line).markedSpans,d=Ra(a,b.to.line)&&ka(a,b.to.line).markedSpans;if(!c&&!d)return null;a=b.from.ch;var e=b.to.ch,f=0==wa(b.from,b.to);if(c)for(var g=0,h;g<c.length;++g){var k=c[g],n=k.marker;if(null==k.from||(n.inclusiveLeft?
k.from<=a:k.from<a)||!(k.from!=a||"bookmark"!=n.type||f&&k.marker.insertLeft)){var l=null==k.to||(n.inclusiveRight?k.to>=a:k.to>a);(h||(h=[])).push(new md(n,k.from,l?null:k.to))}}c=h;var m;if(d)for(h=0;h<d.length;++h)if(g=d[h],k=g.marker,null==g.to||(k.inclusiveRight?g.to>=e:g.to>e)||g.from==e&&"bookmark"==k.type&&(!f||g.marker.insertLeft))n=null==g.from||(k.inclusiveLeft?g.from<=e:g.from<e),(m||(m=[])).push(new md(k,n?null:g.from-e,null==g.to?null:g.to-e));e=1==b.text.length;f=Na(b.text).length+
(e?a:0);if(c)for(d=0;d<c.length;++d)if(h=c[d],null==h.to)(g=hf(m,h.marker),g)?e&&(h.to=null==g.to?null:g.to+f):h.to=a;if(m)for(d=0;d<m.length;++d)h=m[d],null!=h.to&&(h.to+=f),null==h.from?(g=hf(c,h.marker),g||(h.from=f,e&&(c||(c=[])).push(h))):(h.from+=f,e&&(c||(c=[])).push(h));c&&(c=Dg(c));m&&m!=c&&(m=Dg(m));a=[c];if(!e){b=b.text.length-2;var w;if(0<b&&c)for(d=0;d<c.length;++d)null==c[d].to&&(w||(w=[])).push(new md(c[d].marker,null,null));for(d=0;d<b;++d)a.push(w);a.push(m)}return a}function Dg(a){for(var b=
0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function Gd(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(ih(c[d]));c=e}else c=null;a=Ie(a,b);if(!c)return a;if(!a)return c;for(b=0;b<c.length;++b)if(d=c[b],e=a[b],d&&e){var f=0;a:for(;f<e.length;++f){for(var g=e[f],h=0;h<d.length;++h)if(d[h].marker==g.marker)continue a;d.push(g)}}else e&&(c[b]=e);return c}function ri(a,b,c){var d=null;a.iter(b.line,
c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=Xb(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(0),f=0;f<a.length;++f){var g=a[f];if(!(0>wa(g.to,e.from)||0<wa(g.from,e.to))){var h=[f,1],k=wa(g.from,e.from),n=wa(g.to,e.to);(0>k||!c.inclusiveLeft&&!k)&&h.push({from:g.from,to:e.from});(0<n||!c.inclusiveRight&&!n)&&h.push({from:e.to,to:g.to});a.splice.apply(a,
h);f+=h.length-1}}}return a}function Eg(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Ig(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Jg(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;c=a.find();var d=b.find(),e=wa(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=wa(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function oe(a,
b){a=ze&&a.markedSpans;if(a)for(var c,d=0;d<a.length;++d)if(c=a[d],c.marker.collapsed&&null==(b?c.from:c.to)&&(!e||0>Jg(e,c.marker)))var e=c.marker;return e}function gh(a,b,c,d,e){a=ka(a,b);if(a=ze&&a.markedSpans)for(b=0;b<a.length;++b){var f=a[b];if(f.marker.collapsed){var g=f.marker.find(0),h=wa(g.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),k=wa(g.to,d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=h&&0>=k||0>=h&&0<=k)&&(0>=h&&(0<wa(g.to,c)||f.marker.inclusiveRight&&
e.inclusiveLeft)||0<=h&&(0>wa(g.from,d)||f.marker.inclusiveLeft&&e.inclusiveRight)))return!0}}}function nd(a){for(var b;b=oe(a,!0);)a=b.find(-1,!0).line;return a}function Kd(a,b){a=ka(a,b);var c=nd(a);return a==c?b:Wa(c)}function Ec(a,b){if(b>a.lastLine())return b;var c=ka(a,b);if(!Ld(a,c))return b;for(;a=oe(c,!1);)c=a.find(1,!0).line;return Wa(c)+1}function Ld(a,b){var c=ze&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&
d.marker.inclusiveLeft&&Wf(a,b,d)))return!0}function Wf(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),Wf(a,b.line,hf(b.line.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&Wf(a,b,d))return!0}function Tc(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;
if(!Og(document.body,a.node)){var c="position: relative;";a.coverGutter&&(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;");a.noHScroll&&(c+="width: "+b.display.wrapper.clientWidth+"px;");Ob(b.display.measure,fa("div",[a.node],null,c))}return a.height=a.node.offsetHeight}function Gg(a,b,c,d){var e=new Mf(a,c,d),f=a.cm;f&&e.noHScroll&&(f.display.alignWidgets=!0);cd(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),
0,e);e.line=b;f&&!Ld(a,b)&&(c=Fc(b)<a.scrollTop,od(b,b.height+Tc(e)),c&&wc(f,null,e.height),f.curOp.forceUpdate=!0);return!0});return e}function Yf(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|s)"+c[2]+"(?:$|s)")).test(b[d])||(b[d]+=" "+c[2])}return a}function ag(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode&&(a=h.innerMode(a,b),a.mode.blankLine))return a.mode.blankLine(a.state)}
function Se(a,b,c,d){for(var e=0;10>e;e++){d&&(d[0]=h.innerMode(a,c).mode);var f=a.token(b,c);if(b.pos>b.start)return f}throw Error("Mode "+a.name+" failed to advance stream.");}function Xf(a,b,c,d){function e(a){return{start:n.start,end:n.pos,string:n.current(),type:m||null,state:a?hd(f.mode,k):k}}var f=a.doc,g=f.mode;b=ca(f,b);var h=ka(f,b.line),k=tb(a,b.line,c),n=new Jf(h.text,a.options.tabSize),l;for(d&&(l=[]);(d||n.pos<b.ch)&&!n.eol();){n.start=n.pos;var m=Se(g,n,k);d&&l.push(e(!0))}return d?
l:e()}function lf(a,b,c,d,e,f,g){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var k=0,n=null,l=new Jf(b,a.options.tabSize),m=a.options.addModeClass&&[null];for(""==b&&Yf(ag(c,d),f);!l.eol();){if(l.pos>a.options.maxHighlightLength){h=!1;g&&mf(a,b,d,l.pos);l.pos=b.length;var w=null}else w=Yf(Se(c,l,d,m),f);if(m){var p=m[0].name;p&&(w="m-"+(w?p+" "+w:p))}if(!h||n!=w){for(;k<l.start;)k=Math.min(l.start,k+5E4),e(k,n);n=w}l.start=l.pos}for(;k<l.pos;)a=Math.min(l.pos,k+5E4),e(a,n),k=a}function ne(a,
b,c,d){var e=[a.state.modeGen],f={};lf(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},f,d);for(c=0;c<a.state.overlays.length;++c){var g=a.state.overlays[c],h=1,k=0;lf(a,b.text,g.mode,!0,function(a,b){for(var c=h;k<a;){var d=e[h];d>a&&e.splice(h,1,a,e[h+1],d);h+=2;k=Math.min(a,d)}if(b)if(g.opaque)e.splice(c,h-c,a,"cm-overlay "+b),h=c+2;else for(;c<h;c+=2)a=e[c+1],e[c+1]=(a?a+" ":"")+"cm-overlay "+b},f)}return{styles:e,classes:f.bgClass||f.textClass?f:null}}function Hg(a,b,c){if(!b.styles||b.styles[0]!=
a.state.modeGen){var d=ne(a,b,b.stateAfter=tb(a,Wa(b)));b.styles=d.styles;d.classes?b.styleClasses=d.classes:b.styleClasses&&(b.styleClasses=null);c===a.doc.frontier&&a.doc.frontier++}return b.styles}function mf(a,b,c,d){var e=a.doc.mode,f=new Jf(b,a.options.tabSize);f.start=f.pos=d||0;for(""==b&&ag(e,c);!f.eol()&&f.pos<=a.options.maxHighlightLength;)Se(e,f,c),f.start=f.pos}function bg(a,b){if(!a||/^\s*$/.test(a))return null;b=b.addModeClass?Lc:bi;return b[a]||(b[a]=a.replace(/\S+/g,"cm-$&"))}function hh(a,
b){var c=fa("span",null,null,Hb?"padding-right: .1px":null);c={pre:fa("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,splitSpaces:(Fa||Hb)&&a.getOption("lineWrapping")};b.measure={};for(var d=0;d<=(b.rest?b.rest.length:0);d++){var e=d?b.rest[d-1]:b.line,f;c.pos=0;c.addToken=Lh;if(null!=ja)var g=ja;else{g=Ob(a.display.measure,document.createTextNode("A\u062eA"));var h=dd(g,0,1).getBoundingClientRect();g=h&&h.left!=h.right?ja=3>dd(g,1,2).getBoundingClientRect().right-h.right:!1}g&&(f=Vc(e))&&
(c.addToken=cg(c.addToken,f));c.map=[];var k=b!=a.display.externalMeasured&&Wa(e);a:{var n=h=g=void 0,l=void 0,m=void 0,w=void 0,p=void 0,q=c;k=Hg(a,e,k);var r=e.markedSpans,t=e.text,u=0;if(r){var z=t.length,y=0;C=1;for(var oa="",x=0;;){if(x==y){m=l=n=h=w="";g=null;x=Infinity;for(var v=[],ba=0;ba<r.length;++ba){var A=r[ba],B=A.marker;"bookmark"==B.type&&A.from==y&&B.widgetNode?v.push(B):A.from<=y&&(null==A.to||A.to>y||B.collapsed&&A.to==y&&A.from==y)?(null!=A.to&&A.to!=y&&x>A.to&&(x=A.to,l=""),B.className&&
(m+=" "+B.className),B.css&&(w=B.css),B.startStyle&&A.from==y&&(n+=" "+B.startStyle),B.endStyle&&A.to==x&&(l+=" "+B.endStyle),B.title&&!h&&(h=B.title),B.collapsed&&(!g||0>Jg(g.marker,B))&&(g=A)):A.from>y&&x>A.from&&(x=A.from)}if(g&&(g.from||0)==y){Te(q,(null==g.to?z+1:g.to)-y,g.marker,null==g.from);if(null==g.to)break a;g.to==y&&(g=!1)}if(!g&&v.length)for(ba=0;ba<v.length;++ba)Te(q,0,v[ba])}if(y>=z)break;for(v=Math.min(z,x);;){if(oa){ba=y+oa.length;g||(A=ba>v?oa.slice(0,v-y):oa,q.addToken(q,A,p?p+
m:m,n,y+A.length==x?l:"",h,w));if(ba>=v){oa=oa.slice(v-y);y=v;break}y=ba;n=""}oa=t.slice(u,u=k[C++]);p=bg(k[C++],q.cm.options)}}}else for(var C=1;C<k.length;C+=2)q.addToken(q,t.slice(u,u=k[C]),bg(k[C+1],q.cm.options))}e.styleClasses&&(e.styleClasses.bgClass&&(c.bgClass=Sg(e.styleClasses.bgClass,c.bgClass||"")),e.styleClasses.textClass&&(c.textClass=Sg(e.styleClasses.textClass,c.textClass||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(Uh(a.display.measure)));0==d?(b.measure.map=c.map,
b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}Hb&&/\bcm-tab\b/.test(c.content.lastChild.className)&&(c.content.className="cm-tab-wrap-hack");aa(a,"renderLine",a,b.line,c.pre);c.pre.className&&(c.textClass=Sg(c.pre.className,c.textClass||""));return c}function Lh(a,b,c,d,e,f,g){if(b){var h=a.splitSpaces?b.replace(/ {3,}/g,Nh):b,k=a.cm.state.specialChars,n=!1;if(k.test(b)){q=document.createDocumentFragment();for(var l=0;;){k.lastIndex=
l;var m=k.exec(b),w=m?m.index-l:b.length-l;if(w){var p=document.createTextNode(h.slice(l,l+w));Fa&&9>eb?q.appendChild(fa("span",[p])):q.appendChild(p);a.map.push(a.pos,a.pos+w,p);a.col+=w;a.pos+=w}if(!m)break;l+=w+1;"\t"==m[0]?(p=a.cm.options.tabSize,m=p-a.col%p,p=q.appendChild(fa("span",Fg(m),"cm-tab")),p.setAttribute("role","presentation"),p.setAttribute("cm-text","\t"),a.col+=m):("\r"==m[0]||"\n"==m[0]?(p=q.appendChild(fa("span","\r"==m[0]?"\u240d":"\u2424","cm-invalidchar")),p.setAttribute("cm-text",
m[0])):(p=a.cm.options.specialCharPlaceholder(m[0]),p.setAttribute("cm-text",m[0]),Fa&&9>eb?q.appendChild(fa("span",[p])):q.appendChild(p)),a.col+=1);a.map.push(a.pos,a.pos+1,p);a.pos++}}else{a.col+=b.length;var q=document.createTextNode(h);a.map.push(a.pos,a.pos+b.length,q);Fa&&9>eb&&(n=!0);a.pos+=b.length}if(c||d||e||n||g)return b=c||"",d&&(b+=d),e&&(b+=e),d=fa("span",[q],b,g),f&&(d.title=f),a.content.appendChild(d);a.content.appendChild(q)}}function Nh(a){for(var b=" ",c=0;c<a.length-2;++c)b+=
c%2?" ":"\u00a0";return b+" "}function cg(a,b){return function(c,d,e,f,g,h,k){e=e?e+" cm-force-border":"cm-force-border";for(var n=c.pos,l=n+d.length;;){for(var m=0;m<b.length;m++){var w=b[m];if(w.to>n&&w.from<=n)break}if(w.to>=l)return a(c,d,e,f,g,h,k);a(c,d.slice(0,w.to-n),e,f,null,h,k);f=null;d=d.slice(w.to-n);n=w.to}}}function Te(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e);!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),
e.setAttribute("cm-marker",c.id));e&&(a.cm.display.input.setUneditable(e),a.content.appendChild(e));a.pos+=b}function pf(a,b){return 0==b.from.ch&&0==b.to.ch&&""==Na(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Kg(a,b,c,d){function e(a,c,e){a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);Eg(a);Ig(a,e);c=d?d(a):1;c!=a.height&&od(a,c);Bb(a,"change",a,b)}function f(a,b){for(var e=[];a<b;++a)e.push(new D(k[a],c?c[a]:null,d));return e}
var g=b.from,h=b.to,k=b.text,n=ka(a,g.line),l=ka(a,h.line),m=Na(k),w=c?c[k.length-1]:null,p=h.line-g.line;if(b.full)a.insert(0,f(0,k.length)),a.remove(k.length,a.size-k.length);else if(pf(a,b)){var q=f(0,k.length-1);e(l,l.text,w);p&&a.remove(g.line,p);q.length&&a.insert(g.line,q)}else n==l?1==k.length?e(n,n.text.slice(0,g.ch)+m+n.text.slice(h.ch),w):(q=f(1,k.length-1),q.push(new D(m+n.text.slice(h.ch),w,d)),e(n,n.text.slice(0,g.ch)+k[0],c?c[0]:null),a.insert(g.line+1,q)):1==k.length?(e(n,n.text.slice(0,
g.ch)+k[0]+l.text.slice(h.ch),c?c[0]:null),a.remove(g.line+1,p)):(e(n,n.text.slice(0,g.ch)+k[0],c?c[0]:null),e(l,m+l.text.slice(h.ch),w),q=f(1,k.length-1),1<p&&a.remove(g.line+1,p-1),a.insert(g.line+1,q));Bb(a,"change",a,b)}function sc(a){this.lines=a;this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function qf(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d];b+=e.chunkSize();c+=e.height;e.parent=this}this.size=b;this.height=c;this.parent=
null}function tc(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var k=f&&h.sharedHist;if(!c||k)b(h.doc,k),d(h.doc,a,k)}}}d(a,null,!0)}function dg(a,c){if(c.cm)throw Error("This document is already in use.");a.doc=c;c.cm=a;k(a);b(a);a.options.lineWrapping||r(a);a.options.mode=c.modeOption;ab(a)}function ka(a,b){b-=a.first;if(0>b||b>=a.size)throw Error("There is no line "+(b+a.first)+" in the document.");for(;!a.lines;)for(var c=0;;++c){var d=
a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function Uc(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function eg(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function od(a,b){if(b-=a.height)for(;a;a=a.parent)a.height+=b}function Wa(a){if(null==a.parent)return null;var b=a.parent;a=Xb(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=
b;++d)a+=c.children[d].chunkSize();return a+b.first}function Qe(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f;c+=e.chunkSize()}return c}while(!a.lines);for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function Fc(a){a=nd(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length&&(e=a.children[d],
e!=c);++d)b+=e.height;return b}function Vc(a){var b=a.order;null==b&&(b=a.order=ah(a.text));return b}function fg(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function gg(a,b){var c={from:ea(b.from),to:gd(b),text:Uc(a,b.from,b.to)};hg(a,c,b.from.line,b.to.line+1);tc(a,function(a){hg(a,c,b.from.line,b.to.line+1)},!0);return c}function fh(a){for(;a.length;)if(Na(a).ranges)a.pop();
else break}function Id(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g;if(g=e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0))){if(e.lastOp==d){fh(e.done);var h=Na(e.done)}else e.done.length&&!Na(e.done).ranges?h=Na(e.done):1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),h=Na(e.done)):h=void 0;g=h}if(g){var k=Na(h.changes);0==wa(b.from,b.to)&&0==wa(b.from,k.to)?k.to=gd(b):
h.changes.push(gg(a,b))}else for((h=Na(e.done))&&h.ranges||Rc(a.sel,e.done),h={changes:[gg(a,b)],generation:e.generation},e.done.push(h);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift();e.done.push(c);e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=f;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=b.origin;k||aa(a,"historyAdded")}function Rc(a,b){var c=Na(b);c&&c.ranges&&c.equals(a)||b.push(a)}function hg(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,
c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function ih(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function pd(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?cb.prototype.deepCopy.call(f):f);else{f=f.changes;var g=[];e.push({changes:g});for(var h=0;h<f.length;++h){var k=f[h],n;g.push({from:k.from,to:k.to,text:k.text});
if(b)for(var l in k)(n=l.match(/^spans_(\d+)$/))&&-1<Xb(b,Number(n[1]))&&(Na(g)[l]=k[l],delete k[l])}}}return e}function jb(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Lg(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)jb(f.ranges[h].anchor,b,c,d),jb(f.ranges[h].head,b,c,d)}else{for(h=0;h<f.changes.length;++h){var k=f.changes[h];if(c<k.from.line)k.from=T(k.from.line+d,k.from.ch),k.to=
T(k.to.line+d,k.to.ch);else if(b<=k.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function Kh(a,b){var c=b.from.line,d=b.to.line;b=b.text.length-(d-c)-1;Lg(a.done,c,d,b);Lg(a.undone,c,d,b)}function jh(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function Zf(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));Nc&&a.ctrlKey&&1==b&&(b=3);return b}function Bb(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=
Array.prototype.slice.call(arguments,2);if(Ib)var f=Ib.delayedCallbacks;else re?f=re:(f=re=[],setTimeout(Oh,0));for(var g=0;g<d.length;++g)f.push(c(d[g]))}}function Oh(){var a=re;re=null;for(var b=0;b<a.length;++b)a[b]()}function cc(a,b,c){"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}});aa(a,c||b.type,a,b);return jh(b)||b.codemirrorIgnore}function ke(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=
[]);for(var c=0;c<b.length;++c)-1==Xb(a,b[c])&&a.push(b[c])}}function rb(a,b){return(a=a._handlers&&a._handlers[b])&&0<a.length}function le(a){a.prototype.on=function(a,b){pa(this,a,b)};a.prototype.off=function(a,b){Ac(this,a,b)}}function kf(){this.id=null}function Jh(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);e+=f-d;e+=c-e%c;d=f+1;if(e>=b)return d}}function Fg(a){for(;Da.length<=a;)Da.push(Na(Da)+" ");return Da[a]}
function Na(a){return a[a.length-1]}function Xb(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function Vf(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function Pe(){}function Hd(a,b){Object.create?a=Object.create(a):(Pe.prototype=a,a=new Pe);b&&Dc(b,a);return a}function Dc(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function nf(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,
b)}}function $f(a,b){return b?-1<b.source.indexOf("\\w")&&Zg(a)?!0:b.test(a):Zg(a)}function Mh(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function of(a){return 768<=a.charCodeAt(0)&&Ng.test(a)}function fa(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function Jd(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);
return a}function Ob(a,b){return Jd(a).appendChild(b)}function Sc(){for(var a=document.activeElement;a&&a.root&&a.root.activeElement;)a=a.root.activeElement;return a}function Re(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function Sg(a,b){a=a.split(" ");for(var c=0;c<a.length;c++)a[c]&&!Re(a[c]).test(b)&&(b+=" "+a[c]);return b}function Th(a){if(document.body.getElementsByClassName)for(var b=document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}
function Ai(){var a;pa(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null;Th(Le)},100))});pa(window,"blur",function(){Th(Td)})}function Uh(a){if(null==bb){var b=fa("span","\u200b");Ob(a,fa("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(bb=1>=b.offsetWidth&&2<b.offsetHeight&&!(Fa&&8>eb))}a=bb?fa("span","\u200b"):fa("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");a.setAttribute("cm-text","");return a}function qh(a,b,c,d){if(!a)return d(b,
c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function Tg(a){return a.level%2?a.to:a.from}function $d(a){return a.level%2?a.from:a.to}function Ze(a){return(a=Vc(a))?Tg(a[0]):0}function sg(a){var b=Vc(a);return b?$d(Na(b)):a.text.length}function $e(a,b){var c=ka(a.doc,b);a=nd(c);a!=c&&(b=Wa(a));a=(c=Vc(a))?c[0].level%2?sg(a):Ze(a):0;return T(b,a)}function nc(a,b){var c=$e(a,
b.line);a=ka(a.doc,c.line);var d=Vc(a);return d&&0!=d[0].level?c:(a=Math.max(0,a.text.search(/\S/)),T(c.line,b.line==c.line&&b.ch<=a&&b.ch?0:a))}function ae(a,b){ff=null;for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return c;if(e.from==b||e.to==b)if(null==d)d=c;else{b=e.level;var f=a[d].level;a=a[0].level;a=b==a?!0:f==a?!1:b<f;if(a)return e.from!=e.to&&(ff=d),c;e.from!=e.to&&(ff=c);break}}return d}function Gb(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&of(a.text.charAt(b)));return b}
function Gf(a,b,c,d){var e=Vc(a);if(!e)return af(a,b,c,d);var f=ae(e,b),g=e[f];for(b=Gb(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(ae(e,b)==f)return b;g=e[f+c];return 0<c==g.level%2?g.to:g.from}g=e[f+=c];if(!g)return null;b=0<c==g.level%2?Gb(a,g.to,-1,d):Gb(a,g.from,1,d)}}function af(a,b,c,d){b+=c;if(d)for(;0<b&&of(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var yd=/gecko\/\d/i.test(navigator.userAgent),Vh=/MSIE \d/.test(navigator.userAgent),Hf=
/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Fa=Vh||Hf,eb=Fa&&(Vh?document.documentMode||6:Hf[1]),Hb=/WebKit\//.test(navigator.userAgent),rh=Hb&&/Qt\/\d+\.\d+/.test(navigator.userAgent),we=/Chrome\//.test(navigator.userAgent),oc=/Opera\//.test(navigator.userAgent),Ua=/Apple Computer/.test(navigator.vendor),bf=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Ug=/PhantomJS/.test(navigator.userAgent),zd=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),
xe=zd||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Nc=zd||/Mac/.test(navigator.platform),sh=/win/i.test(navigator.platform),ye=oc&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);ye&&(ye=Number(ye[1]));ye&&15<=ye&&(oc=!1,Hb=!0);var If=Nc&&(rh||oc&&(null==ye||12.11>ye)),Vg=yd||Fa&&9<=eb,Xh=!1,ze=!1;p.prototype=Dc({update:function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;c?(this.vert.style.display="block",this.vert.style.bottom=
b?d+"px":"0",this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+(a.viewHeight-(b?d:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");b?(this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px",this.horiz.firstChild.style.width=a.scrollWidth-a.clientWidth+(a.viewWidth-a.barLeft-(c?d:0))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedOverlay&&0<a.clientHeight&&
(0==d&&this.overlayHack(),this.checkedOverlay=!0);return{right:c?d:0,bottom:b?d:0}},setScrollLeft:function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a)},setScrollTop:function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a)},overlayHack:function(){this.horiz.style.minHeight=this.vert.style.minWidth=Nc&&!bf?"12px":"18px";var a=this,b=function(b){(b.target||b.srcElement)!=a.vert&&(b.target||b.srcElement)!=a.horiz&&ib(a.cm,td)(b)};pa(this.vert,"mousedown",b);pa(this.horiz,"mousedown",b)},
clear:function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)}},p.prototype);x.prototype=Dc({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},x.prototype);h.scrollbarModel={"native":p,"null":x};g.prototype.signal=function(a,b){rb(a,b)&&this.events.push(arguments)};g.prototype.finish=function(){for(var a=0;a<this.events.length;a++)aa.apply(null,this.events[a])};var T=h.Pos=function(a,b){if(!(this instanceof
T))return new T(a,b);this.line=a;this.ch=b},wa=h.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch},zc=null;la.prototype=Dc({init:function(a){function b(a){if(d.somethingSelected())zc=d.getSelections(),c.inaccurateSelection&&(c.prevInput="",c.inaccurateSelection=!1,f.value=zc.join("\n"),fe(f));else if(d.options.lineWiseCopyCut){var b=Qa(d);zc=b.text;"cut"==a.type?d.setSelections(b.ranges,null,lc):(c.prevInput="",f.value=b.text.join("\n"),fe(f))}else return;"cut"==a.type&&(d.state.cutIncoming=!0)}
var c=this,d=this.cm,e=this.wrapper=W(),f=this.textarea=e.firstChild;a.wrapper.insertBefore(e,a.wrapper.firstChild);zd&&(f.style.width="0px");pa(f,"input",function(){Fa&&9<=eb&&c.hasSelection&&(c.hasSelection=null);c.poll()});pa(f,"paste",function(a){if(Ma(a,d))return!0;d.state.pasteIncoming=!0;c.fastPoll()});pa(f,"cut",b);pa(f,"copy",b);pa(a.scroller,"paste",function(b){Wb(a,b)||(d.state.pasteIncoming=!0,c.focus())});pa(a.lineSpace,"selectstart",function(b){Wb(a,b)||Nb(b)});pa(f,"compositionstart",
function(){var a=d.getCursor("from");c.composing={start:a,range:d.markText(a,d.getCursor("to"),{className:"CodeMirror-composing"})}});pa(f,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},prepareSelection:function(){var a=this.cm,b=a.display,c=a.doc,d=ig(a);if(a.options.moveInputWithCursor){a=Hc(a,c.sel.primary().head,"div");c=b.wrapper.getBoundingClientRect();var e=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-
10,a.top+e.top-c.top));d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left))}return d},showSelection:function(a){var b=this.cm.display;Ob(b.cursorDiv,a.cursors);Ob(b.selectionDiv,a.selection);null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},reset:function(a){if(!this.contextMenuPending){var b=this.cm,c=b.doc;if(b.somethingSelected()){this.prevInput="";var d=c.sel.primary();var e=(d=Ah&&(100<d.to().line-d.from().line||1E3<(e=b.getSelection()).length))?
"-":e||b.getSelection();this.textarea.value=e;b.state.focused&&fe(this.textarea);Fa&&9<=eb&&(this.hasSelection=e)}else a||(this.prevInput=this.textarea.value="",Fa&&9<=eb&&(this.hasSelection=null));this.inaccurateSelection=d}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!xe||Sc()!=this.textarea))try{this.textarea.focus()}catch(n){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=
this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var a=this;a.pollingFast||a.polling.set(this.cm.options.pollInterval,function(){a.poll();a.cm.state.focused&&a.slowPoll()})},fastPoll:function(){function a(){c.poll()||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0;c.polling.set(20,a)},poll:function(){var a=this.cm,b=this.textarea,c=this.prevInput;if(this.contextMenuPending||!a.state.focused||$g(b)&&!c&&!this.composing||
Za(a)||a.options.disableInput||a.state.keySeq)return!1;var d=b.value;if(d==c&&!a.somethingSelected())return!1;if(Fa&&9<=eb&&this.hasSelection===d||Nc&&/[\uf700-\uf7ff]/.test(d))return a.display.input.reset(),!1;if(a.doc.sel==a.display.selForContextMenu){var e=d.charCodeAt(0);8203!=e||c||(c="\u200b");if(8666==e)return this.reset(),this.cm.execCommand("undo")}var f=0;for(e=Math.min(c.length,d.length);f<e&&c.charCodeAt(f)==d.charCodeAt(f);)++f;var g=this;pb(a,function(){Ba(a,d.slice(f),c.length-f,null,
g.composing?"*compose":null);1E3<d.length||-1<d.indexOf("\n")?b.value=g.prevInput="":g.prevInput=d;g.composing&&(g.composing.range.clear(),g.composing.range=a.markText(g.composing.start,a.getCursor("to"),{className:"CodeMirror-composing"}))});return!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){Fa&&9<=eb&&(this.hasSelection=null);this.fastPoll()},onContextMenu:function(a){function b(){if(null!=g.selectionStart){var a=e.somethingSelected(),b=
"\u200b"+(a?g.value:"");g.value="\u21da";g.value=b;d.prevInput=a?"":"\u200b";g.selectionStart=1;g.selectionEnd=b.length;f.selForContextMenu=e.doc.sel}}function c(){d.contextMenuPending=!1;d.wrapper.style.position="relative";g.style.cssText=n;Fa&&9>eb&&f.scrollbars.setScrollTop(f.scroller.scrollTop=k);if(null!=g.selectionStart){(!Fa||Fa&&9>eb)&&b();var a=0,c=function(){f.selForContextMenu==e.doc.sel&&0==g.selectionStart&&0<g.selectionEnd&&"\u200b"==d.prevInput?ib(e,xg.selectAll)(e):10>a++?f.detectingSelectAll=
setTimeout(c,500):f.input.reset()};f.detectingSelectAll=setTimeout(c,200)}}var d=this,e=d.cm,f=e.display,g=d.textarea,h=uc(e,a),k=f.scroller.scrollTop;if(h&&!oc){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(h)&&ib(e,za)(e.doc,Ca(h),lc);var n=g.style.cssText;d.wrapper.style.position="absolute";g.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: "+(Fa?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";
if(Hb)var l=window.scrollY;f.input.focus();Hb&&window.scrollTo(null,l);f.input.reset();e.somethingSelected()||(g.value=d.prevInput=" ");d.contextMenuPending=!0;f.selForContextMenu=e.doc.sel;clearTimeout(f.detectingSelectAll);Fa&&9<=eb&&b();if(Vg){Nf(a);var m=function(){Ac(window,"mouseup",m);setTimeout(c,20)};pa(window,"mouseup",m)}else setTimeout(c,50)}},setUneditable:Pe,needsContentAttribute:!1},la.prototype);ya.prototype=Dc({init:function(a){function b(a){if(d.somethingSelected())zc=d.getSelections(),
"cut"==a.type&&d.replaceSelection("",null,"cut");else if(d.options.lineWiseCopyCut){var b=Qa(d);zc=b.text;"cut"==a.type&&d.operation(function(){d.setSelections(b.ranges,0,lc);d.replaceSelection("",null,"cut")})}else return;if(a.clipboardData&&!zd)a.preventDefault(),a.clipboardData.clearData(),a.clipboardData.setData("text/plain",zc.join("\n"));else{var c=W();a=c.firstChild;d.display.lineSpace.insertBefore(c,d.display.lineSpace.firstChild);a.value=zc.join("\n");var e=document.activeElement;fe(a);setTimeout(function(){d.display.lineSpace.removeChild(c);
e.focus()},50)}}var c=this,d=c.cm;a=c.div=a.lineDiv;a.contentEditable="true";Ha(a);pa(a,"paste",function(a){Ma(a,d)});pa(a,"compositionstart",function(a){a=a.data;c.composing={sel:d.doc.sel,data:a,startData:a};if(a){var b=d.doc.sel.primary(),e=d.getLine(b.head.line).indexOf(a,Math.max(0,b.head.ch-a.length));-1<e&&e<=b.head.ch&&(c.composing.sel=Ca(T(b.head.line,e),T(b.head.line,e+a.length)))}});pa(a,"compositionupdate",function(a){c.composing.data=a.data});pa(a,"compositionend",function(a){var b=c.composing;
b&&(a.data==b.startData||/\u200b/.test(a.data)||(b.data=a.data),setTimeout(function(){b.handled||c.applyComposition(b);c.composing==b&&(c.composing=null)},50))});pa(a,"touchstart",function(){c.forceCompositionEnd()});pa(a,"input",function(){c.composing||c.pollContent()||pb(c.cm,function(){ab(d)})});pa(a,"copy",b);pa(a,"cut",b)},prepareSelection:function(){var a=ig(this.cm,!1);a.focus=this.cm.state.focused;return a},showSelection:function(a){a&&this.cm.display.view.length&&(a.focus&&this.showPrimarySelection(),
this.showMultipleSelections(a))},showPrimarySelection:function(){var a=window.getSelection(),b=this.cm.doc.sel.primary(),c=Ka(this.cm,a.anchorNode,a.anchorOffset),d=Ka(this.cm,a.focusNode,a.focusOffset);if(!c||c.bad||!d||d.bad||0!=wa(Va(c,d),b.from())||0!=wa(Ya(c,d),b.to()))if(c=Pa(this.cm,b.from()),d=Pa(this.cm,b.to()),c||d){var e=this.cm.display.view;b=a.rangeCount&&a.getRangeAt(0);c?d||(d=e[e.length-1].measure,d=d.maps?d.maps[d.maps.length-1]:d.map,d={node:d[d.length-1],offset:d[d.length-2]-d[d.length-
3]}):c={node:e[0].measure.map[2],offset:0};try{var f=dd(c.node,c.offset,d.offset,d.node)}catch(zf){}f&&(a.removeAllRanges(),a.addRange(f),b&&null==a.anchorNode?a.addRange(b):yd&&this.startGracePeriod());this.rememberSelection()}},startGracePeriod:function(){var a=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){a.gracePeriod=!1;a.selectionChanged()&&a.cm.operation(function(){a.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(a){Ob(this.cm.display.cursorDiv,
a.cursors);Ob(this.cm.display.selectionDiv,a.selection)},rememberSelection:function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;this.lastFocusOffset=a.focusOffset},selectionInEditor:function(){var a=window.getSelection();if(!a.rangeCount)return!1;a=a.getRangeAt(0).commonAncestorContainer;return Og(this.div,a)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},
getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():pb(this.cm,function(){b.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,a)},selectionChanged:function(){var a=window.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=
this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var a=window.getSelection(),b=this.cm;this.rememberSelection();var c=Ka(b,a.anchorNode,a.anchorOffset),d=Ka(b,a.focusNode,a.focusOffset);c&&d&&pb(b,function(){za(b.doc,Ca(c,d),lc);if(c.bad||d.bad)b.curOp.selectionChanged=!0})}},pollContent:function(){var a=this.cm,b=a.display,c=a.doc.sel.primary(),d=c.from();c=c.to();if(d.line<b.viewFrom||c.line>b.viewTo-
1)return!1;var e;d.line==b.viewFrom||0==(e=rc(a,d.line))?(d=Wa(b.view[0].line),e=b.view[0].node):(d=Wa(b.view[e].line),e=b.view[e-1].node.nextSibling);var f=rc(a,c.line);f==b.view.length-1?(c=b.viewTo-1,b=b.lineDiv.lastChild):(c=Wa(b.view[f+1].line)-1,b=b.view[f+1].node.previousSibling);b=a.doc.splitLines(qb(a,e,b,d,c));for(e=Uc(a.doc,T(d,0),T(c,ka(a.doc,c).text.length));1<b.length&&1<e.length;)if(Na(b)==Na(e))b.pop(),e.pop(),c--;else if(b[0]==e[0])b.shift(),e.shift(),d++;else break;var g=0;f=0;for(var h=
b[0],k=e[0],l=Math.min(h.length,k.length);g<l&&h.charCodeAt(g)==k.charCodeAt(g);)++g;h=Na(b);k=Na(e);for(l=Math.min(h.length-(1==b.length?g:0),k.length-(1==e.length?g:0));f<l&&h.charCodeAt(h.length-f-1)==k.charCodeAt(k.length-f-1);)++f;b[b.length-1]=h.slice(0,h.length-f);b[0]=b[0].slice(g);d=T(d,g);c=T(c,e.length?Na(e).length-f:0);if(1<b.length||b[0]||wa(d,c))return bd(a.doc,b,d,c,"+input"),!0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&
!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(a){a.data&&a.data!=a.startData&&ib(this.cm,Ba)(this.cm,a.data,0,a.sel)},setUneditable:function(a){a.setAttribute("contenteditable","false")},onKeyPress:function(a){a.preventDefault();ib(this.cm,Ba)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0)},onContextMenu:Pe,resetPosition:Pe,needsContentAttribute:!0},ya.prototype);h.inputStyles=
{textarea:la,contenteditable:ya};cb.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(0!=wa(c.anchor,d.anchor)||0!=wa(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new N(ea(this.ranges[b].anchor),ea(this.ranges[b].head));return new cb(a,this.primIndex)},
somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=wa(b,d.from())&&0>=wa(a,d.to()))return c}return-1}};N.prototype={from:function(){return Va(this.anchor,this.head)},to:function(){return Ya(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var th={left:0,right:0,top:0,bottom:0},Ad,
Ib=null,uh=0,Yb,cf,tg=0,be=0,yb=null;Fa?yb=-.53:yd?yb=15:we?yb=-.7:Ua&&(yb=-1/3);var ug=function(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail);null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta);return{x:b,y:c}};h.wheelEventPixels=function(a){a=ug(a);a.x*=yb;a.y*=yb;return a};var pc=new kf,vg=null,gd=h.changeEnd=function(a){return a.text?T(a.from.line+a.text.length-1,Na(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};
h.prototype={constructor:h,focus:function(){window.focus();this.display.input.focus()},setOption:function(a,b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,Ae.hasOwnProperty(a)&&ib(this,Ae[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](Ub(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:db(function(a,
b){var c=a.token?a:h.getMode(this.options,a);if(c.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:c,modeSpec:a,opaque:b&&b.opaque});this.state.modeGen++;ab(this)}),removeOverlay:db(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;ab(this);break}}}),indentLine:db(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?
"smart":"prev":b?"add":"subtract");Ra(this.doc,a)&&ud(this,a,b,c)}),indentSelection:db(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(ud(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&xc(this));else{var f=e.from();e=e.to();var g=Math.max(c,f.line);c=Math.min(this.lastLine(),e.line-(e.ch?0:1))+1;for(e=g;e<c;++e)ud(this,e,a);e=this.doc.sel.ranges;0==f.ch&&b.length==e.length&&0<e[d].from().ch&&La(this.doc,d,new N(f,e[d].to()),
lc)}}}),getTokenAt:function(a,b){return Xf(this,a,b)},getLineTokens:function(a,b){return Xf(this,T(a),b,!0)},getTokenTypeAt:function(a){a=ca(this.doc,a);var b=Hg(this,ka(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else{b=b[2*e+2];break}}c=b?b.indexOf("cm-overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?h.innerMode(b,this.getTokenAt(a).state).mode:
b},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!ce.hasOwnProperty(b))return c;var d=ce[b];a=this.getModeAt(a);if("string"==typeof a[b])d[a[b]]&&c.push(d[a[b]]);else if(a[b])for(var e=0;e<a[b].length;e++){var f=d[a[b][e]];f&&c.push(f)}else a.helperType&&d[a.helperType]?c.push(d[a.helperType]):d[a.name]&&c.push(d[a.name]);for(e=0;e<d._global.length;e++)b=d._global[e],b.pred(a,this)&&-1==Xb(c,b.val)&&c.push(b.val);return c},getStateAfter:function(a,b){var c=
this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return tb(this,a+1,b)},cursorCoords:function(a,b){var c=this.doc.sel.primary();a=null==a?c.head:"object"==typeof a?ca(this.doc,a):a?c.from():c.to();return Hc(this,a,b||"page")},charCoords:function(a,b){return Md(this,ca(this.doc,a),b||"page")},coordsChar:function(a,b){a=Ve(this,a,b||"page");return Uf(this,a.left,a.top)},lineAtHeight:function(a,b){a=Ve(this,{top:a,left:0},b||"page").top;return Qe(this.doc,a+this.display.viewOffset)},
heightAtLine:function(a,b){var c=!1;if("number"==typeof a){var d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);a=ka(this.doc,a)}return J(this,a,{top:0,left:0},b||"page").top+(c?this.doc.height-Fc(a):0)},defaultTextHeight:function(){return hb(this.display)},defaultCharWidth:function(){return Cc(this.display)},setGutterMarker:db(function(a,b,c){return cd(this.doc,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});d[b]=c;!c&&Mh(d)&&(a.gutterMarkers=
null);return!0})}),clearGutter:db(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,Lb(b,d,"gutter"),Mh(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),lineInfo:function(a){if("number"==typeof a){if(!Ra(this.doc,a))return null;var b=a;a=ka(this.doc,a);if(!a)return null}else if(b=Wa(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,
widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=Hc(this,ca(this.doc,a));var g=a.bottom,h=a.left;b.style.position="absolute";b.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(b);f.sizer.appendChild(b);if("over"==d)g=a.top;else if("above"==d||"near"==d){var k=Math.max(f.wrapper.clientHeight,this.doc.height),l=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==
d||a.bottom+b.offsetHeight>k)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=k&&(g=a.bottom);h+b.offsetWidth>l&&(h=l-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px");c&&(a=qe(this,h,g,h+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&vb(this,a.scrollTop),null!=a.scrollLeft&&Zc(this,a.scrollLeft))},triggerOnKeyDown:db(sf),
triggerOnKeyPress:db(sb),triggerOnKeyUp:S,execCommand:function(a){if(xg.hasOwnProperty(a))return xg[a].call(null,this)},triggerElectric:db(function(a){Ea(this,a)}),findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=ca(this.doc,a);f<b&&(a=wf(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:db(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?wf(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},Of)}),deleteH:db(function(a,
b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):yc(this,function(d){var e=wf(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=ca(this.doc,a);f<b&&(a=Hc(this,a,"div"),null==d?d=a.left:a.left=d,a=Kb(this,a,e,c),!a.hitSide);++f);return a},moveV:db(function(a,b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();d.extendSelectionsBy(function(g){if(f)return 0>
a?g.from():g.to();var h=Hc(c,g.head,"div");null!=g.goalColumn&&(h.left=g.goalColumn);e.push(h.left);var k=Kb(c,h,a,b);"page"==b&&g==d.sel.primary()&&wc(c,null,Md(c,k,"div").top-h.top);return k},Of);if(e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),findWordAt:function(a){var b=ka(this.doc,a.line).text,c=a.ch,d=a.ch;if(b){var e=this.getHelper(a,"wordChars");(0>a.xRel||d==b.length)&&c?--c:++d;var f=b.charAt(c);for(f=$f(f,e)?function(a){return $f(a,e)}:/\s/.test(f)?function(a){return/\s/.test(a)}:
function(a){return!/\s/.test(a)&&!$f(a)};0<c&&f(b.charAt(c-1));)--c;for(;d<b.length&&f(b.charAt(d));)++d}return new N(T(a.line,c),T(a.line,d))},toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?ha(this.display.cursorDiv,"CodeMirror-overwrite"):se(this.display.cursorDiv,"CodeMirror-overwrite"),aa(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==Sc()},scrollTo:db(function(a,b){null==
a&&null==b||Jc(this);null!=a&&(this.curOp.scrollLeft=a);null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-Xa(this)-this.display.barHeight,width:a.scrollWidth-Xa(this)-this.display.barWidth,clientHeight:gc(this),clientWidth:$b(this)}},scrollIntoView:db(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:T(a,0),
to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;null!=a.from.line?(Jc(this),this.curOp.scrollToPos=a):(a=qe(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin),this.scrollTo(a.scrollLeft,a.scrollTop))}),setSize:db(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}var d=this;null!=a&&(d.display.wrapper.style.width=c(a));null!=b&&
(d.display.wrapper.style.height=c(b));d.options.lineWrapping&&kg(this);var e=d.display.viewFrom;d.doc.iter(e,d.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){Lb(d,e,"widget");break}++e});d.curOp.forceUpdate=!0;aa(d,"refresh",this)}),operation:function(a){return pb(this,a)},refresh:db(function(){var a=this.display.cachedTextHeight;ab(this);this.curOp.forceUpdate=!0;sd(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);u(this);(null==a||
.5<Math.abs(a-hb(this.display)))&&k(this);aa(this,"refresh",this)}),swapDoc:db(function(a){var b=this.doc;b.cm=null;dg(this,a);sd(this);this.display.input.reset();this.scrollTo(a.scrollLeft,a.scrollTop);this.curOp.forceScroll=!0;Bb(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};
le(h);var Zh=h.defaults={},Ae=h.optionHandlers={},Wg=h.Init={toString:function(){return"CodeMirror.Init"}};na("value","",function(a,b){a.setValue(b)},!0);na("mode",null,function(a,c){a.doc.modeOption=c;b(a)},!0);na("indentUnit",2,b,!0);na("indentWithTabs",!1);na("smartIndent",!0);na("tabSize",4,function(a){e(a);sd(a);ab(a)},!0);na("lineSeparator",null,function(a,b){if(a.doc.lineSep=b){var c=[],d=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var f=a.text.indexOf(b,e);if(-1==f)break;e=f+b.length;
c.push(T(d,f))}d++});for(var e=c.length-1;0<=e;e--)bd(a.doc,b,c[e],T(c[e].line,c[e].ch+b.length))}});na("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");c!=h.Init&&a.refresh()});na("specialCharPlaceholder",function(a){var b=fa("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);b.setAttribute("aria-label",b.title);return b},function(a){a.refresh()},!0);na("electricChars",
!0);na("inputStyle",xe?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");},!0);na("rtlMoveVisually",!sh);na("wholeLineUpdateBefore",!0);na("theme","default",function(b){c(b);a(b)},!0);na("keyMap","default",function(a,b,c){b=Ub(b);(c=c!=h.Init&&Ub(c))&&c.detach&&c.detach(a,b);b.attach&&b.attach(a,c||null)});na("extraKeys",null);na("lineWrapping",!1,function(a){a.options.lineWrapping?(ha(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth=
"",a.display.sizerWidth=null):(se(a.display.wrapper,"CodeMirror-wrap"),r(a));k(a);ab(a);sd(a);setTimeout(function(){B(a)},100)},!0);na("gutters",[],function(b){y(b.options);a(b)},!0);na("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?K(a.display)+"px":"0";a.refresh()},!0);na("coverGutterNextToScrollbar",!1,function(a){B(a)},!0);na("scrollbarStyle","native",function(a){t(a);B(a);a.display.scrollbars.setScrollTop(a.doc.scrollTop);a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0);
na("lineNumbers",!1,function(b){y(b.options);a(b)},!0);na("firstLineNumber",1,a,!0);na("lineNumberFormatter",function(a){return a},a,!0);na("showCursorWhenSelecting",!1,Gc,!0);na("resetSelectionOnContextMenu",!0);na("lineWiseCopyCut",!0);na("readOnly",!1,function(a,b){"nocursor"==b?(Td(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||a.display.input.reset())});na("disableInput",!1,function(a,b){b||a.display.input.reset()},!0);na("dragDrop",!0,function(a,b,c){!b!=!(c&&c!=
h.Init)&&(c=a.display.dragFunctions,b=b?pa:Ac,b(a.display.scroller,"dragstart",c.start),b(a.display.scroller,"dragenter",c.simple),b(a.display.scroller,"dragover",c.simple),b(a.display.scroller,"drop",c.drop))});na("cursorBlinkRate",530);na("cursorScrollMargin",0);na("cursorHeight",1,Gc,!0);na("singleCursorHeightPerLine",!0,Gc,!0);na("workTime",100);na("workDelay",100);na("flattenSpans",!0,e,!0);na("addModeClass",!1,e,!0);na("pollInterval",100);na("undoDepth",200,function(a,b){a.doc.history.undoDepth=
b});na("historyEventDelay",1250);na("viewportMargin",10,function(a){a.refresh()},!0);na("maxHighlightLength",1E4,e,!0);na("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()});na("tabindex",null,function(a,b){a.display.input.getField().tabIndex=b||""});na("autofocus",null);var vh=h.modes={},wg=h.mimeModes={};h.defineMode=function(a,b){h.defaults.mode||"null"==a||(h.defaults.mode=a);2<arguments.length&&(b.dependencies=Array.prototype.slice.call(arguments,2));vh[a]=b};h.defineMIME=
function(a,b){wg[a]=b};h.resolveMode=function(a){if("string"==typeof a&&wg.hasOwnProperty(a))a=wg[a];else if(a&&"string"==typeof a.name&&wg.hasOwnProperty(a.name)){var b=wg[a.name];"string"==typeof b&&(b={name:b});a=Hd(b,a);a.name=b.name}else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return h.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};h.getMode=function(a,b){b=h.resolveMode(b);var c=vh[b.name];if(!c)return h.getMode(a,"text/plain");a=c(a,b);if(ef.hasOwnProperty(b.name)){c=
ef[b.name];for(var d in c)c.hasOwnProperty(d)&&(a.hasOwnProperty(d)&&(a["_"+d]=a[d]),a[d]=c[d])}a.name=b.name;b.helperType&&(a.helperType=b.helperType);if(b.modeProps)for(d in b.modeProps)a[d]=b.modeProps[d];return a};h.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});h.defineMIME("text/plain","null");var ef=h.modeExtensions={};h.extendMode=function(a,b){a=ef.hasOwnProperty(a)?ef[a]:ef[a]={};Dc(b,a)};h.defineExtension=function(a,b){h.prototype[a]=b};h.defineDocExtension=function(a,
b){kb.prototype[a]=b};h.defineOption=na;var Xg=[];h.defineInitHook=function(a){Xg.push(a)};var ce=h.helpers={};h.registerHelper=function(a,b,c){ce.hasOwnProperty(a)||(ce[a]=h[a]={_global:[]});ce[a][b]=c};h.registerGlobalHelper=function(a,b,c,d){h.registerHelper(a,b,d);ce[a]._global.push({pred:c,val:d})};var hd=h.copyState=function(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);a={};for(var c in b){var d=b[c];d instanceof Array&&(d=d.concat([]));a[c]=d}return a},Yg=h.startState=function(a,
b,c){return a.startState?a.startState(b,c):!0};h.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var xg=h.commands={selectAll:function(a){a.setSelection(T(a.firstLine(),0),T(a.lastLine()),lc)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),lc)},killLine:function(a){yc(a,function(b){if(b.empty()){var c=ka(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?
{from:b.head,to:T(b.head.line+1,0)}:{from:b.head,to:T(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){yc(a,function(b){return{from:T(b.from().line,0),to:ca(a.doc,T(b.to().line+1,0))}})},delLineLeft:function(a){yc(a,function(a){return{from:T(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){yc(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){yc(a,function(b){var c=
a.charCoords(b.head,"div").top+5;c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(T(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(T(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return $e(a,b.head.line)},{origin:"+move",bias:1})},
goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return nc(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){b=b.head.line;for(var c,d=ka(a.doc,b);c=oe(d,!1);)d=c.find(1,!0).line,b=null;c=(c=Vc(d))?c[0].level%2?Ze(d):sg(d):d.text.length;return T(null==b?Wa(d):b,c)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},
"div")},Of)},goLineLeft:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},Of)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5;c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?nc(a,b.head):c},Of)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,
"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},
delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from();f=Kc(a.getLine(f.line),f.ch,d);b.push(Array(d-
f%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){pb(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d].head,f=ka(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new T(e.line,e.ch-1)),0<e.ch)e=new T(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),T(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=ka(a.doc,e.line-1).text;g&&a.replaceRange(f.charAt(0)+
a.doc.lineSeparator()+g.charAt(g.length-1),T(e.line-1,g.length-1),T(e.line,1),"+transpose")}c.push(new N(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){pb(a,function(){for(var b=a.listSelections().length,c=0;c<b;c++){var d=a.listSelections()[c];a.replaceRange(a.doc.lineSeparator(),d.anchor,d.head,"+input");a.indentLine(d.from().line+1,null,!0);xc(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},de=h.keyMap={};de.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",
End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};de.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft",
"Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};de.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown",
"Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};de.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft",
"Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",
fallthrough:["basic","emacsy"]};de["default"]=Nc?de.macDefault:de.pcDefault;h.normalizeKeyMap=function(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!/^(name|fallthrough|(de|at)tach)$/.test(c)){if("..."!=d)for(var e=Vf(c.split(" "),He),f=0;f<e.length;f++){if(f==e.length-1){var g=e.join(" ");var h=d}else g=e.slice(0,f+1).join(" "),h="...";var k=b[g];if(!k)b[g]=h;else if(k!=h)throw Error("Inconsistent bindings for "+g);}delete a[c]}}for(var l in b)a[l]=b[l];return a};var Be=h.lookupKey=
function(a,b,c,d){b=Ub(b);var e=b.call?b.call(a,d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return Be(a,b.fallthrough,c,d);for(e=0;e<b.fallthrough.length;e++){var f=Be(a,b.fallthrough[e],c,d);if(f)return f}}},wh=h.isModifierKey=function(a){a="string"==typeof a?a:Bd[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a},$h=h.keyName=function(a,b){if(oc&&34==a.keyCode&&
a["char"])return!1;var c=Bd[a.keyCode],d=c;if(null==d||a.altGraphKey)return!1;a.altKey&&"Alt"!=c&&(d="Alt-"+d);(If?a.metaKey:a.ctrlKey)&&"Ctrl"!=c&&(d="Ctrl-"+d);(If?a.ctrlKey:a.metaKey)&&"Cmd"!=c&&(d="Cmd-"+d);!b&&a.shiftKey&&"Shift"!=c&&(d="Shift-"+d);return d};h.fromTextArea=function(a,b){function c(){a.value=k.getValue()}b=b?Dc(b):{};b.value=a.value;!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=Sc();b.autofocus=
d==a||null!=a.getAttribute("autofocus")&&d==document.body}if(a.form&&(pa(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var e=a.form,f=e.submit;try{var g=e.submit=function(){c();e.submit=f;e.submit();e.submit=g}}catch(ed){}}b.finishInit=function(b){b.save=c;b.getTextArea=function(){return a};b.toTextArea=function(){b.toTextArea=isNaN;c();a.parentNode.removeChild(b.getWrapperElement());a.style.display="";a.form&&(Ac(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=f))}};a.style.display=
"none";var k=h(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);return k};var Jf=h.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};Jf.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=
this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&
(this.lastColumnValue=Kc(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?Kc(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Kc(this.string,null,this.tabSize)-(this.lineStart?Kc(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==
b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var Kf=0,qc=h.TextMarker=function(a,b){this.lines=[];this.type=b;this.doc=a;this.id=++Kf};le(qc);qc.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&xa(a);if(rb(this,
"clear")){var c=this.find();c&&Bb(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=hf(f.markedSpans,this);a&&!this.collapsed?Lb(a,Wa(f),"text"):a&&(null!=g.to&&(d=Wa(f)),null!=g.from&&(c=Wa(f)));for(var h=f,k=void 0,l=f.markedSpans,m=g,p=0;p<l.length;++p)l[p]!=m&&(k||(k=[])).push(l[p]);h.markedSpans=k;null==g.from&&this.collapsed&&!Ld(this.doc,f)&&a&&od(f,hb(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=nd(this.lines[e]),
g=q(f),g>a.display.maxLineLength&&(a.display.maxLine=f,a.display.maxLineLength=g,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&ab(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&qd(a.doc));a&&Bb(a,"markerCleared",a,this);b&&Ic(a);this.parent&&this.parent.clear()}};qc.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=hf(f.markedSpans,this);if(null!=
g.from&&(c=T(b?f:Wa(f),g.from),-1==a))return c;if(null!=g.to&&(d=T(b?f:Wa(f),g.to),1==a))return d}return c&&{from:c,to:d}};qc.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&pb(c,function(){var d=a.line,e=Wa(a.line);if(e=lb(c,e))jg(e),c.curOp.selectionChanged=c.curOp.forceUpdate=!0;c.curOp.updateMaxLine=!0;Ld(b.doc,d)||null==b.height||(e=b.height,b.height=null,(e=Tc(b)-e)&&od(d,d.height+e))})};qc.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=
this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=Xb(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};qc.prototype.detachLine=function(a){this.lines.splice(Xb(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};Kf=0;var Lf=h.SharedTextMarker=function(a,b){this.markers=a;this.primary=b;for(b=0;b<a.length;++b)a[b].parent=this};le(Lf);Lf.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=
!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Bb(this,"clear")}};Lf.prototype.find=function(a,b){return this.primary.find(a,b)};var Mf=h.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.doc=a;this.node=b};le(Mf);Mf.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,d=Wa(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=Tc(this);od(c,Math.max(0,c.height-f));a&&
pb(a,function(){var b=-f;Fc(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&wc(a,null,b);Lb(a,d,"widget")})}};Mf.prototype.changed=function(){var a=this.height,b=this.doc.cm,c=this.line;this.height=null;var d=Tc(this)-a;d&&(od(c,c.height+d),b&&pb(b,function(){b.curOp.forceUpdate=!0;Fc(c)<(b.curOp&&b.curOp.scrollTop||b.doc.scrollTop)&&wc(b,null,d)}))};var D=h.Line=function(a,b,c){this.text=a;Ig(this,b);this.height=c?c(this):1};le(D);D.prototype.lineNo=function(){return Wa(this)};var bi={},Lc={};
sc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;Eg(f);Bb(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};qf.prototype=
{chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof sc))&&(a=[],this.collapse(a),this.children=[new sc(a)],this.children[0].parent=this)},collapse:function(a){for(var b=
0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<=f){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(;50<e.lines.length;)a=e.lines.splice(e.lines.length-25,25),a=new sc(a),e.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=
a.children.splice(a.children.length-5,5);b=new qf(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=Xb(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new qf(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){f=Math.min(b,f-a);if(e.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};var fc=0,kb=h.Doc=function(a,
b,c,d){if(!(this instanceof kb))return new kb(a,b,c,d);null==c&&(c=0);qf.call(this,[new sc([new D("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=c;c=T(c,0);this.sel=Ca(c);this.history=new fg(null);this.id=++fc;this.modeOption=b;this.lineSep=d;"string"==typeof a&&(a=this.splitLines(a));Kg(this,{from:c,to:c,text:a});za(this,Ca(c),lc)};kb.prototype=Hd(qf.prototype,{constructor:kb,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,
this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=eg(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:$a(function(a){var b=T(this.first,0),c=this.first+this.size-1;ic(this,{from:b,to:T(c,ka(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0);za(this,Ca(b))}),replaceRange:function(a,
b,c,d){b=ca(this,b);c=c?ca(this,c):b;bd(this,a,b,c,d)},getRange:function(a,b,c){a=Uc(this,ca(this,a),ca(this,b));return!1===c?a:a.join(c||this.lineSeparator())},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(Ra(this,a))return ka(this,a)},getLineNumber:function(a){return Wa(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=ka(this,a));return nd(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+
this.size-1},clipPos:function(a){return ca(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:$a(function(a,b,c){a=ca(this,"number"==typeof a?T(a,b||0):a);za(this,Ca(a,null),c)}),setSelection:$a(function(a,b,c){var d=ca(this,a);a=ca(this,b||a);za(this,Ca(d,a),c)}),extendSelection:$a(function(a,
b,c){oa(this,ca(this,a),b&&ca(this,b),c)}),extendSelections:$a(function(a,b){b=[];for(var c=0;c<a.length;c++)b[c]=ca(this,a[c]);ba(this,b)}),extendSelectionsBy:$a(function(a,b){ba(this,Vf(this.sel.ranges,a),b)}),setSelections:$a(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new N(ca(this,a[d].anchor),ca(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));za(this,v(e,b),c)}}),addSelection:$a(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new N(ca(this,a),
ca(this,b||a)));za(this,v(d,d.length-1),c)}),getSelection:function(a){for(var b=this.sel.ranges,c,d=0;d<b.length;d++){var e=Uc(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||this.lineSeparator())},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=Uc(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||this.lineSeparator()));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,
b,c||"+input")},replaceSelections:$a(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),text:this.splitLines(a[f]),origin:c}}if(f=b&&"end"!=b){f=[];c=a=T(this.first,0);for(e=0;e<d.length;e++){var h=d[e];g=Ne(h.from,a,c);var k=Ne(gd(h),a,c);a=h.to;c=k;"around"==b?(h=this.sel.ranges[e],h=0>wa(h.head,h.anchor),f[e]=new N(h?k:g,h?g:k)):f[e]=new N(g,g)}f=new cb(f,this.sel.primIndex)}b=f;for(f=d.length-1;0<=f;f--)ic(this,d[f]);b?Pb(this,b):
this.cm&&xc(this.cm)}),undo:$a(function(){ad(this,"undo")}),redo:$a(function(){ad(this,"redo")}),undoSelection:$a(function(){ad(this,"undo",!0)}),redoSelection:$a(function(){ad(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new fg(this.history.maxGeneration)},
markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:pd(this.history.done),undone:pd(this.history.undone)}},setHistory:function(a){var b=this.history=new fg(this.history.maxGeneration);b.done=pd(a.done.slice(0),null,!0);b.undone=pd(a.undone.slice(0),
null,!0)},addLineClass:$a(function(a,b,c){return cd(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(a[d]){if(Re(c).test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:$a(function(a,b,c){return cd(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass",e=a[d];if(e)if(null==c)a[d]=null;else{var f=e.match(Re(c));
if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}else return!1;return!0})}),addLineWidget:$a(function(a,b,c){return Gg(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return id(this,ca(this,a),ca(this,b),c,"range")},setBookmark:function(a,b){b={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};a=ca(this,
a);return id(this,a,a,b,"bookmark")},findMarksAt:function(a){a=ca(this,a);var b=[],c=ka(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=ca(this,a);b=ca(this,b);var d=[],e=a.line;this.iter(a.line,b.line+1,function(f){if(f=f.markedSpans)for(var g=0;g<f.length;g++){var h=f[g];e==a.line&&a.ch>h.to||null==h.from&&e!=a.line||e==b.line&&h.from>b.ch||c&&!c(h.marker)||
d.push(h.marker.parent||h.marker)}++e});return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=d.text.length+1;if(d>a)return b=a,!0;a-=d;++c});return ca(this,T(c,b))},indexFromPos:function(a){a=ca(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=
new kb(eg(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new kb(eg(this,b,c),a.mode||this.modeOption,b,this.lineSep);a.sharedHist&&(b.history=this.history);(this.linked||
(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=ua(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),f=b.clipPos(e.from);e=b.clipPos(e.to);wa(f,e)&&(f=id(b,f,e,d.primary,d.primary.type),d.markers.push(f),f.parent=d)}return b},unlinkDoc:function(a){a instanceof h&&(a=a.doc);if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);ld(ua(this));break}if(a.history==this.history){var c=
[a.id];tc(a,function(a){c.push(a.id)},!0);a.history=new fg(null);a.history.done=pd(this.history.done,c);a.history.undone=pd(this.history.undone,c)}},iterLinkedDocs:function(a){tc(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):Oa(a)},lineSeparator:function(){return this.lineSep||"\n"}});kb.prototype.eachLine=kb.prototype.iter;var wb="iter insert remove copy getEditor constructor".split(" "),ee;for(ee in kb.prototype)kb.prototype.hasOwnProperty(ee)&&
0>Xb(wb,ee)&&(h.prototype[ee]=function(a){return function(){return a.apply(this.doc,arguments)}}(kb.prototype[ee]));le(kb);var Nb=h.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},xh=h.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},Nf=h.e_stop=function(a){Nb(a);xh(a)},pa=h.on=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))},
Ac=h.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}},aa=h.signal=function(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},re=null,yh=30,xf=h.Pass={toString:function(){return"CodeMirror.Pass"}},lc={scroll:!1},yf={origin:"*mouse"},Of={origin:"+move"};
kf.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var Kc=h.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var f=a.indexOf("\t",d);if(0>f||f>=b)return e+(b-d);e+=f-d;e+=c-e%c;d=f+1}},Da=[""],fe=function(a){a.select()};zd?fe=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:Fa&&(fe=function(a){try{a.select()}catch(w){}});var vd=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,
Zg=h.isWordChar=function(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||vd.test(a))},Ng=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
var dd=document.createRange?function(a,b,c,d){var e=document.createRange();e.setEnd(d||a,c);e.setStart(a,b);return e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(Jb){return d}d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);return d};var Og=h.contains=function(a,b){3==b.nodeType&&(b=b.parentNode);if(a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)};Fa&&11>eb&&(Sc=function(){try{return document.activeElement}catch(n){return document.body}});
var se=h.rmClass=function(a,b){var c=a.className;if(b=Re(b).exec(c)){var d=c.slice(b.index+b[0].length);a.className=c.slice(0,b.index)+(d?b[1]+d:"")}},ha=h.addClass=function(a,b){var c=a.className;Re(b).test(c)||(a.className+=(c?" ":"")+b)},ec=!1,zh=function(){if(Fa&&9>eb)return!1;var a=fa("div");return"draggable"in a||"dragDrop"in a}(),bb,ja,Oa=h.splitLines=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==
a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},$g=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(w){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(I){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Ah=function(){var a=fa("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),
Qf=null,Bd={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",
63276:"PageUp",63277:"PageDown",63302:"Insert"};h.keyNames=Bd;(function(){for(var a=0;10>a;a++)Bd[a+48]=Bd[a+96]=String(a);for(a=65;90>=a;a++)Bd[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Bd[a+111]=Bd[a+63235]="F"+a})();var ff,ah=function(){function a(a){return 247>=a?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(a):
1424<=a&&1524>=a?"R":1536<=a&&1773>=a?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(a-1536):1774<=a&&2220>=a?"r":8192<=a&&8203>=a?"w":8204==a?"b":"L"}function b(a,b,c){this.level=a;this.from=b;this.to=c}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,f=/[Lb1n]/,g=/[1n]/;return function(h){if(!c.test(h))return!1;
for(var k=h.length,l=[],m=0,p;m<k;++m)l.push(a(h.charCodeAt(m)));m=0;for(var n="L";m<k;++m)p=l[m],"m"==p?l[m]=n:n=p;m=0;for(n="L";m<k;++m)p=l[m],"1"==p&&"r"==n?l[m]="n":e.test(p)&&(n=p,"r"==p&&(l[m]="R"));m=1;for(n=l[0];m<k-1;++m)p=l[m],"+"==p&&"1"==n&&"1"==l[m+1]?l[m]="1":","!=p||n!=l[m+1]||"1"!=n&&"n"!=n||(l[m]=n),n=p;for(m=0;m<k;++m)if(p=l[m],","==p)l[m]="N";else if("%"==p){for(n=m+1;n<k&&"%"==l[n];++n);var q=m&&"!"==l[m-1]||n<k&&"1"==l[n]?"1":"N";for(p=m;p<n;++p)l[p]=q;m=n-1}m=0;for(n="L";m<k;++m)p=
l[m],"L"==n&&"1"==p?l[m]="L":e.test(p)&&(n=p);for(m=0;m<k;++m)if(d.test(l[m])){for(n=m+1;n<k&&d.test(l[n]);++n);p="L"==(n<k?l[n]:"L");q="L"==(m?l[m-1]:"L")||p?"L":"R";for(p=m;p<n;++p)l[p]=q;m=n-1}n=[];var r;for(m=0;m<k;)if(f.test(l[m])){p=m;for(++m;m<k&&f.test(l[m]);++m);n.push(new b(0,p,m))}else{var t=m;q=n.length;for(++m;m<k&&"L"!=l[m];++m);for(p=t;p<m;)if(g.test(l[p])){t<p&&n.splice(q,0,new b(1,t,p));t=p;for(++p;p<m&&g.test(l[p]);++p);n.splice(q,0,new b(2,t,p));t=p}else++p;t<m&&n.splice(q,0,new b(1,
t,m))}1==n[0].level&&(r=h.match(/^\s+/))&&(n[0].from=r[0].length,n.unshift(new b(0,0,r[0].length)));1==Na(n).level&&(r=h.match(/\s+$/))&&(Na(n).to-=r[0].length,n.push(new b(0,k-r[0].length,k)));2==n[0].level&&n.unshift(new b(1,n[0].to,n[0].to));n[0].level!=Na(n).level&&n.push(new b(n[0].level,k,k));return n}}();h.version="5.5.1";return h}();(function(h){h(CodeMirror)})(function(h){var f=/^(\s*)(>[> ]*|[*+-]\s|(\d+)([.)]))(\s*)/,b=/^(\s*)(>[> ]*|[*+-]|(\d+)[.)])(\s*)$/,e=/[*+-]\s/;h.commands.newlineAndIndentContinueMarkdownList=function(d){if(d.getOption("disableInput"))return h.Pass;for(var k=d.listSelections(),c=[],a=0;a<k.length;a++){var l=k[a].head,u=d.getStateAfter(l.line),q=!1!==u.list,r=0!==u.quote,y=d.getLine(l.line);u=f.exec(y);if(!k[a].empty()||!q&&!r||!u){d.execCommand("newlineAndIndent");return}b.test(y)?(d.replaceRange("",
{line:l.line,ch:0},{line:l.line,ch:l.ch+1}),c[a]="\n"):(l=u[1],q=u[5],u=e.test(u[2])||0<=u[2].indexOf(">")?u[2]:parseInt(u[3],10)+1+u[4],c[a]="\n"+l+u+q)}d.replaceSelections(c)}});(function(h){"object"==typeof exports&&"object"==typeof module?h(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],h):h(CodeMirror)})(function(h){var f={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,
dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,
caseFold:!0},b={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};h.defineMode("xml",function(e,d){function k(a,b){function d(c){b.tokenize=c;return c(a,b)}var e=a.next();if("<"==e){if(a.eat("!"))return a.eat("[")?a.match("CDATA[")?d(l("atom","]]\x3e")):null:a.match("--")?d(l("comment","--\x3e")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),d(u(1))):null;if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),b.tokenize=
l("meta","?>"),"meta";m=a.eat("/")?"closeTag":"openTag";b.tokenize=c;return"tag bracket"}if("&"==e)return(a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"))?"atom":"error";a.eatWhile(/[^&<]/);return null}function c(b,c){var d=b.next();if(">"==d||"/"==d&&b.eat(">"))return c.tokenize=k,m=">"==d?"endTag":"selfcloseTag","tag bracket";if("="==d)return m="equals",null;if("<"==d)return c.tokenize=k,c.state=z,c.tagName=c.tagStart=
null,(b=c.tokenize(b,c))?b+" tag error":"tag error";if(/['"]/.test(d))return c.tokenize=a(d),c.stringStartCol=b.column(),c.tokenize(b,c);b.match(/^[^\s\u00a0=<>"']*[^\s\u00a0=<>"'\/]/);return"word"}function a(a){var b=function(b,d){for(;!b.eol();)if(b.next()==a){d.tokenize=c;break}return"string"};b.isInAttribute=!0;return b}function l(a,b){return function(c,d){for(;!c.eol();){if(c.match(b)){d.tokenize=k;break}c.next()}return a}}function u(a){return function(b,c){for(var d;null!=(d=b.next());){if("<"==
d)return c.tokenize=u(a+1),c.tokenize(b,c);if(">"==d)if(1==a){c.tokenize=k;break}else return c.tokenize=u(a-1),c.tokenize(b,c)}return"meta"}}function q(a,b,c){this.prev=a.context;this.tagName=b;this.indent=a.indented;this.startOfLine=c;if(K.doNotIndent.hasOwnProperty(b)||a.context&&a.context.noIndent)this.noIndent=!0}function r(a){a.context&&(a.context=a.context.prev)}function y(a,b){for(var c;a.context;){c=a.context.tagName;if(!K.contextGrabbers.hasOwnProperty(c)||!K.contextGrabbers[c].hasOwnProperty(b))break;
r(a)}}function z(a,b,c){return"openTag"==a?(c.tagStart=b.column(),p):"closeTag"==a?x:z}function p(a,b,c){if("word"==a)return c.tagName=b.current(),A="tag",C;if(K.allowMissingTagName&&"endTag"==a)return A="tag bracket",C(a,b,c);A="error";return p}function x(a,b,c){if("word"==a){a=b.current();c.context&&c.context.tagName!=a&&K.implicitlyClosed.hasOwnProperty(c.context.tagName)&&r(c);if(c.context&&c.context.tagName==a||!1===K.matchClosing)return A="tag",t;A="tag error";return B}if(K.allowMissingTagName&&
"endTag"==a)return A="tag bracket",t(a,b,c);A="error";return B}function t(a,b,c){if("endTag"!=a)return A="error",t;r(c);return z}function B(a,b,c){A="error";return t(a,b,c)}function C(a,b,c){if("word"==a)return A="attribute",F;if("endTag"==a||"selfcloseTag"==a){b=c.tagName;var d=c.tagStart;c.tagName=c.tagStart=null;"selfcloseTag"==a||K.autoSelfClosers.hasOwnProperty(b)?y(c,b):(y(c,b),c.context=new q(c,b,d==c.indented));return z}A="error";return C}function F(a,b,c){if("equals"==a)return H;K.allowMissing||
(A="error");return C(a,b,c)}function H(a,b,c){if("string"==a)return G;if("word"==a&&K.allowUnquoted)return A="string",C;A="error";return C(a,b,c)}function G(a,b,c){return"string"==a?G:C(a,b,c)}var E=e.indentUnit,K={};e=d.htmlMode?f:b;for(var g in e)K[g]=e[g];for(g in d)K[g]=d[g];var m,A;k.isInText=!0;return{startState:function(a){var b={tokenize:k,state:z,indented:a||0,tagName:null,tagStart:null,context:null};null!=a&&(b.baseIndent=a);return b},token:function(a,b){!b.tagName&&a.sol()&&(b.indented=
a.indentation());if(a.eatSpace())return null;m=null;var c=b.tokenize(a,b);(c||m)&&"comment"!=c&&(A=null,b.state=b.state(m||c,a,b),A&&(c="error"==A?c+" error":A));return c},indent:function(a,b,d){var e=a.context;if(a.tokenize.isInAttribute)return a.tagStart==a.indented?a.stringStartCol+1:a.indented+E;if(e&&e.noIndent)return h.Pass;if(a.tokenize!=c&&a.tokenize!=k)return d?d.match(/^(\s*)/)[0].length:0;if(a.tagName)return!1!==K.multilineTagIndentPastTag?a.tagStart+a.tagName.length+2:a.tagStart+E*(K.multilineTagIndentFactor||
1);if(K.alignCDATA&&/<!\[CDATA\[/.test(b))return 0;if((b=b&&/^<(\/)?([\w_:\.-]*)/.exec(b))&&b[1])for(;e;)if(e.tagName==b[2]){e=e.prev;break}else if(K.implicitlyClosed.hasOwnProperty(e.tagName))e=e.prev;else break;else if(b)for(;e;)if((d=K.contextGrabbers[e.tagName])&&d.hasOwnProperty(b[2]))e=e.prev;else break;for(;e&&e.prev&&!e.startOfLine;)e=e.prev;return e?e.indent+E:a.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:K.htmlMode?"html":
"xml",helperType:K.htmlMode?"html":"xml",skipAttribute:function(a){a.state==H&&(a.state=C)}}});h.defineMIME("text/xml","xml");h.defineMIME("application/xml","xml");h.mimeModes.hasOwnProperty("text/html")||h.defineMIME("text/html",{name:"xml",htmlMode:!0})});(function(h){h(CodeMirror)})(function(h){h.defineMode("markdown",function(f,b){function e(a,b,c){b.f=b.inline=c;return c(a,b)}function d(a){return!a||!/\S/.test(a.string)}function k(b){b.linkTitle=!1;b.em=!1;b.strong=!1;b.strikethrough=!1;b.quote=0;b.indentedCode=!1;H||b.f!=a||(b.f=y,b.block=c);b.trailingSpace=0;b.trailingSpaceNewLine=!1;b.prevLine=b.thisLine;return b.thisLine=null}function c(a,c){var g=a.sol(),k=!1!==c.list,p=c.indentedCode;c.indentedCode=!1;k&&(0<=c.indentationDiff?(4>c.indentationDiff&&
(c.indentation-=c.indentationDiff),c.list=null):0<c.indentation?(c.list=null,c.listDepth=Math.floor(c.indentation/4)):(c.list=!1,c.listDepth=0));var r=null;if(4<=c.indentationDiff)return a.skipToEnd(),p||d(c.prevLine)?(c.indentation-=4,c.indentedCode=!0,K.code):null;if(a.eatSpace())return null;if((r=a.match(Q))&&6>=r[1].length)return c.header=r[1].length,b.highlightFormatting&&(c.formatting="header"),c.f=c.inline,q(c);if(d(c.prevLine)||c.quote||k||p||!(r=a.match(ia))){if(a.eat(">"))return c.quote=
g?1:c.quote+1,b.highlightFormatting&&(c.formatting="quote"),a.eatSpace(),q(c);if("["===a.peek())return e(a,c,t);if(a.match(m,!0))return c.hr=!0,K.hr;if((d(c.prevLine)||k)&&(a.match(A,!1)||a.match(M,!1)))return a.match(A,!0)?g="ul":(a.match(M,!0),g="ol"),c.indentation=a.column()+a.current().length,c.list=!0,c.listDepth++,b.taskLists&&a.match(L,!1)&&(c.taskList=!0),c.f=c.inline,b.highlightFormatting&&(c.formatting=["list","list-"+g]),q(c);if(b.fencedCodeBlocks&&(r=a.match(Aa,!0)))return c.fencedChars=
r[1],a=r[2],h.findModeByName&&(g=h.findModeByName(a))&&(a=g.mime||g.mimes[0]),a=h.getMode(f,a),c.localMode="null"==a.name?null:a,c.localMode&&(c.localState=c.localMode.startState()),c.f=c.block=l,b.highlightFormatting&&(c.formatting="code-block"),c.code=!0,q(c)}else return c.header="="==r[0].charAt(0)?1:2,b.highlightFormatting&&(c.formatting="header"),c.f=c.inline,q(c);return e(a,c,c.inline)}function a(a,b){var d=G.token(a,b.htmlState);if(H&&null===b.htmlState.tagStart&&!b.htmlState.context&&b.htmlState.tokenize.isInText||
b.md_inside&&-1<a.current().indexOf(">"))b.f=y,b.block=c,b.htmlState=null;return d}function l(a,b){if(a.sol()&&b.fencedChars&&a.match(b.fencedChars,!1))return b.localMode=b.localState=null,b.f=b.block=u,null;if(b.localMode)return b.localMode.token(a,b.localState);a.skipToEnd();return K.code}function u(a,d){a.match(d.fencedChars);d.block=c;d.f=y;d.fencedChars=null;b.highlightFormatting&&(d.formatting="code-block");d.code=!0;a=q(d);d.code=!1;return a}function q(a){var c=[];if(a.formatting){c.push(K.formatting);
"string"===typeof a.formatting&&(a.formatting=[a.formatting]);for(var d=0;d<a.formatting.length;d++)c.push(K.formatting+"-"+a.formatting[d]),"header"===a.formatting[d]&&c.push(K.formatting+"-"+a.formatting[d]+"-"+a.header),"quote"===a.formatting[d]&&(!b.maxBlockquoteDepth||b.maxBlockquoteDepth>=a.quote?c.push(K.formatting+"-"+a.formatting[d]+"-"+a.quote):c.push("error"))}if(a.taskOpen)return c.push("meta"),c.length?c.join(" "):null;if(a.taskClosed)return c.push("property"),c.length?c.join(" "):null;
a.linkHref?c.push(K.linkHref,"url"):(a.strong&&c.push(K.strong),a.em&&c.push(K.em),a.strikethrough&&c.push(K.strikethrough),a.linkText&&c.push(K.linkText),a.code&&c.push(K.code));a.header&&c.push(K.header,K.header+"-"+a.header);a.quote&&(c.push(K.quote),!b.maxBlockquoteDepth||b.maxBlockquoteDepth>=a.quote?c.push(K.quote+"-"+a.quote):c.push(K.quote+"-"+b.maxBlockquoteDepth));!1!==a.list&&((d=(a.listDepth-1)%3)?1===d?c.push(K.list2):c.push(K.list3):c.push(K.list1));a.trailingSpaceNewLine?c.push("trailing-space-new-line"):
a.trailingSpace&&c.push("trailing-space-"+(a.trailingSpace%2?"a":"b"));return c.length?c.join(" "):null}function r(a,b){if(a.match(V,!0))return q(b)}function y(c,d){var e=d.text(c,d);if("undefined"!==typeof e)return e;if(d.list)return d.list=null,q(d);if(d.taskList)return"x"!==c.match(L,!0)[1]?d.taskOpen=!0:d.taskClosed=!0,b.highlightFormatting&&(d.formatting="task"),d.taskList=!1,q(d);d.taskOpen=!1;d.taskClosed=!1;if(d.header&&c.match(/^#+$/,!0))return b.highlightFormatting&&(d.formatting="header"),
q(d);e=c.sol();var f=c.next();if("\\"===f&&(c.next(),b.highlightFormatting))return c=q(d),d=K.formatting+"-escape",c?c+" "+d:d;if(d.linkTitle){d.linkTitle=!1;var g=f;"("===f&&(g=")");g=(g+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");if(c.match(new RegExp("^\\s*(?:[^"+g+"\\\\]+|\\\\\\\\|\\\\.)"+g),!0))return K.linkHref}if("`"===f){e=d.formatting;b.highlightFormatting&&(d.formatting="code");f=q(d);g=c.pos;c.eatWhile("`");c=1+c.pos-g;if(d.code){if(c===E)return d.code=!1,f;d.formatting=e}else E=c,d.code=
!0;return q(d)}if(d.code)return q(d);if("!"===f&&c.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return c.match(/\[[^\]]*\]/),d.inline=d.f=p,K.image;if("["===f&&c.match(/.*\](\(.*\)| ?\[.*\])/,!1))return d.linkText=!0,b.highlightFormatting&&(d.formatting="link"),q(d);if("]"===f&&d.linkText&&c.match(/\(.*\)| ?\[.*\]/,!1))return b.highlightFormatting&&(d.formatting="link"),c=q(d),d.linkText=!1,d.inline=d.f=p,c;if("<"===f&&c.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return d.f=d.inline=z,b.highlightFormatting&&
(d.formatting="link"),c=q(d),(c?c+" ":"")+K.linkInline;if("<"===f&&c.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return d.f=d.inline=z,b.highlightFormatting&&(d.formatting="link"),c=q(d),(c?c+" ":"")+K.linkEmail;if("<"===f&&c.match(/^(!--|\w)/,!1))return e=c.string.indexOf(">",c.pos),-1!=e&&(e=c.string.substring(c.start,e),/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(e)&&(d.md_inside=!0)),c.backUp(1),d.htmlState=h.startState(G),e=a,d.f=d.block=e,e(c,d);if("<"===f&&c.match(/^\/\w*?>/))return d.md_inside=
!1,"tag";g=!1;if(!b.underscoresBreakWords&&"_"===f&&"_"!==c.peek()&&c.match(/(\w)/,!1)){var k=c.pos-2;0<=k&&(k=c.string.charAt(k),"_"!==k&&k.match(/(\w)/,!1)&&(g=!0))}if("*"===f||"_"===f&&!g){if(!e||" "!==c.peek()){if(d.strong===f&&c.eat(f))return b.highlightFormatting&&(d.formatting="strong"),f=q(d),d.strong=!1,f;if(!d.strong&&c.eat(f))return d.strong=f,b.highlightFormatting&&(d.formatting="strong"),q(d);if(d.em===f)return b.highlightFormatting&&(d.formatting="em"),f=q(d),d.em=!1,f;if(!d.em)return d.em=
f,b.highlightFormatting&&(d.formatting="em"),q(d)}}else if(" "===f&&(c.eat("*")||c.eat("_"))){if(" "===c.peek())return q(d);c.backUp(1)}if(b.strikethrough)if("~"===f&&c.eatWhile(f)){if(d.strikethrough)return b.highlightFormatting&&(d.formatting="strikethrough"),f=q(d),d.strikethrough=!1,f;if(c.match(/^[^\s]/,!1))return d.strikethrough=!0,b.highlightFormatting&&(d.formatting="strikethrough"),q(d)}else if(" "===f&&c.match(/^~~/,!0)){if(" "===c.peek())return q(d);c.backUp(2)}" "===f&&(c.match(/ +$/,
!1)?d.trailingSpace++:d.trailingSpace&&(d.trailingSpaceNewLine=!0));return q(d)}function z(a,c){if(">"===a.next())return c.f=c.inline=y,b.highlightFormatting&&(c.formatting="link"),a=q(c),(a?a+" ":"")+K.linkInline;a.match(/^[^>]+/,!0);return K.linkInline}function p(a,c){if(a.eatSpace())return null;a=a.next();return"("===a||"["===a?(c.f=c.inline=x("("===a?")":"]"),b.highlightFormatting&&(c.formatting="link-string"),c.linkHref=!0,q(c)):"error"}function x(a){return function(c,d){if(c.next()===a)return d.f=
d.inline=y,b.highlightFormatting&&(d.formatting="link-string"),c=q(d),d.linkHref=!1,c;c.match(F(a),!0)&&c.backUp(1);d.linkHref=!0;return q(d)}}function t(a,c){return a.match(/^[^\]]*\]:/,!1)?(c.f=B,a.next(),b.highlightFormatting&&(c.formatting="link"),c.linkText=!0,q(c)):e(a,c,y)}function B(a,c){if(a.match(/^\]:/,!0))return c.f=c.inline=C,b.highlightFormatting&&(c.formatting="link"),a=q(c),c.linkText=!1,a;a.match(/^[^\]]+/,!0);return K.linkText}function C(a,b){if(a.eatSpace())return null;a.match(/^[^\s]+/,
!0);void 0===a.peek()?b.linkTitle=!0:a.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0);b.f=b.inline=y;return K.linkHref+" url"}function F(a){U[a]||(a=(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),U[a]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+a+")"));return U[a]}var H=h.modes.hasOwnProperty("xml"),G=h.getMode(f,H?{name:"xml",htmlMode:!0}:"text/plain");void 0===b.highlightFormatting&&(b.highlightFormatting=!1);void 0===b.maxBlockquoteDepth&&(b.maxBlockquoteDepth=
0);void 0===b.underscoresBreakWords&&(b.underscoresBreakWords=!0);void 0===b.taskLists&&(b.taskLists=!1);void 0===b.strikethrough&&(b.strikethrough=!1);void 0===b.tokenTypeOverrides&&(b.tokenTypeOverrides={});var E=0,K={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"tag",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough"},g;for(g in K)K.hasOwnProperty(g)&&
b.tokenTypeOverrides[g]&&(K[g]=b.tokenTypeOverrides[g]);var m=/^([*\-_])(?:\s*\1){2,}\s*$/,A=/^[*\-+]\s+/,M=/^[0-9]+([.)])\s+/,L=/^\[(x| )\](?=\s)/,Q=b.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,ia=/^ *(?:={1,}|-{1,})\s*$/,V=/^[^#!\[\]*_\\<>` "'(~]+/,Aa=new RegExp("^("+(!0===b.fencedCodeBlocks?"~~~+|```+":b.fencedCodeBlocks)+")[ \\t]*([\\w+#]*)"),U=[],X={startState:function(){return{f:c,prevLine:null,thisLine:null,block:c,htmlState:null,indentation:0,inline:y,text:r,formatting:!1,linkText:!1,
linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(a){return{f:a.f,prevLine:a.prevLine,thisLine:a.this,block:a.block,htmlState:a.htmlState&&h.copyState(G,a.htmlState),indentation:a.indentation,localMode:a.localMode,localState:a.localMode?h.copyState(a.localMode,a.localState):null,inline:a.inline,text:a.text,formatting:!1,linkTitle:a.linkTitle,code:a.code,em:a.em,
strong:a.strong,strikethrough:a.strikethrough,header:a.header,hr:a.hr,taskList:a.taskList,list:a.list,listDepth:a.listDepth,quote:a.quote,indentedCode:a.indentedCode,trailingSpace:a.trailingSpace,trailingSpaceNewLine:a.trailingSpaceNewLine,md_inside:a.md_inside,fencedChars:a.fencedChars}},token:function(a,b){b.formatting=!1;if(a!=b.thisLine){var c=b.header||b.hr;b.header=0;b.hr=!1;if(a.match(/^\s*$/,!0)||c){k(b);if(!c)return null;b.prevLine=null}b.prevLine=b.thisLine;b.thisLine=a;b.taskList=!1;b.trailingSpace=
0;b.trailingSpaceNewLine=!1;b.f=b.block;c=a.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;var d=4*Math.floor((c-b.indentation)/4);4<d&&(d=4);d=b.indentation+d;b.indentationDiff=d-b.indentation;b.indentation=d;if(0<c)return null}return b.f(a,b)},innerMode:function(b){return b.block==a?{state:b.htmlState,mode:G}:b.localState?{state:b.localState,mode:b.localMode}:{state:b,mode:X}},blankLine:k,getType:q,fold:"markdown"};return X},"xml");h.defineMIME("text/x-markdown","markdown")});(function(h,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define(f):h.vhCheck=f()})(this,function(){function h(){var f=document.createElement("div");f.style.cssText="position: fixed; top: 0; bottom: 0;";document.documentElement.insertBefore(f,document.documentElement.firstChild);var b=document.createElement("div");b.style.cssText="position: fixed; top: 0; height: 100vh";document.documentElement.insertBefore(b,document.documentElement.firstChild);
var e=b.offsetHeight-f.offsetHeight;document.documentElement.removeChild(f);document.documentElement.removeChild(b);return e}return function(f){f="string"===typeof f?f:"vh-offset";var b=h();if(!b)return!1;document.documentElement.style.setProperty("--"+f,b+"px");window.addEventListener("orientationchange",function(){var b=h();document.documentElement.style.setProperty("--"+f,b+"px")},!1);return!0}});/*


 chroma.js - JavaScript library for color conversions

 Copyright (c) 2011-2017, Gregor Aisch
 All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.

 3. The name Gregor Aisch may not be used to endorse or promote products
    derived from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


*/
(function(){var h,f,b=[].slice;var e=function(){var a;var b={};var c="Boolean Number String Function Array Date RegExp Undefined Null".split(" ");var d=0;for(a=c.length;d<a;d++){var e=c[d];b["[object "+e+"]"]=e.toLowerCase()}return function(a){a=Object.prototype.toString.call(a);return b[a]||"object"}}();var d=function(a,b,c){null==b&&(b=0);null==c&&(c=1);a<b&&(a=b);a>c&&(a=c);return a};var k=function(a){return 3<=a.length?[].slice.call(a):a[0]};var c=function(a){var b,c;a._clipped=!1;a._unclipped=
a.slice(0);for(b=c=0;3>c;b=++c)if(3>b){if(0>a[b]||255<a[b])a._clipped=!0;0>a[b]&&(a[b]=0);255<a[b]&&(a[b]=255)}else 3===b&&(0>a[b]&&(a[b]=0),1<a[b]&&(a[b]=1));a._clipped||delete a._unclipped;return a};var a=Math.PI;var l=Math.round;var u=Math.cos;var q=Math.floor;var r=Math.pow;var y=Math.log;var z=Math.sin;var p=Math.sqrt;var x=Math.atan2;var t=Math.max;var B=Math.abs;var C=2*a;var F=a/3;var H=a/180;var G=180/a;var E=function(){return arguments[0]instanceof L?arguments[0]:function(a,b,c){c.prototype=
a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(L,arguments,function(){})};E["default"]=E;var K=[];"undefined"!==typeof module&&null!==module&&null!=module.exports&&(module.exports=E);if("function"===typeof define&&define.amd)define([],function(){return E});else{var g="undefined"!==typeof exports&&null!==exports?exports:this;g.chroma=E}E.version="1.3.5";var m={};var A=[];var M=!1;var L=function(){function a(){var a,b;var d=[];var e=0;for(b=arguments.length;e<b;e++){var f=arguments[e];
null!=f&&d.push(f)}1<d.length&&(a=d[d.length-1]);if(null!=m[a])this._rgb=c(m[a](k(d.slice(0,-1))));else{M||(A=A.sort(function(a,b){return b.p-a.p}),M=!0);b=0;for(f=A.length;b<f&&!(a=A[b],a=a.test.apply(a,d));b++);a&&(this._rgb=c(m[a].apply(m,d)))}null==this._rgb&&console.warn("unknown format: "+d);null==this._rgb&&(this._rgb=[0,0,0]);3===this._rgb.length&&this._rgb.push(1)}a.prototype.toString=function(){return this.hex()};a.prototype.clone=function(){return E(me._rgb)};return a}();E._input=m;E.brewer=
h={OrRd:"#fff7ec #fee8c8 #fdd49e #fdbb84 #fc8d59 #ef6548 #d7301f #b30000 #7f0000".split(" "),PuBu:"#fff7fb #ece7f2 #d0d1e6 #a6bddb #74a9cf #3690c0 #0570b0 #045a8d #023858".split(" "),BuPu:"#f7fcfd #e0ecf4 #bfd3e6 #9ebcda #8c96c6 #8c6bb1 #88419d #810f7c #4d004b".split(" "),Oranges:"#fff5eb #fee6ce #fdd0a2 #fdae6b #fd8d3c #f16913 #d94801 #a63603 #7f2704".split(" "),BuGn:"#f7fcfd #e5f5f9 #ccece6 #99d8c9 #66c2a4 #41ae76 #238b45 #006d2c #00441b".split(" "),YlOrBr:"#ffffe5 #fff7bc #fee391 #fec44f #fe9929 #ec7014 #cc4c02 #993404 #662506".split(" "),
YlGn:"#ffffe5 #f7fcb9 #d9f0a3 #addd8e #78c679 #41ab5d #238443 #006837 #004529".split(" "),Reds:"#fff5f0 #fee0d2 #fcbba1 #fc9272 #fb6a4a #ef3b2c #cb181d #a50f15 #67000d".split(" "),RdPu:"#fff7f3 #fde0dd #fcc5c0 #fa9fb5 #f768a1 #dd3497 #ae017e #7a0177 #49006a".split(" "),Greens:"#f7fcf5 #e5f5e0 #c7e9c0 #a1d99b #74c476 #41ab5d #238b45 #006d2c #00441b".split(" "),YlGnBu:"#ffffd9 #edf8b1 #c7e9b4 #7fcdbb #41b6c4 #1d91c0 #225ea8 #253494 #081d58".split(" "),Purples:"#fcfbfd #efedf5 #dadaeb #bcbddc #9e9ac8 #807dba #6a51a3 #54278f #3f007d".split(" "),
GnBu:"#f7fcf0 #e0f3db #ccebc5 #a8ddb5 #7bccc4 #4eb3d3 #2b8cbe #0868ac #084081".split(" "),Greys:"#ffffff #f0f0f0 #d9d9d9 #bdbdbd #969696 #737373 #525252 #252525 #000000".split(" "),YlOrRd:"#ffffcc #ffeda0 #fed976 #feb24c #fd8d3c #fc4e2a #e31a1c #bd0026 #800026".split(" "),PuRd:"#f7f4f9 #e7e1ef #d4b9da #c994c7 #df65b0 #e7298a #ce1256 #980043 #67001f".split(" "),Blues:"#f7fbff #deebf7 #c6dbef #9ecae1 #6baed6 #4292c6 #2171b5 #08519c #08306b".split(" "),PuBuGn:"#fff7fb #ece2f0 #d0d1e6 #a6bddb #67a9cf #3690c0 #02818a #016c59 #014636".split(" "),
Viridis:"#440154 #482777 #3f4a8a #31678e #26838f #1f9d8a #6cce5a #b6de2b #fee825".split(" "),Spectral:"#9e0142 #d53e4f #f46d43 #fdae61 #fee08b #ffffbf #e6f598 #abdda4 #66c2a5 #3288bd #5e4fa2".split(" "),RdYlGn:"#a50026 #d73027 #f46d43 #fdae61 #fee08b #ffffbf #d9ef8b #a6d96a #66bd63 #1a9850 #006837".split(" "),RdBu:"#67001f #b2182b #d6604d #f4a582 #fddbc7 #f7f7f7 #d1e5f0 #92c5de #4393c3 #2166ac #053061".split(" "),PiYG:"#8e0152 #c51b7d #de77ae #f1b6da #fde0ef #f7f7f7 #e6f5d0 #b8e186 #7fbc41 #4d9221 #276419".split(" "),
PRGn:"#40004b #762a83 #9970ab #c2a5cf #e7d4e8 #f7f7f7 #d9f0d3 #a6dba0 #5aae61 #1b7837 #00441b".split(" "),RdYlBu:"#a50026 #d73027 #f46d43 #fdae61 #fee090 #ffffbf #e0f3f8 #abd9e9 #74add1 #4575b4 #313695".split(" "),BrBG:"#543005 #8c510a #bf812d #dfc27d #f6e8c3 #f5f5f5 #c7eae5 #80cdc1 #35978f #01665e #003c30".split(" "),RdGy:"#67001f #b2182b #d6604d #f4a582 #fddbc7 #ffffff #e0e0e0 #bababa #878787 #4d4d4d #1a1a1a".split(" "),PuOr:"#7f3b08 #b35806 #e08214 #fdb863 #fee0b6 #f7f7f7 #d8daeb #b2abd2 #8073ac #542788 #2d004b".split(" "),
Set2:"#66c2a5 #fc8d62 #8da0cb #e78ac3 #a6d854 #ffd92f #e5c494 #b3b3b3".split(" "),Accent:"#7fc97f #beaed4 #fdc086 #ffff99 #386cb0 #f0027f #bf5b17 #666666".split(" "),Set1:"#e41a1c #377eb8 #4daf4a #984ea3 #ff7f00 #ffff33 #a65628 #f781bf #999999".split(" "),Set3:"#8dd3c7 #ffffb3 #bebada #fb8072 #80b1d3 #fdb462 #b3de69 #fccde5 #d9d9d9 #bc80bd #ccebc5 #ffed6f".split(" "),Dark2:"#1b9e77 #d95f02 #7570b3 #e7298a #66a61e #e6ab02 #a6761d #666666".split(" "),Paired:"#a6cee3 #1f78b4 #b2df8a #33a02c #fb9a99 #e31a1c #fdbf6f #ff7f00 #cab2d6 #6a3d9a #ffff99 #b15928".split(" "),
Pastel2:"#b3e2cd #fdcdac #cbd5e8 #f4cae4 #e6f5c9 #fff2ae #f1e2cc #cccccc".split(" "),Pastel1:"#fbb4ae #b3cde3 #ccebc5 #decbe4 #fed9a6 #ffffcc #e5d8bd #fddaec #f2f2f2".split(" ")};(function(){var a;var b=[];for(a in h)b.push(h[a.toLowerCase()]=h[a]);return b})();var Q={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",
cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",
darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",
lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",
magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",
orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",
slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};E.colors=Q;var ia=function(){var a=k(arguments);var b=a[0];var c=a[1];var d=a[2];b=(b+16)/116;var e=isNaN(c)?b:b+c/500;d=isNaN(d)?b:b-d/200;b=U.Yn*Aa(b);e=U.Xn*Aa(e);d=U.Zn*Aa(d);var f=V(3.2404542*e-1.5371385*b-
.4985314*d);c=V(-.969266*e+1.8760108*b+.041556*d);d=V(.0556434*e-.2040259*b+1.0572252*d);return[f,c,d,3<a.length?a[3]:1]};var V=function(a){return 255*(.00304>=a?12.92*a:1.055*r(a,1/2.4)-.055)};var Aa=function(a){return a>U.t1?a*a*a:U.t2*(a-U.t0)};var U={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452};var X=function(){var a=k(arguments);a=Z(a[0],a[1],a[2]);var b=a[0];var c=a[1];return[116*c-16,500*(b-c),200*(c-a[2])]};var da=function(a){return.04045>=(a/=255)?
a/12.92:r((a+.055)/1.055,2.4)};var R=function(a){return a>U.t3?r(a,1/3):a/U.t2+U.t0};var Z=function(){var a=k(arguments);var b=a[0];var c=a[1];var d=a[2];b=da(b);c=da(c);d=da(d);a=R((.4124564*b+.3575761*c+.1804375*d)/U.Xn);var e=R((.2126729*b+.7151522*c+.072175*d)/U.Yn);c=R((.0193339*b+.119192*c+.9503041*d)/U.Zn);return[a,e,c]};E.lab=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(L,b.call(arguments).concat(["lab"]),function(){})};m.lab=ia;
L.prototype.lab=function(){return X(this._rgb)};var sa=function(a){var b;a=function(){var c;var d=[];var e=0;for(c=a.length;e<c;e++)b=a[e],d.push(E(b));return d}();if(2===a.length){var c=function(){var c;var d=[];var e=0;for(c=a.length;e<c;e++)b=a[e],d.push(b.lab());return d}();var d=c[0];var e=c[1];c=function(a){var b,c;var f=[];for(b=c=0;2>=c;b=++c)f.push(d[b]+a*(e[b]-d[b]));return E.lab.apply(E,f)}}else if(3===a.length){c=function(){var c;var d=[];var e=0;for(c=a.length;e<c;e++)b=a[e],d.push(b.lab());
return d}();d=c[0];e=c[1];var f=c[2];c=function(a){var b,c;var g=[];for(b=c=0;2>=c;b=++c)g.push((1-a)*(1-a)*d[b]+2*(1-a)*a*e[b]+a*a*f[b]);return E.lab.apply(E,g)}}else if(4===a.length){c=function(){var c;var d=[];var e=0;for(c=a.length;e<c;e++)b=a[e],d.push(b.lab());return d}();d=c[0];e=c[1];f=c[2];var g=c[3];c=function(a){var b,c;var h=[];for(b=c=0;2>=c;b=++c)h.push((1-a)*(1-a)*(1-a)*d[b]+3*(1-a)*(1-a)*a*e[b]+3*(1-a)*a*a*f[b]+a*a*a*g[b]);return E.lab.apply(E,h)}}else if(5===a.length){var h=sa(a.slice(0,
3));var k=sa(a.slice(2,5));c=function(a){return.5>a?h(2*a):k(2*(a-.5))}}return c};E.bezier=function(a){var b=sa(a);b.scale=function(){return E.scale(b)};return b};E.cubehelix=function(a,b,d,f,g){null==a&&(a=300);null==b&&(b=-1.5);null==d&&(d=1);null==f&&(f=1);null==g&&(g=[0,1]);var h=0;if("array"===e(g))var k=g[1]-g[0];else k=0,g=[g,g];var l=function(e){var l=C*((a+120)/360+b*e);var m=r(g[0]+k*e,f);e=(0!==h?d[0]+e*h:d)*m*(1-m)/2;var p=u(l);l=z(l);return E(c([255*(m+e*(-.14861*p+1.78277*l)),255*(m+
e*(-.29227*p-.90649*l)),255*(m+1.97294*e*p)]))};l.start=function(b){if(null==b)return a;a=b;return l};l.rotations=function(a){if(null==a)return b;b=a;return l};l.gamma=function(a){if(null==a)return f;f=a;return l};l.hue=function(a){if(null==a)return d;d=a;"array"===e(d)?(h=d[1]-d[0],0===h&&(d=d[1])):h=0;return l};l.lightness=function(a){if(null==a)return g;"array"===e(a)?(g=a,k=a[1]-a[0]):(g=[a,a],k=0);return l};l.scale=function(){return E.scale(l)};l.hue(d);return l};E.random=function(){var a;var b=
"#";for(a=0;6>a;++a)b+="0123456789abcdef".charAt(q(16*Math.random()));return new L(b)};K=[];var qa=function(a,b,c,d){var f;null==c&&(c=.5);null==d&&(d="rgb");"object"!==e(a)&&(a=E(a));"object"!==e(b)&&(b=E(b));var g=0;for(f=K.length;g<f;g++){var h=K[g];if(d===h[0]){var k=h[1](a,b,c,d);break}}if(null==k)throw"color mode "+d+" is not supported";return k.alpha(a.alpha()+c*(b.alpha()-a.alpha()))};E.interpolate=qa;L.prototype.interpolate=function(a,b,c){return qa(this,a,b,c)};E.mix=qa;L.prototype.mix=
L.prototype.interpolate;m.rgb=function(){var a;var b=k(arguments);var c=[];for(a in b){var d=b[a];c.push(d)}return c};E.rgb=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(L,b.call(arguments).concat(["rgb"]),function(){})};L.prototype.rgb=function(a){null==a&&(a=!0);return a?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)};L.prototype.rgba=function(a){null==a&&(a=!0);return a?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),
this._rgb[3]]:this._rgb.slice(0)};A.push({p:3,test:function(a){var b=k(arguments);if("array"===e(b)&&3===b.length||4===b.length&&"number"===e(b[3])&&0<=b[3]&&1>=b[3])return"rgb"}});m.lrgb=m.rgb;var ma=function(a){var b;var c=1/a.length;var d=[0,0,0,0];var e=0;for(b=a.length;e<b;e++){var f=a[e];f=f._rgb;d[0]+=r(f[0],2)*c;d[1]+=r(f[1],2)*c;d[2]+=r(f[2],2)*c;d[3]+=f[3]*c}d[0]=p(d[0]);d[1]=p(d[1]);d[2]=p(d[2]);return new L(d)};K.push(["lrgb",function(a,b,c,d){a=a._rgb;b=b._rgb;return new L(p(r(a[0],2)*
(1-c)+r(b[0],2)*c),p(r(a[1],2)*(1-c)+r(b[1],2)*c),p(r(a[2],2)*(1-c)+r(b[2],2)*c),d)}]);E.average=function(b,c){var d,e,f;null==c&&(c="rgb");var g=b.length;b=b.map(function(a){return E(a)});var h=b.splice(0,1)[0];if("lrgb"===c)return ma(b);var k=h.get(c);var l=[];var m=d=0;for(e in k)if(k[e]=k[e]||0,l.push(isNaN(k[e])?0:1),"h"===c.charAt(e)&&!isNaN(k[e])){var p=k[e]/180*a;d+=u(p);m+=z(p)}h=h.alpha();var q=0;for(f=b.length;q<f;q++){p=b[q];var r=p.get(c);h+=p.alpha();for(e in k)isNaN(r[e])||(k[e]+=r[e],
l[e]+=1,"h"===c.charAt(e)&&(p=k[e]/180*a,d+=u(p),m+=z(p)))}for(e in k)if(k[e]/=l[e],"h"===c.charAt(e)){for(p=x(m/l[e],d/l[e])/a*180;0>p;)p+=360;for(;360<=p;)p-=360;k[e]=p}return E(k,c).alpha(h/g)};var ea=function(a){if(a.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)){if(4===a.length||7===a.length)a=a.substr(1);3===a.length&&(a=a.split(""),a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);var b=parseInt(a,16);return[b>>16,b>>8&255,b&255,1]}if(a.match(/^#?([A-Fa-f0-9]{8})$/)){9===a.length&&(a=a.substr(1));b=parseInt(a,
16);var c=b>>24&255;var d=b>>16&255;a=b>>8&255;b=l((b&255)/255*100)/100;return[c,d,a,b]}if(null!=m.css&&(d=m.css(a)))return d;throw"unknown color: "+a;};var Ya=function(a,b){null==b&&(b="rgb");var c=a[0];var d=a[1];var e=a[2];a=a[3];c=Math.round(c);d=Math.round(d);e=Math.round(e);var f="000000"+(c<<16|d<<8|e).toString(16);f=f.substr(f.length-6);var g="0"+l(255*a).toString(16);g=g.substr(g.length-2);return"#"+function(){switch(b.toLowerCase()){case "rgba":return f+g;case "argb":return g+f;default:return f}}()};
m.hex=function(a){return ea(a)};E.hex=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(L,b.call(arguments).concat(["hex"]),function(){})};L.prototype.hex=function(a){null==a&&(a="rgb");return Ya(this._rgb,a)};A.push({p:4,test:function(a){if(1===arguments.length&&"string"===e(a))return"hex"}});var Va=function(){var a,b;var c=k(arguments);var d=c[0];var e=c[1];var f=c[2];if(0===e)var g=a=e=255*f;else{g=[0,0,0];a=[0,0,0];e=.5>f?f*(1+e):f+e-f*
e;f=2*f-e;d/=360;g[0]=d+1/3;g[1]=d;g[2]=d-1/3;for(d=b=0;2>=b;d=++b)0>g[d]&&(g[d]+=1),1<g[d]&&--g[d],a[d]=1>6*g[d]?f+6*(e-f)*g[d]:1>2*g[d]?e:2>3*g[d]?f+(e-f)*(2/3-g[d])*6:f;e=[l(255*a[0]),l(255*a[1]),l(255*a[2])];g=e[0];a=e[1];e=e[2]}return 3<c.length?[g,a,e,c[3]]:[g,a,e]};var ub=function(a,b,c){void 0!==a&&3<=a.length&&(c=a,a=c[0],b=c[1],c=c[2]);a/=255;b/=255;c/=255;var d=Math.min(a,b,c);t=Math.max(a,b,c);var e=(t+d)/2;if(t===d){var f=0;var g=Number.NaN}else f=.5>e?(t-d)/(t+d):(t-d)/(2-t-d);a===t?
g=(b-c)/(t-d):b===t?g=2+(c-a)/(t-d):c===t&&(g=4+(a-b)/(t-d));g*=60;0>g&&(g+=360);return[g,f,e]};E.hsl=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(L,b.call(arguments).concat(["hsl"]),function(){})};m.hsl=Va;L.prototype.hsl=function(){return ub(this._rgb)};var Za=function(){var a=k(arguments);var b=a[0];var c=a[1];a=a[2];var d=Math.min(b,c,a);t=Math.max(b,c,a);d=t-d;var e=t/255;if(0===t){var f=Number.NaN;var g=0}else g=d/t,b===t&&(f=(c-
a)/d),c===t&&(f=2+(a-b)/d),a===t&&(f=4+(b-c)/d),f*=60,0>f&&(f+=360);return[f,g,e]};E.hsv=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(L,b.call(arguments).concat(["hsv"]),function(){})};m.hsv=function(){var a,b;var c=k(arguments);var d=c[0];var e=c[1];var f=c[2];f*=255;if(0===e)var g=b=a=f;else{360===d&&(d=0);360<d&&(d-=360);0>d&&(d+=360);d/=60;var h=q(d);var l=d-h;d=f*(1-e);var m=f*(1-e*l);e=f*(1-e*(1-l));switch(h){case 0:a=[f,e,d];g=a[0];
b=a[1];a=a[2];break;case 1:a=[m,f,d];g=a[0];b=a[1];a=a[2];break;case 2:a=[d,f,e];g=a[0];b=a[1];a=a[2];break;case 3:a=[d,m,f];g=a[0];b=a[1];a=a[2];break;case 4:a=[e,d,f];g=a[0];b=a[1];a=a[2];break;case 5:a=[f,d,m],g=a[0],b=a[1],a=a[2]}}return[g,b,a,3<c.length?c[3]:1]};L.prototype.hsv=function(){return Za(this._rgb)};var Ba=function(){var a=k(arguments);return(a[0]<<16)+(a[1]<<8)+a[2]};E.num=function(a){return new L(a,"num")};L.prototype.num=function(a){null==a&&(a="rgb");return Ba(this._rgb,a)};m.num=
function(a){if("number"===e(a)&&0<=a&&16777215>=a)return[a>>16,a>>8&255,a&255,1];console.warn("unknown num color: "+a);return[0,0,0,1]};A.push({p:1,test:function(a){if(1===arguments.length&&"number"===e(a)&&0<=a&&16777215>=a)return"num"}});var Ma=function(){var a=k(arguments);var b=a[0];var c=a[1];a=a[2];var d=Math.min(b,c,a);t=Math.max(b,c,a);var e=t-d;if(0===e)var f=Number.NaN;else b===t&&(f=(c-a)/e),c===t&&(f=2+(a-b)/e),a===t&&(f=4+(b-c)/e),f*=60,0>f&&(f+=360);return[f,100*e/255,d/(255-e)*100]};
E.hcg=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(L,b.call(arguments).concat(["hcg"]),function(){})};m.hcg=function(){var a;var b=k(arguments);var c=b[0];var d=b[1];var e=b[2];d/=100;var f=f/100*255;var g=255*d;if(0===d)var h=f=a=e;else{360===c&&(c=0);360<c&&(c-=360);0>c&&(c+=360);c/=60;var l=q(c);c-=l;e*=1-d;d=e+g*(1-c);c=e+g*c;g=e+g;switch(l){case 0:a=[g,c,e];h=a[0];f=a[1];a=a[2];break;case 1:a=[d,g,e];h=a[0];f=a[1];a=a[2];break;case 2:a=
[e,g,c];h=a[0];f=a[1];a=a[2];break;case 3:a=[e,d,g];h=a[0];f=a[1];a=a[2];break;case 4:a=[c,e,g];h=a[0];f=a[1];a=a[2];break;case 5:a=[g,e,d],h=a[0],f=a[1],a=a[2]}}return[h,f,a,3<b.length?b[3]:1]};L.prototype.hcg=function(){return Ma(this._rgb)};var Ea=function(a){var b;a=a.toLowerCase();if(null!=E.colors&&E.colors[a])return ea(E.colors[a]);if(b=a.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){var c=b.slice(1,4);for(b=a=0;2>=a;b=++a)c[b]=+c[b];c[3]=1}else if(b=a.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(c=
b.slice(1,5),b=a=0;3>=a;b=++a)c[b]=+c[b];else if(b=a.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){c=b.slice(1,4);for(b=a=0;2>=a;b=++a)c[b]=l(2.55*c[b]);c[3]=1}else if(b=a.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){c=b.slice(1,5);for(b=a=0;2>=a;b=++a)c[b]=l(2.55*c[b]);c[3]=+c[3]}else if(b=a.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))c=
b.slice(1,4),c[1]*=.01,c[2]*=.01,c=Va(c),c[3]=1;else if(b=a.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))c=b.slice(1,4),c[1]*=.01,c[2]*=.01,c=Va(c),c[3]=+b[4];return c};var Qa=function(a){var b=1>a[3]?"rgba":"rgb";if("rgb"===b)return b+"("+a.slice(0,3).map(l).join(",")+")";if("rgba"===b)return b+"("+a.slice(0,3).map(l).join(",")+","+a[3]+")"};var Ha=function(a){return l(100*a)/100};var la=function(a,b){var c=1>b?"hsla":"hsl";a[0]=
Ha(a[0]||0);a[1]=Ha(100*a[1])+"%";a[2]=Ha(100*a[2])+"%";"hsla"===c&&(a[3]=b);return c+"("+a.join(",")+")"};m.css=function(a){return Ea(a)};E.css=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(L,b.call(arguments).concat(["css"]),function(){})};L.prototype.css=function(a){null==a&&(a="rgb");if("rgb"===a.slice(0,3))return Qa(this._rgb);if("hsl"===a.slice(0,3))return la(this.hsl(),this.alpha())};m.named=function(a){return ea(Q[a])};A.push({p:5,
test:function(a){if(1===arguments.length&&null!=Q[a])return"named"}});L.prototype.name=function(a){var b;arguments.length&&(Q[a]&&(this._rgb=ea(Q[a])),this._rgb[3]=1,this);var c=this.hex();for(b in Q)if(c===Q[b])return b;return c};var W=function(){var a=k(arguments);var b=a[0];var c=a[1];a=a[2];a*=H;return[b,u(a)*c,z(a)*c]};var ya=function(){var a=k(arguments);var b=W(a[0],a[1],a[2]);var c=b[0];var d=b[1];b=b[2];b=ia(c,d,b);d=b[0];c=b[1];b=b[2];return[d,c,b,3<a.length?a[3]:1]};var Pa=function(){var a=
k(arguments);var b=a[0];var c=a[1];var d=a[2];a=p(c*c+d*d);c=(x(d,c)*G+360)%360;0===l(1E4*a)&&(c=Number.NaN);return[b,a,c]};var va=function(){var a=k(arguments);var b=a[0];var c=a[1];a=a[2];a=X(b,c,a);b=a[0];c=a[1];a=a[2];return Pa(b,c,a)};E.lch=function(){var a=k(arguments);return new L(a,"lch")};E.hcl=function(){var a=k(arguments);return new L(a,"hcl")};m.lch=ya;m.hcl=function(){var a=k(arguments);return ya([a[2],a[1],a[0]])};L.prototype.lch=function(){return va(this._rgb)};L.prototype.hcl=function(){return va(this._rgb).reverse()};
var Ka=function(a){null==a&&(a="rgb");var b=k(arguments);var c=b[0];var d=b[1];b=b[2];c/=255;d/=255;b/=255;var e=1-Math.max(c,Math.max(d,b));var f=1>e?1/(1-e):0;return[(1-c-e)*f,(1-d-e)*f,(1-b-e)*f,e]};var ta=function(){var a=k(arguments);var b=a[0];var c=a[1];var d=a[2];var e=a[3];a=4<a.length?a[4]:1;return 1===e?[0,0,0,a]:[1<=b?0:255*(1-b)*(1-e),1<=c?0:255*(1-c)*(1-e),1<=d?0:255*(1-d)*(1-e),a]};m.cmyk=function(){return ta(k(arguments))};E.cmyk=function(){return function(a,b,c){c.prototype=a.prototype;
c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(L,b.call(arguments).concat(["cmyk"]),function(){})};L.prototype.cmyk=function(){return Ka(this._rgb)};m.gl=function(){var a,b,c,d;var e=function(){var a=k(arguments);var c=[];for(b in a)d=a[b],c.push(d);return c}.apply(this,arguments);for(a=c=0;2>=c;a=++c)e[a]*=255;return e};E.gl=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(L,b.call(arguments).concat(["gl"]),function(){})};L.prototype.gl=
function(){var a=this._rgb;return[a[0]/255,a[1]/255,a[2]/255,a[3]]};var qb=function(a,b,c){var d=k(arguments);a=d[0];b=d[1];c=d[2];a=cb(a);b=cb(b);c=cb(c);return.2126*a+.7152*b+.0722*c};var cb=function(a){a/=255;return.03928>=a?a/12.92:r((a+.055)/1.055,2.4)};K.push(["rgb",function(a,b,c,d){a=a._rgb;b=b._rgb;return new L(a[0]+c*(b[0]-a[0]),a[1]+c*(b[1]-a[1]),a[2]+c*(b[2]-a[2]),d)}]);L.prototype.luminance=function(a,b){null==b&&(b="rgb");if(!arguments.length)return qb(this._rgb);if(0===a)this._rgb=
[0,0,0,this._rgb[3]];else if(1===a)this._rgb=[255,255,255,this._rgb[3]];else{var c=20;var d=function(e,f){var g=e.interpolate(f,.5,b);var h=g.luminance();return 1E-7>Math.abs(a-h)||!c--?g:h>a?d(e,g):d(g,f)};var e=qb(this._rgb);this._rgb=(e>a?d(E("black"),this):d(this,E("white"))).rgba()}return this};var N=function(a){a/=100;if(66>a){var b=255;var c=-155.25485562709179-.44596950469579133*(c=a-2)+104.49216199393888*y(c);var d=20>a?0:-254.76935184120902+.8274096064007395*(d=a-10)+115.67994401066147*
y(d)}else b=351.97690566805693+.114206453784165*(b=a-55)-40.25366309332127*y(b),c=325.4494125711974+.07943456536662342*(c=a-50)-28.0852963507957*y(c),d=255;return[b,c,d]};var v=function(){var a;var b=k(arguments);var c=b[0];b=b[2];var d=1E3;for(a=4E4;.4<a-d;){var e=.5*(a+d);var f=N(e);f[2]/f[0]>=b/c?a=e:d=e}return l(e)};E.temperature=E.kelvin=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(L,b.call(arguments).concat(["temperature"]),function(){})};
m.temperature=m.kelvin=m.K=N;L.prototype.temperature=function(){return v(this._rgb)};L.prototype.kelvin=L.prototype.temperature;E.contrast=function(a,b){var c,d;if("string"===(c=e(a))||"number"===c)a=new L(a);if("string"===(d=e(b))||"number"===d)b=new L(b);a=a.luminance();b=b.luminance();return a>b?(a+.05)/(b+.05):(b+.05)/(a+.05)};E.distance=function(a,b,c){var d,f,g;null==c&&(c="lab");if("string"===(f=e(a))||"number"===f)a=new L(a);if("string"===(g=e(b))||"number"===g)b=new L(b);a=a.get(c);c=b.get(c);
f=0;for(d in a)b=(a[d]||0)-(c[d]||0),f+=b*b;return Math.sqrt(f)};E.deltaE=function(b,c,d,f){var g,h,k;null==d&&(d=1);null==f&&(f=1);if("string"===(g=e(b))||"number"===g)b=new L(b);if("string"===(h=e(c))||"number"===h)c=new L(c);g=b.lab();b=g[0];h=g[1];var l=g[2];c=c.lab();g=c[0];var m=c[1];var q=c[2];var r=p(h*h+l*l);var t=p(m*m+q*q);var z=16>b?.511:.040975*b/(1+.01765*b);c=.0638*r/(1+.0131*r)+.638;for(k=1E-6>r?0:180*x(l,h)/a;0>k;)k+=360;for(;360<=k;)k-=360;k=164<=k&&345>=k?.56+B(.2*u(a*(k+168)/180)):
.36+B(.4*u(a*(k+35)/180));var y=r*r*r*r;y=p(y/(y+1900));r-=t;h-=m;l-=q;d=(b-g)/(d*z);f=r/(f*c);b=c*(y*k+1-y);return p(d*d+f*f+(h*h+l*l-r*r)/(b*b))};L.prototype.get=function(a){var b=a.split(".");a=b[0];b=b[1];var c=this[a]();if(b){var d=a.indexOf(b);return-1<d?c[d]:console.warn("unknown channel "+b+" in mode "+a)}return c};L.prototype.set=function(a,b){var c=a.split(".");a=c[0];if(c=c[1]){var d=this[a]();var f=a.indexOf(c);if(-1<f)if("string"===e(b))switch(b.charAt(0)){case "+":d[f]+=+b;break;case "-":d[f]+=
+b;break;case "*":d[f]*=+b.substr(1);break;case "/":d[f]/=+b.substr(1);break;default:d[f]=+b}else d[f]=b;else console.warn("unknown channel "+c+" in mode "+a)}else d=b;return E(d,a).alpha(this.alpha())};L.prototype.clipped=function(){return this._rgb._clipped||!1};L.prototype.alpha=function(a){return arguments.length?E.rgb([this._rgb[0],this._rgb[1],this._rgb[2],a]):this._rgb[3]};L.prototype.darken=function(a){null==a&&(a=1);var b=this.lab();b[0]-=U.Kn*a;return E.lab(b).alpha(this.alpha())};L.prototype.brighten=
function(a){null==a&&(a=1);return this.darken(-a)};L.prototype.darker=L.prototype.darken;L.prototype.brighter=L.prototype.brighten;L.prototype.saturate=function(a){null==a&&(a=1);var b=this.lch();b[1]+=a*U.Kn;0>b[1]&&(b[1]=0);return E.lch(b).alpha(this.alpha())};L.prototype.desaturate=function(a){null==a&&(a=1);return this.saturate(-a)};L.prototype.premultiply=function(){var a=this.rgb();var b=this.alpha();return E(a[0]*b,a[1]*b,a[2]*b,b)};var Ca=function(a,b,c){if(!Ca[c])throw"unknown blend mode "+
c;return Ca[c](a,b)};g=function(a){return function(b,c){c=E(c).rgb();b=E(b).rgb();return E(a(c,b),"rgb")}};var ca=function(a){return function(b,c){var d,e;var f=[];for(d=e=0;3>=e;d=++e)f[d]=a(b[d],c[d]);return f}};Ca.normal=g(ca(function(a,b){return a}));Ca.multiply=g(ca(function(a,b){return a*b/255}));Ca.screen=g(ca(function(a,b){return 255*(1-(1-a/255)*(1-b/255))}));Ca.overlay=g(ca(function(a,b){return 128>b?2*a*b/255:255*(1-2*(1-a/255)*(1-b/255))}));Ca.darken=g(ca(function(a,b){return a>b?b:a}));
Ca.lighten=g(ca(function(a,b){return a>b?a:b}));Ca.dodge=g(ca(function(a,b){if(255===a)return 255;a=b/255*255/(1-a/255);return 255<a?255:a}));Ca.burn=g(ca(function(a,b){return 255*(1-(1-b/255)/(a/255))}));E.blend=Ca;E.analyze=function(a){var b;var c={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};var d=0;for(b=a.length;d<b;d++){var e=a[d];null==e||isNaN(e)||(c.values.push(e),c.sum+=e,e<c.min&&(c.min=e),e>c.max&&(c.max=e),c.count+=1)}c.domain=[c.min,c.max];c.limits=function(a,
b){return E.limits(c,a,b)};return c};E.scale=function(a,b){var c="rgb";var d=E("#ccc");var f=0;var g=[0,1];var h=[];var k=[0,0];var l=!1;var m=[];var p=!1;var q=0;var t=1;var u=!1;var z={};var y=!0;var x=1;var v=function(a){var b,c;null==a&&(a=["#fff","#000"]);null!=a&&"string"===e(a)&&null!=E.brewer&&(a=E.brewer[a]||E.brewer[a.toLowerCase()]||a);if("array"===e(a)){a=a.slice(0);var d=b=0;for(c=a.length-1;0<=c?b<=c:b>=c;d=0<=c?++b:--b){var f=a[d];"string"===e(f)&&(a[d]=E(f))}d=b=h.length=0;for(f=a.length-
1;0<=f?b<=f:b>=f;d=0<=f?++b:--b)h.push(d/(a.length-1))}H();return m=a};var A=function(a){var b;if(null!=l){var c=l.length-1;for(b=0;b<c&&a>=l[b];)b++;return b-1}return 0};var B=function(a){return a};var C=function(a,b){var f,g;null==b&&(b=!1);if(isNaN(a))return d;b||(l&&2<l.length?(a=A(a),a/=l.length-2):a=t!==q?(a-q)/(t-q):1);b||(a=B(a));1!==x&&(a=r(a,x));a=k[0]+a*(1-k[0]-k[1]);a=Math.min(1,Math.max(0,a));var p=Math.floor(1E4*a);if(y&&z[p])var u=z[p];else{if("array"===e(m))for(b=f=0,g=h.length-1;0<=
g?f<=g:f>=g;b=0<=g?++f:--f){var v=h[b];if(a<=v){u=m[b];break}if(a>=v&&b===h.length-1){u=m[b];break}if(a>v&&a<h[b+1]){a=(a-v)/(h[b+1]-v);u=E.interpolate(m[b],m[b+1],a,c);break}}else"function"===e(m)&&(u=m(a));y&&(z[p]=u)}return u};var H=function(){return z={}};v(a);var G=function(a){a=E(C(a));return p&&a[p]?a[p]():a};G.classes=function(a){if(null!=a){if("array"===e(a))l=a,g=[a[0],a[a.length-1]];else{var b=E.analyze(g);l=0===a?[b.min,b.max]:E.limits(b,"e",a)}return G}return l};G.domain=function(a){var b;
if(!arguments.length)return g;q=a[0];t=a[a.length-1];h=[];var c=m.length;if(a.length===c&&q!==t){var d=0;for(c=a.length;d<c;d++){var e=a[d];h.push((e-q)/(t-q))}}else for(e=b=0,d=c-1;0<=d?b<=d:b>=d;e=0<=d?++b:--b)h.push(e/(c-1));g=[q,t];return G};G.mode=function(a){if(!arguments.length)return c;c=a;H();return G};G.range=function(a,b){v(a,b);return G};G.out=function(a){p=a;return G};G.spread=function(a){if(!arguments.length)return f;f=a;return G};G.correctLightness=function(a){null==a&&(a=!0);u=a;H();
B=u?function(a){var b=C(0,!0).lab()[0];var c=C(1,!0).lab()[0];var d=b>c;var e=C(a,!0).lab()[0];b+=(c-b)*a;e-=b;var f=0;var g=1;for(c=20;.01<Math.abs(e)&&0<c--;)d&&(e*=-1),0>e?(f=a,a+=.5*(g-a)):(g=a,a+=.5*(f-a)),e=C(a,!0).lab()[0],e-=b;return a}:function(a){return a};return G};G.padding=function(a){return null!=a?("number"===e(a)&&(a=[a,a]),k=a,G):k};G.colors=function(b,c){var d,e,f;2>arguments.length&&(c="hex");var h=[];if(0===arguments.length)h=m.slice(0);else if(1===b)h=[G(.5)];else if(1<b){var k=
g[0];var p=g[1]-k;h=function(){e=[];for(var a=0;0<=b?a<b:a>b;0<=b?a++:a--)e.push(a);return e}.apply(this).map(function(a){return G(k+a/(b-1)*p)})}else{a=[];var q=[];if(l&&2<l.length)for(h=f=1,d=l.length;1<=d?f<d:f>d;h=1<=d?++f:--f)q.push(.5*(l[h-1]+l[h]));else q=g;h=q.map(function(a){return G(a)})}E[c]&&(h=h.map(function(a){return a[c]()}));return h};G.cache=function(a){return null!=a?(y=a,G):y};G.gamma=function(a){return null!=a?(x=a,G):x};return G};null==E.scales&&(E.scales={});E.scales.cool=function(){return E.scale([E.hsl(180,
1,.9),E.hsl(250,.7,.4)])};E.scales.hot=function(){return E.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")};E.analyze=function(a,b,c){var d;var f={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};null==c&&(c=function(){return!0});var g=function(a){null==a||isNaN(a)||(f.values.push(a),f.sum+=a,a<f.min&&(f.min=a),a>f.max&&(f.max=a),f.count+=1)};var h=function(a,d){if(c(a,d))return null!=b&&"function"===e(b)?g(b(a)):null!=b&&"string"===e(b)||"number"===e(b)?g(a[b]):
g(a)};if("array"===e(a)){var k=0;for(d=a.length;k<d;k++){var l=a[k];h(l)}}else for(d in a)l=a[d],h(l,d);f.domain=[f.min,f.max];f.limits=function(a,b){return E.limits(f,a,b)};return f};E.limits=function(a,b,c){var d,f,g,h,k,l,m;null==b&&(b="equal");null==c&&(c=7);"array"===e(a)&&(a=E.analyze(a));var p=a.min;t=a.max;var u=a.values.sort(function(a,b){return a-b});if(1===c)return[p,t];a=[];"c"===b.substr(0,1)&&(a.push(p),a.push(t));if("e"===b.substr(0,1)){a.push(p);b=u=1;for(d=c-1;1<=d?u<=d:u>=d;b=1<=
d?++u:--u)a.push(p+b/c*(t-p));a.push(t)}else if("l"===b.substr(0,1)){if(0>=p)throw"Logarithmic scales are only possible for values > 0";d=Math.LOG10E*y(p);u=Math.LOG10E*y(t);a.push(p);b=h=1;for(k=c-1;1<=k?h<=k:h>=k;b=1<=k?++h:--h)a.push(r(10,d+b/c*(u-d)));a.push(t)}else if("q"===b.substr(0,1)){a.push(p);b=d=1;for(k=c-1;1<=k?d<=k:d>=k;b=1<=k?++d:--d)h=(u.length-1)*b/c,b=q(h),b===h?a.push(u[b]):(h-=b,a.push(u[b]*(1-h)+u[b+1]*h));a.push(t)}else if("k"===b.substr(0,1)){k=u.length;d=Array(k);var z=Array(c);
var v=!0;var x=0;var A=null;A=[];A.push(p);b=f=1;for(g=c-1;1<=g?f<=g:f>=g;b=1<=g?++f:--f)A.push(p+b/c*(t-p));for(A.push(t);v;){p=b=0;for(f=c-1;0<=f?b<=f:b>=f;p=0<=f?++b:--b)z[p]=0;b=f=0;for(l=k-1;0<=l?f<=l:f>=l;b=0<=l?++f:--f){var C=u[b];var H=Number.MAX_VALUE;p=v=0;for(m=c-1;0<=m?v<=m:v>=m;p=0<=m?++v:--v)g=B(A[p]-C),g<H&&(H=g,h=p);z[h]++;d[b]=h}f=Array(c);p=b=0;for(v=c-1;0<=v?b<=v:b>=v;p=0<=v?++b:--b)f[p]=null;b=v=0;for(g=k-1;0<=g?v<=g:v>=g;b=0<=g?++v:--v)p=d[b],f[p]=null===f[p]?u[b]:f[p]+u[b];p=
v=0;for(g=c-1;0<=g?v<=g:v>=g;p=0<=g?++v:--v)f[p]*=1/z[p];v=!1;p=g=0;for(H=c-1;0<=H?g<=H:g>=H;p=0<=H?++g:--g)if(f[p]!==A[b]){v=!0;break}A=f;x++;200<x&&(v=!1)}h={};p=b=0;for(A=c-1;0<=A?b<=A:b>=A;p=0<=A?++b:--b)h[p]=[];b=A=0;for(--k;0<=k?A<=k:A>=k;b=0<=k?++A:--A)p=d[b],h[p].push(u[b]);u=[];p=b=0;for(--c;0<=c?b<=c:b>=c;p=0<=c?++b:--b)u.push(h[p][0]),u.push(h[p][h[p].length-1]);u=u.sort(function(a,b){return a-b});a.push(u[0]);b=c=1;for(d=u.length-1;c<=d;b=c+=2)b=u[b],isNaN(b)||-1!==a.indexOf(b)||a.push(b)}return a};
var Ra=function(){var a=k(arguments);var b=a[0];var c=a[1];a=a[2];C=2*Math.PI;b/=255;c/=255;a/=255;var d=Math.min(b,c,a);var e=(b+c+a)/3;d=1-d/e;0===d?b=0:(b=(b-c+(b-a))/2/Math.sqrt((b-c)*(b-c)+(b-a)*(c-a)),b=Math.acos(b),a>c&&(b=C-b),b/=C);return[360*b,d,e]};E.hsi=function(){return function(a,b,c){c.prototype=a.prototype;c=new c;a=a.apply(c,b);return Object(a)===a?a:c}(L,b.call(arguments).concat(["hsi"]),function(){})};m.hsi=function(a,b,c){var e=k(arguments);a=e[0];b=e[1];c=e[2];isNaN(a)&&(a=0);
a/=360;if(a<1/3){var f=(1-b)/3;var g=(1+b*u(C*a)/u(F-C*a))/3;var h=1-(f+g)}else a<2/3?(a-=1/3,g=(1-b)/3,h=(1+b*u(C*a)/u(F-C*a))/3,f=1-(g+h)):(a-=2/3,h=(1-b)/3,f=(1+b*u(C*a)/u(F-C*a))/3,g=1-(h+f));g=d(c*g*3);h=d(c*h*3);f=d(c*f*3);return[255*g,255*h,255*f,3<e.length?e[3]:1]};L.prototype.hsi=function(){return Ra(this._rgb)};var hc=function(a,b,c,d){var e;if("hsl"===d){var f=a.hsl();var g=b.hsl()}else if("hsv"===d)f=a.hsv(),g=b.hsv();else if("hcg"===d)f=a.hcg(),g=b.hcg();else if("hsi"===d)f=a.hsi(),g=
b.hsi();else if("lch"===d||"hcl"===d)d="hcl",f=a.hcl(),g=b.hcl();if("h"===d.substr(0,1)){var h=f[0];var k=f[1];var l=f[2];var m=g[0];var p=g[1];var q=g[2]}isNaN(h)||isNaN(m)?isNaN(h)?isNaN(m)?a=Number.NaN:(a=m,1!==l&&0!==l||"hsv"===d||(e=p)):(a=h,1!==q&&0!==q||"hsv"===d||(e=k)):a=h+c*(m>h&&180<m-h?m-(h+360):m<h&&180<h-m?m+360-h:m-h);null==e&&(e=k+c*(p-k));return E[d](a,e,l+c*(q-l))};K=K.concat(function(){var a;var b="hsv hsl hsi hcl lch hcg".split(" ");var c=[];var d=0;for(a=b.length;d<a;d++)f=b[d],
c.push([f,hc]);return c}());K.push(["num",function(a,b,c,d){a=a.num();b=b.num();return E.num(a+(b-a)*c,"num")}]);K.push(["lab",function(a,b,c,d){a=a.lab();b=b.lab();return new L(a[0]+c*(b[0]-a[0]),a[1]+c*(b[1]-a[1]),a[2]+c*(b[2]-a[2]),d)}])}).call(this);/*
 wavesurfer.js 2.1.2 (2019-01-07)
 https://github.com/katspaugh/wavesurfer.js
 @license BSD-3-Clause
 **************************************** !*\
  !*** ./node_modules/debounce/index.js ***!
  \*************************************** no static exports found  *********************** !*\
  !*** ./src/drawer.js ***!
  \********************** ./util  *********************************** !*\
  !*** ./src/drawer.multicanvas.js ***!
  \********************************** ./drawer  ***************************** !*\
  !*** ./src/mediaelement.js ***!
  \**************************** ./webaudio  ************************** !*\
  !*** ./src/peakcache.js ***!
  \************************* ************************** !*\
  !*** ./src/util/ajax.js ***!
  \************************* ./observer  **************************** !*\
  !*** ./src/util/extend.js ***!
  \*************************** *************************** !*\
  !*** ./src/util/frame.js ***!
  \************************** ./request-animation-frame  **************************** !*\
  !*** ./src/util/get-id.js ***!
  \*************************** *************************** !*\
  !*** ./src/util/index.js ***!
  \************************** ./ajax  ./get-id  ./max  ./min  ./extend  ./style  ./frame  debounce  ./prevent-click  ************************* !*\
  !*** ./src/util/max.js ***!
  \************************ ************************* !*\
  !*** ./src/util/min.js ***!
  \************************ ****************************** !*\
  !*** ./src/util/observer.js ***!
  \***************************** *********************************** !*\
  !*** ./src/util/prevent-click.js ***!
  \********************************** ********************************************* !*\
  !*** ./src/util/request-animation-frame.js ***!
  \******************************************** *************************** !*\
  !*** ./src/util/style.js ***!
  \************************** *************************** !*\
  !*** ./src/wavesurfer.js ***!
  \************************** ./drawer.multicanvas  ./mediaelement  ./peakcache  ************************* !*\
  !*** ./src/webaudio.js ***!
  \*************************/
(function(h,f){"object"===typeof exports&&"object"===typeof module?module.exports=f():"function"===typeof define&&define.amd?define("WaveSurfer",[],f):"object"===typeof exports?exports.WaveSurfer=f():h.WaveSurfer=f()})(window,function(){return function(h){function f(e){if(b[e])return b[e].exports;var d=b[e]={i:e,l:!1,exports:{}};h[e].call(d.exports,d,d.exports,f);d.l=!0;return d.exports}var b={};f.m=h;f.c=b;f.d=function(b,d,h){f.o(b,d)||Object.defineProperty(b,d,{enumerable:!0,get:h})};f.r=function(b){"undefined"!==
typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})};f.t=function(b,d){d&1&&(b=f(b));if(d&8||d&4&&"object"===typeof b&&b&&b.__esModule)return b;var e=Object.create(null);f.r(e);Object.defineProperty(e,"default",{enumerable:!0,value:b});if(d&2&&"string"!=typeof b)for(var c in b)f.d(e,c,function(a){return b[a]}.bind(null,c));return e};f.n=function(b){var d=b&&b.__esModule?function(){return b["default"]}:function(){return b};
f.d(d,"a",d);return d};f.o=function(b,d){return Object.prototype.hasOwnProperty.call(b,d)};f.p="";return f(f.s="./src/wavesurfer.js")}({"./node_modules/debounce/index.js":function(h,f){function b(b,d,f){function c(){var l=Date.now()-k;l<d&&0<=l?a=setTimeout(c,d-l):(a=null,f||(r=b.apply(h,e),h=e=null))}var a,e,h,k,r;null==d&&(d=100);var y=function(){h=this;e=arguments;k=Date.now();var l=f&&!a;a||(a=setTimeout(c,d));l&&(r=b.apply(h,e),h=e=null);return r};y.clear=function(){a&&(clearTimeout(a),a=null)};
y.flush=function(){a&&(r=b.apply(h,e),h=e=null,clearTimeout(a),a=null)};return y}b.debounce=b;h.exports=b},"./src/drawer.js":function(h,f,b){function e(a){e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return e(a)}function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=
!0);Object.defineProperty(a,d.key,d)}}function k(a,b,c){b&&d(a.prototype,b);c&&d(a,c);return a}function c(a){c=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return c(a)}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&l(a,b)}function l(a,b){l=Object.setPrototypeOf||function(a,
b){a.__proto__=b;return a};return l(a,b)}Object.defineProperty(f,"__esModule",{value:!0});f.default=void 0;var u=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};d.get||d.set?Object.defineProperty(b,c,d):b[c]=a[c]}b.default=a;return b}(b("./src/util/index.js"));b=function(b){function d(a,b){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
var f=c(d).call(this);if(!f||"object"!==e(f)&&"function"!==typeof f){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=this}f.container=a;f.params=b;f.width=0;f.height=b.height*f.params.pixelRatio;f.lastPos=0;f.wrapper=null;return f}a(d,b);k(d,[{key:"style",value:function(a,b){return u.style(a,b)}},{key:"createWrapper",value:function(){this.wrapper=this.container.appendChild(document.createElement("wave"));this.style(this.wrapper,{display:"block",
position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"});(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%"});this.setupWrapperEvents()}},{key:"handleEvent",value:function(a,b){!b&&a.preventDefault();a=a.targetTouches?a.targetTouches[0].clientX:a.clientX;b=this.wrapper.getBoundingClientRect();var c=this.width,d=this.getWidth();!this.params.fillParent&&c<d?(a=this.params.pixelRatio/c*(a-b.left)||0,1<a&&(a=1)):a=(a-b.left+
this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0;return a}},{key:"setupWrapperEvents",value:function(){var a=this;this.wrapper.addEventListener("click",function(b){var c=a.wrapper.offsetHeight-a.wrapper.clientHeight;if(0!=c){var d=a.wrapper.getBoundingClientRect();if(b.clientY>=d.bottom-c)return}a.params.interact&&a.fireEvent("click",b,a.handleEvent(b))});this.wrapper.addEventListener("scroll",function(b){return a.fireEvent("scroll",b)})}},{key:"drawPeaks",value:function(a,b,c,d){this.setWidth(b)||
this.clearWave();this.params.barWidth?this.drawBars(a,0,c,d):this.drawWave(a,0,c,d)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(a){this.recenterOnPosition(this.wrapper.scrollWidth*a,!0)}},{key:"recenterOnPosition",value:function(a,b){var c=this.wrapper.scrollLeft,d=~~(this.wrapper.clientWidth/2),e=this.wrapper.scrollWidth-this.wrapper.clientWidth;a-=d;var f=a-c;0!=e&&(!b&&-d<=f&&f<d&&(f=Math.max(-5,Math.min(5,f)),a=c+f),a=
Math.max(0,Math.min(e,a)),a!=c&&(this.wrapper.scrollLeft=a))}},{key:"getScrollX",value:function(){var a=this.params.pixelRatio,b=Math.round(this.wrapper.scrollLeft*a);this.params.scrollParent&&(a=~~(this.wrapper.scrollWidth*a-this.getWidth()),b=Math.min(a,Math.max(0,b)));return b}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(a){if(this.width==a)return!1;this.width=a;this.params.fillParent||this.params.scrollParent?
this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"});this.updateSize();return!0}},{key:"setHeight",value:function(a){if(a==this.height)return!1;this.height=a;this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"});this.updateSize();return!0}},{key:"progress",value:function(a){var b=1/this.params.pixelRatio,c=Math.round(a*this.width)*b;if(c<this.lastPos||c-this.lastPos>=b)this.lastPos=c,this.params.scrollParent&&this.params.autoCenter&&
this.recenterOnPosition(~~(this.wrapper.scrollWidth*a)),this.updateProgress(c)}},{key:"destroy",value:function(){this.unAll();this.wrapper&&(this.wrapper.parentNode==this.container&&this.container.removeChild(this.wrapper),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(a,b,c,d){}},{key:"drawWave",value:function(a,b,c,d){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(a){}}]);return d}(u.Observer);
f.default=b;h.exports=f.default},"./src/drawer.multicanvas.js":function(h,f,b){function e(a){e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return e(a)}function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function k(a,b,c){b&&d(a.prototype,
b);c&&d(a,c);return a}function c(a){c=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return c(a)}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&l(a,b)}function l(a,b){l=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return l(a,b)}Object.defineProperty(f,"__esModule",
{value:!0});f.default=void 0;var u=function(a){return a&&a.__esModule?a:{default:a}}(b("./src/drawer.js")),q=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};d.get||d.set?Object.defineProperty(b,c,d):b[c]=a[c]}b.default=a;return b}(b("./src/util/index.js"));b=function(b){function d(a,b){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
a=c(d).call(this,a,b);if(!a||"object"!==e(a)&&"function"!==typeof a){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=this}a.maxCanvasWidth=b.maxCanvasWidth;a.maxCanvasElementWidth=Math.round(b.maxCanvasWidth/b.pixelRatio);a.hasProgressCanvas=b.waveColor!=b.progressColor;a.halfPixel=.5/b.pixelRatio;a.canvases=[];a.progressWave=null;return a}a(d,b);k(d,[{key:"init",value:function(){this.createWrapper();this.createElements()}},{key:"createElements",
value:function(){this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}));this.addCanvas();this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var a=
this,b=Math.ceil(Math.round(this.width/this.params.pixelRatio)/this.maxCanvasElementWidth);this.canvases.length<b;)this.addCanvas();for(;this.canvases.length>b;)this.removeCanvas();this.canvases.forEach(function(b,c){var d=a.maxCanvasWidth+2*Math.ceil(a.params.pixelRatio/2);c==a.canvases.length-1&&(d=a.width-a.maxCanvasWidth*(a.canvases.length-1));a.updateDimensions(b,d,a.height);a.clearWaveForEntry(b)})}},{key:"addCanvas",value:function(){var a={},b=this.maxCanvasElementWidth*this.canvases.length;
a.wave=this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:2,left:b+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}));a.waveCtx=a.wave.getContext("2d");this.hasProgressCanvas&&(a.progress=this.progressWave.appendChild(this.style(document.createElement("canvas"),{position:"absolute",left:b+"px",top:0,bottom:0,height:"100%"})),a.progressCtx=a.progress.getContext("2d"));this.canvases.push(a)}},{key:"removeCanvas",value:function(){var a=this.canvases.pop();
a.wave.parentElement.removeChild(a.wave);this.hasProgressCanvas&&a.progress.parentElement.removeChild(a.progress)}},{key:"updateDimensions",value:function(a,b,c){var d=Math.round(b/this.params.pixelRatio),e=Math.round(this.width/this.params.pixelRatio);a.start=a.waveCtx.canvas.offsetLeft/e||0;a.end=a.start+d/e;a.waveCtx.canvas.width=b;a.waveCtx.canvas.height=c;this.style(a.waveCtx.canvas,{width:d+"px"});this.style(this.progressWave,{display:"block"});this.hasProgressCanvas&&(a.progressCtx.canvas.width=
b,a.progressCtx.canvas.height=c,this.style(a.progressCtx.canvas,{width:d+"px"}))}},{key:"clearWave",value:function(){var a=this;this.canvases.forEach(function(b){return a.clearWaveForEntry(b)})}},{key:"clearWaveForEntry",value:function(a){a.waveCtx.clearRect(0,0,a.waveCtx.canvas.width,a.waveCtx.canvas.height);this.hasProgressCanvas&&a.progressCtx.clearRect(0,0,a.progressCtx.canvas.width,a.progressCtx.canvas.height)}},{key:"drawBars",value:function(a,b,c,d){var e=this;return this.prepareDraw(a,b,c,
d,function(a){var b=a.absmax,f=a.offsetY,h=a.halfH,k=a.peaks;if(void 0!==c){a=a.hasMinVals?2:1;var l=e.params.barWidth*e.params.pixelRatio,g=l+(null===e.params.barGap?Math.max(e.params.pixelRatio,~~(l/2)):Math.max(e.params.pixelRatio,e.params.barGap*e.params.pixelRatio)),m=k.length/a/e.width,p;for(p=c;p<d;p+=g){var q=Math.round((k[Math.floor(p*m*a)]||0)/b*h);e.fillRect(p+e.halfPixel,h-q+f,l+e.halfPixel,2*q)}}})}},{key:"drawWave",value:function(a,b,c,d){var e=this;return this.prepareDraw(a,b,c,d,function(a){var b=
a.absmax,f=a.offsetY,h=a.halfH,k=a.peaks;if(!a.hasMinVals){a=[];var l=k.length,g;for(g=0;g<l;g++)a[2*g]=k[g],a[2*g+1]=-k[g];k=a}void 0!==c&&e.drawLine(k,b,h,f,c,d);e.fillRect(0,h+f-e.halfPixel,e.width,e.halfPixel)})}},{key:"drawLine",value:function(a,b,c,d,e,f){var h=this;this.canvases.forEach(function(k){h.setFillStyles(k);h.drawLineToContext(k,k.waveCtx,a,b,c,d,e,f);h.drawLineToContext(k,k.progressCtx,a,b,c,d,e,f)})}},{key:"drawLineToContext",value:function(a,b,c,d,e,f,h,k){if(b){var l=c.length/
2,p=this.params.fillParent&&this.width!=l?this.width/l:1,q=Math.round(l*a.start);a=Math.round(l*a.end)+1;if(!(q>k||a<h)){h=Math.min(q,h);k=Math.max(a,k);b.beginPath();b.moveTo((h-q)*p+this.halfPixel,e+f);for(a=h;a<k;a++)b.lineTo((a-q)*p+this.halfPixel,e-Math.round((c[2*a]||0)/d*e)+f);for(--k;k>=h;k--)b.lineTo((k-q)*p+this.halfPixel,e-Math.round((c[2*k+1]||0)/d*e)+f);b.closePath();b.fill()}}}},{key:"fillRect",value:function(a,b,c,d){var e=Math.min(Math.ceil((a+c)/this.maxCanvasWidth)+1,this.canvases.length),
f;for(f=Math.floor(a/this.maxCanvasWidth);f<e;f++){var h=this.canvases[f],k=f*this.maxCanvasWidth,l=Math.max(a,f*this.maxCanvasWidth),p=b,q=Math.min(a+c,f*this.maxCanvasWidth+h.waveCtx.canvas.width),g=b+d;l<q&&(this.setFillStyles(h),this.fillRectToContext(h.waveCtx,l-k,p,q-l,g-p),this.fillRectToContext(h.progressCtx,l-k,p,q-l,g-p))}}},{key:"prepareDraw",value:function(a,b,c,d,e){var f=this;return q.frame(function(){if(a[0]instanceof Array){var h=a;if(f.params.splitChannels)return f.setHeight(h.length*
f.params.height*f.params.pixelRatio),h.forEach(function(a,b){return f.prepareDraw(a,b,c,d,e)});a=h[0]}h=1/f.params.barHeight;if(f.params.normalize){h=q.max(a);var k=q.min(a);h=-k>h?-k:h}k=[].some.call(a,function(a){return 0>a});var l=f.params.height*f.params.pixelRatio;return e({absmax:h,hasMinVals:k,height:l,offsetY:l*b||0,halfH:l/2,peaks:a})})()}},{key:"fillRectToContext",value:function(a,b,c,d,e){a&&a.fillRect(b,c,d,e)}},{key:"setFillStyles",value:function(a){a.waveCtx.fillStyle=this.params.waveColor;
this.hasProgressCanvas&&(a.progressCtx.fillStyle=this.params.progressColor)}},{key:"getImage",value:function(a,b){var c=this.canvases.map(function(c){return c.wave.toDataURL(a,b)});return 1<c.length?c:c[0]}},{key:"updateProgress",value:function(a){this.style(this.progressWave,{width:a+"px"})}}]);return d}(u.default);f.default=b;h.exports=f.default},"./src/mediaelement.js":function(h,f,b){function e(a){e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&
"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return e(a)}function d(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function k(a,b,c){b&&d(a.prototype,b);c&&d(a,c);return a}function c(a,b){if(b&&("object"===e(b)||"function"===typeof b))return b;if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}
function a(b,c,d){a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(a,b,c){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=l(a),null!==a););if(a)return b=Object.getOwnPropertyDescriptor(a,b),b.get?b.get.call(c):b.value};return a(b,c,d||b)}function l(a){l=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return l(a)}function u(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&q(a,b)}function q(a,b){q=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return q(a,b)}Object.defineProperty(f,"__esModule",{value:!0});f.default=void 0;var r=function(a){return a&&a.__esModule?a:{default:a}}(b("./src/webaudio.js"));(function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?
Object.getOwnPropertyDescriptor(a,c):{};d.get||d.set?Object.defineProperty(b,c,d):b[c]=a[c]}b.default=a;return b})(b("./src/util/index.js"));b=function(b){function d(a){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");var b=c(this,l(d).call(this,a));b.params=a;b.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0};b.mediaType=a.mediaType.toLowerCase();b.elementPosition=a.elementPosition;b.peaks=null;b.playbackRate=
1;b.volume=1;b.buffer=null;b.onPlayEnd=null;return b}u(d,b);k(d,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate);this.createTimer()}},{key:"createTimer",value:function(){var a=this;this.on("play",function t(){a.isPaused()||(a.fireEvent("audioprocess",a.getCurrentTime()),(window.requestAnimationFrame||window.webkitRequestAnimationFrame)(t))});this.on("pause",function(){a.fireEvent("audioprocess",a.getCurrentTime())})}},{key:"load",value:function(a,b,c,d){var e=document.createElement(this.mediaType);
e.controls=this.params.mediaControls;e.autoplay=this.params.autoplay||!1;e.preload=null==d?"auto":d;e.src=a;e.style.width="100%";(a=b.querySelector(this.mediaType))&&b.removeChild(a);b.appendChild(e);this._load(e,c)}},{key:"loadElt",value:function(a,b){a.controls=this.params.mediaControls;a.autoplay=this.params.autoplay||!1;this._load(a,b)}},{key:"_load",value:function(a,b){var c=this;"function"==typeof a.load&&a.load();a.addEventListener("error",function(){c.fireEvent("error","Error loading media element")});
a.addEventListener("canplay",function(){c.fireEvent("canplay")});a.addEventListener("ended",function(){c.fireEvent("finish")});a.addEventListener("play",function(){c.fireEvent("play")});a.addEventListener("pause",function(){c.fireEvent("pause")});this.media=a;this.peaks=b;this.buffer=this.onPlayEnd=null;this.setPlaybackRate(this.playbackRate);this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;
var a=(this.buffer||this.media).duration;Infinity<=a&&(a=this.media.seekable.end(0));return a}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(a){this.playbackRate=a||1;this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(a){null!=
a&&(this.media.currentTime=a);this.clearPlayEnd()}},{key:"play",value:function(a,b){this.seekTo(a);a=this.media.play();b&&this.setPlayEnd(b);return a}},{key:"pause",value:function(){var a;this.media&&(a=this.media.pause());this.clearPlayEnd();return a}},{key:"setPlayEnd",value:function(a){var b=this;this._onPlayEnd=function(c){c>=a&&(b.pause(),b.seekTo(a))};this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=
null)}},{key:"getPeaks",value:function(b,c,e){return this.buffer?a(l(d.prototype),"getPeaks",this).call(this,b,c,e):this.peaks||[]}},{key:"setSinkId",value:function(a){return a?this.media.setSinkId?this.media.setSinkId(a):Promise.reject(Error("setSinkId is not supported in your browser")):Promise.reject(Error("Invalid deviceId: "+a))}},{key:"getVolume",value:function(){return this.volume||this.media.volume}},{key:"setVolume",value:function(a){this.volume=a;this.media.volume=this.volume}},{key:"destroy",
value:function(){this.pause();this.unAll();this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media);this.media=null}}]);return d}(r.default);f.default=b;h.exports=f.default},"./src/peakcache.js":function(h,f,b){function e(b,c){for(var a=0;a<c.length;a++){var d=c[a];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}function d(b,c,a){c&&e(b.prototype,c);a&&e(b,a);return b}Object.defineProperty(f,
"__esModule",{value:!0});f.default=void 0;b=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.clearPeakCache()}d(b,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[];this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(b,a,d){b!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=b);b=[];for(var c=0;c<this.peakCacheRanges.length&&this.peakCacheRanges[c]<a;)c++;for(0==c%2&&b.push(a);c<this.peakCacheRanges.length&&
this.peakCacheRanges[c]<=d;)b.push(this.peakCacheRanges[c]),c++;0==c%2&&b.push(d);b=b.filter(function(a,b,c){return 0==b?a!=c[b+1]:b==c.length-1?a!=c[b-1]:a!=c[b-1]&&a!=c[b+1]});this.peakCacheRanges=this.peakCacheRanges.concat(b);this.peakCacheRanges=this.peakCacheRanges.sort(function(a,b){return a-b}).filter(function(a,b,c){return 0==b?a!=c[b+1]:b==c.length-1?a!=c[b-1]:a!=c[b-1]&&a!=c[b+1]});a=[];for(c=0;c<b.length;c+=2)a.push([b[c],b[c+1]]);return a}},{key:"getCacheRanges",value:function(){var b=
[],a;for(a=0;a<this.peakCacheRanges.length;a+=2)b.push([this.peakCacheRanges[a],this.peakCacheRanges[a+1]]);return b}}]);return b}();f.default=b;h.exports=f.default},"./src/util/ajax.js":function(h,f,b){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(b){var d=new e.default,c=new XMLHttpRequest,a=!1;c.open(b.method||"GET",b.url,!0);c.responseType=b.responseType||"json";b.xhr&&(b.xhr.requestHeaders&&b.xhr.requestHeaders.forEach(function(a){c.setRequestHeader(a.key,a.value)}),b.xhr.withCredentials&&
(c.withCredentials=!0));c.addEventListener("progress",function(b){d.fireEvent("progress",b);b.lengthComputable&&b.loaded==b.total&&(a=!0)});c.addEventListener("load",function(b){a||d.fireEvent("progress",b);d.fireEvent("load",b);200==c.status||206==c.status?d.fireEvent("success",c.response,b):d.fireEvent("error",b)});c.addEventListener("error",function(a){return d.fireEvent("error",a)});c.send();d.xhr=c;return d};var e=function(b){return b&&b.__esModule?b:{default:b}}(b("./src/util/observer.js"));
h.exports=f.default},"./src/util/extend.js":function(h,f,b){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(b){for(var d=arguments.length,e=Array(1<d?d-1:0),c=1;c<d;c++)e[c-1]=arguments[c];e.forEach(function(a){Object.keys(a).forEach(function(c){b[c]=a[c]})});return b};h.exports=f.default},"./src/util/frame.js":function(h,f,b){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(b){return function(){for(var d=arguments.length,c=Array(d),a=0;a<d;a++)c[a]=arguments[a];
return(0,e.default)(function(){return b.apply(void 0,c)})}};var e=function(b){return b&&b.__esModule?b:{default:b}}(b("./src/util/request-animation-frame.js"));h.exports=f.default},"./src/util/get-id.js":function(h,f,b){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(){return"wavesurfer_"+Math.random().toString(32).substring(2)};h.exports=f.default},"./src/util/index.js":function(h,f,b){function e(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(f,"__esModule",{value:!0});
Object.defineProperty(f,"ajax",{enumerable:!0,get:function(){return d.default}});Object.defineProperty(f,"getId",{enumerable:!0,get:function(){return k.default}});Object.defineProperty(f,"max",{enumerable:!0,get:function(){return c.default}});Object.defineProperty(f,"min",{enumerable:!0,get:function(){return a.default}});Object.defineProperty(f,"Observer",{enumerable:!0,get:function(){return l.default}});Object.defineProperty(f,"extend",{enumerable:!0,get:function(){return u.default}});Object.defineProperty(f,
"style",{enumerable:!0,get:function(){return q.default}});Object.defineProperty(f,"requestAnimationFrame",{enumerable:!0,get:function(){return r.default}});Object.defineProperty(f,"frame",{enumerable:!0,get:function(){return y.default}});Object.defineProperty(f,"debounce",{enumerable:!0,get:function(){return z.default}});Object.defineProperty(f,"preventClick",{enumerable:!0,get:function(){return p.default}});var d=e(b("./src/util/ajax.js")),k=e(b("./src/util/get-id.js")),c=e(b("./src/util/max.js")),
a=e(b("./src/util/min.js")),l=e(b("./src/util/observer.js")),u=e(b("./src/util/extend.js")),q=e(b("./src/util/style.js")),r=e(b("./src/util/request-animation-frame.js")),y=e(b("./src/util/frame.js")),z=e(b("./node_modules/debounce/index.js")),p=e(b("./src/util/prevent-click.js"))},"./src/util/max.js":function(h,f,b){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(b){var d=-Infinity;Object.keys(b).forEach(function(e){b[e]>d&&(d=b[e])});return d};h.exports=f.default},"./src/util/min.js":function(h,
f,b){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(b){var d=Number(Infinity);Object.keys(b).forEach(function(e){b[e]<d&&(d=b[e])});return d};h.exports=f.default},"./src/util/observer.js":function(h,f,b){function e(b,c){for(var a=0;a<c.length;a++){var d=c[a];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}function d(b,c,a){c&&e(b.prototype,c);a&&e(b,a);return b}Object.defineProperty(f,"__esModule",{value:!0});f.default=
void 0;b=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.handlers=null}d(b,[{key:"on",value:function(b,a){var c=this;this.handlers||(this.handlers={});var d=this.handlers[b];d||(d=this.handlers[b]=[]);d.push(a);return{name:b,callback:a,un:function(a,b){return c.un(a,b)}}}},{key:"un",value:function(b,a){if(this.handlers){b=this.handlers[b];var c;if(b)if(a)for(c=b.length-1;0<=c;c--)b[c]==a&&b.splice(c,1);else b.length=0}}},{key:"unAll",value:function(){this.handlers=
null}},{key:"once",value:function(b,a){var c=this;return this.on(b,function q(){for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];a.apply(c,e);setTimeout(function(){c.un(b,q)},0)})}},{key:"fireEvent",value:function(b){for(var a=arguments.length,c=Array(1<a?a-1:0),d=1;d<a;d++)c[d-1]=arguments[d];this.handlers&&(a=this.handlers[b])&&a.forEach(function(a){a.apply(void 0,c)})}}]);return b}();f.default=b;h.exports=f.default},"./src/util/prevent-click.js":function(h,f,b){function e(b){b.stopPropagation();
document.body.removeEventListener("click",e,!0)}Object.defineProperty(f,"__esModule",{value:!0});f.default=function(b){document.body.addEventListener("click",e,!0)};h.exports=f.default},"./src/util/request-animation-frame.js":function(h,f,b){Object.defineProperty(f,"__esModule",{value:!0});f.default=void 0;b=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b,d){return setTimeout(b,
1E3/60)}).bind(window);f.default=b;h.exports=f.default},"./src/util/style.js":function(h,f,b){Object.defineProperty(f,"__esModule",{value:!0});f.default=function(b,d){Object.keys(d).forEach(function(e){b.style[e]!==d[e]&&(b.style[e]=d[e])});return b};h.exports=f.default},"./src/wavesurfer.js":function(h,f,b){function e(a){return a&&a.__esModule?a:{default:a}}function d(a){d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===
typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return d(a)}function k(a,b){return!b||"object"!==d(b)&&"function"!==typeof b?u(a):b}function c(a){c=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return c(a)}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});
b&&l(a,b)}function l(a,b){l=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return l(a,b)}function u(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function q(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function r(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function y(a,b,
c){b&&r(a.prototype,b);c&&r(a,c);return a}Object.defineProperty(f,"__esModule",{value:!0});f.default=void 0;var z=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};d.get||d.set?Object.defineProperty(b,c,d):b[c]=a[c]}b.default=a;return b}(b("./src/util/index.js")),p=e(b("./src/drawer.multicanvas.js")),x=e(b("./src/webaudio.js")),
t=e(b("./src/mediaelement.js")),B=e(b("./src/peakcache.js"));(function(){function a(b,c){q(this,a)}y(a,[{key:"create",value:function(a){}}]);y(a,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]);return a})();b=function(b){function d(a){q(this,d);var b=k(this,c(d).call(this));b.defaultParams={audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,backend:"WebAudio",barHeight:1,barGap:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,fillParent:!0,
forceDecode:!1,height:128,hideScrollbar:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4E3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:p.default,responsive:!1,scrollParent:!1,skipLength:2,splitChannels:!1,waveColor:"#999",xhr:{}};b.backends={MediaElement:t.default,WebAudio:x.default};b.util=z;b.params=
z.extend({},b.defaultParams,a);b.container="string"==typeof a.container?document.querySelector(b.params.container):b.params.container;if(!b.container)throw Error("Container element not found");b.mediaContainer=null==b.params.mediaContainer?b.container:"string"==typeof b.params.mediaContainer?document.querySelector(b.params.mediaContainer):b.params.mediaContainer;if(!b.mediaContainer)throw Error("Media Container element not found");if(1>=b.params.maxCanvasWidth)throw Error("maxCanvasWidth must be greater than 1");
if(1==b.params.maxCanvasWidth%2)throw Error("maxCanvasWidth must be an even number");b.savedVolume=0;b.isMuted=!1;b.tmpEvents=[];b.currentAjax=null;b.arraybuffer=null;b.drawer=null;b.backend=null;b.peakCache=null;if("function"!==typeof b.params.renderer)throw Error("Renderer parameter is invalid");b.Drawer=b.params.renderer;b.Backend=b.backends[b.params.backend];b.initialisedPluginList={};b.isDestroyed=!1;b.isReady=!1;var e=0;b._onResize=z.debounce(function(){e==b.drawer.wrapper.clientWidth||b.params.scrollParent||
(e=b.drawer.wrapper.clientWidth,b.drawer.fireEvent("redraw"))},"number"===typeof b.params.responsive?b.params.responsive:100);return k(b,u(u(b)))}a(d,b);y(d,null,[{key:"create",value:function(a){return(new d(a)).init()}}]);y(d,[{key:"init",value:function(){this.registerPlugins(this.params.plugins);this.createDrawer();this.createBackend();this.createPeakCache();return this}},{key:"registerPlugins",value:function(a){var b=this;a.forEach(function(a){return b.addPlugin(a)});a.forEach(function(a){a.deferInit||
b.initPlugin(a.name)});this.fireEvent("plugins-registered",a);return this}},{key:"addPlugin",value:function(a){var b=this;if(!a.name)throw Error("Plugin does not have a name!");if(!a.instance)throw Error("Plugin ".concat(a.name," does not have an instance property!"));a.staticProps&&Object.keys(a.staticProps).forEach(function(c){b[c]=a.staticProps[c]});var c=a.instance;Object.getOwnPropertyNames(z.Observer.prototype).forEach(function(a){c.prototype[a]=z.Observer.prototype[a]});this[a.name]=new c(a.params||
{},this);this.fireEvent("plugin-added",a.name);return this}},{key:"initPlugin",value:function(a){if(!this[a])throw Error("Plugin ".concat(a," has not been added yet!"));this.initialisedPluginList[a]&&this.destroyPlugin(a);this[a].init();this.initialisedPluginList[a]=!0;this.fireEvent("plugin-initialised",a);return this}},{key:"destroyPlugin",value:function(a){if(!this[a])throw Error("Plugin ".concat(a," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[a])throw Error("Plugin ".concat(a,
" is not active and cannot be destroyed!"));if("function"!==typeof this[a].destroy)throw Error("Plugin ".concat(a," does not have a destroy function!"));this[a].destroy();delete this.initialisedPluginList[a];this.fireEvent("plugin-destroyed",a);return this}},{key:"destroyAllPlugins",value:function(){var a=this;Object.keys(this.initialisedPluginList).forEach(function(b){return a.destroyPlugin(b)})}},{key:"createDrawer",value:function(){var a=this;this.drawer=new this.Drawer(this.container,this.params);
this.drawer.init();this.fireEvent("drawer-created",this.drawer);!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0));this.drawer.on("redraw",function(){a.drawBuffer();a.drawer.progress(a.backend.getPlayedPercents())});this.drawer.on("click",function(b,c){setTimeout(function(){return a.seekTo(c)},0)});this.drawer.on("scroll",function(b){a.params.partialRender&&a.drawBuffer();a.fireEvent("scroll",b)})}},{key:"createBackend",
value:function(){var a=this;this.backend&&this.backend.destroy();"AudioElement"==this.params.backend&&(this.params.backend="MediaElement");"WebAudio"!=this.params.backend||this.Backend.prototype.supportsWebAudio.call(null)||(this.params.backend="MediaElement");this.backend=new this.Backend(this.params);this.backend.init();this.fireEvent("backend-created",this.backend);this.backend.on("finish",function(){a.drawer.progress(a.backend.getPlayedPercents());a.fireEvent("finish")});this.backend.on("play",
function(){return a.fireEvent("play")});this.backend.on("pause",function(){return a.fireEvent("pause")});this.backend.on("audioprocess",function(b){a.drawer.progress(a.backend.getPlayedPercents());a.fireEvent("audioprocess",b)})}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new B.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",
value:function(a){a>=this.getDuration()?this.seekTo(1):this.seekTo(a/this.getDuration())}},{key:"play",value:function(a,b){var c=this;this.fireEvent("interaction",function(){return c.play(a,b)});return this.backend.play(a,b)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(a){this.skip(-a||
-this.params.skipLength)}},{key:"skipForward",value:function(a){this.skip(a||this.params.skipLength)}},{key:"skip",value:function(a){var b=this.getDuration()||1,c=this.getCurrentTime()||0;c=Math.max(0,Math.min(b,c+(a||0)));this.seekAndCenter(c/b)}},{key:"seekAndCenter",value:function(a){this.seekTo(a);this.drawer.recenter(a)}},{key:"seekTo",value:function(a){var b=this;if("number"!==typeof a||!isFinite(a)||0>a||1<a)return console.error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");
this.fireEvent("interaction",function(){return b.seekTo(a)});var c=this.backend.isPaused();c||this.backend.pause();var d=this.params.scrollParent;this.params.scrollParent=!1;this.backend.seekTo(a*this.getDuration());this.drawer.progress(a);c||this.backend.play();this.params.scrollParent=d;this.fireEvent("seek",a)}},{key:"stop",value:function(){this.pause();this.seekTo(0);this.drawer.progress(0)}},{key:"setSinkId",value:function(a){return this.backend.setSinkId(a)}},{key:"setVolume",value:function(a){this.backend.setVolume(a);
this.fireEvent("volume",a)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(a){this.backend.setPlaybackRate(a)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(a){a!==this.isMuted&&(a?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),
this.isMuted=!1,this.fireEvent("volume",this.savedVolume)));this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"isReady",value:function(){return this.isReady}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent;this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){return this.params.waveColor}},
{key:"setWaveColor",value:function(a){this.params.waveColor=a;this.drawBuffer()}},{key:"getProgressColor",value:function(){return this.params.progressColor}},{key:"setProgressColor",value:function(a){this.params.progressColor=a;this.drawBuffer()}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(a){this.params.cursorColor=a;this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(a){this.params.height=
a;this.drawer.setHeight(a*this.params.pixelRatio);this.drawBuffer()}},{key:"drawBuffer",value:function(){var a=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),b=this.drawer.getWidth(),c=a,d=this.drawer.getScrollX(),e=Math.max(d+b,c);this.params.fillParent&&(!this.params.scrollParent||a<b)&&(c=b,d=0,e=c);if(this.params.partialRender)for(a=this.peakCache.addRangeToPeakCache(c,d,e),b=0;b<a.length;b++){var f=this.backend.getPeaks(c,a[b][0],a[b][1]);this.drawer.drawPeaks(f,
c,a[b][0],a[b][1])}else f=this.backend.getPeaks(c,d,e),this.drawer.drawPeaks(f,c,d,e);this.fireEvent("redraw",f,c)}},{key:"zoom",value:function(a){a?(this.params.minPxPerSec=a,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1);this.drawBuffer();this.drawer.progress(this.backend.getPlayedPercents());this.drawer.recenter(this.getCurrentTime()/this.getDuration());this.fireEvent("zoom",a)}},{key:"loadArrayBuffer",value:function(a){var b=this;
this.decodeArrayBuffer(a,function(a){b.isDestroyed||b.loadDecodedBuffer(a)})}},{key:"loadDecodedBuffer",value:function(a){this.backend.load(a);this.drawBuffer();this.fireEvent("ready");this.isReady=!0}},{key:"loadBlob",value:function(a){var b=this,c=new FileReader;c.addEventListener("progress",function(a){return b.onProgress(a)});c.addEventListener("load",function(a){return b.loadArrayBuffer(a.target.result)});c.addEventListener("error",function(){return b.fireEvent("error","Error reading file")});
c.readAsArrayBuffer(a);this.empty()}},{key:"load",value:function(a,b,c,d){this.empty();if(c){var e={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(c),"Peaks are not provided":!b,"Backend is not of type MediaElement":"MediaElement"!==this.params.backend,"Url is not of type string":"string"!==typeof a},f=Object.keys(e).filter(function(a){return e[a]});f.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+f.join("\n\t- ")),
c=null)}switch(this.params.backend){case "WebAudio":return this.loadBuffer(a,b,d);case "MediaElement":return this.loadMediaElement(a,b,c,d)}}},{key:"loadBuffer",value:function(a,b,c){var d=this,e=function(b){b&&d.tmpEvents.push(d.once("ready",b));return d.getArrayBuffer(a,function(a){return d.loadArrayBuffer(a)})};if(b)this.backend.setPeaks(b,c),this.drawBuffer(),this.tmpEvents.push(this.once("interaction",e));else return e()}},{key:"loadMediaElement",value:function(a,b,c,d){var e=this,f=a;"string"===
typeof a?this.backend.load(f,this.mediaContainer,b,c):(this.backend.loadElt(a,b),f=a.src);this.tmpEvents.push(this.backend.once("canplay",function(){e.drawBuffer();e.fireEvent("ready");e.isReady=!0}),this.backend.once("error",function(a){return e.fireEvent("error",a)}));b&&this.backend.setPeaks(b,d);b&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(f,function(a){e.decodeArrayBuffer(a,function(a){e.backend.buffer=a;e.backend.setPeaks(null);e.drawBuffer();e.fireEvent("waveform-ready")})})}},
{key:"decodeArrayBuffer",value:function(a,b){var c=this;this.arraybuffer=a;this.backend.decodeArrayBuffer(a,function(d){c.isDestroyed||c.arraybuffer!=a||(b(d),c.arraybuffer=null)},function(){return c.fireEvent("error","Error decoding audiobuffer")})}},{key:"getArrayBuffer",value:function(a,b){var c=this;this.currentAjax=a=z.ajax({url:a,responseType:"arraybuffer",xhr:this.params.xhr});this.tmpEvents.push(a.on("progress",function(a){c.onProgress(a)}),a.on("success",function(a,d){b(a);c.currentAjax=
null}),a.on("error",function(a){c.fireEvent("error","XHR error: "+a.target.statusText);c.currentAjax=null}));return a}},{key:"onProgress",value:function(a){this.fireEvent("loading",Math.round(100*(a.lengthComputable?a.loaded/a.total:a.loaded/(a.loaded+1E6))),a.target)}},{key:"exportPCM",value:function(a,b,c,d){b=b||1E4;c=c||!1;a=this.backend.getPeaks(a||1024,d||0);a=[].map.call(a,function(a){return Math.round(a*b)/b});a=JSON.stringify(a);c||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(a));
return a}},{key:"exportImage",value:function(a,b){a||(a="image/png");b||(b=1);return this.drawer.getImage(a,b)}},{key:"cancelAjax",value:function(){this.currentAjax&&(this.currentAjax.xhr.abort(),this.currentAjax=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(a){return a.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource());this.isReady=!1;this.cancelAjax();this.clearTmpEvents();this.drawer.progress(0);this.drawer.setWidth(0);
this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins();this.fireEvent("destroy");this.cancelAjax();this.clearTmpEvents();this.unAll();!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0));this.backend.destroy();this.drawer.destroy();this.isDestroyed=!0;this.isReady=!1;this.arraybuffer=null}}]);return d}(z.Observer);f.default=b;b.VERSION="2.1.2";
b.util=z;h.exports=f.default},"./src/webaudio.js":function(h,f,b){function e(a){e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return e(a)}function d(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function k(a,b){if(b&&("object"===e(b)||"function"===typeof b))return b;if(void 0===
a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function c(a){c=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return c(a)}function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function l(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}function u(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&q(a,b)}function q(a,b){q=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return q(a,b)}Object.defineProperty(f,"__esModule",{value:!0});f.default=void 0;b=function(a){function b(a){var e,f;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var h=k(this,c(b).call(this));h.audioContext=null;h.offlineAudioContext=null;h.stateBehaviors=(e={},d(e,"playing",{init:function(){this.addOnAudioProcess()},
getPlayedPercents:function(){var a=this.getDuration();return this.getCurrentTime()/a||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),d(e,"paused",{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var a=this.getDuration();return this.getCurrentTime()/a||0},getCurrentTime:function(){return this.startPosition}}),d(e,"finished",{init:function(){this.removeOnAudioProcess();this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),
e);h.params=a;h.ac=a.audioContext||h.getAudioContext();h.lastPlay=h.ac.currentTime;h.startPosition=0;h.scheduledPause=null;h.states=(f={},d(f,"playing",Object.create(h.stateBehaviors.playing)),d(f,"paused",Object.create(h.stateBehaviors.paused)),d(f,"finished",Object.create(h.stateBehaviors.finished)),f);h.analyser=null;h.buffer=null;h.filters=[];h.gainNode=null;h.mergedPeaks=null;h.offlineAc=null;h.peaks=null;h.playbackRate=1;h.analyser=null;h.scriptNode=null;h.source=null;h.splitPeaks=[];h.state=
null;h.explicitDuration=null;return h}u(b,a);l(b,[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new (window.AudioContext||window.webkitAudioContext));return window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(a){window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new (window.OfflineAudioContext||
window.webkitOfflineAudioContext)(1,2,a));return window.WaveSurferOfflineAudioContext}}]);l(b,[{key:"init",value:function(){this.createVolumeNode();this.createScriptNode();this.createAnalyserNode();this.setState("paused");this.setPlaybackRate(this.params.audioRate);this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(a){a&&a.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(a){this.state!==
this.states[a]&&(this.state=this.states[a],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this.setFilters(b)}},{key:"setFilters",value:function(a){this.disconnectFilters();a&&a.length&&(this.filters=a,this.analyser.disconnect(),a.reduce(function(a,b){a.connect(b);return b},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.scriptNode=this.params.audioScriptProcessor?this.params.audioScriptProcessor:
this.ac.createScriptProcessor?this.ac.createScriptProcessor(b.scriptBufferSize):this.ac.createJavaScriptNode(b.scriptBufferSize);this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var a=this;this.scriptNode.onaudioprocess=function(){var b=a.getCurrentTime();b>=a.getDuration()?(a.setState("finished"),a.fireEvent("pause")):b>=a.scheduledPause?a.pause():a.state===a.states.playing&&a.fireEvent("audioprocess",b)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=
null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser();this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.gainNode=this.ac.createGain?this.ac.createGain():this.ac.createGainNode();this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(a){if(a){var b=new window.Audio;if(!b.setSinkId)return Promise.reject(Error("setSinkId is not supported in your browser"));b.autoplay=!0;var c=this.ac.createMediaStreamDestination();
this.gainNode.disconnect();this.gainNode.connect(c);b.srcObject=c.stream;return b.setSinkId(a)}return Promise.reject(Error("Invalid deviceId: "+a))}},{key:"setVolume",value:function(a){this.gainNode.gain.setValueAtTime(a,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(a,b,c){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100));this.offlineAc.decodeAudioData(a,
function(a){return b(a)},c)}},{key:"setPeaks",value:function(a,b){this.explicitDuration=b;this.peaks=a}},{key:"setLength",value:function(a){if(!this.mergedPeaks||a!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[];this.mergedPeaks=[];var b=this.buffer?this.buffer.numberOfChannels:1,c;for(c=0;c<b;c++)this.splitPeaks[c]=[],this.splitPeaks[c][2*(a-1)]=0,this.splitPeaks[c][2*(a-1)+1]=0;this.mergedPeaks[2*(a-1)]=0;this.mergedPeaks[2*(a-1)+1]=0}}},{key:"getPeaks",value:function(a,b,c){if(this.peaks)return this.peaks;
b=b||0;c=c||a-1;this.setLength(a);if(!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;this.buffer.length||(this.buffer=this.createBuffer(1,4096,this.sampleRate).buffer);a=this.buffer.length/a;var d=~~(a/10)||1,e=this.buffer.numberOfChannels,f;for(f=0;f<e;f++){var h=this.splitPeaks[f],k=this.buffer.getChannelData(f),l;for(l=b;l<=c;l++){for(var p=~~(l*a),q=~~(p+a),g=0,m=0;p<q;p+=d){var r=k[p];r>m&&(m=r);r<g&&(g=r)}h[2*l]=m;h[2*l+1]=g;if(0==f||m>this.mergedPeaks[2*l])this.mergedPeaks[2*
l]=m;if(0==f||g<this.mergedPeaks[2*l+1])this.mergedPeaks[2*l+1]=g}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroy",value:function(){this.isPaused()||this.pause();this.unAll();this.buffer=null;this.disconnectFilters();this.disconnectSource();this.gainNode.disconnect();this.scriptNode.disconnect();
this.analyser.disconnect();this.params.closeAudioContext&&("function"===typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null)}},{key:"load",value:function(a){this.startPosition=0;this.lastPlay=this.ac.currentTime;this.buffer=a;this.createSource()}},{key:"createSource",value:function(){this.disconnectSource();this.source=this.ac.createBufferSource();
this.source.start=this.source.start||this.source.noteGrainOn;this.source.stop=this.source.stop||this.source.noteOff;this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime);this.source.buffer=this.buffer;this.source.connect(this.analyser)}},{key:"isPaused",value:function(){return this.state!==this.states.playing}},{key:"getDuration",value:function(){return this.buffer?this.buffer.duration:this.explicitDuration?this.explicitDuration:0}},{key:"seekTo",value:function(a,b){if(this.buffer)return this.scheduledPause=
null,null==a&&(a=this.getCurrentTime(),a>=this.getDuration()&&(a=0)),null==b&&(b=this.getDuration()),this.startPosition=a,this.lastPlay=this.ac.currentTime,this.state===this.states.finished&&this.setState("paused"),{start:a,end:b}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(a,b){this.buffer&&(this.createSource(),b=this.seekTo(a,b),a=b.start,this.scheduledPause=b=b.end,this.source.start(0,a,b-a),"suspended"==this.ac.state&&
this.ac.resume&&this.ac.resume(),this.setState("playing"),this.fireEvent("play"))}},{key:"pause",value:function(){this.scheduledPause=null;this.startPosition+=this.getPlayedTime();this.source&&this.source.stop(0);this.setState("paused");this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(a){a=a||1;this.isPaused()?this.playbackRate=a:(this.pause(),
this.playbackRate=a,this.play())}}]);return b}(function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};d.get||d.set?Object.defineProperty(b,c,d):b[c]=a[c]}b.default=a;return b}(b("./src/util/index.js")).Observer);f.default=b;b.scriptBufferSize=256;h.exports=f.default}})});/*
 wavesurfer.js 2.1.2 (2019-01-07)
 https://github.com/katspaugh/wavesurfer.js
 @license BSD-3-Clause
 ********************************** !*\
  !*** ./src/plugin/microphone.js ***!
  \********************************* no static exports found */
(function(h,f){"object"===typeof exports&&"object"===typeof module?module.exports=f():"function"===typeof define&&define.amd?define("microphone",[],f):"object"===typeof exports?exports.microphone=f():(h.WaveSurfer=h.WaveSurfer||{},h.WaveSurfer.microphone=f())})(window,function(){return function(h){function f(e){if(b[e])return b[e].exports;var d=b[e]={i:e,l:!1,exports:{}};h[e].call(d.exports,d,d.exports,f);d.l=!0;return d.exports}var b={};f.m=h;f.c=b;f.d=function(b,d,h){f.o(b,d)||Object.defineProperty(b,
d,{enumerable:!0,get:h})};f.r=function(b){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})};f.t=function(b,d){d&1&&(b=f(b));if(d&8||d&4&&"object"===typeof b&&b&&b.__esModule)return b;var e=Object.create(null);f.r(e);Object.defineProperty(e,"default",{enumerable:!0,value:b});if(d&2&&"string"!=typeof b)for(var c in b)f.d(e,c,function(a){return b[a]}.bind(null,c));return e};f.n=function(b){var d=
b&&b.__esModule?function(){return b["default"]}:function(){return b};f.d(d,"a",d);return d};f.o=function(b,d){return Object.prototype.hasOwnProperty.call(b,d)};f.p="localhost:8080/dist/plugin/";return f(f.s="./src/plugin/microphone.js")}({"./src/plugin/microphone.js":function(h,f,b){function e(b,c){for(var a=0;a<c.length;a++){var d=c[a];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}function d(b,c,a){c&&e(b.prototype,c);a&&e(b,a);return b}
Object.defineProperty(f,"__esModule",{value:!0});f.default=void 0;b=function(){function b(c,a){var d=this;if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this.params=c;this.wavesurfer=a;this.paused=this.active=!1;this.browser=this.detectBrowser();this.reloadBufferFunction=function(a){return d.reloadBuffer(a)};c=function(a,b,c){var d=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return d?new Promise(function(b,
c){d.call(navigator,a,b,c)}):Promise.reject(Error("getUserMedia is not implemented in this browser"))};void 0===navigator.mediaDevices&&(navigator.mediaDevices={});void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=c);this.constraints=this.params.constraints||{video:!1,audio:!0};this.bufferSize=this.params.bufferSize||4096;this.numberOfInputChannels=this.params.numberOfInputChannels||1;this.numberOfOutputChannels=this.params.numberOfOutputChannels||1;this._onBackendCreated=
function(){d.micContext=d.wavesurfer.backend.getAudioContext()}}d(b,null,[{key:"create",value:function(c){return{name:"microphone",deferInit:c&&c.deferInit?c.deferInit:!1,params:c,instance:b}}}]);d(b,[{key:"init",value:function(){this.wavesurfer.on("backend-created",this._onBackendCreated);this.wavesurfer.backend&&this._onBackendCreated()}},{key:"destroy",value:function(){this.paused=!0;this.wavesurfer.un("backend-created",this._onBackendCreated);this.stop()}},{key:"start",value:function(){var b=
this;navigator.mediaDevices.getUserMedia(this.constraints).then(function(a){return b.gotStream(a)}).catch(function(a){return b.deviceError(a)})}},{key:"togglePlay",value:function(){this.active?(this.paused=!this.paused)?this.pause():this.play():this.start()}},{key:"play",value:function(){this.paused=!1;this.connect()}},{key:"pause",value:function(){this.paused=!0;this.disconnect()}},{key:"stop",value:function(){this.active&&(this.stopDevice(),this.wavesurfer.empty())}},{key:"stopDevice",value:function(){this.active=
!1;this.disconnect();this.stream&&(("chrome"===this.browser.browser&&45<=this.browser.version||"firefox"===this.browser.browser&&44<=this.browser.version||"edge"===this.browser.browser||"safari"===this.browser.browser)&&this.stream.getTracks?this.stream.getTracks().forEach(function(b){return b.stop()}):this.stream.stop())}},{key:"connect",value:function(){void 0!==this.stream&&("edge"===this.browser.browser&&(this.localAudioBuffer=this.micContext.createBuffer(this.numberOfInputChannels,this.bufferSize,
this.micContext.sampleRate)),this.mediaStreamSource=this.micContext.createMediaStreamSource(this.stream),this.levelChecker=this.micContext.createScriptProcessor(this.bufferSize,this.numberOfInputChannels,this.numberOfOutputChannels),this.mediaStreamSource.connect(this.levelChecker),this.levelChecker.connect(this.micContext.destination),this.levelChecker.onaudioprocess=this.reloadBufferFunction)}},{key:"disconnect",value:function(){void 0!==this.mediaStreamSource&&this.mediaStreamSource.disconnect();
void 0!==this.levelChecker&&(this.levelChecker.disconnect(),this.levelChecker.onaudioprocess=void 0);void 0!==this.localAudioBuffer&&(this.localAudioBuffer=void 0)}},{key:"reloadBuffer",value:function(b){if(!this.paused)if(this.wavesurfer.empty(),"edge"===this.browser.browser){var a;var c=0;for(a=Math.min(this.localAudioBuffer.numberOfChannels,b.inputBuffer.numberOfChannels);c<a;c++)this.localAudioBuffer.getChannelData(c).set(b.inputBuffer.getChannelData(c));this.wavesurfer.loadDecodedBuffer(this.localAudioBuffer)}else this.wavesurfer.loadDecodedBuffer(b.inputBuffer)}},
{key:"gotStream",value:function(b){this.stream=b;this.active=!0;this.play();this.fireEvent("deviceReady",b)}},{key:"deviceError",value:function(b){this.fireEvent("deviceError",b)}},{key:"extractVersion",value:function(b,a,d){return(b=b.match(a))&&b.length>=d&&parseInt(b[d],10)}},{key:"detectBrowser",value:function(){var b={browser:null,version:null,minVersion:null};if("undefined"===typeof window||!window.navigator)return b.browser="Not a supported browser.",b;if(navigator.mozGetUserMedia)return b.browser=
"firefox",b.version=this.extractVersion(navigator.userAgent,/Firefox\/(\d+)\./,1),b.minVersion=31,b;if(navigator.webkitGetUserMedia)return b.browser="chrome",b.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2),b.minVersion=38,b;if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return b.browser="edge",b.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),b.minVersion=10547,b;if(window.RTCPeerConnection&&navigator.userAgent.match(/AppleWebKit\/(\d+)\./))return b.browser=
"safari",b.minVersion=11,b.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/(\d+)\./,1),b;b.browser="Not a supported browser.";return b}}]);return b}();f.default=b;h.exports=f.default}})});
