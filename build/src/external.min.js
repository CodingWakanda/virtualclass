/*
 jQuery JavaScript Library v1.12.4
 http://jquery.com/

 Includes Sizzle.js
 http://sizzlejs.com/

 Copyright jQuery Foundation and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: 2016-05-20T17:17Z
 Sizzle CSS Selector Engine v2.2.1
 http://sizzlejs.com/

 Copyright jQuery Foundation and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: 2015-10-17
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(k,h,c){k instanceof String&&(k=String(k));for(var g=k.length,a=0;a<g;a++){var f=k[a];if(h.call(c,f,a,k))return{i:a,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(k,h,c){k!=Array.prototype&&k!=Object.prototype&&(k[h]=c.value)};
$jscomp.getGlobal=function(k){return"undefined"!=typeof window&&window===k?k:"undefined"!=typeof global&&null!=global?global:k};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(k,h,c,g){if(h){c=$jscomp.global;k=k.split(".");for(g=0;g<k.length-1;g++){var a=k[g];a in c||(c[a]={});c=c[a]}k=k[k.length-1];g=c[k];h=h(g);h!=g&&null!=h&&$jscomp.defineProperty(c,k,{configurable:!0,writable:!0,value:h})}};
$jscomp.polyfill("Array.prototype.find",function(k){return k?k:function(k,c){return $jscomp.findInternal(this,k,c).v}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(k){return $jscomp.SYMBOL_PREFIX+(k||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var k=$jscomp.global.Symbol.iterator;k||(k=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[k]&&$jscomp.defineProperty(Array.prototype,k,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(k){var h=0;return $jscomp.iteratorPrototype(function(){return h<k.length?{done:!1,value:k[h++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(k){$jscomp.initSymbolIterator();k={next:k};k[$jscomp.global.Symbol.iterator]=function(){return this};return k};$jscomp.iteratorFromArray=function(k,h){$jscomp.initSymbolIterator();k instanceof String&&(k+="");var c=0,g={next:function(){if(c<k.length){var a=c++;return{value:h(a,k[a]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};
$jscomp.polyfill("Array.prototype.values",function(k){return k?k:function(){return $jscomp.iteratorFromArray(this,function(k,c){return c})}},"es6","es3");$jscomp.polyfill("Array.prototype.keys",function(k){return k?k:function(){return $jscomp.iteratorFromArray(this,function(k){return k})}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(k){return k?k:function(k,c,g){var a=this.length||0;0>c&&(c=Math.max(0,a+c));if(null==g||g>a)g=a;g=Number(g);0>g&&(g=Math.max(0,a+g));for(c=Number(c||0);c<g;c++)this[c]=k;return this}},"es6","es3");$jscomp.owns=function(k,h){return Object.prototype.hasOwnProperty.call(k,h)};
$jscomp.polyfill("Object.assign",function(k){return k?k:function(k,c){for(var g=1;g<arguments.length;g++){var a=arguments[g];if(a)for(var f in a)$jscomp.owns(a,f)&&(k[f]=a[f])}return k}},"es6","es3");$jscomp.makeIterator=function(k){$jscomp.initSymbolIterator();var h=k[Symbol.iterator];return h?h.call(k):$jscomp.arrayIterator(k)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(k){function h(){this.batch_=null}function c(d){return d instanceof a?d:new a(function(a,f){a(d)})}if(k&&!$jscomp.FORCE_POLYFILL_PROMISE)return k;h.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};h.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var g=$jscomp.global.setTimeout;h.prototype.asyncExecuteFunction=function(a){g(a,
0)};h.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var f=a[b];delete a[b];try{f()}catch(n){this.asyncThrow_(n)}}}this.batch_=null};h.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var a=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(l){b.reject(l)}};a.prototype.createResolveAndReject_=
function(){function a(a){return function(d){f||(f=!0,a.call(b,d))}}var b=this,f=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};a.prototype.resolveTo_=function(d){if(d===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof a)this.settleSameAsPromise_(d);else{a:switch(typeof d){case "object":var b=null!=d;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(d):this.fulfill_(d)}};a.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(l){this.reject_(l);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};a.prototype.reject_=function(a){this.settle_(2,a)};a.prototype.fulfill_=function(a){this.settle_(1,a)};a.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var f=new h;a.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};a.prototype.settleSameAsThenable_=function(a,b){var d=this.createResolveAndReject_();try{a.call(b,d.resolve,d.reject)}catch(n){d.reject(n)}};a.prototype.then=function(d,b){function f(a,b){return"function"==typeof a?function(b){try{c(a(b))}catch(t){g(t)}}:b}var c,g,k=new a(function(a,
b){c=a;g=b});this.callWhenSettled_(f(d,c),f(b,g));return k};a.prototype.catch=function(a){return this.then(void 0,a)};a.prototype.callWhenSettled_=function(a,b){function d(){switch(c.state_){case 1:a(c.result_);break;case 2:b(c.result_);break;default:throw Error("Unexpected state: "+c.state_);}}var c=this;null==this.onSettledCallbacks_?f.asyncExecute(d):this.onSettledCallbacks_.push(function(){f.asyncExecute(d)})};a.resolve=c;a.reject=function(d){return new a(function(a,f){f(d)})};a.race=function(d){return new a(function(a,
f){for(var b=$jscomp.makeIterator(d),g=b.next();!g.done;g=b.next())c(g.value).callWhenSettled_(a,f)})};a.all=function(d){var b=$jscomp.makeIterator(d),f=b.next();return f.done?c([]):new a(function(a,d){function g(b){return function(d){l[b]=d;n--;0==n&&a(l)}}var l=[],n=0;do l.push(void 0),n++,c(f.value).callWhenSettled_(g(l.length-1),d),f=b.next();while(!f.done)})};return a},"es6","es3");
(function(k,h){"object"===typeof module&&"object"===typeof module.exports?module.exports=k.document?h(k,!0):function(c){if(!c.document)throw Error("jQuery requires a window with a document");return h(c)}:h(k)})("undefined"!==typeof window?window:this,function(k,h){function c(a){var e=!!a&&"length"in a&&a.length,b=u.type(a);return"function"===b||u.isWindow(a)?!1:"array"===b||0===e||"number"===typeof e&&0<e&&e-1 in a}function g(a,e,b){if(u.isFunction(e))return u.grep(a,function(a,d){return!!e.call(a,
d,a)!==b});if(e.nodeType)return u.grep(a,function(a){return a===e!==b});if("string"===typeof e){if(Jb.test(e))return u.filter(e,a,b);e=u.filter(e,a)}return u.grep(a,function(a){return-1<u.inArray(a,e)!==b})}function a(a,e){do a=a[e];while(a&&1!==a.nodeType);return a}function f(a){var e={};u.each(a.match(Kb)||[],function(a,b){e[b]=!0});return e}function d(){Q.addEventListener?(Q.removeEventListener("DOMContentLoaded",b),k.removeEventListener("load",b)):(Q.detachEvent("onreadystatechange",b),k.detachEvent("onload",
b))}function b(){if(Q.addEventListener||"load"===k.event.type||"complete"===Q.readyState)d(),u.ready()}function l(a,e,b){if(void 0===b&&1===a.nodeType)if(b="data-"+e.replace(Jc,"-$1").toLowerCase(),b=a.getAttribute(b),"string"===typeof b){try{b="true"===b?!0:"false"===b?!1:"null"===b?null:+b+""===b?+b:ke.test(b)?u.parseJSON(b):b}catch(yb){}u.data(a,e,b)}else b=void 0;return b}function n(a){for(var e in a)if(("data"!==e||!u.isEmptyObject(a[e]))&&"toJSON"!==e)return!1;return!0}function p(a,e,b,d){if(gc(a)){var f=
u.expando,m=a.nodeType,c=m?u.cache:a,g=m?a[f]:a[f]&&f;if(g&&c[g]&&(d||c[g].data)||void 0!==b||"string"!==typeof e){g||(g=m?a[f]=na.pop()||u.guid++:f);c[g]||(c[g]=m?{}:{toJSON:u.noop});if("object"===typeof e||"function"===typeof e)d?c[g]=u.extend(c[g],e):c[g].data=u.extend(c[g].data,e);a=c[g];d||(a.data||(a.data={}),a=a.data);void 0!==b&&(a[u.camelCase(e)]=b);"string"===typeof e?(b=a[e],null==b&&(b=a[u.camelCase(e)])):b=a;return b}}}function r(a,e,b){if(gc(a)){var d,f,m=a.nodeType,c=m?u.cache:a,g=
m?a[u.expando]:u.expando;if(c[g]){if(e&&(d=b?c[g]:c[g].data)){u.isArray(e)?e=e.concat(u.map(e,u.camelCase)):e in d?e=[e]:(e=u.camelCase(e),e=e in d?[e]:e.split(" "));for(f=e.length;f--;)delete d[e[f]];if(b?!n(d):!u.isEmptyObject(d))return}if(!b&&(delete c[g].data,!n(c[g])))return;m?u.cleanData([a],!0):P.deleteExpando||c!=c.window?delete c[g]:c[g]=void 0}}}function w(a,e,b,d){var f=1,m=20,c=d?function(){return d.cur()}:function(){return u.css(a,e,"")},g=c(),l=b&&b[3]||(u.cssNumber[e]?"":"px"),n=(u.cssNumber[e]||
"px"!==l&&+g)&&kb.exec(u.css(a,e));if(n&&n[3]!==l){l=l||n[3];b=b||[];n=+g||1;do f=f||".5",n/=f,u.style(a,e,n+l);while(f!==(f=c()/g)&&1!==f&&--m)}if(b){n=+n||+g||0;var x=b[1]?n+(b[1]+1)*b[2]:+b[2];d&&(d.unit=l,d.start=n,d.end=x)}return x}function z(a){var e="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video".split(" ");a=a.createDocumentFragment();if(a.createElement)for(;e.length;)a.createElement(e.pop());
return a}function v(a,e){var b,d,f=0,m="undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName(e||"*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll(e||"*"):void 0;if(!m)for(m=[],b=a.childNodes||a;null!=(d=b[f]);f++)!e||u.nodeName(d,e)?m.push(d):u.merge(m,v(d,e));return void 0===e||e&&u.nodeName(a,e)?u.merge([a],m):m}function t(a,e){for(var b,d=0;null!=(b=a[d]);d++)u._data(b,"globalEval",!e||u._data(e[d],"globalEval"))}function q(a){Va.test(a.type)&&(a.defaultChecked=a.checked)}
function y(a,e,b,d,f){for(var m,c,g,l,n,x,k=a.length,h=z(e),p=[],r=0;r<k;r++)if((c=a[r])||0===c)if("object"===u.type(c))u.merge(p,c.nodeType?[c]:c);else if(K.test(c)){g=g||h.appendChild(e.createElement("div"));l=(Kc.exec(c)||["",""])[1].toLowerCase();x=bb[l]||bb._default;g.innerHTML=x[1]+u.htmlPrefilter(c)+x[2];for(m=x[0];m--;)g=g.lastChild;!P.leadingWhitespace&&sc.test(c)&&p.push(e.createTextNode(sc.exec(c)[0]));if(!P.tbody)for(m=(c="table"!==l||oe.test(c)?"<table>"!==x[1]||oe.test(c)?0:g:g.firstChild)&&
c.childNodes.length;m--;)u.nodeName(n=c.childNodes[m],"tbody")&&!n.childNodes.length&&c.removeChild(n);u.merge(p,g.childNodes);for(g.textContent="";g.firstChild;)g.removeChild(g.firstChild);g=h.lastChild}else p.push(e.createTextNode(c));g&&h.removeChild(g);P.appendChecked||u.grep(v(p,"input"),q);for(r=0;c=p[r++];)if(d&&-1<u.inArray(c,d))f&&f.push(c);else if(a=u.contains(c.ownerDocument,c),g=v(h.appendChild(c),"script"),a&&t(g),b)for(m=0;c=g[m++];)ld.test(c.type||"")&&b.push(c);return h}function A(){return!0}
function C(){return!1}function G(){try{return Q.activeElement}catch(ya){}}function E(a,e,b,d,f,m){var c;if("object"===typeof e){"string"!==typeof b&&(d=d||b,b=void 0);for(c in e)E(a,c,b,d,e[c],m);return a}null==d&&null==f?(f=b,d=b=void 0):null==f&&("string"===typeof b?(f=d,d=void 0):(f=d,d=b,b=void 0));if(!1===f)f=C;else if(!f)return a;if(1===m){var g=f;f=function(a){u().off(a);return g.apply(this,arguments)};f.guid=g.guid||(g.guid=u.guid++)}return a.each(function(){u.event.add(this,e,f,d,b)})}function F(a,
e){return u.nodeName(a,"table")&&u.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function I(a){a.type=(null!==u.find.attr(a,"type"))+"/"+a.type;return a}function e(a){var e=pe.exec(a.type);e?a.type=e[1]:a.removeAttribute("type");return a}function m(a,e){if(1===e.nodeType&&u.hasData(a)){var b,d;var f=u._data(a);a=u._data(e,f);var m=f.events;if(m)for(b in delete a.handle,a.events={},m)for(f=0,d=m[b].length;f<
d;f++)u.event.add(e,b,m[b][f]);a.data&&(a.data=u.extend({},a.data))}}function x(a,b,d,f){b=za.apply([],b);var m,c=0,g=a.length,l=g-1,n=b[0],k=u.isFunction(n);if(k||1<g&&"string"===typeof n&&!P.checkClone&&qa.test(n))return a.each(function(e){var m=a.eq(e);k&&(b[0]=n.call(this,e,m.html()));x(m,b,d,f)});if(g){var h=y(b,a[0].ownerDocument,!1,a,f);var p=h.firstChild;1===h.childNodes.length&&(h=p);if(p||f){var q=u.map(v(h,"script"),I);for(m=q.length;c<g;c++)p=h,c!==l&&(p=u.clone(p,!0,!0),m&&u.merge(q,
v(p,"script"))),d.call(a[c],p,c);if(m)for(h=q[q.length-1].ownerDocument,u.map(q,e),c=0;c<m;c++)p=q[c],ld.test(p.type||"")&&!u._data(p,"globalEval")&&u.contains(h,p)&&(p.src?u._evalUrl&&u._evalUrl(p.src):u.globalEval((p.text||p.textContent||p.innerHTML||"").replace($a,"")));h=p=null}}return a}function D(a,e,b){for(var d=e?u.filter(e,a):a,f=0;null!=(e=d[f]);f++)b||1!==e.nodeType||u.cleanData(v(e)),e.parentNode&&(b&&u.contains(e.ownerDocument,e)&&t(v(e,"script")),e.parentNode.removeChild(e));return a}
function H(a,e){a=u(e.createElement(a)).appendTo(e.body);e=u.css(a[0],"display");a.detach();return e}function N(a){var e=Q,b=V[a];b||(b=H(a,e),"none"!==b&&b||(W=(W||u("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(W[0].contentWindow||W[0].contentDocument).document,e.write(),e.close(),b=H(a,e),W.detach()),V[a]=b);return b}function ka(a,e){return{get:function(){if(a())delete this.get;else return(this.get=e).apply(this,arguments)}}}function aa(a){if(a in md)return a;
for(var e=a.charAt(0).toUpperCase()+a.slice(1),b=nd.length;b--;)if(a=nd[b]+e,a in md)return a}function Aa(a,e){for(var b,d,f,m=[],c=0,g=a.length;c<g;c++)d=a[c],d.style&&(m[c]=u._data(d,"olddisplay"),b=d.style.display,e?(m[c]||"none"!==b||(d.style.display=""),""===d.style.display&&Vb(d)&&(m[c]=u._data(d,"olddisplay",N(d.nodeName)))):(f=Vb(d),(b&&"none"!==b||!f)&&u._data(d,"olddisplay",f?b:u.css(d,"display"))));for(c=0;c<g;c++)d=a[c],!d.style||e&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=
e?m[c]||"":"none");return a}function fa(a,e,b){return(a=od.exec(e))?Math.max(0,a[1]-(b||0))+(a[2]||"px"):e}function R(a,e,b,d,f){e=b===(d?"border":"content")?4:"width"===e?1:0;for(var m=0;4>e;e+=2)"margin"===b&&(m+=u.css(a,b+Wa[e],!0,f)),d?("content"===b&&(m-=u.css(a,"padding"+Wa[e],!0,f)),"margin"!==b&&(m-=u.css(a,"border"+Wa[e]+"Width",!0,f))):(m+=u.css(a,"padding"+Wa[e],!0,f),"padding"!==b&&(m+=u.css(a,"border"+Wa[e]+"Width",!0,f)));return m}function X(a,e,b){var d=!0,f="width"===e?a.offsetWidth:
a.offsetHeight,m=rb(a),c=P.boxSizing&&"border-box"===u.css(a,"boxSizing",!1,m);if(0>=f||null==f){f=Lb(a,e,m);if(0>f||null==f)f=a.style[e];if(pd.test(f))return f;d=c&&(P.boxSizingReliable()||f===a.style[e]);f=parseFloat(f)||0}return f+R(a,e,b||(c?"border":"content"),d,m)+"px"}function M(a,e,b,d,f){return new M.prototype.init(a,e,b,d,f)}function ba(){k.setTimeout(function(){Lc=void 0});return Lc=u.now()}function ja(a,e){var b={height:a},d=0;for(e=e?1:0;4>d;d+=2-e){var f=Wa[d];b["margin"+f]=b["padding"+
f]=a}e&&(b.opacity=b.width=a);return b}function ca(a,e,b){for(var d,f=(oa.tweeners[e]||[]).concat(oa.tweeners["*"]),m=0,c=f.length;m<c;m++)if(d=f[m].call(b,e,a))return d}function S(a,e){var b,d;for(b in a){var f=u.camelCase(b);var m=e[f];var c=a[b];u.isArray(c)&&(m=c[1],c=a[b]=c[0]);b!==f&&(a[f]=c,delete a[b]);if((d=u.cssHooks[f])&&"expand"in d)for(b in c=d.expand(c),delete a[f],c)b in a||(a[b]=c[b],e[b]=m);else e[f]=m}}function oa(a,e,b){var d,f=0,m=oa.prefilters.length,c=u.Deferred().always(function(){delete g.elem}),
g=function(){if(d)return!1;var e=Lc||ba();e=Math.max(0,l.startTime+l.duration-e);for(var b=1-(e/l.duration||0),f=0,m=l.tweens.length;f<m;f++)l.tweens[f].run(b);c.notifyWith(a,[l,b,e]);if(1>b&&m)return e;c.resolveWith(a,[l]);return!1},l=c.promise({elem:a,props:u.extend({},e),opts:u.extend(!0,{specialEasing:{},easing:u.easing._default},b),originalProperties:e,originalOptions:b,startTime:Lc||ba(),duration:b.duration,tweens:[],createTween:function(e,b){e=u.Tween(a,l.opts,e,b,l.opts.specialEasing[e]||
l.opts.easing);l.tweens.push(e);return e},stop:function(e){var b=0,f=e?l.tweens.length:0;if(d)return this;for(d=!0;b<f;b++)l.tweens[b].run(1);e?(c.notifyWith(a,[l,1,0]),c.resolveWith(a,[l,e])):c.rejectWith(a,[l,e]);return this}});b=l.props;for(S(b,l.opts.specialEasing);f<m;f++)if(e=oa.prefilters[f].call(l,a,b,l.opts))return u.isFunction(e.stop)&&(u._queueHooks(l.elem,l.opts.queue).stop=u.proxy(e.stop,e)),e;u.map(b,ca,l);u.isFunction(l.opts.start)&&l.opts.start.call(a,l);u.fx.timer(u.extend(g,{elem:a,
anim:l,queue:l.opts.queue}));return l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function Ba(a){return u.attr(a,"class")||""}function La(a){return function(e,b){"string"!==typeof e&&(b=e,e="*");var d=0,f=e.toLowerCase().match(Kb)||[];if(u.isFunction(b))for(;e=f[d++];)"+"===e.charAt(0)?(e=e.slice(1)||"*",(a[e]=a[e]||[]).unshift(b)):(a[e]=a[e]||[]).push(b)}}function va(a,e,b,d){function f(g){var l;m[g]=!0;u.each(a[g]||[],function(a,g){a=g(e,b,
d);if("string"===typeof a&&!c&&!m[a])return e.dataTypes.unshift(a),f(a),!1;if(c)return!(l=a)});return l}var m={},c=a===Mc;return f(e.dataTypes[0])||!m["*"]&&f("*")}function ra(a,e){var b,d,f=u.ajaxSettings.flatOptions||{};for(d in e)void 0!==e[d]&&((f[d]?a:b||(b={}))[d]=e[d]);b&&u.extend(!0,a,b);return a}function sb(a){if(!u.contains(a.ownerDocument||Q,a))return!0;for(;a&&1===a.nodeType;){if("none"===(a.style&&a.style.display||u.css(a,"display"))||"hidden"===a.type)return!0;a=a.parentNode}return!1}
function wa(a,e,b,d){var f;if(u.isArray(e))u.each(e,function(e,f){b||qe.test(a)?d(a,f):wa(a+"["+("object"===typeof f&&null!=f?e:"")+"]",f,b,d)});else if(b||"object"!==u.type(e))d(a,e);else for(f in e)wa(a+"["+f+"]",e[f],b,d)}function Ta(){try{return new k.XMLHttpRequest}catch(ya){}}function Xa(){try{return new k.ActiveXObject("Microsoft.XMLHTTP")}catch(ya){}}function xa(a){return u.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var na=[],Q=k.document,da=na.slice,za=na.concat,Ea=na.push,
Ia=na.indexOf,la={},Oa=la.toString,Ya=la.hasOwnProperty,P={},u=function(a,e){return new u.fn.init(a,e)},pa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,zb=/^-ms-/,Pa=/-([\da-z])/gi,qd=function(a,e){return e.toUpperCase()};u.fn=u.prototype={jquery:"1.12.4",constructor:u,selector:"",length:0,toArray:function(){return da.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:da.call(this)},pushStack:function(a){a=u.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},
each:function(a){return u.each(this,a)},map:function(a){return this.pushStack(u.map(this,function(e,b){return a.call(e,b,e)}))},slice:function(){return this.pushStack(da.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var e=this.length;a=+a+(0>a?e:0);return this.pushStack(0<=a&&a<e?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:Ea,sort:na.sort,splice:na.splice};u.extend=u.fn.extend=function(){var a,e,b,
d=arguments[0]||{},f=1,m=arguments.length,c=!1;"boolean"===typeof d&&(c=d,d=arguments[f]||{},f++);"object"===typeof d||u.isFunction(d)||(d={});f===m&&(d=this,f--);for(;f<m;f++)if(null!=(b=arguments[f]))for(e in b){var g=d[e];var l=b[e];d!==l&&(c&&l&&(u.isPlainObject(l)||(a=u.isArray(l)))?(a?(a=!1,g=g&&u.isArray(g)?g:[]):g=g&&u.isPlainObject(g)?g:{},d[e]=u.extend(c,g,l)):void 0!==l&&(d[e]=l))}return d};u.extend({expando:"jQuery"+("1.12.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);
},noop:function(){},isFunction:function(a){return"function"===u.type(a)},isArray:Array.isArray||function(a){return"array"===u.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){var e=a&&a.toString();return!u.isArray(a)&&0<=e-parseFloat(e)+1},isEmptyObject:function(a){for(var e in a)return!1;return!0},isPlainObject:function(a){var e;if(!a||"object"!==u.type(a)||a.nodeType||u.isWindow(a))return!1;try{if(a.constructor&&!Ya.call(a,"constructor")&&!Ya.call(a.constructor.prototype,
"isPrototypeOf"))return!1}catch(je){return!1}if(!P.ownFirst)for(e in a)return Ya.call(a,e);for(e in a);return void 0===e||Ya.call(a,e)},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?la[Oa.call(a)]||"object":typeof a},globalEval:function(a){a&&u.trim(a)&&(k.execScript||function(a){k.eval.call(k,a)})(a)},camelCase:function(a){return a.replace(zb,"ms-").replace(Pa,qd)},nodeName:function(a,e){return a.nodeName&&a.nodeName.toLowerCase()===e.toLowerCase()},each:function(a,
e){var b,d=0;if(c(a))for(b=a.length;d<b&&!1!==e.call(a[d],d,a[d]);d++);else for(d in a)if(!1===e.call(a[d],d,a[d]))break;return a},trim:function(a){return null==a?"":(a+"").replace(pa,"")},makeArray:function(a,e){e=e||[];null!=a&&(c(Object(a))?u.merge(e,"string"===typeof a?[a]:a):Ea.call(e,a));return e},inArray:function(a,e,b){if(e){if(Ia)return Ia.call(e,a,b);var d=e.length;for(b=b?0>b?Math.max(0,d+b):b:0;b<d;b++)if(b in e&&e[b]===a)return b}return-1},merge:function(a,e){for(var b=+e.length,d=0,
f=a.length;d<b;)a[f++]=e[d++];if(b!==b)for(;void 0!==e[d];)a[f++]=e[d++];a.length=f;return a},grep:function(a,e,b){for(var d=[],f=0,m=a.length,c=!b;f<m;f++)b=!e(a[f],f),b!==c&&d.push(a[f]);return d},map:function(a,e,b){var d,f=0,m=[];if(c(a))for(d=a.length;f<d;f++){var g=e(a[f],f,b);null!=g&&m.push(g)}else for(f in a)g=e(a[f],f,b),null!=g&&m.push(g);return za.apply([],m)},guid:1,proxy:function(a,e){if("string"===typeof e){var b=a[e];e=a;a=b}if(u.isFunction(a)){var d=da.call(arguments,2);b=function(){return a.apply(e||
this,d.concat(da.call(arguments)))};b.guid=a.guid=a.guid||u.guid++;return b}},now:function(){return+new Date},support:P});"function"===typeof Symbol&&(u.fn[Symbol.iterator]=na[Symbol.iterator]);u.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,e){la["[object "+e+"]"]=e.toLowerCase()});var Db=function(a){function e(a,e,b,d){var f,m,c,g,l=e&&e.ownerDocument,n=e?e.nodeType:9;b=b||[];if("string"!==typeof a||!a||1!==n&&9!==n&&11!==n)return b;if(!d&&((e?
e.ownerDocument||e:E)!==A&&O(e),e=e||A,C)){if(11!==n&&(g=La.exec(a)))if(f=g[1])if(9===n)if(m=e.getElementById(f)){if(m.id===f)return b.push(m),b}else return b;else{if(l&&(m=l.getElementById(f))&&G(e,m)&&m.id===f)return b.push(m),b}else{if(g[2])return da.apply(b,e.getElementsByTagName(a)),b;if((f=g[3])&&la.getElementsByClassName&&e.getElementsByClassName)return da.apply(b,e.getElementsByClassName(f)),b}if(!(!la.qsa||M[a+" "]||ya&&ya.test(a))){if(1!==n){l=e;var k=a}else if("object"!==e.nodeName.toLowerCase()){(c=
e.getAttribute("id"))?c=c.replace(J,"\\$&"):e.setAttribute("id",c=R);g=T(a);f=g.length;for(m=Q.test(c)?"#"+c:"[id='"+c+"']";f--;)g[f]=m+" "+h(g[f]);k=g.join(",");l=xa.test(a)&&x(e.parentNode)||e}if(k)try{return da.apply(b,l.querySelectorAll(k)),b}catch(jh){}finally{c===R&&e.removeAttribute("id")}}}return W(a.replace(ja,"$1"),e,b,d)}function b(){function a(b,d){e.push(b+" ")>pa.cacheLength&&delete a[e.shift()];return a[b+" "]=d}var e=[];return a}function d(a){a[R]=!0;return a}function f(a){var e=A.createElement("div");
try{return!!a(e)}catch(bh){return!1}finally{e.parentNode&&e.parentNode.removeChild(e)}}function m(a,e){a=a.split("|");for(var b=a.length;b--;)pa.attrHandle[a[b]]=e}function c(a,e){var b=e&&a,d=b&&1===a.nodeType&&1===e.nodeType&&(~e.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(d)return d;if(b)for(;b=b.nextSibling;)if(b===e)return-1;return a?1:-1}function g(a){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===a}}function l(a){return function(e){var b=e.nodeName.toLowerCase();
return("input"===b||"button"===b)&&e.type===a}}function n(a){return d(function(e){e=+e;return d(function(b,d){for(var f,m=a([],b.length,e),c=m.length;c--;)b[f=m[c]]&&(b[f]=!(d[f]=b[f]))})})}function x(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function k(){}function h(a){for(var e=0,b=a.length,d="";e<b;e++)d+=a[e].value;return d}function p(a,e,b){var d=e.dir,f=b&&"parentNode"===d,m=u++;return e.first?function(e,b,m){for(;e=e[d];)if(1===e.nodeType||f)return a(e,b,m)}:function(e,b,
c){var g,l=[X,m];if(c)for(;e=e[d];){if((1===e.nodeType||f)&&a(e,b,c))return!0}else for(;e=e[d];)if(1===e.nodeType||f){var n=e[R]||(e[R]={});n=n[e.uniqueID]||(n[e.uniqueID]={});if((g=n[d])&&g[0]===X&&g[1]===m)return l[2]=g[2];n[d]=l;if(l[2]=a(e,b,c))return!0}}}function q(a){return 1<a.length?function(e,b,d){for(var f=a.length;f--;)if(!a[f](e,b,d))return!1;return!0}:a[0]}function r(a,e,b,d,f){for(var m,c=[],g=0,l=a.length,n=null!=e;g<l;g++)if(m=a[g])if(!b||b(m,d,f))c.push(m),n&&e.push(g);return c}function w(a,
b,f,m,c,g){m&&!m[R]&&(m=w(m));c&&!c[R]&&(c=w(c,g));return d(function(d,g,l,n){var x,k=[],h=[],p=g.length,q;if(!(q=d)){q=b||"*";for(var w=l.nodeType?[l]:l,v=[],t=0,D=w.length;t<D;t++)e(q,w[t],v);q=v}q=!a||!d&&b?q:r(q,k,a,l,n);w=f?c||(d?a:p||m)?[]:g:q;f&&f(q,w,l,n);if(m){var y=r(w,h);m(y,[],l,n);for(l=y.length;l--;)if(x=y[l])w[h[l]]=!(q[h[l]]=x)}if(d){if(c||a){if(c){y=[];for(l=w.length;l--;)(x=w[l])&&y.push(q[l]=x);c(null,w=[],y,n)}for(l=w.length;l--;)(x=w[l])&&-1<(y=c?S(d,x):k[l])&&(d[y]=!(g[y]=x))}}else w=
r(w===g?w.splice(p,w.length):w),c?c(null,g,w,n):da.apply(g,w)})}function v(a){var e,b,d=a.length,f=pa.relative[a[0].type];var m=f||pa.relative[" "];for(var c=f?1:0,g=p(function(a){return a===e},m,!0),l=p(function(a){return-1<S(e,a)},m,!0),n=[function(a,b,d){a=!f&&(d||b!==z)||((e=b).nodeType?g(a,b,d):l(a,b,d));e=null;return a}];c<d;c++)if(m=pa.relative[a[c].type])n=[p(q(n),m)];else{m=pa.filter[a[c].type].apply(null,a[c].matches);if(m[R]){for(b=++c;b<d&&!pa.relative[a[b].type];b++);return w(1<c&&q(n),
1<c&&h(a.slice(0,c-1).concat({value:" "===a[c-2].type?"*":""})).replace(ja,"$1"),m,c<b&&v(a.slice(c,b)),b<d&&v(a=a.slice(b)),b<d&&h(a))}n.push(m)}return q(n)}function t(a,b){var f=0<b.length,m=0<a.length,c=function(d,c,g,l,n){var x,k,h=0,p="0",q=d&&[],w=[],v=z,t=d||m&&pa.find.TAG("*",n),D=X+=null==v?1:Math.random()||.1,y=t.length;for(n&&(z=c===A||c||n);p!==y&&null!=(x=t[p]);p++){if(m&&x){var H=0;c||x.ownerDocument===A||(O(x),g=!C);for(;k=a[H++];)if(k(x,c||A,g)){l.push(x);break}n&&(X=D)}f&&((x=!k&&
x)&&h--,d&&q.push(x))}h+=p;if(f&&p!==h){for(H=0;k=b[H++];)k(q,w,c,g);if(d){if(0<h)for(;p--;)q[p]||w[p]||(w[p]=ba.call(l));w=r(w)}da.apply(l,w);n&&!d&&0<w.length&&1<h+b.length&&e.uniqueSort(l)}n&&(X=D,z=v);return q};return f?d(c):c}var D,z,y,H,A,N,C,ya,F,aa,G,R="sizzle"+1*new Date,E=a.document,X=0,u=0,ka=b(),Aa=b(),M=b(),I=function(a,e){a===e&&(H=!0);return 0},fa={}.hasOwnProperty,ca=[],ba=ca.pop,wa=ca.push,da=ca.push,sb=ca.slice,S=function(a,e){for(var b=0,d=a.length;b<d;b++)if(a[b]===e)return b;
return-1},oa=/[\x20\t\r\n\f]+/g,ja=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Ea=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,za=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Ta=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,Ia=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
Q=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,Ba={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},Xa=/^(?:input|select|textarea|button)$/i,na=/^h\d$/i,ra=
/^[^{]+\{\s*\[native \w/,La=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xa=/[+~]/,J=/'|\\/g,K=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,va=function(a,e,b){a="0x"+e-65536;return a!==a||b?e:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)},P=function(){O()};try{da.apply(ca=sb.call(E.childNodes),E.childNodes),ca[E.childNodes.length].nodeType}catch(Nc){da={apply:ca.length?function(a,e){wa.apply(a,sb.call(e))}:function(a,e){for(var b=a.length,d=0;a[b++]=e[d++];);a.length=
b-1}}}var la=e.support={};var Oa=e.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};var O=e.setDocument=function(a){var e;a=a?a.ownerDocument||a:E;if(a===A||9!==a.nodeType||!a.documentElement)return A;A=a;N=A.documentElement;C=!Oa(A);(e=A.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",P,!1):e.attachEvent&&e.attachEvent("onunload",P));la.attributes=f(function(a){a.className="i";return!a.getAttribute("className")});la.getElementsByTagName=
f(function(a){a.appendChild(A.createComment(""));return!a.getElementsByTagName("*").length});la.getElementsByClassName=ra.test(A.getElementsByClassName);la.getById=f(function(a){N.appendChild(a).id=R;return!A.getElementsByName||!A.getElementsByName(R).length});la.getById?(pa.find.ID=function(a,e){if("undefined"!==typeof e.getElementById&&C)return(a=e.getElementById(a))?[a]:[]},pa.filter.ID=function(a){var e=a.replace(K,va);return function(a){return a.getAttribute("id")===e}}):(delete pa.find.ID,pa.filter.ID=
function(a){var e=a.replace(K,va);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===e}});pa.find.TAG=la.getElementsByTagName?function(a,e){if("undefined"!==typeof e.getElementsByTagName)return e.getElementsByTagName(a);if(la.qsa)return e.querySelectorAll(a)}:function(a,e){var b=[],d=0;e=e.getElementsByTagName(a);if("*"===a){for(;a=e[d++];)1===a.nodeType&&b.push(a);return b}return e};pa.find.CLASS=la.getElementsByClassName&&function(a,e){if("undefined"!==
typeof e.getElementsByClassName&&C)return e.getElementsByClassName(a)};F=[];ya=[];if(la.qsa=ra.test(A.querySelectorAll))f(function(a){N.appendChild(a).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>";a.querySelectorAll("[msallowcapture^='']").length&&ya.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||ya.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
a.querySelectorAll("[id~="+R+"-]").length||ya.push("~=");a.querySelectorAll(":checked").length||ya.push(":checked");a.querySelectorAll("a#"+R+"+*").length||ya.push(".#.+[+~]")}),f(function(a){var e=A.createElement("input");e.setAttribute("type","hidden");a.appendChild(e).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&ya.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||ya.push(":enabled",":disabled");a.querySelectorAll("*,:x");ya.push(",.*:")});(la.matchesSelector=
ra.test(aa=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&f(function(a){la.disconnectedMatch=aa.call(a,"div");aa.call(a,"[s!='']:x");F.push("!=",":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")});
ya=ya.length&&new RegExp(ya.join("|"));F=F.length&&new RegExp(F.join("|"));G=(e=ra.test(N.compareDocumentPosition))||ra.test(N.contains)?function(a,e){var b=9===a.nodeType?a.documentElement:a;e=e&&e.parentNode;return a===e||!!(e&&1===e.nodeType&&(b.contains?b.contains(e):a.compareDocumentPosition&&a.compareDocumentPosition(e)&16))}:function(a,e){if(e)for(;e=e.parentNode;)if(e===a)return!0;return!1};I=e?function(a,e){if(a===e)return H=!0,0;var b=!a.compareDocumentPosition-!e.compareDocumentPosition;
if(b)return b;b=(a.ownerDocument||a)===(e.ownerDocument||e)?a.compareDocumentPosition(e):1;return b&1||!la.sortDetached&&e.compareDocumentPosition(a)===b?a===A||a.ownerDocument===E&&G(E,a)?-1:e===A||e.ownerDocument===E&&G(E,e)?1:y?S(y,a)-S(y,e):0:b&4?-1:1}:function(a,e){if(a===e)return H=!0,0;var b=0,d=a.parentNode,f=e.parentNode,m=[a],g=[e];if(!d||!f)return a===A?-1:e===A?1:d?-1:f?1:y?S(y,a)-S(y,e):0;if(d===f)return c(a,e);for(;a=a.parentNode;)m.unshift(a);for(a=e;a=a.parentNode;)g.unshift(a);for(;m[b]===
g[b];)b++;return b?c(m[b],g[b]):m[b]===E?-1:g[b]===E?1:0};return A};e.matches=function(a,b){return e(a,null,null,b)};e.matchesSelector=function(a,b){(a.ownerDocument||a)!==A&&O(a);b=b.replace(Ta,"='$1']");if(!(!la.matchesSelector||!C||M[b+" "]||F&&F.test(b)||ya&&ya.test(b)))try{var d=aa.call(a,b);if(d||la.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(ch){}return 0<e(b,A,null,[a]).length};e.contains=function(a,e){(a.ownerDocument||a)!==A&&O(a);return G(a,e)};e.attr=function(a,
e){(a.ownerDocument||a)!==A&&O(a);var b=pa.attrHandle[e.toLowerCase()];b=b&&fa.call(pa.attrHandle,e.toLowerCase())?b(a,e,!C):void 0;return void 0!==b?b:la.attributes||!C?a.getAttribute(e):(b=a.getAttributeNode(e))&&b.specified?b.value:null};e.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};e.uniqueSort=function(a){var e,b=[],d=0,f=0;H=!la.detectDuplicates;y=!la.sortStable&&a.slice(0);a.sort(I);if(H){for(;e=a[f++];)e===a[f]&&(d=b.push(f));for(;d--;)a.splice(b[d],1)}y=null;
return a};var Ya=e.getText=function(a){var e="",b=0;var d=a.nodeType;if(!d)for(;d=a[b++];)e+=Ya(d);else if(1===d||9===d||11===d){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)e+=Ya(a)}else if(3===d||4===d)return a.nodeValue;return e};var pa=e.selectors={cacheLength:50,createPseudo:d,match:Ba,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=
a[1].replace(K,va);a[3]=(a[3]||a[4]||a[5]||"").replace(K,va);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||e.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&e.error(a[0]);return a},PSEUDO:function(a){var e,b=!a[6]&&a[2];if(Ba.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":b&&Ia.test(b)&&(e=T(b,!0))&&(e=b.indexOf(")",b.length-e)-b.length)&&(a[0]=a[0].slice(0,
e),a[2]=b.slice(0,e));return a.slice(0,3)}},filter:{TAG:function(a){var e=a.replace(K,va).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===e}},CLASS:function(a){var e=ka[a+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),ka(a,function(a){return e.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,b,d){return function(f){f=
e.attr(f,a);if(null==f)return"!="===b;if(!b)return!0;f+="";return"="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&-1<f.indexOf(d):"$="===b?d&&f.slice(-d.length)===d:"~="===b?-1<(" "+f.replace(oa," ")+" ").indexOf(d):"|="===b?f===d||f.slice(0,d.length+1)===d+"-":!1}},CHILD:function(a,e,b,d,f){var m="nth"!==a.slice(0,3),c="last"!==a.slice(-4),g="of-type"===e;return 1===d&&0===f?function(a){return!!a.parentNode}:function(e,b,l){var n,x;b=m!==c?"nextSibling":"previousSibling";var k=
e.parentNode,h=g&&e.nodeName.toLowerCase();l=!l&&!g;var p=!1;if(k){if(m){for(;b;){for(n=e;n=n[b];)if(g?n.nodeName.toLowerCase()===h:1===n.nodeType)return!1;var q=b="only"===a&&!q&&"nextSibling"}return!0}q=[c?k.firstChild:k.lastChild];if(c&&l){n=k;var r=n[R]||(n[R]={});r=r[n.uniqueID]||(r[n.uniqueID]={});p=r[a]||[];p=(x=p[0]===X&&p[1])&&p[2];for(n=x&&k.childNodes[x];n=++x&&n&&n[b]||(p=x=0)||q.pop();)if(1===n.nodeType&&++p&&n===e){r[a]=[X,x,p];break}}else if(l&&(n=e,r=n[R]||(n[R]={}),r=r[n.uniqueID]||
(r[n.uniqueID]={}),p=r[a]||[],p=x=p[0]===X&&p[1]),!1===p)for(;(n=++x&&n&&n[b]||(p=x=0)||q.pop())&&((g?n.nodeName.toLowerCase()!==h:1!==n.nodeType)||!++p||(l&&(r=n[R]||(n[R]={}),r=r[n.uniqueID]||(r[n.uniqueID]={}),r[a]=[X,p]),n!==e)););p-=f;return p===d||0===p%d&&0<=p/d}}},PSEUDO:function(a,b){var f=pa.pseudos[a]||pa.setFilters[a.toLowerCase()]||e.error("unsupported pseudo: "+a);if(f[R])return f(b);if(1<f.length){var m=[a,a,"",b];return pa.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,e){for(var d,
m=f(a,b),c=m.length;c--;)d=S(a,m[c]),a[d]=!(e[d]=m[c])}):function(a){return f(a,0,m)}}return f}},pseudos:{not:d(function(a){var e=[],b=[],f=V(a.replace(ja,"$1"));return f[R]?d(function(a,e,b,d){d=f(a,null,d,[]);for(var m=a.length;m--;)if(b=d[m])a[m]=!(e[m]=b)}):function(a,d,m){e[0]=a;f(e,null,m,b);e[0]=null;return!b.pop()}}),has:d(function(a){return function(b){return 0<e(a,b).length}}),contains:d(function(a){a=a.replace(K,va);return function(e){return-1<(e.textContent||e.innerText||Ya(e)).indexOf(a)}}),
lang:d(function(a){Q.test(a||"")||e.error("unsupported lang: "+a);a=a.replace(K,va).toLowerCase();return function(e){var b;do if(b=C?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return b=b.toLowerCase(),b===a||0===b.indexOf(a+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var b=a.location&&a.location.hash;return b&&b.slice(1)===e.id},root:function(a){return a===N},focus:function(a){return a===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(a.type||a.href||
~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var e=a.nodeName.toLowerCase();return"input"===e&&!!a.checked||"option"===e&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!pa.pseudos.empty(a)},header:function(a){return na.test(a.nodeName)},input:function(a){return Xa.test(a.nodeName)},
button:function(a){var e=a.nodeName.toLowerCase();return"input"===e&&"button"===a.type||"button"===e},text:function(a){var e;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(e=a.getAttribute("type"))||"text"===e.toLowerCase())},first:n(function(){return[0]}),last:n(function(a,e){return[e-1]}),eq:n(function(a,e,b){return[0>b?b+e:b]}),even:n(function(a,e){for(var b=0;b<e;b+=2)a.push(b);return a}),odd:n(function(a,e){for(var b=1;b<e;b+=2)a.push(b);return a}),lt:n(function(a,e,b){for(e=
0>b?b+e:b;0<=--e;)a.push(e);return a}),gt:n(function(a,e,b){for(b=0>b?b+e:b;++b<e;)a.push(b);return a})}};pa.pseudos.nth=pa.pseudos.eq;for(D in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})pa.pseudos[D]=g(D);for(D in{submit:!0,reset:!0})pa.pseudos[D]=l(D);k.prototype=pa.filters=pa.pseudos;pa.setFilters=new k;var T=e.tokenize=function(a,b){var d,f,m,c,g;if(c=Aa[a+" "])return b?0:c.slice(0);c=a;var l=[];for(g=pa.preFilter;c;){if(!n||(d=Ea.exec(c)))d&&(c=c.slice(d[0].length)||c),l.push(f=[]);var n=
!1;if(d=za.exec(c))n=d.shift(),f.push({value:n,type:d[0].replace(ja," ")}),c=c.slice(n.length);for(m in pa.filter)!(d=Ba[m].exec(c))||g[m]&&!(d=g[m](d))||(n=d.shift(),f.push({value:n,type:m,matches:d}),c=c.slice(n.length));if(!n)break}return b?c.length:c?e.error(a):Aa(a,l).slice(0)};var V=e.compile=function(a,e){var b,d=[],f=[],m=M[a+" "];if(!m){e||(e=T(a));for(b=e.length;b--;)m=v(e[b]),m[R]?d.push(m):f.push(m);m=M(a,t(f,d));m.selector=a}return m};var W=e.select=function(a,e,b,d){var f,m,c,g="function"===
typeof a&&a,l=!d&&T(a=g.selector||a);b=b||[];if(1===l.length){var n=l[0]=l[0].slice(0);if(2<n.length&&"ID"===(m=n[0]).type&&la.getById&&9===e.nodeType&&C&&pa.relative[n[1].type]){e=(pa.find.ID(m.matches[0].replace(K,va),e)||[])[0];if(!e)return b;g&&(e=e.parentNode);a=a.slice(n.shift().value.length)}for(f=Ba.needsContext.test(a)?0:n.length;f--;){m=n[f];if(pa.relative[c=m.type])break;if(c=pa.find[c])if(d=c(m.matches[0].replace(K,va),xa.test(n[0].type)&&x(e.parentNode)||e)){n.splice(f,1);a=d.length&&
h(n);if(!a)return da.apply(b,d),b;break}}}(g||V(a,l))(d,e,!C,b,!e||xa.test(a)&&x(e.parentNode)||e);return b};la.sortStable=R.split("").sort(I).join("")===R;la.detectDuplicates=!!H;O();la.sortDetached=f(function(a){return a.compareDocumentPosition(A.createElement("div"))&1});f(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||m("type|href|height|width",function(a,e,b){if(!b)return a.getAttribute(e,"type"===e.toLowerCase()?1:2)});la.attributes&&f(function(a){a.innerHTML=
"<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||m("value",function(a,e,b){if(!b&&"input"===a.nodeName.toLowerCase())return a.defaultValue});f(function(a){return null==a.getAttribute("disabled")})||m("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,e,b){var d;if(!b)return!0===a[e]?e.toLowerCase():(d=a.getAttributeNode(e))&&d.specified?d.value:null});return e}(k);
u.find=Db;u.expr=Db.selectors;u.expr[":"]=u.expr.pseudos;u.uniqueSort=u.unique=Db.uniqueSort;u.text=Db.getText;u.isXMLDoc=Db.isXML;u.contains=Db.contains;var lb=function(a,e,b){for(var d=[],f=void 0!==b;(a=a[e])&&9!==a.nodeType;)if(1===a.nodeType){if(f&&u(a).is(b))break;d.push(a)}return d},sd=function(a,e){for(var b=[];a;a=a.nextSibling)1===a.nodeType&&a!==e&&b.push(a);return b},Qc=u.expr.match.needsContext,Qa=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Jb=/^.[^:#\[\.,]*$/;u.filter=function(a,e,b){var d=e[0];
b&&(a=":not("+a+")");return 1===e.length&&1===d.nodeType?u.find.matchesSelector(d,a)?[d]:[]:u.find.matches(a,u.grep(e,function(a){return 1===a.nodeType}))};u.fn.extend({find:function(a){var e,b=[],d=this,f=d.length;if("string"!==typeof a)return this.pushStack(u(a).filter(function(){for(e=0;e<f;e++)if(u.contains(d[e],this))return!0}));for(e=0;e<f;e++)u.find(a,d[e],b);b=this.pushStack(1<f?u.unique(b):b);b.selector=this.selector?this.selector+" "+a:a;return b},filter:function(a){return this.pushStack(g(this,
a||[],!1))},not:function(a){return this.pushStack(g(this,a||[],!0))},is:function(a){return!!g(this,"string"===typeof a&&Qc.test(a)?u(a):a||[],!1).length}});var sa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(u.fn.init=function(a,e,b){if(!a)return this;b=b||Ka;if("string"===typeof a){var d="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:sa.exec(a);if(!d||!d[1]&&e)return!e||e.jquery?(e||b).find(a):this.constructor(e).find(a);if(d[1]){if(e=e instanceof u?e[0]:e,u.merge(this,u.parseHTML(d[1],
e&&e.nodeType?e.ownerDocument||e:Q,!0)),Qa.test(d[1])&&u.isPlainObject(e))for(d in e)if(u.isFunction(this[d]))this[d](e[d]);else this.attr(d,e[d])}else{if((e=Q.getElementById(d[2]))&&e.parentNode){if(e.id!==d[2])return Ka.find(a);this.length=1;this[0]=e}this.context=Q;this.selector=a}return this}if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(u.isFunction(a))return"undefined"!==typeof b.ready?b.ready(a):a(u);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);
return u.makeArray(a,this)}).prototype=u.fn;var Ka=u(Q);var tc=/^(?:parents|prev(?:Until|All))/,Rd={children:!0,contents:!0,next:!0,prev:!0};u.fn.extend({has:function(a){var e,b=u(a,this),d=b.length;return this.filter(function(){for(e=0;e<d;e++)if(u.contains(this,b[e]))return!0})},closest:function(a,e){for(var b,d=0,f=this.length,m=[],c=Qc.test(a)||"string"!==typeof a?u(a,e||this.context):0;d<f;d++)for(b=this[d];b&&b!==e;b=b.parentNode)if(11>b.nodeType&&(c?-1<c.index(b):1===b.nodeType&&u.find.matchesSelector(b,
a))){m.push(b);break}return this.pushStack(1<m.length?u.uniqueSort(m):m)},index:function(a){return a?"string"===typeof a?u.inArray(this[0],u(a)):u.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,e){return this.pushStack(u.uniqueSort(u.merge(this.get(),u(a,e))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});u.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return lb(a,
"parentNode")},parentsUntil:function(a,e,b){return lb(a,"parentNode",b)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(a){return lb(a,"nextSibling")},prevAll:function(a){return lb(a,"previousSibling")},nextUntil:function(a,e,b){return lb(a,"nextSibling",b)},prevUntil:function(a,e,b){return lb(a,"previousSibling",b)},siblings:function(a){return sd((a.parentNode||{}).firstChild,a)},children:function(a){return sd(a.firstChild)},contents:function(a){return u.nodeName(a,
"iframe")?a.contentDocument||a.contentWindow.document:u.merge([],a.childNodes)}},function(a,e){u.fn[a]=function(b,d){var f=u.map(this,e,b);"Until"!==a.slice(-5)&&(d=b);d&&"string"===typeof d&&(f=u.filter(d,f));1<this.length&&(Rd[a]||(f=u.uniqueSort(f)),tc.test(a)&&(f=f.reverse()));return this.pushStack(f)}});var Kb=/\S+/g;u.Callbacks=function(a){a="string"===typeof a?f(a):u.extend({},a);var e,b,d,m,c=[],g=[],l=-1,n=function(){m=a.once;for(d=e=!0;g.length;l=-1)for(b=g.shift();++l<c.length;)!1===c[l].apply(b[0],
b[1])&&a.stopOnFalse&&(l=c.length,b=!1);a.memory||(b=!1);e=!1;m&&(c=b?[]:"")},x={add:function(){c&&(b&&!e&&(l=c.length-1,g.push(b)),function me(e){u.each(e,function(e,b){u.isFunction(b)?a.unique&&x.has(b)||c.push(b):b&&b.length&&"string"!==u.type(b)&&me(b)})}(arguments),b&&!e&&n());return this},remove:function(){u.each(arguments,function(a,e){for(var b;-1<(b=u.inArray(e,c,b));)c.splice(b,1),b<=l&&l--});return this},has:function(a){return a?-1<u.inArray(a,c):0<c.length},empty:function(){c&&(c=[]);
return this},disable:function(){m=g=[];c=b="";return this},disabled:function(){return!c},lock:function(){m=!0;b||x.disable();return this},locked:function(){return!!m},fireWith:function(a,b){m||(b=b||[],b=[a,b.slice?b.slice():b],g.push(b),e||n());return this},fire:function(){x.fireWith(this,arguments);return this},fired:function(){return!!d}};return x};u.extend({Deferred:function(a){var e=[["resolve","done",u.Callbacks("once memory"),"resolved"],["reject","fail",u.Callbacks("once memory"),"rejected"],
["notify","progress",u.Callbacks("memory")]],b="pending",d={state:function(){return b},always:function(){f.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return u.Deferred(function(b){u.each(e,function(e,m){var c=u.isFunction(a[e])&&a[e];f[m[1]](function(){var a=c&&c.apply(this,arguments);if(a&&u.isFunction(a.promise))a.promise().progress(b.notify).done(b.resolve).fail(b.reject);else b[m[0]+"With"](this===d?b.promise():this,c?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=
a?u.extend(a,d):d}},f={};d.pipe=d.then;u.each(e,function(a,m){var c=m[2],g=m[3];d[m[1]]=c.add;g&&c.add(function(){b=g},e[a^1][2].disable,e[2][2].lock);f[m[0]]=function(){f[m[0]+"With"](this===f?d:this,arguments);return this};f[m[0]+"With"]=c.fireWith});d.promise(f);a&&a.call(f,f);return f},when:function(a){var e=0,b=da.call(arguments),d=b.length,f=1!==d||a&&u.isFunction(a.promise)?d:0,m=1===f?a:u.Deferred(),c=function(a,e,b){return function(d){e[a]=this;b[a]=1<arguments.length?da.call(arguments):
d;b===l?m.notifyWith(e,b):--f||m.resolveWith(e,b)}},g;if(1<d){var l=Array(d);var n=Array(d);for(g=Array(d);e<d;e++)b[e]&&u.isFunction(b[e].promise)?b[e].promise().progress(c(e,n,l)).done(c(e,g,b)).fail(m.reject):--f}f||m.resolveWith(g,b);return m.promise()}});var Rc;u.fn.ready=function(a){u.ready.promise().done(a);return this};u.extend({isReady:!1,readyWait:1,holdReady:function(a){a?u.readyWait++:u.ready(!0)},ready:function(a){(!0===a?--u.readyWait:u.isReady)||(u.isReady=!0,!0!==a&&0<--u.readyWait||
(Rc.resolveWith(Q,[u]),u.fn.triggerHandler&&(u(Q).triggerHandler("ready"),u(Q).off("ready"))))}});u.ready.promise=function(a){if(!Rc)if(Rc=u.Deferred(),"complete"===Q.readyState||"loading"!==Q.readyState&&!Q.documentElement.doScroll)k.setTimeout(u.ready);else if(Q.addEventListener)Q.addEventListener("DOMContentLoaded",b),k.addEventListener("load",b);else{Q.attachEvent("onreadystatechange",b);k.attachEvent("onload",b);var e=!1;try{e=null==k.frameElement&&Q.documentElement}catch(je){}e&&e.doScroll&&
function yb(){if(!u.isReady){try{e.doScroll("left")}catch(Ic){return k.setTimeout(yb,50)}d();u.ready()}}()}return Rc.promise(a)};u.ready.promise();for(var ye in u(P))break;P.ownFirst="0"===ye;P.inlineBlockNeedsLayout=!1;u(function(){var a;if((a=Q.getElementsByTagName("body")[0])&&a.style){var e=Q.createElement("div");var b=Q.createElement("div");b.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";a.appendChild(b).appendChild(e);"undefined"!==typeof e.style.zoom&&(e.style.cssText=
"display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",P.inlineBlockNeedsLayout=e=3===e.offsetWidth)&&(a.style.zoom=1);a.removeChild(b)}});(function(){var a=Q.createElement("div");P.deleteExpando=!0;try{delete a.test}catch(Nd){P.deleteExpando=!1}})();var gc=function(a){var e=u.noData[(a.nodeName+" ").toLowerCase()],b=+a.nodeType||1;return 1!==b&&9!==b?!1:!e||!0!==e&&a.getAttribute("classid")===e},ke=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Jc=/([A-Z])/g;u.extend({cache:{},noData:{"applet ":!0,"embed ":!0,
"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){a=a.nodeType?u.cache[a[u.expando]]:a[u.expando];return!!a&&!n(a)},data:function(a,e,b){return p(a,e,b)},removeData:function(a,e){return r(a,e)},_data:function(a,e,b){return p(a,e,b,!0)},_removeData:function(a,e){return r(a,e,!0)}});u.fn.extend({data:function(a,e){var b,d=this[0],f=d&&d.attributes;if(void 0===a){if(this.length){var m=u.data(d);if(1===d.nodeType&&!u._data(d,"parsedAttrs")){for(b=f.length;b--;)if(f[b]){var c=
f[b].name;0===c.indexOf("data-")&&(c=u.camelCase(c.slice(5)),l(d,c,m[c]))}u._data(d,"parsedAttrs",!0)}}return m}return"object"===typeof a?this.each(function(){u.data(this,a)}):1<arguments.length?this.each(function(){u.data(this,a,e)}):d?l(d,a,u.data(d,a)):void 0},removeData:function(a){return this.each(function(){u.removeData(this,a)})}});u.extend({queue:function(a,e,b){if(a){e=(e||"fx")+"queue";var d=u._data(a,e);b&&(!d||u.isArray(b)?d=u._data(a,e,u.makeArray(b)):d.push(b));return d||[]}},dequeue:function(a,
e){e=e||"fx";var b=u.queue(a,e),d=b.length,f=b.shift(),m=u._queueHooks(a,e),c=function(){u.dequeue(a,e)};"inprogress"===f&&(f=b.shift(),d--);f&&("fx"===e&&b.unshift("inprogress"),delete m.stop,f.call(a,c,m));!d&&m&&m.empty.fire()},_queueHooks:function(a,e){var b=e+"queueHooks";return u._data(a,b)||u._data(a,b,{empty:u.Callbacks("once memory").add(function(){u._removeData(a,e+"queue");u._removeData(a,b)})})}});u.fn.extend({queue:function(a,e){var b=2;"string"!==typeof a&&(e=a,a="fx",b--);return arguments.length<
b?u.queue(this[0],a):void 0===e?this:this.each(function(){var b=u.queue(this,a,e);u._queueHooks(this,a);"fx"===a&&"inprogress"!==b[0]&&u.dequeue(this,a)})},dequeue:function(a){return this.each(function(){u.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,e){var b,d=1,f=u.Deferred(),m=this,c=this.length,g=function(){--d||f.resolveWith(m,[m])};"string"!==typeof a&&(e=a,a=void 0);for(a=a||"fx";c--;)(b=u._data(m[c],a+"queueHooks"))&&b.empty&&(d++,b.empty.add(g));
g();return f.promise(e)}});(function(){var a;P.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var e;if((e=Q.getElementsByTagName("body")[0])&&e.style){var b=Q.createElement("div");var d=Q.createElement("div");d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";e.appendChild(d).appendChild(b);"undefined"!==typeof b.style.zoom&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",
b.appendChild(Q.createElement("div")).style.width="5px",a=3!==b.offsetWidth);e.removeChild(d);return a}}})();var Sd=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,kb=new RegExp("^(?:([+-])=|)("+Sd+")([a-z%]*)$","i"),Wa=["Top","Right","Bottom","Left"],Vb=function(a,e){a=e||a;return"none"===u.css(a,"display")||!u.contains(a.ownerDocument,a)},J=function(a,e,b,d,f,m,c){var g=0,l=a.length,n=null==b;if("object"===u.type(b))for(g in f=!0,b)J(a,e,g,b[g],!0,m,c);else if(void 0!==d&&(f=!0,u.isFunction(d)||(c=
!0),n&&(c?(e.call(a,d),e=null):(n=e,e=function(a,e,b){return n.call(u(a),b)})),e))for(;g<l;g++)e(a[g],b,c?d:d.call(a[g],g,e(a[g],b)));return f?a:n?e.call(a):l?e(a[0],b):m},Va=/^(?:checkbox|radio)$/i,Kc=/<([\w:-]+)/,ld=/^$|\/(?:java|ecma)script/i,sc=/^\s+/;(function(){var a=Q.createElement("div"),e=Q.createDocumentFragment(),b=Q.createElement("input");a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";P.leadingWhitespace=3===a.firstChild.nodeType;P.tbody=!a.getElementsByTagName("tbody").length;
P.htmlSerialize=!!a.getElementsByTagName("link").length;P.html5Clone="<:nav></:nav>"!==Q.createElement("nav").cloneNode(!0).outerHTML;b.type="checkbox";b.checked=!0;e.appendChild(b);P.appendChecked=b.checked;a.innerHTML="<textarea>x</textarea>";P.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue;e.appendChild(a);b=Q.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked","checked");b.setAttribute("name","t");a.appendChild(b);P.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;
P.noCloneEvent=!!a.addEventListener;a[u.expando]=1;P.attributes=!a.getAttribute(u.expando)})();var bb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:P.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};
bb.optgroup=bb.option;bb.tbody=bb.tfoot=bb.colgroup=bb.caption=bb.thead;bb.th=bb.td;var K=/<|&#?\w+;/,oe=/<tbody/i;(function(){var a,e=Q.createElement("div");for(a in{submit:!0,change:!0,focusin:!0}){var b="on"+a;(P[a]=b in k)||(e.setAttribute(b,"t"),P[a]=!1===e.attributes[b].expando)}})();var Td=/^(?:input|select|textarea)$/i,cg=/^key/,hf=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,td=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)/;u.event={global:{},add:function(a,e,b,d,f){var m,
c,g,l,n;if(c=u._data(a)){if(b.handler){var x=b;b=x.handler;f=x.selector}b.guid||(b.guid=u.guid++);(m=c.events)||(m=c.events={});(g=c.handle)||(g=c.handle=function(a){return"undefined"===typeof u||a&&u.event.triggered===a.type?void 0:u.event.dispatch.apply(g.elem,arguments)},g.elem=a);e=(e||"").match(Kb)||[""];for(c=e.length;c--;){var k=Y.exec(e[c])||[];var p=l=k[1];var h=(k[2]||"").split(".").sort();p&&(k=u.event.special[p]||{},p=(f?k.delegateType:k.bindType)||p,k=u.event.special[p]||{},l=u.extend({type:p,
origType:l,data:d,handler:b,guid:b.guid,selector:f,needsContext:f&&u.expr.match.needsContext.test(f),namespace:h.join(".")},x),(n=m[p])||(n=m[p]=[],n.delegateCount=0,k.setup&&!1!==k.setup.call(a,d,h,g)||(a.addEventListener?a.addEventListener(p,g,!1):a.attachEvent&&a.attachEvent("on"+p,g))),k.add&&(k.add.call(a,l),l.handler.guid||(l.handler.guid=b.guid)),f?n.splice(n.delegateCount++,0,l):n.push(l),u.event.global[p]=!0)}a=null}},remove:function(a,e,b,d,f){var m,c,g,l,n,x=u.hasData(a)&&u._data(a);if(x&&
(l=x.events)){e=(e||"").match(Kb)||[""];for(g=e.length;g--;){var k=Y.exec(e[g])||[];var p=n=k[1];var h=(k[2]||"").split(".").sort();if(p){var q=u.event.special[p]||{};p=(d?q.delegateType:q.bindType)||p;var r=l[p]||[];k=k[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)");for(c=m=r.length;m--;){var w=r[m];!f&&n!==w.origType||b&&b.guid!==w.guid||k&&!k.test(w.namespace)||d&&d!==w.selector&&("**"!==d||!w.selector)||(r.splice(m,1),w.selector&&r.delegateCount--,q.remove&&q.remove.call(a,w))}c&&
!r.length&&(q.teardown&&!1!==q.teardown.call(a,h,x.handle)||u.removeEvent(a,p,x.handle),delete l[p])}else for(p in l)u.event.remove(a,p+e[g],b,d,!0)}u.isEmptyObject(l)&&(delete x.handle,u._removeData(a,"events"))}},trigger:function(a,e,b,d){var f,m,c=[b||Q],g=Ya.call(a,"type")?a.type:a;var l=Ya.call(a,"namespace")?a.namespace.split("."):[];var n=f=b=b||Q;if(3!==b.nodeType&&8!==b.nodeType&&!td.test(g+u.event.triggered)){-1<g.indexOf(".")&&(l=g.split("."),g=l.shift(),l.sort());var x=0>g.indexOf(":")&&
"on"+g;a=a[u.expando]?a:new u.Event(g,"object"===typeof a&&a);a.isTrigger=d?2:3;a.namespace=l.join(".");a.rnamespace=a.namespace?new RegExp("(^|\\.)"+l.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;a.result=void 0;a.target||(a.target=b);e=null==e?[a]:u.makeArray(e,[a]);l=u.event.special[g]||{};if(d||!l.trigger||!1!==l.trigger.apply(b,e)){if(!d&&!l.noBubble&&!u.isWindow(b)){var p=l.delegateType||g;td.test(p+g)||(n=n.parentNode);for(;n;n=n.parentNode)c.push(n),f=n;f===(b.ownerDocument||Q)&&c.push(f.defaultView||
f.parentWindow||k)}for(m=0;(n=c[m++])&&!a.isPropagationStopped();)a.type=1<m?p:l.bindType||g,(f=(u._data(n,"events")||{})[a.type]&&u._data(n,"handle"))&&f.apply(n,e),(f=x&&n[x])&&f.apply&&gc(n)&&(a.result=f.apply(n,e),!1===a.result&&a.preventDefault());a.type=g;if(!(d||a.isDefaultPrevented()||l._default&&!1!==l._default.apply(c.pop(),e))&&gc(b)&&x&&b[g]&&!u.isWindow(b)){(f=b[x])&&(b[x]=null);u.event.triggered=g;try{b[g]()}catch(ne){}u.event.triggered=void 0;f&&(b[x]=f)}return a.result}}},dispatch:function(a){a=
u.event.fix(a);var e,b,d,f=da.call(arguments);var m=(u._data(this,"events")||{})[a.type]||[];var c=u.event.special[a.type]||{};f[0]=a;a.delegateTarget=this;if(!c.preDispatch||!1!==c.preDispatch.call(this,a)){var g=u.event.handlers.call(this,a,m);for(m=0;(d=g[m++])&&!a.isPropagationStopped();)for(a.currentTarget=d.elem,e=0;(b=d.handlers[e++])&&!a.isImmediatePropagationStopped();)if(!a.rnamespace||a.rnamespace.test(b.namespace))a.handleObj=b,a.data=b.data,b=((u.event.special[b.origType]||{}).handle||
b.handler).apply(d.elem,f),void 0!==b&&!1===(a.result=b)&&(a.preventDefault(),a.stopPropagation());c.postDispatch&&c.postDispatch.call(this,a);return a.result}},handlers:function(a,e){var b,d=[],f=e.delegateCount,m=a.target;if(f&&m.nodeType&&("click"!==a.type||isNaN(a.button)||1>a.button))for(;m!=this;m=m.parentNode||this)if(1===m.nodeType&&(!0!==m.disabled||"click"!==a.type)){var c=[];for(b=0;b<f;b++){var g=e[b];var l=g.selector+" ";void 0===c[l]&&(c[l]=g.needsContext?-1<u(l,this).index(m):u.find(l,
this,null,[m]).length);c[l]&&c.push(g)}c.length&&d.push({elem:m,handlers:c})}f<e.length&&d.push({elem:this,handlers:e.slice(f)});return d},fix:function(a){if(a[u.expando])return a;var e=a.type;var b=a,d=this.fixHooks[e];d||(this.fixHooks[e]=d=hf.test(e)?this.mouseHooks:cg.test(e)?this.keyHooks:{});var f=d.props?this.props.concat(d.props):this.props;a=new u.Event(b);for(e=f.length;e--;){var m=f[e];a[m]=b[m]}a.target||(a.target=b.srcElement||Q);3===a.target.nodeType&&(a.target=a.target.parentNode);
a.metaKey=!!a.metaKey;return d.filter?d.filter(a,b):a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,e){null==a.which&&(a.which=null!=e.charCode?e.charCode:e.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,
e){var b=e.button,d=e.fromElement;if(null==a.pageX&&null!=e.clientX){var f=a.target.ownerDocument||Q;var m=f.documentElement;f=f.body;a.pageX=e.clientX+(m&&m.scrollLeft||f&&f.scrollLeft||0)-(m&&m.clientLeft||f&&f.clientLeft||0);a.pageY=e.clientY+(m&&m.scrollTop||f&&f.scrollTop||0)-(m&&m.clientTop||f&&f.clientTop||0)}!a.relatedTarget&&d&&(a.relatedTarget=d===a.target?e.toElement:d);a.which||void 0===b||(a.which=b&1?1:b&2?3:b&4?2:0);return a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==
G()&&this.focus)try{return this.focus(),!1}catch(ya){}},delegateType:"focusin"},blur:{trigger:function(){if(this===G()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(u.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(a){return u.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,e,b){a=u.extend(new u.Event,
b,{type:a,isSimulated:!0});u.event.trigger(a,null,e);a.isDefaultPrevented()&&b.preventDefault()}};u.removeEvent=Q.removeEventListener?function(a,e,b){a.removeEventListener&&a.removeEventListener(e,b)}:function(a,e,b){e="on"+e;a.detachEvent&&("undefined"===typeof a[e]&&(a[e]=null),a.detachEvent(e,b))};u.Event=function(a,e){if(!(this instanceof u.Event))return new u.Event(a,e);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===
a.returnValue?A:C):this.type=a;e&&u.extend(this,e);this.timeStamp=a&&a.timeStamp||u.now();this[u.expando]=!0};u.Event.prototype={constructor:u.Event,isDefaultPrevented:C,isPropagationStopped:C,isImmediatePropagationStopped:C,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=A;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=A;a&&!this.isSimulated&&(a.stopPropagation&&a.stopPropagation(),
a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=A;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};u.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,e){u.event.special[a]={delegateType:e,bindType:e,handle:function(a){var b=a.relatedTarget,d=a.handleObj;if(!b||b!==this&&!u.contains(this,b)){a.type=d.origType;var f=d.handler.apply(this,
arguments);a.type=e}return f}}});P.submit||(u.event.special.submit={setup:function(){if(u.nodeName(this,"form"))return!1;u.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=u.nodeName(a,"input")||u.nodeName(a,"button")?u.prop(a,"form"):void 0)&&!u._data(a,"submit")&&(u.event.add(a,"submit._submit",function(a){a._submitBubble=!0}),u._data(a,"submit",!0))})},postDispatch:function(a){a._submitBubble&&(delete a._submitBubble,this.parentNode&&!a.isTrigger&&u.event.simulate("submit",
this.parentNode,a))},teardown:function(){if(u.nodeName(this,"form"))return!1;u.event.remove(this,"._submit")}});P.change||(u.event.special.change={setup:function(){if(Td.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)u.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._justChanged=!0)}),u.event.add(this,"click._change",function(a){this._justChanged&&!a.isTrigger&&(this._justChanged=!1);u.event.simulate("change",this,a)});return!1}u.event.add(this,
"beforeactivate._change",function(a){a=a.target;Td.test(a.nodeName)&&!u._data(a,"change")&&(u.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||u.event.simulate("change",this.parentNode,a)}),u._data(a,"change",!0))})},handle:function(a){var e=a.target;if(this!==e||a.isSimulated||a.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){u.event.remove(this,"._change");return!Td.test(this.nodeName)}});
P.focusin||u.each({focus:"focusin",blur:"focusout"},function(a,e){var b=function(a){u.event.simulate(e,a.target,u.event.fix(a))};u.event.special[e]={setup:function(){var d=this.ownerDocument||this,f=u._data(d,e);f||d.addEventListener(a,b,!0);u._data(d,e,(f||0)+1)},teardown:function(){var d=this.ownerDocument||this,f=u._data(d,e)-1;f?u._data(d,e,f):(d.removeEventListener(a,b,!0),u._removeData(d,e))}}});u.fn.extend({on:function(a,e,b,d){return E(this,a,e,b,d)},one:function(a,e,b,d){return E(this,a,
e,b,d,1)},off:function(a,e,b){if(a&&a.preventDefault&&a.handleObj){var d=a.handleObj;u(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler);return this}if("object"===typeof a){for(d in a)this.off(d,e,a[d]);return this}if(!1===e||"function"===typeof e)b=e,e=void 0;!1===b&&(b=C);return this.each(function(){u.event.remove(this,a,b,e)})},trigger:function(a,e){return this.each(function(){u.event.trigger(a,e,this)})},triggerHandler:function(a,e){var b=this[0];if(b)return u.event.trigger(a,
e,b,!0)}});var gb=/ jQuery\d+="(?:null|\d+)"/g,ud=/<(?:abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video)[\s/>]/i,Eb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Ud=/<script|<style|<link/i,qa=/checked\s*(?:[^=]|=\s*.checked.)/i,pe=/^true\/(.*)/,$a=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,T=z(Q).appendChild(Q.createElement("div"));u.extend({htmlPrefilter:function(a){return a.replace(Eb,
"<$1></$2>")},clone:function(a,b,d){var f,c,g=u.contains(a.ownerDocument,a);if(P.html5Clone||u.isXMLDoc(a)||!ud.test("<"+a.nodeName+">"))var l=a.cloneNode(!0);else T.innerHTML=a.outerHTML,T.removeChild(l=T.firstChild);if(!(P.noCloneEvent&&P.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||u.isXMLDoc(a))){var n=v(l);var x=v(a);for(c=0;null!=(f=x[c]);++c)if(n[c]){var k=void 0,p=f,h=n[c];if(1===h.nodeType){var q=h.nodeName.toLowerCase();if(!P.noCloneEvent&&h[u.expando]){f=u._data(h);for(k in f.events)u.removeEvent(h,
k,f.handle);h.removeAttribute(u.expando)}if("script"===q&&h.text!==p.text)I(h).text=p.text,e(h);else if("object"===q)h.parentNode&&(h.outerHTML=p.outerHTML),P.html5Clone&&p.innerHTML&&!u.trim(h.innerHTML)&&(h.innerHTML=p.innerHTML);else if("input"===q&&Va.test(p.type))h.defaultChecked=h.checked=p.checked,h.value!==p.value&&(h.value=p.value);else if("option"===q)h.defaultSelected=h.selected=p.defaultSelected;else if("input"===q||"textarea"===q)h.defaultValue=p.defaultValue}}}if(b)if(d)for(x=x||v(a),
n=n||v(l),c=0;null!=(f=x[c]);c++)m(f,n[c]);else m(a,l);n=v(l,"script");0<n.length&&t(n,!g&&v(a,"script"));return l},cleanData:function(a,e){for(var b,d,f,m,c=0,g=u.expando,l=u.cache,n=P.attributes,x=u.event.special;null!=(b=a[c]);c++)if(e||gc(b))if(m=(f=b[g])&&l[f]){if(m.events)for(d in m.events)x[d]?u.event.remove(b,d):u.removeEvent(b,d,m.handle);l[f]&&(delete l[f],n||"undefined"===typeof b.removeAttribute?b[g]=void 0:b.removeAttribute(g),na.push(f))}}});u.fn.extend({domManip:x,detach:function(a){return D(this,
a,!0)},remove:function(a){return D(this,a)},text:function(a){return J(this,function(a){return void 0===a?u.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Q).createTextNode(a))},null,a,arguments.length)},append:function(){return x(this,arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||F(this,a).appendChild(a)})},prepend:function(){return x(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=F(this,a);e.insertBefore(a,
e.firstChild)}})},before:function(){return x(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return x(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,e=0;null!=(a=this[e]);e++){for(1===a.nodeType&&u.cleanData(v(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&u.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,e){a=null==a?!1:a;e=null==e?
a:e;return this.map(function(){return u.clone(this,a,e)})},html:function(a){return J(this,function(a){var e=this[0]||{},b=0,d=this.length;if(void 0===a)return 1===e.nodeType?e.innerHTML.replace(gb,""):void 0;if(!("string"!==typeof a||Ud.test(a)||!P.htmlSerialize&&ud.test(a)||!P.leadingWhitespace&&sc.test(a)||bb[(Kc.exec(a)||["",""])[1].toLowerCase()])){a=u.htmlPrefilter(a);try{for(;b<d;b++)e=this[b]||{},1===e.nodeType&&(u.cleanData(v(e,!1)),e.innerHTML=a);e=0}catch(Xe){}}e&&this.empty().append(a)},
null,a,arguments.length)},replaceWith:function(){var a=[];return x(this,arguments,function(e){var b=this.parentNode;0>u.inArray(this,a)&&(u.cleanData(v(this)),b&&b.replaceChild(e,this))},a)}});u.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,e){u.fn[a]=function(a){for(var b=0,d=[],f=u(a),m=f.length-1;b<=m;b++)a=b===m?this:this.clone(!0),u(f[b])[e](a),Ea.apply(d,a.get());return this.pushStack(d)}});var W,V={HTML:"block",BODY:"block"},
Sc=/^margin/,pd=new RegExp("^("+Sd+")(?!px)[a-z%]+$","i"),Vd=function(a,e,b,d){var f,m={};for(f in e)m[f]=a.style[f],a.style[f]=e[f];b=b.apply(a,d||[]);for(f in e)a.style[f]=m[f];return b},jc=Q.documentElement;(function(){function a(){var a=Q.documentElement;a.appendChild(g);l.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";e=d=c=!1;b=m=!0;if(k.getComputedStyle){var n=k.getComputedStyle(l);e="1%"!==
(n||{}).top;c="2px"===(n||{}).marginLeft;d="4px"===(n||{width:"4px"}).width;l.style.marginRight="50%";b="4px"===(n||{marginRight:"4px"}).marginRight;n=l.appendChild(Q.createElement("div"));n.style.cssText=l.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";n.style.marginRight=n.style.width="0";l.style.width="1px";m=!parseFloat((k.getComputedStyle(n)||{}).marginRight);l.removeChild(n)}l.style.display="none";if(f=
0===l.getClientRects().length)if(l.style.display="",l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",l.childNodes[0].style.borderCollapse="separate",n=l.getElementsByTagName("td"),n[0].style.cssText="margin:0;border:0;padding:0;display:none",f=0===n[0].offsetHeight)n[0].style.display="",n[1].style.display="none",f=0===n[0].offsetHeight;a.removeChild(g)}var e,b,d,f,m,c,g=Q.createElement("div"),l=Q.createElement("div");l.style&&(l.style.cssText="float:left;opacity:.5",P.opacity="0.5"===l.style.opacity,
P.cssFloat=!!l.style.cssFloat,l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",P.clearCloneStyle="content-box"===l.style.backgroundClip,g=Q.createElement("div"),g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",l.innerHTML="",g.appendChild(l),P.boxSizing=""===l.style.boxSizing||""===l.style.MozBoxSizing||""===l.style.WebkitBoxSizing,u.extend(P,{reliableHiddenOffsets:function(){null==e&&a();return f},boxSizingReliable:function(){null==
e&&a();return d},pixelMarginRight:function(){null==e&&a();return b},pixelPosition:function(){null==e&&a();return e},reliableMarginRight:function(){null==e&&a();return m},reliableMarginLeft:function(){null==e&&a();return c}}))})();var Fb=/^(top|right|bottom|left)$/;if(k.getComputedStyle){var rb=function(a){var e=a.ownerDocument.defaultView;e&&e.opener||(e=k);return e.getComputedStyle(a)};var Lb=function(a,e,b){var d=a.style;var f=(b=b||rb(a))?b.getPropertyValue(e)||b[e]:void 0;""!==f&&void 0!==f||
u.contains(a.ownerDocument,a)||(f=u.style(a,e));if(b&&!P.pixelMarginRight()&&pd.test(f)&&Sc.test(e)){a=d.width;e=d.minWidth;var m=d.maxWidth;d.minWidth=d.maxWidth=d.width=f;f=b.width;d.width=a;d.minWidth=e;d.maxWidth=m}return void 0===f?f:f+""}}else jc.currentStyle&&(rb=function(a){return a.currentStyle},Lb=function(a,e,b){var d,f,m=a.style;var c=(b=b||rb(a))?b[e]:void 0;null==c&&m&&m[e]&&(c=m[e]);if(pd.test(c)&&!Fb.test(e)){b=m.left;if(f=(d=a.runtimeStyle)&&d.left)d.left=a.currentStyle.left;m.left=
"fontSize"===e?"1em":c;c=m.pixelLeft+"px";m.left=b;f&&(d.left=f)}return void 0===c?c:c+""||"auto"});var tb=/alpha\([^)]*\)/i,kc=/opacity\s*=\s*([^)]*)/i,Nb=/^(none|table(?!-c[ea]).+)/,od=new RegExp("^("+Sd+")(.*)$","i"),ze={position:"absolute",visibility:"hidden",display:"block"},Tc={letterSpacing:"0",fontWeight:"400"},nd=["Webkit","O","Moz","ms"],md=Q.createElement("div").style;u.extend({cssHooks:{opacity:{get:function(a,e){if(e)return a=Lb(a,"opacity"),""===a?"1":a}}},cssNumber:{animationIterationCount:!0,
columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":P.cssFloat?"cssFloat":"styleFloat"},style:function(a,e,b,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,m=u.camelCase(e),c=a.style;e=u.cssProps[m]||(u.cssProps[m]=aa(m)||m);var g=u.cssHooks[e]||u.cssHooks[m];if(void 0!==b){var l=typeof b;"string"===l&&(f=kb.exec(b))&&f[1]&&(b=w(a,e,f),l="number");if(null!=b&&b===b&&("number"===l&&
(b+=f&&f[3]||(u.cssNumber[m]?"":"px")),P.clearCloneStyle||""!==b||0!==e.indexOf("background")||(c[e]="inherit"),!(g&&"set"in g)||void 0!==(b=g.set(a,b,d))))try{c[e]=b}catch($g){}}else return g&&"get"in g&&void 0!==(f=g.get(a,!1,d))?f:c[e]}},css:function(a,e,b,d){var f;var m=u.camelCase(e);e=u.cssProps[m]||(u.cssProps[m]=aa(m)||m);(m=u.cssHooks[e]||u.cssHooks[m])&&"get"in m&&(f=m.get(a,!0,b));void 0===f&&(f=Lb(a,e,d));"normal"===f&&e in Tc&&(f=Tc[e]);return""===b||b?(a=parseFloat(f),!0===b||isFinite(a)?
a||0:f):f}});u.each(["height","width"],function(a,e){u.cssHooks[e]={get:function(a,b,d){if(b)return Nb.test(u.css(a,"display"))&&0===a.offsetWidth?Vd(a,ze,function(){return X(a,e,d)}):X(a,e,d)},set:function(a,b,d){var f=d&&rb(a);return fa(a,b,d?R(a,e,d,P.boxSizing&&"border-box"===u.css(a,"boxSizing",!1,f),f):0)}}});P.opacity||(u.cssHooks.opacity={get:function(a,e){return kc.test((e&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(a,e){var b=
a.style;a=a.currentStyle;var d=u.isNumeric(e)?"alpha(opacity="+100*e+")":"",f=a&&a.filter||b.filter||"";b.zoom=1;if((1<=e||""===e)&&""===u.trim(f.replace(tb,""))&&b.removeAttribute&&(b.removeAttribute("filter"),""===e||a&&!a.filter))return;b.filter=tb.test(f)?f.replace(tb,d):f+" "+d}});u.cssHooks.marginRight=ka(P.reliableMarginRight,function(a,e){if(e)return Vd(a,{display:"inline-block"},Lb,[a,"marginRight"])});u.cssHooks.marginLeft=ka(P.reliableMarginLeft,function(a,e){if(e)return(parseFloat(Lb(a,
"marginLeft"))||(u.contains(a.ownerDocument,a)?a.getBoundingClientRect().left-Vd(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}):0))+"px"});u.each({margin:"",padding:"",border:"Width"},function(a,e){u.cssHooks[a+e]={expand:function(b){var d=0,f={};for(b="string"===typeof b?b.split(" "):[b];4>d;d++)f[a+Wa[d]+e]=b[d]||b[d-2]||b[0];return f}};Sc.test(a)||(u.cssHooks[a+e].set=fa)});u.fn.extend({css:function(a,e){return J(this,function(a,e,b){var d,f={},m=0;if(u.isArray(e)){b=rb(a);
for(d=e.length;m<d;m++)f[e[m]]=u.css(a,e[m],!1,b);return f}return void 0!==b?u.style(a,e,b):u.css(a,e)},a,e,1<arguments.length)},show:function(){return Aa(this,!0)},hide:function(){return Aa(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){Vb(this)?u(this).show():u(this).hide()})}});u.Tween=M;M.prototype={constructor:M,init:function(a,e,b,d,f,m){this.elem=a;this.prop=b;this.easing=f||u.easing._default;this.options=e;this.start=this.now=this.cur();
this.end=d;this.unit=m||(u.cssNumber[b]?"":"px")},cur:function(){var a=M.propHooks[this.prop];return a&&a.get?a.get(this):M.propHooks._default.get(this)},run:function(a){var e,b=M.propHooks[this.prop];this.pos=this.options.duration?e=u.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):e=a;this.now=(this.end-this.start)*e+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);b&&b.set?b.set(this):M.propHooks._default.set(this);return this}};M.prototype.init.prototype=
M.prototype;M.propHooks={_default:{get:function(a){return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(a=u.css(a.elem,a.prop,""))&&"auto"!==a?a:0},set:function(a){if(u.fx.step[a.prop])u.fx.step[a.prop](a);else 1!==a.elem.nodeType||null==a.elem.style[u.cssProps[a.prop]]&&!u.cssHooks[a.prop]?a.elem[a.prop]=a.now:u.style(a.elem,a.prop,a.now+a.unit)}}};M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=
a.now)}};u.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"};u.fx=M.prototype.init;u.fx.step={};var Lc,Uc,uc=/^(?:toggle|show|hide)$/,ma=/queueHooks$/;u.Animation=u.extend(oa,{tweeners:{"*":[function(a,e){var b=this.createTween(a,e);w(b.elem,a,kb.exec(e),b);return b}]},tweener:function(a,e){u.isFunction(a)?(e=a,a=["*"]):a=a.match(Kb);for(var b,d=0,f=a.length;d<f;d++)b=a[d],oa.tweeners[b]=oa.tweeners[b]||[],oa.tweeners[b].unshift(e)},prefilters:[function(a,
e,b){var d,f=this,m={},c=a.style,g=a.nodeType&&Vb(a),l=u._data(a,"fxshow");if(!b.queue){var n=u._queueHooks(a,"fx");if(null==n.unqueued){n.unqueued=0;var x=n.empty.fire;n.empty.fire=function(){n.unqueued||x()}}n.unqueued++;f.always(function(){f.always(function(){n.unqueued--;u.queue(a,"fx").length||n.empty.fire()})})}if(1===a.nodeType&&("height"in e||"width"in e)){b.overflow=[c.overflow,c.overflowX,c.overflowY];var k=u.css(a,"display");var p="none"===k?u._data(a,"olddisplay")||N(a.nodeName):k;"inline"===
p&&"none"===u.css(a,"float")&&(P.inlineBlockNeedsLayout&&"inline"!==N(a.nodeName)?c.zoom=1:c.display="inline-block")}b.overflow&&(c.overflow="hidden",P.shrinkWrapBlocks()||f.always(function(){c.overflow=b.overflow[0];c.overflowX=b.overflow[1];c.overflowY=b.overflow[2]}));for(d in e)if(p=e[d],uc.exec(p)){delete e[d];var h=h||"toggle"===p;if(p===(g?"hide":"show"))if("show"===p&&l&&void 0!==l[d])g=!0;else continue;m[d]=l&&l[d]||u.style(a,d)}else k=void 0;if(u.isEmptyObject(m))"inline"===("none"===k?
N(a.nodeName):k)&&(c.display=k);else for(d in l?"hidden"in l&&(g=l.hidden):l=u._data(a,"fxshow",{}),h&&(l.hidden=!g),g?u(a).show():f.done(function(){u(a).hide()}),f.done(function(){var e;u._removeData(a,"fxshow");for(e in m)u.style(a,e,m[e])}),m)e=ca(g?l[d]:0,d,f),d in l||(l[d]=e.start,g&&(e.end=e.start,e.start="width"===d||"height"===d?1:0))}],prefilter:function(a,e){e?oa.prefilters.unshift(a):oa.prefilters.push(a)}});u.speed=function(a,e,b){var d=a&&"object"===typeof a?u.extend({},a):{complete:b||
!b&&e||u.isFunction(a)&&a,duration:a,easing:b&&e||e&&!u.isFunction(e)&&e};d.duration=u.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in u.fx.speeds?u.fx.speeds[d.duration]:u.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){u.isFunction(d.old)&&d.old.call(this);d.queue&&u.dequeue(this,d.queue)};return d};u.fn.extend({fadeTo:function(a,e,b,d){return this.filter(Vb).css("opacity",0).show().end().animate({opacity:e},a,b,d)},animate:function(a,
e,b,d){var f=u.isEmptyObject(a),m=u.speed(e,b,d);e=function(){var e=oa(this,u.extend({},a),m);(f||u._data(this,"finish"))&&e.stop(!0)};e.finish=e;return f||!1===m.queue?this.each(e):this.queue(m.queue,e)},stop:function(a,e,b){var d=function(a){var e=a.stop;delete a.stop;e(b)};"string"!==typeof a&&(b=e,e=a,a=void 0);e&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var e=!0,f=null!=a&&a+"queueHooks",m=u.timers,c=u._data(this);if(f)c[f]&&c[f].stop&&d(c[f]);else for(f in c)c[f]&&c[f].stop&&
ma.test(f)&&d(c[f]);for(f=m.length;f--;)m[f].elem!==this||null!=a&&m[f].queue!==a||(m[f].anim.stop(b),e=!1,m.splice(f,1));!e&&b||u.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var e=u._data(this),b=e[a+"queue"];var d=e[a+"queueHooks"];var f=u.timers,m=b?b.length:0;e.finish=!0;u.queue(this,a,[]);d&&d.stop&&d.stop.call(this,!0);for(d=f.length;d--;)f[d].elem===this&&f[d].queue===a&&(f[d].anim.stop(!0),f.splice(d,1));for(d=0;d<m;d++)b[d]&&b[d].finish&&b[d].finish.call(this);
delete e.finish})}});u.each(["toggle","show","hide"],function(a,e){var b=u.fn[e];u.fn[e]=function(a,d,f){return null==a||"boolean"===typeof a?b.apply(this,arguments):this.animate(ja(e,!0),a,d,f)}});u.each({slideDown:ja("show"),slideUp:ja("hide"),slideToggle:ja("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,e){u.fn[a]=function(a,b,d){return this.animate(e,a,b,d)}});u.timers=[];u.fx.tick=function(){var a=u.timers,e=0;for(Lc=u.now();e<a.length;e++){var b=
a[e];b()||a[e]!==b||a.splice(e--,1)}a.length||u.fx.stop();Lc=void 0};u.fx.timer=function(a){u.timers.push(a);a()?u.fx.start():u.timers.pop()};u.fx.interval=13;u.fx.start=function(){Uc||(Uc=k.setInterval(u.fx.tick,u.fx.interval))};u.fx.stop=function(){k.clearInterval(Uc);Uc=null};u.fx.speeds={slow:600,fast:200,_default:400};u.fn.delay=function(a,e){a=u.fx?u.fx.speeds[a]||a:a;return this.queue(e||"fx",function(e,b){var d=k.setTimeout(e,a);b.stop=function(){k.clearTimeout(d)}})};(function(){var a=Q.createElement("input");
Q.createElement("div");var e=Q.createElement("select"),b=e.appendChild(Q.createElement("option"));var d=Q.createElement("div");d.setAttribute("className","t");d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";d.getElementsByTagName("a");a.setAttribute("type","checkbox");d.appendChild(a);var f=d.getElementsByTagName("a")[0];f.style.cssText="top:1px";P.getSetAttribute="t"!==d.className;P.style=/top/.test(f.getAttribute("style"));P.hrefNormalized="/a"===f.getAttribute("href");
P.checkOn=!!a.value;P.optSelected=b.selected;P.enctype=!!Q.createElement("form").enctype;e.disabled=!0;P.optDisabled=!b.disabled;a=Q.createElement("input");a.setAttribute("value","");P.input=""===a.getAttribute("value");a.value="t";a.setAttribute("type","radio");P.radioValue="t"===a.value})();var vc=/\r/g,Wd=/[\x20\t\r\n\f]+/g;u.fn.extend({val:function(a){var e,b,d=this[0];if(arguments.length){var f=u.isFunction(a);return this.each(function(b){1===this.nodeType&&(b=f?a.call(this,b,u(this).val()):
a,null==b?b="":"number"===typeof b?b+="":u.isArray(b)&&(b=u.map(b,function(a){return null==a?"":a+""})),e=u.valHooks[this.type]||u.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,b,"value")||(this.value=b))})}if(d){if((e=u.valHooks[d.type]||u.valHooks[d.nodeName.toLowerCase()])&&"get"in e&&void 0!==(b=e.get(d,"value")))return b;b=d.value;return"string"===typeof b?b.replace(vc,""):null==b?"":b}}});u.extend({valHooks:{option:{get:function(a){var e=u.find.attr(a,"value");return null!=
e?e:u.trim(u.text(a)).replace(Wd," ")}},select:{get:function(a){for(var e,b=a.options,d=a.selectedIndex,f=(a="select-one"===a.type||0>d)?null:[],m=a?d+1:b.length,c=0>d?m:a?d:0;c<m;c++)if(e=b[c],!(!e.selected&&c!==d||(P.optDisabled?e.disabled:null!==e.getAttribute("disabled"))||e.parentNode.disabled&&u.nodeName(e.parentNode,"optgroup"))){e=u(e).val();if(a)return e;f.push(e)}return f},set:function(a,e){for(var b,d=a.options,f=u.makeArray(e),m=d.length;m--;)if(e=d[m],-1<u.inArray(u.valHooks.option.get(e),
f))try{e.selected=b=!0}catch(rc){e.scrollHeight}else e.selected=!1;b||(a.selectedIndex=-1);return d}}}});u.each(["radio","checkbox"],function(){u.valHooks[this]={set:function(a,e){if(u.isArray(e))return a.checked=-1<u.inArray(u(a).val(),e)}};P.checkOn||(u.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var Fa=u.expr.attrHandle,Vc=/^(?:checked|selected)$/i,Yb=P.getSetAttribute,Wc=P.input;u.fn.extend({attr:function(a,e){return J(this,u.attr,a,e,1<arguments.length)},
removeAttr:function(a){return this.each(function(){u.removeAttr(this,a)})}});u.extend({attr:function(a,e,b){var d,f=a.nodeType;if(3!==f&&8!==f&&2!==f){if("undefined"===typeof a.getAttribute)return u.prop(a,e,b);if(1!==f||!u.isXMLDoc(a)){e=e.toLowerCase();var m=u.attrHooks[e]||(u.expr.match.bool.test(e)?jf:wc)}if(void 0!==b){if(null===b){u.removeAttr(a,e);return}if(m&&"set"in m&&void 0!==(d=m.set(a,b,e)))return d;a.setAttribute(e,b+"");return b}if(m&&"get"in m&&null!==(d=m.get(a,e)))return d;d=u.find.attr(a,
e);return null==d?void 0:d}},attrHooks:{type:{set:function(a,e){if(!P.radioValue&&"radio"===e&&u.nodeName(a,"input")){var b=a.value;a.setAttribute("type",e);b&&(a.value=b);return e}}}},removeAttr:function(a,e){var b=0,d=e&&e.match(Kb);if(d&&1===a.nodeType)for(;e=d[b++];){var f=u.propFix[e]||e;u.expr.match.bool.test(e)?Wc&&Yb||!Vc.test(e)?a[f]=!1:a[u.camelCase("default-"+e)]=a[f]=!1:u.attr(a,e,"");a.removeAttribute(Yb?e:f)}}});var jf={set:function(a,e,b){!1===e?u.removeAttr(a,b):Wc&&Yb||!Vc.test(b)?
a.setAttribute(!Yb&&u.propFix[b]||b,b):a[u.camelCase("default-"+b)]=a[b]=!0;return b}};u.each(u.expr.match.bool.source.match(/\w+/g),function(a,e){var b=Fa[e]||u.find.attr;Wc&&Yb||!Vc.test(e)?Fa[e]=function(a,e,d){if(!d){var f=Fa[e];Fa[e]=m;var m=null!=b(a,e,d)?e.toLowerCase():null;Fa[e]=f}return m}:Fa[e]=function(a,e,b){if(!b)return a[u.camelCase("default-"+e)]?e.toLowerCase():null}});Wc&&Yb||(u.attrHooks.value={set:function(a,e,b){if(u.nodeName(a,"input"))a.defaultValue=e;else return wc&&wc.set(a,
e,b)}});if(!Yb){var wc={set:function(a,e,b){var d=a.getAttributeNode(b);d||a.setAttributeNode(d=a.ownerDocument.createAttribute(b));d.value=e+="";if("value"===b||e===a.getAttribute(b))return e}};Fa.id=Fa.name=Fa.coords=function(a,e,b){var d;if(!b)return(d=a.getAttributeNode(e))&&""!==d.value?d.value:null};u.valHooks.button={get:function(a,e){if((a=a.getAttributeNode(e))&&a.specified)return a.value},set:wc.set};u.attrHooks.contenteditable={set:function(a,e,b){wc.set(a,""===e?!1:e,b)}};u.each(["width",
"height"],function(a,e){u.attrHooks[e]={set:function(a,b){if(""===b)return a.setAttribute(e,"auto"),b}}})}P.style||(u.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,e){return a.style.cssText=e+""}});var Ae=/^(?:input|select|textarea|button|object)$/i,xc=/^(?:a|area)$/i;u.fn.extend({prop:function(a,e){return J(this,u.prop,a,e,1<arguments.length)},removeProp:function(a){a=u.propFix[a]||a;return this.each(function(){try{this[a]=void 0,delete this[a]}catch(Nd){}})}});
u.extend({prop:function(a,e,b){var d,f=a.nodeType;if(3!==f&&8!==f&&2!==f){if(1!==f||!u.isXMLDoc(a)){e=u.propFix[e]||e;var m=u.propHooks[e]}return void 0!==b?m&&"set"in m&&void 0!==(d=m.set(a,b,e))?d:a[e]=b:m&&"get"in m&&null!==(d=m.get(a,e))?d:a[e]}},propHooks:{tabIndex:{get:function(a){var e=u.find.attr(a,"tabindex");return e?parseInt(e,10):Ae.test(a.nodeName)||xc.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});P.hrefNormalized||u.each(["href","src"],function(a,e){u.propHooks[e]=
{get:function(a){return a.getAttribute(e,4)}}});P.optSelected||(u.propHooks.selected={get:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex;return null},set:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex}});u.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){u.propFix[this.toLowerCase()]=this});P.enctype||(u.propFix.enctype="encoding");var Xd=
/[\t\r\n\f]/g;u.fn.extend({addClass:function(a){var e,b,d,f,m,c=0;if(u.isFunction(a))return this.each(function(e){u(this).addClass(a.call(this,e,Ba(this)))});if("string"===typeof a&&a)for(e=a.match(Kb)||[];b=this[c++];){var g=Ba(b);if(d=1===b.nodeType&&(" "+g+" ").replace(Xd," ")){for(m=0;f=e[m++];)0>d.indexOf(" "+f+" ")&&(d+=f+" ");d=u.trim(d);g!==d&&u.attr(b,"class",d)}}return this},removeClass:function(a){var e,b,d,f,m,c=0;if(u.isFunction(a))return this.each(function(e){u(this).removeClass(a.call(this,
e,Ba(this)))});if(!arguments.length)return this.attr("class","");if("string"===typeof a&&a)for(e=a.match(Kb)||[];b=this[c++];){var g=Ba(b);if(d=1===b.nodeType&&(" "+g+" ").replace(Xd," ")){for(m=0;f=e[m++];)for(;-1<d.indexOf(" "+f+" ");)d=d.replace(" "+f+" "," ");d=u.trim(d);g!==d&&u.attr(b,"class",d)}}return this},toggleClass:function(a,e){var b=typeof a;return"boolean"===typeof e&&"string"===b?e?this.addClass(a):this.removeClass(a):u.isFunction(a)?this.each(function(b){u(this).toggleClass(a.call(this,
b,Ba(this),e),e)}):this.each(function(){var e,d;if("string"===b){var f=0;var m=u(this);for(d=a.match(Kb)||[];e=d[f++];)m.hasClass(e)?m.removeClass(e):m.addClass(e)}else if(void 0===a||"boolean"===b)(e=Ba(this))&&u._data(this,"__className__",e),u.attr(this,"class",e||!1===a?"":u._data(this,"__className__")||"")})},hasClass:function(a){var e,b=0;for(a=" "+a+" ";e=this[b++];)if(1===e.nodeType&&-1<(" "+Ba(e)+" ").replace(Xd," ").indexOf(a))return!0;return!1}});u.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,e){u.fn[e]=function(a,b){return 0<arguments.length?this.on(e,null,a,b):this.trigger(e)}});u.fn.extend({hover:function(a,e){return this.mouseenter(a).mouseleave(e||a)}});var dg=k.location,O=u.now(),Za=/\?/,lc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;u.parseJSON=function(a){if(k.JSON&&k.JSON.parse)return k.JSON.parse(a+"");var e,b=null,d=u.trim(a+"");return d&&!u.trim(d.replace(lc,function(a,d,f,m){e&&
d&&(b=0);if(0===b)return a;e=f||d;b+=!m-!f;return""}))?Function("return "+d)():u.error("Invalid JSON: "+a)};u.parseXML=function(a){if(!a||"string"!==typeof a)return null;try{if(k.DOMParser){var e=new k.DOMParser;var b=e.parseFromString(a,"text/xml")}else b=new k.ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)}catch(yb){b=void 0}b&&b.documentElement&&!b.getElementsByTagName("parsererror").length||u.error("Invalid XML: "+a);return b};var kf=/#.*$/,vd=/([?&])_=[^&]*/,Be=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,
lf=/^(?:GET|HEAD)$/,mc=/^\/\//,mf=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Zb={},Mc={},Ob="*/".concat("*"),Xc=dg.href,$b=mf.exec(Xc.toLowerCase())||[];u.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Xc,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test($b[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ob,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",
json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":u.parseJSON,"text xml":u.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,e){return e?ra(ra(a,u.ajaxSettings),e):ra(u.ajaxSettings,a)},ajaxPrefilter:La(Zb),ajaxTransport:La(Mc),ajax:function(a,e){function b(a,e,b,d){var l=e;if(2!==t){t=2;m&&k.clearTimeout(m);
g=void 0;f=d||"";y.readyState=0<a?4:0;d=200<=a&&300>a||304===a;if(b){var w=n;for(var v=y,D,H,A,N,C=w.contents,F=w.dataTypes;"*"===F[0];)F.shift(),void 0===H&&(H=w.mimeType||v.getResponseHeader("Content-Type"));if(H)for(N in C)if(C[N]&&C[N].test(H)){F.unshift(N);break}if(F[0]in b)A=F[0];else{for(N in b){if(!F[0]||w.converters[N+" "+F[0]]){A=N;break}D||(D=N)}A=A||D}A?(A!==F[0]&&F.unshift(A),w=b[A]):w=void 0}a:{b=n;D=w;H=y;A=d;var aa;v={};C=b.dataTypes.slice();if(C[1])for(R in b.converters)v[R.toLowerCase()]=
b.converters[R];for(N=C.shift();N;){b.responseFields[N]&&(H[b.responseFields[N]]=D);!G&&A&&b.dataFilter&&(D=b.dataFilter(D,b.dataType));var G=N;if(N=C.shift())if("*"===N)N=G;else if("*"!==G&&G!==N){var R=v[G+" "+N]||v["* "+N];if(!R)for(aa in v)if(w=aa.split(" "),w[1]===N&&(R=v[G+" "+w[0]]||v["* "+w[0]])){!0===R?R=v[aa]:!0!==v[aa]&&(N=w[0],C.unshift(w[1]));break}if(!0!==R)if(R&&b["throws"])D=R(D);else try{D=R(D)}catch(gf){w={state:"parsererror",error:R?gf:"No conversion from "+G+" to "+N};break a}}}w=
{state:"success",data:D}}if(d)if(n.ifModified&&((l=y.getResponseHeader("Last-Modified"))&&(u.lastModified[z]=l),(l=y.getResponseHeader("etag"))&&(u.etag[z]=l)),204===a||"HEAD"===n.type)l="nocontent";else if(304===a)l="notmodified";else{l=w.state;var E=w.data;var X=w.error;d=!X}else if(X=l,a||!l)l="error",0>a&&(a=0);y.status=a;y.statusText=(e||l)+"";d?h.resolveWith(x,[E,l,y]):h.rejectWith(x,[y,l,X]);y.statusCode(r);r=void 0;c&&p.trigger(d?"ajaxSuccess":"ajaxError",[y,n,d?E:X]);q.fireWith(x,[y,l]);
c&&(p.trigger("ajaxComplete",[y,n]),--u.active||u.event.trigger("ajaxStop"))}}"object"===typeof a&&(e=a,a=void 0);e=e||{};var d,f,m,c,g,l,n=u.ajaxSetup({},e),x=n.context||n,p=n.context&&(x.nodeType||x.jquery)?u(x):u.event,h=u.Deferred(),q=u.Callbacks("once memory"),r=n.statusCode||{},w={},v={},t=0,D="canceled",y={readyState:0,getResponseHeader:function(a){var e;if(2===t){if(!l)for(l={};e=Be.exec(f);)l[e[1].toLowerCase()]=e[2];e=l[a.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===
t?f:null},setRequestHeader:function(a,e){var b=a.toLowerCase();t||(a=v[b]=v[b]||a,w[a]=e);return this},overrideMimeType:function(a){t||(n.mimeType=a);return this},statusCode:function(a){var e;if(a)if(2>t)for(e in a)r[e]=[r[e],a[e]];else y.always(a[y.status]);return this},abort:function(a){a=a||D;g&&g.abort(a);b(0,a);return this}};h.promise(y).complete=q.add;y.success=y.done;y.error=y.fail;n.url=((a||n.url||Xc)+"").replace(kf,"").replace(mc,$b[1]+"//");n.type=e.method||e.type||n.method||n.type;n.dataTypes=
u.trim(n.dataType||"*").toLowerCase().match(Kb)||[""];null==n.crossDomain&&(a=mf.exec(n.url.toLowerCase()),n.crossDomain=!(!a||a[1]===$b[1]&&a[2]===$b[2]&&(a[3]||("http:"===a[1]?"80":"443"))===($b[3]||("http:"===$b[1]?"80":"443"))));n.data&&n.processData&&"string"!==typeof n.data&&(n.data=u.param(n.data,n.traditional));va(Zb,n,e,y);if(2===t)return y;(c=u.event&&n.global)&&0===u.active++&&u.event.trigger("ajaxStart");n.type=n.type.toUpperCase();n.hasContent=!lf.test(n.type);var z=n.url;n.hasContent||
(n.data&&(z=n.url+=(Za.test(z)?"&":"?")+n.data,delete n.data),!1===n.cache&&(n.url=vd.test(z)?z.replace(vd,"$1_="+O++):z+(Za.test(z)?"&":"?")+"_="+O++));n.ifModified&&(u.lastModified[z]&&y.setRequestHeader("If-Modified-Since",u.lastModified[z]),u.etag[z]&&y.setRequestHeader("If-None-Match",u.etag[z]));(n.data&&n.hasContent&&!1!==n.contentType||e.contentType)&&y.setRequestHeader("Content-Type",n.contentType);y.setRequestHeader("Accept",n.dataTypes[0]&&n.accepts[n.dataTypes[0]]?n.accepts[n.dataTypes[0]]+
("*"!==n.dataTypes[0]?", "+Ob+"; q=0.01":""):n.accepts["*"]);for(d in n.headers)y.setRequestHeader(d,n.headers[d]);if(n.beforeSend&&(!1===n.beforeSend.call(x,y,n)||2===t))return y.abort();D="abort";for(d in{success:1,error:1,complete:1})y[d](n[d]);if(g=va(Mc,n,e,y)){y.readyState=1;c&&p.trigger("ajaxSend",[y,n]);if(2===t)return y;n.async&&0<n.timeout&&(m=k.setTimeout(function(){y.abort("timeout")},n.timeout));try{t=1,g.send(w,b)}catch(Mb){if(2>t)b(-1,Mb);else throw Mb;}}else b(-1,"No Transport");return y},
getJSON:function(a,e,b){return u.get(a,e,b,"json")},getScript:function(a,e){return u.get(a,void 0,e,"script")}});u.each(["get","post"],function(a,e){u[e]=function(a,b,d,f){u.isFunction(b)&&(f=f||d,d=b,b=void 0);return u.ajax(u.extend({url:a,type:e,dataType:f,data:b,success:d},u.isPlainObject(a)&&a))}});u._evalUrl=function(a){return u.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})};u.fn.extend({wrapAll:function(a){if(u.isFunction(a))return this.each(function(e){u(this).wrapAll(a.call(this,
e))});if(this[0]){var e=u(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]);e.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return u.isFunction(a)?this.each(function(e){u(this).wrapInner(a.call(this,e))}):this.each(function(){var e=u(this),b=e.contents();b.length?b.wrapAll(a):e.append(a)})},wrap:function(a){var e=u.isFunction(a);return this.each(function(b){u(this).wrapAll(e?
a.call(this,b):a)})},unwrap:function(){return this.parent().each(function(){u.nodeName(this,"body")||u(this).replaceWith(this.childNodes)}).end()}});u.expr.filters.hidden=function(a){return P.reliableHiddenOffsets()?0>=a.offsetWidth&&0>=a.offsetHeight&&!a.getClientRects().length:sb(a)};u.expr.filters.visible=function(a){return!u.expr.filters.hidden(a)};var Pb=/%20/g,qe=/\[\]$/,wd=/\r?\n/g,Ce=/^(?:submit|button|image|reset|file)$/i,De=/^(?:input|select|textarea|keygen)/i;u.param=function(a,e){var b,
d=[],f=function(a,e){e=u.isFunction(e)?e():null==e?"":e;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(e)};void 0===e&&(e=u.ajaxSettings&&u.ajaxSettings.traditional);if(u.isArray(a)||a.jquery&&!u.isPlainObject(a))u.each(a,function(){f(this.name,this.value)});else for(b in a)wa(b,a[b],e,f);return d.join("&").replace(Pb,"+")};u.fn.extend({serialize:function(){return u.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=u.prop(this,"elements");return a?
u.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!u(this).is(":disabled")&&De.test(this.nodeName)&&!Ce.test(a)&&(this.checked||!Va.test(a))}).map(function(a,e){a=u(this).val();return null==a?null:u.isArray(a)?u.map(a,function(a){return{name:e.name,value:a.replace(wd,"\r\n")}}):{name:e.name,value:a.replace(wd,"\r\n")}}).get()}});u.ajaxSettings.xhr=void 0!==k.ActiveXObject?function(){return this.isLocal?Xa():8<Q.documentMode?Ta():/^(get|post|head|put|delete|options)$/i.test(this.type)&&
Ta()||Xa()}:Ta;var xd=0,Yc={},ub=u.ajaxSettings.xhr();k.attachEvent&&k.attachEvent("onunload",function(){for(var a in Yc)Yc[a](void 0,!0)});P.cors=!!ub&&"withCredentials"in ub;(ub=P.ajax=!!ub)&&u.ajaxTransport(function(a){if(!a.crossDomain||P.cors){var e;return{send:function(b,d){var f,m=a.xhr(),c=++xd;m.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(f in a.xhrFields)m[f]=a.xhrFields[f];a.mimeType&&m.overrideMimeType&&m.overrideMimeType(a.mimeType);a.crossDomain||b["X-Requested-With"]||
(b["X-Requested-With"]="XMLHttpRequest");for(f in b)void 0!==b[f]&&m.setRequestHeader(f,b[f]+"");m.send(a.hasContent&&a.data||null);e=function(b,f){if(e&&(f||4===m.readyState))if(delete Yc[c],e=void 0,m.onreadystatechange=u.noop,f)4!==m.readyState&&m.abort();else{var g={};var l=m.status;"string"===typeof m.responseText&&(g.text=m.responseText);try{var n=m.statusText}catch(ne){n=""}l||!a.isLocal||a.crossDomain?1223===l&&(l=204):l=g.text?200:404}g&&d(l,n,g,m.getAllResponseHeaders())};a.async?4===m.readyState?
k.setTimeout(e):m.onreadystatechange=Yc[c]=e:e()},abort:function(){e&&e(void 0,!0)}}}});u.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){u.globalEval(a);return a}}});u.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});u.ajaxTransport("script",function(a){if(a.crossDomain){var e,b=Q.head||
u("head")[0]||Q.documentElement;return{send:function(d,f){e=Q.createElement("script");e.async=!0;a.scriptCharset&&(e.charset=a.scriptCharset);e.src=a.url;e.onload=e.onreadystatechange=function(a,b){if(b||!e.readyState||/loaded|complete/.test(e.readyState))e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,b||f(200,"success")};b.insertBefore(e,b.firstChild)},abort:function(){if(e)e.onload(void 0,!0)}}}});var Zc=[],Yd=/(=)\?(?=&|$)|\?\?/;u.ajaxSetup({jsonp:"callback",
jsonpCallback:function(){var a=Zc.pop()||u.expando+"_"+O++;this[a]=!0;return a}});u.ajaxPrefilter("json jsonp",function(a,e,b){var d,f=!1!==a.jsonp&&(Yd.test(a.url)?"url":"string"===typeof a.data&&0===(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yd.test(a.data)&&"data");if(f||"jsonp"===a.dataTypes[0]){var m=a.jsonpCallback=u.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback;f?a[f]=a[f].replace(Yd,"$1"+m):!1!==a.jsonp&&(a.url+=(Za.test(a.url)?"&":"?")+a.jsonp+"="+m);
a.converters["script json"]=function(){d||u.error(m+" was not called");return d[0]};a.dataTypes[0]="json";var c=k[m];k[m]=function(){d=arguments};b.always(function(){void 0===c?u(k).removeProp(m):k[m]=c;a[m]&&(a.jsonpCallback=e.jsonpCallback,Zc.push(m));d&&u.isFunction(c)&&c(d[0]);d=c=void 0});return"script"}});u.parseHTML=function(a,e,b){if(!a||"string"!==typeof a)return null;"boolean"===typeof e&&(b=e,e=!1);e=e||Q;var d=Qa.exec(a);b=!b&&[];if(d)return[e.createElement(d[1])];d=y([a],e,b);b&&b.length&&
u(b).remove();return u.merge([],d.childNodes)};var yc=u.fn.load;u.fn.load=function(a,e,b){if("string"!==typeof a&&yc)return yc.apply(this,arguments);var d,f,m=this,c=a.indexOf(" ");if(-1<c){var g=u.trim(a.slice(c,a.length));a=a.slice(0,c)}u.isFunction(e)?(b=e,e=void 0):e&&"object"===typeof e&&(d="POST");0<m.length&&u.ajax({url:a,type:d||"GET",dataType:"html",data:e}).done(function(a){f=arguments;m.html(g?u("<div>").append(u.parseHTML(a)).find(g):a)}).always(b&&function(a,e){m.each(function(){b.apply(this,
f||[a.responseText,e,a])})});return this};u.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,e){u.fn[e]=function(a){return this.on(e,a)}});u.expr.filters.animated=function(a){return u.grep(u.timers,function(e){return a===e.elem}).length};u.offset={setOffset:function(a,e,b){var d=u.css(a,"position"),f=u(a),m={};"static"===d&&(a.style.position="relative");var c=f.offset();var g=u.css(a,"top");var l=u.css(a,"left");("absolute"===d||"fixed"===d)&&-1<u.inArray("auto",
[g,l])?(l=f.position(),g=l.top,l=l.left):(g=parseFloat(g)||0,l=parseFloat(l)||0);u.isFunction(e)&&(e=e.call(a,b,u.extend({},c)));null!=e.top&&(m.top=e.top-c.top+g);null!=e.left&&(m.left=e.left-c.left+l);"using"in e?e.using.call(a,m):f.css(m)}};u.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(e){u.offset.setOffset(this,a,e)});var e,b={top:0,left:0},d=(e=this[0])&&e.ownerDocument;if(d){var f=d.documentElement;if(!u.contains(f,e))return b;"undefined"!==typeof e.getBoundingClientRect&&
(b=e.getBoundingClientRect());e=xa(d);return{top:b.top+(e.pageYOffset||f.scrollTop)-(f.clientTop||0),left:b.left+(e.pageXOffset||f.scrollLeft)-(f.clientLeft||0)}}},position:function(){if(this[0]){var a={top:0,left:0},e=this[0];if("fixed"===u.css(e,"position"))var b=e.getBoundingClientRect();else{var d=this.offsetParent();b=this.offset();u.nodeName(d[0],"html")||(a=d.offset());a.top+=u.css(d[0],"borderTopWidth",!0);a.left+=u.css(d[0],"borderLeftWidth",!0)}return{top:b.top-a.top-u.css(e,"marginTop",
!0),left:b.left-a.left-u.css(e,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&!u.nodeName(a,"html")&&"static"===u.css(a,"position");)a=a.offsetParent;return a||jc})}});u.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,e){var b=/Y/.test(e);u.fn[a]=function(d){return J(this,function(a,d,f){var m=xa(a);if(void 0===f)return m?e in m?m[e]:m.document.documentElement[d]:a[d];m?m.scrollTo(b?u(m).scrollLeft():f,b?f:u(m).scrollTop()):
a[d]=f},a,d,arguments.length,null)}});u.each(["top","left"],function(a,e){u.cssHooks[e]=ka(P.pixelPosition,function(a,b){if(b)return b=Lb(a,e),pd.test(b)?u(a).position()[e]+"px":b})});u.each({Height:"height",Width:"width"},function(a,e){u.each({padding:"inner"+a,content:e,"":"outer"+a},function(b,d){u.fn[d]=function(d,f){var m=arguments.length&&(b||"boolean"!==typeof d),c=b||(!0===d||!0===f?"margin":"border");return J(this,function(e,b,d){return u.isWindow(e)?e.document.documentElement["client"+a]:
9===e.nodeType?(b=e.documentElement,Math.max(e.body["scroll"+a],b["scroll"+a],e.body["offset"+a],b["offset"+a],b["client"+a])):void 0===d?u.css(e,b,c):u.style(e,b,d,c)},e,m?d:void 0,m,null)}})});u.fn.extend({bind:function(a,e,b){return this.on(a,null,e,b)},unbind:function(a,e){return this.off(a,null,e)},delegate:function(a,e,b,d){return this.on(e,a,b,d)},undelegate:function(a,e,b){return 1===arguments.length?this.off(a,"**"):this.off(e,a||"**",b)}});u.fn.size=function(){return this.length};u.fn.andSelf=
u.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return u});var $c=k.jQuery,Zd=k.$;u.noConflict=function(a){k.$===u&&(k.$=Zd);a&&k.jQuery===u&&(k.jQuery=$c);return u};h||(k.jQuery=k.$=u);return u});/*
 jQuery UI - v1.10.4 - 2014-01-17
 http://jqueryui.com
 Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
 Copyright 2014 jQuery Foundation and other contributors; Licensed MIT  jQuery Color Animations v2.1.2
 https://github.com/jquery/jquery-color

 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 Date: Wed Jan 16 08:47:09 2013 -0600
*/
(function(k,h){function c(a,b){var d=a.nodeName.toLowerCase();if("area"===d){b=a.parentNode;d=b.name;if(!a.href||!d||"map"!==b.nodeName.toLowerCase())return!1;a=k("img[usemap=#"+d+"]")[0];return!!a&&g(a)}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"===d?a.href||b:b)&&g(a)}function g(a){return k.expr.filters.visible(a)&&!k(a).parents().addBack().filter(function(){return"hidden"===k.css(this,"visibility")}).length}var a=0,f=/^ui-id-\d+$/;k.ui=k.ui||{};k.extend(k.ui,{version:"1.10.4",
keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});k.fn.extend({focus:function(a){return function(b,d){return"number"===typeof b?this.each(function(){var a=this;setTimeout(function(){k(a).focus();d&&d.call(a)},b)}):a.apply(this,arguments)}}(k.fn.focus),scrollParent:function(){var a=k.ui.ie&&
/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(k.css(this,"position"))&&/(auto|scroll)/.test(k.css(this,"overflow")+k.css(this,"overflow-y")+k.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(k.css(this,"overflow")+k.css(this,"overflow-y")+k.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?k(document):a},zIndex:function(a){if(a!==
h)return this.css("zIndex",a);if(this.length){a=k(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");if("absolute"===b||"relative"===b||"fixed"===b)if(b=parseInt(a.css("zIndex"),10),!isNaN(b)&&0!==b)return b;a=a.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&k(this).removeAttr("id")})}});k.extend(k.expr[":"],{data:k.expr.createPseudo?k.expr.createPseudo(function(a){return function(b){return!!k.data(b,
a)}}):function(a,b,f){return!!k.data(a,f[3])},focusable:function(a){return c(a,!isNaN(k.attr(a,"tabindex")))},tabbable:function(a){var b=k.attr(a,"tabindex"),d=isNaN(b);return(d||0<=b)&&c(a,!d)}});k("<a>").outerWidth(1).jquery||k.each(["Width","Height"],function(a,b){function d(a,b,d,c){k.each(f,function(){b-=parseFloat(k.css(a,"padding"+this))||0;d&&(b-=parseFloat(k.css(a,"border"+this+"Width"))||0);c&&(b-=parseFloat(k.css(a,"margin"+this))||0)});return b}var f="Width"===b?["Left","Right"]:["Top",
"Bottom"],c=b.toLowerCase(),g={innerWidth:k.fn.innerWidth,innerHeight:k.fn.innerHeight,outerWidth:k.fn.outerWidth,outerHeight:k.fn.outerHeight};k.fn["inner"+b]=function(a){return a===h?g["inner"+b].call(this):this.each(function(){k(this).css(c,d(this,a)+"px")})};k.fn["outer"+b]=function(a,f){return"number"!==typeof a?g["outer"+b].call(this,a):this.each(function(){k(this).css(c,d(this,a,!0,f)+"px")})}});k.fn.addBack||(k.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});
k("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(k.fn.removeData=function(a){return function(b){return arguments.length?a.call(this,k.camelCase(b)):a.call(this)}}(k.fn.removeData));k.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());k.support.selectstart="onselectstart"in document.createElement("div");k.fn.extend({disableSelection:function(){return this.bind((k.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});
k.extend(k.ui,{plugin:{add:function(a,b,f){var d;a=k.ui[a].prototype;for(d in f)a.plugins[d]=a.plugins[d]||[],a.plugins[d].push([b,f[d]])},call:function(a,b,f){var d=a.plugins[b];if(d&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;b<d.length;b++)a.options[d[b][0]]&&d[b][1].apply(a.element,f)}},hasScroll:function(a,b){if("hidden"===k(a).css("overflow"))return!1;b=b&&"left"===b?"scrollLeft":"scrollTop";if(0<a[b])return!0;a[b]=1;var d=0<a[b];a[b]=0;return d}})})(jQuery);
(function(k,h){var c=0,g=Array.prototype.slice,a=k.cleanData;k.cleanData=function(f){for(var d=0,b;null!=(b=f[d]);d++)try{k(b).triggerHandler("remove")}catch(l){}a(f)};k.widget=function(a,d,b){var f={},c=a.split(".")[0];a=a.split(".")[1];var g=c+"-"+a;b||(b=d,d=k.Widget);k.expr[":"][g.toLowerCase()]=function(a){return!!k.data(a,g)};k[c]=k[c]||{};var h=k[c][a];var w=k[c][a]=function(a,b){if(!this._createWidget)return new w(a,b);arguments.length&&this._createWidget(a,b)};k.extend(w,h,{version:b.version,
_proto:k.extend({},b),_childConstructors:[]});var z=new d;z.options=k.widget.extend({},z.options);k.each(b,function(a,b){k.isFunction(b)?f[a]=function(){var f=function(){return d.prototype[a].apply(this,arguments)},c=function(b){return d.prototype[a].apply(this,b)};return function(){var a=this._super,d=this._superApply;this._super=f;this._superApply=c;var g=b.apply(this,arguments);this._super=a;this._superApply=d;return g}}():f[a]=b});w.prototype=k.widget.extend(z,{widgetEventPrefix:h?z.widgetEventPrefix||
a:a},f,{constructor:w,namespace:c,widgetName:a,widgetFullName:g});h?(k.each(h._childConstructors,function(a,b){a=b.prototype;k.widget(a.namespace+"."+a.widgetName,w,b._proto)}),delete h._childConstructors):d._childConstructors.push(w);k.widget.bridge(a,w)};k.widget.extend=function(a){for(var d=g.call(arguments,1),b=0,f=d.length,c,p;b<f;b++)for(c in d[b])p=d[b][c],d[b].hasOwnProperty(c)&&p!==h&&(k.isPlainObject(p)?a[c]=k.isPlainObject(a[c])?k.widget.extend({},a[c],p):k.widget.extend({},p):a[c]=p);
return a};k.widget.bridge=function(a,d){var b=d.prototype.widgetFullName||a;k.fn[a]=function(f){var c="string"===typeof f,l=g.call(arguments,1),r=this;f=!c&&l.length?k.widget.extend.apply(null,[f].concat(l)):f;c?this.each(function(){var d=k.data(this,b);if(!d)return k.error("cannot call methods on "+a+" prior to initialization; attempted to call method '"+f+"'");if(!k.isFunction(d[f])||"_"===f.charAt(0))return k.error("no such method '"+f+"' for "+a+" widget instance");var c=d[f].apply(d,l);if(c!==
d&&c!==h)return r=c&&c.jquery?r.pushStack(c.get()):c,!1}):this.each(function(){var a=k.data(this,b);a?a.option(f||{})._init():k.data(this,b,new d(f,this))});return r}};k.Widget=function(){};k.Widget._childConstructors=[];k.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(a,d){d=k(d||this.defaultElement||this)[0];this.element=k(d);this.uuid=c++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=k.widget.extend({},
this.options,this._getCreateOptions(),a);this.bindings=k();this.hoverable=k();this.focusable=k();d!==this&&(k.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=k(d.style?d.ownerDocument:d.document||d),this.window=k(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:k.noop,_getCreateEventData:k.noop,_create:k.noop,
_init:k.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(k.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:k.noop,widget:function(){return this.element},
option:function(a,d){var b=a,f;if(0===arguments.length)return k.widget.extend({},this.options);if("string"===typeof a){b={};var c=a.split(".");a=c.shift();if(c.length){var g=b[a]=k.widget.extend({},this.options[a]);for(f=0;f<c.length-1;f++)g[c[f]]=g[c[f]]||{},g=g[c[f]];a=c.pop();if(1===arguments.length)return g[a]===h?null:g[a];g[a]=d}else{if(1===arguments.length)return this.options[a]===h?null:this.options[a];b[a]=d}}this._setOptions(b);return this},_setOptions:function(a){for(var d in a)this._setOption(d,
a[d]);return this},_setOption:function(a,d){this.options[a]=d;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!d).attr("aria-disabled",d),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(a,d,b){var f,c=this;"boolean"!==typeof a&&(b=d,d=a,a=!1);b?(d=f=k(d),this.bindings=this.bindings.add(d)):
(b=d,d=this.element,f=this.widget());k.each(b,function(b,g){function l(){if(a||!0!==c.options.disabled&&!k(this).hasClass("ui-state-disabled"))return("string"===typeof g?c[g]:g).apply(c,arguments)}"string"!==typeof g&&(l.guid=g.guid=g.guid||l.guid||k.guid++);var n=b.match(/^(\w+)\s*(.*)$/);b=n[1]+c.eventNamespace;(n=n[2])?f.delegate(n,b,l):d.bind(b,l)})},_off:function(a,d){d=(d||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(d).undelegate(d)},_delay:function(a,d){var b=
this;return setTimeout(function(){return("string"===typeof a?b[a]:a).apply(b,arguments)},d||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){k(a.currentTarget).addClass("ui-state-hover")},mouseleave:function(a){k(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(a){k(a.currentTarget).addClass("ui-state-focus")},focusout:function(a){k(a.currentTarget).removeClass("ui-state-focus")}})},
_trigger:function(a,d,b){var f,c=this.options[a];b=b||{};d=k.Event(d);d.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d.target=this.element[0];if(a=d.originalEvent)for(f in a)f in d||(d[f]=a[f]);this.element.trigger(d,b);return!(k.isFunction(c)&&!1===c.apply(this.element[0],[d].concat(b))||d.isDefaultPrevented())}};k.each({show:"fadeIn",hide:"fadeOut"},function(a,d){k.Widget.prototype["_"+a]=function(b,f,c){"string"===typeof f&&(f={effect:f});var g=f?!0===f||"number"===
typeof f?d:f.effect||d:a;f=f||{};"number"===typeof f&&(f={duration:f});var l=!k.isEmptyObject(f);f.complete=c;f.delay&&b.delay(f.delay);if(l&&k.effects&&k.effects.effect[g])b[a](f);else if(g!==a&&b[g])b[g](f.duration,f.easing,c);else b.queue(function(d){k(this)[a]();c&&c.call(b[0]);d()})}})})(jQuery);
(function(k,h){var c=!1;k(document).mouseup(function(){c=!1});k.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(a){return c._mouseDown(a)}).bind("click."+this.widgetName,function(a){if(!0===k.data(a.target,c.widgetName+".preventClickEvent"))return k.removeData(a.target,c.widgetName+".preventClickEvent"),a.stopImmediatePropagation(),!1});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&k(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(g){if(!c){this._mouseStarted&&this._mouseUp(g);this._mouseDownEvent=g;var a=this,f=1===g.which,d="string"===typeof this.options.cancel&&g.target.nodeName?k(g.target).closest(this.options.cancel).length:!1;if(!f||d||!this._mouseCapture(g))return!0;this.mouseDelayMet=
!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){a.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(g)&&this._mouseDelayMet(g)&&(this._mouseStarted=!1!==this._mouseStart(g),!this._mouseStarted))return g.preventDefault(),!0;!0===k.data(g.target,this.widgetName+".preventClickEvent")&&k.removeData(g.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return a._mouseMove(b)};this._mouseUpDelegate=function(b){return a._mouseUp(b)};
k(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);g.preventDefault();return c=!0}},_mouseMove:function(c){if(k.ui.ie&&(!document.documentMode||9>document.documentMode)&&!c.button)return this._mouseUp(c);if(this._mouseStarted)return this._mouseDrag(c),c.preventDefault();this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,c))?this._mouseDrag(c):this._mouseUp(c));
return!this._mouseStarted},_mouseUp:function(c){k(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&k.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c));return!1},_mouseDistanceMet:function(c){return Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-c.pageY))>=this.options.distance},
_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(k,h){k.widget("ui.draggable",k.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||
/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(c){var g=this.options;if(this.helper||g.disabled||0<k(c.target).closest(".ui-resizable-handle").length)return!1;
this.handle=this._getHandle(c);if(!this.handle)return!1;k(!0===g.iframeFix?"iframe":g.iframeFix).each(function(){k("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(k(this).offset()).appendTo("body")});return!0},_mouseStart:function(c){var g=this.options;this.helper=this._createHelper(c);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();
k.ui.ddmanager&&(k.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offsetParent=this.helper.offsetParent();this.offsetParentCssPosition=this.offsetParent.css("position");this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.offset.scroll=!1;k.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},
parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(c);this.originalPageX=c.pageX;this.originalPageY=c.pageY;g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt);this._setContainment();if(!1===this._trigger("start",c))return this._clear(),!1;this._cacheHelperProportions();k.ui.ddmanager&&!g.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,c);this._mouseDrag(c,!0);k.ui.ddmanager&&k.ui.ddmanager.dragStart(this,c);return!0},
_mouseDrag:function(c,g){"fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset());this.position=this._generatePosition(c);this.positionAbs=this._convertPositionTo("absolute");if(!g){g=this._uiHash();if(!1===this._trigger("drag",c,g))return this._mouseUp({}),!1;this.position=g.position}this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");
k.ui.ddmanager&&k.ui.ddmanager.drag(this,c);return!1},_mouseStop:function(c){var g=this,a=!1;k.ui.ddmanager&&!this.options.dropBehaviour&&(a=k.ui.ddmanager.drop(this,c));this.dropped&&(a=this.dropped,this.dropped=!1);if("original"===this.options.helper&&!k.contains(this.element[0].ownerDocument,this.element[0]))return!1;"invalid"===this.options.revert&&!a||"valid"===this.options.revert&&a||!0===this.options.revert||k.isFunction(this.options.revert)&&this.options.revert.call(this.element,a)?k(this.helper).animate(this.originalPosition,
parseInt(this.options.revertDuration,10),function(){!1!==g._trigger("stop",c)&&g._clear()}):!1!==this._trigger("stop",c)&&this._clear();return!1},_mouseUp:function(c){k("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});k.ui.ddmanager&&k.ui.ddmanager.dragStop(this,c);return k.ui.mouse.prototype._mouseUp.call(this,c)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(c){return this.options.handle?
!!k(c.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(c){var g=this.options;c=k.isFunction(g.helper)?k(g.helper.apply(this.element[0],[c])):"clone"===g.helper?this.element.clone().removeAttr("id"):this.element;c.parents("body").length||c.appendTo("parent"===g.appendTo?this.element[0].parentNode:g.appendTo);c[0]===this.element[0]||/(fixed|absolute)/.test(c.css("position"))||c.css("position","absolute");return c},_adjustOffsetFromHelper:function(c){"string"===
typeof c&&(c=c.split(" "));k.isArray(c)&&(c={left:+c[0],top:+c[1]||0});"left"in c&&(this.offset.click.left=c.left+this.margins.left);"right"in c&&(this.offset.click.left=this.helperProportions.width-c.right+this.margins.left);"top"in c&&(this.offset.click.top=c.top+this.margins.top);"bottom"in c&&(this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top)},_getParentOffset:function(){var c=this.offsetParent.offset();"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&
k.contains(this.scrollParent[0],this.offsetParent[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&k.ui.ie)c={top:0,left:0};return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var c=this.element.position();
return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c;var g=this.options;if(g.containment)if("window"===g.containment)this.containment=[k(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,k(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,k(window).scrollLeft()+k(window).width()-this.helperProportions.width-this.margins.left,k(window).scrollTop()+(k(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top];else if("document"===g.containment)this.containment=[0,0,k(document).width()-this.helperProportions.width-this.margins.left,(k(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if(g.containment.constructor===Array)this.containment=g.containment;else{"parent"===g.containment&&(g.containment=this.helper[0].parentNode);var a=k(g.containment);if(c=a[0])g="hidden"!==a.css("overflow"),this.containment=[(parseInt(a.css("borderLeftWidth"),
10)||0)+(parseInt(a.css("paddingLeft"),10)||0),(parseInt(a.css("borderTopWidth"),10)||0)+(parseInt(a.css("paddingTop"),10)||0),(g?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a.css("borderRightWidth"),10)||0)-(parseInt(a.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(g?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a.css("borderBottomWidth"),10)||0)-(parseInt(a.css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top-this.margins.bottom],this.relative_container=a}else this.containment=null},_convertPositionTo:function(c,g){g||(g=this.position);c="absolute"===c?1:-1;var a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&k.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()});return{top:g.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?
-this.scrollParent.scrollTop():this.offset.scroll.top)*c,left:g.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*c}},_generatePosition:function(c){var g=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&k.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;var f=c.pageX;var d=c.pageY;this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),
left:a.scrollLeft()});if(this.originalPosition){if(this.containment){if(this.relative_container){var b=this.relative_container.offset();b=[this.containment[0]+b.left,this.containment[1]+b.top,this.containment[2]+b.left,this.containment[3]+b.top]}else b=this.containment;c.pageX-this.offset.click.left<b[0]&&(f=b[0]+this.offset.click.left);c.pageY-this.offset.click.top<b[1]&&(d=b[1]+this.offset.click.top);c.pageX-this.offset.click.left>b[2]&&(f=b[2]+this.offset.click.left);c.pageY-this.offset.click.top>
b[3]&&(d=b[3]+this.offset.click.top)}g.grid&&(d=g.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,d=b?d-this.offset.click.top>=b[1]||d-this.offset.click.top>b[3]?d:d-this.offset.click.top>=b[1]?d-g.grid[1]:d+g.grid[1]:d,f=g.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,f=b?f-this.offset.click.left>=b[0]||f-this.offset.click.left>b[2]?f:f-this.offset.click.left>=b[0]?f-g.grid[0]:f+g.grid[0]:
f)}return{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;
this.cancelHelperRemoval=!1},_trigger:function(c,g,a){a=a||this._uiHash();k.ui.plugin.call(this,c,[g,a]);"drag"===c&&(this.positionAbs=this._convertPositionTo("absolute"));return k.Widget.prototype._trigger.call(this,c,g,a)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});k.ui.plugin.add("draggable","connectToSortable",{start:function(c,g){var a=k(this).data("ui-draggable"),f=a.options,d=k.extend({},
g,{item:a.element});a.sortables=[];k(f.connectToSortable).each(function(){var b=k.data(this,"ui-sortable");b&&!b.options.disabled&&(a.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",c,d))})},stop:function(c,g){var a=k(this).data("ui-draggable"),f=k.extend({},g,{item:a.element});k.each(a.sortables,function(){this.instance.isOver?(this.instance.isOver=0,a.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=
this.shouldRevert),this.instance._mouseStop(c),this.instance.options.helper=this.instance.options._helper,"original"===a.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",c,f))})},drag:function(c,g){var a=k(this).data("ui-draggable"),f=this;k.each(a.sortables,function(){var d=!1,b=this;this.instance.positionAbs=a.positionAbs;this.instance.helperProportions=a.helperProportions;this.instance.offset.click=
a.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(d=!0,k.each(a.sortables,function(){this.instance.positionAbs=a.positionAbs;this.instance.helperProportions=a.helperProportions;this.instance.offset.click=a.offset.click;this!==b&&this.instance._intersectsWith(this.instance.containerCache)&&k.contains(b.instance.element[0],this.instance.element[0])&&(d=!1);return d}));d?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=k(f).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",
!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return g.helper[0]},c.target=this.instance.currentItem[0],this.instance._mouseCapture(c,!0),this.instance._mouseStart(c,!0,!0),this.instance.offset.click.top=a.offset.click.top,this.instance.offset.click.left=a.offset.click.left,this.instance.offset.parent.left-=a.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=a.offset.parent.top-this.instance.offset.parent.top,
a._trigger("toSortable",c),a.dropped=this.instance.element,a.currentItem=a.element,this.instance.fromOutside=a),this.instance.currentItem&&this.instance._mouseDrag(c)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",c,this.instance._uiHash(this.instance)),this.instance._mouseStop(c,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&
this.instance.placeholder.remove(),a._trigger("fromSortable",c),a.dropped=!1)})}});k.ui.plugin.add("draggable","cursor",{start:function(){var c=k("body"),g=k(this).data("ui-draggable").options;c.css("cursor")&&(g._cursor=c.css("cursor"));c.css("cursor",g.cursor)},stop:function(){var c=k(this).data("ui-draggable").options;c._cursor&&k("body").css("cursor",c._cursor)}});k.ui.plugin.add("draggable","opacity",{start:function(c,g){c=k(g.helper);g=k(this).data("ui-draggable").options;c.css("opacity")&&
(g._opacity=c.css("opacity"));c.css("opacity",g.opacity)},stop:function(c,g){c=k(this).data("ui-draggable").options;c._opacity&&k(g.helper).css("opacity",c._opacity)}});k.ui.plugin.add("draggable","scroll",{start:function(){var c=k(this).data("ui-draggable");c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName&&(c.overflowOffset=c.scrollParent.offset())},drag:function(c){var g=k(this).data("ui-draggable"),a=g.options,f=!1;g.scrollParent[0]!==document&&"HTML"!==g.scrollParent[0].tagName?
(a.axis&&"x"===a.axis||(g.overflowOffset.top+g.scrollParent[0].offsetHeight-c.pageY<a.scrollSensitivity?g.scrollParent[0].scrollTop=f=g.scrollParent[0].scrollTop+a.scrollSpeed:c.pageY-g.overflowOffset.top<a.scrollSensitivity&&(g.scrollParent[0].scrollTop=f=g.scrollParent[0].scrollTop-a.scrollSpeed)),a.axis&&"y"===a.axis||(g.overflowOffset.left+g.scrollParent[0].offsetWidth-c.pageX<a.scrollSensitivity?g.scrollParent[0].scrollLeft=f=g.scrollParent[0].scrollLeft+a.scrollSpeed:c.pageX-g.overflowOffset.left<
a.scrollSensitivity&&(g.scrollParent[0].scrollLeft=f=g.scrollParent[0].scrollLeft-a.scrollSpeed))):(a.axis&&"x"===a.axis||(c.pageY-k(document).scrollTop()<a.scrollSensitivity?f=k(document).scrollTop(k(document).scrollTop()-a.scrollSpeed):k(window).height()-(c.pageY-k(document).scrollTop())<a.scrollSensitivity&&(f=k(document).scrollTop(k(document).scrollTop()+a.scrollSpeed))),a.axis&&"y"===a.axis||(c.pageX-k(document).scrollLeft()<a.scrollSensitivity?f=k(document).scrollLeft(k(document).scrollLeft()-
a.scrollSpeed):k(window).width()-(c.pageX-k(document).scrollLeft())<a.scrollSensitivity&&(f=k(document).scrollLeft(k(document).scrollLeft()+a.scrollSpeed))));!1!==f&&k.ui.ddmanager&&!a.dropBehaviour&&k.ui.ddmanager.prepareOffsets(g,c)}});k.ui.plugin.add("draggable","snap",{start:function(){var c=k(this).data("ui-draggable"),g=c.options;c.snapElements=[];k(g.snap.constructor!==String?g.snap.items||":data(ui-draggable)":g.snap).each(function(){var a=k(this),f=a.offset();this!==c.element[0]&&c.snapElements.push({item:this,
width:a.outerWidth(),height:a.outerHeight(),top:f.top,left:f.left})})},drag:function(c,g){var a,f=k(this).data("ui-draggable"),d=f.options,b=d.snapTolerance,l=g.offset.left,n=l+f.helperProportions.width,h=g.offset.top,r=h+f.helperProportions.height;for(a=f.snapElements.length-1;0<=a;a--){var w=f.snapElements[a].left;var z=w+f.snapElements[a].width;var v=f.snapElements[a].top;var t=v+f.snapElements[a].height;if(n<w-b||l>z+b||r<v-b||h>t+b||!k.contains(f.snapElements[a].item.ownerDocument,f.snapElements[a].item))f.snapElements[a].snapping&&
f.options.snap.release&&f.options.snap.release.call(f.element,c,k.extend(f._uiHash(),{snapItem:f.snapElements[a].item})),f.snapElements[a].snapping=!1;else{if("inner"!==d.snapMode){var q=Math.abs(v-r)<=b;var y=Math.abs(t-h)<=b;var A=Math.abs(w-n)<=b;var C=Math.abs(z-l)<=b;q&&(g.position.top=f._convertPositionTo("relative",{top:v-f.helperProportions.height,left:0}).top-f.margins.top);y&&(g.position.top=f._convertPositionTo("relative",{top:t,left:0}).top-f.margins.top);A&&(g.position.left=f._convertPositionTo("relative",
{top:0,left:w-f.helperProportions.width}).left-f.margins.left);C&&(g.position.left=f._convertPositionTo("relative",{top:0,left:z}).left-f.margins.left)}var G=q||y||A||C;"outer"!==d.snapMode&&(q=Math.abs(v-h)<=b,y=Math.abs(t-r)<=b,A=Math.abs(w-l)<=b,C=Math.abs(z-n)<=b,q&&(g.position.top=f._convertPositionTo("relative",{top:v,left:0}).top-f.margins.top),y&&(g.position.top=f._convertPositionTo("relative",{top:t-f.helperProportions.height,left:0}).top-f.margins.top),A&&(g.position.left=f._convertPositionTo("relative",
{top:0,left:w}).left-f.margins.left),C&&(g.position.left=f._convertPositionTo("relative",{top:0,left:z-f.helperProportions.width}).left-f.margins.left));!f.snapElements[a].snapping&&(q||y||A||C||G)&&f.options.snap.snap&&f.options.snap.snap.call(f.element,c,k.extend(f._uiHash(),{snapItem:f.snapElements[a].item}));f.snapElements[a].snapping=q||y||A||C||G}}}});k.ui.plugin.add("draggable","stack",{start:function(){var c=this.data("ui-draggable").options;c=k.makeArray(k(c.stack)).sort(function(a,f){return(parseInt(k(a).css("zIndex"),
10)||0)-(parseInt(k(f).css("zIndex"),10)||0)});if(c.length){var g=parseInt(k(c[0]).css("zIndex"),10)||0;k(c).each(function(a){k(this).css("zIndex",g+a)});this.css("zIndex",g+c.length)}}});k.ui.plugin.add("draggable","zIndex",{start:function(c,g){c=k(g.helper);g=k(this).data("ui-draggable").options;c.css("zIndex")&&(g._zIndex=c.css("zIndex"));c.css("zIndex",g.zIndex)},stop:function(c,g){c=k(this).data("ui-draggable").options;c._zIndex&&k(g.helper).css("zIndex",c._zIndex)}})})(jQuery);
(function(k,h){k.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var c,g=this.options,a=g.accept;this.isover=!1;this.isout=!0;this.accept=k.isFunction(a)?a:function(f){return f.is(a)};this.proportions=function(){if(arguments.length)c=arguments[0];else return c?c:c={width:this.element[0].offsetWidth,
height:this.element[0].offsetHeight}};k.ui.ddmanager.droppables[g.scope]=k.ui.ddmanager.droppables[g.scope]||[];k.ui.ddmanager.droppables[g.scope].push(this);g.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var c=0,g=k.ui.ddmanager.droppables[this.options.scope];c<g.length;c++)g[c]===this&&g.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(c,g){"accept"===c&&(this.accept=k.isFunction(g)?g:function(a){return a.is(g)});k.Widget.prototype._setOption.apply(this,
arguments)},_activate:function(c){var g=k.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);g&&this._trigger("activate",c,this.ui(g))},_deactivate:function(c){var g=k.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);g&&this._trigger("deactivate",c,this.ui(g))},_over:function(c){var g=k.ui.ddmanager.current;g&&(g.currentItem||g.element)[0]!==this.element[0]&&this.accept.call(this.element[0],g.currentItem||
g.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",c,this.ui(g)))},_out:function(c){var g=k.ui.ddmanager.current;g&&(g.currentItem||g.element)[0]!==this.element[0]&&this.accept.call(this.element[0],g.currentItem||g.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",c,this.ui(g)))},_drop:function(c,g){var a=g||k.ui.ddmanager.current,f=!1;if(!a||(a.currentItem||a.element)[0]===this.element[0])return!1;
this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var d=k.data(this,"ui-droppable");if(d.options.greedy&&!d.options.disabled&&d.options.scope===a.options.scope&&d.accept.call(d.element[0],a.currentItem||a.element)&&k.ui.intersect(a,k.extend(d,{offset:d.element.offset()}),d.options.tolerance))return f=!0,!1});return f?!1:this.accept.call(this.element[0],a.currentItem||a.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&
this.element.removeClass(this.options.hoverClass),this._trigger("drop",c,this.ui(a)),this.element):!1},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}});k.ui.intersect=function(c,g,a){if(!g.offset)return!1;var f=(c.positionAbs||c.position.absolute).left,d=(c.positionAbs||c.position.absolute).top,b=f+c.helperProportions.width,l=d+c.helperProportions.height,n=g.offset.left,k=g.offset.top,h=n+g.proportions().width,w=k+g.proportions().height;
switch(a){case "fit":return n<=f&&b<=h&&k<=d&&l<=w;case "intersect":return n<f+c.helperProportions.width/2&&b-c.helperProportions.width/2<h&&k<d+c.helperProportions.height/2&&l-c.helperProportions.height/2<w;case "pointer":a=(c.positionAbs||c.position.absolute).left+(c.clickOffset||c.offset.click).left;c=(c.positionAbs||c.position.absolute).top+(c.clickOffset||c.offset.click).top;f=g.proportions().height;if(k=c>k&&c<k+f)g=g.proportions().width,k=a>n&&a<n+g;return k;case "touch":return(d>=k&&d<=w||
l>=k&&l<=w||d<k&&l>w)&&(f>=n&&f<=h||b>=n&&b<=h||f<n&&b>h);default:return!1}};k.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(c,g){var a,f=k.ui.ddmanager.droppables[c.options.scope]||[],d=g?g.type:null,b=(c.currentItem||c.element).find(":data(ui-droppable)").addBack();var l=0;a:for(;l<f.length;l++)if(!(f[l].options.disabled||c&&!f[l].accept.call(f[l].element[0],c.currentItem||c.element))){for(a=0;a<b.length;a++)if(b[a]===f[l].element[0]){f[l].proportions().height=0;continue a}f[l].visible=
"none"!==f[l].element.css("display");f[l].visible&&("mousedown"===d&&f[l]._activate.call(f[l],g),f[l].offset=f[l].element.offset(),f[l].proportions({width:f[l].element[0].offsetWidth,height:f[l].element[0].offsetHeight}))}},drop:function(c,g){var a=!1;k.each((k.ui.ddmanager.droppables[c.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&k.ui.intersect(c,this,this.options.tolerance)&&(a=this._drop.call(this,g)||a),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],
c.currentItem||c.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,g)))});return a},dragStart:function(c,g){c.element.parentsUntil("body").bind("scroll.droppable",function(){c.options.refreshPositions||k.ui.ddmanager.prepareOffsets(c,g)})},drag:function(c,g){c.options.refreshPositions&&k.ui.ddmanager.prepareOffsets(c,g);k.each(k.ui.ddmanager.droppables[c.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var a=k.ui.intersect(c,this,this.options.tolerance);
var f=!a&&this.isover?"isout":a&&!this.isover?"isover":null;if(f){if(this.options.greedy){var d=this.options.scope;a=this.element.parents(":data(ui-droppable)").filter(function(){return k.data(this,"ui-droppable").options.scope===d});if(a.length){var b=k.data(a[0],"ui-droppable");b.greedyChild="isover"===f}}b&&"isover"===f&&(b.isover=!1,b.isout=!0,b._out.call(b,g));this[f]=!0;this["isout"===f?"isover":"isout"]=!1;this["isover"===f?"_over":"_out"].call(this,g);b&&"isout"===f&&(b.isout=!1,b.isover=
!0,b._over.call(b,g))}}})},dragStop:function(c,g){c.element.parentsUntil("body").unbind("scroll.droppable");c.options.refreshPositions||k.ui.ddmanager.prepareOffsets(c,g)}}})(jQuery);
(function(k,h){function c(a){return parseInt(a,10)||0}function g(a){return!isNaN(parseInt(a,10))}k.widget("ui.resizable",k.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var a,f=this,d=this.options;this.element.addClass("ui-resizable");
k.extend(this,{_aspectRatio:!!d.aspectRatio,aspectRatio:d.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:d.helper||d.ghost||d.animate?d.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(k("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),
left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),
this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=d.handles||(k(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");
if(this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var b=this.handles.split(",");this.handles={};for(a=0;a<b.length;a++){var c=k.trim(b[a]);var g="ui-resizable-"+c;var h=k("<div class='ui-resizable-handle "+g+"'></div>");h.css({zIndex:d.zIndex});"se"===c&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[c]=".ui-resizable-"+c;this.element.append(h)}}this._renderAxis=function(a){var b;a=a||this.element;for(b in this.handles){this.handles[b].constructor===
String&&(this.handles[b]=k(this.handles[b],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=k(this.handles[b],this.element);var f=/sw|ne|nw|se|n|s/.test(b)?d.outerHeight():d.outerWidth();d=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join("");a.css(d,f);this._proportionallyResize()}k(this.handles[b])}};this._renderAxis(this.element);this._handles=k(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){f.resizing||(this.className&&(h=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),f.axis=h&&h[1]?h[1]:"se")});d.autoHide&&(this._handles.hide(),k(this.element).addClass("ui-resizable-autohide").mouseenter(function(){d.disabled||(k(this).removeClass("ui-resizable-autohide"),f._handles.show())}).mouseleave(function(){d.disabled||f.resizing||(k(this).addClass("ui-resizable-autohide"),f._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();
var a=function(a){k(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){a(this.element);var f=this.element;this.originalElement.css({position:f.css("position"),width:f.outerWidth(),height:f.outerHeight(),top:f.css("top"),left:f.css("left")}).insertAfter(f);f.remove()}this.originalElement.css("resize",this.originalResizeStyle);a(this.originalElement);
return this},_mouseCapture:function(a){var f,d=!1;for(f in this.handles){var b=k(this.handles[f])[0];if(b===a.target||k.contains(b,a.target))d=!0}return!this.options.disabled&&d},_mouseStart:function(a){var f=this.options;var d=this.element.position();var b=this.element;this.resizing=!0;/absolute/.test(b.css("position"))?b.css({position:"absolute",top:b.css("top"),left:b.css("left")}):b.is(".ui-draggable")&&b.css({position:"absolute",top:d.top,left:d.left});this._renderProxy();d=c(this.helper.css("left"));
var g=c(this.helper.css("top"));f.containment&&(d+=k(f.containment).scrollLeft()||0,g+=k(f.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:d,top:g};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:b.width(),height:b.height()};this.originalSize=this._helper?{width:b.outerWidth(),height:b.outerHeight()}:{width:b.width(),height:b.height()};this.originalPosition={left:d,top:g};this.sizeDiff={width:b.outerWidth()-b.width(),height:b.outerHeight()-
b.height()};this.originalMousePosition={left:a.pageX,top:a.pageY};this.aspectRatio="number"===typeof f.aspectRatio?f.aspectRatio:this.originalSize.width/this.originalSize.height||1;f=k(".ui-resizable-"+this.axis).css("cursor");k("body").css("cursor","auto"===f?this.axis+"-resize":f);b.addClass("ui-resizable-resizing");this._propagate("start",a);return!0},_mouseDrag:function(a){var f=this.helper,d={};var b=this.originalMousePosition;var c=this.position.top,g=this.position.left,h=this.size.width,r=
this.size.height,w=this._change[this.axis];if(!w)return!1;b=w.apply(this,[a,a.pageX-b.left||0,a.pageY-b.top||0]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)b=this._updateRatio(b,a);b=this._respectSize(b,a);this._updateCache(b);this._propagate("resize",a);this.position.top!==c&&(d.top=this.position.top+"px");this.position.left!==g&&(d.left=this.position.left+"px");this.size.width!==h&&(d.width=this.size.width+"px");this.size.height!==r&&(d.height=this.size.height+"px");
f.css(d);!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();k.isEmptyObject(d)||this._trigger("resize",a,this.ui());return!1},_mouseStop:function(a){this.resizing=!1;var f,d=this.options;if(this._helper){var b=this._proportionallyResizeElements;b=(f=b.length&&/textarea/i.test(b[0].nodeName))&&k.ui.hasScroll(b[0],"left")?0:this.sizeDiff.height;f=f?0:this.sizeDiff.width;f={width:this.helper.width()-f,height:this.helper.height()-b};b=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null;var c=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;d.animate||this.element.css(k.extend(f,{top:c,left:b}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!d.animate&&this._proportionallyResize()}k("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",a);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(a){var f=
this.options;f={minWidth:g(f.minWidth)?f.minWidth:0,maxWidth:g(f.maxWidth)?f.maxWidth:Infinity,minHeight:g(f.minHeight)?f.minHeight:0,maxHeight:g(f.maxHeight)?f.maxHeight:Infinity};if(this._aspectRatio||a){a=f.minHeight*this.aspectRatio;var d=f.minWidth/this.aspectRatio;var b=f.maxHeight*this.aspectRatio;var c=f.maxWidth/this.aspectRatio;a>f.minWidth&&(f.minWidth=a);d>f.minHeight&&(f.minHeight=d);b<f.maxWidth&&(f.maxWidth=b);c<f.maxHeight&&(f.maxHeight=c)}this._vBoundaries=f},_updateCache:function(a){this.offset=
this.helper.offset();g(a.left)&&(this.position.left=a.left);g(a.top)&&(this.position.top=a.top);g(a.height)&&(this.size.height=a.height);g(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var f=this.position,d=this.size,b=this.axis;g(a.height)?a.width=a.height*this.aspectRatio:g(a.width)&&(a.height=a.width/this.aspectRatio);"sw"===b&&(a.left=f.left+(d.width-a.width),a.top=null);"nw"===b&&(a.top=f.top+(d.height-a.height),a.left=f.left+(d.width-a.width));return a},_respectSize:function(a){var f=
this._vBoundaries,d=this.axis,b=g(a.width)&&f.maxWidth&&f.maxWidth<a.width,c=g(a.height)&&f.maxHeight&&f.maxHeight<a.height,n=g(a.width)&&f.minWidth&&f.minWidth>a.width,h=g(a.height)&&f.minHeight&&f.minHeight>a.height,k=this.originalPosition.left+this.originalSize.width,w=this.position.top+this.size.height,z=/sw|nw|w/.test(d);d=/nw|ne|n/.test(d);n&&(a.width=f.minWidth);h&&(a.height=f.minHeight);b&&(a.width=f.maxWidth);c&&(a.height=f.maxHeight);n&&z&&(a.left=k-f.minWidth);b&&z&&(a.left=k-f.maxWidth);
h&&d&&(a.top=w-f.minHeight);c&&d&&(a.top=w-f.maxHeight);a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null;return a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,f,d=this.helper||this.element;for(a=0;a<this._proportionallyResizeElements.length;a++){var b=this._proportionallyResizeElements[a];if(!this.borderDif){this.borderDif=[];var c=[b.css("borderTopWidth"),b.css("borderRightWidth"),b.css("borderBottomWidth"),b.css("borderLeftWidth")];
var g=[b.css("paddingTop"),b.css("paddingRight"),b.css("paddingBottom"),b.css("paddingLeft")];for(f=0;f<c.length;f++)this.borderDif[f]=(parseInt(c[f],10)||0)+(parseInt(g[f],10)||0)}b.css({height:d.height()-this.borderDif[0]-this.borderDif[2]||0,width:d.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var a=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||k("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++a.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,f){return{width:this.originalSize.width+f}},w:function(a,f){return{left:this.originalPosition.left+f,width:this.originalSize.width-f}},n:function(a,f,d){return{top:this.originalPosition.top+d,height:this.originalSize.height-d}},s:function(a,f,d){return{height:this.originalSize.height+
d}},se:function(a,f,d){return k.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,f,d]))},sw:function(a,f,d){return k.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,f,d]))},ne:function(a,f,d){return k.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,f,d]))},nw:function(a,f,d){return k.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,f,d]))}},_propagate:function(a,f){k.ui.plugin.call(this,a,[f,this.ui()]);
"resize"!==a&&this._trigger(a,f,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});k.ui.plugin.add("resizable","animate",{stop:function(a){var f=k(this).data("ui-resizable"),d=f.options,b=f._proportionallyResizeElements,c=b.length&&/textarea/i.test(b[0].nodeName),g=c&&k.ui.hasScroll(b[0],"left")?0:f.sizeDiff.height;c=
{width:f.size.width-(c?0:f.sizeDiff.width),height:f.size.height-g};g=parseInt(f.element.css("left"),10)+(f.position.left-f.originalPosition.left)||null;var h=parseInt(f.element.css("top"),10)+(f.position.top-f.originalPosition.top)||null;f.element.animate(k.extend(c,h&&g?{top:h,left:g}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(f.element.css("width"),10),height:parseInt(f.element.css("height"),10),top:parseInt(f.element.css("top"),10),left:parseInt(f.element.css("left"),
10)};b&&b.length&&k(b[0]).css({width:d.width,height:d.height});f._updateCache(d);f._propagate("resize",a)}})}});k.ui.plugin.add("resizable","containment",{start:function(){var a=k(this).data("ui-resizable"),f=a.element;var d=a.options.containment;if(f=d instanceof k?d.get(0):/parent/.test(d)?f.parent().get(0):d)if(a.containerElement=k(f),/document/.test(d)||d===document)a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:k(document),left:0,top:0,width:k(document).width(),
height:k(document).height()||document.body.parentNode.scrollHeight};else{var b=k(f);var g=[];k(["Top","Right","Left","Bottom"]).each(function(a,d){g[a]=c(b.css("padding"+d))});a.containerOffset=b.offset();a.containerPosition=b.position();a.containerSize={height:b.innerHeight()-g[3],width:b.innerWidth()-g[1]};d=a.containerOffset;var n=a.containerSize.height;var h=a.containerSize.width;h=k.ui.hasScroll(f,"left")?f.scrollWidth:h;n=k.ui.hasScroll(f)?f.scrollHeight:n;a.parentData={element:f,left:d.left,
top:d.top,width:h,height:n}}},resize:function(a){var f=k(this).data("ui-resizable");var d=f.options;var b=f.containerOffset;var c=f.position;a=f._aspectRatio||a.shiftKey;var g={top:0,left:0};var h=f.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(g=b);c.left<(f._helper?b.left:0)&&(f.size.width+=f._helper?f.position.left-b.left:f.position.left-g.left,a&&(f.size.height=f.size.width/f.aspectRatio),f.position.left=d.helper?b.left:0);c.top<(f._helper?b.top:0)&&(f.size.height+=f._helper?
f.position.top-b.top:f.position.top,a&&(f.size.width=f.size.height*f.aspectRatio),f.position.top=f._helper?b.top:0);f.offset.left=f.parentData.left+f.position.left;f.offset.top=f.parentData.top+f.position.top;d=Math.abs(f.offset.left-g.left+f.sizeDiff.width);b=Math.abs((f._helper?f.offset.top-g.top:f.offset.top-b.top)+f.sizeDiff.height);c=f.containerElement.get(0)===f.element.parent().get(0);g=/relative|absolute/.test(f.containerElement.css("position"));c&&g&&(d-=Math.abs(f.parentData.left));d+f.size.width>=
f.parentData.width&&(f.size.width=f.parentData.width-d,a&&(f.size.height=f.size.width/f.aspectRatio));b+f.size.height>=f.parentData.height&&(f.size.height=f.parentData.height-b,a&&(f.size.width=f.size.height*f.aspectRatio))},stop:function(){var a=k(this).data("ui-resizable"),f=a.options,d=a.containerOffset,b=a.containerPosition,c=a.containerElement,g=k(a.helper),h=g.offset(),r=g.outerWidth()-a.sizeDiff.width;g=g.outerHeight()-a.sizeDiff.height;a._helper&&!f.animate&&/relative/.test(c.css("position"))&&
k(this).css({left:h.left-b.left-d.left,width:r,height:g});a._helper&&!f.animate&&/static/.test(c.css("position"))&&k(this).css({left:h.left-b.left-d.left,width:r,height:g})}});k.ui.plugin.add("resizable","alsoResize",{start:function(){var a=k(this).data("ui-resizable").options,f=function(a){k(a).each(function(){var a=k(this);a.data("ui-resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"!==typeof a.alsoResize||
a.alsoResize.parentNode?f(a.alsoResize):a.alsoResize.length?(a.alsoResize=a.alsoResize[0],f(a.alsoResize)):k.each(a.alsoResize,function(a){f(a)})},resize:function(a,f){a=k(this).data("ui-resizable");var d=a.options,b=a.originalSize,c=a.originalPosition,g={height:a.size.height-b.height||0,width:a.size.width-b.width||0,top:a.position.top-c.top||0,left:a.position.left-c.left||0},h=function(a,b){k(a).each(function(){var a=k(this),d=k(this).data("ui-resizable-alsoresize"),c={},l=b&&b.length?b:a.parents(f.originalElement[0]).length?
["width","height"]:["width","height","top","left"];k.each(l,function(a,b){(a=(d[b]||0)+(g[b]||0))&&0<=a&&(c[b]=a||null)});a.css(c)})};"object"!==typeof d.alsoResize||d.alsoResize.nodeType?h(d.alsoResize):k.each(d.alsoResize,function(a,b){h(a,b)})},stop:function(){k(this).removeData("resizable-alsoresize")}});k.ui.plugin.add("resizable","ghost",{start:function(){var a=k(this).data("ui-resizable"),f=a.options,d=a.size;a.ghost=a.originalElement.clone();a.ghost.css({opacity:.25,display:"block",position:"relative",
height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"===typeof f.ghost?f.ghost:"");a.ghost.appendTo(a.helper)},resize:function(){var a=k(this).data("ui-resizable");a.ghost&&a.ghost.css({position:"relative",height:a.size.height,width:a.size.width})},stop:function(){var a=k(this).data("ui-resizable");a.ghost&&a.helper&&a.helper.get(0).removeChild(a.ghost.get(0))}});k.ui.plugin.add("resizable","grid",{resize:function(){var a=k(this).data("ui-resizable"),
f=a.options,d=a.size,b=a.originalSize,c=a.originalPosition,g=a.axis,h="number"===typeof f.grid?[f.grid,f.grid]:f.grid,r=h[0]||1,w=h[1]||1,z=Math.round((d.width-b.width)/r)*r;d=Math.round((d.height-b.height)/w)*w;var v=b.width+z,t=b.height+d,q=f.maxWidth&&f.maxWidth<v,y=f.maxHeight&&f.maxHeight<t,A=f.minWidth&&f.minWidth>v,C=f.minHeight&&f.minHeight>t;f.grid=h;A&&(v+=r);C&&(t+=w);q&&(v-=r);y&&(t-=w);/^(se|s|e)$/.test(g)?(a.size.width=v,a.size.height=t):/^(ne)$/.test(g)?(a.size.width=v,a.size.height=
t,a.position.top=c.top-d):/^(sw)$/.test(g)?(a.size.width=v,a.size.height=t,a.position.left=c.left-z):(0<t-w?(a.size.height=t,a.position.top=c.top-d):(a.size.height=w,a.position.top=c.top+b.height-w),0<v-r?(a.size.width=v,a.position.left=c.left-z):(a.size.width=r,a.position.left=c.left+b.width-r))}})})(jQuery);
(function(k,h){k.widget("ui.selectable",k.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var c,g=this;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){c=k(g.options.filter,g.element[0]);c.addClass("ui-selectee");c.each(function(){var a=k(this),f=a.offset();k.data(this,"selectable-item",{element:this,$element:a,
left:f.left,top:f.top,right:f.left+a.outerWidth(),bottom:f.top+a.outerHeight(),startselected:!1,selected:a.hasClass("ui-selected"),selecting:a.hasClass("ui-selecting"),unselecting:a.hasClass("ui-unselecting")})})};this.refresh();this.selectees=c.addClass("ui-selectee");this._mouseInit();this.helper=k("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");
this._mouseDestroy()},_mouseStart:function(c){var g=this,a=this.options;this.opos=[c.pageX,c.pageY];this.options.disabled||(this.selectees=k(a.filter,this.element[0]),this._trigger("start",c),k(a.appendTo).append(this.helper),this.helper.css({left:c.pageX,top:c.pageY,width:0,height:0}),a.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var a=k.data(this,"selectable-item");a.startselected=!0;c.metaKey||c.ctrlKey||(a.$element.removeClass("ui-selected"),a.selected=!1,
a.$element.addClass("ui-unselecting"),a.unselecting=!0,g._trigger("unselecting",c,{unselecting:a.element}))}),k(c.target).parents().addBack().each(function(){var a=k.data(this,"selectable-item");if(a){var d=!c.metaKey&&!c.ctrlKey||!a.$element.hasClass("ui-selected");a.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting");a.unselecting=!d;a.selecting=d;(a.selected=d)?g._trigger("selecting",c,{selecting:a.element}):g._trigger("unselecting",c,{unselecting:a.element});
return!1}}))},_mouseDrag:function(c){this.dragged=!0;if(!this.options.disabled){var g=this,a=this.options,f=this.opos[0],d=this.opos[1],b=c.pageX,l=c.pageY;if(f>b){var n=b;b=f;f=n}d>l&&(n=l,l=d,d=n);this.helper.css({left:f,top:d,width:b-f,height:l-d});this.selectees.each(function(){var n=k.data(this,"selectable-item"),h=!1;n&&n.element!==g.element[0]&&("touch"===a.tolerance?h=!(n.left>b||n.right<f||n.top>l||n.bottom<d):"fit"===a.tolerance&&(h=n.left>f&&n.right<b&&n.top>d&&n.bottom<l),h?(n.selected&&
(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,g._trigger("selecting",c,{selecting:n.element}))):(n.selecting&&((c.metaKey||c.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),
n.unselecting=!0),g._trigger("unselecting",c,{unselecting:n.element}))),!n.selected||c.metaKey||c.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,g._trigger("unselecting",c,{unselecting:n.element}))))});return!1}},_mouseStop:function(c){var g=this;this.dragged=!1;k(".ui-unselecting",this.element[0]).each(function(){var a=k.data(this,"selectable-item");a.$element.removeClass("ui-unselecting");a.unselecting=!1;a.startselected=
!1;g._trigger("unselected",c,{unselected:a.element})});k(".ui-selecting",this.element[0]).each(function(){var a=k.data(this,"selectable-item");a.$element.removeClass("ui-selecting").addClass("ui-selected");a.selecting=!1;a.selected=!0;a.startselected=!0;g._trigger("selected",c,{selected:a.element})});this._trigger("stop",c);this.helper.remove();return!1}})})(jQuery);
(function(k,h){function c(a,f,d){return a>f&&a<f+d}function g(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}k.widget("ui.sortable",k.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,
scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?"x"===a.axis||g(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");
this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(a,f){"disabled"===a?(this.options[a]=f,this.widget().toggleClass("ui-sortable-disabled",!!f)):k.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,f){var d=null,b=!1,c=this;if(this.reverting||this.options.disabled||"static"===this.options.type)return!1;this._refreshItems(a);k(a.target).parents().each(function(){if(k.data(this,
c.widgetName+"-item")===c)return d=k(this),!1});k.data(a.target,c.widgetName+"-item")===c&&(d=k(a.target));if(!d||this.options.handle&&!f&&(k(this.options.handle,d).find("*").addBack().each(function(){this===a.target&&(b=!0)}),!b))return!1;this.currentItem=d;this._removeCurrentsFromItems();return!0},_mouseStart:function(a,f,d){f=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();
this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};k.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;f.cursorAt&&this._adjustOffsetFromHelper(f.cursorAt);
this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!==this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();f.containment&&this._setContainment();if(f.cursor&&"auto"!==f.cursor){var b=this.document.find("body");this.storedCursor=b.css("cursor");b.css("cursor",f.cursor);this.storedStylesheet=k("<style>*{ cursor: "+f.cursor+" !important; }</style>").appendTo(b)}f.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),
this.helper.css("opacity",f.opacity));f.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",f.zIndex));this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(d=this.containers.length-1;0<=d;d--)this.containers[d]._trigger("activate",a,this._uiHash(this));k.ui.ddmanager&&
(k.ui.ddmanager.current=this);k.ui.ddmanager&&!f.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,a);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);return!0},_mouseDrag:function(a){var f;var d=this.options;var b=!1;this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+
this.scrollParent[0].offsetHeight-a.pageY<d.scrollSensitivity?this.scrollParent[0].scrollTop=b=this.scrollParent[0].scrollTop+d.scrollSpeed:a.pageY-this.overflowOffset.top<d.scrollSensitivity&&(this.scrollParent[0].scrollTop=b=this.scrollParent[0].scrollTop-d.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<d.scrollSensitivity?this.scrollParent[0].scrollLeft=b=this.scrollParent[0].scrollLeft+d.scrollSpeed:a.pageX-this.overflowOffset.left<d.scrollSensitivity&&(this.scrollParent[0].scrollLeft=
b=this.scrollParent[0].scrollLeft-d.scrollSpeed)):(a.pageY-k(document).scrollTop()<d.scrollSensitivity?b=k(document).scrollTop(k(document).scrollTop()-d.scrollSpeed):k(window).height()-(a.pageY-k(document).scrollTop())<d.scrollSensitivity&&(b=k(document).scrollTop(k(document).scrollTop()+d.scrollSpeed)),a.pageX-k(document).scrollLeft()<d.scrollSensitivity?b=k(document).scrollLeft(k(document).scrollLeft()-d.scrollSpeed):k(window).width()-(a.pageX-k(document).scrollLeft())<d.scrollSensitivity&&(b=k(document).scrollLeft(k(document).scrollLeft()+
d.scrollSpeed))),!1!==b&&k.ui.ddmanager&&!d.dropBehaviour&&k.ui.ddmanager.prepareOffsets(this,a));this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(d=this.items.length-1;0<=d;d--){b=this.items[d];var c=b.item[0];if((f=this._intersectsWithPointer(b))&&b.instance===this.currentContainer&&c!==this.currentItem[0]&&
this.placeholder[1===f?"next":"prev"]()[0]!==c&&!k.contains(this.placeholder[0],c)&&("semi-dynamic"===this.options.type?!k.contains(this.element[0],c):1)){this.direction=1===f?"down":"up";if("pointer"===this.options.tolerance||this._intersectsWithSides(b))this._rearrange(a,b);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);k.ui.ddmanager&&k.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(a,
f){if(a){k.ui.ddmanager&&!this.options.dropBehaviour&&k.ui.ddmanager.drop(this,a);if(this.options.revert){var d=this;f=this.placeholder.offset();var b=this.options.axis,c={};b&&"x"!==b||(c.left=f.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));b&&"y"!==b||(c.top=f.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;k(this.helper).animate(c,parseInt(this.options.revert,
10)||500,function(){d._clear(a)})}else this._clear(a,f);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var a=this.containers.length-1;0<=a;a--)this.containers[a]._trigger("deactivate",null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=
0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),k.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?k(this.domPosition.prev).after(this.currentItem):k(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(a){var f=this._getItemsAsjQuery(a&&a.connected),d=[];a=a||{};
k(f).each(function(){var b=(k(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[\-=_](.+)/);b&&d.push((a.key||b[1]+"[]")+"="+(a.key&&a.expression?b[1]:b[2]))});!d.length&&a.key&&d.push(a.key+"=");return d.join("&")},toArray:function(a){var f=this._getItemsAsjQuery(a&&a.connected),d=[];a=a||{};f.each(function(){d.push(k(a.item||this).attr(a.attribute||"id")||"")});return d},_intersectsWith:function(a){var f=this.positionAbs.left,d=f+this.helperProportions.width,b=this.positionAbs.top,
c=b+this.helperProportions.height,g=a.left,h=g+a.width,k=a.top,w=k+a.height,z=this.offset.click.top,v=this.offset.click.left;z="x"===this.options.axis||b+z>k&&b+z<w;v="y"===this.options.axis||f+v>g&&f+v<h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?z&&v:g<f+this.helperProportions.width/2&&d-this.helperProportions.width/2<h&&k<b+this.helperProportions.height/
2&&c-this.helperProportions.height/2<w},_intersectsWithPointer:function(a){var f="x"===this.options.axis||c(this.positionAbs.top+this.offset.click.top,a.top,a.height);a="y"===this.options.axis||c(this.positionAbs.left+this.offset.click.left,a.left,a.width);f=f&&a;a=this._getDragVerticalDirection();var d=this._getDragHorizontalDirection();return f?this.floating?d&&"right"===d||"down"===a?2:1:a&&("down"===a?2:1):!1},_intersectsWithSides:function(a){var f=c(this.positionAbs.top+this.offset.click.top,
a.top+a.height/2,a.height);a=c(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width);var d=this._getDragVerticalDirection(),b=this._getDragHorizontalDirection();return this.floating&&b?"right"===b&&a||"left"===b&&!a:d&&("down"===d&&f||"up"===d&&!f)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(0<a?
"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){function f(){c.push(this)}var d,b,c=[],g=[],h=this._connectWith();if(h&&a)for(a=h.length-1;0<=a;a--){var r=k(h[a]);for(d=r.length-1;0<=d;d--)(b=k.data(r[d],this.widgetFullName))&&b!==this&&!b.options.disabled&&g.push([k.isFunction(b.options.items)?b.options.items.call(b.element):
k(b.options.items,b.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),b])}g.push([k.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):k(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=g.length-1;0<=a;a--)g[a][0].each(f);return k(c)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=k.grep(this.items,
function(f){for(var d=0;d<a.length;d++)if(a[d]===f.item[0])return!1;return!0})},_refreshItems:function(a){this.items=[];this.containers=[this];var f,d,b,c,g=this.items,h=[[k.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):k(this.options.items,this.element),this]];if((c=this._connectWith())&&this.ready)for(f=c.length-1;0<=f;f--){var r=k(c[f]);for(d=r.length-1;0<=d;d--)(b=k.data(r[d],this.widgetFullName))&&b!==this&&!b.options.disabled&&(h.push([k.isFunction(b.options.items)?
b.options.items.call(b.element[0],a,{item:this.currentItem}):k(b.options.items,b.element),b]),this.containers.push(b))}for(f=h.length-1;0<=f;f--)for(a=h[f][1],r=h[f][0],d=0,c=r.length;d<c;d++)b=k(r[d]),b.data(this.widgetName+"-item",a),g.push({item:b,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(a){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var f;for(f=this.items.length-1;0<=f;f--){var d=this.items[f];if(d.instance===this.currentContainer||
!this.currentContainer||d.item[0]===this.currentItem[0]){var b=this.options.toleranceElement?k(this.options.toleranceElement,d.item):d.item;a||(d.width=b.outerWidth(),d.height=b.outerHeight());b=b.offset();d.left=b.left;d.top=b.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(f=this.containers.length-1;0<=f;f--)b=this.containers[f].element.offset(),this.containers[f].containerCache.left=b.left,this.containers[f].containerCache.top=
b.top,this.containers[f].containerCache.width=this.containers[f].element.outerWidth(),this.containers[f].containerCache.height=this.containers[f].element.outerHeight();return this},_createPlaceholder:function(a){a=a||this;var f=a.options;if(!f.placeholder||f.placeholder.constructor===String){var d=f.placeholder;f.placeholder={element:function(){var b=a.currentItem[0].nodeName.toLowerCase(),f=k("<"+b+">",a.document[0]).addClass(d||a.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");
"tr"===b?a.currentItem.children().each(function(){k("<td>&#160;</td>",a.document[0]).attr("colspan",k(this).attr("colspan")||1).appendTo(f)}):"img"===b&&f.attr("src",a.currentItem.attr("src"));d||f.css("visibility","hidden");return f},update:function(b,c){if(!d||f.forcePlaceholderSize)c.height()||c.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10)),c.width()||c.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||
0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}}}a.placeholder=k(f.placeholder.element.call(a.element,a.currentItem));a.currentItem.after(a.placeholder);f.placeholder.update(a,a.placeholder)},_contactContainers:function(a){var f,d,b,l=d=null;for(f=this.containers.length-1;0<=f;f--)k.contains(this.currentItem[0],this.containers[f].element[0])||(this._intersectsWith(this.containers[f].containerCache)?d&&k.contains(this.containers[f].element[0],d.element[0])||(d=this.containers[f],l=f):this.containers[f].containerCache.over&&
(this.containers[f]._trigger("out",a,this._uiHash(this)),this.containers[f].containerCache.over=0));if(d)if(1===this.containers.length)this.containers[l].containerCache.over||(this.containers[l]._trigger("over",a,this._uiHash(this)),this.containers[l].containerCache.over=1);else{f=1E4;var n=null;var h=(b=d.floating||g(this.currentItem))?"left":"top";var r=b?"width":"height";var w=this.positionAbs[h]+this.offset.click[h];for(d=this.items.length-1;0<=d;d--)if(k.contains(this.containers[l].element[0],
this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(!b||c(this.positionAbs.top+this.offset.click.top,this.items[d].top,this.items[d].height))){var z=this.items[d].item.offset()[h];var v=!1;Math.abs(z-w)>Math.abs(z+this.items[d][r]-w)&&(v=!0,z+=this.items[d][r]);Math.abs(z-w)<f&&(f=Math.abs(z-w),n=this.items[d],this.direction=v?"up":"down")}(n||this.options.dropOnEmpty)&&this.currentContainer!==this.containers[l]&&(n?this._rearrange(a,n,null,!0):this._rearrange(a,null,this.containers[l].element,
!0),this._trigger("change",a,this._uiHash()),this.containers[l]._trigger("change",a,this._uiHash(this)),this.currentContainer=this.containers[l],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[l]._trigger("over",a,this._uiHash(this)),this.containers[l].containerCache.over=1)}},_createHelper:function(a){var f=this.options;a=k.isFunction(f.helper)?k(f.helper.apply(this.element[0],[a,this.currentItem])):"clone"===f.helper?this.currentItem.clone():this.currentItem;
a.parents("body").length||k("parent"!==f.appendTo?f.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);a[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});a[0].style.width&&!f.forceHelperSize||a.width(this.currentItem.width());a[0].style.height&&!f.forceHelperSize||a.height(this.currentItem.height());return a},
_adjustOffsetFromHelper:function(a){"string"===typeof a&&(a=a.split(" "));k.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=
this.offsetParent.offset();"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&k.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&k.ui.ie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;"parent"===a.containment&&(a.containment=this.helper[0].parentNode);if("document"===a.containment||"window"===a.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,k("document"===a.containment?document:window).width()-this.helperProportions.width-this.margins.left,(k("document"===a.containment?document:window).height()||
document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var f=k(a.containment)[0];a=k(a.containment).offset();var d="hidden"!==k(f).css("overflow");this.containment=[a.left+(parseInt(k(f).css("borderLeftWidth"),10)||0)+(parseInt(k(f).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(k(f).css("borderTopWidth"),10)||0)+(parseInt(k(f).css("paddingTop"),10)||0)-this.margins.top,a.left+(d?Math.max(f.scrollWidth,
f.offsetWidth):f.offsetWidth)-(parseInt(k(f).css("borderLeftWidth"),10)||0)-(parseInt(k(f).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(d?Math.max(f.scrollHeight,f.offsetHeight):f.offsetHeight)-(parseInt(k(f).css("borderTopWidth"),10)||0)-(parseInt(k(f).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,f){f||(f=this.position);a="absolute"===a?1:-1;var d="absolute"!==this.cssPosition||this.scrollParent[0]!==
document&&k.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,b=/(html|body)/i.test(d[0].tagName);return{top:f.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():b?0:d.scrollTop())*a,left:f.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():b?0:d.scrollLeft())*a}},_generatePosition:function(a){var f=this.options;var d=a.pageX;var b=
a.pageY;var c="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&k.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(c[0].tagName);"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());this.originalPosition&&(this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(d=this.containment[0]+this.offset.click.left),
a.pageY-this.offset.click.top<this.containment[1]&&(b=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>this.containment[2]&&(d=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(b=this.containment[3]+this.offset.click.top)),f.grid&&(b=this.originalPageY+Math.round((b-this.originalPageY)/f.grid[1])*f.grid[1],b=this.containment?b-this.offset.click.top>=this.containment[1]&&b-this.offset.click.top<=this.containment[3]?b:b-this.offset.click.top>=
this.containment[1]?b-f.grid[1]:b+f.grid[1]:b,d=this.originalPageX+Math.round((d-this.originalPageX)/f.grid[0])*f.grid[0],d=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-f.grid[0]:d+f.grid[0]:d));return{top:b-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():g?0:c.scrollTop()),left:d-this.offset.click.left-
this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():g?0:c.scrollLeft())}},_rearrange:function(a,f,d,b){d?d[0].appendChild(this.placeholder[0]):f.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?f.item[0]:f.item[0].nextSibling);var c=this.counter=this.counter?++this.counter:1;this._delay(function(){c===this.counter&&this.refreshPositions(!b)})},_clear:function(a,f){function d(a,b,d){return function(f){d._trigger(a,
f,b._uiHash(b))}}this.reverting=!1;var b,c=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(b in this._storedCSS)if("auto"===this._storedCSS[b]||"static"===this._storedCSS[b])this._storedCSS[b]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!f&&c.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});
!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||f||c.push(function(a){this._trigger("update",a,this._uiHash())});this===this.currentContainer||f||(c.push(function(a){this._trigger("remove",a,this._uiHash())}),c.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),c.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,
this.currentContainer)));for(b=this.containers.length-1;0<=b;b--)f||c.push(d("deactivate",this,this.containers[b])),this.containers[b].containerCache.over&&(c.push(d("out",this,this.containers[b])),this.containers[b].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove());this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex);
this.dragging=!1;if(this.cancelHelperRemoval){if(!f){this._trigger("beforeStop",a,this._uiHash());for(b=0;b<c.length;b++)c[b].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1}f||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!==this.currentItem[0]&&this.helper.remove();this.helper=null;if(!f){for(b=0;b<c.length;b++)c[b].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=!1;return!0},
_trigger:function(){!1===k.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(a){var f=a||this;return{helper:f.helper,placeholder:f.placeholder||k([]),position:f.position,originalPosition:f.originalPosition,offset:f.positionAbs,item:f.currentItem,sender:a?a.element:null}}})})(jQuery);
(function(k,h){k.effects={effect:{}};(function(c,g){function a(a,b,d){var f=k[b.type]||{};if(null==a)return d||!b.def?null:b.def;a=f.floor?~~a:parseFloat(a);return isNaN(a)?b.def:f.mod?(a+f.mod)%f.mod:0>a?0:f.max<a?f.max:a}function f(a){var b=n(),d=b._rgba=[];a=a.toLowerCase();v(l,function(f,c){f=(f=c.re.exec(a))&&c.parse(f);c=c.space||"rgba";if(f)return f=b[c](f),b[h[c].cache]=f[h[c].cache],d=b._rgba=f._rgba,!1});return d.length?("0,0,0,0"===d.join()&&c.extend(d,t.transparent),b):t[a]}function d(a,
b,d){d=(d+1)%1;return 1>6*d?a+(b-a)*d*6:1>2*d?b:2>3*d?a+(b-a)*(2/3-d)*6:a}var b=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],
16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],n=c.Color=function(a,b,d,f){return new c.Color.fn.parse(a,b,d,f)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,
type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},k={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},w=n.support={},z=c("<p>")[0],v=c.each;z.style.cssText="background-color:rgba(1,1,1,.5)";w.rgba=-1<z.style.backgroundColor.indexOf("rgba");v(h,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});n.fn=c.extend(n.prototype,{parse:function(b,d,l,k){if(b===g)return this._rgba=[null,null,
null,null],this;if(b.jquery||b.nodeType)b=c(b).css(d),d=g;var p=this,q=c.type(b),r=this._rgba=[];d!==g&&(b=[b,d,l,k],q="array");if("string"===q)return this.parse(f(b)||t._default);if("array"===q)return v(h.rgba.props,function(d,e){r[e.idx]=a(b[e.idx],e)}),this;if("object"===q)return b instanceof n?v(h,function(a,e){b[e.cache]&&(p[e.cache]=b[e.cache].slice())}):v(h,function(d,e){var f=e.cache;v(e.props,function(d,c){if(!p[f]&&e.to){if("alpha"===d||null==b[d])return;p[f]=e.to(p._rgba)}p[f][c.idx]=a(b[d],
c,!0)});p[f]&&0>c.inArray(null,p[f].slice(0,3))&&(p[f][3]=1,e.from&&(p._rgba=e.from(p[f])))}),this},is:function(a){var b=n(a),d=!0,f=this;v(h,function(a,c){var g=b[c.cache];if(g){var l=f[c.cache]||c.to&&c.to(f._rgba)||[];v(c.props,function(a,b){if(null!=g[b.idx])return d=g[b.idx]===l[b.idx]})}return d});return d},_space:function(){var a=[],b=this;v(h,function(d,f){b[f.cache]&&a.push(d)});return a.pop()},transition:function(b,d){var f=n(b);b=f._space();var c=h[b],g=0===this.alpha()?n("transparent"):
this,l=g[c.cache]||c.to(g._rgba),p=l.slice();f=f[c.cache];v(c.props,function(b,e){b=e.idx;var c=l[b],g=f[b],n=k[e.type]||{};null!==g&&(null===c?p[b]=g:(n.mod&&(g-c>n.mod/2?c+=n.mod:c-g>n.mod/2&&(c-=n.mod)),p[b]=a((g-c)*d+c,e)))});return this[b](p)},blend:function(a){if(1===this._rgba[3])return this;var b=this._rgba.slice(),d=b.pop(),f=n(a)._rgba;return n(c.map(b,function(a,b){return(1-d)*f[b]+d*a}))},toRgbaString:function(){var a="rgba(",b=c.map(this._rgba,function(a,b){return null==a?2<b?1:0:a});
1===b[3]&&(b.pop(),a="rgb(");return a+b.join()+")"},toHslaString:function(){var a="hsla(",b=c.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===b[3]&&(b.pop(),a="hsl(");return a+b.join()+")"},toHexString:function(a){var b=this._rgba.slice(),d=b.pop();a&&b.push(~~(255*d));return"#"+c.map(b,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});n.fn.parse.prototype=
n.fn;h.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,d=a[1]/255,f=a[2]/255;a=a[3];var c=Math.max(b,d,f),g=Math.min(b,d,f),l=c-g,n=c+g,e=.5*n;return[Math.round(g===c?0:b===c?60*(d-f)/l+360:d===c?60*(f-b)/l+120:60*(b-d)/l+240)%360,0===l?0:.5>=e?l/n:l/(2-n),e,null==a?1:a]};h.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,f=a[1],c=a[2];a=a[3];f=.5>=c?c*(1+f):c+f-c*f;c=2*c-f;return[Math.round(255*
d(c,f,b+1/3)),Math.round(255*d(c,f,b)),Math.round(255*d(c,f,b-1/3)),a]};v(h,function(d,f){var l=f.props,h=f.cache,k=f.to,p=f.from;n.fn[d]=function(b){k&&!this[h]&&(this[h]=k(this._rgba));if(b===g)return this[h].slice();var d=c.type(b),e="array"===d||"object"===d?b:arguments,f=this[h].slice();v(l,function(b,c){b=e["object"===d?b:c.idx];null==b&&(b=f[c.idx]);f[c.idx]=a(b,c)});if(p){var x=n(p(f));x[h]=f;return x}return n(f)};v(l,function(a,f){n.fn[a]||(n.fn[a]=function(e){var m=c.type(e),g="alpha"===
a?this._hsla?"hsla":"rgba":d,l=this[g](),n=l[f.idx];if("undefined"===m)return n;"function"===m&&(e=e.call(this,n),m=c.type(e));if(null==e&&f.empty)return this;"string"===m&&(m=b.exec(e))&&(e=n+parseFloat(m[2])*("+"===m[1]?1:-1));l[f.idx]=e;return this[g](l)})})});n.hook=function(a){a=a.split(" ");v(a,function(a,b){c.cssHooks[b]={set:function(a,d){var g,l="";if("transparent"!==d&&("string"!==c.type(d)||(g=f(d)))){d=n(g||d);if(!w.rgba&&1!==d._rgba[3]){for(g="backgroundColor"===b?a.parentNode:a;(""===
l||"transparent"===l)&&g&&g.style;)try{l=c.css(g,"backgroundColor"),g=g.parentNode}catch(I){}d=d.blend(l&&"transparent"!==l?l:"_default")}d=d.toRgbaString()}try{a.style[b]=d}catch(I){}}};c.fx.step[b]=function(a){a.colorInit||(a.start=n(a.elem,b),a.end=n(a.end),a.colorInit=!0);c.cssHooks[b].set(a.elem,a.start.transition(a.end,a.pos))}})};n.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");
c.cssHooks.borderColor={expand:function(a){var b={};v(["Top","Right","Bottom","Left"],function(d,f){b["border"+f+"Color"]=a});return b}};var t=c.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(){function c(a){var d=
a.ownerDocument.defaultView?a.ownerDocument.defaultView.getComputedStyle(a,null):a.currentStyle,b={};if(d&&d.length&&d[0]&&d[d[0]])for(a=d.length;a--;){var f=d[a];"string"===typeof d[f]&&(b[k.camelCase(f)]=d[f])}else for(f in d)"string"===typeof d[f]&&(b[f]=d[f]);return b}var g=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};k.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],
function(a,d){k.fx.step[d]=function(a){if("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)jQuery.style(a.elem,d,a.end),a.setAttr=!0}});k.fn.addBack||(k.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});k.effects.animateClass=function(f,d,b,l){var n=k.speed(d,b,l);return this.queue(function(){var b=k(this),d=b.attr("class")||"",l=n.children?b.find("*").addBack():b;l=l.map(function(){return{el:k(this),start:c(this)}});var h=function(){k.each(g,function(a,
d){if(f[d])b[d+"Class"](f[d])})};h();l=l.map(function(){this.end=c(this.el[0]);var b=this.start,d=this.end,f={},g;for(g in d){var l=d[g];b[g]===l||a[g]||!k.fx.step[g]&&isNaN(parseFloat(l))||(f[g]=l)}this.diff=f;return this});b.attr("class",d);l=l.map(function(){var a=this,b=k.Deferred(),d=k.extend({},n,{queue:!1,complete:function(){b.resolve(a)}});this.el.animate(this.diff,d);return b.promise()});k.when.apply(k,l.get()).done(function(){h();k.each(arguments,function(){var a=this.el;k.each(this.diff,
function(b){a.css(b,"")})});n.complete.call(b[0])})})};k.fn.extend({addClass:function(a){return function(d,b,f,c){return b?k.effects.animateClass.call(this,{add:d},b,f,c):a.apply(this,arguments)}}(k.fn.addClass),removeClass:function(a){return function(d,b,f,c){return 1<arguments.length?k.effects.animateClass.call(this,{remove:d},b,f,c):a.apply(this,arguments)}}(k.fn.removeClass),toggleClass:function(a){return function(d,b,f,c,g){return"boolean"===typeof b||b===h?f?k.effects.animateClass.call(this,
b?{add:d}:{remove:d},f,c,g):a.apply(this,arguments):k.effects.animateClass.call(this,{toggle:d},b,f,c)}}(k.fn.toggleClass),switchClass:function(a,d,b,c,g){return k.effects.animateClass.call(this,{add:d,remove:a},b,c,g)}})})();(function(){function c(a,f,d,b){k.isPlainObject(a)&&(f=a,a=a.effect);a={effect:a};null==f&&(f={});k.isFunction(f)&&(b=f,d=null,f={});if("number"===typeof f||k.fx.speeds[f])b=d,d=f,f={};k.isFunction(d)&&(b=d,d=null);f&&k.extend(a,f);d=d||f.duration;a.duration=k.fx.off?0:"number"===
typeof d?d:d in k.fx.speeds?k.fx.speeds[d]:k.fx.speeds._default;a.complete=b||f.complete;return a}function g(a){return!a||"number"===typeof a||k.fx.speeds[a]||"string"===typeof a&&!k.effects.effect[a]||k.isFunction(a)||"object"===typeof a&&!a.effect?!0:!1}k.extend(k.effects,{version:"1.10.4",save:function(a,f){for(var d=0;d<f.length;d++)null!==f[d]&&a.data("ui-effects-"+f[d],a[0].style[f[d]])},restore:function(a,f){var d;for(d=0;d<f.length;d++)if(null!==f[d]){var b=a.data("ui-effects-"+f[d]);b===
h&&(b="");a.css(f[d],b)}},setMode:function(a,f){"toggle"===f&&(f=a.is(":hidden")?"show":"hide");return f},getBaseline:function(a,f){switch(a[0]){case "top":var d=0;break;case "middle":d=.5;break;case "bottom":d=1;break;default:d=a[0]/f.height}switch(a[1]){case "left":a=0;break;case "center":a=.5;break;case "right":a=1;break;default:a=a[1]/f.width}return{x:a,y:d}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var f={width:a.outerWidth(!0),height:a.outerHeight(!0),
"float":a.css("float")},d=k("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),b={width:a.width(),height:a.height()},c=document.activeElement;try{c.id}catch(n){c=document.body}a.wrap(d);(a[0]===c||k.contains(a[0],c))&&k(c).focus();d=a.parent();"static"===a.css("position")?(d.css({position:"relative"}),a.css({position:"relative"})):(k.extend(f,{position:a.css("position"),zIndex:a.css("z-index")}),k.each(["top","left","bottom",
"right"],function(b,d){f[d]=a.css(d);isNaN(parseInt(f[d],10))&&(f[d]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));a.css(b);return d.css(f).show()},removeWrapper:function(a){var f=document.activeElement;a.parent().is(".ui-effects-wrapper")&&(a.parent().replaceWith(a),(a[0]===f||k.contains(a[0],f))&&k(f).focus());return a},setTransition:function(a,f,d,b){b=b||{};k.each(f,function(f,c){f=a.cssUnit(c);0<f[0]&&(b[c]=f[0]*d+f[1])});return b}});k.fn.extend({effect:function(){function a(a){function b(){k.isFunction(c)&&
c.call(d[0]);k.isFunction(a)&&a()}var d=k(this),c=f.complete,l=f.mode;(d.is(":hidden")?"hide"===l:"show"===l)?(d[l](),b()):g.call(d[0],f,b)}var f=c.apply(this,arguments),d=f.mode,b=f.queue,g=k.effects.effect[f.effect];return k.fx.off||!g?d?this[d](f.duration,f.complete):this.each(function(){f.complete&&f.complete.call(this)}):!1===b?this.each(a):this.queue(b||"fx",a)},show:function(a){return function(f){if(g(f))return a.apply(this,arguments);var d=c.apply(this,arguments);d.mode="show";return this.effect.call(this,
d)}}(k.fn.show),hide:function(a){return function(f){if(g(f))return a.apply(this,arguments);var d=c.apply(this,arguments);d.mode="hide";return this.effect.call(this,d)}}(k.fn.hide),toggle:function(a){return function(f){if(g(f)||"boolean"===typeof f)return a.apply(this,arguments);var d=c.apply(this,arguments);d.mode="toggle";return this.effect.call(this,d)}}(k.fn.toggle),cssUnit:function(a){var f=this.css(a),d=[];k.each(["em","px","%","pt"],function(a,c){0<f.indexOf(c)&&(d=[parseFloat(f),c])});return d}})})();
(function(){var c={};k.each(["Quad","Cubic","Quart","Quint","Expo"],function(g,a){c[a]=function(a){return Math.pow(a,g+2)}});k.extend(c,{Sine:function(c){return 1-Math.cos(c*Math.PI/2)},Circ:function(c){return 1-Math.sqrt(1-c*c)},Elastic:function(c){return 0===c||1===c?c:-Math.pow(2,8*(c-1))*Math.sin((80*(c-1)-7.5)*Math.PI/15)},Back:function(c){return c*c*(3*c-2)},Bounce:function(c){for(var a,f=4;c<((a=Math.pow(2,--f))-1)/11;);return 1/Math.pow(4,3-f)-7.5625*Math.pow((3*a-2)/22-c,2)}});k.each(c,function(c,
a){k.easing["easeIn"+c]=a;k.easing["easeOut"+c]=function(f){return 1-a(1-f)};k.easing["easeInOut"+c]=function(f){return.5>f?a(2*f)/2:1-a(-2*f+2)/2}})})()})(jQuery);
(function(k,h){var c=0,g={},a={};g.height=g.paddingTop=g.paddingBottom=g.borderTopWidth=g.borderBottomWidth="hide";a.height=a.paddingTop=a.paddingBottom=a.borderTopWidth=a.borderBottomWidth="show";k.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var a=this.options;
this.prevShow=this.prevHide=k();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");a.collapsible||!1!==a.active&&null!=a.active||(a.active=0);this._processPanels();0>a.active&&(a.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():k(),content:this.active.length?this.active.next():k()}},_createIcons:function(){var a=this.options.icons;a&&(k("<span>").addClass("ui-accordion-header-icon ui-icon "+
a.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(a.header).addClass(a.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&
this.removeAttribute("id")});this._destroyIcons();var a=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,d){"active"===a?this._activate(d):("event"===
a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(d)),this._super(a,d),"collapsible"!==a||d||!1!==this.options.active||this._activate(0),"icons"===a&&(this._destroyIcons(),d&&this._createIcons()),"disabled"===a&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!d))},_keydown:function(a){if(!a.altKey&&!a.ctrlKey){var d=k.ui.keyCode,b=this.headers.length,f=this.headers.index(a.target),c=!1;switch(a.keyCode){case d.RIGHT:case d.DOWN:c=this.headers[(f+
1)%b];break;case d.LEFT:case d.UP:c=this.headers[(f-1+b)%b];break;case d.SPACE:case d.ENTER:this._eventHandler(a);break;case d.HOME:c=this.headers[0];break;case d.END:c=this.headers[b-1]}c&&(k(a.target).attr("tabIndex",-1),k(c).attr("tabIndex",0),c.focus(),a.preventDefault())}},_panelKeyDown:function(a){a.keyCode===k.ui.keyCode.UP&&a.ctrlKey&&k(a.currentTarget).prev().focus()},refresh:function(){var a=this.options;this._processPanels();!1===a.active&&!0===a.collapsible||!this.headers.length?(a.active=
!1,this.active=k()):!1===a.active?this._activate(0):this.active.length&&!k.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(a.active=!1,this.active=k()):this._activate(Math.max(0,a.active-1)):a.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},
_refresh:function(){var a=this.options,d=a.heightStyle,b=this.element.parent(),g=this.accordionId="ui-accordion-"+(this.element.attr("id")||++c);this.active=this._findActive(a.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(a){var b=k(this),d=b.attr("id"),f=b.next(),c=f.attr("id");d||(d=g+"-header-"+a,b.attr("id",d));c||(c=g+"-panel-"+
a,f.attr("id",c));b.attr("aria-controls",c);f.attr("aria-labelledby",d)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(a.event);if("fill"===d){var n=b.height();this.element.siblings(":visible").each(function(){var a=
k(this),b=a.css("position");"absolute"!==b&&"fixed"!==b&&(n-=a.outerHeight(!0))});this.headers.each(function(){n-=k(this).outerHeight(!0)});this.headers.next().each(function(){k(this).height(Math.max(0,n-k(this).innerHeight()+k(this).height()))}).css("overflow","auto")}else"auto"===d&&(n=0,this.headers.next().each(function(){n=Math.max(n,k(this).css("height","").height())}).height(n))},_activate:function(a){a=this._findActive(a)[0];a!==this.active[0]&&(a=a||this.active[0],this._eventHandler({target:a,
currentTarget:a,preventDefault:k.noop}))},_findActive:function(a){return"number"===typeof a?this.headers.eq(a):k()},_setupEvents:function(a){var d={keydown:"_keydown"};a&&k.each(a.split(" "),function(a,f){d[f]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,d);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(a){var d=this.options,b=this.active,f=k(a.currentTarget),c=
f[0]===b[0],g=c&&d.collapsible,h=g?k():f.next(),w=b.next();h={oldHeader:b,oldPanel:w,newHeader:g?k():f,newPanel:h};a.preventDefault();c&&!d.collapsible||!1===this._trigger("beforeActivate",a,h)||(d.active=g?!1:this.headers.index(f),this.active=c?k():f,this._toggle(h),b.removeClass("ui-accordion-header-active ui-state-active"),d.icons&&b.children(".ui-accordion-header-icon").removeClass(d.icons.activeHeader).addClass(d.icons.header),c||(f.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),
d.icons&&f.children(".ui-accordion-header-icon").removeClass(d.icons.header).addClass(d.icons.activeHeader),f.next().addClass("ui-accordion-content-active")))},_toggle:function(a){var d=a.newPanel,b=this.prevShow.length?this.prevShow:a.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=d;this.prevHide=b;this.options.animate?this._animate(d,b,a):(b.hide(),d.show(),this._toggleComplete(a));b.attr({"aria-hidden":"true"});b.prev().attr("aria-selected","false");d.length&&b.length?b.prev().attr({tabIndex:-1,
"aria-expanded":"false"}):d.length&&this.headers.filter(function(){return 0===k(this).attr("tabIndex")}).attr("tabIndex",-1);d.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(f,d,b){var c,n,h=this,k=0,w=f.length&&(!d.length||f.index()<d.index()),z=this.options.animate||{};w=w&&z.down||z;var v=function(){h._toggleComplete(b)};"number"===typeof w&&(n=w);"string"===typeof w&&(c=w);c=c||w.easing||z.easing;n=n||w.duration||z.duration;
if(!d.length)return f.animate(a,n,c,v);if(!f.length)return d.animate(g,n,c,v);var t=f.show().outerHeight();d.animate(g,{duration:n,easing:c,step:function(a,b){b.now=Math.round(a)}});f.hide().animate(a,{duration:n,easing:c,complete:v,step:function(a,b){b.now=Math.round(a);"height"!==b.prop?k+=b.now:"content"!==h.options.heightStyle&&(b.now=Math.round(t-d.outerHeight()-k),k=0)}})},_toggleComplete:function(a){var d=a.oldPanel;d.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");
d.length&&(d.parent()[0].className=d.parent()[0].className);this._trigger("activate",null,a)}})})(jQuery);
(function(k,h){k.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var c,g,a,f=this.element[0].nodeName.toLowerCase(),d="textarea"===f;f="input"===f;this.isMultiLine=d?!0:f?!1:this.element.prop("isContentEditable");this.valueMethod=
this.element[d||f?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(b){if(this.element.prop("readOnly"))g=a=c=!0;else{g=a=c=!1;var d=k.ui.keyCode;switch(b.keyCode){case d.PAGE_UP:c=!0;this._move("previousPage",b);break;case d.PAGE_DOWN:c=!0;this._move("nextPage",b);break;case d.UP:c=!0;this._keyEvent("previous",b);break;case d.DOWN:c=!0;this._keyEvent("next",b);break;case d.ENTER:case d.NUMPAD_ENTER:this.menu.active&&
(c=!0,b.preventDefault(),this.menu.select(b));break;case d.TAB:this.menu.active&&this.menu.select(b);break;case d.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(b),b.preventDefault());break;default:g=!0,this._searchTimeout(b)}}},keypress:function(a){if(c)c=!1,this.isMultiLine&&!this.menu.element.is(":visible")||a.preventDefault();else if(!g){var b=k.ui.keyCode;switch(a.keyCode){case b.PAGE_UP:this._move("previousPage",a);break;case b.PAGE_DOWN:this._move("nextPage",a);
break;case b.UP:this._keyEvent("previous",a);break;case b.DOWN:this._keyEvent("next",a)}}},input:function(b){a?(a=!1,b.preventDefault()):this._searchTimeout(b)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=k("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu");this._on(this.menu.element,
{mousedown:function(a){a.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var b=this.menu.element[0];k(a.target).closest(".ui-menu-item").length||this._delay(function(){var a=this;this.document.one("mousedown",function(d){d.target===a.element[0]||d.target===b||k.contains(b,d.target)||a.close()})})},menufocus:function(a,d){if(this.isNewMenu&&(this.isNewMenu=!1,a.originalEvent&&/^mouse/.test(a.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){k(a.target).trigger(a.originalEvent)});
return}d=d.item.data("ui-autocomplete-item");!1!==this._trigger("focus",a,{item:d})?a.originalEvent&&/^key/.test(a.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,d){var b=d.item.data("ui-autocomplete-item"),f=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=f,this._delay(function(){this.previous=f;this.selectedItem=b}));!1!==this._trigger("select",a,{item:b})&&this._value(b.value);this.term=this._value();
this.close(a);this.selectedItem=b}});this.liveRegion=k("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(c,g){this._super(c,g);"source"===c&&this._initSource();
"appendTo"===c&&this.menu.element.appendTo(this._appendTo());"disabled"===c&&g&&this.xhr&&this.xhr.abort()},_appendTo:function(){var c=this.options.appendTo;c&&(c=c.jquery||c.nodeType?k(c):this.document.find(c).eq(0));c||(c=this.element.closest(".ui-front"));c.length||(c=this.document[0].body);return c},_initSource:function(){var c=this;if(k.isArray(this.options.source)){var g=this.options.source;this.source=function(a,d){d(k.ui.autocomplete.filter(g,a.term))}}else if("string"===typeof this.options.source){var a=
this.options.source;this.source=function(f,d){c.xhr&&c.xhr.abort();c.xhr=k.ajax({url:a,data:f,dataType:"json",success:function(a){d(a)},error:function(){d([])}})}}else this.source=this.options.source},_searchTimeout:function(c){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,c))},this.options.delay)},search:function(c,g){c=null!=c?c:this._value();this.term=this._value();if(c.length<this.options.minLength)return this.close(g);
if(!1!==this._trigger("search",g))return this._search(c)},_search:function(c){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:c},this._response())},_response:function(){var c=++this.requestIndex;return k.proxy(function(g){c===this.requestIndex&&this.__response(g);this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(c){c&&(c=this._normalize(c));this._trigger("response",null,{content:c});!this.options.disabled&&
c&&c.length&&!this.cancelSearch?(this._suggest(c),this._trigger("open")):this._close()},close:function(c){this.cancelSearch=!0;this._close(c)},_close:function(c){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",c))},_change:function(c){this.previous!==this._value()&&this._trigger("change",c,{item:this.selectedItem})},_normalize:function(c){return c.length&&c[0].label&&c[0].value?c:k.map(c,function(c){return"string"===typeof c?{label:c,
value:c}:k.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(c){var g=this.menu.element.empty();this._renderMenu(g,c);this.isNewMenu=!0;this.menu.refresh();g.show();this._resizeMenu();g.position(k.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var c=this.menu.element;c.outerWidth(Math.max(c.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(c,g){var a=this;k.each(g,function(f,d){a._renderItemData(c,
d)})},_renderItemData:function(c,g){return this._renderItem(c,g).data("ui-autocomplete-item",g)},_renderItem:function(c,g){return k("<li>").append(k("<a>").text(g.label)).appendTo(c)},_move:function(c,g){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(c)||this.menu.isLastItem()&&/^next/.test(c))this._value(this.term),this.menu.blur();else this.menu[c](g);else this.search(null,g)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,
arguments)},_keyEvent:function(c,g){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(c,g),g.preventDefault()}});k.extend(k.ui.autocomplete,{escapeRegex:function(c){return c.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(c,g){var a=new RegExp(k.ui.autocomplete.escapeRegex(g),"i");return k.grep(c,function(f){return a.test(f.label||f.value||f)})}});k.widget("ui.autocomplete",k.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(c){return c+
(1<c?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(c){this._superApply(arguments);if(!this.options.disabled&&!this.cancelSearch){var g=c&&c.length?this.options.messages.results(c.length):this.options.messages.noResults;this.liveRegion.text(g)}}})})(jQuery);
(function(k,h){var c,g=function(){var a=k(this);setTimeout(function(){a.find(":ui-button").button("refresh")},1)},a=function(a){var d=a.name,b=a.form,c=k([]);d&&(d=d.replace(/'/g,"\\'"),c=b?k(b).find("[name='"+d+"']"):k("[name='"+d+"']",a.ownerDocument).filter(function(){return!this.form}));return c};k.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+
this.eventNamespace).bind("reset"+this.eventNamespace,g);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var f=this,d=this.options,b="checkbox"===this.type||"radio"===this.type,l=b?"":"ui-state-active";null===d.label&&(d.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);
this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){d.disabled||this===c&&k(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){d.disabled||k(this).removeClass(l)}).bind("click"+this.eventNamespace,function(a){d.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}});
b&&this.element.bind("change"+this.eventNamespace,function(){f.refresh()});"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(d.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(d.disabled)return!1;k(this).addClass("ui-state-active");f.buttonElement.attr("aria-pressed","true");var b=f.element[0];a(b).not(b).map(function(){return k(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",
"false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(d.disabled)return!1;k(this).addClass("ui-state-active");c=this;f.document.one("mouseup",function(){c=null})}).bind("mouseup"+this.eventNamespace,function(){if(d.disabled)return!1;k(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(a){if(d.disabled)return!1;a.keyCode!==k.ui.keyCode.SPACE&&a.keyCode!==k.ui.keyCode.ENTER||k(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+
" blur"+this.eventNamespace,function(){k(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===k.ui.keyCode.SPACE&&k(this).click()}));this._setOption("disabled",d.disabled);this._resetButton()},_determineButtonType:function(){this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if("checkbox"===this.type||"radio"===this.type){var a=
this.element.parents().last();var d="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(d);this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(d),this.buttonElement.length||(this.buttonElement=a.find(d)));this.element.addClass("ui-helper-hidden-accessible");(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");this.buttonElement.prop("aria-pressed",a)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},
_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-active ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,d){this._super(a,
d);"disabled"===a?(this.element.prop("disabled",!!d),d&&this.buttonElement.removeClass("ui-state-focus")):this._resetButton()},refresh:function(){var c=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");c!==this.options.disabled&&this._setOption("disabled",c);"radio"===this.type?a(this.element[0]).each(function(){k(this).is(":checked")?k(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):k(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",
"false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var a=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
d=k("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),b=this.options.icons,c=b.primary&&b.secondary,g=[];b.primary||b.secondary?(this.options.text&&g.push("ui-button-text-icon"+(c?"s":b.primary?"-primary":"-secondary")),b.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+b.primary+"'></span>"),b.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+b.secondary+"'></span>"),this.options.text||(g.push(c?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||a.attr("title",k.trim(d)))):g.push("ui-button-text-only");a.addClass(g.join(" "))}}});k.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,d){"disabled"===a&&this.buttons.button("option",a,d);this._super(a,d)},refresh:function(){var a=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return k(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return k(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);
(function(k,h){function c(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";
this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",
firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,
onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};k.extend(this._defaults,this.regional[""]);this.dpDiv=g(k("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function g(a){return a.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseout",function(){k(this).removeClass("ui-state-hover");
-1!==this.className.indexOf("ui-datepicker-prev")&&k(this).removeClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&k(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){k.datepicker._isDisabledDatepicker(f.inline?a.parent()[0]:f.input[0])||(k(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),k(this).addClass("ui-state-hover"),
-1!==this.className.indexOf("ui-datepicker-prev")&&k(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&k(this).addClass("ui-datepicker-next-hover"))})}function a(a,b){k.extend(a,b);for(var d in b)null==b[d]&&(a[d]=b[d]);return a}k.extend(k.ui,{datepicker:{version:"1.10.4"}});var f;k.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(d){a(this._defaults,d||{});return this},_attachDatepicker:function(a,
b){var d=a.nodeName.toLowerCase();var c="div"===d||"span"===d;a.id||(this.uuid+=1,a.id="dp"+this.uuid);var f=this._newInst(k(a),c);f.settings=k.extend({},b||{});"input"===d?this._connectDatepicker(a,f):c&&this._inlineDatepicker(a,f)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?g(k("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):
this.dpDiv}},_connectDatepicker:function(a,b){var d=k(a);b.append=k([]);b.trigger=k([]);d.hasClass(this.markerClassName)||(this._attachments(d,b),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(b),k.data(a,"datepicker",b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var d=this._get(b,"appendText");var c=this._get(b,"isRTL");b.append&&b.append.remove();d&&(b.append=k("<span class='"+this._appendClass+
"'>"+d+"</span>"),a[c?"before":"after"](b.append));a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();d=this._get(b,"showOn");"focus"!==d&&"both"!==d||a.focus(this._showDatepicker);if("button"===d||"both"===d){d=this._get(b,"buttonText");var f=this._get(b,"buttonImage");b.trigger=k(this._get(b,"buttonImageOnly")?k("<img/>").addClass(this._triggerClass).attr({src:f,alt:d,title:d}):k("<button type='button'></button>").addClass(this._triggerClass).html(f?k("<img/>").attr({src:f,alt:d,
title:d}):d));a[c?"before":"after"](b.trigger);b.trigger.click(function(){k.datepicker._datepickerShowing&&k.datepicker._lastInput===a[0]?k.datepicker._hideDatepicker():(k.datepicker._datepickerShowing&&k.datepicker._lastInput!==a[0]&&k.datepicker._hideDatepicker(),k.datepicker._showDatepicker(a[0]));return!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,d,c,f=new Date(2009,11,20),g=this._get(a,"dateFormat");if(g.match(/[DM]/)){var h=function(a){for(c=d=b=0;c<a.length;c++)a[c].length>
b&&(b=a[c].length,d=c);return d};f.setMonth(h(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort")));f.setDate(h(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())}a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(a,b){var d=k(a);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(b.dpDiv),k.data(a,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&
this._disableDatepicker(a),b.dpDiv.css("display","block"))},_dialogDatepicker:function(d,b,c,f,g){d=this._dialogInst;d||(this.uuid+=1,d="dp"+this.uuid,this._dialogInput=k("<input type='text' id='"+d+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),k("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},k.data(this._dialogInput[0],"datepicker",d));a(d.settings,f||{});b=b&&b.constructor===Date?this._formatDate(d,
b):b;this._dialogInput.val(b);this._pos=g?g.length?g:[g.pageX,g.pageY]:null;if(!this._pos){b=document.documentElement.clientWidth;f=document.documentElement.clientHeight;g=document.documentElement.scrollLeft||document.body.scrollLeft;var l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[b/2-100+g,f/2-150+l]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");d.settings.onSelect=c;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);
k.blockUI&&k.blockUI(this.dpDiv);k.data(this._dialogInput[0],"datepicker",d);return this},_destroyDatepicker:function(a){var b=k(a),d=k.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var c=a.nodeName.toLowerCase();k.removeData(a,"datepicker");"input"===c?(d.append.remove(),d.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==c&&"span"!==c||
b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=k(a),d=k.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var c=a.nodeName.toLowerCase();if("input"===c)a.disabled=!1,d.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"===c||"span"===c)c=b.children("."+this._inlineClass),c.children().removeClass("ui-state-disabled"),c.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!1);this._disabledInputs=k.map(this._disabledInputs,function(b){return b===a?null:b})}},_disableDatepicker:function(a){var b=k(a),d=k.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var c=a.nodeName.toLowerCase();if("input"===c)a.disabled=!0,d.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"===c||"span"===c)c=b.children("."+this._inlineClass),c.children().addClass("ui-state-disabled"),c.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=k.map(this._disabledInputs,function(b){return b===a?null:b});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(a){try{return k.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(d,b,c){var f=this._getInst(d);if(2===arguments.length&&"string"===typeof b)return"defaults"===
b?k.extend({},k.datepicker._defaults):f?"all"===b?k.extend({},f.settings):this._get(f,b):null;var g=b||{};"string"===typeof b&&(g={},g[b]=c);if(f){this._curInst===f&&this._hideDatepicker();var l=this._getDateDatepicker(d,!0);var w=this._getMinMaxDate(f,"min");var z=this._getMinMaxDate(f,"max");a(f.settings,g);null!==w&&g.dateFormat!==h&&g.minDate===h&&(f.settings.minDate=this._formatDate(f,w));null!==z&&g.dateFormat!==h&&g.maxDate===h&&(f.settings.maxDate=this._formatDate(f,z));"disabled"in g&&(g.disabled?
this._disableDatepicker(d):this._enableDatepicker(d));this._attachments(k(d),f);this._autoSize(f);this._setDate(f,l);this._updateAlternate(f);this._updateDatepicker(f)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a))this._setDate(a,b),this._updateDatepicker(a),this._updateAlternate(a)},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&
this._setDateFromField(a,b);return a?this._getDate(a):null},_doKeyDown:function(a){var b=k.datepicker._getInst(a.target);var d=!0;var c=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if(k.datepicker._datepickerShowing)switch(a.keyCode){case 9:k.datepicker._hideDatepicker();d=!1;break;case 13:return d=k("td."+k.datepicker._dayOverClass+":not(."+k.datepicker._currentClass+")",b.dpDiv),d[0]&&k.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,d[0]),(a=k.datepicker._get(b,"onSelect"))?(d=
k.datepicker._formatDate(b),a.apply(b.input?b.input[0]:null,[d,b])):k.datepicker._hideDatepicker(),!1;case 27:k.datepicker._hideDatepicker();break;case 33:k.datepicker._adjustDate(a.target,a.ctrlKey?-k.datepicker._get(b,"stepBigMonths"):-k.datepicker._get(b,"stepMonths"),"M");break;case 34:k.datepicker._adjustDate(a.target,a.ctrlKey?+k.datepicker._get(b,"stepBigMonths"):+k.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&k.datepicker._clearDate(a.target);d=a.ctrlKey||a.metaKey;
break;case 36:(a.ctrlKey||a.metaKey)&&k.datepicker._gotoToday(a.target);d=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&k.datepicker._adjustDate(a.target,c?1:-1,"D");d=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&k.datepicker._adjustDate(a.target,a.ctrlKey?-k.datepicker._get(b,"stepBigMonths"):-k.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&k.datepicker._adjustDate(a.target,-7,"D");d=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&k.datepicker._adjustDate(a.target,
c?-1:1,"D");d=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&k.datepicker._adjustDate(a.target,a.ctrlKey?+k.datepicker._get(b,"stepBigMonths"):+k.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&k.datepicker._adjustDate(a.target,7,"D");d=a.ctrlKey||a.metaKey;break;default:d=!1}else 36===a.keyCode&&a.ctrlKey?k.datepicker._showDatepicker(this):d=!1;d&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=k.datepicker._getInst(a.target);if(k.datepicker._get(b,
"constrainInput")){b=k.datepicker._possibleChars(k.datepicker._get(b,"dateFormat"));var d=String.fromCharCode(null==a.charCode?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">d||!b||-1<b.indexOf(d)}},_doKeyUp:function(a){var b;a=k.datepicker._getInst(a.target);if(a.input.val()!==a.lastVal)try{if(b=k.datepicker.parseDate(k.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,k.datepicker._getFormatConfig(a)))k.datepicker._setDateFromField(a),k.datepicker._updateAlternate(a),k.datepicker._updateDatepicker(a)}catch(l){}return!0},
_showDatepicker:function(d){d=d.target||d;"input"!==d.nodeName.toLowerCase()&&(d=k("input",d.parentNode)[0]);if(!k.datepicker._isDisabledDatepicker(d)&&k.datepicker._lastInput!==d){var b=k.datepicker._getInst(d);k.datepicker._curInst&&k.datepicker._curInst!==b&&(k.datepicker._curInst.dpDiv.stop(!0,!0),b&&k.datepicker._datepickerShowing&&k.datepicker._hideDatepicker(k.datepicker._curInst.input[0]));var c=(c=k.datepicker._get(b,"beforeShow"))?c.apply(d,[d,b]):{};if(!1!==c){a(b.settings,c);b.lastVal=
null;k.datepicker._lastInput=d;k.datepicker._setDateFromField(b);k.datepicker._inDialog&&(d.value="");k.datepicker._pos||(k.datepicker._pos=k.datepicker._findPos(d),k.datepicker._pos[1]+=d.offsetHeight);var f=!1;k(d).parents().each(function(){f|="fixed"===k(this).css("position");return!f});c={left:k.datepicker._pos[0],top:k.datepicker._pos[1]};k.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});k.datepicker._updateDatepicker(b);c=k.datepicker._checkOffset(b,
c,f);b.dpDiv.css({position:k.datepicker._inDialog&&k.blockUI?"static":f?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){c=k.datepicker._get(b,"showAnim");var g=k.datepicker._get(b,"duration");b.dpDiv.zIndex(k(d).zIndex()+1);k.datepicker._datepickerShowing=!0;if(k.effects&&k.effects.effect[c])b.dpDiv.show(c,k.datepicker._get(b,"showOptions"),g);else b.dpDiv[c||"show"](c?g:null);k.datepicker._shouldFocusInput(b)&&b.input.focus();k.datepicker._curInst=b}}}},_updateDatepicker:function(a){this.maxRows=
4;f=a;a.dpDiv.empty().append(this._generateHTML(a));this._attachHandlers(a);a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var b=this._getNumberOfMonths(a),d=b[1];a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<d&&a.dpDiv.addClass("ui-datepicker-multi-"+d).css("width",17*d+"em");a.dpDiv[(1!==b[0]||1!==b[1]?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a===k.datepicker._curInst&&
k.datepicker._datepickerShowing&&k.datepicker._shouldFocusInput(a)&&a.input.focus();if(a.yearshtml){var c=a.yearshtml;setTimeout(function(){c===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);c=a.yearshtml=null},0)}},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),g=a.input?a.input.outerWidth():0,l=
a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+(c?0:k(document).scrollLeft()),v=document.documentElement.clientHeight+(c?0:k(document).scrollTop());b.left-=this._get(a,"isRTL")?d-g:0;b.left-=c&&b.left===a.input.offset().left?k(document).scrollLeft():0;b.top-=c&&b.top===a.input.offset().top+l?k(document).scrollTop():0;b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0);b.top-=Math.min(b.top,b.top+f>v&&v>f?Math.abs(f+l):0);return b},_findPos:function(a){var b=this._getInst(a);
for(b=this._get(b,"isRTL");a&&("hidden"===a.type||1!==a.nodeType||k.expr.filters.hidden(a));)a=a[b?"previousSibling":"nextSibling"];a=k(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&(!a||b===k.data(a,"datepicker"))&&this._datepickerShowing){a=this._get(b,"showAnim");var d=this._get(b,"duration");var c=function(){k.datepicker._tidyDialog(b)};if(k.effects&&(k.effects.effect[a]||k.effects[a]))b.dpDiv.hide(a,k.datepicker._get(b,"showOptions"),d,c);else b.dpDiv["slideDown"===
a?"slideUp":"fadeIn"===a?"fadeOut":"hide"](a?d:null,c);a||c();this._datepickerShowing=!1;(a=this._get(b,"onClose"))&&a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),k.blockUI&&(k.unblockUI(),k("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(k.datepicker._curInst){a=
k(a.target);var b=k.datepicker._getInst(a[0]);(!(a[0].id===k.datepicker._mainDivId||0!==a.parents("#"+k.datepicker._mainDivId).length||a.hasClass(k.datepicker.markerClassName)||a.closest("."+k.datepicker._triggerClass).length||!k.datepicker._datepickerShowing||k.datepicker._inDialog&&k.blockUI)||a.hasClass(k.datepicker.markerClassName)&&k.datepicker._curInst!==b)&&k.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){a=k(a);var d=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(d,
b+("M"===c?this._get(d,"showCurrentAtPos"):0),c),this._updateDatepicker(d))},_gotoToday:function(a){var b=k(a),d=this._getInst(b[0]);this._get(d,"gotoCurrent")&&d.currentDay?(d.selectedDay=d.currentDay,d.drawMonth=d.selectedMonth=d.currentMonth,d.drawYear=d.selectedYear=d.currentYear):(a=new Date,d.selectedDay=a.getDate(),d.drawMonth=d.selectedMonth=a.getMonth(),d.drawYear=d.selectedYear=a.getFullYear());this._notifyChange(d);this._adjustDate(b)},_selectMonthYear:function(a,b,c){a=k(a);var d=this._getInst(a[0]);
d["selected"+("M"===c?"Month":"Year")]=d["draw"+("M"===c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(d);this._adjustDate(a)},_selectDay:function(a,b,c,f){var d=k(a);k(f).hasClass(this._unselectableClass)||this._isDisabledDatepicker(d[0])||(d=this._getInst(d[0]),d.selectedDay=d.currentDay=k("a",f).html(),d.selectedMonth=d.currentMonth=b,d.selectedYear=d.currentYear=c,this._selectDate(a,this._formatDate(d,d.currentDay,d.currentMonth,d.currentYear)))},_clearDate:function(a){a=
k(a);this._selectDate(a,"")},_selectDate:function(a,b){a=k(a);var d=this._getInst(a[0]);b=null!=b?b:this._formatDate(d);d.input&&d.input.val(b);this._updateAlternate(d);(a=this._get(d,"onSelect"))?a.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change");d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!==typeof d.input[0]&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var d=this._get(a,
"altFormat")||this._get(a,"dateFormat");var c=this._getDate(a);var f=this.formatDate(d,c,this._getFormatConfig(a));k(b).each(function(){k(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));a=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((a-b)/864E5)/7)+1},parseDate:function(a,b,c){if(null==a||null==b)throw"Invalid arguments";b="object"===typeof b?b.toString():b+
"";if(""===b)return null;var d,f=0;var g=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;g="string"!==typeof g?g:(new Date).getFullYear()%100+parseInt(g,10);var l=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort;var h=(c?c.dayNames:null)||this._defaults.dayNames,v=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,t=(c?c.monthNames:null)||this._defaults.monthNames,q=c=-1,y=-1,A=-1,C=!1,G=function(e){(e=d+1<a.length&&a.charAt(d+1)===e)&&d++;return e},E=function(a){var e=G(a);
a=new RegExp("^\\d{1,"+("@"===a?14:"!"===a?20:"y"===a&&e?4:"o"===a?3:2)+"}");a=b.substring(f).match(a);if(!a)throw"Missing number at position "+f;f+=a[0].length;return parseInt(a[0],10)},F=function(a,e,d){var c=-1;a=k.map(G(a)?d:e,function(a,e){return[[e,a]]}).sort(function(a,e){return-(a[1].length-e[1].length)});k.each(a,function(a,e){a=e[1];if(b.substr(f,a.length).toLowerCase()===a.toLowerCase())return c=e[0],f+=a.length,!1});if(-1!==c)return c+1;throw"Unknown name at position "+f;},I=function(){if(b.charAt(f)!==
a.charAt(d))throw"Unexpected literal at position "+f;f++};for(d=0;d<a.length;d++)if(C)"'"!==a.charAt(d)||G("'")?I():C=!1;else switch(a.charAt(d)){case "d":y=E("d");break;case "D":F("D",l,h);break;case "o":A=E("o");break;case "m":q=E("m");break;case "M":q=F("M",v,t);break;case "y":c=E("y");break;case "@":var e=new Date(E("@"));c=e.getFullYear();q=e.getMonth()+1;y=e.getDate();break;case "!":e=new Date((E("!")-this._ticksTo1970)/1E4);c=e.getFullYear();q=e.getMonth()+1;y=e.getDate();break;case "'":G("'")?
I():C=!0;break;default:I()}if(f<b.length&&(l=b.substr(f),!/^\s+/.test(l)))throw"Extra/unparsed characters found in date: "+l;-1===c?c=(new Date).getFullYear():100>c&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=g?0:-100));if(-1<A){q=1;y=A;do{g=this._getDaysInMonth(c,q-1);if(y<=g)break;q++;y-=g}while(1)}e=this._daylightSavingAdjust(new Date(c,q-1,y));if(e.getFullYear()!==c||e.getMonth()+1!==q||e.getDate()!==y)throw"Invalid date";return e},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d,f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,g=(c?c.dayNames:null)||this._defaults.dayNames,l=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;
var h=function(b){(b=d+1<a.length&&a.charAt(d+1)===b)&&d++;return b},k=function(a,b,d){b=""+b;if(h(a))for(;b.length<d;)b="0"+b;return b},t=function(a,b,d,c){return h(a)?c[b]:d[b]},q="",y=!1;if(b)for(d=0;d<a.length;d++)if(y)"'"!==a.charAt(d)||h("'")?q+=a.charAt(d):y=!1;else switch(a.charAt(d)){case "d":q+=k("d",b.getDate(),2);break;case "D":q+=t("D",b.getDay(),f,g);break;case "o":q+=k("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/
864E5),3);break;case "m":q+=k("m",b.getMonth()+1,2);break;case "M":q+=t("M",b.getMonth(),l,c);break;case "y":q+=h("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":q+=b.getTime();break;case "!":q+=1E4*b.getTime()+this._ticksTo1970;break;case "'":h("'")?q+="'":y=!0;break;default:q+=a.charAt(d)}return q},_possibleChars:function(a){var b,d="",c=!1,f=function(d){(d=b+1<a.length&&a.charAt(b+1)===d)&&b++;return d};for(b=0;b<a.length;b++)if(c)"'"!==a.charAt(b)||f("'")?d+=a.charAt(b):
c=!1;else switch(a.charAt(b)){case "d":case "m":case "y":case "@":d+="0123456789";break;case "D":case "M":return null;case "'":f("'")?d+="'":c=!0;break;default:d+=a.charAt(b)}return d},_get:function(a,b){return a.settings[b]!==h?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var d=this._get(a,"dateFormat"),c=a.lastVal=a.input?a.input.val():null,f=this._getDefaultDate(a),g=f,h=this._getFormatConfig(a);try{g=this.parseDate(d,c,h)||f}catch(z){c=b?"":c}a.selectedDay=
g.getDate();a.drawMonth=a.selectedMonth=g.getMonth();a.drawYear=a.selectedYear=g.getFullYear();a.currentDay=c?g.getDate():0;a.currentMonth=c?g.getMonth():0;a.currentYear=c?g.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},f=function(b){try{return k.datepicker.parseDate(k.datepicker._get(a,
"dateFormat"),b,k.datepicker._getFormatConfig(a))}catch(y){}var d=(b.toLowerCase().match(/^c/)?k.datepicker._getDate(a):null)||new Date,c=d.getFullYear(),f=d.getMonth();d=d.getDate();for(var g=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=g.exec(b);l;){switch(l[2]||"d"){case "d":case "D":d+=parseInt(l[1],10);break;case "w":case "W":d+=7*parseInt(l[1],10);break;case "m":case "M":f+=parseInt(l[1],10);d=Math.min(d,k.datepicker._getDaysInMonth(c,f));break;case "y":case "Y":c+=parseInt(l[1],10),d=Math.min(d,
k.datepicker._getDaysInMonth(c,f))}l=g.exec(b)}return new Date(c,f,d)};if(b=(b=null==b||""===b?c:"string"===typeof b?f(b):"number"===typeof b?isNaN(b)?c:d(b):new Date(b.getTime()))&&"Invalid Date"===b.toString()?c:b)b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,b,c){var d=!b,f=a.selectedMonth,g=a.selectedYear;b=this._restrictMinMax(a,
this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();f===a.selectedMonth&&g===a.selectedYear||c||this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(a){var b=
this._get(a,"stepMonths"),d="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){k(this).bind(this.getAttribute("data-event"),{prev:function(){k.datepicker._adjustDate(d,-b,"M")},next:function(){k.datepicker._adjustDate(d,+b,"M")},hide:function(){k.datepicker._hideDatepicker()},today:function(){k.datepicker._gotoToday(d)},selectDay:function(){k.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function(){k.datepicker._selectMonthYear(d,
this,"M");return!1},selectYear:function(){k.datepicker._selectMonthYear(d,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,d,c,f,g=new Date;g=this._daylightSavingAdjust(new Date(g.getFullYear(),g.getMonth(),g.getDate()));var h=this._get(a,"isRTL");var k=this._get(a,"showButtonPanel");var v=this._get(a,"hideIfNoPrevNext");var t=this._get(a,"navigationAsDateFormat");var q=this._getNumberOfMonths(a),y=this._get(a,"showCurrentAtPos");var A=this._get(a,"stepMonths");
var C=1!==q[0]||1!==q[1],G=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),E=this._getMinMaxDate(a,"min"),F=this._getMinMaxDate(a,"max");y=a.drawMonth-y;var I=a.drawYear;0>y&&(y+=12,I--);if(F){var e=this._daylightSavingAdjust(new Date(F.getFullYear(),F.getMonth()-q[0]*q[1]+1,F.getDate()));for(e=E&&e<E?E:e;this._daylightSavingAdjust(new Date(I,y,1))>e;)y--,0>y&&(y=11,I--)}a.drawMonth=y;a.drawYear=I;e=this._get(a,"prevText");e=t?this.formatDate(e,
this._daylightSavingAdjust(new Date(I,y-A,1)),this._getFormatConfig(a)):e;e=this._canAdjustMonth(a,-1,I,y)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(h?"e":"w")+"'>"+e+"</span></a>":v?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(h?"e":"w")+"'>"+e+"</span></a>";var m=this._get(a,"nextText");m=t?this.formatDate(m,this._daylightSavingAdjust(new Date(I,
y+A,1)),this._getFormatConfig(a)):m;v=this._canAdjustMonth(a,1,I,y)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+m+"'><span class='ui-icon ui-icon-circle-triangle-"+(h?"w":"e")+"'>"+m+"</span></a>":v?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+m+"'><span class='ui-icon ui-icon-circle-triangle-"+(h?"w":"e")+"'>"+m+"</span></a>";A=this._get(a,"currentText");m=this._get(a,"gotoCurrent")&&a.currentDay?G:g;A=t?this.formatDate(A,
m,this._getFormatConfig(a)):A;t=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>";k=k?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(h?t:"")+(this._isInRange(a,m)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+A+"</button>":"")+(h?"":t)+"</div>":
"";t=parseInt(this._get(a,"firstDay"),10);t=isNaN(t)?0:t;A=this._get(a,"showWeek");m=this._get(a,"dayNames");var x=this._get(a,"dayNamesMin");var D=this._get(a,"monthNames");var H=this._get(a,"monthNamesShort");var N=this._get(a,"beforeShowDay");var ka=this._get(a,"showOtherMonths");var aa=this._get(a,"selectOtherMonths");var Aa=this._getDefaultDate(a);var fa="";M;for(b=0;b<q[0];b++){var R="";this.maxRows=4;for(d=0;d<q[1];d++){var X=this._daylightSavingAdjust(new Date(I,y,a.selectedDay));var M=" ui-corner-all";
var ba="";if(C){ba+="<div class='ui-datepicker-group";if(1<q[1])switch(d){case 0:ba+=" ui-datepicker-group-first";M=" ui-corner-"+(h?"right":"left");break;case q[1]-1:ba+=" ui-datepicker-group-last";M=" ui-corner-"+(h?"left":"right");break;default:ba+=" ui-datepicker-group-middle",M=""}ba+="'>"}ba+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+M+"'>"+(/all|left/.test(M)&&0===b?h?v:e:"")+(/all|right/.test(M)&&0===b?h?e:v:"")+this._generateMonthYearHeader(a,y,I,E,F,0<b||0<d,
D,H)+"</div><table class='ui-datepicker-calendar'><thead><tr>";var ja=A?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"";for(M=0;7>M;M++){var ca=(M+t)%7;ja+="<th"+(5<=(M+t+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+m[ca]+"'>"+x[ca]+"</span></th>"}ba+=ja+"</tr></thead><tbody>";ja=this._getDaysInMonth(I,y);I===a.selectedYear&&y===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,ja));M=(this._getFirstDayOfMonth(I,y)-t+7)%7;ja=Math.ceil((M+ja)/7);this.maxRows=
ja=C?this.maxRows>ja?this.maxRows:ja:ja;ca=this._daylightSavingAdjust(new Date(I,y,1-M));for(c=0;c<ja;c++){ba+="<tr>";var S=A?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(ca)+"</td>":"";for(M=0;7>M;M++){var oa=N?N.apply(a.input?a.input[0]:null,[ca]):[!0,""];var Ba=(f=ca.getMonth()!==y)&&!aa||!oa[0]||E&&ca<E||F&&ca>F;S+="<td class='"+(5<=(M+t+6)%7?" ui-datepicker-week-end":"")+(f?" ui-datepicker-other-month":"")+(ca.getTime()===X.getTime()&&y===a.selectedMonth&&a._keyEvent||Aa.getTime()===
ca.getTime()&&Aa.getTime()===X.getTime()?" "+this._dayOverClass:"")+(Ba?" "+this._unselectableClass+" ui-state-disabled":"")+(f&&!ka?"":" "+oa[1]+(ca.getTime()===G.getTime()?" "+this._currentClass:"")+(ca.getTime()===g.getTime()?" ui-datepicker-today":""))+"'"+(f&&!ka||!oa[2]?"":" title='"+oa[2].replace(/'/g,"&#39;")+"'")+(Ba?"":" data-handler='selectDay' data-event='click' data-month='"+ca.getMonth()+"' data-year='"+ca.getFullYear()+"'")+">"+(f&&!ka?"&#xa0;":Ba?"<span class='ui-state-default'>"+
ca.getDate()+"</span>":"<a class='ui-state-default"+(ca.getTime()===g.getTime()?" ui-state-highlight":"")+(ca.getTime()===G.getTime()?" ui-state-active":"")+(f?" ui-priority-secondary":"")+"' href='#'>"+ca.getDate()+"</a>")+"</td>";ca.setDate(ca.getDate()+1);ca=this._daylightSavingAdjust(ca)}ba+=S+"</tr>"}y++;11<y&&(y=0,I++);ba+="</tbody></table>"+(C?"</div>"+(0<q[0]&&d===q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");R+=ba}fa+=R}a._keyEvent=!1;return fa+k},_generateMonthYearHeader:function(a,
b,c,f,g,h,k,z){var d,l=this._get(a,"changeMonth"),n=this._get(a,"changeYear"),p=this._get(a,"showMonthAfterYear"),r="<div class='ui-datepicker-title'>",w="";if(h||!l)w+="<span class='ui-datepicker-month'>"+k[b]+"</span>";else{k=f&&f.getFullYear()===c;var G=g&&g.getFullYear()===c;w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(d=0;12>d;d++)(!k||d>=f.getMonth())&&(!G||d<=g.getMonth())&&(w+="<option value='"+d+"'"+(d===b?" selected='selected'":"")+">"+z[d]+
"</option>");w+="</select>"}p||(r+=w+(!h&&l&&n?"":"&#xa0;"));if(!a.yearshtml)if(a.yearshtml="",h||!n)r+="<span class='ui-datepicker-year'>"+c+"</span>";else{z=this._get(a,"yearRange").split(":");var E=(new Date).getFullYear();k=function(a){a=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?E+parseInt(a,10):parseInt(a,10);return isNaN(a)?E:a};b=k(z[0]);z=Math.max(b,k(z[1]||""));b=f?Math.max(b,f.getFullYear()):b;z=g?Math.min(z,g.getFullYear()):z;for(a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";b<=
z;b++)a.yearshtml+="<option value='"+b+"'"+(b===c?" selected='selected'":"")+">"+b+"</option>";a.yearshtml+="</select>";r+=a.yearshtml;a.yearshtml=null}r+=this._get(a,"yearSuffix");p&&(r+=(!h&&l&&n?"":"&#xa0;")+w);return r+"</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),f=a.drawMonth+("M"===c?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(d,f))+("D"===c?b:0);d=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,f,b)));a.selectedDay=d.getDate();a.drawMonth=a.selectedMonth=
d.getMonth();a.drawYear=a.selectedYear=d.getFullYear();"M"!==c&&"Y"!==c||this._notifyChange(a)},_restrictMinMax:function(a,b){var d=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=d&&b<d?d:b;return a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return null==a?[1,1]:"number"===typeof a?[1,a]:a},_getMinMaxDate:function(a,
b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,f){var d=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,f+(0>b?b:d[0]*d[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var d=this._getMinMaxDate(a,
"min"),c=this._getMinMaxDate(a,"max"),f=null,g=null;if(a=this._get(a,"yearRange")){a=a.split(":");var h=(new Date).getFullYear();f=parseInt(a[0],10);g=parseInt(a[1],10);a[0].match(/[+\-].*/)&&(f+=h);a[1].match(/[+\-].*/)&&(g+=h)}return(!d||b.getTime()>=d.getTime())&&(!c||b.getTime()<=c.getTime())&&(!f||b.getFullYear()>=f)&&(!g||b.getFullYear()<=g)},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b="string"!==typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,
dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,f){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"===typeof b?b:this._daylightSavingAdjust(new Date(f,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});
k.fn.datepicker=function(a){if(!this.length)return this;k.datepicker.initialized||(k(document).mousedown(k.datepicker._checkExternalClick),k.datepicker.initialized=!0);0===k("#"+k.datepicker._mainDivId).length&&k("body").append(k.datepicker.dpDiv);var b=Array.prototype.slice.call(arguments,1);return"string"===typeof a&&("isDisabled"===a||"getDate"===a||"widget"===a)||"option"===a&&2===arguments.length&&"string"===typeof arguments[1]?k.datepicker["_"+a+"Datepicker"].apply(k.datepicker,[this[0]].concat(b)):
this.each(function(){"string"===typeof a?k.datepicker["_"+a+"Datepicker"].apply(k.datepicker,[this].concat(b)):k.datepicker._attachDatepicker(this,a)})};k.datepicker=new c;k.datepicker.initialized=!1;k.datepicker.uuid=(new Date).getTime();k.datepicker.version="1.10.4"})(jQuery);
(function(k,h){var c={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},g={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};k.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(a){var c=k(this).css(a).offset().top;
0>c&&k(this).css("top",a.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};
this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();this.options.draggable&&k.fn.draggable&&this._makeDraggable();this.options.resizable&&k.fn.resizable&&this._makeResizable();this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var a=
this.options.appendTo;return a&&(a.jquery||a.nodeType)?k(a):this.document.find(a||"body").eq(0)},_destroy:function(){var a=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(!0,!0).remove();this.originalTitle&&this.element.attr("title",this.originalTitle);var c=a.parent.children().eq(a.index);c.length&&c[0]!==this.element[0]?c.before(this.element):a.parent.append(this.element)},
widget:function(){return this.uiDialog},disable:k.noop,enable:k.noop,close:function(a){var c,d=this;if(this._isOpen&&!1!==this._trigger("beforeClose",a)){this._isOpen=!1;this._destroyOverlay();if(!this.opener.filter(":focusable").focus().length)try{(c=this.document[0].activeElement)&&"body"!==c.nodeName.toLowerCase()&&k(c).blur()}catch(b){}this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",a)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},
_moveToTop:function(a,c){var d=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;d&&!c&&this._trigger("focus",a);return d},open:function(){var a=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=k(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){a._focusTabbable();a._trigger("focus")}),this._trigger("open"))},_focusTabbable:function(){var a=
this.element.find("[autofocus]");a.length||(a=this.element.find(":tabbable"));a.length||(a=this.uiDialogButtonPane.find(":tabbable"));a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable"));a.length||(a=this.uiDialog);a.eq(0).focus()},_keepFocus:function(a){function c(){var a=this.document[0].activeElement;this.uiDialog[0]===a||k.contains(this.uiDialog[0],a)||this._focusTabbable()}a.preventDefault();c.call(this);this._delay(c)},_createWrapper:function(){this.uiDialog=k("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+
this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(a){if(this.options.closeOnEscape&&!a.isDefaultPrevented()&&a.keyCode&&a.keyCode===k.ui.keyCode.ESCAPE)a.preventDefault(),this.close(a);else if(a.keyCode===k.ui.keyCode.TAB){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first");c=c.filter(":last");a.target!==c[0]&&a.target!==this.uiDialog[0]||a.shiftKey?a.target!==d[0]&&a.target!==this.uiDialog[0]||!a.shiftKey||
(c.focus(1),a.preventDefault()):(d.focus(1),a.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){this.uiDialogTitlebar=k("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(a){k(a.target).closest(".ui-dialog-titlebar-close")||
this.uiDialog.focus()}});this.uiDialogTitlebarClose=k("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault();this.close(a)}});var a=k("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);this._title(a);this.uiDialog.attr({"aria-labelledby":a.attr("id")})},_title:function(a){this.options.title||
a.html("&#160;");a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=k("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=k("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var a=this,c=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();k.isEmptyObject(c)||k.isArray(c)&&!c.length?this.uiDialog.removeClass("ui-dialog-buttons"):
(k.each(c,function(c,b){b=k.isFunction(b)?{click:b,text:c}:b;b=k.extend({type:"button"},b);var d=b.click;b.click=function(){d.apply(a.element[0],arguments)};c={icons:b.icons,text:b.showText};delete b.icons;delete b.showText;k("<button></button>",b).button(c).appendTo(a.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function a(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",
handle:".ui-dialog-titlebar",containment:"document",start:function(b,d){k(this).addClass("ui-dialog-dragging");c._blockFrames();c._trigger("dragStart",b,a(d))},drag:function(b,d){c._trigger("drag",b,a(d))},stop:function(b,f){d.position=[f.position.left-c.document.scrollLeft(),f.position.top-c.document.scrollTop()];k(this).removeClass("ui-dialog-dragging");c._unblockFrames();c._trigger("dragStop",b,a(f))}})},_makeResizable:function(){function a(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,
position:a.position,size:a.size}}var c=this,d=this.options,b=d.resizable,g=this.uiDialog.css("position");b="string"===typeof b?b:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:b,start:function(b,d){k(this).addClass("ui-dialog-resizing");c._blockFrames();c._trigger("resizeStart",b,a(d))},resize:function(b,d){c._trigger("resize",
b,a(d))},stop:function(b,f){d.height=k(this).height();d.width=k(this).width();k(this).removeClass("ui-dialog-resizing");c._unblockFrames();c._trigger("resizeStop",b,a(f))}}).css("position",g)},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show();this.uiDialog.position(this.options.position);a||this.uiDialog.hide()},_setOptions:function(a){var f=this,d=!1,b={};k.each(a,
function(a,h){f._setOption(a,h);a in c&&(d=!0);a in g&&(b[a]=h)});d&&(this._size(),this._position());this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",b)},_setOption:function(a,c){var d,b=this.uiDialog;"dialogClass"===a&&b.removeClass(this.options.dialogClass).addClass(c);"disabled"!==a&&(this._super(a,c),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+c}),"draggable"===
a&&((d=b.is(":data(ui-draggable)"))&&!c&&b.draggable("destroy"),!d&&c&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&((d=b.is(":data(ui-resizable)"))&&!c&&b.resizable("destroy"),d&&"string"===typeof c&&b.resizable("option","handles",c),d||!1===c||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});a.minWidth>a.width&&
(a.width=a.minWidth);var c=this.uiDialog.css({height:"auto",width:a.width}).outerHeight();var d=Math.max(0,a.minHeight-c);var b="number"===typeof a.maxHeight?Math.max(0,a.maxHeight-c):"none";"auto"===a.height?this.element.css({minHeight:d,maxHeight:b,height:"auto"}):this.element.height(Math.max(0,a.height-c));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var a=
k(this);return k("<div>").css({position:"absolute",width:a.outerWidth(),height:a.outerHeight()}).appendTo(a.parent()).offset(a.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(a){return k(a.target).closest(".ui-dialog").length?!0:!!k(a.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var a=this,c=this.widgetFullName;k.ui.dialog.overlayInstances||this._delay(function(){k.ui.dialog.overlayInstances&&
this.document.bind("focusin.dialog",function(d){a._allowInteraction(d)||(d.preventDefault(),k(".ui-dialog:visible:last .ui-dialog-content").data(c)._focusTabbable())})});this.overlay=k("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});k.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(k.ui.dialog.overlayInstances--,k.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),
this.overlay.remove(),this.overlay=null)}});k.ui.dialog.overlayInstances=0;!1!==k.uiBackCompat&&k.widget("ui.dialog",k.ui.dialog,{_position:function(){var a=this.options.position,c=[],d=[0,0],b;if(a){if("string"===typeof a||"object"===typeof a&&"0"in a)c=a.split?a.split(" "):[a[0],a[1]],1===c.length&&(c[1]=c[0]),k.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),a={my:c[0]+(0>d[0]?d[0]:"+"+d[0])+" "+c[1]+(0>d[1]?d[1]:"+"+d[1]),at:c.join(" ")};a=k.extend({},k.ui.dialog.prototype.options.position,
a)}else a=k.ui.dialog.prototype.options.position;(b=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.position(a);b||this.uiDialog.hide()}})})(jQuery);
(function(k,h){var c=/up|down|vertical/,g=/up|left|vertical|horizontal/;k.effects.effect.blind=function(a,f){var d=k(this),b="position top bottom left right height width".split(" "),l=k.effects.setMode(d,a.mode||"hide"),h=a.direction||"up",p=c.test(h),r=p?"height":"width",w=p?"top":"left";h=g.test(h);var z={},v="show"===l;d.parent().is(".ui-effects-wrapper")?k.effects.save(d.parent(),b):k.effects.save(d,b);d.show();var t=k.effects.createWrapper(d).css({overflow:"hidden"});var q=t[r]();var y=parseFloat(t.css(w))||
0;z[r]=v?q:0;h||(d.css(p?"bottom":"right",0).css(p?"top":"left","auto").css({position:"absolute"}),z[w]=v?y:q+y);v&&(t.css(r,0),h||t.css(w,y+q));t.animate(z,{duration:a.duration,easing:a.easing,queue:!1,complete:function(){"hide"===l&&d.hide();k.effects.restore(d,b);k.effects.removeWrapper(d);f()}})}})(jQuery);
(function(k,h){k.effects.effect.bounce=function(c,g){var a=k(this),f="position top bottom left right height width".split(" "),d=k.effects.setMode(a,c.mode||"effect"),b="hide"===d,l="show"===d,h=c.direction||"up";d=c.distance;var p=c.times||5,r=2*p+(l||b?1:0),w=c.duration/r;c=c.easing;var z="up"===h||"down"===h?"top":"left";h="up"===h||"left"===h;var v=a.queue(),t=v.length;(l||b)&&f.push("opacity");k.effects.save(a,f);a.show();k.effects.createWrapper(a);d||(d=a["top"===z?"outerHeight":"outerWidth"]()/
3);if(l){var q={opacity:1};q[z]=0;a.css("opacity",0).css(z,h?2*-d:2*d).animate(q,w,c)}b&&(d/=Math.pow(2,p-1));q={};for(l=q[z]=0;l<p;l++){var y={};y[z]=(h?"-=":"+=")+d;a.animate(y,w,c).animate(q,w,c);d=b?2*d:d/2}b&&(y={opacity:0},y[z]=(h?"-=":"+=")+d,a.animate(y,w,c));a.queue(function(){b&&a.hide();k.effects.restore(a,f);k.effects.removeWrapper(a);g()});1<t&&v.splice.apply(v,[1,0].concat(v.splice(t,r+1)));a.dequeue()}})(jQuery);
(function(k,h){k.effects.effect.clip=function(c,g){var a=k(this),f="position top bottom left right height width".split(" "),d="show"===k.effects.setMode(a,c.mode||"hide"),b="vertical"===(c.direction||"vertical"),l=b?"height":"width";b=b?"top":"left";var h={};k.effects.save(a,f);a.show();var p=k.effects.createWrapper(a).css({overflow:"hidden"});p="IMG"===a[0].tagName?p:a;var r=p[l]();d&&(p.css(l,0),p.css(b,r/2));h[l]=d?r:0;h[b]=d?0:r/2;p.animate(h,{queue:!1,duration:c.duration,easing:c.easing,complete:function(){d||
a.hide();k.effects.restore(a,f);k.effects.removeWrapper(a);g()}})}})(jQuery);
(function(k,h){k.effects.effect.drop=function(c,g){var a=k(this),f="position top bottom left right opacity height width".split(" "),d=k.effects.setMode(a,c.mode||"hide"),b="show"===d,l=c.direction||"left",h="up"===l||"down"===l?"top":"left";l="up"===l||"left"===l?"pos":"neg";var p={opacity:b?1:0};k.effects.save(a,f);a.show();k.effects.createWrapper(a);var r=c.distance||a["top"===h?"outerHeight":"outerWidth"](!0)/2;b&&a.css("opacity",0).css(h,"pos"===l?-r:r);p[h]=(b?"pos"===l?"+=":"-=":"pos"===l?"-=":
"+=")+r;a.animate(p,{queue:!1,duration:c.duration,easing:c.easing,complete:function(){"hide"===d&&a.hide();k.effects.restore(a,f);k.effects.removeWrapper(a);g()}})}})(jQuery);
(function(k,h){k.effects.effect.explode=function(c,g){function a(){w.push(this);w.length===f*d&&(b.css({visibility:"visible"}),k(w).remove(),l||b.hide(),g())}var f=c.pieces?Math.round(Math.sqrt(c.pieces)):3,d=f,b=k(this),l="show"===k.effects.setMode(b,c.mode||"hide"),h=b.show().css("visibility","hidden").offset(),p=Math.ceil(b.outerWidth()/d),r=Math.ceil(b.outerHeight()/f),w=[],z,v;for(z=0;z<f;z++){var t=h.top+z*r;var q=z-(f-1)/2;for(v=0;v<d;v++){var y=h.left+v*p;var A=v-(d-1)/2;b.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",
visibility:"visible",left:-v*p,top:-z*r}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p,height:r,left:y+(l?A*p:0),top:t+(l?q*r:0),opacity:l?0:1}).animate({left:y+(l?0:A*p),top:t+(l?0:q*r),opacity:l?1:0},c.duration||500,c.easing,a)}}}})(jQuery);(function(k,h){k.effects.effect.fade=function(c,g){var a=k(this),f=k.effects.setMode(a,c.mode||"toggle");a.animate({opacity:f},{queue:!1,duration:c.duration,easing:c.easing,complete:g})}})(jQuery);
(function(k,h){k.effects.effect.fold=function(c,g){var a=k(this),f="position top bottom left right height width".split(" "),d=k.effects.setMode(a,c.mode||"hide"),b="show"===d,l="hide"===d;d=c.size||15;var h=/([0-9]+)%/.exec(d),p=!!c.horizFirst,r=b!==p,w=r?["width","height"]:["height","width"],z=c.duration/2,v={},t={};k.effects.save(a,f);a.show();var q=k.effects.createWrapper(a).css({overflow:"hidden"});r=r?[q.width(),q.height()]:[q.height(),q.width()];h&&(d=parseInt(h[1],10)/100*r[l?0:1]);b&&q.css(p?
{height:0,width:d}:{height:d,width:0});v[w[0]]=b?r[0]:d;t[w[1]]=b?r[1]:0;q.animate(v,z,c.easing).animate(t,z,c.easing,function(){l&&a.hide();k.effects.restore(a,f);k.effects.removeWrapper(a);g()})}})(jQuery);
(function(k,h){k.effects.effect.highlight=function(c,g){var a=k(this),f=["backgroundImage","backgroundColor","opacity"],d=k.effects.setMode(a,c.mode||"show"),b={backgroundColor:a.css("backgroundColor")};"hide"===d&&(b.opacity=0);k.effects.save(a,f);a.show().css({backgroundImage:"none",backgroundColor:c.color||"#ffff99"}).animate(b,{queue:!1,duration:c.duration,easing:c.easing,complete:function(){"hide"===d&&a.hide();k.effects.restore(a,f);g()}})}})(jQuery);
(function(k,h){k.effects.effect.pulsate=function(c,g){var a=k(this),f=k.effects.setMode(a,c.mode||"show"),d="show"===f,b="hide"===f;f=2*(c.times||5)+(d||"hide"===f?1:0);var l=c.duration/f,h=0,p=a.queue(),r=p.length;if(d||!a.is(":visible"))a.css("opacity",0).show(),h=1;for(d=1;d<f;d++)a.animate({opacity:h},l,c.easing),h=1-h;a.animate({opacity:h},l,c.easing);a.queue(function(){b&&a.hide();g()});1<r&&p.splice.apply(p,[1,0].concat(p.splice(r,f+1)));a.dequeue()}})(jQuery);
(function(k,h){k.effects.effect.puff=function(c,g){var a=k(this),f=k.effects.setMode(a,c.mode||"hide"),d="hide"===f,b=parseInt(c.percent,10)||150,l=b/100,h={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()};k.extend(c,{effect:"scale",queue:!1,fade:!0,mode:f,complete:g,percent:d?b:100,from:d?h:{height:h.height*l,width:h.width*l,outerHeight:h.outerHeight*l,outerWidth:h.outerWidth*l}});a.effect(c)};k.effects.effect.scale=function(c,g){var a=k(this),f=k.extend(!0,
{},c),d=k.effects.setMode(a,c.mode||"effect"),b=parseInt(c.percent,10)||(0===parseInt(c.percent,10)?0:"hide"===d?0:100),l=c.direction||"both",h=c.origin,p={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},r="horizontal"!==l?b/100:1;b="vertical"!==l?b/100:1;f.effect="size";f.queue=!1;f.complete=g;"effect"!==d&&(f.origin=h||["middle","center"],f.restore=!0);f.from=c.from||("show"===d?{height:0,width:0,outerHeight:0,outerWidth:0}:p);f.to={height:p.height*r,width:p.width*
b,outerHeight:p.outerHeight*r,outerWidth:p.outerWidth*b};f.fade&&("show"===d&&(f.from.opacity=0,f.to.opacity=1),"hide"===d&&(f.from.opacity=1,f.to.opacity=0));a.effect(f)};k.effects.effect.size=function(c,g){var a=k(this),f="position top bottom left right width height overflow opacity".split(" ");var d="position top bottom left right overflow opacity".split(" ");var b=["width","height","overflow"],l=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],p=["borderLeftWidth",
"borderRightWidth","paddingLeft","paddingRight"],r=k.effects.setMode(a,c.mode||"effect"),w=c.restore||"effect"!==r,z=c.scale||"both";var v=c.origin||["middle","center"];var t=a.css("position"),q=w?f:d,y={height:0,width:0,outerHeight:0,outerWidth:0};"show"===r&&a.show();d={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()};"toggle"===c.mode&&"show"===r?(a.from=c.to||y,a.to=c.from||d):(a.from=c.from||("show"===r?y:d),a.to=c.to||("hide"===r?y:d));var A=a.from.height/
d.height;var C=a.from.width/d.width;var G=a.to.height/d.height;var E=a.to.width/d.width;if("box"===z||"both"===z)A!==G&&(q=q.concat(h),a.from=k.effects.setTransition(a,h,A,a.from),a.to=k.effects.setTransition(a,h,G,a.to)),C!==E&&(q=q.concat(p),a.from=k.effects.setTransition(a,p,C,a.from),a.to=k.effects.setTransition(a,p,E,a.to));"content"!==z&&"both"!==z||A===G||(q=q.concat(l).concat(b),a.from=k.effects.setTransition(a,l,A,a.from),a.to=k.effects.setTransition(a,l,G,a.to));k.effects.save(a,q);a.show();
k.effects.createWrapper(a);a.css("overflow","hidden").css(a.from);v&&(v=k.effects.getBaseline(v,d),a.from.top=(d.outerHeight-a.outerHeight())*v.y,a.from.left=(d.outerWidth-a.outerWidth())*v.x,a.to.top=(d.outerHeight-a.to.outerHeight)*v.y,a.to.left=(d.outerWidth-a.to.outerWidth)*v.x);a.css(a.from);if("content"===z||"both"===z)h=h.concat(["marginTop","marginBottom"]).concat(l),p=p.concat(["marginLeft","marginRight"]),b=f.concat(h).concat(p),a.find("*[width]").each(function(){var a=k(this),d=a.height(),
e=a.width(),f=a.outerHeight(),g=a.outerWidth();w&&k.effects.save(a,b);a.from={height:d*A,width:e*C,outerHeight:f*A,outerWidth:g*C};a.to={height:d*G,width:e*E,outerHeight:d*G,outerWidth:e*E};A!==G&&(a.from=k.effects.setTransition(a,h,A,a.from),a.to=k.effects.setTransition(a,h,G,a.to));C!==E&&(a.from=k.effects.setTransition(a,p,C,a.from),a.to=k.effects.setTransition(a,p,E,a.to));a.css(a.from);a.animate(a.to,c.duration,c.easing,function(){w&&k.effects.restore(a,b)})});a.animate(a.to,{queue:!1,duration:c.duration,
easing:c.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity);"hide"===r&&a.hide();k.effects.restore(a,q);w||("static"===t?a.css({position:"relative",top:a.to.top,left:a.to.left}):k.each(["top","left"],function(b,c){a.css(c,function(e,c){e=parseInt(c,10);var d=b?a.to.left:a.to.top;return"auto"===c?d+"px":e+d+"px"})}));k.effects.removeWrapper(a);g()}})}})(jQuery);
(function(k,h){k.effects.effect.shake=function(c,g){var a=k(this),f="position top bottom left right height width".split(" "),d=k.effects.setMode(a,c.mode||"effect"),b=c.direction||"left",h=c.distance||20,n=c.times||3,p=2*n+1,r=Math.round(c.duration/p),w="up"===b||"down"===b?"top":"left",z="up"===b||"left"===b;b={};var v={},t={},q=a.queue(),y=q.length;k.effects.save(a,f);a.show();k.effects.createWrapper(a);b[w]=(z?"-=":"+=")+h;v[w]=(z?"+=":"-=")+2*h;t[w]=(z?"-=":"+=")+2*h;a.animate(b,r,c.easing);for(h=
1;h<n;h++)a.animate(v,r,c.easing).animate(t,r,c.easing);a.animate(v,r,c.easing).animate(b,r/2,c.easing).queue(function(){"hide"===d&&a.hide();k.effects.restore(a,f);k.effects.removeWrapper(a);g()});1<y&&q.splice.apply(q,[1,0].concat(q.splice(y,p+1)));a.dequeue()}})(jQuery);
(function(k,h){k.effects.effect.slide=function(c,g){var a=k(this),f="position top bottom left right width height".split(" "),d=k.effects.setMode(a,c.mode||"show"),b="show"===d,h=c.direction||"left",n="up"===h||"down"===h?"top":"left";h="up"===h||"left"===h;var p={};k.effects.save(a,f);a.show();var r=c.distance||a["top"===n?"outerHeight":"outerWidth"](!0);k.effects.createWrapper(a).css({overflow:"hidden"});b&&a.css(n,h?isNaN(r)?"-"+r:-r:r);p[n]=(b?h?"+=":"-=":h?"-=":"+=")+r;a.animate(p,{queue:!1,duration:c.duration,
easing:c.easing,complete:function(){"hide"===d&&a.hide();k.effects.restore(a,f);k.effects.removeWrapper(a);g()}})}})(jQuery);
(function(k,h){k.effects.effect.transfer=function(c,g){var a=k(this),f=k(c.to),d="fixed"===f.css("position"),b=k("body"),h=d?b.scrollTop():0;b=d?b.scrollLeft():0;var n=f.offset();f={top:n.top-h,left:n.left-b,height:f.innerHeight(),width:f.innerWidth()};n=a.offset();var p=k("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(c.className).css({top:n.top-h,left:n.left-b,height:a.innerHeight(),width:a.innerWidth(),position:d?"fixed":"absolute"}).animate(f,c.duration,c.easing,function(){p.remove();
g()})}})(jQuery);
(function(k,h){k.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,
k.proxy(function(c){this.options.disabled&&c.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(c){c.preventDefault()},"click .ui-state-disabled > a":function(c){c.preventDefault()},"click .ui-menu-item:has(a)":function(c){var g=k(c.target).closest(".ui-menu-item");!this.mouseHandled&&g.not(".ui-state-disabled").length&&(this.select(c),c.isPropagationStopped()||(this.mouseHandled=
!0),g.has(".ui-menu").length?this.expand(c):!this.element.is(":focus")&&k(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(c){var g=k(c.currentTarget);g.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(c,g)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(c,g){var a=this.active||
this.element.children(".ui-menu-item").eq(0);g||this.focus(c,a)},blur:function(c){this._delay(function(){k.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(c)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(c){k(c.target).closest(".ui-menu").length||this.collapseAll(c);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var c=k(this);c.data("ui-menu-submenu-carat")&&c.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(c){function g(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")}var a=!0;switch(c.keyCode){case k.ui.keyCode.PAGE_UP:this.previousPage(c);break;case k.ui.keyCode.PAGE_DOWN:this.nextPage(c);break;case k.ui.keyCode.HOME:this._move("first","first",c);break;case k.ui.keyCode.END:this._move("last","last",c);break;case k.ui.keyCode.UP:this.previous(c);break;case k.ui.keyCode.DOWN:this.next(c);break;case k.ui.keyCode.LEFT:this.collapse(c);break;case k.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(c);break;case k.ui.keyCode.ENTER:case k.ui.keyCode.SPACE:this._activate(c);
break;case k.ui.keyCode.ESCAPE:this.collapse(c);break;default:a=!1;var f=this.previousFilter||"";var d=String.fromCharCode(c.keyCode);var b=!1;clearTimeout(this.filterTimer);d===f?b=!0:d=f+d;var h=new RegExp("^"+g(d),"i");f=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(k(this).children("a").text())});f=b&&-1!==f.index(this.active.next())?this.active.nextAll(".ui-menu-item"):f;f.length||(d=String.fromCharCode(c.keyCode),h=new RegExp("^"+g(d),"i"),f=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(k(this).children("a").text())}));
f.length?(this.focus(c,f),1<f.length?(this.previousFilter=d,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}a&&c.preventDefault()},_activate:function(c){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(c):this.select(c))},refresh:function(){var c=this.options.icons.submenu;var g=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);
g.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var a=k(this),f=a.prev("a"),d=k("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);f.attr("aria-haspopup","true").prepend(d);a.attr("aria-labelledby",f.attr("id"))});g=g.add(this.element);g.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,
role:this._itemRole()});g.children(":not(.ui-menu-item)").each(function(){var a=k(this);/[^\-\u2014\u2013\s]/.test(a.text())||a.addClass("ui-widget-content ui-menu-divider")});g.children(".ui-state-disabled").attr("aria-disabled","true");this.active&&!k.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(c,g){"icons"===c&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(g.submenu);
this._super(c,g)},focus:function(c,g){this.blur(c,c&&"focus"===c.type);this._scrollIntoView(g);this.active=g.first();var a=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",a.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");c&&"keydown"===c.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);a=g.children(".ui-menu");a.length&&c&&/^mouse/.test(c.type)&&
this._startOpening(a);this.activeMenu=g.parent();this._trigger("focus",c,{item:g})},_scrollIntoView:function(c){if(this._hasScroll()){var g=parseFloat(k.css(this.activeMenu[0],"borderTopWidth"))||0;var a=parseFloat(k.css(this.activeMenu[0],"paddingTop"))||0;g=c.offset().top-this.activeMenu.offset().top-g-a;a=this.activeMenu.scrollTop();var f=this.activeMenu.height();c=c.height();0>g?this.activeMenu.scrollTop(a+g):g+c>f&&this.activeMenu.scrollTop(a+g-f+c)}},blur:function(c,g){g||clearTimeout(this.timer);
this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",c,{item:this.active}))},_startOpening:function(c){clearTimeout(this.timer);"true"===c.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(c)},this.delay))},_open:function(c){var g=k.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(c.parents(".ui-menu")).hide().attr("aria-hidden","true");c.show().removeAttr("aria-hidden").attr("aria-expanded",
"true").position(g)},collapseAll:function(c,g){clearTimeout(this.timer);this.timer=this._delay(function(){var a=g?this.element:k(c&&c.target).closest(this.element.find(".ui-menu"));a.length||(a=this.element);this._close(a);this.blur(c);this.activeMenu=a},this.delay)},_close:function(c){c||(c=this.active?this.active.parent():this.element);c.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(c){var g=
this.active&&this.active.parent().closest(".ui-menu-item",this.element);g&&g.length&&(this._close(),this.focus(c,g))},expand:function(c){var g=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();g&&g.length&&(this._open(g.parent()),this._delay(function(){this.focus(c,g)}))},next:function(c){this._move("next","first",c)},previous:function(c){this._move("prev","last",c)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&
!this.active.nextAll(".ui-menu-item").length},_move:function(c,g,a){var f;this.active&&(f="first"===c||"last"===c?this.active["first"===c?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[c+"All"](".ui-menu-item").eq(0));f&&f.length&&this.active||(f=this.activeMenu.children(".ui-menu-item")[g]());this.focus(a,f)},nextPage:function(c){var g;if(!this.active)this.next(c);else if(!this.isLastItem())if(this._hasScroll()){var a=this.active.offset().top;var f=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){g=
k(this);return 0>g.offset().top-a-f});this.focus(c,g)}else this.focus(c,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(c){var g;if(!this.active)this.next(c);else if(!this.isFirstItem())if(this._hasScroll()){var a=this.active.offset().top;var f=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){g=k(this);return 0<g.offset().top-a+f});this.focus(c,g)}else this.focus(c,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<
this.element.prop("scrollHeight")},select:function(c){this.active=this.active||k(c.target).closest(".ui-menu-item");var g={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(c,!0);this._trigger("select",c,g)}})})(jQuery);
(function(k,h){function c(a,b,c){return[parseFloat(a[0])*(w.test(a[0])?b/100:1),parseFloat(a[1])*(w.test(a[1])?c/100:1)]}function g(a){var b=a[0];return 9===b.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:k.isWindow(b)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:b.preventDefault?{width:0,height:0,offset:{top:b.pageY,left:b.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}k.ui=k.ui||{};var a,f=Math.max,d=Math.abs,b=
Math.round,l=/left|center|right/,n=/top|center|bottom/,p=/[\+\-]\d+(\.[\d]+)?%?/,r=/^\w+/,w=/%$/,z=k.fn.position;k.position={scrollbarWidth:function(){if(a!==h)return a;var b=k("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");var c=b.children()[0];k("body").append(b);var d=c.offsetWidth;b.css("overflow","scroll");c=c.offsetWidth;d===c&&(c=b[0].clientWidth);b.remove();return a=d-c},getScrollInfo:function(a){var b=
a.isWindow||a.isDocument?"":a.element.css("overflow-x"),c=a.isWindow||a.isDocument?"":a.element.css("overflow-y");b="scroll"===b||"auto"===b&&a.width<a.element[0].scrollWidth;return{width:"scroll"===c||"auto"===c&&a.height<a.element[0].scrollHeight?k.position.scrollbarWidth():0,height:b?k.position.scrollbarWidth():0}},getWithinInfo:function(a){a=k(a||window);var b=k.isWindow(a[0]);return{element:a,isWindow:b,isDocument:!!a[0]&&9===a[0].nodeType,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),
scrollTop:a.scrollTop(),width:b?a.width():a.outerWidth(),height:b?a.height():a.outerHeight()}}};k.fn.position=function(a){if(!a||!a.of)return z.apply(this,arguments);a=k.extend({},a);var h=k(a.of),q=k.position.getWithinInfo(a.within),w=k.position.getScrollInfo(q),v=(a.collision||"flip").split(" "),C={};var G=g(h);h[0].preventDefault&&(a.at="left top");var E=G.width;var F=G.height;var I=G.offset;var e=k.extend({},I);k.each(["my","at"],function(){var e=(a[this]||"").split(" ");1===e.length&&(e=l.test(e[0])?
e.concat(["center"]):n.test(e[0])?["center"].concat(e):["center","center"]);e[0]=l.test(e[0])?e[0]:"center";e[1]=n.test(e[1])?e[1]:"center";var b=p.exec(e[0]);var c=p.exec(e[1]);C[this]=[b?b[0]:0,c?c[0]:0];a[this]=[r.exec(e[0])[0],r.exec(e[1])[0]]});1===v.length&&(v[1]=v[0]);"right"===a.at[0]?e.left+=E:"center"===a.at[0]&&(e.left+=E/2);"bottom"===a.at[1]?e.top+=F:"center"===a.at[1]&&(e.top+=F/2);var m=c(C.at,E,F);e.left+=m[0];e.top+=m[1];return this.each(function(){var g,l=k(this),n=l.outerWidth(),
p=l.outerHeight(),r=parseInt(k.css(this,"marginLeft"),10)||0,t=parseInt(k.css(this,"marginTop"),10)||0,y=n+r+(parseInt(k.css(this,"marginRight"),10)||0)+w.width,z=p+t+(parseInt(k.css(this,"marginBottom"),10)||0)+w.height,A=k.extend({},e),X=c(C.my,l.outerWidth(),l.outerHeight());"right"===a.my[0]?A.left-=n:"center"===a.my[0]&&(A.left-=n/2);"bottom"===a.my[1]?A.top-=p:"center"===a.my[1]&&(A.top-=p/2);A.left+=X[0];A.top+=X[1];k.support.offsetFractions||(A.left=b(A.left),A.top=b(A.top));var G={marginLeft:r,
marginTop:t};k.each(["left","top"],function(e,b){if(k.ui.position[v[e]])k.ui.position[v[e]][b](A,{targetWidth:E,targetHeight:F,elemWidth:n,elemHeight:p,collisionPosition:G,collisionWidth:y,collisionHeight:z,offset:[m[0]+X[0],m[1]+X[1]],my:a.my,at:a.at,within:q,elem:l})});a.using&&(g=function(e){var b=I.left-A.left,c=b+E-n,m=I.top-A.top,g=m+F-p,k={target:{element:h,left:I.left,top:I.top,width:E,height:F},element:{element:l,left:A.left,top:A.top,width:n,height:p},horizontal:0>c?"left":0<b?"right":"center",
vertical:0>g?"top":0<m?"bottom":"middle"};E<n&&d(b+c)<E&&(k.horizontal="center");F<p&&d(m+g)<F&&(k.vertical="middle");f(d(b),d(c))>f(d(m),d(g))?k.important="horizontal":k.important="vertical";a.using.call(this,e,k)});l.offset(k.extend(A,{using:g}))})};k.ui.position={fit:{left:function(a,b){var c=b.within,d=c.isWindow?c.scrollLeft:c.offset.left,g=c.width,h=a.left-b.collisionPosition.marginLeft;c=d-h;var l=h+b.collisionWidth-g-d;b.collisionWidth>g?0<c&&0>=l?(b=a.left+c+b.collisionWidth-g-d,a.left+=
c-b):a.left=0<l&&0>=c?d:c>l?d+g-b.collisionWidth:d:a.left=0<c?a.left+c:0<l?a.left-l:f(a.left-h,a.left)},top:function(a,b){var c=b.within,d=c.isWindow?c.scrollTop:c.offset.top,g=b.within.height,h=a.top-b.collisionPosition.marginTop;c=d-h;var l=h+b.collisionHeight-g-d;b.collisionHeight>g?0<c&&0>=l?(b=a.top+c+b.collisionHeight-g-d,a.top+=c-b):a.top=0<l&&0>=c?d:c>l?d+g-b.collisionHeight:d:a.top=0<c?a.top+c:0<l?a.top-l:f(a.top-h,a.top)}},flip:{left:function(a,b){var c=b.within,f=c.offset.left+c.scrollLeft,
g=c.width,h=c.isWindow?c.scrollLeft:c.offset.left,l=a.left-b.collisionPosition.marginLeft;c=l-h;var k=l+b.collisionWidth-g-h;l="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0;var n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,p=-2*b.offset[0];if(0>c){if(b=a.left+l+n+p+b.collisionWidth-g-f,0>b||b<d(c))a.left+=l+n+p}else 0<k&&(b=a.left-b.collisionPosition.marginLeft+l+n+p-h,0<b||d(b)<k)&&(a.left+=l+n+p)},top:function(a,b){var c=b.within,f=c.offset.top+c.scrollTop,
g=c.height,h=c.isWindow?c.scrollTop:c.offset.top,l=a.top-b.collisionPosition.marginTop;c=l-h;var k=l+b.collisionHeight-g-h;l="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0;var n="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>c?(b=a.top+l+n+p+b.collisionHeight-g-f,a.top+l+n+p>c&&(0>b||b<d(c))&&(a.top+=l+n+p)):0<k&&(b=a.top-b.collisionPosition.marginTop+l+n+p-h,a.top+l+n+p>k&&(0<b||d(b)<k)&&(a.top+=l+n+p))}},flipfit:{left:function(){k.ui.position.flip.left.apply(this,
arguments);k.ui.position.fit.left.apply(this,arguments)},top:function(){k.ui.position.flip.top.apply(this,arguments);k.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,b=document.getElementsByTagName("body")[0];var c=document.createElement("div");var d=document.createElement(b?"div":"body");var f={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};b&&k.extend(f,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in f)d.style[a]=f[a];d.appendChild(c);f=b||
document.documentElement;f.insertBefore(d,f.firstChild);c.style.cssText="position: absolute; left: 10.7432222px;";c=k(c).offset().left;k.support.offsetFractions=10<c&&11>c;d.innerHTML="";f.removeChild(d)})()})(jQuery);
(function(k,h){k.widget("ui.progressbar",{version:"1.10.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min});this.valueDiv=k("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove()},value:function(c){if(c===h)return this.options.value;this.options.value=this._constrainedValue(c);this._refreshValue()},_constrainedValue:function(c){c===h&&(c=this.options.value);this.indeterminate=!1===c;"number"!==typeof c&&(c=0);return this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,c))},_setOptions:function(c){var g=c.value;delete c.value;this._super(c);this.options.value=this._constrainedValue(g);this._refreshValue()},_setOption:function(c,g){"max"===
c&&(g=Math.max(this.min,g));this._super(c,g)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var c=this.options.value,g=this._percentage();this.valueDiv.toggle(this.indeterminate||c>this.min).toggleClass("ui-corner-right",c===this.options.max).width(g.toFixed(0)+"%");this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||
(this.overlayDiv=k("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":c}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null));this.oldValue!==c&&(this.oldValue=c,this._trigger("change"));c===this.options.max&&this._trigger("complete")}})})(jQuery);
(function(k,h){k.widget("ui.slider",k.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");this._refresh();
this._setOption("disabled",this.options.disabled);this._animateOff=!1},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var c=this.options;var g=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a=[];var f=c.values&&c.values.length||1;g.length>f&&(g.slice(f).remove(),g=g.slice(0,f));for(c=g.length;c<f;c++)a.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=g.add(k(a.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(a){k(this).data("ui-slider-handle-index",a)})},_createRange:function(){var c=this.options,g="";c.range?(!0===c.range&&(c.values?c.values.length&&2!==c.values.length?c.values=[c.values[0],c.values[0]]:k.isArray(c.values)&&(c.values=c.values.slice(0)):c.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",
bottom:""}):(this.range=k("<div></div>").appendTo(this.element),g="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(g+("min"===c.range||"max"===c.range?" ui-slider-range-"+c.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var c=this.handles.add(this.range).filter("a");this._off(c);this._on(c,this._handleEvents);this._hoverable(c);this._focusable(c)},_destroy:function(){this.handles.remove();this.range&&this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all");
this._mouseDestroy()},_mouseCapture:function(c){var g,a,f=this,d=this.options;if(d.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();var b=this._normValueFromMouse({x:c.pageX,y:c.pageY});var h=this._valueMax()-this._valueMin()+1;this.handles.each(function(c){var l=Math.abs(b-f.values(c));if(h>l||h===l&&(c===f._lastChangedValue||f.values(c)===d.min))h=l,g=k(this),a=c});if(!1===this._start(c,a))return!1;this._mouseSliding=
!0;this._handleIndex=a;g.addClass("ui-state-active").focus();var n=g.offset();this._clickOffset=k(c.target).parents().addBack().is(".ui-slider-handle")?{left:c.pageX-n.left-g.width()/2,top:c.pageY-n.top-g.height()/2-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(c,a,b);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(c){var g=
this._normValueFromMouse({x:c.pageX,y:c.pageY});this._slide(c,this._handleIndex,g);return!1},_mouseStop:function(c){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(c,this._handleIndex);this._change(c,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(c){if("horizontal"===this.orientation){var g=
this.elementSize.width;c=c.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else g=this.elementSize.height,c=c.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);g=c/g;1<g&&(g=1);0>g&&(g=0);"vertical"===this.orientation&&(g=1-g);c=this._valueMax()-this._valueMin();g=this._valueMin()+g*c;return this._trimAlignValue(g)},_start:function(c,g){var a={handle:this.handles[g],value:this.value()};this.options.values&&this.options.values.length&&(a.value=this.values(g),
a.values=this.values());return this._trigger("start",c,a)},_slide:function(c,g,a){if(this.options.values&&this.options.values.length){var f=this.values(g?0:1);2===this.options.values.length&&!0===this.options.range&&(0===g&&a>f||1===g&&a<f)&&(a=f);a!==this.values(g)&&(f=this.values(),f[g]=a,c=this._trigger("slide",c,{handle:this.handles[g],value:a,values:f}),this.values(g?0:1),!1!==c&&this.values(g,a))}else a!==this.value()&&(c=this._trigger("slide",c,{handle:this.handles[g],value:a}),!1!==c&&this.value(a))},
_stop:function(c,g){var a={handle:this.handles[g],value:this.value()};this.options.values&&this.options.values.length&&(a.value=this.values(g),a.values=this.values());this._trigger("stop",c,a)},_change:function(c,g){if(!this._keySliding&&!this._mouseSliding){var a={handle:this.handles[g],value:this.value()};this.options.values&&this.options.values.length&&(a.value=this.values(g),a.values=this.values());this._lastChangedValue=g;this._trigger("change",c,a)}},value:function(c){if(arguments.length)this.options.value=
this._trimAlignValue(c),this._refreshValue(),this._change(null,0);else return this._value()},values:function(c,g){var a;if(1<arguments.length)this.options.values[c]=this._trimAlignValue(g),this._refreshValue(),this._change(null,c);else if(arguments.length)if(k.isArray(arguments[0])){var f=this.options.values;var d=arguments[0];for(a=0;a<f.length;a+=1)f[a]=this._trimAlignValue(d[a]),this._change(null,a);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(c):
this.value();else return this._values()},_setOption:function(c,g){var a,f=0;"range"===c&&!0===this.options.range&&("min"===g?(this.options.value=this._values(0),this.options.values=null):"max"===g&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null));k.isArray(this.options.values)&&(f=this.options.values.length);k.Widget.prototype._setOption.apply(this,arguments);switch(c){case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(a=0;a<f;a+=1)this._change(null,a);this._animateOff=!1;break;case "min":case "max":this._animateOff=!0;this._refreshValue();this._animateOff=!1;break;case "range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var c=this.options.value;return c=this._trimAlignValue(c)},
_values:function(c){var g;if(arguments.length){var a=this.options.values[c];return a=this._trimAlignValue(a)}if(this.options.values&&this.options.values.length){a=this.options.values.slice();for(g=0;g<a.length;g+=1)a[g]=this._trimAlignValue(a[g]);return a}return[]},_trimAlignValue:function(c){if(c<=this._valueMin())return this._valueMin();if(c>=this._valueMax())return this._valueMax();var g=0<this.options.step?this.options.step:1,a=(c-this._valueMin())%g;c-=a;2*Math.abs(a)>=g&&(c+=0<a?g:-g);return parseFloat(c.toFixed(5))},
_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var c,g=this.options.range,a=this.options,f=this,d=this._animateOff?!1:a.animate,b={};if(this.options.values&&this.options.values.length)this.handles.each(function(g){r=(f.values(g)-f._valueMin())/(f._valueMax()-f._valueMin())*100;b["horizontal"===f.orientation?"left":"bottom"]=r+"%";k(this).stop(1,1)[d?"animate":"css"](b,a.animate);if(!0===f.options.range)if("horizontal"===f.orientation){if(0===
g)f.range.stop(1,1)[d?"animate":"css"]({left:r+"%"},a.animate);if(1===g)f.range[d?"animate":"css"]({width:r-c+"%"},{queue:!1,duration:a.animate})}else{if(0===g)f.range.stop(1,1)[d?"animate":"css"]({bottom:r+"%"},a.animate);if(1===g)f.range[d?"animate":"css"]({height:r-c+"%"},{queue:!1,duration:a.animate})}c=r});else{var h=this.value();var n=this._valueMin();var p=this._valueMax();var r=p!==n?(h-n)/(p-n)*100:0;b["horizontal"===this.orientation?"left":"bottom"]=r+"%";this.handle.stop(1,1)[d?"animate":
"css"](b,a.animate);if("min"===g&&"horizontal"===this.orientation)this.range.stop(1,1)[d?"animate":"css"]({width:r+"%"},a.animate);if("max"===g&&"horizontal"===this.orientation)this.range[d?"animate":"css"]({width:100-r+"%"},{queue:!1,duration:a.animate});if("min"===g&&"vertical"===this.orientation)this.range.stop(1,1)[d?"animate":"css"]({height:r+"%"},a.animate);if("max"===g&&"vertical"===this.orientation)this.range[d?"animate":"css"]({height:100-r+"%"},{queue:!1,duration:a.animate})}},_handleEvents:{keydown:function(c){var g,
a=k(c.target).data("ui-slider-handle-index");switch(c.keyCode){case k.ui.keyCode.HOME:case k.ui.keyCode.END:case k.ui.keyCode.PAGE_UP:case k.ui.keyCode.PAGE_DOWN:case k.ui.keyCode.UP:case k.ui.keyCode.RIGHT:case k.ui.keyCode.DOWN:case k.ui.keyCode.LEFT:if(c.preventDefault(),!this._keySliding){this._keySliding=!0;k(c.target).addClass("ui-state-active");var f=this._start(c,a);if(!1===f)return}}var d=this.options.step;f=this.options.values&&this.options.values.length?g=this.values(a):g=this.value();
switch(c.keyCode){case k.ui.keyCode.HOME:g=this._valueMin();break;case k.ui.keyCode.END:g=this._valueMax();break;case k.ui.keyCode.PAGE_UP:g=this._trimAlignValue(f+(this._valueMax()-this._valueMin())/5);break;case k.ui.keyCode.PAGE_DOWN:g=this._trimAlignValue(f-(this._valueMax()-this._valueMin())/5);break;case k.ui.keyCode.UP:case k.ui.keyCode.RIGHT:if(f===this._valueMax())return;g=this._trimAlignValue(f+d);break;case k.ui.keyCode.DOWN:case k.ui.keyCode.LEFT:if(f===this._valueMin())return;g=this._trimAlignValue(f-
d)}this._slide(c,a,g)},click:function(c){c.preventDefault()},keyup:function(c){var g=k(c.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(c,g),this._change(c,g),k(c.target).removeClass("ui-state-active"))}}})})(jQuery);
(function(k){function h(c){return function(){var g=this.element.val();c.apply(this,arguments);this._refresh();g!==this.element.val()&&this._trigger("change")}}k.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);
this._setOption("min",this.options.min);this._setOption("step",this.options.step);""!==this.value()&&this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var c={},g=this.element;k.each(["min","max","step"],function(a,f){a=g.attr(f);void 0!==a&&a.length&&(c[f]=a)});return c},_events:{keydown:function(c){this._start(c)&&this._keydown(c)&&c.preventDefault()},
keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(c){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",c))},mousewheel:function(c,g){if(g){if(!this.spinning&&!this._start(c))return!1;this._spin((0<g?1:-1)*this.options.step,c);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(c)},100);c.preventDefault()}},"mousedown .ui-spinner-button":function(c){function g(){this.element[0]!==
this.document[0].activeElement&&(this.element.focus(),this.previous=a,this._delay(function(){this.previous=a}))}var a=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();c.preventDefault();g.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;g.call(this)});!1!==this._start(c)&&this._repeat(null,k(c.currentTarget).hasClass("ui-spinner-up")?1:-1,c)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(c){if(k(c.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(c))return!1;this._repeat(null,k(c.currentTarget).hasClass("ui-spinner-up")?1:-1,c)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var c=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=c.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(.5*c.height())&&0<c.height()&&
c.height(c.height());this.options.disabled&&this.disable()},_keydown:function(c){var g=this.options,a=k.ui.keyCode;switch(c.keyCode){case a.UP:return this._repeat(null,1,c),!0;case a.DOWN:return this._repeat(null,-1,c),!0;case a.PAGE_UP:return this._repeat(null,g.page,c),!0;case a.PAGE_DOWN:return this._repeat(null,-g.page,c),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+
this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(c){if(!this.spinning&&!1===this._trigger("start",c))return!1;this.counter||(this.counter=1);return this.spinning=!0},_repeat:function(c,g,a){c=c||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,g,a)},c);this._spin(g*this.options.step,a)},_spin:function(c,g){var a=this.value()||0;this.counter||
(this.counter=1);a=this._adjustValue(a+c*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",g,{value:a})||(this._value(a),this.counter++)},_increment:function(c){var g=this.options.incremental;return g?k.isFunction(g)?g(c):Math.floor(c*c*c/5E4-c*c/500+17*c/200+1):1},_precision:function(){var c=this._precisionOf(this.options.step);null!==this.options.min&&(c=Math.max(c,this._precisionOf(this.options.min)));return c},_precisionOf:function(c){c=c.toString();var g=c.indexOf(".");
return-1===g?0:c.length-g-1},_adjustValue:function(c){var g=this.options;var a=null!==g.min?g.min:0;c=a+Math.round((c-a)/g.step)*g.step;c=parseFloat(c.toFixed(this._precision()));return null!==g.max&&c>g.max?g.max:null!==g.min&&c<g.min?g.min:c},_stop:function(c){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",c))},_setOption:function(c,g){if("culture"===c||"numberFormat"===c){var a=this._parse(this.element.val());this.options[c]=
g;this.element.val(this._format(a))}else"max"!==c&&"min"!==c&&"step"!==c||"string"!==typeof g||(g=this._parse(g)),"icons"===c&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(g.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(g.down)),this._super(c,g),"disabled"===c&&(g?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:h(function(c){this._super(c);
this._value(this.element.val())}),_parse:function(c){"string"===typeof c&&""!==c&&(c=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(c,10,this.options.culture):+c);return""===c||isNaN(c)?null:c},_format:function(c){return""===c?"":window.Globalize&&this.options.numberFormat?Globalize.format(c,this.options.numberFormat,this.options.culture):c},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},
_value:function(c,g){if(""!==c){var a=this._parse(c);null!==a&&(g||(a=this._adjustValue(a)),c=this._format(a))}this.element.val(c);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:h(function(c){this._stepUp(c)}),_stepUp:function(c){this._start()&&(this._spin((c||1)*this.options.step),
this._stop())},stepDown:h(function(c){this._stepDown(c)}),_stepDown:function(c){this._start()&&(this._spin((c||1)*-this.options.step),this._stop())},pageUp:h(function(c){this._stepUp((c||1)*this.options.page)}),pageDown:h(function(c){this._stepDown((c||1)*this.options.page)}),value:function(c){if(!arguments.length)return this._parse(this.element.val());h(this._value).call(this,c)},widget:function(){return this.uiSpinner}})})(jQuery);
(function(k,h){function c(c){c=c.cloneNode(!1);return 1<c.hash.length&&decodeURIComponent(c.href.replace(a,""))===decodeURIComponent(location.href.replace(a,""))}var g=0,a=/#.*$/;k.widget("ui.tabs",{version:"1.10.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var a=this,c=this.options;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",
c.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(a){k(this).is(".ui-state-disabled")&&a.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){k(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();c.active=this._initialActive();k.isArray(c.disabled)&&(c.disabled=k.unique(c.disabled.concat(k.map(this.tabs.filter(".ui-state-disabled"),function(b){return a.tabs.index(b)}))).sort());this.active=!1!==this.options.active&&
this.anchors.length?this._findActive(c.active):k();this._refresh();this.active.length&&this.load(c.active)},_initialActive:function(){var a=this.options.active,c=this.options.collapsible,b=location.hash.substring(1);null===a&&(b&&this.tabs.each(function(c,d){if(k(d).attr("aria-controls")===b)return a=c,!1}),null===a&&(a=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===a||-1===a)&&(a=this.tabs.length?0:!1);!1!==a&&(a=this.tabs.index(this.tabs.eq(a)),-1===a&&(a=c?!1:0));!c&&!1===a&&this.anchors.length&&
(a=0);return a},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):k()}},_tabKeydown:function(a){var c=k(this.document[0].activeElement).closest("li"),b=this.tabs.index(c),f=!0;if(!this._handlePageNav(a)){switch(a.keyCode){case k.ui.keyCode.RIGHT:case k.ui.keyCode.DOWN:b++;break;case k.ui.keyCode.UP:case k.ui.keyCode.LEFT:f=!1;b--;break;case k.ui.keyCode.END:b=this.anchors.length-1;break;case k.ui.keyCode.HOME:b=0;break;case k.ui.keyCode.SPACE:a.preventDefault();
clearTimeout(this.activating);this._activate(b);return;case k.ui.keyCode.ENTER:a.preventDefault();clearTimeout(this.activating);this._activate(b===this.options.active?!1:b);return;default:return}a.preventDefault();clearTimeout(this.activating);b=this._focusNextTab(b,f);a.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(b).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",b)},this.delay))}},_panelKeydown:function(a){!this._handlePageNav(a)&&a.ctrlKey&&a.keyCode===
k.ui.keyCode.UP&&(a.preventDefault(),this.active.focus())},_handlePageNav:function(a){if(a.altKey&&a.keyCode===k.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(a.altKey&&a.keyCode===k.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(a,c){function b(){a>d&&(a=0);0>a&&(a=d);return a}for(var d=this.tabs.length-1;-1!==k.inArray(b(),this.options.disabled);)a=c?a+1:a-1;return a},_focusNextTab:function(a,
c){a=this._findNextTab(a,c);this.tabs.eq(a).focus();return a},_setOption:function(a,c){"active"===a?this._activate(c):"disabled"===a?this._setupDisabled(c):(this._super(a,c),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",c),c||!1!==this.options.active||this._activate(0)),"event"===a&&this._setupEvents(c),"heightStyle"===a&&this._setupHeightStyle(c))},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+ ++g},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,
"\\$&"):""},refresh:function(){var a=this.options,c=this.tablist.children(":has(a[href])");a.disabled=k.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)});this._processTabs();!1!==a.active&&this.anchors.length?this.active.length&&!k.contains(this.tablist[0],this.active[0])?this.tabs.length===a.disabled.length?(a.active=!1,this.active=k()):this._activate(this._findNextTab(Math.max(0,a.active-1),!1)):a.active=this.tabs.index(this.active):(a.active=!1,this.active=k());this._refresh()},
_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true",
"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var a=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return k("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=
k();this.anchors.each(function(d,b){var f=k(b).uniqueId().attr("id"),g=k(b).closest("li"),h=g.attr("aria-controls");if(c(b)){b=b.hash;var r=a.element.find(a._sanitizeSelector(b))}else{var w=a._tabId(g);b="#"+w;r=a.element.find(b);r.length||(r=a._createPanel(w),r.insertAfter(a.panels[d-1]||a.tablist));r.attr("aria-live","polite")}r.length&&(a.panels=a.panels.add(r));h&&g.data("ui-tabs-aria-controls",h);g.attr({"aria-controls":b.substring(1),"aria-labelledby":f});r.attr("aria-labelledby",f)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role",
"tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(a){return k("<div>").attr("id",a).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(a){k.isArray(a)&&(a.length?a.length===this.anchors.length&&(a=!0):a=!1);for(var c=0,b;b=this.tabs[c];c++)!0===a||-1!==k.inArray(c,a)?k(b).addClass("ui-state-disabled").attr("aria-disabled","true"):k(b).removeClass("ui-state-disabled").removeAttr("aria-disabled");
this.options.disabled=a},_setupEvents:function(a){var c={click:function(a){a.preventDefault()}};a&&k.each(a.split(" "),function(a,d){c[d]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,c);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(a){var c=this.element.parent();if("fill"===a){var b=c.height();b-=this.element.outerHeight()-
this.element.height();this.element.siblings(":visible").each(function(){var a=k(this),c=a.css("position");"absolute"!==c&&"fixed"!==c&&(b-=a.outerHeight(!0))});this.element.children().not(this.panels).each(function(){b-=k(this).outerHeight(!0)});this.panels.each(function(){k(this).height(Math.max(0,b-k(this).innerHeight()+k(this).height()))}).css("overflow","auto")}else"auto"===a&&(b=0,this.panels.each(function(){b=Math.max(b,k(this).height("").height())}).height(b))},_eventHandler:function(a){var c=
this.options,b=this.active,f=k(a.currentTarget).closest("li"),g=f[0]===b[0],h=g&&c.collapsible,r=h?k():this._getPanelForTab(f),w=b.length?this._getPanelForTab(b):k();b={oldTab:b,oldPanel:w,newTab:h?k():f,newPanel:r};a.preventDefault();f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||!1===this._trigger("beforeActivate",a,b)||(c.active=h?!1:this.tabs.index(f),this.active=g?k():f,this.xhr&&this.xhr.abort(),w.length||r.length||k.error("jQuery UI Tabs: Mismatching fragment identifier."),
r.length&&this.load(this.tabs.index(f),a),this._toggle(a,b))},_toggle:function(a,c){function b(){f.running=!1;f._trigger("activate",a,c)}function d(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active");g.length&&f.options.show?f._show(g,f.options.show,b):(g.show(),b())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0;h.length&&this.options.hide?this._hide(h,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");d()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
h.hide(),d());h.attr({"aria-expanded":"false","aria-hidden":"true"});c.oldTab.attr("aria-selected","false");g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===k(this).attr("tabIndex")}).attr("tabIndex",-1);g.attr({"aria-expanded":"true","aria-hidden":"false"});c.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(a){a=this._findActive(a);a[0]!==this.active[0]&&(a.length||(a=this.active),a=a.find(".ui-tabs-anchor")[0],this._eventHandler({target:a,
currentTarget:a,preventDefault:k.noop}))},_findActive:function(a){return!1===a?k():this.tabs.eq(a)},_getIndex:function(a){"string"===typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']")));return a},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();
this.tabs.add(this.panels).each(function(){k.data(this,"ui-tabs-destroy")?k(this).remove():k(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var a=k(this),c=a.data("ui-tabs-aria-controls");
c?a.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):a.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(a){var c=this.options.disabled;!1!==c&&(a===h?c=!1:(a=this._getIndex(a),c=k.isArray(c)?k.map(c,function(b){return b!==a?b:null}):k.map(this.tabs,function(b,c){return c!==a?c:null})),this._setupDisabled(c))},disable:function(a){var c=this.options.disabled;if(!0!==c){if(a===h)c=!0;else{a=this._getIndex(a);
if(-1!==k.inArray(a,c))return;c=k.isArray(c)?k.merge([a],c).sort():[a]}this._setupDisabled(c)}},load:function(a,d){a=this._getIndex(a);var b=this,f=this.tabs.eq(a);a=f.find(".ui-tabs-anchor");var g=this._getPanelForTab(f),h={tab:f,panel:g};c(a[0])||(this.xhr=k.ajax(this._ajaxSettings(a,d,h)))&&"canceled"!==this.xhr.statusText&&(f.addClass("ui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){g.html(a);b._trigger("load",d,h)},1)}).complete(function(a,c){setTimeout(function(){"abort"===
c&&b.panels.stop(!1,!0);f.removeClass("ui-tabs-loading");g.removeAttr("aria-busy");a===b.xhr&&delete b.xhr},1)}))},_ajaxSettings:function(a,c,b){var d=this;return{url:a.attr("href"),beforeSend:function(a,f){return d._trigger("beforeLoad",c,k.extend({jqXHR:a,ajaxSettings:f},b))}}},_getPanelForTab:function(a){a=k(a).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+a))}})})(jQuery);
(function(k){function h(a,c){var d=(a.attr("aria-describedby")||"").split(/\s+/);d.push(c);a.data("ui-tooltip-id",c).attr("aria-describedby",k.trim(d.join(" ")))}function c(a){var c=a.data("ui-tooltip-id"),d=(a.attr("aria-describedby")||"").split(/\s+/);c=k.inArray(c,d);-1!==c&&d.splice(c,1);a.removeData("ui-tooltip-id");(d=k.trim(d.join(" ")))?a.attr("aria-describedby",d):a.removeAttr("aria-describedby")}var g=0;k.widget("ui.tooltip",{version:"1.10.4",options:{content:function(){var a=k(this).attr("title")||
"";return k("<a>").text(a).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable()},_setOption:function(a,c){var d=this;"disabled"===a?(this[c?"_disable":"_enable"](),this.options[a]=c):(this._super(a,c),"content"===a&&k.each(this.tooltips,function(a,
c){d._updateContent(c)}))},_disable:function(){var a=this;k.each(this.tooltips,function(c,d){c=k.Event("blur");c.target=c.currentTarget=d[0];a.close(c,!0)});this.element.find(this.options.items).addBack().each(function(){var a=k(this);a.is("[title]")&&a.data("ui-tooltip-title",a.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var a=k(this);a.data("ui-tooltip-title")&&a.attr("title",a.data("ui-tooltip-title"))})},open:function(a){var c=
this,d=k(a?a.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),a&&"mouseover"===a.type&&d.parents().each(function(){var a=k(this);if(a.data("ui-tooltip-open")){var d=k.Event("blur");d.target=d.currentTarget=this;c.close(d,!0)}a.attr("title")&&(a.uniqueId(),c.parents[this.id]={element:this,title:a.attr("title")},a.attr("title",""))}),this._updateContent(d,a))},_updateContent:function(a,
c){var d=this.options.content;var b=this,f=c?c.type:null;if("string"===typeof d)return this._open(c,a,d);(d=d.call(a[0],function(d){a.data("ui-tooltip-open")&&b._delay(function(){c&&(c.type=f);this._open(c,a,d)})}))&&this._open(c,a,d)},_open:function(a,c,d){function b(a){f.of=a;g.is(":hidden")||g.position(f)}var f=k.extend({},this.options.position);if(d){var g=this._find(c);if(g.length)g.find(".ui-tooltip-content").html(d);else{c.is("[title]")&&(a&&"mouseover"===a.type?c.attr("title",""):c.removeAttr("title"));
g=this._tooltip(c);h(c,g.attr("id"));g.find(".ui-tooltip-content").html(d);this.options.track&&a&&/^mouse/.test(a.type)?(this._on(this.document,{mousemove:b}),b(a)):g.position(k.extend({of:c},this.options.position));g.hide();this._show(g,this.options.show);if(this.options.show&&this.options.show.delay)var p=this.delayedShow=setInterval(function(){g.is(":visible")&&(b(f.of),clearInterval(p))},k.fx.interval);this._trigger("open",a,{tooltip:g});d={keyup:function(a){a.keyCode===k.ui.keyCode.ESCAPE&&(a=
k.Event(a),a.currentTarget=c[0],this.close(a,!0))},remove:function(){this._removeTooltip(g)}};a&&"mouseover"!==a.type||(d.mouseleave="close");a&&"focusin"!==a.type||(d.focusout="close");this._on(!0,c,d)}}},close:function(a){var f=this,d=k(a?a.currentTarget:this.element),b=this._find(d);this.closing||(clearInterval(this.delayedShow),d.data("ui-tooltip-title")&&d.attr("title",d.data("ui-tooltip-title")),c(d),b.stop(!0),this._hide(b,this.options.hide,function(){f._removeTooltip(k(this))}),d.removeData("ui-tooltip-open"),
this._off(d,"mouseleave focusout keyup"),d[0]!==this.element[0]&&this._off(d,"remove"),this._off(this.document,"mousemove"),a&&"mouseleave"===a.type&&k.each(this.parents,function(a,b){k(b.element).attr("title",b.title);delete f.parents[a]}),this.closing=!0,this._trigger("close",a,{tooltip:b}),this.closing=!1)},_tooltip:function(a){var c="ui-tooltip-"+g++,d=k("<div>").attr({id:c,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));k("<div>").addClass("ui-tooltip-content").appendTo(d);
d.appendTo(this.document[0].body);this.tooltips[c]=a;return d},_find:function(a){return(a=a.data("ui-tooltip-id"))?k("#"+a):k()},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_destroy:function(){var a=this;k.each(this.tooltips,function(c,d){var b=k.Event("blur");b.target=b.currentTarget=d[0];a.close(b,!0);k("#"+c).remove();d.data("ui-tooltip-title")&&(d.attr("title",d.data("ui-tooltip-title")),d.removeData("ui-tooltip-title"))})}})})(jQuery);/*

 handlebars v4.0.8

Copyright (C) 2011-2016 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
(function(k,h){"object"===typeof exports&&"object"===typeof module?module.exports=h():"function"===typeof define&&define.amd?define([],h):"object"===typeof exports?exports.Handlebars=h():k.Handlebars=h()})(this,function(){return function(k){function h(g){if(c[g])return c[g].exports;var a=c[g]={exports:{},id:g,loaded:!1};k[g].call(a.exports,a,a.exports,h);a.loaded=!0;return a.exports}var c={};h.m=k;h.c=c;h.p="";return h(0)}([function(k,h,c){function g(){var a=r();a.compile=function(b,c){return n.compile(b,
c,a)};a.precompile=function(b,c){return n.precompile(b,c,a)};a.AST=b["default"];a.Compiler=n.Compiler;a.JavaScriptCompiler=p["default"];a.Parser=l.parser;a.parse=l.parse;return a}var a=c(1)["default"];h.__esModule=!0;var f=c(2);f=a(f);var d=c(35),b=a(d),l=c(36),n=c(41);d=c(42);var p=a(d);d=c(39);d=a(d);c=c(34);a=a(c);var r=f["default"].create;f=g();f.create=g;a["default"](f);f.Visitor=d["default"];f["default"]=f;h["default"]=f;k.exports=h["default"]},function(k,h){h["default"]=function(c){return c&&
c.__esModule?c:{"default":c}};h.__esModule=!0},function(k,h,c){function g(){var a=new b.HandlebarsEnvironment;p.extend(a,b);a.SafeString=l["default"];a.Exception=n["default"];a.Utils=p;a.escapeExpression=p.escapeExpression;a.VM=r;a.template=function(b){return r.template(b,a)};return a}var a=c(3)["default"],f=c(1)["default"];h.__esModule=!0;var d=c(4),b=a(d);d=c(21);var l=f(d);d=c(6);var n=f(d);d=c(5);var p=a(d);d=c(22);var r=a(d);c=c(34);f=f(c);c=g();c.create=g;f["default"](c);c["default"]=c;h["default"]=
c;k.exports=h["default"]},function(k,h){h["default"]=function(c){if(c&&c.__esModule)return c;var g={};if(null!=c)for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(g[a]=c[a]);g["default"]=c;return g};h.__esModule=!0},function(k,h,c){function g(a,c,d){this.helpers=a||{};this.partials=c||{};this.decorators=d||{};b.registerDefaultHelpers(this);l.registerDefaultDecorators(this)}k=c(1)["default"];h.__esModule=!0;h.HandlebarsEnvironment=g;var a=c(5),f=c(6),d=k(f),b=c(10),l=c(18);c=c(20);c=k(c);
h.VERSION="4.0.8";h.COMPILER_REVISION=7;h.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};g.prototype={constructor:g,logger:c["default"],log:c["default"].log,registerHelper:function(b,c){if("[object Object]"===a.toString.call(b)){if(c)throw new d["default"]("Arg not supported with multiple helpers");a.extend(this.helpers,b)}else this.helpers[b]=c},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(b,
c){if("[object Object]"===a.toString.call(b))a.extend(this.partials,b);else{if("undefined"===typeof c)throw new d["default"]('Attempting to register a partial called "'+b+'" as undefined');this.partials[b]=c}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(b,c){if("[object Object]"===a.toString.call(b)){if(c)throw new d["default"]("Arg not supported with multiple decorators");a.extend(this.decorators,b)}else this.decorators[b]=c},unregisterDecorator:function(a){delete this.decorators[a]}};
h.log=c["default"].log;h.createFrame=a.createFrame;h.logger=c["default"]},function(k,h){function c(b){return a[b]}function g(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}h.__esModule=!0;h.extend=g;h.indexOf=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1};h.escapeExpression=function(a){if("string"!==typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+
"";a=""+a}return d.test(a)?a.replace(f,c):a};h.isEmpty=function(a){return a||0===a?l(a)&&0===a.length?!0:!1:!0};h.createFrame=function(a){var b=g({},a);b._parent=a;return b};h.blockParams=function(a,b){a.path=b;return a};h.appendContextPath=function(a,b){return(a?a+".":"")+b};var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},f=/[&<>"'`=]/g,d=/[&<>"'`=]/,b=Object.prototype.toString;h.toString=b;k=function(a){return"function"===typeof a};k(/x/)&&(h.isFunction=
k=function(a){return"function"===typeof a&&"[object Function]"===b.call(a)});h.isFunction=k;var l=Array.isArray||function(a){return a&&"object"===typeof a?"[object Array]"===b.call(a):!1};h.isArray=l},function(k,h,c){function g(c,b){b=b&&b.loc;var d=void 0,h=void 0;b&&(d=b.start.line,h=b.start.column,c+=" - "+d+":"+h);c=Error.prototype.constructor.call(this,c);for(var k=0;k<f.length;k++)this[f[k]]=c[f[k]];Error.captureStackTrace&&Error.captureStackTrace(this,g);try{b&&(this.lineNumber=d,a?Object.defineProperty(this,
"column",{value:h,enumerable:!0}):this.column=h)}catch(r){}}var a=c(7)["default"];h.__esModule=!0;var f="description fileName lineNumber message name number stack".split(" ");g.prototype=Error();h["default"]=g;k.exports=h["default"]},function(k,h,c){k.exports={"default":c(8),__esModule:!0}},function(k,h,c){var g=c(9);k.exports=function(a,c,d){return g.setDesc(a,c,d)}},function(k,h){h=Object;k.exports={create:h.create,getProto:h.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:h.getOwnPropertyDescriptor,
setDesc:h.defineProperty,setDescs:h.defineProperties,getKeys:h.keys,getNames:h.getOwnPropertyNames,getSymbols:h.getOwnPropertySymbols,each:[].forEach}},function(k,h,c){k=c(1)["default"];h.__esModule=!0;h.registerDefaultHelpers=function(c){g["default"](c);a["default"](c);f["default"](c);d["default"](c);b["default"](c);l["default"](c);n["default"](c)};h=c(11);var g=k(h);h=c(12);var a=k(h);h=c(13);var f=k(h);h=c(14);var d=k(h);h=c(15);var b=k(h);h=c(16);var l=k(h);c=c(17);var n=k(c)},function(k,h,c){h.__esModule=
!0;var g=c(5);h["default"]=function(a){a.registerHelper("blockHelperMissing",function(c,d){var b=d.inverse,f=d.fn;if(!0===c)return f(this);if(!1===c||null==c)return b(this);if(g.isArray(c))return 0<c.length?(d.ids&&(d.ids=[d.name]),a.helpers.each(c,d)):b(this);d.data&&d.ids&&(b=g.createFrame(d.data),b.contextPath=g.appendContextPath(d.data.contextPath,d.name),d={data:b});return f(c,d)})};k.exports=h["default"]},function(k,h,c){var g=c(1)["default"];h.__esModule=!0;var a=c(5);c=c(6);var f=g(c);h["default"]=
function(c){c.registerHelper("each",function(b,c){function d(c,d,f){v&&(v.key=c,v.index=d,v.first=0===d,v.last=!!f,t&&(v.contextPath=t+c));k+=g(b[c],{data:v,blockParams:a.blockParams([b[c],c],[t+c,null])})}if(!c)throw new f["default"]("Must pass iterator to #each");var g=c.fn,h=c.inverse,l=0,k="",v=void 0,t=void 0;c.data&&c.ids&&(t=a.appendContextPath(c.data.contextPath,c.ids[0])+".");a.isFunction(b)&&(b=b.call(this));c.data&&(v=a.createFrame(c.data));if(b&&"object"===typeof b)if(a.isArray(b))for(var q=
b.length;l<q;l++)l in b&&d(l,l,l===b.length-1);else{c=void 0;for(q in b)b.hasOwnProperty(q)&&(void 0!==c&&d(c,l-1),c=q,l++);void 0!==c&&d(c,l-1,!0)}0===l&&(k=h(this));return k})};k.exports=h["default"]},function(k,h,c){var g=c(1)["default"];h.__esModule=!0;c=c(6);var a=g(c);h["default"]=function(c){c.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"');})};k.exports=h["default"]},function(k,h,c){h.__esModule=
!0;var g=c(5);h["default"]=function(a){a.registerHelper("if",function(a,c){g.isFunction(a)&&(a=a.call(this));return!c.hash.includeZero&&!a||g.isEmpty(a)?c.inverse(this):c.fn(this)});a.registerHelper("unless",function(c,d){return a.helpers["if"].call(this,c,{fn:d.inverse,inverse:d.fn,hash:d.hash})})};k.exports=h["default"]},function(k,h){h.__esModule=!0;h["default"]=function(c){c.registerHelper("log",function(){for(var g=[void 0],a=arguments[arguments.length-1],f=0;f<arguments.length-1;f++)g.push(arguments[f]);
f=1;null!=a.hash.level?f=a.hash.level:a.data&&null!=a.data.level&&(f=a.data.level);g[0]=f;c.log.apply(c,g)})};k.exports=h["default"]},function(k,h){h.__esModule=!0;h["default"]=function(c){c.registerHelper("lookup",function(c,a){return c&&c[a]})};k.exports=h["default"]},function(k,h,c){h.__esModule=!0;var g=c(5);h["default"]=function(a){a.registerHelper("with",function(a,c){g.isFunction(a)&&(a=a.call(this));var b=c.fn;if(g.isEmpty(a))return c.inverse(this);var d=c.data;c.data&&c.ids&&(d=g.createFrame(c.data),
d.contextPath=g.appendContextPath(c.data.contextPath,c.ids[0]));return b(a,{data:d,blockParams:g.blockParams([a],[d&&d.contextPath])})})};k.exports=h["default"]},function(k,h,c){k=c(1)["default"];h.__esModule=!0;h.registerDefaultDecorators=function(a){g["default"](a)};h=c(19);var g=k(h)},function(k,h,c){h.__esModule=!0;var g=c(5);h["default"]=function(a){a.registerDecorator("inline",function(a,c,b,h){var d=a;c.partials||(c.partials={},d=function(d,f){var h=b.partials;b.partials=g.extend({},h,c.partials);
d=a(d,f);b.partials=h;return d});c.partials[h.args[0]]=h.fn;return d})};k.exports=h["default"]},function(k,h,c){h.__esModule=!0;var g=c(5),a={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(c){if("string"===typeof c){var d=g.indexOf(a.methodMap,c.toLowerCase());c=0<=d?d:parseInt(c,10)}return c},log:function(c){c=a.lookupLevel(c);if("undefined"!==typeof console&&a.lookupLevel(a.level)<=c){var d=a.methodMap[c];console[d]||(d="log");for(var b=arguments.length,f=Array(1<b?
b-1:0),g=1;g<b;g++)f[g-1]=arguments[g];console[d].apply(console,f)}}};h["default"]=a;k.exports=h["default"]},function(k,h){function c(c){this.string=c}h.__esModule=!0;c.prototype.toString=c.prototype.toHTML=function(){return""+this.string};h["default"]=c;k.exports=h["default"]},function(k,h,c){function g(a,b,c,f,g,h,l){function k(b){var d=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],g=l;!l||b==l[0]||b===a.nullContext&&null===l[0]||(g=[b].concat(l));return c(a,b,a.helpers,a.partials,
d.data||f,h&&[d.blockParams].concat(h),g)}k=d(c,k,a,l,f,h);k.program=b;k.depth=l?l.length:0;k.blockParams=g||0;return k}function a(){return""}function f(a,b){b&&"root"in b||(b=b?r.createFrame(b):{},b.root=a);return b}function d(a,b,c,d,f,g){if(a.decorator){var h={};b=a.decorator(b,h,c,d&&d[0],f,g,d);n.extend(b,h)}return b}var b=c(23)["default"],l=c(3)["default"];k=c(1)["default"];h.__esModule=!0;h.checkRevision=function(a){var b=a&&a[0]||1,c=r.COMPILER_REVISION;if(b!==c){if(b<c)throw new p["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+
r.REVISION_CHANGES[c]+") or downgrade your runtime to an older version ("+r.REVISION_CHANGES[b]+").");throw new p["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").");}};h.template=function(a,c){function h(b){function c(b){return""+a.main(l,b,l.helpers,l.partials,k,p,n)}var g=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],k=g.data;h._setup(g);!g.partial&&a.useData&&(k=f(b,k));var n=
void 0,p=a.useBlockParams?[]:void 0;a.useDepths&&(n=g.depths?b!=g.depths[0]?[b].concat(g.depths):g.depths:[b]);c=d(a.main,c,l,g.depths||[],k,p);return c(b,g)}if(!c)throw new p["default"]("No environment passed to template");if(!a||!a.main)throw new p["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d;c.VM.checkRevision(a.compiler);var l={strict:function(a,b){if(!(b in a))throw new p["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,
d=0;d<c;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"===typeof a?a.call(b):a},escapeExpression:n.escapeExpression,invokePartial:function(b,d,f){f.hash&&(d=n.extend({},d,f.hash),f.ids&&(f.ids[0]=!0));b=c.VM.resolvePartial.call(this,b,d,f);var g=c.VM.invokePartial.call(this,b,d,f);null==g&&c.compile&&(f.partials[f.name]=c.compile(b,a.compilerOptions,c),g=f.partials[f.name](d,f));if(null!=g){if(f.indent){b=g.split("\n");d=0;for(g=b.length;d<g&&(b[d]||d+1!==g);d++)b[d]=
f.indent+b[d];g=b.join("\n")}return g}throw new p["default"]("The partial "+f.name+" could not be compiled when running in runtime-only mode");},fn:function(b){var c=a[b];c.decorator=a[b+"_d"];return c},programs:[],program:function(a,b,c,d,f){var h=this.programs[a],l=this.fn(a);b||f||d||c?h=g(this,a,l,b,c,d,f):h||(h=this.programs[a]=g(this,a,l));return h},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;a&&b&&a!==b&&(c=n.extend({},b,a));return c},nullContext:b({}),
noop:c.VM.noop,compilerInfo:a.compiler};h.isTop=!0;h._setup=function(b){if(b.partial)l.helpers=b.helpers,l.partials=b.partials,l.decorators=b.decorators;else if(l.helpers=l.merge(b.helpers,c.helpers),a.usePartial&&(l.partials=l.merge(b.partials,c.partials)),a.usePartial||a.useDecorators)l.decorators=l.merge(b.decorators,c.decorators)};h._child=function(b,c,d,f){if(a.useBlockParams&&!d)throw new p["default"]("must pass block params");if(a.useDepths&&!f)throw new p["default"]("must pass parent depths");
return g(l,b,a[b],c,0,d,f)};return h};h.wrapProgram=g;h.resolvePartial=function(a,b,c){a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name];return a};h.invokePartial=function(b,c,d){var f=d.data&&d.data["partial-block"];d.partial=!0;d.ids&&(d.data.contextPath=d.ids[0]||d.data.contextPath);var g=void 0;d.fn&&d.fn!==a&&function(){d.data=r.createFrame(d.data);var a=d.fn;g=d.data["partial-block"]=function(b){var c=1>=arguments.length||void 0===
arguments[1]?{}:arguments[1];c.data=r.createFrame(c.data);c.data["partial-block"]=f;return a(b,c)};a.partials&&(d.partials=n.extend({},d.partials,a.partials))}();void 0===b&&g&&(b=g);if(void 0===b)throw new p["default"]("The partial "+d.name+" could not be found");if(b instanceof Function)return b(c,d)};h.noop=a;h=c(5);var n=l(h);h=c(6);var p=k(h),r=c(4)},function(k,h,c){k.exports={"default":c(24),__esModule:!0}},function(k,h,c){c(25);k.exports=c(30).Object.seal},function(k,h,c){var g=c(26);c(27)("seal",
function(a){return function(c){return a&&g(c)?a(c):c}})},function(k,h){k.exports=function(c){return"object"===typeof c?null!==c:"function"===typeof c}},function(k,h,c){var g=c(28),a=c(30),f=c(33);k.exports=function(c,b){var d=(a.Object||{})[c]||Object[c],h={};h[c]=b(d);g(g.S+g.F*f(function(){d(1)}),"Object",h)}},function(k,h,c){var g=c(29),a=c(30),f=c(31),d=function(b,c,h){var l=b&d.F,k=b&d.G,n=b&d.S,z=b&d.P,v=b&d.B;b&=d.W;var t=k?a:a[c]||(a[c]={});n=k?g:n?g[c]:(g[c]||{}).prototype;var q;k&&(h=c);
for(q in h)if(c=!l&&n&&q in n,!(c&&q in t)){var y=c?n[q]:h[q];t[q]=k&&"function"!=typeof n[q]?h[q]:v&&c?f(y,g):b&&n[q]==y?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};b.prototype=a.prototype;return b}(y):z&&"function"==typeof y?f(Function.call,y):y;z&&((t.prototype||(t.prototype={}))[q]=y)}};d.F=1;d.G=2;d.S=4;d.P=8;d.B=16;d.W=32;k.exports=d},function(k,h){k=k.exports="undefined"!=typeof window&&Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();
"number"==typeof __g&&(__g=k)},function(k,h){k=k.exports={version:"1.2.6"};"number"==typeof __e&&(__e=k)},function(k,h,c){var g=c(32);k.exports=function(a,c,d){g(a);if(void 0===c)return a;switch(d){case 1:return function(b){return a.call(c,b)};case 2:return function(b,d){return a.call(c,b,d)};case 3:return function(b,d,f){return a.call(c,b,d,f)}}return function(){return a.apply(c,arguments)}}},function(k,h){k.exports=function(c){if("function"!=typeof c)throw TypeError(c+" is not a function!");return c}},
function(k,h){k.exports=function(c){try{return!!c()}catch(g){return!0}}},function(k,h){(function(c){h.__esModule=!0;h["default"]=function(g){var a="undefined"!==typeof c?c:window,f=a.Handlebars;g.noConflict=function(){a.Handlebars===g&&(a.Handlebars=f);return g}};k.exports=h["default"]}).call(h,function(){return this}())},function(k,h){h.__esModule=!0;var c={helpers:{helperExpression:function(c){return"SubExpression"===c.type||("MustacheStatement"===c.type||"BlockStatement"===c.type)&&!!(c.params&&
c.params.length||c.hash)},scopedId:function(c){return/^\.|this\b/.test(c.original)},simpleId:function(g){return 1===g.parts.length&&!c.helpers.scopedId(g)&&!g.depth}}};h["default"]=c;k.exports=h["default"]},function(k,h,c){var g=c(1)["default"];k=c(3)["default"];h.__esModule=!0;h.parse=function(a,c){if("Program"===a.type)return a;f["default"].yy=b;b.locInfo=function(a){return new b.SourceLocation(c&&c.srcName,a)};return(new d["default"](c)).accept(f["default"].parse(a))};var a=c(37),f=g(a);a=c(38);
var d=g(a);g=c(40);k=k(g);c=c(5);h.parser=f["default"];var b={};c.extend(b,k)},function(k,h){h.__esModule=!0;var c=function(){function c(){this.yy={}}var a={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,
openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,
mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,
path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",
77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,
1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(a,b,c,f,g,h,k){a=h.length-1;switch(g){case 1:return h[a-1];case 2:this.$=f.prepareProgram(h[a]);break;case 3:this.$=h[a];break;case 4:this.$=h[a];break;case 5:this.$=
h[a];break;case 6:this.$=h[a];break;case 7:this.$=h[a];break;case 8:this.$=h[a];break;case 9:this.$={type:"CommentStatement",value:f.stripComment(h[a]),strip:f.stripFlags(h[a],h[a]),loc:f.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:h[a],value:h[a],loc:f.locInfo(this._$)};break;case 11:this.$=f.prepareRawBlock(h[a-2],h[a-1],h[a],this._$);break;case 12:this.$={path:h[a-3],params:h[a-2],hash:h[a-1]};break;case 13:this.$=f.prepareBlock(h[a-3],h[a-2],h[a-1],h[a],!1,this._$);
break;case 14:this.$=f.prepareBlock(h[a-3],h[a-2],h[a-1],h[a],!0,this._$);break;case 15:this.$={open:h[a-5],path:h[a-4],params:h[a-3],hash:h[a-2],blockParams:h[a-1],strip:f.stripFlags(h[a-5],h[a])};break;case 16:this.$={path:h[a-4],params:h[a-3],hash:h[a-2],blockParams:h[a-1],strip:f.stripFlags(h[a-5],h[a])};break;case 17:this.$={path:h[a-4],params:h[a-3],hash:h[a-2],blockParams:h[a-1],strip:f.stripFlags(h[a-5],h[a])};break;case 18:this.$={strip:f.stripFlags(h[a-1],h[a-1]),program:h[a]};break;case 19:g=
f.prepareBlock(h[a-2],h[a-1],h[a],h[a],!1,this._$);f=f.prepareProgram([g],h[a-1].loc);f.chained=!0;this.$={strip:h[a-2].strip,program:f,chain:!0};break;case 20:this.$=h[a];break;case 21:this.$={path:h[a-1],strip:f.stripFlags(h[a-2],h[a])};break;case 22:this.$=f.prepareMustache(h[a-3],h[a-2],h[a-1],h[a-4],f.stripFlags(h[a-4],h[a]),this._$);break;case 23:this.$=f.prepareMustache(h[a-3],h[a-2],h[a-1],h[a-4],f.stripFlags(h[a-4],h[a]),this._$);break;case 24:this.$={type:"PartialStatement",name:h[a-3],
params:h[a-2],hash:h[a-1],indent:"",strip:f.stripFlags(h[a-4],h[a]),loc:f.locInfo(this._$)};break;case 25:this.$=f.preparePartialBlock(h[a-2],h[a-1],h[a],this._$);break;case 26:this.$={path:h[a-3],params:h[a-2],hash:h[a-1],strip:f.stripFlags(h[a-4],h[a])};break;case 27:this.$=h[a];break;case 28:this.$=h[a];break;case 29:this.$={type:"SubExpression",path:h[a-3],params:h[a-2],hash:h[a-1],loc:f.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:h[a],loc:f.locInfo(this._$)};break;case 31:this.$=
{type:"HashPair",key:f.id(h[a-2]),value:h[a],loc:f.locInfo(this._$)};break;case 32:this.$=f.id(h[a-1]);break;case 33:this.$=h[a];break;case 34:this.$=h[a];break;case 35:this.$={type:"StringLiteral",value:h[a],original:h[a],loc:f.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(h[a]),original:Number(h[a]),loc:f.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===h[a],original:"true"===h[a],loc:f.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",
original:void 0,value:void 0,loc:f.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:f.locInfo(this._$)};break;case 40:this.$=h[a];break;case 41:this.$=h[a];break;case 42:this.$=f.preparePath(!0,h[a],this._$);break;case 43:this.$=f.preparePath(!1,h[a],this._$);break;case 44:h[a-2].push({part:f.id(h[a]),original:h[a],separator:h[a-1]});this.$=h[a-2];break;case 45:this.$=[{part:f.id(h[a]),original:h[a]}];break;case 46:this.$=[];break;case 47:h[a-1].push(h[a]);break;
case 48:this.$=[h[a]];break;case 49:h[a-1].push(h[a]);break;case 50:this.$=[];break;case 51:h[a-1].push(h[a]);break;case 58:this.$=[];break;case 59:h[a-1].push(h[a]);break;case 64:this.$=[];break;case 65:h[a-1].push(h[a]);break;case 70:this.$=[];break;case 71:h[a-1].push(h[a]);break;case 78:this.$=[];break;case 79:h[a-1].push(h[a]);break;case 82:this.$=[];break;case 83:h[a-1].push(h[a]);break;case 86:this.$=[];break;case 87:h[a-1].push(h[a]);break;case 90:this.$=[];break;case 91:h[a-1].push(h[a]);
break;case 94:this.$=[];break;case 95:h[a-1].push(h[a]);break;case 98:this.$=[h[a]];break;case 99:h[a-1].push(h[a]);break;case 100:this.$=[h[a]];break;case 101:h[a-1].push(h[a])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},
{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,
6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,
28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],
82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,
35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],
80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,
38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,
45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],
83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,
90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,
34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],
47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],
82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,
32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,
28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,
83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,
14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,
75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},
{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,
34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],
29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,
15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,
93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(a,b){throw Error(a);},parse:function(a){var b=[0],c=[null],d=[],f=this.table,g="",h=0,k=0,v=0;this.lexer.setInput(a);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});a=this.lexer.yylloc;d.push(a);var t=this.lexer.options&&this.lexer.options.ranges;"function"===typeof this.yy.parseError&&(this.parseError=this.yy.parseError);
for(var q,y,A,C,G={},E,F;;){A=b[b.length-1];if(this.defaultActions[A])C=this.defaultActions[A];else{if(null===q||"undefined"==typeof q)q=this.lexer.lex()||1,"number"!==typeof q&&(q=this.symbols_[q]||q);C=f[A]&&f[A][q]}if(!("undefined"!==typeof C&&C.length&&C[0]||v)){F=[];for(E in f[A])this.terminals_[E]&&2<E&&F.push("'"+this.terminals_[E]+"'");var I=this.lexer.showPosition?"Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+F.join(", ")+", got '"+(this.terminals_[q]||q)+"'":
"Parse error on line "+(h+1)+": Unexpected "+(1==q?"end of input":"'"+(this.terminals_[q]||q)+"'");this.parseError(I,{text:this.lexer.match,token:this.terminals_[q]||q,line:this.lexer.yylineno,loc:a,expected:F})}if(C[0]instanceof Array&&1<C.length)throw Error("Parse Error: multiple actions possible at state: "+A+", token: "+q);switch(C[0]){case 1:b.push(q);c.push(this.lexer.yytext);d.push(this.lexer.yylloc);b.push(C[1]);q=null;y?(q=y,y=null):(k=this.lexer.yyleng,g=this.lexer.yytext,h=this.lexer.yylineno,
a=this.lexer.yylloc,0<v&&v--);break;case 2:F=this.productions_[C[1]][1];G.$=c[c.length-F];G._$={first_line:d[d.length-(F||1)].first_line,last_line:d[d.length-1].last_line,first_column:d[d.length-(F||1)].first_column,last_column:d[d.length-1].last_column};t&&(G._$.range=[d[d.length-(F||1)].range[0],d[d.length-1].range[1]]);A=this.performAction.call(G,g,k,h,this.yy,C[1],c,d);if("undefined"!==typeof A)return A;F&&(b=b.slice(0,-2*F),c=c.slice(0,-1*F),d=d.slice(0,-1*F));b.push(this.productions_[C[1]][0]);
c.push(G.$);d.push(G._$);C=f[b[b.length-2]][b[b.length-1]];b.push(C);break;case 3:return!0}}}},f=function(){return{EOF:1,parseError:function(a,b){if(this.yy.parser)this.yy.parser.parseError(a,b);else throw Error(a);},setInput:function(a){this._input=a;this._more=this._less=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);
this.offset=0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-b-1);this.offset-=b;a=this.match.split(/(?:\r\n?|\n)/g);
this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);c.length-1&&(this.yylineno-=c.length-1);var d=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===a.length?this.yylloc.first_column:0)+a[a.length-c.length].length-c[0].length:this.yylloc.first_column-b};this.options.ranges&&(this.yylloc.range=[d[0],d[0]+this.yyleng-b]);return this},more:function(){this._more=
!0;return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;
this._input||(this.done=!0);var a;this._more||(this.match=this.yytext="");for(var b=this._currentRules(),c=0;c<b.length;c++)if((a=this._input.match(this.rules[b[c]]))&&(!f||a[0].length>f[0].length)){var f=a;var g=c;if(!this.options.flex)break}if(f){if(a=f[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=a.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:a?a[a.length-1].length-a[a.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+
f[0].length};this.yytext+=f[0];this.match+=f[0];this.matches=f;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=!1;this._input=this._input.slice(f[0].length);this.matched+=f[0];f=this.performAction.call(this,this.yy,this,b[g],this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(f)return f}else return""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+
this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!==typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)},options:{},performAction:function(a,b,c,f){function d(a,
c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:"\\\\"===b.yytext.slice(-2)?(d(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(d(0,1),this.begin("emu")):this.begin("mu");if(b.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:this.popState();if("raw"===this.conditionStack[this.conditionStack.length-1])return 15;b.yytext=b.yytext.substr(5,b.yyleng-9);return"END_RAW_BLOCK";case 5:return 15;case 6:return this.popState(),
14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(b.yytext);this.popState();this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;
case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return b.yytext=d(1,2).replace(/\\"/g,'"'),80;case 32:return b.yytext=d(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return b.yytext=b.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,
/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,
/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,
29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}}}();a.lexer=f;c.prototype=a;a.Parser=c;return new c}();h["default"]=c;k.exports=h["default"]},function(k,h,c){function g(){this.options=0>=arguments.length||void 0===arguments[0]?{}:arguments[0]}function a(a,b,c){void 0===b&&(b=a.length);var d=a[b-1];a=a[b-2];if(!d)return c;if("ContentStatement"===d.type)return(a||
!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original)}function f(a,b,c){void 0===b&&(b=-1);var d=a[b+1];a=a[b+2];if(!d)return c;if("ContentStatement"===d.type)return(a||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original)}function d(a,b,c){!(a=a[null==b?0:b+1])||"ContentStatement"!==a.type||!c&&a.rightStripped||(b=a.value,a.value=a.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),a.rightStripped=a.value!==b)}function b(a,b,c){if((a=a[null==b?a.length-1:b-1])&&"ContentStatement"===a.type&&(c||!a.leftStripped))return b=
a.value,a.value=a.value.replace(c?/\s+$/:/[ \t]+$/,""),a.leftStripped=a.value!==b,a.leftStripped}var l=c(1)["default"];h.__esModule=!0;c=c(39);l=l(c);g.prototype=new l["default"];g.prototype.Program=function(c){var g=!this.options.ignoreStandalone,h=!this.isRootSeen;this.isRootSeen=!0;for(var l=c.body,k=0,n=l.length;k<n;k++){var t=l[k],q=this.accept(t);if(q){var y=a(l,k,h),A=f(l,k,h),C=q.openStandalone&&y,G=q.closeStandalone&&A;y=q.inlineStandalone&&y&&A;q.close&&d(l,k,!0);q.open&&b(l,k,!0);g&&y&&
(d(l,k),b(l,k)&&"PartialStatement"===t.type&&(t.indent=/([ \t]+$)/.exec(l[k-1].original)[1]));g&&C&&(d((t.program||t.inverse).body),b(l,k));g&&G&&(d(l,k),b((t.inverse||t.program).body))}}return c};g.prototype.BlockStatement=g.prototype.DecoratorBlock=g.prototype.PartialBlockStatement=function(c){this.accept(c.program);this.accept(c.inverse);var g=c.program||c.inverse,h=c.program&&c.inverse,l=h,k=h;if(h&&h.chained)for(l=h.body[0].program;k.chained;)k=k.body[k.body.length-1].program;var n={open:c.openStrip.open,
close:c.closeStrip.close,openStandalone:f(g.body),closeStandalone:a((l||g).body)};c.openStrip.close&&d(g.body,null,!0);h?(h=c.inverseStrip,h.open&&b(g.body,null,!0),h.close&&d(l.body,null,!0),c.closeStrip.open&&b(k.body,null,!0),!this.options.ignoreStandalone&&a(g.body)&&f(l.body)&&(b(g.body),d(l.body))):c.closeStrip.open&&b(g.body,null,!0);return n};g.prototype.Decorator=g.prototype.MustacheStatement=function(a){return a.strip};g.prototype.PartialStatement=g.prototype.CommentStatement=function(a){a=
a.strip||{};return{inlineStandalone:!0,open:a.open,close:a.close}};h["default"]=g;k.exports=h["default"]},function(k,h,c){function g(){this.parents=[]}function a(a){this.acceptRequired(a,"path");this.acceptArray(a.params);this.acceptKey(a,"hash")}function f(b){a.call(this,b);this.acceptKey(b,"program");this.acceptKey(b,"inverse")}function d(a){this.acceptRequired(a,"name");this.acceptArray(a.params);this.acceptKey(a,"hash")}var b=c(1)["default"];h.__esModule=!0;c=c(6);var l=b(c);g.prototype={constructor:g,
mutating:!1,acceptKey:function(a,b){var c=this.accept(a[b]);if(this.mutating){if(c&&!g.prototype[c.type])throw new l["default"]('Unexpected node type "'+c.type+'" found when accepting '+b+" on "+a.type);a[b]=c}},acceptRequired:function(a,b){this.acceptKey(a,b);if(!a[b])throw new l["default"](a.type+" requires "+b);},acceptArray:function(a){for(var b=0,c=a.length;b<c;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){if(!this[a.type])throw new l["default"]("Unknown type: "+
a.type,a);this.current&&this.parents.unshift(this.current);this.current=a;var b=this[a.type](a);this.current=this.parents.shift();if(!this.mutating||b)return b;if(!1!==b)return a}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:a,Decorator:a,BlockStatement:f,DecoratorBlock:f,PartialStatement:d,PartialBlockStatement:function(a){d.call(this,a);this.acceptKey(a,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:a,PathExpression:function(){},StringLiteral:function(){},
NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}};h["default"]=g;k.exports=h["default"]},function(k,h,c){function g(c,d){d=d.path?d.path.original:d;if(c.path.original!==d)throw new a["default"](c.path.original+" doesn't match "+d,{loc:c.path.loc});}k=c(1)["default"];h.__esModule=!0;h.SourceLocation=function(a,c){this.source=a;this.start={line:c.first_line,
column:c.first_column};this.end={line:c.last_line,column:c.last_column}};h.id=function(a){return/^\[.*\]$/.test(a)?a.substr(1,a.length-2):a};h.stripFlags=function(a,c){return{open:"~"===a.charAt(2),close:"~"===c.charAt(c.length-3)}};h.stripComment=function(a){return a.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")};h.preparePath=function(c,d,b){b=this.locInfo(b);for(var f=c?"@":"",g=[],h=0,k=0,w=d.length;k<w;k++){var z=d[k].part,v=d[k].original!==z;f+=(d[k].separator||"")+z;if(v||".."!==z&&
"."!==z&&"this"!==z)g.push(z);else{if(0<g.length)throw new a["default"]("Invalid path: "+f,{loc:b});".."===z&&h++}}return{type:"PathExpression",data:c,depth:h,parts:g,original:f,loc:b}};h.prepareMustache=function(a,c,b,g,h,k){var d=g.charAt(3)||g.charAt(2);d="{"!==d&&"&"!==d;return{type:/\*/.test(g)?"Decorator":"MustacheStatement",path:a,params:c,hash:b,escaped:d,strip:h,loc:this.locInfo(k)}};h.prepareRawBlock=function(a,c,b,h){g(a,b);h=this.locInfo(h);return{type:"BlockStatement",path:a.path,params:a.params,
hash:a.hash,program:{type:"Program",body:c,strip:{},loc:h},openStrip:{},inverseStrip:{},closeStrip:{},loc:h}};h.prepareBlock=function(c,d,b,h,k,p){h&&h.path&&g(c,h);var f=/\*/.test(c.open);d.blockParams=c.blockParams;var l=void 0,n=void 0;if(b){if(f)throw new a["default"]("Unexpected inverse block on decorator",b);b.chain&&(b.program.body[0].closeStrip=h.strip);n=b.strip;l=b.program}k&&(k=l,l=d,d=k);return{type:f?"DecoratorBlock":"BlockStatement",path:c.path,params:c.params,hash:c.hash,program:d,
inverse:l,openStrip:c.strip,inverseStrip:n,closeStrip:h&&h.strip,loc:this.locInfo(p)}};h.prepareProgram=function(a,c){if(!c&&a.length){var b=a[0].loc,d=a[a.length-1].loc;b&&d&&(c={source:b.source,start:{line:b.start.line,column:b.start.column},end:{line:d.end.line,column:d.end.column}})}return{type:"Program",body:a,strip:{},loc:c}};h.preparePartialBlock=function(a,c,b,h){g(a,b);return{type:"PartialBlockStatement",name:a.path,params:a.params,hash:a.hash,program:c,openStrip:a.strip,closeStrip:b&&b.strip,
loc:this.locInfo(h)}};h=c(6);var a=k(h)},function(k,h,c){function g(){}function a(c,d){if(c===d)return!0;if(b.isArray(c)&&b.isArray(d)&&c.length===d.length){for(var f=0;f<c.length;f++)if(!a(c[f],d[f]))return!1;return!0}}function f(a){if(!a.path.parts){var b=a.path;a.path={type:"PathExpression",data:!1,depth:0,parts:[b.original+""],original:b.original+"",loc:b.loc}}}k=c(1)["default"];h.__esModule=!0;h.Compiler=g;h.precompile=function(a,b,c){if(null==a||"string"!==typeof a&&"Program"!==a.type)throw new d["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+
a);b=b||{};"data"in b||(b.data=!0);b.compat&&(b.useDepths=!0);a=c.parse(a,b);a=(new c.Compiler).compile(a,b);return(new c.JavaScriptCompiler).compile(a,b)};h.compile=function(a,b,c){function f(){var d=c.parse(a,b);d=(new c.Compiler).compile(d,b);d=(new c.JavaScriptCompiler).compile(d,b,void 0,!0);return c.template(d)}function g(a,b){h||(h=f());return h.call(this,a,b)}void 0===b&&(b={});if(null==a||"string"!==typeof a&&"Program"!==a.type)throw new d["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+
a);"data"in b||(b.data=!0);b.compat&&(b.useDepths=!0);var h=void 0;g._setup=function(a){h||(h=f());return h._setup(a)};g._child=function(a,b,c,d){h||(h=f());return h._child(a,b,c,d)};return g};h=c(6);var d=k(h),b=c(5);c=c(35);var l=k(c),n=[].slice;g.prototype={compiler:g,equals:function(b){var c=this.opcodes.length;if(b.opcodes.length!==c)return!1;for(var d=0;d<c;d++){var f=this.opcodes[d],g=b.opcodes[d];if(f.opcode!==g.opcode||!a(f.args,g.args))return!1}c=this.children.length;for(d=0;d<c;d++)if(!this.children[d].equals(b.children[d]))return!1;
return!0},guid:0,compile:function(a,b){this.sourceNode=[];this.opcodes=[];this.children=[];this.options=b;this.stringParams=b.stringParams;this.trackIds=b.trackIds;b.blockParams=b.blockParams||[];var c=b.knownHelpers;b.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0};if(c)for(var d in c)d in c&&(b.knownHelpers[d]=c[d]);return this.accept(a)},compileProgram:function(a){a=(new this.compiler).compile(a,this.options);var b=this.guid++;this.usePartial=
this.usePartial||a.usePartial;this.children[b]=a;this.useDepths=this.useDepths||a.useDepths;return b},accept:function(a){if(!this[a.type])throw new d["default"]("Unknown type: "+a.type,a);this.sourceNode.unshift(a);a=this[a.type](a);this.sourceNode.shift();return a},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;d<c;d++)this.accept(b[d]);this.options.blockParams.shift();this.isSimple=1===c;this.blockParams=a.blockParams?a.blockParams.length:0;return this},
BlockStatement:function(a){f(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b);c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},
DecoratorBlock:function(a){var b=a.program&&this.compileProgram(a.program);b=this.setupFullMustacheParams(a,b,void 0);a=a.path;this.useDecorators=!0;this.opcode("registerDecorator",b.length,a.original)},PartialStatement:function(a){this.usePartial=!0;var b=a.program;b&&(b=this.compileProgram(a.program));var c=a.params;if(1<c.length)throw new d["default"]("Unsupported number of partial arguments: "+c.length,a);c.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):c.push({type:"PathExpression",
parts:[],depth:0}));c=a.name.original;var f="SubExpression"===a.name.type;f&&this.accept(a.name);this.setupFullMustacheParams(a,b,void 0,!0);a=a.indent||"";this.options.preventIndent&&a&&(this.opcode("appendContent",a),a="");this.opcode("invokePartial",f,c,a);this.opcode("append")},PartialBlockStatement:function(a){this.PartialStatement(a)},MustacheStatement:function(a){this.SubExpression(a);a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(a){this.DecoratorBlock(a)},
ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){f(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){a=a.path;var d=a.parts[0],f=null!=b||null!=c;this.opcode("getContext",a.depth);this.opcode("pushProgram",b);this.opcode("pushProgram",c);a.strict=!0;this.accept(a);this.opcode("invokeAmbiguous",d,f)},simpleSexpr:function(a){a=
a.path;a.strict=!0;this.accept(a);this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){b=this.setupFullMustacheParams(a,b,c);c=a.path;var f=c.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",b.length,f);else{if(this.options.knownHelpersOnly)throw new d["default"]("You specified knownHelpersOnly, but used the unknown helper "+f,a);c.strict=!0;c.falsy=!0;this.accept(c);this.opcode("invokeHelper",b.length,c.original,l["default"].helpers.simpleId(c))}},PathExpression:function(a){this.addDepth(a.depth);
this.opcode("getContext",a.depth);var b=a.parts[0],c=l["default"].helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts,a.strict)):this.opcode("lookupOnContext",a.parts,a.falsy,a.strict,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",
a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){a=a.pairs;var b=0,c=a.length;for(this.opcode("pushHash");b<c;b++)this.pushParam(a[b].value);for(;b--;)this.opcode("assignToHash",a[b].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:n.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=l["default"].helpers.simpleId(a.path),
c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&l["default"].helpers.helperExpression(a);(b=!c&&(d||b))&&!d&&(c=this.options,c.knownHelpers[a.path.parts[0]]?d=!0:c.knownHelpersOnly&&(b=!1));return d?"helper":b?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;b<c;b++)this.pushParam(a[b])},pushParam:function(a){var b=null!=a.value?a.value:a.original||"";if(this.stringParams)b.replace&&(b=b.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",
a.depth||0),this.opcode("pushStringParam",b,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var c=void 0;!a.parts||l["default"].helpers.scopedId(a)||a.depth||(c=this.blockParamIndex(a.parts[0]));c?(b=a.parts.slice(1).join("."),this.opcode("pushId","BlockParam",c,b)):(b=a.original||b,b.replace&&(b=b.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",a.type,b))}this.accept(a)}},setupFullMustacheParams:function(a,b,c,d){var f=a.params;this.pushParams(f);
this.opcode("pushProgram",b);this.opcode("pushProgram",c);a.hash?this.accept(a.hash):this.opcode("emptyHash",d);return f},blockParamIndex:function(a){for(var c=0,d=this.options.blockParams.length;c<d;c++){var f=this.options.blockParams[c],g=f&&b.indexOf(f,a);if(f&&0<=g)return[c,g]}}}},function(k,h,c){function g(a){this.value=a}function a(){}function f(a,b,c,d){var f=b.popStack(),g=0,h=c.length;for(a&&h--;g<h;g++)f=b.nameLookup(f,c[g],d);return a?[b.aliasable("container.strict"),"(",f,", ",b.quotedString(c[g]),
")"]:f}var d=c(1)["default"];h.__esModule=!0;var b=c(4),l=c(6),n=d(l),p=c(5);c=c(43);var r=d(c);a.prototype={nameLookup:function(b,c){return a.isValidJavaScriptVariableName(c)?[b,".",c]:[b,"[",JSON.stringify(c),"]"]},depthedLookup:function(a){return[this.aliasable("container.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=b.COMPILER_REVISION;return[a,b.REVISION_CHANGES[a]]},appendToBuffer:function(a,b,c){p.isArray(a)||(a=[a]);a=this.source.wrap(a,b);if(this.environment.isSimple)return["return ",
a,";"];if(c)return["buffer += ",a,";"];a.appendToBuffer=!0;return a},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a;this.options=b;this.stringParams=this.options.stringParams;this.trackIds=this.options.trackIds;this.precompile=!d;this.name=this.environment.name;this.isChild=!!c;this.context=c||{decorators:[],programs:[],environments:[]};this.preamble();this.stackSlot=0;this.stackVars=[];this.aliases={};this.registers={list:[]};this.hashes=[];
this.compileStack=[];this.inlineStack=[];this.blockParams=[];this.compileChildren(a,b);this.useDepths=this.useDepths||a.useDepths||a.useDecorators||this.options.compat;this.useBlockParams=this.useBlockParams||a.useBlockParams;var f=a.opcodes,g=void 0;a=0;for(c=f.length;a<c;a++){var h=f[a];this.source.currentLocation=h.loc;g=g||h.loc;this[h.opcode].apply(this,h.args)}this.source.currentLocation=g;this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new n["default"]("Compile completed with content left on stack");
this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),d?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));a=this.createFunctionContext(d);
if(this.isChild)return a;f={compiler:this.compilerInfo(),main:a};this.decorators&&(f.main_d=this.decorators,f.useDecorators=!0);a=this.context;h=a.programs;g=a.decorators;a=0;for(c=h.length;a<c;a++)h[a]&&(f[a]=h[a],g[a]&&(f[a+"_d"]=g[a],f.useDecorators=!0));this.environment.usePartial&&(f.usePartial=!0);this.options.data&&(f.useData=!0);this.useDepths&&(f.useDepths=!0);this.useBlockParams&&(f.useBlockParams=!0);this.options.compat&&(f.compat=!0);d?f.compilerOptions=this.options:(f.compiler=JSON.stringify(f.compiler),
this.source.currentLocation={start:{line:1,column:0}},f=this.objectLiteral(f),b.srcName?(f=f.toStringWithSourceMap({file:b.destName}),f.map=f.map&&f.map.toString()):f=f.toString());return f},preamble:function(){this.lastContext=0;this.source=new r["default"](this.options.srcName);this.decorators=new r["default"](this.options.srcName)},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);0<c.length&&(b+=", "+c.join(", "));c=0;for(var d in this.aliases){var f=this.aliases[d];
this.aliases.hasOwnProperty(d)&&f.children&&1<f.referenceCount&&(b+=", alias"+ ++c+"="+d,f.children[0]="alias"+c)}d=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&d.push("blockParams");this.useDepths&&d.push("depths");b=this.mergeSource(b);return a?(d.push(b),Function.apply(this,d)):this.source.wrap(["function(",d.join(","),") {\n  ",b,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,f=void 0,g=void 0,h=void 0;this.source.each(function(a){a.appendToBuffer?
(g?a.prepend("  + "):g=a,h=a):(g&&(f?g.prepend("buffer += "):d=!0,h.add(";"),g=h=void 0),f=!0,b||(c=!1))});c?g?(g.prepend("return "),h.add(";")):f||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),g?(g.prepend("return buffer + "),h.add(";")):this.source.push("return buffer;"));a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n"));return this.source.merge()},blockValue:function(a){var b=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,
0,c);a=this.popStack();c.splice(1,0,a);this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0);this.flushInline();var c=this.topStack();b.splice(1,0,c);this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation;
this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]);this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),
")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c,d){var f=0;d||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[f++]));this.resolvePath("context",a,f,b,c)},lookupBlockParam:function(a,b){this.useBlockParams=!0;this.push(["blockParams[",a[0],"][",a[1],"]"]);this.resolvePath("context",b,1)},lookupData:function(a,b,c){a?this.pushStackLiteral("container.data(data, "+
a+")"):this.pushStackLiteral("data");this.resolvePath("data",b,0,!0,c)},resolvePath:function(a,b,c,d,g){var h=this;if(this.options.strict||this.options.assumeObjects)this.push(f(this.options.strict&&g,this,b,a));else for(g=b.length;c<g;c++)this.replaceStack(function(f){var g=h.nameLookup(f,b[c],a);return d?[" && ",g]:[" != null ? ",g," : ",f]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,
b){this.pushContext();this.pushString(b);"SubExpression"!==b&&("string"===typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}");this.stringParams&&(this.push("{}"),this.push("{}"));this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash);this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop();this.trackIds&&this.push(this.objectLiteral(a.ids));
this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types)));this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},registerDecorator:function(a,b){var c=this.nameLookup("decorators",b,"decorator");a=this.setupHelperArgs(b,a);this.decorators.push(["fn = ",
this.decorators.functionCall(c,"",["fn","props","container",a])," || fn;"])},invokeHelper:function(a,b,c){var d=this.popStack();a=this.setupHelper(a,b);c=["("].concat(c?[a.name," || "]:"",d);this.options.strict||c.push(" || ",this.aliasable("helpers.helperMissing"));c.push(")");this.push(this.source.functionCall(c,"call",a.callParams))},invokeKnownHelper:function(a,b){a=this.setupHelper(a,b);this.push(this.source.functionCall(a.name,"call",a.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");
var c=this.popStack();this.emptyHash();b=this.setupHelper(0,a,b);a=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",a,"helper")," || ",c,")"];this.options.strict||(a[0]="(helper = ",a.push(" != null ? helper : ",this.aliasable("helpers.helperMissing")));this.push(["(",a,b.paramsInit?["),(",b.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",b.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],f=this.setupParams(b,
1,d);a&&(b=this.popStack(),delete f.name);c&&(f.indent=JSON.stringify(c));f.helpers="helpers";f.partials="partials";f.decorators="container.decorators";a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial"));this.options.compat&&(f.depths="depths");f=this.objectLiteral(f);d.push(f);this.push(this.source.functionCall("container.invokePartial","",d))},assignToHash:function(a){var b=this.popStack(),c=void 0,d=void 0,f=void 0;this.trackIds&&(f=this.popStack());this.stringParams&&(d=this.popStack(),
c=this.popStack());var g=this.hash;c&&(g.contexts[a]=c);d&&(g.types[a]=d);f&&(g.ids[a]=f);g.values[a]=b},pushId:function(a,b,c){"BlockParam"===a?this.pushStackLiteral("blockParams["+b[0]+"].path["+b[1]+"]"+(c?" + "+JSON.stringify("."+c):"")):"PathExpression"===a?this.pushString(b):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:a,compileChildren:function(a,b){a=a.children;for(var c,d,f=0,g=a.length;f<g;f++){c=a[f];d=new this.compiler;var h=this.matchExistingProgram(c);
null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context,!this.precompile),this.context.decorators[h]=d.decorators,this.context.environments[h]=c,this.useDepths=this.useDepths||d.useDepths,this.useBlockParams=this.useBlockParams||d.useBlockParams,c.useDepths=this.useDepths,c.useBlockParams=this.useBlockParams):(c.index=h.index,c.name="program"+h.index,this.useDepths=this.useDepths||h.useDepths,this.useBlockParams=
this.useBlockParams||h.useBlockParams)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return d}},programExpression:function(a){a=this.environment.children[a];a=[a.index,"data",a.blockParams];(this.useBlockParams||this.useDepths)&&a.push("blockParams");this.useDepths&&a.push("depths");return"container.program("+a.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},
push:function(a){a instanceof g||(a=this.source.wrap(a));this.inlineStack.push(a);return a},pushStackLiteral:function(a){this.push(new g(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0);a&&this.source.push(a)},replaceStack:function(a){var b=void 0,c=void 0;if(!this.isInline())throw new n["default"]("replaceStack on non-inline");var d=this.popStack(!0);if(d instanceof
g){var f=[d.value];d=["(",f];c=!0}else b=!0,f=this.incrStack(),d=["((",this.push(f)," = ",d,")"],f=this.topStack();a=a.call(this,f);c||this.popStack();b&&this.stackSlot--;this.push(d.concat(a,")"))},incrStack:function(){this.stackSlot++;this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var b=0,c=a.length;b<c;b++){var d=
a[b];if(d instanceof g)this.compileStack.push(d);else{var f=this.incrStack();this.pushSource([f," = ",d,";"]);this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof g)return c.value;if(!b){if(!this.stackSlot)throw new n["default"]("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack;a=a[a.length-
1];return a instanceof g?a.value:a},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];if(b)return b.referenceCount++,b;b=this.aliases[a]=this.source.wrap(a);b.aliasable=!0;b.referenceCount=1;return b},setupHelper:function(a,b,c){var d=[];a=this.setupHelperArgs(b,a,d,c);b=this.nameLookup("helpers",b,"helper");
c=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:d,paramsInit:a,name:b,callParams:[c].concat(d)}},setupParams:function(a,b,c){var d={},f=[],g=[],h=[],k=!c;k&&(c=[]);d.name=this.quotedString(a);d.hash=this.popStack();this.trackIds&&(d.hashIds=this.popStack());this.stringParams&&(d.hashTypes=this.popStack(),d.hashContexts=this.popStack());a=this.popStack();var l=this.popStack();if(l||a)d.fn=l||"container.noop",d.inverse=a||"container.noop";
for(a=b;a--;)b=this.popStack(),c[a]=b,this.trackIds&&(h[a]=this.popStack()),this.stringParams&&(g[a]=this.popStack(),f[a]=this.popStack());k&&(d.args=this.source.generateArray(c));this.trackIds&&(d.ids=this.source.generateArray(h));this.stringParams&&(d.types=this.source.generateArray(g),d.contexts=this.source.generateArray(f));this.options.data&&(d.data="data");this.useBlockParams&&(d.blockParams="blockParams");return d},setupHelperArgs:function(a,b,c,d){a=this.setupParams(a,b,c);a=this.objectLiteral(a);
return d?(this.useRegister("options"),c.push("options"),["options=",a]):c?(c.push(a),""):a}};(function(){for(var b="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),
c=a.RESERVED_WORDS={},d=0,f=b.length;d<f;d++)c[b[d]]=!0})();a.isValidJavaScriptVariableName=function(b){return!a.RESERVED_WORDS[b]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(b)};h["default"]=a;k.exports=h["default"]},function(k,h,c){function g(a,c,d){if(f.isArray(a)){for(var b=[],g=0,h=a.length;g<h;g++)b.push(c.wrap(a[g],d));return b}return"boolean"===typeof a||"number"===typeof a?a+"":a}function a(a){this.srcFile=a;this.source=[]}h.__esModule=!0;var f=c(5),d=void 0;d||(d=function(a,c,d,f){this.src="";f&&
this.add(f)},d.prototype={add:function(a){f.isArray(a)&&(a=a.join(""));this.src+=a},prepend:function(a){f.isArray(a)&&(a=a.join(""));this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}});a.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,c){this.source.unshift(this.wrap(a,c))},push:function(a,c){this.source.push(this.wrap(a,c))},merge:function(){var a=this.empty();this.each(function(b){a.add(["  ",b,"\n"])});
return a},each:function(a){for(var b=0,c=this.source.length;b<c;b++)a(this.source[b])},empty:function(){var a=this.currentLocation||{start:{}};return new d(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var b=1>=arguments.length||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];if(a instanceof d)return a;a=g(a,this,b);return new d(b.start.line,b.start.column,this.srcFile,a)},functionCall:function(a,c,d){d=this.generateList(d);return this.wrap([a,c?"."+c+"(":"(",d,")"])},
quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var d=g(a[c],this);"undefined"!==d&&b.push([this.quotedString(c),":",d])}a=this.generateList(b);a.prepend("{");a.add("}");return a},generateList:function(a){for(var b=this.empty(),c=0,d=a.length;c<d;c++)c&&b.add(","),b.add(g(a[c],this));return b},
generateArray:function(a){a=this.generateList(a);a.prepend("[");a.add("]");return a}};h["default"]=a;k.exports=h["default"]}])});/*
 SlickQuiz jQuery Plugin
 http://github.com/jewlofthelotus/SlickQuiz

 @updated August 9, 2014
 @version 1.5.164

 @author Julie Cameron - http://www.juliecameron.com
 @copyright (c) 2013 Quicken Loans - http://www.quickenloans.com
 @license MIT
*/
(function(k){k.slickQuiz=function(h,c){var g=this,a=k(h),f="#"+a.attr("id");h={checkAnswerText:"Check My Answer!",nextQuestionText:"Next &raquo;",backButtonText:"&laquo; Back",tryAgainText:"",questionCountText:"Question %current of %total",preventUnansweredText:"You must select at least one answer.",questionTemplateText:"%count. %text",scoreTemplateText:"%score / %total",nameTemplateText:"<span>Quiz: </span>%name",skipStartButton:!0,numberOfQuestions:null,randomSortQuestions:!1,randomSortAnswers:!0,
preventUnanswered:!1,disableScore:!1,disableRanking:!0,quizTime:0,displayDetailResult:!0,questionMode:"deferredfeedback",perQuestionResponseMessaging:void 0!=c.questionMode&&"deferredfeedback"!=c.questionMode?!0:!1,perQuestionResponseAnswers:void 0!=c.questionMode&&"deferredfeedback"!=c.questionMode?!0:!1,completionResponseMessaging:void 0!=c.questionMode&&"deferredfeedback"!=c.questionMode?!1:c.displayDetailResult,displayQuestionCount:!1,displayQuestionNumber:!0,submitQuestionText:"Submit",questionPerPage:50,
resultDisplayDetailed:!0,animationCallbacks:{setupQuiz:function(){},startQuiz:function(){},resetQuiz:function(){},checkAnswer:function(){},nextQuestion:function(){},backToQuestion:function(){},completeQuiz:function(){}},events:{onStartQuiz:function(a){},onCompleteQuiz:function(a){}}};var d="nextQuestion",b="."+d,l=f+" .startQuiz",n=f+" .quizName",p=f+" .quizArea",r=f+" .quizResults",w=f+" .quizResultsCopy",z=f+" .quizHeader",v=f+" .quizScore",t=f+" .quizLevel",q=k(l),y=k(n),A=k(p),C=k(r),G=k(w),E=
k(z);k(v);var F=k(t),I=0,e=0;n="";c&&"undefined"!=typeof c.disableNext&&("undefined"==typeof c.preventUnanswered&&(c.preventUnanswered=c.disableNext),n+="The 'disableNext' option has been deprecated, please use 'preventUnanswered' in it's place.\n\n");c&&"undefined"!=typeof c.disableResponseMessaging&&("undefined"==typeof c.preventUnanswered&&(c.perQuestionResponseMessaging=c.disableResponseMessaging),n+="The 'disableResponseMessaging' option has been deprecated, please use 'perQuestionResponseMessaging' and 'completionResponseMessaging' in it's place.\n\n");
c&&"undefined"!=typeof c.randomSort&&("undefined"==typeof c.randomSortQuestions&&(c.randomSortQuestions=c.randomSort),"undefined"==typeof c.randomSortAnswers&&(c.randomSortAnswers=c.randomSort),n+="The 'randomSort' option has been deprecated, please use 'randomSortQuestions' and 'randomSortAnswers' in it's place.\n\n");""!==n&&("undefined"!=typeof console?console.warn(n):alert(n));g.config=k.extend(h,c);var m=k.parseJSON(g.config.json?g.config.json:"undefined"!=typeof quizJSON?quizJSON:null),x=g.config.randomSortQuestions?
m.questions.sort(function(){return Math.round(Math.random())-.5}):m.questions,D=x.length;g.config.numberOfQuestions&&D>=g.config.numberOfQuestions&&(x=x.slice(0,g.config.numberOfQuestions),D=x.length);var H={getKey:function(a){var b=[];for(i=0;i<a;i++)b[i]=k.Deferred();return b},turnKeyAndGo:function(a,b){k.when.apply(null,a).then(function(){b()})},getKeyNotch:function(a,b){return function(){a[b-1].resolve()}}};g.method={setupQuiz:function(a){console.log("quiz data setup quiz");var b=H.getKey(3);
var e=H.getKeyNotch;g.config.quizTime&&0<g.config.quizTime?k("#timeText").html('Time remaining <span id="qztime">'+g.config.quizTime+"</span>"):k("#timeText").html('Elapsed time <span id="qztime">00:00:00</span>');y.hide().html(g.config.nameTemplateText.replace("%name",m.info.name)).fadeIn(1E3,e(b,1));E.hide().prepend(k('<div class="quizDescription">'+m.info.main+"</div>")).fadeIn(1E3,e(b,2));g.config.tryAgainText&&""!==g.config.tryAgainText&&G.append('<p><a class="button tryAgain" href="#">'+g.config.tryAgainText+
"</a></p>");var c=k('<ol class="questions"></ol>'),f=1;for(i in x)if(x.hasOwnProperty(i)){var h=x[i];var l=k('<li data-id="'+h.qid+'" class="question" id="question'+(f-1)+'"></li>');g.config.displayQuestionCount&&l.append('<div class="questionCount">'+g.config.questionCountText.replace("%current",'<span class="current">'+f+"</span>").replace("%total",'<span class="total">'+D+"</span>")+"</div>");var n="";n=g.config.displayQuestionNumber?g.config.questionTemplateText.replace("%count",f).replace("%text",
h.q):h.q;l.append('<div class="quesname"> <span class= "unflagged" title="flag this question for future reference"></span><span class="questext">'+n+"</span></div>");var p=0;for(i in h.a)h.a.hasOwnProperty(i)&&(answer=h.a[i],answer.correct&&p++);n=k('<ul class="answers"></ul>');var t=g.config.randomSortAnswers?h.a.sort(function(){return Math.round(Math.random())-.5}):h.a,v=h.select_any?h.select_any:!1,r=h.force_checkbox?h.force_checkbox:!1,w="question"+(f-1);p=1<p&&!v||r?"checkbox":"radio";f==m.questions.length&&
(d+=" lastQuestion");for(i in t)t.hasOwnProperty(i)&&(answer=t[i],optionId=w+"_"+i.toString(),v='<input id="'+optionId+'" class="ansck" name="'+w+'" type="'+p+'" /> ',r='<label for="'+optionId+'">'+answer.option+"</label>",v=k("<li></li>").append(v).append(r),n.append(v));l.append(n);if(g.config.perQuestionResponseMessaging||g.config.completionResponseMessaging)n=k('<ul class="responses"></ul>'),n.append('<li class="correct">'+h.correct+"</li>"),n.append('<li class="incorrect">'+h.incorrect+"</li>"),
l.append(n);g.config.backButtonText&&""!==g.config.backButtonText&&l.append('<a href="#" class="button backToQuestion">'+g.config.backButtonText+"</a>");g.config.perQuestionResponseMessaging&&(l.append('<a href="#" class="button '+d+'">'+g.config.nextQuestionText+"</a>"),l.append('<a href="#" class="button checkAnswer">'+g.config.checkAnswerText+"</a>"));1>g.config.questionPerPage&&(g.config.questionPerPage=m.questions.length);f==m.questions.length?l.append('<a href="#" class="button '+d+' checkAnswer">'+
g.config.submitQuestionText+"</a>"):f!=g.config.questionPerPage&&0!=f%g.config.questionPerPage||l.append('<a href="#" class="button '+d+'" style = "display: list-item">'+g.config.nextQuestionText+"</a>");f<=g.config.questionPerPage?(l.show(),h=k(' <a href="#question'+(f-1)+'" class="qnbutton notyetanswered free thispage" title="Not yet answered" id="navquestion'+(f-1)+'">'+f+"</a>")):h=k(' <a href="#question'+(f-1)+'" class="qnbutton notyetanswered free" title="Not yet answered" id="navquestion'+
(f-1)+'">'+f+"</a>");k("div#exam_navblock .content .qn_buttons").append(h);c.append(l);f++}A.append(c);g.config.skipStartButton||0==q.length?(q.hide(),g.method.startQuiz.apply(this,[{callback:g.config.animationCallbacks.startQuiz}]),e(b,3).apply(null,[])):q.fadeIn(500,e(b,3));H.turnKeyAndGo(b,a&&a.callback?a.callback:function(){})},startQuiz:function(a){function b(a){var b=k(f+" .questions li").first();b.length&&b.fadeIn(500,function(){a&&a.callback&&a.callback()})}var e=H.getKey(1);var c=H.getKeyNotch;
g.config.skipStartButton||0==q.length?b({callback:c(e,1)}):q.fadeOut(300,function(){b({callback:c(e,1)})});H.turnKeyAndGo(e,a&&a.callback?a.callback:function(){});g.config.events&&g.config.events.onStartQuiz&&g.config.events.onStartQuiz.apply(null,[]);if((a=JSON.parse(localStorage.getItem("quizSt")))&&null!=a.qtime){var d=a.qtime.split(":");d=parseInt(d[2])+60*parseInt(d[1])+3600*parseInt(d[0]);a=d-1}else{a=virtualclass.vutil.UTCtoLocalTimeToSeconds(g.config.ptm);var m=(new Date).getTime();a=g.config.quizTime-
(m-a)/1E3}g.config.quizTime&&0<g.config.quizTime?(a=a?a:g.config.quizTime,d=document.querySelector("#qztime"),g.method.startTimer(a,d,"desc","vmQuiz")):(a=d?d:0,d=document.querySelector("#qztime"),g.method.startTimer(a,d,"asc","vmQuiz"))},resetQuiz:function(a,e){var c=H.getKey(1);var d=H.getKeyNotch;C.fadeOut(300,function(){k(f+" input").prop("checked",!1).prop("disabled",!1);F.attr("class","quizLevel");k(f+" .question").removeClass("correctResponse").removeClass("incorrectResponse");k(f+" .answers li").removeClass("correct").removeClass("incorrect");
k(f+" .question,"+f+" .responses,"+f+" .responses li,"+f+" "+b+","+f+" .backToQuestion").hide();k(f+" .questionCount,"+f+" .answers,"+f+" .checkAnswer").show();A.append(k(f+" .questions")).show();d(c,1).apply(null,[]);g.method.startQuiz({callback:g.config.animationCallbacks.startQuiz},C)});H.turnKeyAndGo(c,e&&e.callback?e.callback:function(){})},checkAnswer:function(a,b){var e=H.getKey(2);var c=H.getKeyNotch;var d=k(k(a).parents(".question")[0]),m=d.find(".answers li"),h=m.find("input:checked"),l=
parseInt(d.attr("id").replace(/(question)/,""),10),n=parseInt(d.attr("data-id")),q=x[l].a;l=x[l].select_any?x[l].select_any:!1;m.addClass("incorrect");var D=[];for(i in q)if(q.hasOwnProperty(i)){var p=q[i],t=parseInt(i,10);p.correct?(D.push(t),"interactive"==g.config.questionMode&&m.eq(t).removeClass("incorrect").addClass("correct")):(-1<k.inArray(t,D)&&D.pop(t),m.eq(t).removeClass("wrong"))}var v=[];h.each(function(){var a=k(this).attr("id");v.push(parseInt(a.replace(/(question\d{1,}_)/,""),10))});
if(g.config.preventUnanswered&&0===v.length)return alert(g.config.preventUnansweredText),!1;h=g.method.compareAnswers(D,v,l);k("a#nav"+d.attr("id")+".qnbutton").removeClass("notyetanswered").removeAttr("title");h?(d.addClass("correctResponse"),"deferredfeedback"!=g.config.questionMode&&m.eq(v[0]).removeClass("incorrect").addClass("correct"),k("a#nav"+d.attr("id")+".qnbutton").removeClass("incorrect").addClass("correct"),g.method.sendQzdata(n,!0)):(d.removeClass("correctResponse"),"deferredfeedback"!=
g.config.questionMode&&m.eq(v[0]).addClass("wrong"),k("a#nav"+d.attr("id")+".qnbutton").removeClass("correct").addClass("incorrect"),0<k(f+" .answers").find("input:checked").length&&g.method.sendQzdata(n,!1));d.find(".responses li").hide();d.find(h?".correct":".incorrect").show();g.config.perQuestionResponseMessaging?("adaptive"!=g.config.questionMode&&(k(a).hide(),d.find(".answers li input[type=radio]").attr("disabled",!0)),g.config.perQuestionResponseAnswers||d.find(".answers").hide(),d.find(".responses").show(),
d.find(".backToQuestion").length||c(e,2).apply(null,[])):(c(e,1).apply(null,[]),c(e,2).apply(null,[]));H.turnKeyAndGo(e,b&&b.callback?b.callback:function(){})},nextQuestion:function(a,b){var e=H.getKey(1);var c=H.getKeyNotch;var d=k(k(a).parents(".question")[0]);a=d.next(".question");var f=d.find("input:checked");if(g.config.preventUnanswered&&0===f.length)return!1;k("a#navquestion0.qnbutton").removeClass("thispage");k("a#navquestion0.qnbutton").nextAll(".qnbutton").removeClass("thispage");a.length?
d.fadeOut(300,function(){d.prevAll(".question").hide();if(d.nextAll(".question").length>g.config.questionPerPage){var a=parseInt(d.prevAll(".question").length)+parseInt(g.config.questionPerPage)+1;d.nextUntil("li#question"+a+".question").show();k("li#question"+(a-1)+".question").find(".backToQuestion").show().end().fadeIn(500,c(e,1));k("a#nav"+d[0].id+".qnbutton").nextUntil("a#navquestion"+a+".qnbutton").addClass("thispage")}else d.nextAll(".question").show(),k("li#question"+(m.questions.length-1)+
".question").find(".backToQuestion").show().end().length||c(e,1).apply(null,[]),k("a#nav"+d[0].id+".qnbutton").nextAll(".qnbutton").addClass("thispage")}):(c(e,1).apply(null,[]),g.method.completeQuiz({callback:g.config.animationCallbacks.completeQuiz}));H.turnKeyAndGo(e,b&&b.callback?b.callback:function(){})},backToQuestion:function(a,e){var c=H.getKey(2);var d=H.getKeyNotch;var f=k(k(a).parents(".question")[0]),m=f.find(".answers");k("a#navquestion0.qnbutton").removeClass("thispage");k("a#navquestion0.qnbutton").nextAll(".qnbutton").removeClass("thispage");
if("block"===m.css("display")){var h=f.prev(".question");k("li#question0.question").nextAll(".question").hide();if(f.prevAll(".question").length>=g.config.questionPerPage){a=1+Number(f.attr("id").replace(/^\D+/g,""));var l=a%g.config.questionPerPage;a=0<l?a-l:a-g.config.questionPerPage;a>g.config.questionPerPage?(k("li#question"+a+".question").prevUntil("li#question"+(a-1-g.config.questionPerPage)+".question").show(),k("a#navquestion"+a+".qnbutton").prevUntil("a#navquestion"+(a-1-g.config.questionPerPage)+
".qnbutton").addClass("thispage")):(k("li#question"+a+".question").prevAll(".question").show(),k("a#navquestion"+a+".qnbutton").prevAll(".qnbutton").addClass("thispage"))}else f.prevAll(".question").show();f.fadeOut(300,function(){h.removeClass("correctResponse").removeClass("incorrectResponse");h.find(".responses, .responses li").hide();h.find(".answers").show();h.find(".checkAnswer").show();d(c,2).apply(null,[])})}else f.find(".responses").fadeOut(300,function(){f.removeClass("correctResponse").removeClass("incorrectResponse");
f.find(".responses li").hide();m.fadeIn(500,d(c,1));f.find(".checkAnswer").fadeIn(500,d(c,2));f.find(b).hide();"question0"!=f.attr("id")?f.find(".backToQuestion").show():f.find(".backToQuestion").hide()});H.turnKeyAndGo(c,e&&e.callback?e.callback:function(){})},diaplayQuestion:function(a,b){H.getKey(1);b=k("li"+a.hash+".question");b.next(".question");b=b.find("input:checked");if(g.config.preventUnanswered&&0===b.length)return!1;b=1+Number(a.id.replace(/^\D+/g,""));if(b>g.config.questionPerPage){var e=
0<b%g.config.questionPerPage?parseInt(b/g.config.questionPerPage)+1:parseInt(b/g.config.questionPerPage);b=g.config.questionPerPage*(e-1);e*=g.config.questionPerPage;k("li#question0.question").hide();k("li#question0").nextAll(".question").hide();k("a#navquestion0.qnbutton").nextAll(".qnbutton").removeClass("thispage");k("a#navquestion0.qnbutton").removeClass("thispage");b>=g.config.questionPerPage?(k("li#question"+(b-1)+".question").nextUntil("li#question"+e+".question").show(),k("a#navquestion"+
(b-1)+".qnbutton").nextUntil("a#navquestion"+e+".qnbutton").addClass("thispage")):(k("li#question0.question").nextUntil("li#question"+g.config.questionPerPage+".question").show(),k("a#navquestion0.qnbutton").addClass("thispage"),k("a#navquestion0.qnbutton").nextUntil("a#navquestion"+g.config.questionPerPage+".qnbutton").addClass("thispage"))}else k("li#question0").nextAll(".question").hide(),k("a#navquestion0.qnbutton").nextAll(".qnbutton").removeClass("thispage"),k("li#question0.question").show(),
k("li#question0.question").nextUntil("li#question"+g.config.questionPerPage+".question").show(),k("a#navquestion0.qnbutton").addClass("thispage"),k("a#navquestion0.qnbutton").nextUntil("a#navquestion"+g.config.questionPerPage+".qnbutton").addClass("thispage");window.location.href=a.hash},flagQuestion:function(a,b){b=k(k(a).parents(".question")[0]);k("a#nav"+b.attr("id")+".qnbutton").toggleClass("trafficlight");k(a).toggleClass("flagged")},startTimer:function(a,b,c,d){function f(){g="asc"==c?a+((Date.now()-
m)/1E3|0):a-((Date.now()-m)/1E3|0);h=g/3600|0;k=g%3600/60|0;l=g%60|0;h=10>h?"0"+h:h;k=10>k?"0"+k:k;l=10>l?"0"+l:l;b.textContent=h+":"+k+":"+l;e=h+":"+k+":"+l;0>=g&&(m=0,clearInterval(I))}c="undefined"!==typeof c?c:"desc";var m=Date.now(),g,h,k,l;"asc"!==c&&f();I=setInterval(f,1E3)},completeQuiz:function(a){var b=H.getKey(1);var c=H.getKeyNotch;var d=k(f+" .answers").find("input:checked").length,h=(Number(m.info.results)/D).toFixed(3),l=k(f+" .correctResponse").length,x=l*h,n=parseInt(m.info.results);
g.config.disableScore?k(v).remove():k(v+" span").html(g.config.scoreTemplateText.replace("%score",x.toFixed(2)).replace("%total",n.toFixed(2)));if(g.config.disableRanking)k(t).remove();else{var q=[m.info.level1,m.info.level2,m.info.level3,m.info.level4,m.info.level5];h=g.method.calculateLevel(x);q=k.isNumeric(h)?q[h]:"";k(t+" span").html(q);k(t).addClass("level"+h)}A.fadeOut(0,function(){console.log("quiz data complete quiz");clearInterval(I);if(g.config.completionResponseMessaging)k(f+" .qnbutton").addClass("show"),
k(f+" input").prop("disabled",!0),k(f+" .button:not(.tryAgain), "+f+" .questionCount").hide(),k(f+" .question, "+f+" .answers, "+f+" .responses").show(),C.append(k(f+" .questions")).fadeIn(500,c(b,1));else{if(g.config.quizTime&&0<g.config.quizTime){var a=e.split(":");a=3600*+a[0]+60*+a[1]+ +a[2];a=parseInt(g.config.quizTime)-a;var h=virtualclass.quiz.convertSecToTime(a)}else h=e;k(f+" .navblock").hide();C.prepend(k("<h4>Questions attempted: <span>"+d+"</span></h4>"));C.prepend(k("<h4>Correct answers: <span>"+
l+"</span></h4>"));C.prepend(k("<h4>Maximum mark: <span>"+n.toFixed(2)+"</span></h4>"));C.prepend(k("<h4>Time taken: <span>"+h+"</span></h4>"));k(f+" #timeText").hide();C.prepend(k("<h4>Total no of questions: <span>"+D+"</span></h4>"));C.fadeIn(500,c(b,1))}if(!roles.hasControls()){console.log("quiz submit init from "+virtualclass.gObj.uid);var q=100*parseInt(x)/parseInt(m.info.results),p=virtualclass.vutil.whoIsTeacher();virtualclass.quiz.hasOwnProperty("timeQuizComplete")&&clearTimeout(virtualclass.quiz.timeQuizComplete);
virtualclass.quiz.timeQuizComplete=setTimeout(function(){console.log("quiz submit from "+virtualclass.gObj.uid);ioAdapter.mustSendUser({quiz:{quizMsg:"quizsubmitted",timetaken:h,quesattemptd:d,correctans:l,score:q,user:virtualclass.gObj.uid},cf:"quiz"},p)},300);a={noofqus:D,timetaken:h,quesattemptd:d,correctans:l,score:x,maxmarks:m.info.results};virtualclass.quiz.quizSt.screen="quizsubmitted";localStorage.setItem("qRep",JSON.stringify({grade:a,attemp:null}))}});H.turnKeyAndGo(b,a&&a.callback?a.callback:
function(){});g.config.events&&g.config.events.onCompleteQuiz&&g.config.events.onCompleteQuiz.apply(null,[{questionCount:D,score:x}])},compareAnswers:function(a,b,e){return e?-1<k.inArray(b[0],a):0===k(a).not(b).length&&0===k(b).not(a).length},calculateLevel:function(a){a=(a/D).toFixed(2);var b=null;g.method.inRange(0,.2,a)?b=4:g.method.inRange(.21,.4,a)?b=3:g.method.inRange(.41,.6,a)?b=2:g.method.inRange(.61,.8,a)?b=1:g.method.inRange(.81,1,a)&&(b=0);return b},inRange:function(a,b,e){return e>=a&&
e<=b},sendQzdata:function(a,b){if(!roles.hasControls()){var e=virtualclass.vutil.whoIsTeacher();ioAdapter.mustSendUser({quiz:{quizMsg:"quizAttempt",quizid:m.info.quiz,questionId:a,ans:b,user:virtualclass.gObj.uid},cf:"quiz"},e)}}};g.init=function(){g.method.setupQuiz.apply(null,[{callback:g.config.animationCallbacks.setupQuiz}]);q.on("click",function(a){a.preventDefault();this.disabled||k(this).hasClass("disabled")||g.method.startQuiz.apply(null,[{callback:g.config.animationCallbacks.startQuiz}])});
k(f+" .tryAgain").on("click",function(a){a.preventDefault();g.method.resetQuiz(this,{callback:g.config.animationCallbacks.resetQuiz})});k(f+" .checkAnswer").on("click",function(a){a.preventDefault();g.method.checkAnswer(this,{callback:g.config.animationCallbacks.checkAnswer})});if(!g.config.perQuestionResponseMessaging)k(f+" .ansck").on("click",function(a){g.method.checkAnswer(this,{callback:g.config.animationCallbacks.checkAnswer})});k("#exam_navblock .qn_buttons a").on("click",function(a){a.preventDefault();
"none"==k("li"+this.hash+".question").css("display")?g.method.diaplayQuestion(this,{callback:g.config.animationCallbacks.diaplayQuestion}):window.location.href=this.hash});k(f+" .quesname span.unflagged").on("click",function(a){a.preventDefault();g.method.flagQuestion(this,{callback:g.config.animationCallbacks.flagQuestion})});k(f+" .backToQuestion").on("click",function(a){a.preventDefault();g.method.backToQuestion(this,{callback:g.config.animationCallbacks.backToQuestion})});k(f+" "+b).on("click",
function(a){a.preventDefault();g.method.nextQuestion(this,{callback:g.config.animationCallbacks.nextQuestion})});var e=a.attr("id")+"-name";y.attr("id",e);a.attr({"aria-labelledby":e,"aria-live":"polite","aria-relevant":"additions",role:"form"});k(l+', [href = "#"]').attr("role","button")};g.init()};k.fn.slickQuiz=function(h){return this.each(function(){if(void 0===k(this).data("slickQuiz")){var c=new k.slickQuiz(this,h);k(this).data("slickQuiz",c)}})}})(jQuery);!function(){function k(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function h(a){return null===a?NaN:+a}function c(a){return!isNaN(a)}function g(a){return{left:function(b,e,c,d){3>arguments.length&&(c=0);4>arguments.length&&(d=b.length);for(;c<d;){var f=c+d>>>1;0>a(b[f],e)?c=f+1:d=f}return c},right:function(b,e,c,d){3>arguments.length&&(c=0);4>arguments.length&&(d=b.length);for(;c<d;){var f=c+d>>>1;0<a(b[f],e)?d=f:c=f+1}return c}}}function a(a){return a.length}function f(a,b){for(var e in b)Object.defineProperty(a.prototype,
e,{value:b[e],enumerable:!1})}function d(){this._=Object.create(null)}function b(a){return"__proto__"===(a+="")||"\x00"===a[0]?"\x00"+a:a}function l(a){return"\x00"===(a+="")[0]?a.slice(1):a}function n(a){return b(a)in this._}function p(a){return(a=b(a))in this._&&delete this._[a]}function r(){var a=[],b;for(b in this._)a.push(l(b));return a}function w(){var a=0,b;for(b in this._)++a;return a}function z(){for(var a in this._)return!1;return!0}function v(){this._=Object.create(null)}function t(a,b,
e){return function(){var c=e.apply(b,arguments);return c===b?a:c}}function q(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var e=0,c=sh.length;e<c;++e){var d=sh[e]+b;if(d in a)return d}}function y(){}function A(){}function C(a){function b(){for(var b=e,c=-1,d=b.length,f;++c<d;)(f=b[c].on)&&f.apply(this,arguments);return a}var e=[],c=new d;b.on=function(b,d){var f=c.get(b),m;if(2>arguments.length)return f&&f.on;f&&(f.on=null,e=e.slice(0,m=e.indexOf(f)).concat(e.slice(m+1)),c.remove(b));
d&&e.push(c.set(b,{on:d}));return a};return b}function G(){B.event.preventDefault()}function E(){for(var a=B.event,b;b=a.sourceEvent;)a=b;return a}function F(a){for(var b=new A,e=0,c=arguments.length;++e<c;)b[arguments[e]]=C(b);b.of=function(e,c){return function(d){try{var f=d.sourceEvent=B.event;d.target=a;B.event=d;b[d.type].apply(e,c)}finally{B.event=f}}};return b}function I(a){ae(a,ua);return a}function e(a){return"function"===typeof a?a:function(){return Ee(a,this)}}function m(a){return"function"===
typeof a?a:function(){return eg(a,this)}}function x(a,b){function e(){this.removeAttribute(a)}function c(){this.removeAttributeNS(a.space,a.local)}function d(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function m(){var e=b.apply(this,arguments);null==e?this.removeAttribute(a):this.setAttribute(a,e)}function g(){var e=b.apply(this,arguments);null==e?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,e)}a=B.ns.qualify(a);return null==b?a.local?
c:e:"function"===typeof b?a.local?g:m:a.local?f:d}function D(a){return new RegExp("(?:^|\\s+)"+B.requote(a)+"(?:\\s+|$)","g")}function H(a,b){function e(){for(var e=-1;++e<d;)a[e](this,b)}function c(){for(var e=-1,c=b.apply(this,arguments);++e<d;)a[e](this,c)}a=(a+"").trim().split(/^|\s+/).map(N);var d=a.length;return"function"===typeof b?c:e}function N(a){var b=D(a);return function(e,c){if(d=e.classList)return c?d.add(a):d.remove(a);var d=e.getAttribute("class")||"";c?(b.lastIndex=0,b.test(d)||e.setAttribute("class",
(d+" "+a).trim().replace(/\s+/g," "))):e.setAttribute("class",d.replace(b," ").trim().replace(/\s+/g," "))}}function ka(a,b,e){function c(){this.style.removeProperty(a)}function d(){this.style.setProperty(a,b,e)}function f(){var c=b.apply(this,arguments);null==c?this.style.removeProperty(a):this.style.setProperty(a,c,e)}return null==b?c:"function"===typeof b?f:d}function aa(a,b){function e(){delete this[a]}function c(){this[a]=b}function d(){var e=b.apply(this,arguments);null==e?delete this[a]:this[a]=
e}return null==b?e:"function"===typeof b?d:c}function Aa(a){return"function"===typeof a?a:(a=B.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function fa(){var a=this.parentNode;a&&a.removeChild(this)}function R(a){return function(){return th(this,a)}}function X(a){arguments.length||(a=k);return function(b,e){return b&&e?a(b.__data__,e.__data__):!b-!e}}function M(a,b){for(var e=
0,c=a.length;e<c;e++)for(var d=a[e],f=0,m=d.length,g;f<m;f++)(g=d[f])&&b(g,f,e);return a}function ba(a){ae(a,zc);return a}function ja(a){var b,e;return function(c,d,f){c=a[f].update;var m=c.length;f!=e&&(e=f,b=0);for(d>=b&&(b=d+1);!(d=c[b])&&++b<m;);return d}}function ca(a){(a=a.__transition__)&&++a.active}function S(a,b,e){function c(){var b=this[m];b&&(this.removeEventListener(a,b,b.$),delete this[m])}function d(){var d=L(b,ac(arguments));c.call(this);this.addEventListener(a,this[m]=d,d.$=e);d._=
b}function f(){var b=new RegExp("^__on([^.]+)"+B.requote(a)+"$"),e,c;for(c in this)if(e=c.match(b)){var d=this[c];this.removeEventListener(e[1],d,d.$);delete this[c]}}var m="__on"+a,g=a.indexOf("."),L=oa;0<g&&(a=a.slice(0,g));var h=fg.get(a);h&&(a=h,L=Ba);return g?b?d:c:b?y:f}function oa(a,b){return function(e){var c=B.event;B.event=e;b[0]=this.__data__;try{a.apply(this,b)}finally{B.event=c}}}function Ba(a,b){var e=oa(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||b.compareDocumentPosition(this)&
8)||e.call(this,a)}}function La(){var a=".dragsuppress-"+ ++vh,b="click"+a,e=B.select(hb).on("touchmove"+a,G).on("dragstart"+a,G).on("selectstart"+a,G);if(Fe){var c=Ac.style;var d=c[Fe];c[Fe]="none"}return function(f){e.on(a,null);Fe&&(c[Fe]=d);if(f){var m=function(){e.on(b,null)};e.on(b,function(){G();m()},!0);setTimeout(m,0)}}}function va(a,b){b.changedTouches&&(b=b.changedTouches[0]);var e=a.ownerSVGElement||a;if(e.createSVGPoint){var c=e.createSVGPoint();if(0>mb&&(hb.scrollX||hb.scrollY)){e=B.select("body").append("svg").style({position:"absolute",
top:0,left:0,margin:0,padding:0,border:"none"},"important");var d=e[0][0].getScreenCTM();mb=!(d.f||d.e);e.remove()}mb?(c.x=b.pageX,c.y=b.pageY):(c.x=b.clientX,c.y=b.clientY);c=c.matrixTransform(a.getScreenCTM().inverse());return[c.x,c.y]}e=a.getBoundingClientRect();return[b.clientX-e.left-a.clientLeft,b.clientY-e.top-a.clientTop]}function ra(){return B.event.changedTouches[0].identifier}function sb(){return B.event.target}function wa(){return hb}function Ta(a,b,e){return(b[0]-a[0])*(e[1]-a[1])-(b[1]-
a[1])*(e[0]-a[0])}function Xa(a){return 1<a?0:-1>a?ia:Math.acos(a)}function xa(a){return 1<a?Ga:-1>a?-Ga:Math.asin(a)}function na(a){return((a=Math.exp(a))+1/a)/2}function Q(a){return(a=Math.sin(a/2))*a}function da(){}function za(a,b,e){return this instanceof za?void(this.h=+a,this.s=+b,this.l=+e):2>arguments.length?a instanceof za?new za(a.h,a.s,a.l):lb(""+a,sd,za):new za(a,b,e)}function Ea(a,b,e){function c(a){360<a?a-=360:0>a&&(a+=360);return 60>a?f+(d-f)*a/60:180>a?d:240>a?f+(d-f)*(240-a)/60:
f}a=isNaN(a)?0:0>(a%=360)?a+360:a;b=isNaN(b)?0:0>b?0:1<b?1:b;e=0>e?0:1<e?1:e;var d=.5>=e?e*(1+b):e+b-e*b;var f=2*e-d;return new Pa(Math.round(255*c(a+120)),Math.round(255*c(a)),Math.round(255*c(a-120)))}function Ia(a,b,e){return this instanceof Ia?void(this.h=+a,this.c=+b,this.l=+e):2>arguments.length?a instanceof Ia?new Ia(a.h,a.c,a.l):a instanceof Oa?P(a.l,a.a,a.b):P((a=Qc((a=B.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new Ia(a,b,e)}function la(a,b,e){isNaN(a)&&(a=0);isNaN(b)&&(b=0);return new Oa(e,Math.cos(a*=
ha)*b,Math.sin(a)*b)}function Oa(a,b,e){return this instanceof Oa?void(this.l=+a,this.a=+b,this.b=+e):2>arguments.length?a instanceof Oa?new Oa(a.l,a.a,a.b):a instanceof Ia?la(a.h,a.c,a.l):Qc((a=Pa(a)).r,a.g,a.b):new Oa(a,b,e)}function Ya(a,b,e){a=(a+16)/116;e=a-e/200;b=u(a+b/500)*wh;a=u(a)*xh;e=u(e)*ab;return new Pa(zb(3.2404542*b-1.5371385*a-.4985314*e),zb(-.969266*b+1.8760108*a+.041556*e),zb(.0556434*b-.2040259*a+1.0572252*e))}function P(a,b,e){return 0<a?new Ia(Math.atan2(e,b)*Ha,Math.sqrt(b*
b+e*e),a):new Ia(NaN,NaN,a)}function u(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function pa(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function zb(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function Pa(a,b,e){return this instanceof Pa?void(this.r=~~a,this.g=~~b,this.b=~~e):2>arguments.length?a instanceof Pa?new Pa(a.r,a.g,a.b):lb(""+a,Pa,Ea):new Pa(a,b,e)}function qd(a){return new Pa(a>>16,a>>8&255,a&255)+""}function Db(a){return 16>a?"0"+Math.max(0,a).toString(16):
Math.min(255,a).toString(16)}function lb(a,b,e){var c=0,d=0,f=0,m;if(m=/([a-z]+)\((.*)\)/i.exec(a)){var g=m[2].split(",");switch(m[1]){case "hsl":return e(parseFloat(g[0]),parseFloat(g[1])/100,parseFloat(g[2])/100);case "rgb":return b(Jb(g[0]),Jb(g[1]),Jb(g[2]))}}if(e=cb.get(a))return b(e.r,e.g,e.b);null==a||"#"!==a.charAt(0)||isNaN(e=parseInt(a.slice(1),16))||(4===a.length?(c=(e&3840)>>4,c|=c>>4,d=e&240,d|=d>>4,f=e&15,f|=f<<4):7===a.length&&(c=(e&16711680)>>16,d=(e&65280)>>8,f=e&255));return b(c,
d,f)}function sd(a,b,e){var c=Math.min(a/=255,b/=255,e/=255),d=Math.max(a,b,e),f=d-c,m=(d+c)/2;f?(c=.5>m?f/(d+c):f/(2-d-c),a=60*(a==d?(b-e)/f+(b<e?6:0):b==d?(e-a)/f+2:(a-b)/f+4)):(a=NaN,c=0<m&&1>m?0:a);return new za(a,c,m)}function Qc(a,b,e){a=Qa(a);b=Qa(b);e=Qa(e);var c=pa((.4124564*a+.3575761*b+.1804375*e)/wh),d=pa((.2126729*a+.7151522*b+.072175*e)/xh);a=pa((.0193339*a+.119192*b+.9503041*e)/ab);return Oa(116*d-16,500*(c-d),200*(d-a))}function Qa(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/
1.055,2.4)}function Jb(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function sa(a){return"function"===typeof a?a:function(){return a}}function Ka(a){return a}function tc(a){return function(b,e,c){2===arguments.length&&"function"===typeof e&&(c=e,e=null);return Rd(b,e,a,c)}}function Rd(a,b,e,c){function d(){var a=h.status,b;if(b=!a)b=(b=h.responseType)&&"text"!==b?h.response:h.responseText;if(b||200<=a&&300>a||304===a){try{var c=e.call(f,h)}catch(uh){m.error.call(f,
uh);return}m.load.call(f,c)}else m.error.call(f,h)}var f={},m=B.dispatch("beforesend","progress","load","error"),g={},h=new XMLHttpRequest,L=null;!hb.XDomainRequest||"withCredentials"in h||!/^(http(s)?:)?\/\//.test(a)||(h=new XDomainRequest);"onload"in h?h.onload=h.onerror=d:h.onreadystatechange=function(){3<h.readyState&&d()};h.onprogress=function(a){var b=B.event;B.event=a;try{m.progress.call(f,h)}finally{B.event=b}};f.header=function(a,b){a=(a+"").toLowerCase();if(2>arguments.length)return g[a];
null==b?delete g[a]:g[a]=b+"";return f};f.mimeType=function(a){if(!arguments.length)return b;b=null==a?null:a+"";return f};f.responseType=function(a){if(!arguments.length)return L;L=a;return f};f.response=function(a){e=a;return f};["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(ac(arguments)))}});f.send=function(e,c,d){2===arguments.length&&"function"===typeof c&&(d=c,c=null);h.open(e,a,!0);null==b||"accept"in g||(g.accept=b+",*/*");if(h.setRequestHeader)for(var k in g)h.setRequestHeader(k,
g[k]);null!=b&&h.overrideMimeType&&h.overrideMimeType(b);null!=L&&(h.responseType=L);if(null!=d)f.on("error",d).on("load",function(a){d(null,a)});m.beforesend.call(f,h);h.send(null==c?null:c);return f};f.abort=function(){h.abort();return f};B.rebind(f,m,"on");return null==c?f:f.get(Kb(c))}function Kb(a){return 1===a.length?function(b,e){a(null==b?e:null)}:a}function Rc(){var a=ye();a=gc()-a;24<a?(isFinite(a)&&(clearTimeout(pf),pf=setTimeout(Rc,a)),be=0):(be=1,yh(Rc))}function ye(){var a=Date.now();
for(Bc=qf;Bc;)a>=Bc.t&&(Bc.f=Bc.c(a-Bc.t)),Bc=Bc.n;return a}function gc(){for(var a,b=qf,e=Infinity;b;)b.f?b=a?a.n=b.n:qf=b.n:(b.t<e&&(e=b.t),b=(a=b).n);yd=a;return e}function ke(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Jc(a){var b=a.decimal,e=a.thousands,c=a.grouping,d=a.currency,f=c&&e?function(a,b){for(var d=a.length,f=[],m=0,g=c[0],h=0;0<d&&0<g;){h+g+1>b&&(g=Math.max(1,b-h));f.push(a.substring(d-=g,d+g));if((h+=g+1)>b)break;g=c[m=(m+1)%c.length]}return f.reverse().join(e)}:
Ka;return function(a){a=zh.exec(a);var e=a[1]||" ",c=a[2]||">",m=a[3]||"-",g=a[4]||"",h=a[5],L=+a[6],k=a[7],l=a[8],x=a[9],n=1,Ca="",q="",D=!1,p=!0;l&&(l=+l.substring(1));if(h||"0"===e&&"="===c)h=e="0",c="=";switch(x){case "n":k=!0;x="g";break;case "%":n=100;q="%";x="f";break;case "p":n=100;q="%";x="r";break;case "b":case "o":case "x":case "X":"#"===g&&(Ca="0"+x.toLowerCase());case "c":p=!1;case "d":D=!0;l=0;break;case "s":n=-1,x="r"}"$"===g&&(Ca=d[0],q=d[1]);"r"!=x||l||(x="g");if(null!=l)if("g"==
x)l=Math.max(1,Math.min(21,l));else if("e"==x||"f"==x)l=Math.max(0,Math.min(20,l));x=Ah.get(x)||Sd;var t=h&&k;return function(a){var d=q;if(D&&a%1)return"";var g=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===m?"":m;0>n?(d=B.formatPrefix(a,l),a=d.scale(a),d=d.symbol+q):a*=n;a=x(a,l);var H=a.lastIndexOf(".");if(0>H)if(H=p?a.lastIndexOf("e"):-1,0>H){var v=a;a=""}else v=a.substring(0,H),a=a.substring(H);else v=a.substring(0,H),a=b+a.substring(H+1);!h&&k&&(v=f(v,Infinity));H=Ca.length+v.length+a.length+(t?0:g.length);
var r=H<L?Array(H=L-H+1).join(e):"";t&&(v=f(r+v,r.length?L-a.length:Infinity));g+=Ca;a=v+a;return("<"===c?g+a+r:">"===c?r+g+a:"^"===c?r.substring(0,H>>=1)+g+a+r.substring(H):g+(t?a:r+a))+d}}}function Sd(a){return a+""}function kb(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Wa(a,b,e){function c(b){var e=a(b),c=f(e,1);return b-e<c-b?e:c}function d(e){b(e=a(new eb(e-1)),1);return e}function f(a,e){b(a=new eb(+a),e);return a}function m(a,c,f){a=d(a);var m=
[];if(1<f)for(;a<c;)e(a)%f||m.push(new Date(+a)),b(a,1);else for(;a<c;)m.push(new Date(+a)),b(a,1);return m}a.floor=a;a.round=c;a.ceil=d;a.offset=f;a.range=m;var g=a.utc=Vb(a);g.floor=g;g.round=Vb(c);g.ceil=Vb(d);g.offset=Vb(f);g.range=function(a,b,e){try{eb=kb;var c=new kb;c._=a;return m(c,b,e)}finally{eb=Date}};return a}function Vb(a){return function(b,e){try{eb=kb;var c=new kb;c._=b;return a(c,e)._}finally{eb=Date}}}function J(a){function b(a){function b(b){for(var e=[],d=-1,f=0,m,g;++d<c;)if(37===
a.charCodeAt(d)){e.push(a.slice(f,d));null!=(m=ig[f=a.charAt(++d)])&&(f=a.charAt(++d));if(g=r[f])f=g(b,null==m?"e"===f?" ":"0":m);e.push(f);f=d+1}e.push(a.slice(f,d));return e.join("")}var c=a.length;b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(e(c,a,b,0)!=b.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);b=null!=c.Z&&eb!==kb;var d=new (b?kb:eb);"j"in c?d.setFullYear(c.y,0,c.j):"w"in c&&("W"in c||"U"in c)?(d.setFullYear(c.y,0,1),d.setFullYear(c.y,0,"W"in c?(c.w+6)%7+7*c.W-
(d.getDay()+5)%7:c.w+7*c.U-(d.getDay()+6)%7)):d.setFullYear(c.y,c.m,c.d);d.setHours(c.H+(c.Z/100|0),c.M+c.Z%100,c.S,c.L);return b?d._:d};b.toString=function(){return a};return b}function e(a,b,e,c){for(var d,f=0,m=b.length,g=e.length;f<m;){if(c>=g)return-1;d=b.charCodeAt(f++);if(37===d){if(d=b.charAt(f++),d=y[d in ig?b.charAt(f++):d],!d||0>(c=d(a,e,c)))return-1}else if(d!=e.charCodeAt(c++))return-1}return c}var c=a.dateTime,d=a.date,f=a.time,m=a.periods,g=a.days,h=a.shortDays,L=a.months,k=a.shortMonths;
b.utc=function(a){function e(a){try{eb=kb;var b=new eb;b._=a;return c(b)}finally{eb=Date}}var c=b(a);e.parse=function(a){try{eb=kb;var b=c.parse(a);return b&&b._}finally{eb=Date}};e.toString=c.toString;return e};b.multi=b.utc.multi=$a;var l=B.map(),x=Kc(g),n=ld(g),q=Kc(h),D=ld(h),p=Kc(L),t=ld(L),H=Kc(k),v=ld(k);m.forEach(function(a,b){l.set(a.toLowerCase(),b)});var r={a:function(a){return h[a.getDay()]},A:function(a){return g[a.getDay()]},b:function(a){return k[a.getMonth()]},B:function(a){return L[a.getMonth()]},
c:b(c),d:function(a,b){return Va(a.getDate(),b,2)},e:function(a,b){return Va(a.getDate(),b,2)},H:function(a,b){return Va(a.getHours(),b,2)},I:function(a,b){return Va(a.getHours()%12||12,b,2)},j:function(a,b){return Va(1+U.dayOfYear(a),b,3)},L:function(a,b){return Va(a.getMilliseconds(),b,3)},m:function(a,b){return Va(a.getMonth()+1,b,2)},M:function(a,b){return Va(a.getMinutes(),b,2)},p:function(a){return m[+(12<=a.getHours())]},S:function(a,b){return Va(a.getSeconds(),b,2)},U:function(a,b){return Va(U.sundayOfYear(a),
b,2)},w:function(a){return a.getDay()},W:function(a,b){return Va(U.mondayOfYear(a),b,2)},x:b(d),X:b(f),y:function(a,b){return Va(a.getFullYear()%100,b,2)},Y:function(a,b){return Va(a.getFullYear()%1E4,b,4)},Z:qa,"%":function(){return"%"}},y={a:function(a,b,e){q.lastIndex=0;return(b=q.exec(b.slice(e)))?(a.w=D.get(b[0].toLowerCase()),e+b[0].length):-1},A:function(a,b,e){x.lastIndex=0;return(b=x.exec(b.slice(e)))?(a.w=n.get(b[0].toLowerCase()),e+b[0].length):-1},b:function(a,b,e){H.lastIndex=0;return(b=
H.exec(b.slice(e)))?(a.m=v.get(b[0].toLowerCase()),e+b[0].length):-1},B:function(a,b,e){p.lastIndex=0;return(b=p.exec(b.slice(e)))?(a.m=t.get(b[0].toLowerCase()),e+b[0].length):-1},c:function(a,b,c){return e(a,r.c.toString(),b,c)},d:td,e:td,H:gb,I:gb,j:Y,L:Ud,m:hf,M:ud,p:function(a,b,e){b=l.get(b.slice(e,e+=2).toLowerCase());return null==b?-1:(a.p=b,e)},S:Eb,U:bb,w:sc,W:K,x:function(a,b,c){return e(a,r.x.toString(),b,c)},X:function(a,b,c){return e(a,r.X.toString(),b,c)},y:Td,Y:oe,Z:cg,"%":pe};return b}
function Va(a,b,e){var c=0>a?"-":"";a=(c?-a:a)+"";var d=a.length;return c+(d<e?Array(e-d+1).join(b)+a:a)}function Kc(a){return new RegExp("^(?:"+a.map(B.requote).join("|")+")","i")}function ld(a){for(var b=new d,e=-1,c=a.length;++e<c;)b.set(a[e].toLowerCase(),e);return b}function sc(a,b,e){Da.lastIndex=0;return(b=Da.exec(b.slice(e,e+1)))?(a.w=+b[0],e+b[0].length):-1}function bb(a,b,e){Da.lastIndex=0;return(b=Da.exec(b.slice(e)))?(a.U=+b[0],e+b[0].length):-1}function K(a,b,e){Da.lastIndex=0;return(b=
Da.exec(b.slice(e)))?(a.W=+b[0],e+b[0].length):-1}function oe(a,b,e){Da.lastIndex=0;return(b=Da.exec(b.slice(e,e+4)))?(a.y=+b[0],e+b[0].length):-1}function Td(a,b,e){Da.lastIndex=0;if(b=Da.exec(b.slice(e,e+2))){var c=+b[0];a=(a.y=c+(68<c?1900:2E3),e+b[0].length)}else a=-1;return a}function cg(a,b,e){return/^[+-]\d{4}$/.test(b=b.slice(e,e+5))?(a.Z=-b,e+5):-1}function hf(a,b,e){Da.lastIndex=0;return(b=Da.exec(b.slice(e,e+2)))?(a.m=b[0]-1,e+b[0].length):-1}function td(a,b,e){Da.lastIndex=0;return(b=
Da.exec(b.slice(e,e+2)))?(a.d=+b[0],e+b[0].length):-1}function Y(a,b,e){Da.lastIndex=0;return(b=Da.exec(b.slice(e,e+3)))?(a.j=+b[0],e+b[0].length):-1}function gb(a,b,e){Da.lastIndex=0;return(b=Da.exec(b.slice(e,e+2)))?(a.H=+b[0],e+b[0].length):-1}function ud(a,b,e){Da.lastIndex=0;return(b=Da.exec(b.slice(e,e+2)))?(a.M=+b[0],e+b[0].length):-1}function Eb(a,b,e){Da.lastIndex=0;return(b=Da.exec(b.slice(e,e+2)))?(a.S=+b[0],e+b[0].length):-1}function Ud(a,b,e){Da.lastIndex=0;return(b=Da.exec(b.slice(e,
e+3)))?(a.L=+b[0],e+b[0].length):-1}function qa(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var e=ea(b)/60|0;b=ea(b)%60;return a+Va(e,"0",2)+Va(b,"0",2)}function pe(a,b,e){ad.lastIndex=0;return(a=ad.exec(b.slice(e,e+1)))?e+a[0].length:-1}function $a(a){for(var b=a.length,e=-1;++e<b;)a[e][0]=this(a[e][0]);return function(b){for(var e=0,c=a[e];!c[1](b);)c=a[++e];return c[0](b)}}function T(){}function W(a,b,e){var c=e.s=a+b,d=c-a;e.t=a-(c-d)+(b-d)}function V(a,b){if(a&&jg.hasOwnProperty(a.type))jg[a.type](a,
b)}function Sc(a,b,e){var c=-1;e=a.length-e;for(b.lineStart();++c<e;){var d=a[c];b.point(d[0],d[1],d[2])}b.lineEnd()}function pd(a,b){var e=-1,c=a.length;for(b.polygonStart();++e<c;)Sc(a[e],b,1);b.polygonEnd()}function Vd(){function a(a,b){a*=ha;b=b*ha/2+ia/4;var e=a-c,m=0<=e?1:-1;e*=m;var g=Math.cos(b);b=Math.sin(b);var h=f*b;bd.add(Math.atan2(h*m*Math.sin(e),d*g+h*Math.cos(e)));c=a;d=g;f=b}var b,e,c,d,f;nb.point=function(m,g){nb.point=a;c=(b=m)*ha;d=Math.cos(g=(e=g)*ha/2+ia/4);f=Math.sin(g)};nb.lineEnd=
function(){a(b,e)}}function jc(a){var b=a[0];a=a[1];var e=Math.cos(a);return[e*Math.cos(b),e*Math.sin(b),Math.sin(a)]}function Fb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function rb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Lb(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function tb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function kc(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function Nb(a){return[Math.atan2(a[1],a[0]),xa(a[2])]}function od(a,
b){return 1E-6>ea(a[0]-b[0])&&1E-6>ea(a[1]-b[1])}function ze(a,b){a*=ha;var e=Math.cos(b*=ha);Tc(e*Math.cos(a),e*Math.sin(a),Math.sin(b))}function Tc(a,b,e){++ce;cd+=(a-cd)/ce;bc+=(b-bc)/ce;nc+=(e-nc)/ce}function nd(){function a(a,d){a*=ha;var f=Math.cos(d*=ha),m=f*Math.cos(a);a=f*Math.sin(a);d=Math.sin(d);var g=Math.atan2(Math.sqrt((g=e*d-c*a)*g+(g=c*m-b*d)*g+(g=b*a-e*m)*g),b*m+e*a+c*d);dd+=g;cc+=g*(b+(b=m));dc+=g*(e+(e=a));Qb+=g*(c+(c=d));Tc(b,e,c)}var b,e,c;Rb.point=function(d,f){d*=ha;var m=Math.cos(f*=
ha);b=m*Math.cos(d);e=m*Math.sin(d);c=Math.sin(f);Rb.point=a;Tc(b,e,c)}}function md(){Rb.point=ze}function Lc(){function a(a,b){a*=ha;var e=Math.cos(b*=ha),m=e*Math.cos(a);a=e*Math.sin(a);b=Math.sin(b);e=d*b-f*a;var g=f*m-c*b,h=c*a-d*m,L=Math.sqrt(e*e+g*g+h*h),k=c*m+d*a+f*b,l=L&&-Xa(k)/L;L=Math.atan2(L,k);ob+=l*e;zd+=l*g;ed+=l*h;dd+=L;cc+=L*(c+(c=m));dc+=L*(d+(d=a));Qb+=L*(f+(f=b));Tc(c,d,f)}var b,e,c,d,f;Rb.point=function(m,g){b=m;e=g;Rb.point=a;m*=ha;var h=Math.cos(g*=ha);c=h*Math.cos(m);d=h*Math.sin(m);
f=Math.sin(g);Tc(c,d,f)};Rb.lineEnd=function(){a(b,e);Rb.lineEnd=md;Rb.point=ze}}function Uc(a,b){function e(e,c){return e=a(e,c),b(e[0],e[1])}a.invert&&b.invert&&(e.invert=function(e,c){return e=b.invert(e,c),e&&a.invert(e[0],e[1])});return e}function uc(){return!0}function ma(a,b,e,c,d){var f=[],m=[];a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,e=a[0],c=a[b];if(od(e,c)){d.lineStart();for(c=0;c<b;++c)d.point((e=a[c])[0],e[1]);d.lineEnd()}else b=new Wd(e,a,null,!0),e=new Wd(e,null,b,!1),b.o=
e,f.push(b),m.push(e),b=new Wd(c,a,null,!1),e=new Wd(c,null,b,!0),b.o=e,f.push(b),m.push(e)}});m.sort(b);vc(f);vc(m);if(f.length){a=0;b=e;for(e=m.length;a<e;++a)m[a].e=b=!b;b=f[0];for(var g,h;;){for(var L=b,k=!0;L.v;)if((L=L.n)===b)return;g=L.z;d.lineStart();do{L.v=L.o.v=!0;if(L.e){if(k)for(a=0,e=g.length;a<e;++a)d.point((h=g[a])[0],h[1]);else c(L.x,L.n.x,1,d);L=L.n}else{if(k)for(g=L.p.z,a=g.length-1;0<=a;--a)d.point((h=g[a])[0],h[1]);else c(L.x,L.p.x,-1,d);L=L.p}L=L.o;g=L.z;k=!k}while(!L.v);d.lineEnd()}}}
function vc(a){if(b=a.length){for(var b,e=0,c=a[0],d;++e<b;)c.n=d=a[e],d.p=c,c=d;c.n=d=a[0];d.p=c}}function Wd(a,b,e,c){this.x=a;this.z=b;this.o=e;this.e=c;this.v=!1;this.n=this.p=null}function Fa(a,b,e,c){return function(d,f){function m(b,e){var c=d(b,e);a(b=c[0],e=c[1])&&f.point(b,e)}function g(a,b){a=d(a,b);n.point(a[0],a[1])}function h(){D.point=g;n.lineStart()}function L(){D.point=m;n.lineEnd()}function k(a,b){r.push([a,b]);a=d(a,b);t.point(a[0],a[1])}function l(){t.lineStart();r=[]}function x(){k(r[0][0],
r[0][1]);t.lineEnd();var a=t.clean(),b=p.buffer();var e=b.length;r.pop();v.push(r);r=null;if(e)if(a&1){a=b[0];e=a.length-1;b=-1;var c;if(0<e){H||(f.polygonStart(),H=!0);for(f.lineStart();++b<e;)f.point((c=a[b])[0],c[1]);f.lineEnd()}}else 1<e&&a&2&&b.push(b.pop().concat(b.shift())),Ca.push(b.filter(Vc))}var n=b(f),q=d.invert(c[0],c[1]),D={point:m,lineStart:h,lineEnd:L,polygonStart:function(){D.point=k;D.lineStart=l;D.lineEnd=x;Ca=[];v=[]},polygonEnd:function(){D.point=m;D.lineStart=h;D.lineEnd=L;Ca=
B.merge(Ca);var a=q;var b=v;var c=a[0],d=a[1],g=[Math.sin(c),-Math.cos(c),0],k=0,l=0;bd.reset();for(var x=0,n=b.length;x<n;++x){var p=b[x],t=p.length;if(t){var r=p[0],y=r[0];a=r[1]/2+ia/4;for(var w=Math.sin(a),z=Math.cos(a),Ua=1;;){Ua===t&&(Ua=0);a=p[Ua];var N=a[0],A=a[1]/2+ia/4,$d=Math.sin(A);A=Math.cos(A);var C=N-y,F=0<=C?1:-1,nf=F*C,aa=nf>ia;w*=$d;bd.add(Math.atan2(w*F*Math.sin(nf),z*A+w*Math.cos(nf)));k+=aa?C+F*fb:C;aa^y>=c^N>=c&&(r=rb(jc(r),jc(a)),kc(r),y=rb(g,r),kc(y),y=(aa^0<=C?-1:1)*xa(y[2]),
d>y||d===y&&(r[0]||r[1]))&&(l+=aa^0<=C?1:-1);if(!Ua++)break;y=N;w=$d;z=A;r=a}}}b=(-1E-6>k||1E-6>k&&0>bd)^l&1;Ca.length?(H||(f.polygonStart(),H=!0),ma(Ca,Wc,b,e,f)):b&&(H||(f.polygonStart(),H=!0),f.lineStart(),e(null,null,1,f),f.lineEnd());H&&(f.polygonEnd(),H=!1);Ca=v=null},sphere:function(){f.polygonStart();f.lineStart();e(null,null,1,f);f.lineEnd();f.polygonEnd()}},Ca,p=Yb(),t=b(p),H=!1,v,r;return D}}function Vc(a){return 1<a.length}function Yb(){var a=[],b;return{lineStart:function(){a.push(b=
[])},point:function(a,e){b.push([a,e])},lineEnd:y,buffer:function(){var e=a;a=[];b=null;return e},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function Wc(a,b){return(0>(a=a.x)[0]?a[1]-Ga-1E-6:Ga-a[1])-(0>(b=b.x)[0]?b[1]-Ga-1E-6:Ga-b[1])}function jf(a){function b(a,b){return Math.cos(a)*Math.cos(b)>d}function e(a,b,e){var c=jc(a),f=jc(b),m=[1,0,0];f=rb(c,f);var g=Fb(f,f);c=f[0];var h=g-c*c;if(!h)return!e&&a;g=d*g/h;h=-d*c/h;c=rb(m,f);m=tb(m,g);f=tb(f,h);Lb(m,f);f=Fb(m,c);g=Fb(c,
c);h=f*f-g*(Fb(m,m)-1);if(!(0>h)){var L=Math.sqrt(h);h=tb(c,(-f-L)/g);Lb(h,m);h=Nb(h);if(!e)return h;e=a[0];var k=b[0];a=a[1];b=b[1];if(k<e){var l=e;e=k;k=l}var x=k-e,n=1E-6>ea(x-ia);!n&&b<a&&(l=a,a=b,b=l);if(n||1E-6>x?n?0<a+b^h[1]<(1E-6>ea(h[0]-e)?a:b):a<=h[1]&&h[1]<=b:x>ia^(e<=h[0]&&h[0]<=k))return b=tb(c,(-f+L)/g),Lb(b,m),[h,Nb(b)]}}function c(b,e){var c=f?a:ia-a,d=0;b<-c?d|=1:b>c&&(d|=2);e<-c?d|=4:e>c&&(d|=8);return d}var d=Math.cos(a),f=0<d,m=1E-6<ea(d),g=Yc(a,6*ha);return Fa(b,function(a){var d,
g,h,L,k;return{lineStart:function(){L=h=!1;k=1},point:function(l,x){var n=[l,x],q=b(l,x);x=f?q?0:c(l,x):q?c(l+(0>l?ia:-ia),x):0;!d&&(L=h=q)&&a.lineStart();q!==h&&(l=e(d,n),od(d,l)||od(n,l))&&(n[0]+=1E-6,n[1]+=1E-6,q=b(n[0],n[1]));if(q!==h)k=0,q?(a.lineStart(),l=e(n,d),a.point(l[0],l[1])):(l=e(d,n),a.point(l[0],l[1]),a.lineEnd()),d=l;else if(m&&d&&f^q){var D;x&g||!(D=e(n,d,!0))||(k=0,f?(a.lineStart(),a.point(D[0][0],D[0][1]),a.point(D[1][0],D[1][1]),a.lineEnd()):(a.point(D[1][0],D[1][1]),a.lineEnd(),
a.lineStart(),a.point(D[0][0],D[0][1])))}!q||d&&od(d,n)||a.point(n[0],n[1]);d=n;h=q;g=x},lineEnd:function(){h&&a.lineEnd();d=null},clean:function(){return k|(L&&h)<<1}}},g,f?[0,-a]:[-ia,a-ia])}function wc(a,b,e,c){return function(d){var f=d.a,m=d.b,g=f.x;f=f.y;var h=0,L=1,k=m.x-g;m=m.y-f;var l=a-g;if(k||!(0<l)){l/=k;if(0>k){if(l<h)return;l<L&&(L=l)}else if(0<k){if(l>L)return;l>h&&(h=l)}l=e-g;if(k||!(0>l)){l/=k;if(0>k){if(l>L)return;l>h&&(h=l)}else if(0<k){if(l<h)return;l<L&&(L=l)}l=b-f;if(m||!(0<
l)){l/=m;if(0>m){if(l<h)return;l<L&&(L=l)}else if(0<m){if(l>L)return;l>h&&(h=l)}l=c-f;if(m||!(0>l)){l/=m;if(0>m){if(l>L)return;l>h&&(h=l)}else if(0<m){if(l<h)return;l<L&&(L=l)}0<h&&(d.a={x:g+h*k,y:f+h*m});1>L&&(d.b={x:g+L*k,y:f+L*m});return d}}}}}}function Ae(a,b,e,c){function d(c,d){return 1E-6>ea(c[0]-a)?0<d?0:3:1E-6>ea(c[0]-e)?0<d?2:1:1E-6>ea(c[1]-b)?0<d?1:0:0<d?3:2}function f(a,b){return m(a.x,b.x)}function m(a,b){var e=d(a,1),c=d(b,1);return e!==c?e-c:0===e?b[1]-a[1]:1===e?a[0]-b[0]:2===e?a[1]-
b[1]:b[0]-a[0]}return function(g){function h(f,g,h,L){var k=0,l=0;if(null==f||(k=d(f,h))!==(l=d(g,h))||0>m(f,g)^0<h){do L.point(0===k||3===k?a:e,1<k?c:b);while((k=(k+h+4)%4)!==l)}else L.point(g[0],g[1])}function L(d,f){a<=d&&d<=e&&b<=f&&f<=c&&g.point(d,f)}function k(d,f){d=Math.max(-1E9,Math.min(1E9,d));f=Math.max(-1E9,Math.min(1E9,f));var m=a<=d&&d<=e&&b<=f&&f<=c;D&&Ca.push([d,f]);if(z)t=d,H=f,v=m,z=!1,m&&(g.lineStart(),g.point(d,f));else if(m&&w)g.point(d,f);else{var h={a:{x:r,y:y},b:{x:d,y:f}};
n(h)?(w||(g.lineStart(),g.point(h.a.x,h.a.y)),g.point(h.b.x,h.b.y),m||g.lineEnd(),Ua=!1):m&&(g.lineStart(),g.point(d,f),Ua=!1)}r=d;y=f;w=m}var l=g,x=Yb(),n=wc(a,b,e,c),q,D,Ca,p={point:L,lineStart:function(){p.point=k;D&&D.push(Ca=[]);z=!0;w=!1;r=y=NaN},lineEnd:function(){q&&(k(t,H),v&&w&&x.rejoin(),q.push(x.buffer()));p.point=L;w&&g.lineEnd()},polygonStart:function(){g=x;q=[];D=[];Ua=!0},polygonEnd:function(){g=l;q=B.merge(q);var b=[a,c];for(var e=0,d=D.length,m=b[1],L=0;L<d;++L)for(var k=1,x=D[L],
n=x.length,p=x[0],t;k<n;++k)t=x[k],p[1]<=m?t[1]>m&&0<Ta(p,t,b)&&++e:t[1]<=m&&0>Ta(p,t,b)&&--e,p=t;b=0!==e;e=Ua&&b;d=q.length;if(e||d)g.polygonStart(),e&&(g.lineStart(),h(null,null,1,g),g.lineEnd()),d&&ma(q,f,b,h,g),g.polygonEnd();q=D=Ca=null}},t,H,v,r,y,w,z,Ua;return p}}function xc(a){var b=0,e=ia/3,c=Xc(a);a=c(b,e);a.parallels=function(a){return arguments.length?c(b=a[0]*ia/180,e=a[1]*ia/180):[b/ia*180,e/ia*180]};return a}function Xd(a,b){function e(a,b){b=Math.sqrt(d-2*c*Math.sin(b))/c;return[b*
Math.sin(a*=c),f-b*Math.cos(a)]}a=Math.sin(a);var c=(a+Math.sin(b))/2,d=1+a*(2*c-a),f=Math.sqrt(d)/c;e.invert=function(a,b){b=f-b;return[Math.atan2(a,b)/c,xa((d-(a*a+b*b)*c*c)/(2*c))]};return e}function dg(){function a(a,b){Ad+=d*a-c*b;c=a;d=b}var b,e,c,d;Gb.point=function(f,m){Gb.point=a;b=c=f;e=d=m};Gb.lineEnd=function(){a(b,e)}}function O(){function a(a,b){m.push("M",a,",",b,f)}function b(a,b){m.push("M",a,",",b);g.point=e}function e(a,b){m.push("L",a,",",b)}function c(){g.point=a}function d(){m.push("Z")}
var f=Za(4.5),m=[],g={point:a,lineStart:function(){g.point=b},lineEnd:c,polygonStart:function(){g.lineEnd=d},polygonEnd:function(){g.lineEnd=c;g.point=a},pointRadius:function(a){f=Za(a);return g},result:function(){if(m.length){var a=m.join("");m=[];return a}}};return g}function Za(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function lc(a,b){cd+=a;bc+=b;++nc}function kf(){function a(a,c){var d=a-b,f=c-e;d=Math.sqrt(d*d+f*f);cc+=d*(b+a)/2;dc+=d*(e+c)/2;Qb+=d;lc(b=a,
e=c)}var b,e;Ra.point=function(c,d){Ra.point=a;lc(b=c,e=d)}}function vd(){Ra.point=lc}function Be(){function a(a,b){var e=a-c,f=b-d;e=Math.sqrt(e*e+f*f);cc+=e*(c+a)/2;dc+=e*(d+b)/2;Qb+=e;e=d*a-c*b;ob+=e*(c+a);zd+=e*(d+b);ed+=3*e;lc(c=a,d=b)}var b,e,c,d;Ra.point=function(f,m){Ra.point=a;lc(b=c=f,e=d=m)};Ra.lineEnd=function(){a(b,e)}}function lf(a){function b(b,e){a.moveTo(b+m,e);a.arc(b,e,m,0,fb)}function e(b,e){a.moveTo(b,e);g.point=c}function c(b,e){a.lineTo(b,e)}function d(){g.point=b}function f(){a.closePath()}
var m=4.5,g={point:b,lineStart:function(){g.point=e},lineEnd:d,polygonStart:function(){g.lineEnd=f},polygonEnd:function(){g.lineEnd=d;g.point=b},pointRadius:function(a){m=a;return g},result:y};return g}function mc(a){function b(a){return(g?c:e)(a)}function e(b){return Mc(b,function(e,c){e=a(e,c);b.point(e[0],e[1])})}function c(b){function e(e,c){e=a(e,c);b.point(e[0],e[1])}function c(){t=NaN;w.point=f;b.lineStart()}function f(e,c){var f=jc([e,c]);c=a(e,c);d(t,H,Ca,v,r,y,t=c[0],H=c[1],Ca=e,v=f[0],
r=f[1],y=f[2],g,b);b.point(t,H)}function m(){w.point=e;b.lineEnd()}function h(){c();w.point=L;w.lineEnd=k}function L(a,b){f(l=a,b);x=t;n=H;q=v;D=r;p=y;w.point=f}function k(){d(t,H,Ca,v,r,y,x,n,l,q,D,p,g,b);w.lineEnd=m;m()}var l,x,n,q,D,p,Ca,t,H,v,r,y,w={point:e,lineStart:c,lineEnd:m,polygonStart:function(){b.polygonStart();w.lineStart=h},polygonEnd:function(){b.polygonEnd();w.lineStart=c}};return w}function d(b,e,c,g,h,L,k,l,x,n,q,D,p,Ca){var t=k-b,H=l-e,v=t*t+H*H;if(v>4*f&&p--){var r=g+n,y=h+q,w=
L+D,z=Math.sqrt(r*r+y*y+w*w),Ua=Math.asin(w/=z),N=1E-6>ea(ea(w)-1)||1E-6>ea(c-x)?(c+x)/2:Math.atan2(y,r),A=a(N,Ua);Ua=A[0];A=A[1];var C=Ua-b,$d=A-e,F=H*C-t*$d;if(F*F/v>f||.3<ea((t*C+H*$d)/v-.5)||g*n+h*q+L*D<m)d(b,e,c,g,h,L,Ua,A,N,r/=z,y/=z,w,p,Ca),Ca.point(Ua,A),d(Ua,A,N,r,y,w,k,l,x,n,q,D,p,Ca)}}var f=.5,m=Math.cos(30*ha),g=16;b.precision=function(a){if(!arguments.length)return Math.sqrt(f);g=0<(f=a*a)&&16;return b};return b}function mf(a){var b=mc(function(b,e){return a([b*Ha,e*Ha])});return function(a){return $b(b(a))}}
function Zb(a){this.stream=a}function Mc(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Ob(a){return Xc(function(){return a})()}function Xc(a){function b(a){a=g(a[0]*ha,a[1]*ha);return[a[0]*k+t,H-a[1]*k]}function e(a){return(a=g.invert((a[0]-t)/k,(H-a[1])/k))&&[a[0]*Ha,a[1]*Ha]}function c(){g=Uc(m=wd(q,D,p),f);var a=f(x,n);t=l-a[0]*k;H=L+
a[1]*k;return d()}function d(){z&&(z.valid=!1,z=null);return b}var f,m,g,h=mc(function(a,b){a=f(a,b);return[a[0]*k+t,H-a[1]*k]}),k=150,l=480,L=250,x=0,n=0,q=0,D=0,p=0,t,H,r=Dc,v=Ka,y=null,w=null,z;b.stream=function(a){z&&(z.valid=!1);z=$b(r(m,h(v(a))));z.valid=!0;return z};b.clipAngle=function(a){if(!arguments.length)return y;r=null==a?(y=a,Dc):jf((y=+a)*ha);return d()};b.clipExtent=function(a){if(!arguments.length)return w;v=(w=a)?Ae(a[0][0],a[0][1],a[1][0],a[1][1]):Ka;return d()};b.scale=function(a){if(!arguments.length)return k;
k=+a;return c()};b.translate=function(a){if(!arguments.length)return[l,L];l=+a[0];L=+a[1];return c()};b.center=function(a){if(!arguments.length)return[x*Ha,n*Ha];x=a[0]%360*ha;n=a[1]%360*ha;return c()};b.rotate=function(a){if(!arguments.length)return[q*Ha,D*Ha,p*Ha];q=a[0]%360*ha;D=a[1]%360*ha;p=2<a.length?a[2]%360*ha:0;return c()};B.rebind(b,h,"precision");return function(){f=a.apply(this,arguments);b.invert=f.invert&&e;return c()}}function $b(a){return Mc(a,function(b,e){a.point(b*ha,e*ha)})}function Pb(a,
b){return[a,b]}function qe(a,b){return[a>ia?a-fb:a<-ia?a+fb:a,b]}function wd(a,b,e){return a?b||e?Uc(De(a),xd(b,e)):De(a):b||e?xd(b,e):qe}function Ce(a){return function(b,e){return b+=a,[b>ia?b-fb:b<-ia?b+fb:b,e]}}function De(a){var b=Ce(a);b.invert=Ce(-a);return b}function xd(a,b){function e(a,b){var e=Math.cos(b),g=Math.cos(a)*e;a=Math.sin(a)*e;b=Math.sin(b);e=b*c+g*d;return[Math.atan2(a*f-e*m,g*c-b*d),xa(e*f+a*m)]}var c=Math.cos(a),d=Math.sin(a),f=Math.cos(b),m=Math.sin(b);e.invert=function(a,
b){var e=Math.cos(b),g=Math.cos(a)*e;a=Math.sin(a)*e;b=Math.sin(b);e=b*f-a*m;return[Math.atan2(a*f+b*m,g*c+e*d),xa(e*c-g*d)]};return e}function Yc(a,b){var e=Math.cos(a),c=Math.sin(a);return function(d,f,m,g){var h=m*b;if(null!=d){if(d=ub(e,d),f=ub(e,f),0<m?d<f:d>f)d+=m*fb}else d=a+m*fb,f=a-.5*h;for(var k;0<m?d>f:d<f;d-=h)g.point((k=Nb([e,-c*Math.cos(d),-c*Math.sin(d)]))[0],k[1])}}function ub(a,b){b=jc(b);b[0]-=a;kc(b);a=Xa(-b[1]);return((0>-b[2]?-a:a)+2*Math.PI-1E-6)%(2*Math.PI)}function Zc(a,b,
e){var c=B.range(a,b-1E-6,e).concat(b);return function(a){return c.map(function(b){return[a,b]})}}function Yd(a,b,e){var c=B.range(a,b-1E-6,e).concat(b);return function(a){return c.map(function(b){return[b,a]})}}function yc(a){return a.source}function $c(a){return a.target}function Zd(a,b,e,c){var d=Math.cos(b),f=Math.sin(b),m=Math.cos(c),g=Math.sin(c),h=d*Math.cos(a),k=d*Math.sin(a),l=m*Math.cos(e),L=m*Math.sin(e),x=2*Math.asin(Math.sqrt(Q(c-b)+d*m*Q(e-a))),n=1/Math.sin(x);e=x?function(a){var b=
Math.sin(a*=x)*n;a=Math.sin(x-a)*n;var e=a*h+b*l,c=a*k+b*L;return[Math.atan2(c,e)*Ha,Math.atan2(a*f+b*g,Math.sqrt(e*e+c*c))*Ha]}:function(){return[a*Ha,b*Ha]};e.distance=x;return e}function ya(a,b){function e(b,e){var c=Math.cos(e),d=a(Math.cos(b)*c);return[d*c*Math.sin(b),d*Math.sin(e)]}e.invert=function(a,e){var c=Math.sqrt(a*a+e*e),d=b(c),f=Math.sin(d);return[Math.atan2(a*f,c*Math.cos(d)),Math.asin(c&&e*f/c)]};return e}function Nd(a,b){function e(a,b){0<f?b<-Ga+1E-6&&(b=-Ga+1E-6):b>Ga-1E-6&&(b=
Ga-1E-6);b=f/Math.pow(Math.tan(ia/4+b/2),d);return[b*Math.sin(d*a),f-b*Math.cos(d*a)]}var c=Math.cos(a),d=a===b?Math.sin(a):Math.log(c/Math.cos(b))/Math.log(Math.tan(ia/4+b/2)/Math.tan(ia/4+a/2)),f=c*Math.pow(Math.tan(ia/4+a/2),d)/d;if(!d)return yb;e.invert=function(a,b){b=f-b;return[Math.atan2(a,b)/d,2*Math.atan(Math.pow(f/((0<d?1:0>d?-1:0)*Math.sqrt(a*a+b*b)),1/d))-Ga]};return e}function je(a,b){function e(a,b){b=f-b;return[b*Math.sin(d*a),f-b*Math.cos(d*a)]}var c=Math.cos(a),d=a===b?Math.sin(a):
(c-Math.cos(b))/(b-a),f=c/d+a;if(1E-6>ea(d))return Pb;e.invert=function(a,b){b=f-b;return[Math.atan2(a,b)/d,f-(0<d?1:0>d?-1:0)*Math.sqrt(a*a+b*b)]};return e}function yb(a,b){return[a,Math.log(Math.tan(ia/4+b/2))]}function Ic(a){var b=Ob(a),e=b.scale,c=b.translate,d=b.clipExtent,f;b.scale=function(){var a=e.apply(b,arguments);return a===b?f?b.clipExtent(null):b:a};b.translate=function(){var a=c.apply(b,arguments);return a===b?f?b.clipExtent(null):b:a};b.clipExtent=function(a){var m=d.apply(b,arguments);
if(m===b){if(f=null==a){var g=ia*e(),h=c();d([[h[0]-g,h[1]-g],[h[0]+g,h[1]+g]])}}else f&&(m=null);return m};return b.clipExtent(null)}function Xe(a,b){return[Math.log(Math.tan(ia/4+b/2)),-a]}function rc(a){return a[0]}function le(a){return a[1]}function Ye(a){for(var b=a.length,e=[0,1],c=2,d=2;d<b;d++){for(;1<c&&0>=Ta(a[e[c-2]],a[e[c-1]],a[d]);)--c;e[c++]=d}return e.slice(0,c)}function $g(a,b){return a[0]-b[0]||a[1]-b[1]}function Ze(a,b,e){return(e[0]-b[0])*(a[1]-b[1])<(e[1]-b[1])*(a[0]-b[0])}function me(a,
b,e,c){var d=a[0],f=e[0],m=b[0]-d,g=c[0]-f;a=a[1];e=e[1];b=b[1]-a;c=c[1]-e;f=(g*(a-e)-c*(d-f))/(c*m-g*b);return[d+f*m,a+f*b]}function ne(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function ji(){Pd(this);this.edge=this.site=this.circle=null}function ah(a){var b=ec.pop()||new ji;b.site=a;return b}function Xf(a){Mb(a);vb.remove(a);ec.push(a);Pd(a)}function Yf(a,b){var e=a.site,c=e.x,d=e.y,f=d-b;if(!f)return c;a=a.P;if(!a)return-Infinity;e=a.site;a=e.x;e=e.y;b=e-b;if(!b)return a;var m=
a-c,g=1/f-1/b,h=m/b;return g?(-h+Math.sqrt(h*h-2*g*(m*m/(-2*b)-e+b/2+d-f/2)))/g+c:(c+a)/2}function bf(a){this.site=a;this.edges=[]}function cf(a,b){return b.angle-a.angle}function mh(){Pd(this);this.x=this.y=this.arc=this.site=this.cy=null}function Pc(a){var b=a.P,e=a.N;if(b&&e){var c=b.site;b=a.site;var d=e.site;if(c!==d){e=b.x;var f=b.y,m=c.x-e,g=c.y-f;c=d.x-e;d=d.y-f;var h=2*(m*d-g*c);if(!(-1E-12<=h)){var k=m*m+g*g,l=c*c+d*d;g=(d*k-g*l)/h;m=(m*l-c*k)/h;d=m+f;f=Bh.pop()||new mh;f.arc=a;f.site=b;
f.x=g+e;f.y=d+Math.sqrt(g*g+m*m);f.cy=d;a.circle=f;a=null;for(b=Bd._;b;)if(f.y<b.y||f.y===b.y&&f.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}Bd.insert(a,f);a||(mg=f)}}}}function Mb(a){var b=a.circle;b&&(b.P||(mg=b.N),Bd.remove(b),Bh.push(b),Pd(b),a.circle=null)}function ti(a,b){var e=a.b;if(e)return!0;var c=a.a;e=b[0][0];var d=b[1][0],f=b[0][1];b=b[1][1];var m=a.l,g=a.r,h=m.x;m=m.y;var k=g.x;g=g.y;var l=(h+k)/2;if(g===m){if(l<e||l>=d)return;if(h>k){if(!c)c={x:l,y:f};else if(c.y>=
b)return;e={x:l,y:b}}else{if(!c)c={x:l,y:b};else if(c.y<f)return;e={x:l,y:f}}}else{var x=(h-k)/(g-m);l=(m+g)/2-x*l;if(-1>x||1<x)if(h>k){if(!c)c={x:(f-l)/x,y:f};else if(c.y>=b)return;e={x:(b-l)/x,y:b}}else{if(!c)c={x:(b-l)/x,y:b};else if(c.y<f)return;e={x:(f-l)/x,y:f}}else if(m<g){if(!c)c={x:e,y:x*e+l};else if(c.x>=d)return;e={x:d,y:x*d+l}}else{if(!c)c={x:d,y:x*d+l};else if(c.x<e)return;e={x:e,y:x*e+l}}}a.a=c;a.b=e;return!0}function $e(a,b){this.l=a;this.r=b;this.a=this.b=null}function te(a,b,e,c){var d=
new $e(a,b);ib.push(d);e&&Oc(d,a,b,e);c&&Oc(d,b,a,c);Cd[a.i].edges.push(new ue(d,a,b));Cd[b.i].edges.push(new ue(d,b,a));return d}function fh(a,b,e){a=new $e(a,null);a.a=b;a.b=e;ib.push(a);return a}function Oc(a,b,e,c){a.a||a.b?a.l===e?a.b=c:a.a=c:(a.a=c,a.l=b,a.r=e)}function ue(a,b,e){var c=a.a,d=a.b;this.edge=a;this.site=b;this.angle=e?Math.atan2(e.y-b.y,e.x-b.x):a.l===b?Math.atan2(d.x-c.x,c.y-d.y):Math.atan2(c.x-d.x,d.y-c.y)}function ef(){this._=null}function Pd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}
function re(a,b){var e=b.R,c=b.U;c?c.L===b?c.L=e:c.R=e:a._=e;e.U=c;b.U=e;b.R=e.L;b.R&&(b.R.U=b);e.L=b}function Od(a,b){var e=b.L,c=b.U;c?c.L===b?c.L=e:c.R=e:a._=e;e.U=c;b.U=e;b.L=e.R;b.L&&(b.L.U=b);e.R=b}function Wf(a){for(;a.L;)a=a.L;return a}function se(a,b){var e=a.sort(ui).pop(),c;ib=[];Cd=Array(a.length);vb=new ef;for(Bd=new ef;;){var d=mg;if(e&&(!d||e.y<d.y||e.y===d.y&&e.x<d.x)){if(e.x!==c||e.y!==f){Cd[e.i]=new bf(e);var f=c=void 0;d=e;for(var m=d.x,g=d.y,h=vb._;h;){var k=Yf(h,g)-m;if(1E-6<
k)h=h.L;else{var l=h;var x=g;var L=l.N;L?x=Yf(L,x):(l=l.site,x=l.y===x?l.x:Infinity);x=m-x;if(1E-6<x){if(!h.R){f=h;break}h=h.R}else{-1E-6<k?(f=h.P,c=h):-1E-6<x?(f=h,c=h.N):f=c=h;break}}}k=ah(d);vb.insert(f,k);if(f||c)if(f===c)Mb(f),c=ah(f.site),vb.insert(k,c),k.edge=c.edge=te(f.site,k.site),Pc(f),Pc(c);else if(c){Mb(f);Mb(c);m=f.site;h=m.x;x=m.y;l=d.x-h;L=d.y-x;g=c.site;var n=g.x-h,q=g.y-x,D=2*(l*q-L*n),p=l*l+L*L,t=n*n+q*q;h={x:(q*p-L*t)/D+h,y:(l*t-n*p)/D+x};Oc(c.edge,m,g,h);k.edge=te(m,d,null,h);
c.edge=te(d,g,null,h);Pc(f);Pc(c)}else k.edge=te(f.site,k.site);c=e.x;f=e.y}e=a.pop()}else if(d){g=d.arc;d=g.circle;m=d.x;h=d.cy;d={x:m,y:h};l=g.P;x=g.N;k=[g];Xf(g);for(g=l;g.circle&&1E-6>ea(m-g.circle.x)&&1E-6>ea(h-g.circle.cy);)l=g.P,k.unshift(g),Xf(g),g=l;k.unshift(g);Mb(g);for(l=x;l.circle&&1E-6>ea(m-l.circle.x)&&1E-6>ea(h-l.circle.cy);)x=l.N,k.push(l),Xf(l),l=x;k.push(l);Mb(l);h=k.length;for(m=1;m<h;++m)l=k[m],g=k[m-1],Oc(l.edge,g.site,l.site,d);g=k[0];l=k[h-1];l.edge=te(g.site,l.site,null,d);
Pc(g);Pc(l)}else break}if(b){a=ib;e=wc(b[0][0],b[0][1],b[1][0],b[1][1]);for(c=a.length;c--;)if(f=a[c],!ti(f,b)||!e(f)||1E-6>ea(f.a.x-f.b.x)&&1E-6>ea(f.a.y-f.b.y))f.a=f.b=null,a.splice(c,1);a=b[0][0];e=b[1][0];c=b[0][1];b=b[1][1];m=Cd;for(g=m.length;g--;)if((h=m[g])&&h.prepare())for(l=h.edges,L=l.length,x=0;x<L;)if(n=l[x].end(),d=n.x,k=n.y,q=l[++x%L].start(),f=q.x,q=q.y,1E-6<ea(d-f)||1E-6<ea(k-q))l.splice(x,0,new ue(fh(h.site,n,1E-6>ea(d-a)&&1E-6<b-k?{x:a,y:1E-6>ea(f-a)?q:b}:1E-6>ea(k-b)&&1E-6<e-d?
{x:1E-6>ea(q-b)?f:e,y:b}:1E-6>ea(d-e)&&1E-6<k-c?{x:e,y:1E-6>ea(f-e)?q:c}:1E-6>ea(k-c)&&1E-6<d-a?{x:1E-6>ea(q-c)?f:a,y:c}:null),h.site,null)),++L}b={cells:Cd,edges:ib};vb=Bd=ib=Cd=null;return b}function ui(a,b){return b.y-a.y||b.x-a.x}function ag(a){return a.x}function gh(a){return a.y}function ff(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ve(a,b,e,c,d,f){if(!a(b,e,c,d,f)){var m=.5*(e+d),g=.5*(c+f);b=b.nodes;b[0]&&ve(a,b[0],e,c,m,g);b[1]&&ve(a,b[1],m,c,d,g);b[2]&&ve(a,b[2],e,g,m,
f);b[3]&&ve(a,b[3],m,g,d,f)}}function gf(a,b,e,c,d,f,m){var g=Infinity,h;(function of(a,l,k,x,L){var n;if(!(l>f||k>m||x<c||L<d)){if(n=a.point){var q=b-n[0],D=e-n[1];q=q*q+D*D;q<g&&(q=Math.sqrt(g=q),c=b-q,d=e-q,f=b+q,m=e+q,h=n)}n=a.nodes;q=.5*(l+x);D=.5*(k+L);for(var p=(e>=D)<<1|b>=q,t=p+4;p<t;++p)if(a=n[p&3])switch(p&3){case 0:of(a,l,k,q,D);break;case 1:of(a,q,k,x,D);break;case 2:of(a,l,D,q,L);break;case 3:of(a,q,D,x,L)}}})(a,c,d,f,m);return h}function $f(a,b){a=B.rgb(a);b=B.rgb(b);var e=a.r,c=a.g,
d=a.b,f=b.r-e,m=b.g-c,g=b.b-d;return function(a){return"#"+Db(Math.round(e+f*a))+Db(Math.round(c+m*a))+Db(Math.round(d+g*a))}}function nh(a,b){var e={},c={},d;for(d in a)d in b?e[d]=Xb(a[d],b[d]):c[d]=a[d];for(d in b)d in a||(c[d]=b[d]);return function(a){for(d in e)c[d]=e[d](a);return c}}function hc(a,b){a=+a;b=+b;return function(e){return a*(1-e)+b*e}}function oh(a,b){var e=ng.lastIndex=Ge.lastIndex=0,c,d,f,m=-1,g=[],h=[];a+="";for(b+="";(c=ng.exec(a))&&(d=Ge.exec(b));)(f=d.index)>e&&(f=b.slice(e,
f),g[m]?g[m]+=f:g[++m]=f),(c=c[0])===(d=d[0])?g[m]?g[m]+=d:g[++m]=d:(g[++m]=null,h.push({i:m,x:hc(c,d)})),e=Ge.lastIndex;e<b.length&&(f=b.slice(e),g[m]?g[m]+=f:g[++m]=f);return 2>g.length?h[0]?(b=h[0].x,function(a){return b(a)+""}):function(){return b}:(b=h.length,function(a){for(var e=0,c;e<b;++e)g[(c=h[e]).i]=c.x(a);return g.join("")})}function Xb(a,b){for(var e=B.interpolators.length,c;0<=--e&&!(c=B.interpolators[e](a,b)););return c}function we(a,b){var e=[],c=[],d=a.length,f=b.length,m=Math.min(a.length,
b.length),g;for(g=0;g<m;++g)e.push(Xb(a[g],b[g]));for(;g<d;++g)c[g]=a[g];for(;g<f;++g)c[g]=b[g];return function(a){for(g=0;g<m;++g)c[g]=e[g](a);return c}}function kh(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function rd(a){return function(b){return 1-a(1-b)}}function Bb(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function xe(a){return a*a}function Cb(a){return a*a*a}function Uf(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,e=b*a;return 4*(.5>a?e:3*(a-b)+e-.75)}function vi(a){return 1-
Math.cos(a*Ga)}function wi(a){return Math.pow(2,10*(a-1))}function xi(a){return 1-Math.sqrt(1-a*a)}function ph(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Sf(a,b){b-=a;return function(e){return Math.round(a+b*e)}}function Vf(a){var b=[a.a,a.b],e=[a.c,a.d],c=hh(b),d=b[0]*e[0]+b[1]*e[1],f=-d;e[0]+=f*b[0];e[1]+=f*b[1];f=hh(e)||0;b[0]*e[1]<e[0]*b[1]&&(b[0]*=-1,b[1]*=-1,c*=-1,d*=-1);this.rotate=(c?
Math.atan2(b[1],b[0]):Math.atan2(-e[0],e[1]))*Ha;this.translate=[a.e,a.f];this.scale=[c,f];this.skew=f?Math.atan2(d,f)*Ha:0}function hh(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=b);return b}function qh(a,b){var e=[],c=[],d=B.transform(a),f=B.transform(b);b=d.translate;a=f.translate;var m=d.rotate,g=f.rotate,h=d.skew,l=f.skew;d=d.scale;f=f.scale;b[0]!=a[0]||b[1]!=a[1]?(e.push("translate(",null,",",null,")"),c.push({i:1,x:hc(b[0],a[0])},{i:3,x:hc(b[1],a[1])})):a[0]||a[1]?e.push("translate("+
a+")"):e.push("");m!=g?(180<m-g?g+=360:180<g-m&&(m+=360),c.push({i:e.push(e.pop()+"rotate(",null,")")-2,x:hc(m,g)})):g&&e.push(e.pop()+"rotate("+g+")");h!=l?c.push({i:e.push(e.pop()+"skewX(",null,")")-2,x:hc(h,l)}):l&&e.push(e.pop()+"skewX("+l+")");if(d[0]!=f[0]||d[1]!=f[1]){var k=e.push(e.pop()+"scale(",null,",",null,")");c.push({i:k-4,x:hc(d[0],f[0])},{i:k-2,x:hc(d[1],f[1])})}else 1==f[0]&&1==f[1]||e.push(e.pop()+"scale("+f+")");k=c.length;return function(a){for(var b=-1,d;++b<k;)e[(d=c[b]).i]=
d.x(a);return e.join("")}}function rh(a,b){b=(b-=a=+a)||1/b;return function(e){return(e-a)/b}}function yi(a,b){b=(b-=a=+a)||1/b;return function(e){return Math.max(0,Math.min(1,(e-a)/b))}}function Tf(a){var b=a.source;a=a.target;var e=a;if(b===e)var c=b;else{c=bg(b);e=bg(e);for(var d=c.pop(),f=e.pop(),m=null;d===f;)m=d,d=c.pop(),f=e.pop();c=m}for(e=[b];b!==c;)b=b.parent,e.push(b);for(b=e.length;a!==c;)e.splice(b,0,a),a=a.parent;return e}function bg(a){for(var b=[],e=a.parent;null!=e;)b.push(a),a=e,
e=e.parent;b.push(a);return b}function ni(a){a.fixed|=2}function zi(a){a.fixed&=-7}function oi(a){a.fixed|=4;a.px=a.x;a.py=a.y}function ih(a){a.fixed&=-5}function Ja(a,b,e){var c=0,d=0;a.charge=0;if(!a.leaf)for(var f=a.nodes,m=f.length,g=-1,h;++g<m;)h=f[g],null!=h&&(Ja(h,b,e),a.charge+=h.charge,c+=h.charge*h.cx,d+=h.charge*h.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),b*=e[a.point.index],a.charge+=a.pointCharge=b,c+=b*a.point.x,d+=b*a.point.y);a.cx=c/a.charge;a.cy=
d/a.charge}function Wb(a,b){B.rebind(a,b,"sort","children","value");a.nodes=a;a.links=ki;return a}function Nc(a,b){for(var e,c,d=[a];null!=(a=d.pop());)if(b(a),(e=a.children)&&(c=e.length))for(;0<=--c;)d.push(e[c])}function Ab(a,b){for(var e,c,d=[a],f=[];null!=(a=d.pop());)if(f.push(a),(e=a.children)&&(c=e.length))for(a=-1;++a<c;)d.push(e[a]);for(;null!=(a=f.pop());)b(a)}function bh(a){return a.children}function ch(a){return a.value}function dh(a,b){return b.value-a.value}function ki(a){return B.merge(a.map(function(a){return(a.children||
[]).map(function(b){return{source:a,target:b}})}))}function eh(a){return a.x}function li(a){return a.y}function mi(a,b,e){a.y0=b;a.y=e}function Rf(a){return B.range(a.length)}function Qd(a){var b=-1;a=a[0].length;for(var e=[];++b<a;)e[b]=0;return e}function jh(a){for(var b=1,e=0,c=a[0][1],d,f=a.length;b<f;++b)(d=a[b][1])>c&&(e=b,c=d);return e}function pi(a){return a.reduce(qi,0)}function qi(a,b){return a+b[1]}function ri(a,b){return ic(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function ic(a,b){var e=
-1,c=+a[0];a=(a[1]-c)/b;for(var d=[];++e<=b;)d[e]=a*e+c;return d}function lh(a){return[B.min(a),B.max(a)]}function si(a,b){return a.value-b.value}function af(a,b){var e=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=e;e._pack_prev=b}function Zf(a,b){a._pack_next=b;b._pack_prev=a}function df(a,b){var e=b.x-a.x,c=b.y-a.y;a=a.r+b.r;return.999*a*a>e*e+c*c}function Dd(a){function b(a){c=Math.min(a.x-a.r,c);d=Math.max(a.x+a.r,d);f=Math.min(a.y-a.r,f);m=Math.max(a.y+a.r,m)}if((e=a.children)&&(k=
e.length)){var e,c=Infinity,d=-Infinity,f=Infinity,m=-Infinity,g,h,l,k;e.forEach(og);var x=e[0];x.x=-x.r;x.y=0;b(x);if(1<k){var n=e[1];n.x=n.r;n.y=0;b(n);if(2<k){var L=e[2];rf(x,n,L);b(L);af(x,L);x._pack_prev=L;af(L,n);n=x._pack_next;for(g=3;g<k;g++){rf(x,n,L=e[g]);var q=0,D=1,p=1;for(h=n._pack_next;h!==n;h=h._pack_next,D++)if(df(h,L)){q=1;break}if(1==q)for(l=x._pack_prev;l!==h._pack_prev&&!df(l,L);l=l._pack_prev,p++);q?(D<p||D==p&&n.r<x.r?Zf(x,n=h):Zf(x=l,n),g--):(af(x,L),n=L,b(L))}}}x=(c+d)/2;n=
(f+m)/2;for(g=h=0;g<k;g++)L=e[g],L.x-=x,L.y-=n,h=Math.max(h,L.r+Math.sqrt(L.x*L.x+L.y*L.y));a.r=h;e.forEach(pg)}}function og(a){a._pack_next=a._pack_prev=a}function pg(a){delete a._pack_next;delete a._pack_prev}function Ch(a,b,e,c){var d=a.children;a.x=b+=c*a.x;a.y=e+=c*a.y;a.r*=c;if(d){a=-1;for(var f=d.length;++a<f;)Ch(d[a],b,e,c)}}function rf(a,b,e){var c=a.r+e.r,d=b.x-a.x,f=b.y-a.y;if(c&&(d||f)){var m=b.r+e.r,g=d*d+f*f;m*=m;c*=c;b=.5+(c-m)/(2*g);m=Math.sqrt(Math.max(0,2*m*(c+g)-(c-=g)*c-m*m))/
(2*g);e.x=a.x+b*d+m*f;e.y=a.y+b*f-m*d}else e.x=a.x+c,e.y=a.y}function Dh(a,b){return a.parent==b.parent?1:2}function He(a){var b=a.children;return b.length?b[0]:a.t}function qg(a){var b=a.children,e;return(e=b.length)?b[e-1]:a.t}function Hi(a){return 1+B.max(a,function(a){return a.y})}function rg(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function sg(a){var b=a.children;return b&&b.length?sg(b[0]):a}function Ie(a){var b=a.children,e;return b&&(e=b.length)?Ie(b[e-1]):a}function sf(a){return{x:a.x,
y:a.y,dx:a.dx,dy:a.dy}}function tg(a,b){var e=a.x+b[3],c=a.y+b[0],d=a.dx-b[1]-b[3];a=a.dy-b[0]-b[2];0>d&&(e+=d/2,d=0);0>a&&(c+=a/2,a=0);return{x:e,y:c,dx:d,dy:a}}function fd(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function tf(a){return a.rangeExtent?a.rangeExtent():fd(a.range())}function ug(a,b,e,c){var d=e(a[0],a[1]),f=c(b[0],b[1]);return function(a){return f(d(a))}}function Je(a,b){var e=0,c=a.length-1,d=a[e],f=a[c];if(f<d){var m=e;e=c;c=m;m=d;d=f;f=m}a[e]=b.floor(d);a[c]=b.ceil(f);
return a}function vg(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:Eh}function Fh(a,b,e,c){var d=[],f=[],m=0,g=Math.min(a.length,b.length)-1;a[g]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++m<=g;)d.push(e(a[m-1],a[m])),f.push(c(b[m-1],b[m]));return function(b){var e=B.bisect(a,b,1,g)-1;return f[e](d[e](b))}}function uf(a,b,e,c){function d(){var d=2<Math.min(a.length,b.length)?Fh:ug,h=c?yi:rh;m=d(a,b,h,e);g=d(b,a,h,Xb);return f}function f(a){return m(a)}
var m,g;f.invert=function(a){return g(a)};f.domain=function(b){if(!arguments.length)return a;a=b.map(Number);return d()};f.range=function(a){if(!arguments.length)return b;b=a;return d()};f.rangeRound=function(a){return f.range(a).interpolate(Sf)};f.clamp=function(a){if(!arguments.length)return c;c=a;return d()};f.interpolate=function(a){if(!arguments.length)return e;e=a;return d()};f.ticks=function(b){return B.range.apply(B,oc(a,b))};f.tickFormat=function(b,e){return Ed(a,b,e)};f.nice=function(b){Je(a,
vg(oc(a,b)[2]));return d()};f.copy=function(){return uf(a,b,e,c)};return d()}function Ke(a,b){return B.rebind(a,b,"range","rangeRound","interpolate","clamp")}function oc(a,b){null==b&&(b=10);a=fd(a);var e=a[1]-a[0],c=Math.pow(10,Math.floor(Math.log(e/b)/Math.LN10));b=b/e*c;.15>=b?c*=10:.35>=b?c*=5:.75>=b&&(c*=2);a[0]=Math.ceil(a[0]/c)*c;a[1]=Math.floor(a[1]/c)*c+.5*c;a[2]=c;return a}function Ed(a,b,e){a=oc(a,b);if(e){b=zh.exec(e);b.shift();if("s"===b[8]){var c=B.formatPrefix(Math.max(ea(a[0]),ea(a[1])));
b[7]||(b[7]="."+gd(c.scale(a[2])));b[8]="f";e=B.format(b.join(""));return function(a){return e(c.scale(a))+c.symbol}}b[7]||(b[7]="."+Gh(b[8],a));e=b.join("")}else e=",."+gd(a[2])+"f";return B.format(e)}function gd(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Gh(a,b){var e=gd(b[2]);return a in Hh?Math.abs(e-gd(Math.max(ea(b[0]),ea(b[1]))))+ +("e"!==a):e-2*("%"===a)}function Fd(a,b,e,c){function d(a){return(e?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(b)}function f(a){return e?Math.pow(b,
a):-Math.pow(b,-a)}function m(b){return a(d(b))}m.invert=function(b){return f(a.invert(b))};m.domain=function(b){if(!arguments.length)return c;e=0<=b[0];a.domain((c=b.map(Number)).map(d));return m};m.base=function(e){if(!arguments.length)return b;b=+e;a.domain(c.map(d));return m};m.nice=function(){var b=Je(c.map(d),e?Math:Ii);a.domain(b);c=b.map(f);return m};m.ticks=function(){var a=fd(c),m=[],g=a[0];a=a[1];var h=Math.floor(d(g)),l=Math.ceil(d(a)),k=b%1?2:b;if(isFinite(l-h)){if(e){for(;h<l;h++)for(var x=
1;x<k;x++)m.push(f(h)*x);m.push(f(h))}else for(m.push(f(h));h++<l;)for(x=k-1;0<x;x--)m.push(f(h)*x);for(h=0;m[h]<g;h++);for(l=m.length;m[l-1]>a;l--);m=m.slice(h,l)}return m};m.tickFormat=function(a,b){if(!arguments.length)return Ih;2>arguments.length?b=Ih:"function"!==typeof b&&(b=B.format(b));var c=Math.max(.1,a/m.ticks().length),g=e?(h=1E-12,Math.ceil):(h=-1E-12,Math.floor),h;return function(a){return a/f(g(d(a)+h))<=c?b(a):""}};m.copy=function(){return Fd(a.copy(),b,e,c)};return Ke(m,a)}function wg(a,
b,e){function c(b){return a(d(b))}var d=de(b),f=de(1/b);c.invert=function(b){return f(a.invert(b))};c.domain=function(b){if(!arguments.length)return e;a.domain((e=b.map(Number)).map(d));return c};c.ticks=function(a){return B.range.apply(B,oc(e,a))};c.tickFormat=function(a,b){return Ed(e,a,b)};c.nice=function(a){return c.domain(Je(e,vg(oc(e,a)[2])))};c.exponent=function(m){if(!arguments.length)return b;d=de(b=m);f=de(1/b);a.domain(e.map(d));return c};c.copy=function(){return wg(a.copy(),b,e)};return Ke(c,
a)}function de(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function vf(a,b){function e(e){return m[((f.get(e)||("range"===b.t?f.set(e,a.push(e)):NaN))-1)%m.length]}function c(b,e){return B.range(a.length).map(function(a){return b+e*a})}var f,m,g;e.domain=function(c){if(!arguments.length)return a;a=[];f=new d;for(var m=-1,g=c.length,h;++m<g;)f.has(h=c[m])||f.set(h,a.push(h));return e[b.t].apply(e,b.a)};e.range=function(a){if(!arguments.length)return m;m=a;g=0;b={t:"range",a:arguments};
return e};e.rangePoints=function(d,f){2>arguments.length&&(f=0);var h=d[0],l=d[1];l=2>a.length?(h=(h+l)/2,0):(l-h)/(a.length-1+f);m=c(h+l*f/2,l);g=0;b={t:"rangePoints",a:arguments};return e};e.rangeRoundPoints=function(d,f){2>arguments.length&&(f=0);var h=d[0],l=d[1],k=2>a.length?(h=l=Math.round((h+l)/2),0):(l-h)/(a.length-1+f)|0;m=c(h+Math.round(k*f/2+(l-h-(a.length-1+f)*k)/2),k);g=0;b={t:"rangeRoundPoints",a:arguments};return e};e.rangeBands=function(d,f,h){2>arguments.length&&(f=0);3>arguments.length&&
(h=f);var l=d[1]<d[0],k=d[l-0],x=(d[1-l]-k)/(a.length-f+2*h);m=c(k+x*h,x);l&&m.reverse();g=x*(1-f);b={t:"rangeBands",a:arguments};return e};e.rangeRoundBands=function(d,f,h){2>arguments.length&&(f=0);3>arguments.length&&(h=f);var l=d[1]<d[0],k=d[l-0],x=d[1-l],n=Math.floor((x-k)/(a.length-f+2*h));m=c(k+Math.round((x-k-(a.length-f)*n)/2),n);l&&m.reverse();g=Math.round(n*(1-f));b={t:"rangeRoundBands",a:arguments};return e};e.rangeBand=function(){return g};e.rangeExtent=function(){return fd(b.a[0])};
e.copy=function(){return vf(a,b)};return e.domain(a)}function wf(a,b){function e(){var e=0,c=b.length;for(f=[];++e<c;)f[e-1]=B.quantile(a,e/c);return d}function d(a){if(!isNaN(a=+a))return b[B.bisect(f,a)]}var f;d.domain=function(b){if(!arguments.length)return a;a=b.map(h).filter(c).sort(k);return e()};d.range=function(a){if(!arguments.length)return b;b=a;return e()};d.quantiles=function(){return f};d.invertExtent=function(e){e=b.indexOf(e);return 0>e?[NaN,NaN]:[0<e?f[e-1]:a[0],e<f.length?f[e]:a[a.length-
1]]};d.copy=function(){return wf(a,b)};return e()}function xf(a,b,e){function c(b){return e[Math.max(0,Math.min(m,Math.floor(f*(b-a))))]}function d(){f=e.length/(b-a);m=e.length-1;return c}var f,m;c.domain=function(e){if(!arguments.length)return[a,b];a=+e[0];b=+e[e.length-1];return d()};c.range=function(a){if(!arguments.length)return e;e=a;return d()};c.invertExtent=function(b){b=e.indexOf(b);b=0>b?NaN:b/f+a;return[b,b+1/f]};c.copy=function(){return xf(a,b,e)};return d()}function yf(a,b){function e(e){if(e<=
e)return b[B.bisect(a,e)]}e.domain=function(b){if(!arguments.length)return a;a=b;return e};e.range=function(a){if(!arguments.length)return b;b=a;return e};e.invertExtent=function(e){e=b.indexOf(e);return[a[e-1],a[e]]};e.copy=function(){return yf(a,b)};return e}function xg(a){function b(a){return+a}b.invert=b;b.domain=b.range=function(e){if(!arguments.length)return a;a=e.map(b);return b};b.ticks=function(b){return B.range.apply(B,oc(a,b))};b.tickFormat=function(b,e){return Ed(a,b,e)};b.copy=function(){return xg(a)};
return b}function yg(){return 0}function Jh(a){return a.innerRadius}function Kh(a){return a.outerRadius}function zf(a){return a.startAngle}function zg(a){return a.endAngle}function Lh(a){return a&&a.padAngle}function Af(a,b,e,c){return 0<(a-e)*b-(b-c)*a?0:1}function Le(a,b,e,c,d){var f=a[0]-b[0],m=a[1]-b[1];d=(d?c:-c)/Math.sqrt(f*f+m*m);m*=d;f*=-d;var g=a[0]+m,h=a[1]+f,l=b[0]+m,k=b[1]+f;a=(g+l)/2;b=(h+k)/2;d=l-g;var x=k-h,n=d*d+x*x;c=e-c;k=g*k-l*h;var q=(0>x?-1:1)*Math.sqrt(c*c*n-k*k);g=(k*x-d*q)/
n;h=(-k*d-x*q)/n;l=(k*x+d*q)/n;d=(-k*d+x*q)/n;x=g-a;n=h-b;a=l-a;b=d-b;x*x+n*n>a*a+b*b&&(g=l,h=d);return[[g-m,h-f],[g*e/c,h*e/c]]}function Ag(a){function b(b){function m(){h.push("M",f(a(l),g))}for(var h=[],l=[],k=-1,x=b.length,n,q=sa(e),L=sa(c);++k<x;)d.call(this,n=b[k],k)?l.push([+q.call(this,n,k),+L.call(this,n,k)]):l.length&&(m(),l=[]);l.length&&m();return h.length?h.join(""):null}var e=rc,c=le,d=uc,f=wb,m=f.key,g=.7;b.x=function(a){if(!arguments.length)return e;e=a;return b};b.y=function(a){if(!arguments.length)return c;
c=a;return b};b.defined=function(a){if(!arguments.length)return d;d=a;return b};b.interpolate=function(a){if(!arguments.length)return m;m="function"===typeof a?f=a:(f=pb.get(a)||wb).key;return b};b.tension=function(a){if(!arguments.length)return g;g=a;return b};return b}function wb(a){return a.join("L")}function Bf(a){for(var b=0,e=a.length,c=a[0],d=[c[0],",",c[1]];++b<e;)d.push("V",(c=a[b])[1],"H",c[0]);return d.join("")}function Cf(a){for(var b=0,e=a.length,c=a[0],d=[c[0],",",c[1]];++b<e;)d.push("H",
(c=a[b])[0],"V",c[1]);return d.join("")}function Me(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return wb(a);var e=a.length!=b.length,c="",d=a[0],f=a[1],m=b[0],g=m,h=1;e&&(c+="Q"+(f[0]-2*m[0]/3)+","+(f[1]-2*m[1]/3)+","+f[0]+","+f[1],d=a[1],h=2);if(1<b.length)for(g=b[1],f=a[h],h++,c+="C"+(d[0]+m[0])+","+(d[1]+m[1])+","+(f[0]-g[0])+","+(f[1]-g[1])+","+f[0]+","+f[1],d=2;d<b.length;d++,h++)f=a[h],g=b[d],c+="S"+(f[0]-g[0])+","+(f[1]-g[1])+","+f[0]+","+f[1];e&&(a=a[h],c+="Q"+(f[0]+2*g[0]/
3)+","+(f[1]+2*g[1]/3)+","+a[0]+","+a[1]);return c}function Df(a,b){var e=[];b=(1-b)/2;for(var c,d=a[0],f=a[1],m=1,g=a.length;++m<g;)c=d,d=f,f=a[m],e.push([b*(f[0]-c[0]),b*(f[1]-c[1])]);return e}function Bg(a){if(3>a.length)return wb(a);var b=1,e=a.length,c=a[0],d=c[0],f=c[1],m=[d,d,d,(c=a[1])[0]],g=[f,f,f,c[1]];d=[d,",",f,"L",Hb(Ec,m),",",Hb(Ec,g)];for(a.push(a[e-1]);++b<=e;)c=a[b],m.shift(),m.push(c[0]),g.shift(),g.push(c[1]),Ef(d,m,g);a.pop();d.push("L",c);return d.join("")}function Hb(a,b){return a[0]*
b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Ef(a,b,e){a.push("C",Hb(Mh,b),",",Hb(Mh,e),",",Hb(Nh,b),",",Hb(Nh,e),",",Hb(Ec,b),",",Hb(Ec,e))}function Ne(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Ff(a){for(var b,e=-1,c=a.length,d,f;++e<c;)b=a[e],d=b[0],f=b[1]-Ga,b[0]=d*Math.cos(f),b[1]=d*Math.sin(f);return a}function Cg(a){function b(b){function h(){n.push("M",g(a(L),x),k,l(a(q.reverse()),x),"Z")}for(var n=[],q=[],L=[],D=-1,p=b.length,t,H=sa(e),r=sa(d),v=e===c?function(){return w}:sa(c),y=d===f?function(){return z}:
sa(f),w,z;++D<p;)m.call(this,t=b[D],D)?(q.push([w=+H.call(this,t,D),z=+r.call(this,t,D)]),L.push([+v.call(this,t,D),+y.call(this,t,D)])):q.length&&(h(),q=[],L=[]);q.length&&h();return n.length?n.join(""):null}var e=rc,c=rc,d=0,f=le,m=uc,g=wb,h=g.key,l=g,k="L",x=.7;b.x=function(a){if(!arguments.length)return c;e=c=a;return b};b.x0=function(a){if(!arguments.length)return e;e=a;return b};b.x1=function(a){if(!arguments.length)return c;c=a;return b};b.y=function(a){if(!arguments.length)return f;d=f=a;
return b};b.y0=function(a){if(!arguments.length)return d;d=a;return b};b.y1=function(a){if(!arguments.length)return f;f=a;return b};b.defined=function(a){if(!arguments.length)return m;m=a;return b};b.interpolate=function(a){if(!arguments.length)return h;h="function"===typeof a?g=a:(g=pb.get(a)||wb).key;l=g.reverse||g;k=g.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return x;x=a;return b};return b}function Gd(a){return a.radius}function Oh(a){return[a.x,a.y]}function Ji(a){return function(){var b=
a.apply(this,arguments),e=b[0];b=b[1]-Ga;return[e*Math.cos(b),e*Math.sin(b)]}}function Dg(){return 64}function Ki(){return"circle"}function Eg(a){a=Math.sqrt(a/ia);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function ee(a,b,e){ae(a,Ma);a.namespace=b;a.id=e;return a}function Fg(a,b,e,c){var d=a.id,f=a.namespace;return M(a,"function"===typeof e?function(a,m,g){a[f][d].tween.set(b,c(e.call(a,a.__data__,m,g)))}:(e=c(e),function(a){a[f][d].tween.set(b,e)}))}function Li(a){null==
a&&(a="");return function(){this.textContent=a}}function Ph(a){return null==a?"__transition__":"__transition_"+a+"__"}function Z(a,b,e,c,f){var m=a[e]||(a[e]={active:0,count:0}),g=m[c];if(!g){var h=f.time;g=m[c]={tween:new d,time:h,delay:f.delay,duration:f.duration,ease:f.ease};f=null;++m.count;B.timer(function(d){function f(e){if(m.active>c)return k(!1);m.active=c;g.event&&g.event.start.call(a,x,b);g.tween.forEach(function(e,c){(c=c.call(a,x,b))&&p.push(c)});D=g.ease;q=g.duration;B.timer(function(){L.c=
l(e||1)?uc:l;return 1},0,h)}function l(b){if(m.active!==c)return k(!1);b/=q;for(var e=D(b),d=p.length;0<d;)p[--d].call(a,e);if(1<=b)return k(!0)}function k(d){g.event&&g.event[d?"end":"interrupt"].call(a,x,b);--m.count?delete m[c]:delete a[e];return 1}var x=a.__data__,n=g.delay,q,D,L=Bc,p=[];L.t=n+h;if(n<=d)return f(d-n);L.c=f},0,h)}}function Gf(a,b,e){a.attr("transform",function(a){var c=b(a);return"translate("+(isFinite(c)?c:e(a))+",0)"})}function Qh(a,b,e){a.attr("transform",function(a){var c=
b(a);return"translate(0,"+(isFinite(c)?c:e(a))+")"})}function Gg(a){return a.toISOString()}function Hg(a,b,e){function c(b){return a(b)}function d(a,e){var c=(a[1]-a[0])/e,d=B.bisect(hd,c);return d==hd.length?[b.year,oc(a.map(function(a){return a/31536E6}),e)[2]]:d?b[c/hd[d-1]<hd[d]/c?d-1:d]:[Mi,oc(a,e)[2]]}c.invert=function(b){return id(a.invert(b))};c.domain=function(b){if(!arguments.length)return a.domain().map(id);a.domain(b);return c};c.nice=function(a,b){function e(e){return!isNaN(e)&&!a.range(e,
id(+e+1),b).length}var f=c.domain(),m=fd(f);if(m=null==a?d(m,10):"number"===typeof a&&d(m,a))a=m[0],b=m[1];return c.domain(Je(f,1<b?{floor:function(b){for(;e(b=a.floor(b));)b=id(b-1);return b},ceil:function(b){for(;e(b=a.ceil(b));)b=id(+b+1);return b}}:a))};c.ticks=function(a,b){var e=fd(c.domain()),f=null==a?d(e,10):"number"===typeof a?d(e,a):!a.range&&[{range:a},b];f&&(a=f[0],b=f[1]);return a.range(e[0],id(+e[1]+1),1>b?1:b)};c.tickFormat=function(){return e};c.copy=function(){return Hg(a.copy(),
b,e)};return Ke(c,a)}function id(a){return new Date(a)}function Ig(a){return JSON.parse(a.responseText)}function db(a){var b=xb.createRange();b.selectNode(xb.body);return b.createContextualFragment(a.responseText)}var B={version:"3.5.0"};Date.now||(Date.now=function(){return+new Date});var pc=[].slice,ac=function(a){return pc.call(a)},xb=document,Ac=xb.documentElement,hb=window;try{ac(Ac.childNodes)[0].nodeType}catch(L){ac=function(a){for(var b=a.length,e=Array(b);b--;)e[b]=a[b];return e}}try{xb.createElement("div").style.setProperty("opacity",
0,"")}catch(L){var Sb=hb.Element.prototype,Ni=Sb.setAttribute,Rh=Sb.setAttributeNS,Oe=hb.CSSStyleDeclaration.prototype,Jg=Oe.setProperty;Sb.setAttribute=function(a,b){Ni.call(this,a,b+"")};Sb.setAttributeNS=function(a,b,e){Rh.call(this,a,b,e+"")};Oe.setProperty=function(a,b,e){Jg.call(this,a,b+"",e)}}B.ascending=k;B.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};B.min=function(a,b){var e=-1,c=a.length,d;if(1===arguments.length){for(;++e<c;)if(null!=(d=a[e])&&d>=d){var f=d;break}for(;++e<
c;)null!=(d=a[e])&&f>d&&(f=d)}else{for(;++e<c;)if(null!=(d=b.call(a,a[e],e))&&d>=d){f=d;break}for(;++e<c;)null!=(d=b.call(a,a[e],e))&&f>d&&(f=d)}return f};B.max=function(a,b){var e=-1,c=a.length,d;if(1===arguments.length){for(;++e<c;)if(null!=(d=a[e])&&d>=d){var f=d;break}for(;++e<c;)null!=(d=a[e])&&d>f&&(f=d)}else{for(;++e<c;)if(null!=(d=b.call(a,a[e],e))&&d>=d){f=d;break}for(;++e<c;)null!=(d=b.call(a,a[e],e))&&d>f&&(f=d)}return f};B.extent=function(a,b){var e=-1,c=a.length,d,f;if(1===arguments.length){for(;++e<
c;)if(null!=(d=a[e])&&d>=d){var m=f=d;break}for(;++e<c;)null!=(d=a[e])&&(m>d&&(m=d),f<d&&(f=d))}else{for(;++e<c;)if(null!=(d=b.call(a,a[e],e))&&d>=d){m=f=d;break}for(;++e<c;)null!=(d=b.call(a,a[e],e))&&(m>d&&(m=d),f<d&&(f=d))}return[m,f]};B.sum=function(a,b){var e=0,c=a.length,d,f=-1;if(1===arguments.length)for(;++f<c;)isNaN(d=+a[f])||(e+=d);else for(;++f<c;)isNaN(d=+b.call(a,a[f],f))||(e+=d);return e};B.mean=function(a,b){var e=0,c=a.length,d,f=-1,m=c;if(1===arguments.length)for(;++f<c;)isNaN(d=
h(a[f]))?--m:e+=d;else for(;++f<c;)isNaN(d=h(b.call(a,a[f],f)))?--m:e+=d;if(m)return e/m};B.quantile=function(a,b){var e=(a.length-1)*b+1;b=Math.floor(e);var c=+a[b-1];return(e-=b)?c+e*(a[b]-c):c};B.median=function(a,b){var e=[],c=a.length,d,f=-1;if(1===arguments.length)for(;++f<c;)isNaN(d=h(a[f]))||e.push(d);else for(;++f<c;)isNaN(d=h(b.call(a,a[f],f)))||e.push(d);if(e.length)return B.quantile(e.sort(k),.5)};var Pe=g(k);B.bisectLeft=Pe.left;B.bisect=B.bisectRight=Pe.right;B.bisector=function(a){return g(1===
a.length?function(b,e){return k(a(b),e)}:a)};B.shuffle=function(a,b,e){3>(c=arguments.length)&&(e=a.length,2>c&&(b=0));for(var c=e-b,d,f;c;)f=Math.random()*c--|0,d=a[c+b],a[c+b]=a[f+b],a[f+b]=d;return a};B.permute=function(a,b){for(var e=b.length,c=Array(e);e--;)c[e]=a[b[e]];return c};B.pairs=function(a){for(var b=0,e=a.length-1,c=a[0],d=Array(0>e?0:e);b<e;)d[b]=[c,c=a[++b]];return d};B.zip=function(){if(!(f=arguments.length))return[];for(var b=-1,e=B.min(arguments,a),c=Array(e);++b<e;)for(var d=
-1,f,m=c[b]=Array(f);++d<f;)m[d]=arguments[d][b];return c};B.transpose=function(a){return B.zip.apply(B,a)};B.keys=function(a){var b=[],e;for(e in a)b.push(e);return b};B.values=function(a){var b=[],e;for(e in a)b.push(a[e]);return b};B.entries=function(a){var b=[],e;for(e in a)b.push({key:e,value:a[e]});return b};B.merge=function(a){var b=a.length;var e=-1;for(var c=0,d,f;++e<b;)c+=a[e].length;for(d=Array(c);0<=--b;)for(f=a[b],e=f.length;0<=--e;)d[--c]=f[e];return d};var ea=Math.abs;B.range=function(a,
b,e){3>arguments.length&&(e=1,2>arguments.length&&(b=a,a=0));if(Infinity===(b-a)/e)throw Error("infinite range");var c=[];var d=ea(e);for(var f=1;d*f%1;)f*=10;d=f;f=-1;var m;a*=d;b*=d;e*=d;if(0>e)for(;(m=a+e*++f)>b;)c.push(m/d);else for(;(m=a+e*++f)<b;)c.push(m/d);return c};B.map=function(a,b){var e=new d;if(a instanceof d)a.forEach(function(a,b){e.set(a,b)});else if(Array.isArray(a)){var c=-1,f=a.length,m;if(1===arguments.length)for(;++c<f;)e.set(c,a[c]);else for(;++c<f;)e.set(b.call(a,m=a[c],c),
m)}else for(c in a)e.set(c,a[c]);return e};f(d,{has:n,get:function(a){return this._[b(a)]},set:function(a,e){return this._[b(a)]=e},remove:p,keys:r,values:function(){var a=[],b;for(b in this._)a.push(this._[b]);return a},entries:function(){var a=[],b;for(b in this._)a.push({key:l(b),value:this._[b]});return a},size:w,empty:z,forEach:function(a){for(var b in this._)a.call(this,l(b),this._[b])}});B.nest=function(){function a(b,f,h){if(h>=c.length)return g?g.call(e,f):m?f.sort(m):f;for(var l=-1,k=f.length,
x=c[h++],n,q,D=new d,p;++l<k;)(p=D.get(n=x(q=f[l])))?p.push(q):D.set(n,[q]);b?(q=b(),f=function(e,c){q.set(e,a(b,c,h))}):(q={},f=function(e,c){q[e]=a(b,c,h)});D.forEach(f);return q}function b(a,e){if(e>=c.length)return a;var d=[],m=f[e++];a.forEach(function(a,c){d.push({key:a,values:b(c,e)})});return m?d.sort(function(a,b){return m(a.key,b.key)}):d}var e={},c=[],f=[],m,g;e.map=function(b,e){return a(e,b,0)};e.entries=function(e){return b(a(B.map,e,0),0)};e.key=function(a){c.push(a);return e};e.sortKeys=
function(a){f[c.length-1]=a;return e};e.sortValues=function(a){m=a;return e};e.rollup=function(a){g=a;return e};return e};B.set=function(a){var b=new v;if(a)for(var e=0,c=a.length;e<c;++e)b.add(a[e]);return b};f(v,{has:n,add:function(a){this._[b(a+="")]=!0;return a},remove:p,values:r,size:w,empty:z,forEach:function(a){for(var b in this._)a.call(this,l(b))}});B.behavior={};B.rebind=function(a,b){for(var e=1,c=arguments.length,d;++e<c;)a[d=arguments[e]]=t(a,b,b[d]);return a};var sh="webkit ms moz Moz o O".split(" ");
B.dispatch=function(){for(var a=new A,b=-1,e=arguments.length;++b<e;)a[arguments[b]]=C(a);return a};A.prototype.on=function(a,b){var e=a.indexOf("."),c="";0<=e&&(c=a.slice(e+1),a=a.slice(0,e));if(a)return 2>arguments.length?this[a].on(c):this[a].on(c,b);if(2===arguments.length){if(null==b)for(a in this)if(this.hasOwnProperty(a))this[a].on(c,null);return this}};B.event=null;B.requote=function(a){return a.replace(Kg,"\\$&")};var Kg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ae={}.__proto__?function(a,b){a.__proto__=
b}:function(a,b){for(var e in b)a[e]=b[e]},Ee=function(a,b){return b.querySelector(a)},eg=function(a,b){return b.querySelectorAll(a)},Qe=Ac.matches||Ac[q(Ac,"matchesSelector")],th=function(a,b){return Qe.call(a,b)};"function"===typeof Sizzle&&(Ee=function(a,b){return Sizzle(a,b)[0]||null},eg=Sizzle,th=Sizzle.matchesSelector);B.selection=function(){return Sh};var ua=B.selection.prototype=[];ua.select=function(a){var b=[],c,d,f,m;a=e(a);for(var g=-1,h=this.length;++g<h;){b.push(c=[]);c.parentNode=(f=
this[g]).parentNode;for(var l=-1,k=f.length;++l<k;)(m=f[l])?(c.push(d=a.call(m,m.__data__,l,g)),d&&"__data__"in m&&(d.__data__=m.__data__)):c.push(null)}return I(b)};ua.selectAll=function(a){var b=[],e,c;a=m(a);for(var d=-1,f=this.length;++d<f;)for(var g=this[d],h=-1,l=g.length;++h<l;)if(c=g[h])b.push(e=ac(a.call(c,c.__data__,h,d))),e.parentNode=c;return I(b)};var Lg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",
xmlns:"http://www.w3.org/2000/xmlns/"};B.ns={prefix:Lg,qualify:function(a){var b=a.indexOf(":"),e=a;0<=b&&(e=a.slice(0,b),a=a.slice(b+1));return Lg.hasOwnProperty(e)?{space:Lg[e],local:a}:a}};ua.attr=function(a,b){if(2>arguments.length){if("string"===typeof a){var e=this.node();a=B.ns.qualify(a);return a.local?e.getAttributeNS(a.space,a.local):e.getAttribute(a)}for(b in a)this.each(x(b,a[b]));return this}return this.each(x(a,b))};ua.classed=function(a,b){if(2>arguments.length){if("string"===typeof a){var e=
this.node(),c=(a=(a+"").trim().split(/^|\s+/)).length,d=-1;if(b=e.classList)for(;++d<c;){if(!b.contains(a[d]))return!1}else for(b=e.getAttribute("class");++d<c;)if(!D(a[d]).test(b))return!1;return!0}for(b in a)this.each(H(b,a[b]));return this}return this.each(H(a,b))};ua.style=function(a,b,e){var c=arguments.length;if(3>c){if("string"!==typeof a){2>c&&(b="");for(e in a)this.each(ka(e,a[e],b));return this}if(2>c)return hb.getComputedStyle(this.node(),null).getPropertyValue(a);e=""}return this.each(ka(a,
b,e))};ua.property=function(a,b){if(2>arguments.length){if("string"===typeof a)return this.node()[a];for(b in a)this.each(aa(b,a[b]));return this}return this.each(aa(a,b))};ua.text=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};ua.html=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=
a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};ua.append=function(a){a=Aa(a);return this.select(function(){return this.appendChild(a.apply(this,arguments))})};ua.insert=function(a,b){a=Aa(a);b=e(b);return this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})};ua.remove=function(){return this.each(fa)};ua.data=function(a,b){function e(a,e){var c,f=a.length,
m=e.length,g=Math.min(f,m),x=Array(m),n=Array(m),q=Array(f),D,p;if(b){g=new d;var t=Array(f),H;for(c=-1;++c<f;)g.has(H=b.call(D=a[c],D.__data__,c))?q[c]=D:g.set(H,D),t[c]=H;for(c=-1;++c<m;)(D=g.get(H=b.call(e,p=e[c],c)))?!0!==D&&(x[c]=D,D.__data__=p):n[c]={__data__:p},g.set(H,!0);for(c=-1;++c<f;)!0!==g.get(t[c])&&(q[c]=a[c])}else{for(c=-1;++c<g;)D=a[c],p=e[c],D?(D.__data__=p,x[c]=D):n[c]={__data__:p};for(;c<m;++c)n[c]={__data__:e[c]};for(;c<f;++c)q[c]=a[c]}n.update=x;n.parentNode=x.parentNode=q.parentNode=
a.parentNode;h.push(n);l.push(x);k.push(q)}var c=-1,f=this.length,m,g;if(!arguments.length){for(a=Array(f=(m=this[0]).length);++c<f;)if(g=m[c])a[c]=g.__data__;return a}var h=ba([]),l=I([]),k=I([]);if("function"===typeof a)for(;++c<f;)e(m=this[c],a.call(m,m.parentNode.__data__,c));else for(;++c<f;)e(m=this[c],a);l.enter=function(){return h};l.exit=function(){return k};return l};ua.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};ua.filter=function(a){var b=
[],e,c,d;"function"!==typeof a&&(a=R(a));for(var f=0,m=this.length;f<m;f++){b.push(e=[]);e.parentNode=(c=this[f]).parentNode;for(var g=0,h=c.length;g<h;g++)(d=c[g])&&a.call(d,d.__data__,g,f)&&e.push(d)}return I(b)};ua.order=function(){for(var a=-1,b=this.length;++a<b;)for(var e=this[a],c=e.length-1,d=e[c],f;0<=--c;)if(f=e[c])d&&d!==f.nextSibling&&d.parentNode.insertBefore(f,d),d=f;return this};ua.sort=function(a){a=X.apply(this,arguments);for(var b=-1,e=this.length;++b<e;)this[b].sort(a);return this.order()};
ua.each=function(a){return M(this,function(b,e,c){a.call(b,b.__data__,e,c)})};ua.call=function(a){var b=ac(arguments);a.apply(b[0]=this,b);return this};ua.empty=function(){return!this.node()};ua.node=function(){for(var a=0,b=this.length;a<b;a++)for(var e=this[a],c=0,d=e.length;c<d;c++){var f=e[c];if(f)return f}return null};ua.size=function(){var a=0;M(this,function(){++a});return a};var zc=[];B.selection.enter=ba;B.selection.enter.prototype=zc;zc.append=ua.append;zc.empty=ua.empty;zc.node=ua.node;
zc.call=ua.call;zc.size=ua.size;zc.select=function(a){for(var b=[],e,c,d,f,m,g=-1,h=this.length;++g<h;){d=(f=this[g]).update;b.push(e=[]);e.parentNode=f.parentNode;for(var l=-1,k=f.length;++l<k;)(m=f[l])?(e.push(d[l]=c=a.call(f.parentNode,m.__data__,l,g)),c.__data__=m.__data__):e.push(null)}return I(b)};zc.insert=function(a,b){2>arguments.length&&(b=ja(this));return ua.insert.call(this,a,b)};ua.transition=function(a){var b=Hd||++Mg;a=Ph(a);for(var e=[],c,d,f=Fc||{time:Date.now(),ease:Uf,delay:0,duration:250},
m=-1,g=this.length;++m<g;){e.push(c=[]);for(var h=this[m],l=-1,k=h.length;++l<k;)(d=h[l])&&Z(d,l,a,b,f),c.push(d)}return ee(e,a,b)};ua.interrupt=function(a){var b=Ph(a);return this.each(function(){var a=this[b];a&&++a.active})};B.select=function(a){a=["string"===typeof a?Ee(a,xb):a];a.parentNode=Ac;return I([a])};B.selectAll=function(a){a=ac("string"===typeof a?eg(a,xb):a);a.parentNode=Ac;return I([a])};var Sh=B.select(Ac);ua.on=function(a,b,e){var c=arguments.length;if(3>c){if("string"!==typeof a){2>
c&&(b=!1);for(e in a)this.each(S(e,a[e],b));return this}if(2>c)return(c=this.node()["__on"+a])&&c._;e=!1}return this.each(S(a,b,e))};var fg=B.map({mouseenter:"mouseover",mouseleave:"mouseout"});fg.forEach(function(a){"on"+a in xb&&fg.remove(a)});var Fe="onselectstart"in xb?null:q(Ac.style,"userSelect"),vh=0;B.mouse=function(a){return va(a,E())};var mb=/WebKit/.test(hb.navigator.userAgent)?-1:0;B.touch=function(a,b,e){3>arguments.length&&(e=b,b=E().changedTouches);if(b)for(var c=0,d=b.length,f;c<d;++c)if((f=
b[c]).identifier===e)return va(a,f)};B.behavior.drag=function(){function a(){this.on("mousedown.drag",d).on("touchstart.drag",f)}function b(a,b,d,f,m){return function(){var g=B.event.target,h=this.parentNode,l=e.of(this,arguments),k=0,x=a(),n=".drag"+(null==x?"":"-"+x),q=B.select(d()).on(f+n,function(){var a=b(h,x);if(a){var e=a[0]-p[0];var c=a[1]-p[1];k|=e|c;p=a;l({type:"drag",x:a[0]+t[0],y:a[1]+t[1],dx:e,dy:c})}}).on(m+n,function(){b(h,x)&&(q.on(f+n,null).on(m+n,null),D(k&&B.event.target===g),l({type:"dragend"}))}),
D=La(),p=b(h,x);if(c){var t=c.apply(this,arguments);t=[t.x-p[0],t.y-p[1]]}else t=[0,0];l({type:"dragstart"})}}var e=F(a,"drag","dragstart","dragend"),c=null,d=b(y,B.mouse,wa,"mousemove","mouseup"),f=b(ra,B.touch,sb,"touchmove","touchend");a.origin=function(b){if(!arguments.length)return c;c=b;return a};return B.rebind(a,e,"on")};B.touches=function(a,b){2>arguments.length&&(b=E().touches);return b?ac(b).map(function(b){var e=va(a,b);e.identifier=b.identifier;return e}):[]};var ia=Math.PI,fb=2*ia,Th=
fb-1E-6,Ga=ia/2,ha=ia/180,Ha=180/ia,Hf=Math.SQRT2;B.interpolateZoom=function(a,b){function e(a){var b=a*n;if(x){a=na(k);var e=Hf*b+k;var h=((e=Math.exp(2*e))-1)/(e+1);var q=k;e=((q=Math.exp(q))-1/q)/2;h=f/(2*l)*(a*h-e);return[c+h*m,d+h*g,f*a/na(Hf*b+k)]}return[c+a*m,d+a*g,f*Math.exp(Hf*b)]}var c=a[0],d=a[1],f=a[2];a=b[2];var m=b[0]-c,g=b[1]-d,h=m*m+g*g,l=Math.sqrt(h);b=(a*a-f*f+4*h)/(4*f*l);h=(a*a-f*f-4*h)/(4*a*l);var k=Math.log(Math.sqrt(b*b+1)-b),x=Math.log(Math.sqrt(h*h+1)-h)-k,n=(x||Math.log(a/
f))/Hf;e.duration=1E3*n;return e};B.behavior.zoom=function(){function a(a){a.on("mousedown.zoom",l).on(Uh+".zoom",x).on("dblclick.zoom",n).on("touchstart.zoom",k)}function b(a){return[(a[0]-q.x)/q.k,(a[1]-q.y)/q.k]}function e(a){q.k=Math.max(r[0],Math.min(r[1],a))}function c(a,b){b=[b[0]*q.k+q.x,b[1]*q.k+q.y];q.x+=a[0]-b[0];q.y+=a[1]-b[1]}function d(b,d,f,m){b.__chart__={x:q.x,y:q.y,k:q.k};e(Math.pow(2,m));c(p=d,f);b=B.select(b);0<v&&(b=b.transition().duration(v));b.call(a.event)}function f(){C&&
C.domain(A.range().map(function(a){return(a-q.x)/q.k}).map(A.invert));R&&R.domain(aa.range().map(function(a){return(a-q.y)/q.k}).map(aa.invert))}function m(a){y++||a({type:"zoomstart"})}function g(a){f();a({type:"zoom",scale:q.k,translate:[q.x,q.y]})}function h(a){--y||a({type:"zoomend"});p=null}function l(){var a=this,e=B.event.target,d=N.of(a,arguments),f=0,l=B.select(hb).on("mousemove.zoom",function(){f=1;c(B.mouse(a),k);g(d)}).on("mouseup.zoom",function(){l.on("mousemove.zoom",null).on("mouseup.zoom",
null);x(f&&B.event.target===e);h(d)}),k=b(B.mouse(a)),x=La();ca(a);m(d)}function k(){function a(){var a=B.touches(D);r=q.k;a.forEach(function(a){a.identifier in t&&(t[a.identifier]=b(a))});return a}function f(){var b=B.event.target;B.select(b).on(y,x).on(w,n);L.push(b);b=B.event.changedTouches;for(var e=0,c=b.length;e<c;++e)t[b[e].identifier]=null;e=a();c=Date.now();1===e.length?(500>c-z&&(b=e[0],d(D,b,t[b.identifier],Math.floor(Math.log(q.k)/Math.LN2)+1),G()),z=c):1<e.length&&(b=e[0],c=e[1],e=b[0]-
c[0],b=b[1]-c[1],H=e*e+b*b)}function x(){var a=B.touches(D),b;ca(D);for(var d=0,f=a.length;d<f;++d,b=null){var m=a[d];if(b=t[m.identifier]){if(l)break;var h=m;var l=b}}if(b){var k=(k=m[0]-h[0])*k+(k=m[1]-h[1])*k;a=H&&Math.sqrt(k/H);h=[(h[0]+m[0])/2,(h[1]+m[1])/2];l=[(l[0]+b[0])/2,(l[1]+b[1])/2];e(a*r)}z=null;c(h,l);g(p)}function n(){if(B.event.touches.length){for(var b=B.event.changedTouches,e=0,c=b.length;e<c;++e)delete t[b[e].identifier];for(var d in t)return void a()}B.selectAll(L).on(v,null);
A.on("mousedown.zoom",l).on("touchstart.zoom",k);C();h(p)}var D=this,p=N.of(D,arguments),t={},H=0,r,v=".zoom-"+B.event.changedTouches[0].identifier,y="touchmove"+v,w="touchend"+v,L=[],A=B.select(D),C=La();f();m(p);A.on("mousedown.zoom",null).on("touchstart.zoom",f)}function x(){var a=N.of(this,arguments);w?clearTimeout(w):(D=b(p=t||B.mouse(this)),ca(this),m(a));w=setTimeout(function(){w=null;h(a)},50);G();e(Math.pow(2,.002*Re())*q.k);c(p,D);g(a)}function n(){var a=B.mouse(this),e=Math.log(q.k)/Math.LN2;
d(this,a,b(a),B.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var q={x:0,y:0,k:1},D,p,t,H=[960,500],r=If,v=250,y=0,w,z,N=F(a,"zoomstart","zoom","zoomend"),A,C,aa,R;a.event=function(a){a.each(function(){var a=N.of(this,arguments),b=q;Hd?B.select(this).transition().each("start.zoom",function(){q=this.__chart__||{x:0,y:0,k:1};m(a)}).tween("zoom:zoom",function(){var e=H[0],c=H[1],d=p?p[0]:e/2,f=p?p[1]:c/2,m=B.interpolateZoom([(d-q.x)/q.k,(f-q.y)/q.k,e/q.k],[(d-b.x)/b.k,(f-b.y)/b.k,e/b.k]);return function(b){b=
m(b);var c=e/b[2];this.__chart__=q={x:d-b[0]*c,y:f-b[1]*c,k:c};g(a)}}).each("interrupt.zoom",function(){h(a)}).each("end.zoom",function(){h(a)}):(this.__chart__=q,m(a),g(a),h(a))})};a.translate=function(b){if(!arguments.length)return[q.x,q.y];q={x:+b[0],y:+b[1],k:q.k};f();return a};a.scale=function(b){if(!arguments.length)return q.k;q={x:q.x,y:q.y,k:+b};f();return a};a.scaleExtent=function(b){if(!arguments.length)return r;r=null==b?If:[+b[0],+b[1]];return a};a.center=function(b){if(!arguments.length)return t;
t=b&&[+b[0],+b[1]];return a};a.size=function(b){if(!arguments.length)return H;H=b&&[+b[0],+b[1]];return a};a.duration=function(b){if(!arguments.length)return v;v=+b;return a};a.x=function(b){if(!arguments.length)return C;C=b;A=b.copy();q={x:0,y:0,k:1};return a};a.y=function(b){if(!arguments.length)return R;R=b;aa=b.copy();q={x:0,y:0,k:1};return a};return B.rebind(a,N,"on")};var If=[0,Infinity],Re,Uh="onwheel"in xb?(Re=function(){return-B.event.deltaY*(B.event.deltaMode?120:1)},"wheel"):"onmousewheel"in
xb?(Re=function(){return B.event.wheelDelta},"mousewheel"):(Re=function(){return-B.event.detail},"MozMousePixelScroll");B.color=da;da.prototype.toString=function(){return this.rgb()+""};B.hsl=za;var Ng=za.prototype=new da;Ng.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);return new za(this.h,this.s,this.l/a)};Ng.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return new za(this.h,this.s,a*this.l)};Ng.rgb=function(){return Ea(this.h,this.s,this.l)};B.hcl=Ia;var Og=Ia.prototype=new da;
Og.brighter=function(a){return new Ia(this.h,this.c,Math.min(100,this.l+Jf*(arguments.length?a:1)))};Og.darker=function(a){return new Ia(this.h,this.c,Math.max(0,this.l-Jf*(arguments.length?a:1)))};Og.rgb=function(){return la(this.h,this.c,this.l).rgb()};B.lab=Oa;var Jf=18,wh=.95047,xh=1,ab=1.08883,Id=Oa.prototype=new da;Id.brighter=function(a){return new Oa(Math.min(100,this.l+Jf*(arguments.length?a:1)),this.a,this.b)};Id.darker=function(a){return new Oa(Math.max(0,this.l-Jf*(arguments.length?a:
1)),this.a,this.b)};Id.rgb=function(){return Ya(this.l,this.a,this.b)};B.rgb=Pa;var Se=Pa.prototype=new da;Se.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,e=this.g,c=this.b;if(!b&&!e&&!c)return new Pa(30,30,30);b&&30>b&&(b=30);e&&30>e&&(e=30);c&&30>c&&(c=30);return new Pa(Math.min(255,b/a),Math.min(255,e/a),Math.min(255,c/a))};Se.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return new Pa(a*this.r,a*this.g,a*this.b)};Se.hsl=function(){return sd(this.r,this.g,this.b)};
Se.toString=function(){return"#"+Db(this.r)+Db(this.g)+Db(this.b)};var cb=B.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,
darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,
gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,
lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,
orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,
springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});cb.forEach(function(a,b){cb.set(a,new Pa(b>>16,b>>8&255,b&255))});B.functor=sa;B.xhr=tc(Ka);B.dsv=function(a,b){function e(a,e,f){3>arguments.length&&(f=e,e=null);var m=Rd(a,b,null==e?c:d(e),f);m.row=function(a){return arguments.length?m.response(null==(e=a)?c:d(a)):e};return m}function c(a){return e.parse(a.responseText)}
function d(a){return function(b){return e.parse(b.responseText,a)}}function f(b){return b.map(m).join(a)}function m(a){return g.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var g=new RegExp('["'+a+"\n]"),h=a.charCodeAt(0);e.parse=function(a,b){var c;return e.parseRows(a,function(a,e){if(c)return c(a,e-1);var d=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");c=b?function(a,e){return b(d(a),e)}:d})};e.parseRows=function(a,b){function e(){if(g>=m)return d;
if(x)return x=!1,c;var b=g;if(34===a.charCodeAt(b)){for(var e=b;e++<m;)if(34===a.charCodeAt(e)){if(34!==a.charCodeAt(e+1))break;++e}g=e+2;var f=a.charCodeAt(e+1);13===f?(x=!0,10===a.charCodeAt(e+2)&&++g):10===f&&(x=!0);return a.slice(b+1,e).replace(/""/g,'"')}for(;g<m;){f=a.charCodeAt(g++);e=1;if(10===f)x=!0;else if(13===f)x=!0,10===a.charCodeAt(g)&&(++g,++e);else if(f!==h)continue;return a.slice(b,g-e)}return a.slice(b)}for(var c={},d={},f=[],m=a.length,g=0,l=0,k,x;(k=e())!==d;){for(var n=[];k!==
c&&k!==d;)n.push(k),k=e();b&&null==(n=b(n,l++))||f.push(n)}return f};e.format=function(b){if(Array.isArray(b[0]))return e.formatRows(b);var c=new v,d=[];b.forEach(function(a){for(var b in a)c.has(b)||d.push(c.add(b))});return[d.map(m).join(a)].concat(b.map(function(b){return d.map(function(a){return m(b[a])}).join(a)})).join("\n")};e.formatRows=function(a){return a.map(f).join("\n")};return e};B.csv=B.dsv(",","text/csv");B.tsv=B.dsv("\t","text/tab-separated-values");var qf,yd,be,pf,Bc,yh=hb[q(hb,
"requestAnimationFrame")]||function(a){setTimeout(a,17)};B.timer=function(a,b,e){var c=arguments.length;2>c&&(b=0);3>c&&(e=Date.now());c={c:a,t:e+b,f:!1,n:null};yd?yd.n=c:qf=c;yd=c;be||(pf=clearTimeout(pf),be=1,yh(Rc))};B.timer.flush=function(){ye();gc()};B.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var Pi="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,b){var e=Math.pow(10,3*ea(8-b));return{scale:8<b?function(a){return a/e}:function(a){return a*
e},symbol:a}});B.formatPrefix=function(a,b){var e=0;a&&(0>a&&(a*=-1),b&&(a=B.round(a,ke(a,b))),e=1+Math.floor(1E-12+Math.log(a)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3))));return Pi[8+e/3]};var zh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ah=B.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},
g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=B.round(a,ke(a,b))).toFixed(Math.max(0,Math.min(20,ke(a*(1+1E-15),b))))}}),U=B.time={},eb=Date;kb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},
getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Tb.setUTCDate.apply(this._,arguments)},setDay:function(){Tb.setUTCDay.apply(this._,arguments)},setFullYear:function(){Tb.setUTCFullYear.apply(this._,arguments)},setHours:function(){Tb.setUTCHours.apply(this._,
arguments)},setMilliseconds:function(){Tb.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Tb.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Tb.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Tb.setUTCSeconds.apply(this._,arguments)},setTime:function(){Tb.setTime.apply(this._,arguments)}};var Tb=Date.prototype;U.year=Wa(function(a){a=U.day(a);a.setMonth(0,1);return a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});U.years=
U.year.range;U.years.utc=U.year.utc.range;U.day=Wa(function(a){var b=new eb(2E3,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});U.days=U.day.range;U.days.utc=U.day.utc.range;U.dayOfYear=function(a){var b=U.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,b){b=7-b;var e=U[a]=
Wa(function(a){(a=U.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var e=U.year(a).getDay();return Math.floor((U.dayOfYear(a)+(e+b)%7)/7)-(e!==b)});U[a+"s"]=e.range;U[a+"s"].utc=e.utc.range;U[a+"OfYear"]=function(a){var e=U.year(a).getDay();return Math.floor((U.dayOfYear(a)+(e+b)%7)/7)}});U.week=U.sunday;U.weeks=U.sunday.range;U.weeks.utc=U.sunday.utc.range;U.weekOfYear=U.sundayOfYear;var ig={"-":"",_:" ",0:"0"},Da=/^\s*\d+/,
ad=/^%/;B.locale=function(a){return{numberFormat:Jc(a),timeFormat:J(a)}};var Pg=B.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
B.format=Pg.numberFormat;B.geo={};T.prototype={s:0,t:0,add:function(a){W(a,this.t,Te);W(Te.s,this.s,this);this.s?this.t+=Te.t:this.s=Te.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Te=new T;B.geo.stream=function(a,b){if(a&&Jd.hasOwnProperty(a.type))Jd[a.type](a,b);else V(a,b)};var Jd={Feature:function(a,b){V(a.geometry,b)},FeatureCollection:function(a,b){a=a.features;for(var e=-1,c=a.length;++e<c;)V(a[e].geometry,b)}},jg={Sphere:function(a,b){b.sphere()},Point:function(a,
b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var e=a.coordinates,c=-1,d=e.length;++c<d;)a=e[c],b.point(a[0],a[1],a[2])},LineString:function(a,b){Sc(a.coordinates,b,0)},MultiLineString:function(a,b){a=a.coordinates;for(var e=-1,c=a.length;++e<c;)Sc(a[e],b,0)},Polygon:function(a,b){pd(a.coordinates,b)},MultiPolygon:function(a,b){a=a.coordinates;for(var e=-1,c=a.length;++e<c;)pd(a[e],b)},GeometryCollection:function(a,b){a=a.geometries;for(var e=-1,c=a.length;++e<c;)V(a[e],
b)}};B.geo.area=function(a){Gc=0;B.geo.stream(a,nb);return Gc};var Gc,bd=new T,nb={sphere:function(){Gc+=4*ia},point:y,lineStart:y,lineEnd:y,polygonStart:function(){bd.reset();nb.lineStart=Vd},polygonEnd:function(){var a=2*bd;Gc+=0>a?4*ia+a:a;nb.lineStart=nb.lineEnd=nb.point=y}};B.geo.bounds=function(){function a(a,b){r.push(y=[k=a,n=a]);b<x&&(x=b);b>q&&(q=b)}function b(b,e){var c=jc([b*ha,e*ha]);if(H){var d=rb(H,c);d=rb([d[1],-d[0],0],d);kc(d);d=Nb(d);var f=b-D,m=0<f?1:-1,h=d[0]*Ha*m;f=180<ea(f);
f^(m*D<h&&h<m*b)?(e=d[1]*Ha,e>q&&(q=e)):(h=(h+360)%360-180,f^(m*D<h&&h<m*b))?(e=-d[1]*Ha,e<x&&(x=e)):(e<x&&(x=e),e>q&&(q=e));f?b<D?g(k,b)>g(k,n)&&(n=b):g(b,n)>g(k,n)&&(k=b):n>=k?(b<k&&(k=b),b>n&&(n=b)):b>D?g(k,b)>g(k,n)&&(n=b):g(b,n)>g(k,n)&&(k=b)}else a(b,e);H=c;D=b}function e(){w.point=b}function c(){y[0]=k;y[1]=n;w.point=a;H=null}function d(a,e){if(H){var c=a-D;v+=180<ea(c)?c+(0<c?360:-360):c}else p=a,t=e;nb.point(a,e);b(a,e)}function f(){nb.lineStart()}function m(){d(p,t);nb.lineEnd();1E-6<ea(v)&&
(k=-(n=180));y[0]=k;y[1]=n;H=null}function g(a,b){return 0>(b-=a)?b+360:b}function h(a,b){return a[0]-b[0]}function l(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,x,n,q,D,p,t,H,v,r,y,w={point:a,lineStart:e,lineEnd:c,polygonStart:function(){w.point=d;w.lineStart=f;w.lineEnd=m;v=0;nb.polygonStart()},polygonEnd:function(){nb.polygonEnd();w.point=a;w.lineStart=e;w.lineEnd=c;0>bd?(k=-(n=180),x=-(q=90)):1E-6<v?q=90:-1E-6>v&&(x=-90);y[0]=k;y[1]=n}};return function(a){q=n=-(k=x=Infinity);
r=[];B.geo.stream(a,w);if(a=r.length){r.sort(h);for(var b=1,e=r[0],c,d=[e];b<a;++b)c=r[b],l(c[0],e)||l(c[1],e)?(g(e[0],c[1])>g(e[0],e[1])&&(e[1]=c[1]),g(c[0],e[1])>g(e[0],e[1])&&(e[0]=c[0])):d.push(e=c);var f=-Infinity,m;a=d.length-1;b=0;for(e=d[a];b<=a;e=c,++b)c=d[b],(m=g(e[1],c[0]))>f&&(f=m,k=c[0],n=e[1])}r=y=null;return Infinity===k||Infinity===x?[[NaN,NaN],[NaN,NaN]]:[[k,x],[n,q]]}}();B.geo.centroid=function(a){ce=dd=cd=bc=nc=cc=dc=Qb=ob=zd=ed=0;B.geo.stream(a,Rb);a=ob;var b=zd,e=ed,c=a*a+b*b+
e*e;return 1E-12>c&&(a=cc,b=dc,e=Qb,1E-6>dd&&(a=cd,b=bc,e=nc),c=a*a+b*b+e*e,1E-12>c)?[NaN,NaN]:[Math.atan2(b,a)*Ha,xa(e/Math.sqrt(c))*Ha]};var ce,dd,cd,bc,nc,cc,dc,Qb,ob,zd,ed,Rb={sphere:y,point:ze,lineStart:nd,lineEnd:md,polygonStart:function(){Rb.lineStart=Lc},polygonEnd:function(){Rb.lineStart=nd}},Dc=Fa(uc,function(a){var b=NaN,e=NaN,c=NaN,d;return{lineStart:function(){a.lineStart();d=1},point:function(f,m){var g=0<f?ia:-ia,h=ea(f-b);if(1E-6>ea(h-ia))a.point(b,e=0<(e+m)/2?Ga:-Ga),a.point(c,e),
a.lineEnd(),a.lineStart(),a.point(g,e),a.point(f,e),d=0;else if(c!==g&&h>=ia){1E-6>ea(b-c)&&(b-=1E-6*c);1E-6>ea(f-g)&&(f-=1E-6*g);h=b;var l=e,k=f,x,n,q=Math.sin(h-k);e=1E-6<ea(q)?Math.atan((Math.sin(l)*(n=Math.cos(m))*Math.sin(k)-Math.sin(m)*(x=Math.cos(l))*Math.sin(h))/(x*n*q)):(l+m)/2;a.point(c,e);a.lineEnd();a.lineStart();a.point(g,e);d=0}a.point(b=f,e=m);c=g},lineEnd:function(){a.lineEnd();b=e=NaN},clean:function(){return 2-d}}},function(a,b,e,c){null==a?(e*=Ga,c.point(-ia,e),c.point(0,e),c.point(ia,
e),c.point(ia,0),c.point(ia,-e),c.point(0,-e),c.point(-ia,-e),c.point(-ia,0),c.point(-ia,e)):1E-6<ea(a[0]-b[0])?(a=a[0]<b[0]?ia:-ia,e=e*a/2,c.point(-a,e),c.point(0,e),c.point(a,e)):c.point(b[0],b[1])},[-ia,-ia/2]);B.geo.clipExtent=function(){var a,b,e,c,d,f,m={stream:function(a){d&&(d.valid=!1);d=f(a);d.valid=!0;return d},extent:function(g){if(!arguments.length)return[[a,b],[e,c]];f=Ae(a=+g[0][0],b=+g[0][1],e=+g[1][0],c=+g[1][1]);d&&(d.valid=!1,d=null);return m}};return m.extent([[0,0],[960,500]])};
(B.geo.conicEqualArea=function(){return xc(Xd)}).raw=Xd;B.geo.albers=function(){return B.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};B.geo.albersUsa=function(){function a(a){var b=a[0];a=a[1];d=null;(m(b,a),d)||(g(b,a),d)||h(b,a);return d}var b=B.geo.albers(),e=B.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=B.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d,f={point:function(a,b){d=[a,b]}},m,g,
h;a.invert=function(a){var d=b.scale(),f=b.translate(),m=(a[0]-f[0])/d;d=(a[1]-f[1])/d;return(.12<=d&&.234>d&&-.425<=m&&-.214>m?e:.166<=d&&.234>d&&-.214<=m&&-.115>m?c:b).invert(a)};a.stream=function(a){var d=b.stream(a),f=e.stream(a),m=c.stream(a);return{point:function(a,b){d.point(a,b);f.point(a,b);m.point(a,b)},sphere:function(){d.sphere();f.sphere();m.sphere()},lineStart:function(){d.lineStart();f.lineStart();m.lineStart()},lineEnd:function(){d.lineEnd();f.lineEnd();m.lineEnd()},polygonStart:function(){d.polygonStart();
f.polygonStart();m.polygonStart()},polygonEnd:function(){d.polygonEnd();f.polygonEnd();m.polygonEnd()}}};a.precision=function(d){if(!arguments.length)return b.precision();b.precision(d);e.precision(d);c.precision(d);return a};a.scale=function(d){if(!arguments.length)return b.scale();b.scale(d);e.scale(.35*d);c.scale(d);return a.translate(b.translate())};a.translate=function(d){if(!arguments.length)return b.translate();var l=b.scale(),k=+d[0],x=+d[1];m=b.translate(d).clipExtent([[k-.455*l,x-.238*l],
[k+.455*l,x+.238*l]]).stream(f).point;g=e.translate([k-.307*l,x+.201*l]).clipExtent([[k-.425*l+1E-6,x+.12*l+1E-6],[k-.214*l-1E-6,x+.234*l-1E-6]]).stream(f).point;h=c.translate([k-.205*l,x+.212*l]).clipExtent([[k-.214*l+1E-6,x+.166*l+1E-6],[k-.115*l-1E-6,x+.234*l-1E-6]]).stream(f).point;return a};return a.scale(1070)};var Kf,Ad,Gb={point:y,lineStart:y,lineEnd:y,polygonStart:function(){Ad=0;Gb.lineStart=dg},polygonEnd:function(){Gb.lineStart=Gb.lineEnd=Gb.point=y;Kf+=ea(Ad/2)}},Na,Lf,Kd,Mf,Qi={point:function(a,
b){a<Na&&(Na=a);a>Kd&&(Kd=a);b<Lf&&(Lf=b);b>Mf&&(Mf=b)},lineStart:y,lineEnd:y,polygonStart:y,polygonEnd:y},Ra={point:lc,lineStart:kf,lineEnd:vd,polygonStart:function(){Ra.lineStart=Be},polygonEnd:function(){Ra.point=lc;Ra.lineStart=kf;Ra.lineEnd=vd}};B.geo.path=function(){function a(a){a&&("function"===typeof e&&m.pointRadius(+e.apply(this,arguments)),g&&g.valid||(g=f(m)),B.geo.stream(a,g));return m.result()}function b(){g=null;return a}var e=4.5,c,d,f,m,g;a.area=function(a){Kf=0;B.geo.stream(a,f(Gb));
return Kf};a.centroid=function(a){cd=bc=nc=cc=dc=Qb=ob=zd=ed=0;B.geo.stream(a,f(Ra));return ed?[ob/ed,zd/ed]:Qb?[cc/Qb,dc/Qb]:nc?[cd/nc,bc/nc]:[NaN,NaN]};a.bounds=function(a){Kd=Mf=-(Na=Lf=Infinity);B.geo.stream(a,f(Qi));return[[Na,Lf],[Kd,Mf]]};a.projection=function(a){if(!arguments.length)return c;f=(c=a)?a.stream||mf(a):Ka;return b()};a.context=function(a){if(!arguments.length)return d;m=null==(d=a)?new O:new lf(a);"function"!==typeof e&&m.pointRadius(e);return b()};a.pointRadius=function(b){if(!arguments.length)return e;
e="function"===typeof b?b:(m.pointRadius(+b),+b);return a};return a.projection(B.geo.albersUsa()).context(null)};B.geo.transform=function(a){return{stream:function(b){b=new Zb(b);for(var e in a)b[e]=a[e];return b}}};Zb.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
B.geo.projection=Ob;B.geo.projectionMutator=Xc;(B.geo.equirectangular=function(){return Ob(Pb)}).raw=Pb.invert=Pb;B.geo.rotation=function(a){function b(b){b=a(b[0]*ha,b[1]*ha);return b[0]*=Ha,b[1]*=Ha,b}a=wd(a[0]%360*ha,a[1]*ha,2<a.length?a[2]*ha:0);b.invert=function(b){b=a.invert(b[0]*ha,b[1]*ha);return b[0]*=Ha,b[1]*=Ha,b};return b};qe.invert=Pb;B.geo.circle=function(){function a(){var a="function"===typeof b?b.apply(this,arguments):b,e=wd(-a[0]*ha,-a[1]*ha,0).invert,c=[];d(null,null,1,{point:function(a,
b){c.push(a=e(a,b));a[0]*=Ha;a[1]*=Ha}});return{type:"Polygon",coordinates:[c]}}var b=[0,0],e,c=6,d;a.origin=function(e){if(!arguments.length)return b;b=e;return a};a.angle=function(b){if(!arguments.length)return e;d=Yc((e=+b)*ha,c*ha);return a};a.precision=function(b){if(!arguments.length)return c;d=Yc(e*ha,(c=+b)*ha);return a};return a.angle(90)};B.geo.distance=function(a,b){var e=(b[0]-a[0])*ha,c=a[1]*ha,d=b[1]*ha;b=Math.cos(e);a=Math.sin(c);c=Math.cos(c);var f=Math.sin(d);d=Math.cos(d);var m;
return Math.atan2(Math.sqrt((m=d*Math.sin(e))*m+(m=c*f-a*d*b)*m),a*f+c*d*b)};B.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return B.range(Math.ceil(f/n)*n,d,n).map(t).concat(B.range(Math.ceil(l/q)*q,h,q).map(H)).concat(B.range(Math.ceil(c/k)*k,e,k).filter(function(a){return 1E-6<ea(a%n)}).map(D)).concat(B.range(Math.ceil(g/x)*x,m,x).filter(function(a){return 1E-6<ea(a%q)}).map(p))}var e,c,d,f,m,g,h,l,k=10,x=k,n=90,q=360,D,p,t,H,r=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",
coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[t(f).concat(H(h).slice(1),t(d).reverse().slice(1),H(l).reverse().slice(1))]}};a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()};a.majorExtent=function(b){if(!arguments.length)return[[f,l],[d,h]];f=+b[0][0];d=+b[1][0];l=+b[0][1];h=+b[1][1];f>d&&(b=f,f=d,d=b);l>h&&(b=l,l=h,h=b);return a.precision(r)};a.minorExtent=function(b){if(!arguments.length)return[[c,g],[e,m]];c=+b[0][0];e=+b[1][0];
g=+b[0][1];m=+b[1][1];c>e&&(b=c,c=e,e=b);g>m&&(b=g,g=m,m=b);return a.precision(r)};a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()};a.majorStep=function(b){if(!arguments.length)return[n,q];n=+b[0];q=+b[1];return a};a.minorStep=function(b){if(!arguments.length)return[k,x];k=+b[0];x=+b[1];return a};a.precision=function(b){if(!arguments.length)return r;r=+b;D=Zc(g,m,90);p=Yd(c,e,r);t=Zc(l,h,90);H=Yd(f,d,r);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,
-80.000001],[180,80.000001]])};B.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[e||b.apply(this,arguments),d||c.apply(this,arguments)]}}var b=yc,e,c=$c,d;a.distance=function(){return B.geo.distance(e||b.apply(this,arguments),d||c.apply(this,arguments))};a.source=function(c){if(!arguments.length)return b;b=c;e="function"===typeof c?null:c;return a};a.target=function(b){if(!arguments.length)return c;c=b;d="function"===typeof b?null:b;return a};a.precision=function(){return arguments.length?
a:0};return a};B.geo.interpolate=function(a,b){return Zd(a[0]*ha,a[1]*ha,b[0]*ha,b[1]*ha)};B.geo.length=function(a){Qg=0;B.geo.stream(a,Ld);return Qg};var Qg,Ld={sphere:y,point:y,lineStart:function(){function a(a,d){var f=Math.sin(d*=ha);d=Math.cos(d);var m=ea((a*=ha)-b),g=Math.cos(m);Qg+=Math.atan2(Math.sqrt((m=d*Math.sin(m))*m+(m=c*f-e*d*g)*m),e*f+c*d*g);b=a;e=f;c=d}var b,e,c;Ld.point=function(d,f){b=d*ha;e=Math.sin(f*=ha);c=Math.cos(f);Ld.point=a};Ld.lineEnd=function(){Ld.point=Ld.lineEnd=y}},
lineEnd:y,polygonStart:y,polygonEnd:y},Rg=ya(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(B.geo.azimuthalEqualArea=function(){return Ob(Rg)}).raw=Rg;var Ib=ya(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},Ka);(B.geo.azimuthalEquidistant=function(){return Ob(Ib)}).raw=Ib;(B.geo.conicConformal=function(){return xc(Nd)}).raw=Nd;(B.geo.conicEquidistant=function(){return xc(je)}).raw=je;var Sg=ya(function(a){return 1/a},Math.atan);(B.geo.gnomonic=function(){return Ob(Sg)}).raw=
Sg;yb.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Ga]};(B.geo.mercator=function(){return Ic(yb)}).raw=yb;var Vh=ya(function(){return 1},Math.asin);(B.geo.orthographic=function(){return Ob(Vh)}).raw=Vh;var qc=ya(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(B.geo.stereographic=function(){return Ob(qc)}).raw=qc;Xe.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Ga]};(B.geo.transverseMercator=function(){var a=Ic(Xe),b=a.center,e=a.rotate;a.center=function(a){return a?
b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])};a.rotate=function(a){return a?e([a[0],a[1],2<a.length?a[2]+90:90]):(a=e(),[a[0],a[1],a[2]-90])};return e([0,0,90])}).raw=Xe;B.geom={};B.geom.hull=function(a){function b(a){if(3>a.length)return[];var b=sa(e),d=sa(c),f,m=a.length,g=[],h=[];for(f=0;f<m;f++)g.push([+b.call(this,a[f],f),+d.call(this,a[f],f),f]);g.sort($g);for(f=0;f<m;f++)h.push([g[f][0],-g[f][1]]);b=Ye(g);h=Ye(h);d=h[0]===b[0];m=h[h.length-1]===b[b.length-1];var l=[];for(f=b.length-1;0<=f;--f)l.push(a[g[b[f]][2]]);
for(f=+d;f<h.length-m;++f)l.push(a[g[h[f]][2]]);return l}var e=rc,c=le;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(e=a,b):e};b.y=function(a){return arguments.length?(c=a,b):c};return b};B.geom.polygon=function(a){ae(a,qb);return a};var qb=B.geom.polygon.prototype=[];qb.area=function(){for(var a=-1,b=this.length,e,c=this[b-1],d=0;++a<b;)e=c,c=this[a],d+=e[1]*c[0]-e[0]*c[1];return.5*d};qb.centroid=function(a){var b=-1,e=this.length,c=0,d=0,f=this[e-1];for(arguments.length||
(a=-1/(6*this.area()));++b<e;){var m=f;f=this[b];var g=m[0]*f[1]-f[0]*m[1];c+=(m[0]+f[0])*g;d+=(m[1]+f[1])*g}return[c*a,d*a]};qb.clip=function(a){for(var b,e=ne(a),c=-1,d=this.length-ne(this),f,m,g=this[d-1],h,l,k;++c<d;){b=a.slice();a.length=0;h=this[c];l=b[(m=b.length-e)-1];for(f=-1;++f<m;)k=b[f],Ze(k,g,h)?(Ze(l,g,h)||a.push(me(l,k,g,h)),a.push(k)):Ze(l,g,h)&&a.push(me(l,k,g,h)),l=k;e&&a.push(a[0]);g=h}return a};var ib,Cd,vb,ec=[],mg,Bd,Bh=[];bf.prototype.prepare=function(){for(var a=this.edges,
b=a.length,e;b--;)e=a[b].edge,e.b&&e.a||a.splice(b,1);a.sort(cf);return a.length};ue.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};ef.prototype={insert:function(a,b){var e;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;var c=a}else this._?(a=Wf(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);b.L=b.R=null;b.U=c;b.C=!0;for(a=b;c&&c.C;)b=
c.U,c===b.L?(e=b.R)&&e.C?(c.C=e.C=!1,b.C=!0,a=b):(a===c.R&&(re(this,c),a=c,c=a.U),c.C=!1,b.C=!0,Od(this,b)):(e=b.L)&&e.C?(c.C=e.C=!1,b.C=!0,a=b):(a===c.L&&(Od(this,c),a=c,c=a.U),c.C=!1,b.C=!0,re(this,b)),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,e=a.L,c=a.R;var d=e?c?Wf(c):e:c;b?b.L===a?b.L=d:b.R=d:this._=d;if(e&&c){var f=d.C;d.C=a.C;d.L=e;e.U=d;d!==c?(b=d.U,d.U=a.U,a=d.R,b.L=a,d.R=c,c.U=d):(d.U=b,b=d,a=d.R)}else f=a.C,a=d;a&&(a.U=b);if(!f)if(a&&
a.C)a.C=!1;else{do{if(a===this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,re(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,Od(this,a),a=b.R);a.C=b.C;b.C=a.R.C=!1;re(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,Od(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,re(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;Od(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};B.geom.voronoi=function(a){function b(a){var b=Array(a.length),c=g[0][0],
d=g[0][1],f=g[1][0],m=g[1][1];se(e(a),g).cells.forEach(function(e,g){var h=e.edges;e=e.site;(b[g]=h.length?h.map(function(a){a=a.start();return[a.x,a.y]}):e.x>=c&&e.x<=f&&e.y>=d&&e.y<=m?[[c,m],[f,m],[f,d],[c,d]]:[]).point=a[g]});return b}function e(a){return a.map(function(a,b){return{x:1E-6*Math.round(f(a,b)/1E-6),y:1E-6*Math.round(m(a,b)/1E-6),i:b}})}var c=rc,d=le,f=c,m=d,g=fe;if(a)return b(a);b.links=function(a){return se(e(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],
target:a[b.r.i]}})};b.triangles=function(a){var b=[];se(e(a)).cells.forEach(function(e,c){var d=e.site;e=e.edges.sort(cf);var f=-1,m=e.length,g=e[m-1].edge;for(g=g.l===d?g.r:g.l;++f<m;){var h=g;g=e[f].edge;g=g.l===d?g.r:g.l;c<h.i&&c<g.i&&0>(d.x-g.x)*(h.y-d.y)-(d.x-h.x)*(g.y-d.y)&&b.push([a[c],a[h.i],a[g.i]])}});return b};b.x=function(a){return arguments.length?(f=sa(c=a),b):c};b.y=function(a){return arguments.length?(m=sa(d=a),b):d};b.clipExtent=function(a){if(!arguments.length)return g===fe?null:
g;g=null==a?fe:a;return b};b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):g===fe?null:g&&g[1]};return b};var fe=[[-1E6,-1E6],[1E6,1E6]];B.geom.delaunay=function(a){return B.geom.voronoi().triangles(a)};B.geom.quadtree=function(a,b,e,c,d){function f(a){function f(a,b,e,c,d,f,m,g){if(!isNaN(e)&&!isNaN(c))if(a.leaf){var h=a.x,k=a.y;if(null!=h){if(!(.01>ea(h-e)+ea(k-c))){var x=a.point;a.x=a.y=a.point=null;l(a,x,h,k,d,f,m,g)}l(a,b,e,c,d,f,m,g)}else a.x=e,a.y=c,a.point=b}else l(a,
b,e,c,d,f,m,g)}function l(a,b,e,c,d,m,g,h){var l=.5*(d+g),k=.5*(m+h),x=e>=l,n=c>=k,q=n<<1|x;a.leaf=!1;a=a.nodes[q]||(a.nodes[q]=ff());x?d=l:g=l;n?m=k:h=k;f(a,b,e,c,d,m,g,h)}var k=sa(m),x=sa(g),n;if(null!=b){var q=b;var D=e;var p=c;var t=d}else{p=t=-(q=D=Infinity);var H=[];var r=[];var v=a.length;if(h)for(n=0;n<v;++n){var y=a[n];y.x<q&&(q=y.x);y.y<D&&(D=y.y);y.x>p&&(p=y.x);y.y>t&&(t=y.y);H.push(y.x);r.push(y.y)}else for(n=0;n<v;++n){var w=+k(y=a[n],n);y=+x(y,n);w<q&&(q=w);y<D&&(D=y);w>p&&(p=w);y>t&&
(t=y);H.push(w);r.push(y)}}w=p-q;y=t-D;w>y?t=D+w:p=q+y;var z=ff();z.add=function(a){f(z,a,+k(a,++n),+x(a,n),q,D,p,t)};z.visit=function(a){ve(a,z,q,D,p,t)};z.find=function(a){return gf(z,a[0],a[1],q,D,p,t)};n=-1;if(null==b){for(;++n<v;)f(z,a[n],H[n],r[n],q,D,p,t);--n}else a.forEach(z.add);H=r=a=y=null;return z}var m=rc,g=le,h;if(h=arguments.length)return m=ag,g=gh,3===h&&(d=e,c=b,e=b=0),f(a);f.x=function(a){return arguments.length?(m=a,f):m};f.y=function(a){return arguments.length?(g=a,f):g};f.extent=
function(a){if(!arguments.length)return null==b?null:[[b,e],[c,d]];null==a?b=e=c=d=null:(b=+a[0][0],e=+a[0][1],c=+a[1][0],d=+a[1][1]);return f};f.size=function(a){if(!arguments.length)return null==b?null:[c-b,d-e];null==a?b=e=c=d=null:(b=e=0,c=+a[0],d=+a[1]);return f};return f};B.interpolateRgb=$f;B.interpolateObject=nh;B.interpolateNumber=hc;B.interpolateString=oh;var ng=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ge=new RegExp(ng.source,"g");B.interpolate=Xb;B.interpolators=[function(a,b){var e=
typeof b;return("string"===e?cb.has(b)||/^(#|rgb\(|hsl\()/.test(b)?$f:oh:b instanceof da?$f:Array.isArray(b)?we:"object"===e&&isNaN(b)?nh:hc)(a,b)}];B.interpolateArray=we;var Tg=function(){return Ka},Wh=B.map({linear:Tg,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return xe},cubic:function(){return Cb},sin:function(){return vi},exp:function(){return wi},circle:function(){return xi},elastic:function(a,b){2>arguments.length&&(b=.45);if(arguments.length)var e=b/fb*Math.asin(1/
a);else a=1,e=b/4;return function(c){return 1+a*Math.pow(2,-10*c)*Math.sin((c-e)*fb/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return ph}}),Xh=B.map({"in":Ka,out:rd,"in-out":Bb,"out-in":function(a){return Bb(rd(a))}});B.ease=function(a){var b=a.indexOf("-"),e=0<=b?a.slice(0,b):a;b=0<=b?a.slice(b+1):"in";e=Wh.get(e)||Tg;b=Xh.get(b)||Ka;return kh(b(e.apply(null,pc.call(arguments,1))))};B.interpolateHcl=function(a,b){a=B.hcl(a);b=B.hcl(b);var e=
a.h,c=a.c,d=a.l,f=b.h-e,m=b.c-c,g=b.l-d;isNaN(m)&&(m=0,c=isNaN(c)?b.c:c);isNaN(f)?(f=0,e=isNaN(e)?b.h:e):180<f?f-=360:-180>f&&(f+=360);return function(a){return la(e+f*a,c+m*a,d+g*a)+""}};B.interpolateHsl=function(a,b){a=B.hsl(a);b=B.hsl(b);var e=a.h,c=a.s,d=a.l,f=b.h-e,m=b.s-c,g=b.l-d;isNaN(m)&&(m=0,c=isNaN(c)?b.s:c);isNaN(f)?(f=0,e=isNaN(e)?b.h:e):180<f?f-=360:-180>f&&(f+=360);return function(a){return Ea(e+f*a,c+m*a,d+g*a)+""}};B.interpolateLab=function(a,b){a=B.lab(a);b=B.lab(b);var e=a.l,c=a.a,
d=a.b,f=b.l-e,m=b.a-c,g=b.b-d;return function(a){return Ya(e+f*a,c+m*a,d+g*a)+""}};B.interpolateRound=Sf;B.transform=function(a){var b=xb.createElementNS(B.ns.prefix.svg,"g");return(B.transform=function(a){if(null!=a){b.setAttribute("transform",a);var e=b.transform.baseVal.consolidate()}return new Vf(e?e.matrix:Nf)})(a)};Vf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Nf={a:1,b:0,c:0,d:1,e:0,f:0};B.interpolateTransform=
qh;B.layout={};B.layout.bundle=function(){return function(a){for(var b=[],e=-1,c=a.length;++e<c;)b.push(Tf(a[e]));return b}};B.layout.chord=function(){function a(){var a={},e=[],x=B.range(m),n=[],q,D;c=[];d=[];var p=0;for(q=-1;++q<m;){var t=0;for(D=-1;++D<m;)t+=f[q][D];e.push(t);n.push(B.range(m));p+=t}h&&x.sort(function(a,b){return h(e[a],e[b])});l&&n.forEach(function(a,b){a.sort(function(a,e){return l(f[b][a],f[b][e])})});p=(fb-g*m)/p;t=0;for(q=-1;++q<m;){var H=t;for(D=-1;++D<m;){var r=x[q];var v=
n[r][D],y=f[r][v],w=t,z=t+=y*p;a[r+"-"+v]={index:r,subindex:v,startAngle:w,endAngle:z,value:y}}d[r]={index:r,startAngle:H,endAngle:t,value:(t-H)/p};t+=g}for(q=-1;++q<m;)for(D=q-1;++D<m;)r=a[q+"-"+D],x=a[D+"-"+q],(r.value||x.value)&&c.push(r.value<x.value?{source:x,target:r}:{source:r,target:x});k&&b()}function b(){c.sort(function(a,b){return k((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var e={},c,d,f,m,g=0,h,l,k;e.matrix=function(a){if(!arguments.length)return f;m=(f=a)&&
f.length;c=d=null;return e};e.padding=function(a){if(!arguments.length)return g;g=a;c=d=null;return e};e.sortGroups=function(a){if(!arguments.length)return h;h=a;c=d=null;return e};e.sortSubgroups=function(a){if(!arguments.length)return l;l=a;c=null;return e};e.sortChords=function(a){if(!arguments.length)return k;k=a;c&&b();return e};e.chords=function(){c||a();return c};e.groups=function(){d||a();return d};return e};B.layout.force=function(){function a(a){return function(b,e,c,d){if(b.point!==a){c=
b.cx-a.x;var f=b.cy-a.y;e=d-e;d=c*c+f*f;if(e*e/q<d)return d<x&&(e=b.charge/d,a.px-=c*e,a.py-=f*e),!0;b.point&&d&&d<x&&(e=b.pointCharge/d,a.px-=c*e,a.py-=f*e)}return!b.charge}}function b(a){a.px=B.event.x;a.py=B.event.y;e.resume()}var e={},c=B.dispatch("start","tick","end"),d=[1,1],f,m,g=.9,h=Yh,l=Ri,k=-30,x=Zh,n=.1,q=.64,D=[],p=[],t,H,r;e.tick=function(){if(.005>(m*=.99))return c.end({type:"end",alpha:m=0}),!0;var b=D.length,e=p.length,f,h;for(f=0;f<e;++f){var l=p[f];var x=l.source;var q=l.target;
var v=q.x-x.x;var y=q.y-x.y;if(h=v*v+y*y)h=m*H[f]*((h=Math.sqrt(h))-t[f])/h,v*=h,y*=h,q.x-=v*(h=x.weight/(q.weight+x.weight)),q.y-=y*h,x.x+=v*(h=1-h),x.y+=y*h}if(h=m*n)if(v=d[0]/2,y=d[1]/2,f=-1,h)for(;++f<b;)l=D[f],l.x+=(v-l.x)*h,l.y+=(y-l.y)*h;if(k)for(Ja(e=B.geom.quadtree(D),m,r),f=-1;++f<b;)(l=D[f]).fixed||e.visit(a(l));for(f=-1;++f<b;)l=D[f],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*g,l.y-=(l.py-(l.py=l.y))*g);c.tick({type:"tick",alpha:m})};e.nodes=function(a){if(!arguments.length)return D;
D=a;return e};e.links=function(a){if(!arguments.length)return p;p=a;return e};e.size=function(a){if(!arguments.length)return d;d=a;return e};e.linkDistance=function(a){if(!arguments.length)return h;h="function"===typeof a?a:+a;return e};e.distance=e.linkDistance;e.linkStrength=function(a){if(!arguments.length)return l;l="function"===typeof a?a:+a;return e};e.friction=function(a){if(!arguments.length)return g;g=+a;return e};e.charge=function(a){if(!arguments.length)return k;k="function"===typeof a?
a:+a;return e};e.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(x);x=a*a;return e};e.gravity=function(a){if(!arguments.length)return n;n=+a;return e};e.theta=function(a){if(!arguments.length)return Math.sqrt(q);q=a*a;return e};e.alpha=function(a){if(!arguments.length)return m;a=+a;m?m=0<a?a:0:0<a&&(c.start({type:"start",alpha:m=a}),B.timer(e.tick));return e};e.start=function(){function a(a,e){if(!x){x=Array(c);for(f=0;f<c;++f)x[f]=[];for(f=0;f<m;++f){var d=p[f];x[d.source.index].push(d.target);
x[d.target.index].push(d.source)}}d=x[b];for(var f=-1,m=d.length,g;++f<m;)if(!isNaN(g=d[f][a]))return g;return Math.random()*e}var b,c=D.length,f=p.length,m=d[0],g=d[1],x,n;for(b=0;b<c;++b)(n=D[b]).index=b,n.weight=0;for(b=0;b<f;++b)n=p[b],"number"==typeof n.source&&(n.source=D[n.source]),"number"==typeof n.target&&(n.target=D[n.target]),++n.source.weight,++n.target.weight;for(b=0;b<c;++b)n=D[b],isNaN(n.x)&&(n.x=a("x",m)),isNaN(n.y)&&(n.y=a("y",g)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);
t=[];if("function"===typeof h)for(b=0;b<f;++b)t[b]=+h.call(this,p[b],b);else for(b=0;b<f;++b)t[b]=h;H=[];if("function"===typeof l)for(b=0;b<f;++b)H[b]=+l.call(this,p[b],b);else for(b=0;b<f;++b)H[b]=l;r=[];if("function"===typeof k)for(b=0;b<c;++b)r[b]=+k.call(this,D[b],b);else for(b=0;b<c;++b)r[b]=k;return e.resume()};e.resume=function(){return e.alpha(.1)};e.stop=function(){return e.alpha(0)};e.drag=function(){f||(f=B.behavior.drag().origin(Ka).on("dragstart.force",ni).on("drag.force",b).on("dragend.force",
zi));if(!arguments.length)return f;this.on("mouseover.force",oi).on("mouseout.force",ih).call(f)};return B.rebind(e,c,"on")};var Yh=20,Ri=1,Zh=Infinity;B.layout.hierarchy=function(){function a(d){var f,m,g=[d],h=[],l;for(d.depth=0;null!=(l=g.pop());)if(h.push(l),(f=e.call(a,l,l.depth))&&(m=f.length)){for(var k;0<=--m;)g.push(k=f[m]),k.parent=l,k.depth=l.depth+1;c&&(l.value=0);l.children=f}else c&&(l.value=+c.call(a,l,l.depth)||0),delete l.children;Ab(d,function(a){var e,d;b&&(e=a.children)&&e.sort(b);
c&&(d=a.parent)&&(d.value+=a.value)});return h}var b=dh,e=bh,c=ch;a.sort=function(e){if(!arguments.length)return b;b=e;return a};a.children=function(b){if(!arguments.length)return e;e=b;return a};a.value=function(b){if(!arguments.length)return c;c=b;return a};a.revalue=function(b){c&&(Nc(b,function(a){a.children&&(a.value=0)}),Ab(b,function(b){var e;b.children||(b.value=+c.call(a,b,b.depth)||0);if(e=b.parent)e.value+=b.value}));return b};return a};B.layout.partition=function(){function a(b,e,c,d){var f,
m=b.children;b.x=e;b.y=b.depth*d;b.dx=c;b.dy=d;if(m&&(f=m.length)){var g=-1,h;for(c=b.value?c/b.value:0;++g<f;)a(h=m[g],e,b=h.value*c,d),e+=b}}function b(a){var e;a=a.children;var c=0;if(a&&(e=a.length))for(var d=-1;++d<e;)c=Math.max(c,b(a[d]));return 1+c}function e(e,f){e=c.call(this,e,f);a(e[0],0,d[0],d[1]/b(e[0]));return e}var c=B.layout.hierarchy(),d=[1,1];e.size=function(a){if(!arguments.length)return d;d=a;return e};return Wb(e,c)};B.layout.pie=function(){function a(m){var g=m.length,h=m.map(function(e,
c){return+b.call(a,e,c)}),l=+("function"===typeof c?c.apply(this,arguments):c),k=("function"===typeof d?d.apply(this,arguments):d)-l,x=Math.min(Math.abs(k)/g,+("function"===typeof f?f.apply(this,arguments):f)),n=x*(0>k?-1:1),q=(k-g*n)/B.sum(h);g=B.range(g);var D=[],p;null!=e&&g.sort(e===Ug?function(a,b){return h[b]-h[a]}:function(a,b){return e(m[a],m[b])});g.forEach(function(a){D[a]={data:m[a],value:p=h[a],startAngle:l,endAngle:l+=p*q+n,padAngle:x}});return D}var b=Number,e=Ug,c=0,d=fb,f=0;a.value=
function(e){if(!arguments.length)return b;b=e;return a};a.sort=function(b){if(!arguments.length)return e;e=b;return a};a.startAngle=function(b){if(!arguments.length)return c;c=b;return a};a.endAngle=function(b){if(!arguments.length)return d;d=b;return a};a.padAngle=function(b){if(!arguments.length)return f;f=b;return a};return a};var Ug={};B.layout.stack=function(){function a(g,h){if(!(n=g.length))return g;var l=g.map(function(e,c){return b.call(a,e,c)}),k=l.map(function(b){return b.map(function(b,
e){return[f.call(a,b,e),m.call(a,b,e)]})}),x=e.call(a,k,h);l=B.permute(l,x);k=B.permute(k,x);h=c.call(a,k,h);x=l[0].length;var n,q,D,p;for(D=0;D<x;++D)for(d.call(a,l[0][D],p=h[D],k[0][D][1]),q=1;q<n;++q)d.call(a,l[q][D],p+=k[q-1][D][1],k[q][D][1]);return g}var b=Ka,e=Rf,c=Qd,d=mi,f=eh,m=li;a.values=function(e){if(!arguments.length)return b;b=e;return a};a.order=function(b){if(!arguments.length)return e;e="function"===typeof b?b:Ue.get(b)||Rf;return a};a.offset=function(b){if(!arguments.length)return c;
c="function"===typeof b?b:$h.get(b)||Qd;return a};a.x=function(b){if(!arguments.length)return f;f=b;return a};a.y=function(b){if(!arguments.length)return m;m=b;return a};a.out=function(b){if(!arguments.length)return d;d=b;return a};return a};var Ue=B.map({"inside-out":function(a){var b=a.length,e=a.map(jh),c=a.map(pi),d=B.range(b).sort(function(a,b){return e[a]-e[b]}),f=0,m=0,g=[],h=[];for(a=0;a<b;++a){var l=d[a];f<m?(f+=c[l],g.push(l)):(m+=c[l],h.push(l))}return h.reverse().concat(g)},reverse:function(a){return B.range(a.length).reverse()},
"default":Rf}),$h=B.map({silhouette:function(a){var b=a.length,e=a[0].length,c=[],d=0,f,m,g,h=[];for(m=0;m<e;++m){for(g=f=0;f<b;f++)g+=a[f][m][1];g>d&&(d=g);c.push(g)}for(m=0;m<e;++m)h[m]=(d-c[m])/2;return h},wiggle:function(a){var b=a.length,e=a[0],c=e.length,d,f,m,g,h,l,k,x=[];x[0]=l=k=0;for(f=1;f<c;++f){for(m=d=0;d<b;++d)m+=a[d][f][1];var n=d=0;for(h=e[f][0]-e[f-1][0];d<b;++d){var q=0;for(g=(a[d][f][1]-a[d][f-1][1])/(2*h);q<d;++q)g+=(a[q][f][1]-a[q][f-1][1])/h;n+=g*a[d][f][1]}x[f]=l-=m?n/m*h:0;
l<k&&(k=l)}for(f=0;f<c;++f)x[f]-=k;return x},expand:function(a){var b=a.length,e=a[0].length,c=1/b,d,f,m,g=[];for(f=0;f<e;++f){for(m=d=0;d<b;d++)m+=a[d][f][1];if(m)for(d=0;d<b;d++)a[d][f][1]/=m;else for(d=0;d<b;d++)a[d][f][1]=c}for(f=0;f<e;++f)g[f]=0;return g},zero:Qd});B.layout.histogram=function(){function a(a,f){var m=[],g=a.map(e,this),h=c.call(this,g,f),l=d.call(this,h,g,f);f=-1;for(var k=g.length,x=l.length-1,n=b?1:1/k;++f<x;){var q=m[f]=[];q.dx=l[f+1]-(q.x=l[f]);q.y=0}if(0<x)for(f=-1;++f<k;)q=
g[f],q>=h[0]&&q<=h[1]&&(q=m[B.bisect(l,q,1,x)-1],q.y+=n,q.push(a[f]));return m}var b=!0,e=Number,c=lh,d=ri;a.value=function(b){if(!arguments.length)return e;e=b;return a};a.range=function(b){if(!arguments.length)return c;c=sa(b);return a};a.bins=function(b){if(!arguments.length)return d;d="number"===typeof b?function(a){return ic(a,b)}:sa(b);return a};a.frequency=function(e){if(!arguments.length)return b;b=!!e;return a};return a};B.layout.pack=function(){function a(a,f){a=b.call(this,a,f);f=a[0];
var m=c[0],g=c[1],h=null==d?Math.sqrt:"function"===typeof d?d:function(){return d};f.x=f.y=0;Ab(f,function(a){a.r=+h(a.value)});Ab(f,Dd);if(e){var l=e*(d?1:Math.max(2*f.r/m,2*f.r/g))/2;Ab(f,function(a){a.r+=l});Ab(f,Dd);Ab(f,function(a){a.r-=l})}Ch(f,m/2,g/2,d?1:1/Math.max(2*f.r/m,2*f.r/g));return a}var b=B.layout.hierarchy().sort(si),e=0,c=[1,1],d;a.size=function(b){if(!arguments.length)return c;c=b;return a};a.radius=function(b){if(!arguments.length)return d;d=null==b||"function"===typeof b?b:+b;
return a};a.padding=function(b){if(!arguments.length)return e;e=+b;return a};return Wb(a,b)};B.layout.tree=function(){function a(a,l){a=f.call(this,a,l);l=a[0];var k=b(l);Ab(k,e);k.parent.m=-k.z;Nc(k,c);if(h)Nc(l,d);else{var x=l,n=l,q=l;Nc(l,function(a){a.x<x.x&&(x=a);a.x>n.x&&(n=a);a.depth>q.depth&&(q=a)});var D=m(x,n)/2-x.x,p=g[0]/(n.x+m(n,x)/2+D),t=g[1]/(q.depth||1);Nc(l,function(a){a.x=(a.x+D)*p;a.y=a.depth*t})}return a}function b(a){a={A:null,children:[a]};for(var b=[a],e;null!=(e=b.pop());)for(var c=
e.children,d,f=0,m=c.length;f<m;++f)b.push((c[f]=d={_:c[f],parent:e,children:(d=c[f].children)&&d.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:f}).a=d);return a.children[0]}function e(a){var b=a.children,e=a.parent.children,c=a.i?e[a.i-1]:null;if(b.length){for(var d=0,f=0,g=a.children,h=g.length,l;0<=--h;)l=g[h],l.z+=d,l.m+=d,d+=l.s+(f+=l.c);b=(b[0].z+b[b.length-1].z)/2;c?(a.z=c.z+m(a._,c._),a.m=a.z-b):a.z=b}else c&&(a.z=c.z+m(a._,c._));b=a.parent;e=a.parent.A||e[0];if(c){f=d=a;g=d.parent.children[0];
h=d.m;l=f.m;for(var k=c.m,x=g.m,n;c=qg(c),d=He(d),c&&d;){g=He(g);f=qg(f);f.a=a;n=c.z+k-d.z-h+m(c._,d._);if(0<n){var q=c.a.parent===a.parent?c.a:e,D=a,p=n,t=p/(D.i-q.i);D.c-=t;D.s+=p;q.c+=t;D.z+=p;D.m+=p;h+=n;l+=n}k+=c.m;h+=d.m;x+=g.m;l+=f.m}c&&!qg(f)&&(f.t=c,f.m+=k-l);d&&!He(g)&&(g.t=d,g.m+=h-x,e=a)}b.A=e}function c(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function d(a){a.x*=g[0];a.y=a.depth*g[1]}var f=B.layout.hierarchy().sort(null).value(null),m=Dh,g=[1,1],h=null;a.separation=function(b){if(!arguments.length)return m;
m=b;return a};a.size=function(b){if(!arguments.length)return h?null:g;h=null==(g=b)?d:null;return a};a.nodeSize=function(b){if(!arguments.length)return h?g:null;h=null==(g=b)?null:d;return a};return Wb(a,f)};B.layout.cluster=function(){function a(a,f){a=b.call(this,a,f);var m=a[0],g,h=0;Ab(m,function(a){var b=a.children;b&&b.length?(a.x=rg(b),a.y=Hi(b)):(a.x=g?h+=e(a,g):0,a.y=0,g=a)});f=sg(m);var l=Ie(m),k=f.x-e(f,l)/2,x=l.x+e(l,f)/2;Ab(m,d?function(a){a.x=(a.x-m.x)*c[0];a.y=(m.y-a.y)*c[1]}:function(a){a.x=
(a.x-k)/(x-k)*c[0];a.y=(1-(m.y?a.y/m.y:1))*c[1]});return a}var b=B.layout.hierarchy().sort(null).value(null),e=Dh,c=[1,1],d=!1;a.separation=function(b){if(!arguments.length)return e;e=b;return a};a.size=function(b){if(!arguments.length)return d?null:c;d=null==(c=b);return a};a.nodeSize=function(b){if(!arguments.length)return d?c:null;d=null!=(c=b);return a};return Wb(a,b)};B.layout.treemap=function(){function a(a,b){for(var e=-1,c=a.length,d,f;++e<c;)f=(d=a[e]).value*(0>b?0:b),d.area=isNaN(f)||0>=
f?0:f}function b(e){var d=e.children;if(d&&d.length){var f=l(e),m=[],g=d.slice(),h=Infinity,k,x="slice"===n?f.dx:"dice"===n?f.dy:"slice-dice"===n?e.depth&1?f.dy:f.dx:Math.min(f.dx,f.dy);a(g,f.dx*f.dy/e.value);for(m.area=0;0<(e=g.length);){m.push(e=g[e-1]);m.area+=e.area;if(!(e="squarify"!==n)){e=x;for(var D=m.area,p=0,t=Infinity,H=-1,r=m.length;++H<r;)if(k=m[H].area)k<t&&(t=k),k>p&&(p=k);D*=D;e*=e;e=(k=D?Math.max(e*p*q/D,D/(e*t*q)):Infinity)<=h}e?(g.pop(),h=k):(m.area-=m.pop().area,c(m,x,f,!1),x=
Math.min(f.dx,f.dy),m.length=m.area=0,h=Infinity)}m.length&&(c(m,x,f,!0),m.length=m.area=0);d.forEach(b)}}function e(b){var d=b.children;if(d&&d.length){var f=l(b),m=d.slice(),g=[];a(m,f.dx*f.dy/b.value);for(g.area=0;b=m.pop();)g.push(b),g.area+=b.area,null!=b.z&&(c(g,b.z?f.dx:f.dy,f,!m.length),g.length=g.area=0);d.forEach(e)}}function c(a,b,e,c){var d=-1,f=a.length,g=e.x,h=e.y,l=b?m(a.area/b):0;if(b==e.dx){if(c||l>e.dy)l=e.dy;for(;++d<f;){var k=a[d];k.x=g;k.y=h;k.dy=l;g+=k.dx=Math.min(e.x+e.dx-g,
l?m(k.area/l):0)}k.z=!0;k.dx+=e.x+e.dx-g;e.y+=l;e.dy-=l}else{if(c||l>e.dx)l=e.dx;for(;++d<f;)k=a[d],k.x=g,k.y=h,k.dx=l,h+=k.dy=Math.min(e.y+e.dy-h,l?m(k.area/l):0);k.z=!1;k.dy+=e.y+e.dy-h;e.x+=l;e.dx-=l}}function d(c){c=x||f(c);var d=c[0];d.x=0;d.y=0;d.dx=g[0];d.dy=g[1];x&&f.revalue(d);a([d],d.dx*d.dy/d.value);(x?e:b)(d);k&&(x=c);return c}var f=B.layout.hierarchy(),m=Math.round,g=[1,1],h=null,l=sf,k=!1,x,n="squarify",q=.5*(1+Math.sqrt(5));d.size=function(a){if(!arguments.length)return g;g=a;return d};
d.padding=function(a){function b(b){var e=a.call(d,b,b.depth);return null==e?sf(b):tg(b,"number"===typeof e?[e,e,e,e]:e)}function e(b){return tg(b,a)}if(!arguments.length)return h;var c;l=null==(h=a)?sf:"function"===(c=typeof a)?b:"number"===c?(a=[a,a,a,a],e):e;return d};d.round=function(a){if(!arguments.length)return m!=Number;m=a?Math.round:Number;return d};d.sticky=function(a){if(!arguments.length)return k;k=a;x=null;return d};d.ratio=function(a){if(!arguments.length)return q;q=a;return d};d.mode=
function(a){if(!arguments.length)return n;n=a+"";return d};return Wb(d,f)};B.random={normal:function(a,b){var e=arguments.length;2>e&&(b=1);1>e&&(a=0);return function(){do{var e=2*Math.random()-1;var c=2*Math.random()-1;c=e*e+c*c}while(!c||1<c);return a+b*e*Math.sqrt(-2*Math.log(c)/c)}},logNormal:function(){var a=B.random.normal.apply(B,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=B.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=
0,e=0;e<a;e++)b+=Math.random();return b}}};B.scale={};var Eh={floor:Ka,ceil:Ka};B.scale.linear=function(){return uf([0,1],[0,1],Xb,!1)};var Hh={s:1,g:1,p:1,r:1,e:1};B.scale.log=function(){return Fd(B.scale.linear().domain([0,1]),10,!0,[1,10])};var Ih=B.format(".0e"),Ii={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};B.scale.pow=function(){return wg(B.scale.linear(),1,[0,1])};B.scale.sqrt=function(){return B.scale.pow().exponent(.5)};B.scale.ordinal=function(){return vf([],
{t:"range",a:[[]]})};B.scale.category10=function(){return B.scale.ordinal().range(ai)};B.scale.category20=function(){return B.scale.ordinal().range(Vg)};B.scale.category20b=function(){return B.scale.ordinal().range(Of)};B.scale.category20c=function(){return B.scale.ordinal().range(bi)};var ai=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(qd),Vg=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,
16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(qd),Of=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(qd),bi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(qd);B.scale.quantile=function(){return wf([],[])};B.scale.quantize=
function(){return xf(0,1,[0,1])};B.scale.threshold=function(){return yf([.5],[0,1])};B.scale.identity=function(){return xg([0,1])};B.svg={};B.svg.arc=function(){function a(){var a=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+c.apply(this,arguments)),k=m.apply(this,arguments)-Ga,x=g.apply(this,arguments)-Ga,n=Math.abs(x-k),q=k>x?0:1;if(l<a){var D=l;l=a;a=D}if(n>=Th)return b(l,q)+(a?b(a,1-q):"")+"Z";var p,t=D=0;n=[];if(p=(+h.apply(this,arguments)||0)/2){var H=f===ge?Math.sqrt(a*a+l*l):+f.apply(this,
arguments);q||(t*=-1);l&&(t=xa(H/l*Math.sin(p)));a&&(D=xa(H/a*Math.sin(p)))}if(l){H=l*Math.cos(k+t);p=l*Math.sin(k+t);var r=l*Math.cos(x-t);var v=l*Math.sin(x-t);var y=Math.abs(x-k-2*t)<=ia?0:1;t&&Af(H,p,r,v)===q^y&&(r=(k+x)/2,H=l*Math.cos(r),p=l*Math.sin(r),r=v=null)}else H=p=0;if(a){t=a*Math.cos(x-D);var w=a*Math.sin(x-D);var z=a*Math.cos(k+D);var N=a*Math.sin(k+D);var A=Math.abs(k-x+2*D)<=ia?0:1;D&&Af(t,w,z,N)===1-q^A&&(z=(k+x)/2,t=a*Math.cos(z),w=a*Math.sin(z),z=N=null)}else t=w=0;if(.001<(D=
Math.min(Math.abs(l-a)/2,+d.apply(this,arguments)))){A=a<l^q?0:1;y=null==z?[t,w]:null==r?[H,p]:me([H,p],[z,N],[r,v],[t,w]);k=H-y[0];x=p-y[1];var C=r-y[0],F=v-y[1];k=1/Math.sin(Math.acos((k*C+x*F)/(Math.sqrt(k*k+x*x)*Math.sqrt(C*C+F*F)))/2);y=Math.sqrt(y[0]*y[0]+y[1]*y[1]);null!=r?(x=Math.min(D,(l-y)/(k+1)),C=Le(null==z?[t,w]:[z,N],[H,p],l,x,q),F=Le([r,v],[t,w],l,x,q),D===x?n.push("M",C[0],"A",x,",",x," 0 0,",A," ",C[1],"A",l,",",l," 0 ",1-q^Af(C[1][0],C[1][1],F[1][0],F[1][1]),",",q," ",F[1],"A",x,
",",x," 0 0,",A," ",F[0]):n.push("M",C[0],"A",x,",",x," 0 1,",A," ",F[0])):n.push("M",H,",",p);null!=z?(l=Math.min(D,(a-y)/(k-1)),z=Le([H,p],[z,N],a,-l,q),r=Le([t,w],null==r?[H,p]:[r,v],a,-l,q),D===l?n.push("L",r[0],"A",l,",",l," 0 0,",A," ",r[1],"A",a,",",a," 0 ",q^Af(r[1][0],r[1][1],z[1][0],z[1][1]),",",1-q," ",z[1],"A",l,",",l," 0 0,",A," ",z[0]):n.push("L",r[0],"A",l,",",l," 0 0,",A," ",z[0])):n.push("L",t,",",w)}else n.push("M",H,",",p),null!=r&&n.push("A",l,",",l," 0 ",y,",",q," ",r,",",v),
n.push("L",t,",",w),null!=z&&n.push("A",a,",",a," 0 ",A,",",1-q," ",z,",",N);n.push("Z");return n.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var e=Jh,c=Kh,d=yg,f=ge,m=zf,g=zg,h=Lh;a.innerRadius=function(b){if(!arguments.length)return e;e=sa(b);return a};a.outerRadius=function(b){if(!arguments.length)return c;c=sa(b);return a};a.cornerRadius=function(b){if(!arguments.length)return d;d=sa(b);return a};a.padRadius=function(b){if(!arguments.length)return f;
f=b==ge?ge:sa(b);return a};a.startAngle=function(b){if(!arguments.length)return m;m=sa(b);return a};a.endAngle=function(b){if(!arguments.length)return g;g=sa(b);return a};a.padAngle=function(b){if(!arguments.length)return h;h=sa(b);return a};a.centroid=function(){var a=(+e.apply(this,arguments)+ +c.apply(this,arguments))/2,b=(+m.apply(this,arguments)+ +g.apply(this,arguments))/2-Ga;return[Math.cos(b)*a,Math.sin(b)*a]};return a};var ge="auto";B.svg.line=function(){return Ag(Ka)};var pb=B.map({linear:wb,
"linear-closed":function(a){return wb(a)+"Z"},step:function(a){for(var b=0,e=a.length,c=a[0],d=[c[0],",",c[1]];++b<e;)d.push("H",(c[0]+(c=a[b])[0])/2,"V",c[1]);1<e&&d.push("H",c[0]);return d.join("")},"step-before":Bf,"step-after":Cf,basis:Bg,"basis-open":function(a){if(4>a.length)return wb(a);for(var b=[],e=-1,c=a.length,d,f=[0],m=[0];3>++e;)d=a[e],f.push(d[0]),m.push(d[1]);b.push(Hb(Ec,f)+","+Hb(Ec,m));for(--e;++e<c;)d=a[e],f.shift(),f.push(d[0]),m.shift(),m.push(d[1]),Ef(b,f,m);return b.join("")},
"basis-closed":function(a){for(var b,e=-1,c=a.length,d=c+4,f,m=[],g=[];4>++e;)f=a[e%c],m.push(f[0]),g.push(f[1]);b=[Hb(Ec,m),",",Hb(Ec,g)];for(--e;++e<d;)f=a[e%c],m.shift(),m.push(f[0]),g.shift(),g.push(f[1]),Ef(b,m,g);return b.join("")},bundle:function(a,b){var e=a.length-1;if(e)for(var c=a[0][0],d=a[0][1],f=a[e][0]-c,m=a[e][1]-d,g=-1,h,l;++g<=e;)h=a[g],l=g/e,h[0]=b*h[0]+(1-b)*(c+l*f),h[1]=b*h[1]+(1-b)*(d+l*m);return Bg(a)},cardinal:function(a,b){return 3>a.length?wb(a):a[0]+Me(a,Df(a,b))},"cardinal-open":function(a,
b){return 4>a.length?wb(a):a[1]+Me(a.slice(1,-1),Df(a,b))},"cardinal-closed":function(a,b){return 3>a.length?wb(a):a[0]+Me((a.push(a[0]),a),Df([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=wb(a);else{var b=a[0],e=[],c;var d=0;var f=a.length-1;var m=[];var g=a[1];for(c=m[0]=Ne(a[0],g);++d<f;)m[d]=(c+(c=Ne(g,g=a[d+1])))/2;m[d]=c;for(var h=-1,l=a.length-1;++h<l;)d=Ne(a[h],a[h+1]),1E-6>ea(d)?m[h]=m[h+1]=0:(f=m[h]/d,g=m[h+1]/d,c=f*f+g*g,9<c&&(c=3*d/Math.sqrt(c),m[h]=c*f,m[h+
1]=c*g));for(h=-1;++h<=l;)c=(a[Math.min(l,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+m[h]*m[h])),e.push([c||0,m[h]*c||0]);a=b+Me(a,e)}return a}});pb.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Mh=[0,2/3,1/3,0],Nh=[0,1/3,2/3,0],Ec=[0,1/6,2/3,1/6];B.svg.line.radial=function(){var a=Ag(Ff);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Bf.reverse=Cf;Cf.reverse=Bf;B.svg.area=function(){return Cg(Ka)};B.svg.area.radial=function(){var a=Cg(Ff);a.radius=a.x;delete a.x;a.innerRadius=
a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};B.svg.chord=function(){function a(a,f){var m=b(this,c,a,f);a=b(this,d,a,f);return"M"+m.p0+e(m.r,m.p1,m.a1-m.a0)+(m.a0==a.a0&&m.a1==a.a1?"Q 0,0 "+m.p0:"Q 0,0 "+a.p0+e(a.r,a.p1,a.a1-a.a0)+("Q 0,0 "+m.p0))+"Z"}function b(a,b,e,c){var d=b.call(a,e,c);b=f.call(a,d,c);e=m.call(a,d,c)-Ga;a=g.call(a,d,c)-Ga;return{r:b,a0:e,a1:a,p0:[b*Math.cos(e),b*Math.sin(e)],p1:[b*Math.cos(a),
b*Math.sin(a)]}}function e(a,b,e){return"A"+a+","+a+" 0 "+ +(e>ia)+",1 "+b}var c=yc,d=$c,f=Gd,m=zf,g=zg;a.radius=function(b){if(!arguments.length)return f;f=sa(b);return a};a.source=function(b){if(!arguments.length)return c;c=sa(b);return a};a.target=function(b){if(!arguments.length)return d;d=sa(b);return a};a.startAngle=function(b){if(!arguments.length)return m;m=sa(b);return a};a.endAngle=function(b){if(!arguments.length)return g;g=sa(b);return a};return a};B.svg.diagonal=function(){function a(a,
d){var f=b.call(this,a,d);a=e.call(this,a,d);d=(f.y+a.y)/2;f=[f,{x:f.x,y:d},{x:a.x,y:d},a];f=f.map(c);return"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var b=yc,e=$c,c=Oh;a.source=function(e){if(!arguments.length)return b;b=sa(e);return a};a.target=function(b){if(!arguments.length)return e;e=sa(b);return a};a.projection=function(b){if(!arguments.length)return c;c=b;return a};return a};B.svg.diagonal.radial=function(){var a=B.svg.diagonal(),b=Oh,e=a.projection;a.projection=function(a){return arguments.length?
e(Ji(b=a)):b};return a};B.svg.symbol=function(){function a(a,c){return(ci.get(b.call(this,a,c))||Eg)(e.call(this,a,c))}var b=Ki,e=Dg;a.type=function(e){if(!arguments.length)return b;b=sa(e);return a};a.size=function(b){if(!arguments.length)return e;e=sa(b);return a};return a};var ci=B.map({circle:Eg,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*Wg));var b=a*Wg;return"M0,"+
-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Pf);var b=a*Pf/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Pf);var b=a*Pf/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});B.svg.symbolTypes=ci.keys();var Pf=Math.sqrt(3),Wg=Math.tan(30*ha),Ma=[],Mg=0,Hd,Fc;Ma.call=ua.call;Ma.empty=ua.empty;Ma.node=ua.node;Ma.size=ua.size;B.transition=
function(a){return arguments.length?Hd?a.transition():a:Sh.transition()};B.transition.prototype=Ma;Ma.select=function(a){var b=this.id,c=this.namespace,d=[],f,m,g;a=e(a);for(var h=-1,l=this.length;++h<l;){d.push(f=[]);for(var k=this[h],x=-1,n=k.length;++x<n;)(g=k[x])&&(m=a.call(g,g.__data__,x,h))?("__data__"in g&&(m.__data__=g.__data__),Z(m,x,c,b,g[c][b]),f.push(m)):f.push(null)}return ee(d,c,b)};Ma.selectAll=function(a){var b=this.id,e=this.namespace,c=[],d,f;a=m(a);for(var g=-1,h=this.length;++g<
h;)for(var l=this[g],k=-1,x=l.length;++k<x;)if(d=l[k]){var n=d[e][b];var q=a.call(d,d.__data__,k,g);c.push(d=[]);for(var D=-1,p=q.length;++D<p;)(f=q[D])&&Z(f,D,e,b,n),d.push(f)}return ee(c,e,b)};Ma.filter=function(a){var b=[],e,c;"function"!==typeof a&&(a=R(a));for(var d=0,f=this.length;d<f;d++){b.push(e=[]);var m=this[d];for(var g=0,h=m.length;g<h;g++)(c=m[g])&&a.call(c,c.__data__,g,d)&&e.push(c)}return ee(b,this.namespace,this.id)};Ma.tween=function(a,b){var e=this.id,c=this.namespace;return 2>
arguments.length?this.node()[c][e].tween.get(a):M(this,null==b?function(b){b[c][e].tween.remove(a)}:function(d){d[c][e].tween.set(a,b)})};Ma.attr=function(a,b){function e(){this.removeAttribute(g)}function c(){this.removeAttributeNS(g.space,g.local)}function d(a){return null==a?e:(a+="",function(){var b=this.getAttribute(g),e;return b!==a&&(e=m(b,a),function(a){this.setAttribute(g,e(a))})})}function f(a){return null==a?c:(a+="",function(){var b=this.getAttributeNS(g.space,g.local),e;return b!==a&&
(e=m(b,a),function(a){this.setAttributeNS(g.space,g.local,e(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var m="transform"==a?qh:Xb,g=B.ns.qualify(a);return Fg(this,"attr."+a,b,g.local?f:d)};Ma.attrTween=function(a,b){function e(a,e){var c=b.call(this,a,e,this.getAttribute(d));return c&&function(a){this.setAttribute(d,c(a))}}function c(a,e){var c=b.call(this,a,e,this.getAttributeNS(d.space,d.local));return c&&function(a){this.setAttributeNS(d.space,d.local,c(a))}}var d=
B.ns.qualify(a);return this.tween("attr."+a,d.local?c:e)};Ma.style=function(a,b,e){function c(){this.style.removeProperty(a)}var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b="");for(e in a)this.style(e,a[e],b);return this}e=""}return Fg(this,"style."+a,b,function(b){return null==b?c:(b+="",function(){var c=hb.getComputedStyle(this,null).getPropertyValue(a),d;return c!==b&&(d=Xb(c,b),function(b){this.style.setProperty(a,d(b),e)})})})};Ma.styleTween=function(a,b,e){3>arguments.length&&
(e="");return this.tween("style."+a,function(c,d){var f=b.call(this,c,d,hb.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),e)}})};Ma.text=function(a){return Fg(this,"text",a,Li)};Ma.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;2>this[a].count&&(b=this.parentNode)&&b.removeChild(this)})};Ma.ease=function(a){var b=this.id,e=this.namespace;if(1>arguments.length)return this.node()[e][b].ease;"function"!==
typeof a&&(a=B.ease.apply(B,arguments));return M(this,function(c){c[e][b].ease=a})};Ma.delay=function(a){var b=this.id,e=this.namespace;return 1>arguments.length?this.node()[e][b].delay:M(this,"function"===typeof a?function(c,d,f){c[e][b].delay=+a.call(c,c.__data__,d,f)}:(a=+a,function(c){c[e][b].delay=a}))};Ma.duration=function(a){var b=this.id,e=this.namespace;return 1>arguments.length?this.node()[e][b].duration:M(this,"function"===typeof a?function(c,d,f){c[e][b].duration=Math.max(1,a.call(c,c.__data__,
d,f))}:(a=Math.max(1,a),function(c){c[e][b].duration=a}))};Ma.each=function(a,b){var e=this.id,c=this.namespace;if(2>arguments.length){var d=Fc,f=Hd;Hd=e;M(this,function(b,d,f){Fc=b[c][e];a.call(b,b.__data__,d,f)});Fc=d;Hd=f}else M(this,function(d){d=d[c][e];(d.event||(d.event=B.dispatch("start","end","interrupt"))).on(a,b)});return this};Ma.transition=function(){for(var a=this.id,b=++Mg,e=this.namespace,c=[],d,f,m,g,h=0,l=this.length;h<l;h++){c.push(d=[]);f=this[h];for(var k=0,x=f.length;k<x;k++){if(m=
f[k])g=m[e][a],Z(m,k,e,b,{time:g.time,ease:g.ease,delay:g.delay+g.duration,duration:g.duration});d.push(m)}}return ee(c,e,b)};B.svg.axis=function(){function a(a){a.each(function(){var a=B.select(this),l=this.__chart__||b,k=this.__chart__=b.copy(),x=null==g?k.ticks?k.ticks.apply(k,m):k.domain():g,n=null==h?k.tickFormat?k.tickFormat.apply(k,m):Ka:h,q=a.selectAll(".tick").data(x,k);x=q.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6);var D=B.transition(q.exit()).style("opacity",
1E-6).remove(),p=B.transition(q.order()).style("opacity",1),t=Math.max(c,0)+f,H=tf(k);a=a.selectAll(".domain").data([0]);a=(a.enter().append("path").attr("class","domain"),B.transition(a));x.append("line");x.append("text");var r=x.select("line"),v=p.select("line");q=q.select("text").text(n);var y=x.select("text"),w=p.select("text"),z="top"===e||"left"===e?-1:1;if("bottom"===e||"top"===e){n=Gf;var N="x";var A="y";var C="x2";var F="y2";q.attr("dy",0>z?"0em":".71em").style("text-anchor","middle");a.attr("d",
"M"+H[0]+","+z*d+"V0H"+H[1]+"V"+z*d)}else n=Qh,N="y",A="x",C="y2",F="x2",q.attr("dy",".32em").style("text-anchor",0>z?"end":"start"),a.attr("d","M"+z*d+","+H[0]+"H0V"+H[1]+"H"+z*d);r.attr(F,z*c);y.attr(A,z*t);v.attr(C,0).attr(F,z*c);w.attr(N,0).attr(A,z*t);if(k.rangeBand){var aa=k,R=aa.rangeBand()/2;l=k=function(a){return aa(a)+R}}else l.rangeBand?l=k:D.call(n,k,l);x.call(n,l,k);p.call(n,k,k)})}var b=B.scale.linear(),e=jd,c=6,d=6,f=3,m=[10],g=null,h;a.scale=function(e){if(!arguments.length)return b;
b=e;return a};a.orient=function(b){if(!arguments.length)return e;e=b in di?b+"":jd;return a};a.ticks=function(){if(!arguments.length)return m;m=arguments;return a};a.tickValues=function(b){if(!arguments.length)return g;g=b;return a};a.tickFormat=function(b){if(!arguments.length)return h;h=b;return a};a.tickSize=function(b){var e=arguments.length;if(!e)return c;c=+b;d=+arguments[e-1];return a};a.innerTickSize=function(b){if(!arguments.length)return c;c=+b;return a};a.outerTickSize=function(b){if(!arguments.length)return d;
d=+b;return a};a.tickPadding=function(b){if(!arguments.length)return f;f=+b;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var jd="bottom",di={top:1,right:1,bottom:1,left:1};B.svg.brush=function(){function a(f){f.each(function(){var f=B.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",d).on("touchstart.brush",d),h=f.selectAll(".background").data([0]);h.enter().append("rect").attr("class","background").style("visibility",
"hidden").style("cursor","crosshair");f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var l=f.selectAll(".resize").data(D,Ka);l.exit().remove();l.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return ei[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");l.style("display",
a.empty()?"none":null);f=B.transition(f);h=B.transition(h);m&&(l=tf(m),h.attr("x",l[0]).attr("width",l[1]-l[0]),e(f));g&&(l=tf(g),h.attr("y",l[0]).attr("height",l[1]-l[0]),c(f));b(f)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+h[+/e$/.test(a)]+","+l[+/^s/.test(a)]+")"})}function e(a){a.select(".extent").attr("x",h[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1]-h[0])}function c(a){a.select(".extent").attr("y",l[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",
l[1]-l[0])}function d(){function d(){var a=B.mouse(t),d=!1;E&&(a[0]+=E[0],a[1]+=E[1]);A||(B.event.altKey?(C||(C=[(h[0]+h[1])/2,(l[0]+l[1])/2]),F[0]=h[+(a[0]<C[0])],F[1]=l[+(a[1]<C[1])]):C=null);w&&D(a,m,0)&&(e(v),d=!0);z&&D(a,g,1)&&(c(v),d=!0);d&&(b(v),r({type:"brush",mode:A?"move":"resize"}))}function D(a,b,e){var c=tf(b);b=c[0];var d=c[1];c=F[e];var f=e?l:h,m=f[1]-f[0];A&&(b-=c,d-=m+c);a=(e?q:n)?Math.max(b,Math.min(d,a[e])):a[e];A?b=(a+=c)+m:(C&&(c=Math.max(b,Math.min(d,2*C[e]-a))),c<a?(b=a,a=c):
b=c);if(f[0]!=a||f[1]!=b)return e?x=null:k=null,f[0]=a,f[1]=b,!0}function p(){d();v.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);B.select("body").style("cursor",null);aa.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);N();r({type:"brushend"})}var t=this,H=B.select(B.event.target),r=f.of(t,arguments),v=B.select(t),y=H.datum(),w=!/^(n|s)$/.test(y)&&m,
z=!/^(e|w)$/.test(y)&&g,A=H.classed("extent"),N=La(),C,F=B.mouse(t),aa=B.select(hb).on("keydown.brush",function(){32==B.event.keyCode&&(A||(C=null,F[0]-=h[1],F[1]-=l[1],A=2),G())}).on("keyup.brush",function(){32==B.event.keyCode&&2==A&&(F[0]+=h[1],F[1]+=l[1],A=0,G())});if(B.event.changedTouches)aa.on("touchmove.brush",d).on("touchend.brush",p);else aa.on("mousemove.brush",d).on("mouseup.brush",p);v.interrupt().selectAll("*").interrupt();if(A)F[0]=h[0]-F[0],F[1]=l[0]-F[1];else if(y){var R=+/w$/.test(y);
y=+/^n/.test(y);var E=[h[1-R]-F[0],l[1-y]-F[1]];F[0]=h[R];F[1]=l[y]}else B.event.altKey&&(C=F.slice());v.style("pointer-events","none").selectAll(".resize").style("display",null);B.select("body").style("cursor",H.style("cursor"));r({type:"brushstart"});d()}var f=F(a,"brushstart","brush","brushend"),m=null,g=null,h=[0,0],l=[0,0],k,x,n=!0,q=!0,D=Qf[0];a.event=function(a){a.each(function(){var a=f.of(this,arguments),b={x:h,y:l,i:k,j:x},e=this.__chart__||b;this.__chart__=b;Hd?B.select(this).transition().each("start.brush",
function(){k=e.i;x=e.j;h=e.x;l=e.y;a({type:"brushstart"})}).tween("brush:brush",function(){var e=we(h,b.x),c=we(l,b.y);k=x=null;return function(d){h=b.x=e(d);l=b.y=c(d);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){k=b.i;x=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(b){if(!arguments.length)return m;m=b;D=Qf[!m<<1|!g];return a};a.y=function(b){if(!arguments.length)return g;
g=b;D=Qf[!m<<1|!g];return a};a.clamp=function(b){if(!arguments.length)return m&&g?[n,q]:m?n:g?q:null;m&&g?(n=!!b[0],q=!!b[1]):m?n=!!b:g&&(q=!!b);return a};a.extent=function(b){if(!arguments.length){if(m)if(k){var e=k[0];var c=k[1]}else if(e=h[0],c=h[1],m.invert&&(e=m.invert(e),c=m.invert(c)),c<e){var d=e;e=c;c=d}if(g)if(x){var f=x[0];var n=x[1]}else f=l[0],n=l[1],g.invert&&(f=g.invert(f),n=g.invert(n)),n<f&&(d=f,f=n,n=d);return m&&g?[[e,f],[c,n]]:m?[e,c]:g&&[f,n]}m&&(e=b[0],c=b[1],g&&(e=e[0],c=c[0]),
k=[e,c],m.invert&&(e=m(e),c=m(c)),c<e&&(d=e,e=c,c=d),e!=h[0]||c!=h[1])&&(h=[e,c]);g&&(f=b[0],n=b[1],m&&(f=f[1],n=n[1]),x=[f,n],g.invert&&(f=g(f),n=g(n)),n<f&&(d=f,f=n,n=d),f!=l[0]||n!=l[1])&&(l=[f,n]);return a};a.clear=function(){a.empty()||(h=[0,0],l=[0,0],k=x=null);return a};a.empty=function(){return!!m&&h[0]==h[1]||!!g&&l[0]==l[1]};return B.rebind(a,f,"on")};var ei={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Qf=["n e s w nw ne se sw".split(" "),
["e","w"],["n","s"],[]],Ve=U.format=Pg.timeFormat,fi=Ve.utc,Xg=fi("%Y-%m-%dT%H:%M:%S.%LZ");Ve.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Gg:Xg;Gg.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Gg.toString=Xg.toString;U.second=Wa(function(a){return new eb(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});U.seconds=U.second.range;U.seconds.utc=U.second.utc.range;U.minute=Wa(function(a){return new eb(6E4*
Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});U.minutes=U.minute.range;U.minutes.utc=U.minute.utc.range;U.hour=Wa(function(a){var b=a.getTimezoneOffset()/60;return new eb(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});U.hours=U.hour.range;U.hours.utc=U.hour.utc.range;U.month=Wa(function(a){a=U.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+
b)},function(a){return a.getMonth()});U.months=U.month.range;U.months.utc=U.month.utc.range;var hd=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Yg=[[U.second,1],[U.second,5],[U.second,15],[U.second,30],[U.minute,1],[U.minute,5],[U.minute,15],[U.minute,30],[U.hour,1],[U.hour,3],[U.hour,6],[U.hour,12],[U.day,1],[U.day,2],[U.week,1],[U.month,1],[U.month,3],[U.year,1]],gi=Ve.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],
["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",uc]]),Mi={range:function(a,b,e){return B.range(Math.ceil(a/e)*e,+b,e).map(id)},floor:Ka,ceil:Ka};Yg.year=U.year;U.scale=function(){return Hg(B.scale.linear(),Yg,gi)};var kd=Yg.map(function(a){return[a[0].utc,a[1]]}),Zg=fi.multi([[".%L",function(a){return a.getUTCMilliseconds()}],
[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",uc]]);kd.year=U.year.utc;U.scale.utc=function(){return Hg(B.scale.linear(),kd,Zg)};B.text=tc(function(a){return a.responseText});B.json=function(a,b){return Rd(a,"application/json",Ig,b)};B.html=function(a,
b){return Rd(a,"text/html",db,b)};B.xml=tc(function(a){return a.responseXML});"function"===typeof define&&define.amd?define(B):"object"===typeof module&&module.exports&&(module.exports=B);this.d3=B}();(function(k){function h(a){var b=this.internal=new c(this);b.loadConfig(a);b.beforeInit(a);b.init();b.afterInit(a);(function D(a,b,e){Object.keys(a).forEach(function(c){b[c]=a[c].bind(e);0<Object.keys(a[c]).length&&D(a[c],b[c],e)})})(d,this,this)}function c(a){this.d3=k.d3?k.d3:"undefined"!==typeof require?require("d3"):void 0;this.api=a;this.config=this.getDefaultConfig();this.data={};this.cache={};this.axes={}}function g(a){this.owner=a}function a(a,b){function e(a,b){a.attr("transform",function(a){return"translate("+
Math.ceil(b(a)+r)+", 0)"})}function c(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})}function d(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function f(a){var b=[];if(a.ticks)return a.ticks.apply(a,t);var e=a.domain();for(a=Math.ceil(e[0]);a<e[1];a++)b.push(a);0<b.length&&0<b[0]&&b.unshift(b[0]-(b[1]-b[0]));return b}function m(){var a=k.copy();if(b.isCategory){var e=k.domain();a.domain([e[0],e[1]-1])}return a}function g(a){a=p?p(a):a;return"undefined"!==typeof a?
a:""}function h(a){if(I)return I;var b={h:11.5,w:5.5};a.select("text").text(g).each(function(a){var e=this.getBoundingClientRect(),c=g(a);a=e.height;e=c?e.width/c.length:void 0;a&&e&&(b.h=a,b.w=e)}).text("");return I=b}function l(x){x.each(function(){function x(a,e){function c(a,b){f=void 0;for(var g=1;g<b.length;g++)if(" "===b.charAt(g)&&(f=g),d=b.substr(0,g+1),m=I.w*d.length,e<m)return c(a.concat(b.substr(0,f?f:g)),b.slice(f?f+1:g));return a.concat(b)}a=g(a);var d,f,m;if("[object Array]"===Object.prototype.toString.call(a))return a;
if(!e||0>=e)e=fa?95:b.isCategory?Math.ceil(v(z[1])-v(z[0]))-12:110;return c([],a+"")}function D(a,b){var e=I.h;0===b&&(e="left"===n||"right"===n?-(I.h/2*(ka[a.index]-1)-3):".71em");return e}function p(a){a=k(a)+(y?0:r);return aa[0]<a&&a<aa[1]?6:0}var t=l.g=a.select(this),H=this.__chart__||k,v=this.__chart__=m(),z=q?q:f(v),A=t.selectAll(".tick").data(z,v),N=A.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),C=A.exit().remove(),F=(b.withoutTransition?A:a.transition(A)).style("opacity",
1),aa=k.rangeExtent?k.rangeExtent():d(k.range());var R=t.selectAll(".domain").data([0]);var E=(R.enter().append("path").attr("class","domain"),b.withoutTransition?R:a.transition(R));N.append("line");N.append("text");var G=N.select("line"),X=F.select("line"),Aa=N.select("text"),u=F.select("text");if(b.isCategory){r=Math.ceil((v(1)-v(0))/2);R=y?0:r;var M=y?r:0}else r=R=0;var I=h(t.select(".tick")),ka=[];t=Math.max(6,0)+3;var fa="left"===n||"right"===n;A=A.select("text");var ca=A.selectAll("tspan").data(function(a,
e){a=b.tickMultiline?x(a,b.tickWidth):[].concat(g(a));ka[e]=a.length;return a.map(function(a){return{index:e,splitted:a}})});ca.enter().append("tspan");ca.exit().remove();ca.text(function(a){return a.splitted});var ba=b.tickTextRotate;switch(n){case "bottom":var S=e;G.attr("y2",6);Aa.attr("y",t);X.attr("x1",R).attr("x2",R).attr("y2",p);u.attr("x",0).attr("y",ba?11.5-ba/15*2.5*(0<ba?1:-1):t).style("text-anchor",ba?0<ba?"start":"end":"middle").attr("transform",ba?"rotate("+ba+")":"");ca.attr("x",0).attr("dy",
D).attr("dx",ba?8*Math.sin(ba/180*Math.PI):0);E.attr("d","M"+aa[0]+","+w+"V0H"+aa[1]+"V"+w);break;case "top":S=e;G.attr("y2",-6);Aa.attr("y",-t);X.attr("x2",0).attr("y2",-6);u.attr("x",0).attr("y",-t);A.style("text-anchor","middle");ca.attr("x",0).attr("dy","0em");E.attr("d","M"+aa[0]+","+-w+"V0H"+aa[1]+"V"+-w);break;case "left":S=c;G.attr("x2",-6);Aa.attr("x",-t);X.attr("x2",-6).attr("y1",M).attr("y2",M);u.attr("x",-t).attr("y",r);A.style("text-anchor","end");ca.attr("x",-t).attr("dy",D);E.attr("d",
"M"+-w+","+aa[0]+"H0V"+aa[1]+"H"+-w);break;case "right":S=c,G.attr("x2",6),Aa.attr("x",t),X.attr("x2",6).attr("y2",0),u.attr("x",t).attr("y",0),A.style("text-anchor","start"),ca.attr("x",t).attr("dy",D),E.attr("d","M"+w+","+aa[0]+"H0V"+aa[1]+"H"+w)}if(v.rangeBand){var oa=v,ja=oa.rangeBand()/2;H=v=function(a){return oa(a)+ja}}else H.rangeBand?H=v:C.call(S,v);N.call(S,H);F.call(S,v)})}var k=a.scale.linear(),n="bottom",q=null,p,t,r=0,v=!0,y;b=b||{};var w=b.withOuterTick?6:0;l.scale=function(a){if(!arguments.length)return k;
k=a;return l};l.orient=function(a){if(!arguments.length)return n;n=a in{top:1,right:1,bottom:1,left:1}?a+"":"bottom";return l};l.tickFormat=function(a){if(!arguments.length)return p;p=a;return l};l.tickCentered=function(a){if(!arguments.length)return y;y=a;return l};l.tickOffset=function(){return r};l.tickInterval=function(){if(b.isCategory)var a=2*r;else a=l.g.select("path.domain").node().getTotalLength()-2*w,a/=l.g.selectAll("line").size();return Infinity===a?0:a};l.ticks=function(){if(!arguments.length)return t;
t=arguments;return l};l.tickCulling=function(a){if(!arguments.length)return v;v=a;return l};l.tickValues=function(a){if("function"===typeof a)q=function(){return a(k.domain())};else{if(!arguments.length)return q;q=a}return l};return l}var f={version:"0.4.11"};f.generate=function(a){return new h(a)};f.chart={fn:h.prototype,internal:{fn:c.prototype,axis:{fn:g.prototype}}};var d=f.chart.fn;var b=f.chart.internal.fn;b.beforeInit=function(){};b.afterInit=function(){};b.init=function(){var a=this.config;
this.initParams();if(a.data_url)this.convertUrlToData(a.data_url,a.data_mimeType,a.data_headers,a.data_keys,this.initWithData);else if(a.data_json)this.initWithData(this.convertJsonToData(a.data_json,a.data_keys));else if(a.data_rows)this.initWithData(this.convertRowsToData(a.data_rows));else if(a.data_columns)this.initWithData(this.convertColumnsToData(a.data_columns));else throw Error("url or json or rows or columns is required.");};b.initParams=function(){var a=this.d3,b=this.config;this.clipId=
"c3-"+ +new Date+"-clip";this.clipIdForXAxis=this.clipId+"-xaxis";this.clipIdForYAxis=this.clipId+"-yaxis";this.clipIdForGrid=this.clipId+"-grid";this.clipIdForSubchart=this.clipId+"-subchart";this.clipPath=this.getClipPath(this.clipId);this.clipPathForXAxis=this.getClipPath(this.clipIdForXAxis);this.clipPathForYAxis=this.getClipPath(this.clipIdForYAxis);this.clipPathForGrid=this.getClipPath(this.clipIdForGrid);this.clipPathForSubchart=this.getClipPath(this.clipIdForSubchart);this.dragStart=null;
this.transiting=this.mouseover=this.cancelClick=this.flowing=this.dragging=!1;this.color=this.generateColor();this.levelColor=this.generateLevelColor();this.dataTimeFormat=b.data_xLocaltime?a.time.format:a.time.format.utc;this.axisTimeFormat=b.axis_x_localtime?a.time.format:a.time.format.utc;this.defaultAxisTimeFormat=this.axisTimeFormat.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],
["%-m/%-d",function(a){return a.getDay()&&1!==a.getDate()}],["%-m/%-d",function(a){return 1!==a.getDate()}],["%-m/%-d",function(a){return a.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]);this.hiddenTargetIds=[];this.hiddenLegendIds=[];this.focusedTargetIds=[];this.defocusedTargetIds=[];this.xOrient=b.axis_rotated?"left":"bottom";this.yOrient=b.axis_rotated?b.axis_y_inner?"top":"bottom":b.axis_y_inner?"right":"left";this.y2Orient=b.axis_rotated?b.axis_y2_inner?"bottom":"top":b.axis_y2_inner?"left":
"right";this.subXOrient=b.axis_rotated?"left":"bottom";this.isLegendRight="right"===b.legend_position;this.isLegendInset="inset"===b.legend_position;this.isLegendTop="top-left"===b.legend_inset_anchor||"top-right"===b.legend_inset_anchor;this.isLegendLeft="top-left"===b.legend_inset_anchor||"bottom-left"===b.legend_inset_anchor;this.legendItemHeight=this.legendItemWidth=this.legendStep=0;this.currentMaxTickWidths={x:0,y:0,y2:0};this.rotated_padding_left=30;this.rotated_padding_right=b.axis_rotated&&
!b.axis_x_show?0:30;this.rotated_padding_top=5;this.withoutFadeIn={};this.intervalForObserveInserted=void 0;this.axes.subx=a.selectAll([])};b.initChartElements=function(){this.initBar&&this.initBar();this.initLine&&this.initLine();this.initArc&&this.initArc();this.initGauge&&this.initGauge();this.initText&&this.initText()};b.initWithData=function(a){var b=this,e=b.d3,c=b.config,d=!0;b.axis=new g(b);b.initPie&&b.initPie();b.initBrush&&b.initBrush();b.initZoom&&b.initZoom();b.selectChart=c.bindto?"function"===
typeof c.bindto.node?c.bindto:e.select(c.bindto):e.selectAll([]);b.selectChart.empty()&&(b.selectChart=e.select(document.createElement("div")).style("opacity",0),b.observeInserted(b.selectChart),d=!1);b.selectChart.html("").classed("c3",!0);b.data.xs={};b.data.targets=b.convertDataToTargets(a);c.data_filter&&(b.data.targets=b.data.targets.filter(c.data_filter));c.data_hide&&b.addHiddenTargetIds(!0===c.data_hide?b.mapToIds(b.data.targets):c.data_hide);c.legend_hide&&b.addHiddenLegendIds(!0===c.legend_hide?
b.mapToIds(b.data.targets):c.legend_hide);b.hasType("gauge")&&(c.legend_show=!1);b.updateSizes();b.updateScales();b.x.domain(e.extent(b.getXDomain(b.data.targets)));b.y.domain(b.getYDomain(b.data.targets,"y"));b.y2.domain(b.getYDomain(b.data.targets,"y2"));b.subX.domain(b.x.domain());b.subY.domain(b.y.domain());b.subY2.domain(b.y2.domain());b.orgXDomain=b.x.domain();b.brush&&b.brush.scale(b.subX);c.zoom_enabled&&b.zoom.scale(b.x);b.svg=b.selectChart.append("svg").style("overflow","hidden").on("mouseenter",
function(){return c.onmouseover.call(b)}).on("mouseleave",function(){return c.onmouseout.call(b)});b.config.svg_classname&&b.svg.attr("class",b.config.svg_classname);a=b.svg.append("defs");b.clipChart=b.appendClip(a,b.clipId);b.clipXAxis=b.appendClip(a,b.clipIdForXAxis);b.clipYAxis=b.appendClip(a,b.clipIdForYAxis);b.clipGrid=b.appendClip(a,b.clipIdForGrid);b.clipSubchart=b.appendClip(a,b.clipIdForSubchart);b.updateSvgSize();a=b.main=b.svg.append("g").attr("transform",b.getTranslate("main"));b.initSubchart&&
b.initSubchart();b.initTooltip&&b.initTooltip();b.initLegend&&b.initLegend();b.initTitle&&b.initTitle();a.append("text").attr("class",l.text+" "+l.empty).attr("text-anchor","middle").attr("dominant-baseline","middle");b.initRegion();b.initGrid();a.append("g").attr("clip-path",b.clipPath).attr("class",l.chart);c.grid_lines_front&&b.initGridLines();b.initEventRect();b.initChartElements();a.insert("rect",c.zoom_privileged?null:"g."+l.regions).attr("class",l.zoomRect).attr("width",b.width).attr("height",
b.height).style("opacity",0).on("dblclick.zoom",null);c.axis_x_extent&&b.brush.extent(b.getDefaultExtent());b.axis.init();b.updateTargets(b.data.targets);d&&(b.updateDimension(),b.config.oninit.call(b),b.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1}));b.bindResize();b.api.element=b.selectChart.node()};b.smoothLines=function(a,b){var e=this;"grid"===b&&a.each(function(){var a=e.d3.select(this),b=a.attr("x1"),c=a.attr("x2"),d=a.attr("y1"),
f=a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(c),y1:Math.ceil(d),y2:Math.ceil(f)})})};b.updateSizes=function(){var a=this.config,b=this.legend?this.getLegendHeight():0,c=this.legend?this.getLegendWidth():0,d=this.isLegendRight||this.isLegendInset?0:b,f=this.hasArcType(),g=a.axis_rotated||f?0:this.getHorizontalAxisHeight("x"),h=a.subchart_show&&!f?a.subchart_size_height+g:0;this.currentWidth=this.getCurrentWidth();this.currentHeight=this.getCurrentHeight();this.margin=a.axis_rotated?{top:this.getHorizontalAxisHeight("y2")+
this.getCurrentPaddingTop(),right:f?0:this.getCurrentPaddingRight(),bottom:this.getHorizontalAxisHeight("y")+d+this.getCurrentPaddingBottom(),left:h+(f?0:this.getCurrentPaddingLeft())}:{top:4+this.getCurrentPaddingTop(),right:f?0:this.getCurrentPaddingRight(),bottom:g+h+d+this.getCurrentPaddingBottom(),left:f?0:this.getCurrentPaddingLeft()};this.margin2=a.axis_rotated?{top:this.margin.top,right:NaN,bottom:20+d,left:this.rotated_padding_left}:{top:this.currentHeight-h-d,right:NaN,bottom:g+d,left:this.margin.left};
this.margin3={top:0,right:NaN,bottom:0,left:0};this.updateSizeForLegend&&this.updateSizeForLegend(b,c);this.width=this.currentWidth-this.margin.left-this.margin.right;this.height=this.currentHeight-this.margin.top-this.margin.bottom;0>this.width&&(this.width=0);0>this.height&&(this.height=0);this.width2=a.axis_rotated?this.margin.left-this.rotated_padding_left-this.rotated_padding_right:this.width;this.height2=a.axis_rotated?this.height:this.currentHeight-this.margin2.top-this.margin2.bottom;0>this.width2&&
(this.width2=0);0>this.height2&&(this.height2=0);this.arcWidth=this.width-(this.isLegendRight?c+10:0);this.arcHeight=this.height-(this.isLegendRight?0:10);this.hasType("gauge")&&!a.gauge_fullCircle&&(this.arcHeight+=this.height-this.getGaugeLabelHeight());this.updateRadius&&this.updateRadius();this.isLegendRight&&f&&(this.margin3.left=this.arcWidth/2+1.1*this.radiusExpanded)};b.updateTargets=function(a){this.updateTargetsForText(a);this.updateTargetsForBar(a);this.updateTargetsForLine(a);this.hasArcType()&&
this.updateTargetsForArc&&this.updateTargetsForArc(a);this.updateTargetsForSubchart&&this.updateTargetsForSubchart(a);this.showTargets()};b.showTargets=function(){var a=this;a.svg.selectAll("."+l.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration).style("opacity",1)};b.redraw=function(a,b){var e=this,c=e.main,d=e.d3,f=e.config,m=e.getShapeIndices(e.isAreaType),g=e.getShapeIndices(e.isBarType),h=e.getShapeIndices(e.isLineType),k=e.hasArcType(),
n,q,p=e.filterTargetsToShow(e.data.targets),t,r,v=e.xv.bind(e);a=a||{};var y=C(a,"withY",!0);var w=C(a,"withSubchart",!0);var z=C(a,"withTransition",!0);var A=C(a,"withTransform",!1);var F=C(a,"withUpdateXDomain",!1);var E=C(a,"withUpdateOrgXDomain",!1);var G=C(a,"withTrimXDomain",!0);var I=C(a,"withUpdateXAxis",F);var Ta=C(a,"withLegend",!1);var Xa=C(a,"withEventRect",!0);var xa=C(a,"withDimension",!0);var na=C(a,"withTransitionForExit",z);var Q=C(a,"withTransitionForAxis",z);var da=z?f.transition_duration:
0;na=na?da:0;b=b||e.axis.generateTransitions(Q?da:0);Ta&&f.legend_show?e.updateLegend(e.mapToIds(e.data.targets),a,b):xa&&e.updateDimension(!0);e.isCategorized()&&0===p.length&&e.x.domain([0,e.axes.x.selectAll(".tick").size()]);p.length?(e.updateXDomain(p,F,E,G),f.axis_x_tick_values||(t=e.axis.updateXAxisTickValues(p))):(e.xAxis.tickValues([]),e.subXAxis.tickValues([]));f.zoom_rescale&&!a.flow&&(r=e.x.orgDomain());e.y.domain(e.getYDomain(p,"y",r));e.y2.domain(e.getYDomain(p,"y2",r));!f.axis_y_tick_values&&
f.axis_y_tick_count&&e.yAxis.tickValues(e.axis.generateTickValues(e.y.domain(),f.axis_y_tick_count));!f.axis_y2_tick_values&&f.axis_y2_tick_count&&e.y2Axis.tickValues(e.axis.generateTickValues(e.y2.domain(),f.axis_y2_tick_count));e.axis.redraw(b,k);e.axis.updateLabels(z);if((F||I)&&p.length)if(f.axis_x_tick_culling&&t){for(z=1;z<t.length;z++)if(t.length/z<f.axis_x_tick_culling_max){var za=z;break}e.svg.selectAll("."+l.axisX+" .tick text").each(function(a){a=t.indexOf(a);0<=a&&d.select(this).style("display",
a%za?"none":"block")})}else e.svg.selectAll("."+l.axisX+" .tick text").style("display","block");var Ea=e.generateDrawArea?e.generateDrawArea(m,!1):void 0;var Ia=e.generateDrawBar?e.generateDrawBar(g):void 0;var la=e.generateDrawLine?e.generateDrawLine(h,!1):void 0;var Oa=e.generateXYForText(m,g,h,!0);var Ya=e.generateXYForText(m,g,h,!1);y&&(e.subY.domain(e.getYDomain(p,"y")),e.subY2.domain(e.getYDomain(p,"y2")));e.updateXgridFocus();c.select("text."+l.text+"."+l.empty).attr("x",e.width/2).attr("y",
e.height/2).text(f.data_empty_label_text).transition().style("opacity",p.length?0:1);e.updateGrid(da);e.updateRegion(da);e.updateBar(na);e.updateLine(na);e.updateArea(na);e.updateCircle();e.hasDataLabel()&&e.updateText(na);e.redrawTitle&&e.redrawTitle();e.redrawArc&&e.redrawArc(da,na,A);e.redrawSubchart&&e.redrawSubchart(w,b,da,na,m,g,h);c.selectAll("."+l.selectedCircles).filter(e.isBarType.bind(e)).selectAll("circle").remove();f.interaction_enabled&&!a.flow&&Xa&&(e.redrawEventRect(),e.updateZoom&&
e.updateZoom());e.updateCircleY();var P=(e.config.axis_rotated?e.circleY:e.circleX).bind(e);var u=(e.config.axis_rotated?e.circleX:e.circleY).bind(e);a.flow&&(q=e.generateFlow({targets:p,flow:a.flow,duration:a.flow.duration,drawBar:Ia,drawLine:la,drawArea:Ea,cx:P,cy:u,xv:v,xForText:Oa,yForText:Ya}));(da||q)&&e.isTabVisible()?d.transition().duration(da).each(function(){var b=[];[e.redrawBar(Ia,!0),e.redrawLine(la,!0),e.redrawArea(Ea,!0),e.redrawCircle(P,u,!0),e.redrawText(Oa,Ya,a.flow,!0),e.redrawRegion(!0),
e.redrawGrid(!0)].forEach(function(a){a.forEach(function(a){b.push(a)})});n=e.generateWait();b.forEach(function(a){n.add(a)})}).call(n,function(){q&&q();f.onrendered&&f.onrendered.call(e)}):(e.redrawBar(Ia),e.redrawLine(la),e.redrawArea(Ea),e.redrawCircle(P,u),e.redrawText(Oa,Ya,a.flow),e.redrawRegion(),e.redrawGrid(),f.onrendered&&f.onrendered.call(e));e.mapToIds(e.data.targets).forEach(function(a){e.withoutFadeIn[a]=!0})};b.updateAndRedraw=function(a){var b=this.config;a=a||{};a.withTransition=
C(a,"withTransition",!0);a.withTransform=C(a,"withTransform",!1);a.withLegend=C(a,"withLegend",!1);a.withUpdateXDomain=!0;a.withUpdateOrgXDomain=!0;a.withTransitionForExit=!1;a.withTransitionForTransform=C(a,"withTransitionForTransform",a.withTransition);this.updateSizes();if(!a.withLegend||!b.legend_show){var e=this.axis.generateTransitions(a.withTransitionForAxis?b.transition_duration:0);this.updateScales();this.updateSvgSize();this.transformAll(a.withTransitionForTransform,e)}this.redraw(a,e)};
b.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})};b.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type};b.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")};b.isCustomX=function(){var a=this.config;return!this.isTimeSeries()&&(a.data_x||A(a.data_xs))};b.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type};b.getTranslate=function(a){var b=this.config;if("main"===a){var e=
t(this.margin.left);var c=t(this.margin.top)}else"context"===a?(e=t(this.margin2.left),c=t(this.margin2.top)):"legend"===a?(e=this.margin3.left,c=this.margin3.top):"x"===a?(e=0,c=b.axis_rotated?0:this.height):"y"===a?(e=0,c=b.axis_rotated?this.height:0):"y2"===a?(e=b.axis_rotated?0:this.width,c=b.axis_rotated?1:0):"subx"===a?(e=0,c=b.axis_rotated?0:this.height2):"arc"===a&&(e=this.arcWidth/2,c=this.arcHeight/2);return"translate("+e+","+c+")"};b.initialOpacity=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?
1:0};b.initialOpacityForCircle=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?this.opacityForCircle(a):0};b.opacityForCircle=function(a){var b=this.config.point_show?1:0;return n(a.value)?this.isScatterType(a)?.5:b:0};b.opacityForText=function(){return this.hasDataLabel()?1:0};b.xx=function(a){return a?this.x(a.x):null};b.xv=function(a){var b=a.value;this.isTimeSeries()?b=this.parseDate(a.value):this.isCategorized()&&"string"===typeof a.value&&(b=this.config.axis_x_categories.indexOf(a.value));
return Math.ceil(this.x(b))};b.yv=function(a){return Math.ceil((a.axis&&"y2"===a.axis?this.y2:this.y)(a.value))};b.subxx=function(a){return a?this.subX(a.x):null};b.transformMain=function(a,b){if(b&&b.axisX)var e=b.axisX;else e=this.main.select("."+l.axisX),a&&(e=e.transition());if(b&&b.axisY)var c=b.axisY;else c=this.main.select("."+l.axisY),a&&(c=c.transition());b&&b.axisY2?b=b.axisY2:(b=this.main.select("."+l.axisY2),a&&(b=b.transition()));(a?this.main.transition():this.main).attr("transform",
this.getTranslate("main"));e.attr("transform",this.getTranslate("x"));c.attr("transform",this.getTranslate("y"));b.attr("transform",this.getTranslate("y2"));this.main.select("."+l.chartArcs).attr("transform",this.getTranslate("arc"))};b.transformAll=function(a,b){this.transformMain(a,b);this.config.subchart_show&&this.transformContext(a,b);this.legend&&this.transformLegend(a)};b.updateSvgSize=function(){var a=this.svg.select(".c3-brush .background");this.svg.attr("width",this.currentWidth).attr("height",
this.currentHeight);this.svg.selectAll(["#"+this.clipId,"#"+this.clipIdForGrid]).select("rect").attr("width",this.width).attr("height",this.height);this.svg.select("#"+this.clipIdForXAxis).select("rect").attr("x",this.getXAxisClipX.bind(this)).attr("y",this.getXAxisClipY.bind(this)).attr("width",this.getXAxisClipWidth.bind(this)).attr("height",this.getXAxisClipHeight.bind(this));this.svg.select("#"+this.clipIdForYAxis).select("rect").attr("x",this.getYAxisClipX.bind(this)).attr("y",this.getYAxisClipY.bind(this)).attr("width",
this.getYAxisClipWidth.bind(this)).attr("height",this.getYAxisClipHeight.bind(this));this.svg.select("#"+this.clipIdForSubchart).select("rect").attr("width",this.width).attr("height",a.size()?a.attr("height"):0);this.svg.select("."+l.zoomRect).attr("width",this.width).attr("height",this.height);this.selectChart.style("max-height",this.currentHeight+"px")};b.updateDimension=function(a){a||(this.config.axis_rotated?(this.axes.x.call(this.xAxis),this.axes.subx.call(this.subXAxis)):(this.axes.y.call(this.yAxis),
this.axes.y2.call(this.y2Axis)));this.updateSizes();this.updateScales();this.updateSvgSize();this.transformAll(!1)};b.observeInserted=function(a){var b=this;if("undefined"===typeof MutationObserver)k.console.error("MutationObserver not defined.");else{var e=new MutationObserver(function(c){c.forEach(function(c){"childList"===c.type&&c.previousSibling&&(e.disconnect(),b.intervalForObserveInserted=k.setInterval(function(){a.node().parentNode&&(k.clearInterval(b.intervalForObserveInserted),b.updateDimension(),
b.brush&&b.brush.update(),b.config.oninit.call(b),b.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),a.transition().style("opacity",1))},10))})});e.observe(a.node(),{attributes:!0,childList:!0,characterData:!0})}};b.bindResize=function(){var a=this,b=a.config;a.resizeFunction=a.generateResize();a.resizeFunction.add(function(){b.onresize.call(a)});b.resize_auto&&a.resizeFunction.add(function(){void 0!==a.resizeTimeout&&
k.clearTimeout(a.resizeTimeout);a.resizeTimeout=k.setTimeout(function(){delete a.resizeTimeout;a.api.flush()},100)});a.resizeFunction.add(function(){b.onresized.call(a)});if(k.attachEvent)k.attachEvent("onresize",a.resizeFunction);else if(k.addEventListener)k.addEventListener("resize",a.resizeFunction,!1);else{var c=k.onresize;c?c.add&&c.remove||(c=a.generateResize(),c.add(k.onresize)):c=a.generateResize();c.add(a.resizeFunction);k.onresize=c}};b.generateResize=function(){function a(){b.forEach(function(a){a()})}
var b=[];a.add=function(a){b.push(a)};a.remove=function(a){for(var e=0;e<b.length;e++)if(b[e]===a){b.splice(e,1);break}};return a};b.endall=function(a,b){var e=0;a.each(function(){++e}).each("end",function(){--e||b.apply(this,arguments)})};b.generateWait=function(){var a=[],b=function(b,e){var c=setInterval(function(){var b=0;a.forEach(function(a){if(a.empty())b+=1;else try{a.transition()}catch(aa){b+=1}});b===a.length&&(clearInterval(c),e&&e())},10)};b.add=function(b){a.push(b)};return b};b.parseDate=
function(a){var b;a instanceof Date?b=a:"string"===typeof a?b=this.dataTimeFormat(this.config.data_xFormat).parse(a):"number"!==typeof a||isNaN(a)||(b=new Date(+a));b&&!isNaN(+b)||k.console.error("Failed to parse x '"+a+"' to Date object");return b};b.isTabVisible=function(){var a;"undefined"!==typeof document.hidden?a="hidden":"undefined"!==typeof document.mozHidden?a="mozHidden":"undefined"!==typeof document.msHidden?a="msHidden":"undefined"!==typeof document.webkitHidden&&(a="webkitHidden");return document[a]?
!1:!0};b.getDefaultConfig=function(){var a={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},
onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},
data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,
legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,
axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,
axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,
point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*
Math.PI/2,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,b,e,c){return this.getTooltipContent?
this.getTooltipContent(a,b,e,c):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};Object.keys(this.additionalConfig).forEach(function(b){a[b]=this.additionalConfig[b]},this);return a};b.additionalConfig={};b.loadConfig=function(a){function b(){var a=d.shift();if(a&&c&&"object"===typeof c&&a in c)return c=c[a],b();
if(!a)return c}var e=this.config,c,d,f;Object.keys(e).forEach(function(g){c=a;d=g.split("_");f=b();z(f)&&(e[g]=f)})};b.getScale=function(a,b,c){return(c?this.d3.time.scale():this.d3.scale.linear()).range([a,b])};b.getX=function(a,b,c,d){var e=this.getScale(a,b,this.isTimeSeries()),f=c?e.domain(c):e,g;this.isCategorized()?(d=d||function(){return 0},e=function(a,b){a=f(a)+d(a);return b?a:Math.ceil(a)}):e=function(a,b){a=f(a);return b?a:Math.ceil(a)};for(g in f)e[g]=f[g];e.orgDomain=function(){return f.domain()};
this.isCategorized()&&(e.domain=function(a){if(!arguments.length)return a=this.orgDomain(),[a[0],a[1]+1];f.domain(a);return e});return e};b.getY=function(a,b,c){a=this.getScale(a,b,this.isTimeSeriesY());c&&a.domain(c);return a};b.getYScale=function(a){return"y2"===this.axis.getId(a)?this.y2:this.y};b.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY};b.updateScales=function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0;a.xMax=b.axis_rotated?a.height:a.width;
a.yMin=b.axis_rotated?0:a.height;a.yMax=b.axis_rotated?a.width:1;a.subXMin=a.xMin;a.subXMax=a.xMax;a.subYMin=b.axis_rotated?0:a.height2;a.subYMax=b.axis_rotated?a.width2:1;a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()});a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain());a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain());a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()});a.subY=a.getY(a.subYMin,a.subYMax,
c?b.axis_y_default:a.subY.domain());a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain());a.xAxisTickFormat=a.axis.getXAxisTickFormat();a.xAxisTickValues=a.axis.getXAxisTickValues();a.yAxisTickValues=a.axis.getYAxisTickValues();a.y2AxisTickValues=a.axis.getY2AxisTickValues();a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer);a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer);a.yAxis=
a.axis.getYAxis(a.y,a.yOrient,b.axis_y_tick_format,a.yAxisTickValues,b.axis_y_tick_outer);a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,b.axis_y2_tick_format,a.y2AxisTickValues,b.axis_y2_tick_outer);c||(a.brush&&a.brush.scale(a.subX),b.zoom_enabled&&a.zoom.scale(a.x));a.updateArc&&a.updateArc()};b.getYDomainMin=function(a){var b=this,e=b.config,c=b.mapToIds(a),d=b.getValuesAsIdKeyed(a),f;if(0<e.data_groups.length){var g=b.hasNegativeValueInTargets(a);for(a=0;a<e.data_groups.length;a++){var h=e.data_groups[a].filter(function(a){return 0<=
c.indexOf(a)});if(0!==h.length){var l=h[0];g&&d[l]&&d[l].forEach(function(a,b){d[l][b]=0>a?a:0});for(f=1;f<h.length;f++){var k=h[f];d[k]&&d[k].forEach(function(a,e){b.axis.getId(k)!==b.axis.getId(l)||!d[l]||g&&0<+a||(d[l][e]+=+a)})}}}}return b.d3.min(Object.keys(d).map(function(a){return b.d3.min(d[a])}))};b.getYDomainMax=function(a){var b=this,e=b.config,c=b.mapToIds(a),d=b.getValuesAsIdKeyed(a),f;if(0<e.data_groups.length){var g=b.hasPositiveValueInTargets(a);for(a=0;a<e.data_groups.length;a++){var h=
e.data_groups[a].filter(function(a){return 0<=c.indexOf(a)});if(0!==h.length){var l=h[0];g&&d[l]&&d[l].forEach(function(a,b){d[l][b]=0<a?a:0});for(f=1;f<h.length;f++){var k=h[f];d[k]&&d[k].forEach(function(a,e){b.axis.getId(k)!==b.axis.getId(l)||!d[l]||g&&0>+a||(d[l][e]+=+a)})}}}}return b.d3.max(Object.keys(d).map(function(a){return b.d3.max(d[a])}))};b.getYDomain=function(a,b,c){var e=this,d=e.config;a=a.filter(function(a){return e.axis.getId(a.id)===b});var f=c?e.filterByXDomain(a,c):a,g="y2"===
b?d.axis_y2_min:d.axis_y_min,m="y2"===b?d.axis_y2_max:d.axis_y_max,h=e.getYDomainMin(f);a=e.getYDomainMax(f);var l,k="y2"===b?d.axis_y2_center:d.axis_y_center,x=e.hasType("bar",f)&&d.bar_zerobased||e.hasType("area",f)&&d.area_zerobased;c="y2"===b?d.axis_y2_inverted:d.axis_y_inverted;var p=e.hasDataLabel()&&d.axis_rotated;var t=e.hasDataLabel()&&!d.axis_rotated;h=n(g)?g:n(m)?h<m?h:m-10:h;a=n(m)?m:n(g)?g<a?a:g+10:a;if(0===f.length)return"y2"===b?e.y2.domain():e.y.domain();isNaN(h)&&(h=0);isNaN(a)&&
(a=h);h===a&&(0>h?a=0:h=0);f=0<=h&&0<=a;var r=0>=h&&0>=a;if(n(g)&&f||n(m)&&r)x=!1;x&&(f&&(h=0),r&&(a=0));g=Math.abs(a-h);m=l=.1*g;"undefined"!==typeof k&&(h=Math.max(Math.abs(h),Math.abs(a)),a=k+h,h=k-h);p?(k=e.getDataLabelLength(h,a,"width"),p=q(e.y.range()),k=[k[0]/p,k[1]/p],m+=k[1]/(1-k[0]-k[1])*g,l+=k[0]/(1-k[0]-k[1])*g):t&&(k=e.getDataLabelLength(h,a,"height"),m+=e.axis.convertPixelsToAxisPadding(k[1],g),l+=e.axis.convertPixelsToAxisPadding(k[0],g));"y"===b&&A(d.axis_y_padding)&&(m=e.axis.getPadding(d.axis_y_padding,
"top",m,g),l=e.axis.getPadding(d.axis_y_padding,"bottom",l,g));"y2"===b&&A(d.axis_y2_padding)&&(m=e.axis.getPadding(d.axis_y2_padding,"top",m,g),l=e.axis.getPadding(d.axis_y2_padding,"bottom",l,g));x&&(f&&(l=h),r&&(m=-a));d=[h-l,a+m];return c?d.reverse():d};b.getXDomainMin=function(a){var b=this,e=b.config;return z(e.axis_x_min)?b.isTimeSeries()?this.parseDate(e.axis_x_min):e.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})};b.getXDomainMax=function(a){var b=this,
e=b.config;return z(e.axis_x_max)?b.isTimeSeries()?this.parseDate(e.axis_x_max):e.axis_x_max:b.d3.max(a,function(a){return b.d3.max(a.values,function(a){return a.x})})};b.getXDomainPadding=function(a){var b=this.config;a=a[1]-a[0];if(this.isCategorized())a=0;else if(this.hasType("bar")){var e=this.getMaxDataCount();a=1<e?a/(e-1)/2:.5}else a*=.01;if("object"===typeof b.axis_x_padding&&A(b.axis_x_padding)){e=n(b.axis_x_padding.left)?b.axis_x_padding.left:a;var c=n(b.axis_x_padding.right)?b.axis_x_padding.right:
a}else e="number"===typeof b.axis_x_padding?c=b.axis_x_padding:c=a;return{left:e,right:c}};b.getXDomain=function(a){var b=[this.getXDomainMin(a),this.getXDomainMax(a)];a=b[0];var e=b[1];b=this.getXDomainPadding(b);var c=0,d=0;0!==a-e||this.isCategorized()||(this.isTimeSeries()?(a=new Date(.5*a.getTime()),e=new Date(1.5*e.getTime())):(a=0===a?1:.5*a,e=0===e?-1:1.5*e));if(a||0===a)c=this.isTimeSeries()?new Date(a.getTime()-b.left):a-b.left;if(e||0===e)d=this.isTimeSeries()?new Date(e.getTime()+b.right):
e+b.right;return[c,d]};b.updateXDomain=function(a,b,c,d,f){var e=this.config;c&&(this.x.domain(f?f:this.d3.extent(this.getXDomain(a))),this.orgXDomain=this.x.domain(),e.zoom_enabled&&this.zoom.scale(this.x).updateScaleExtent(),this.subX.domain(this.x.domain()),this.brush&&this.brush.scale(this.subX));b&&(this.x.domain(f?f:!this.brush||this.brush.empty()?this.orgXDomain:this.brush.extent()),e.zoom_enabled&&this.zoom.scale(this.x).updateScaleExtent());d&&this.x.domain(this.trimXDomain(this.x.orgDomain()));
return this.x.domain()};b.trimXDomain=function(a){var b=this.getZoomDomain(),e=b[0];b=b[1];a[0]<=e&&(a[1]=+a[1]+(e-a[0]),a[0]=e);b<=a[1]&&(a[0]=+a[0]-(a[1]-b),a[1]=b);return a};b.isX=function(a){var b=this.config;return b.data_x&&a===b.data_x||A(b.data_xs)&&G(b.data_xs,a)};b.isNotX=function(a){return!this.isX(a)};b.getXKey=function(a){var b=this.config;return b.data_x?b.data_x:A(b.data_xs)?b.data_xs[a]:null};b.getXValuesOfXKey=function(a,b){var e=this,c;(b&&A(b)?e.mapToIds(b):[]).forEach(function(b){e.getXKey(b)===
a&&(c=e.data.xs[b])});return c};b.getIndexByX=function(a){a=this.filterByX(this.data.targets,a);return a.length?a[0].index:null};b.getXValue=function(a,b){return a in this.data.xs&&this.data.xs[a]&&n(this.data.xs[a][b])?this.data.xs[a][b]:b};b.getOtherTargetXs=function(){var a=Object.keys(this.data.xs);return a.length?this.data.xs[a[0]]:null};b.getOtherTargetX=function(a){var b=this.getOtherTargetXs();return b&&a<b.length?b[a]:null};b.addXs=function(a){var b=this;Object.keys(a).forEach(function(e){b.config.data_xs[e]=
a[e]})};b.hasMultipleX=function(a){return 1<this.d3.set(Object.keys(a).map(function(b){return a[b]})).size()};b.isMultipleX=function(){return A(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")};b.addName=function(a){if(a){var b=this.config.data_names[a.id];a.name=void 0!==b?b:a.id}return a};b.getValueOnIndex=function(a,b){a=a.filter(function(a){return a.index===b});return a.length?a[0]:null};b.updateTargetX=function(a,b){var e=this;a.forEach(function(a){a.values.forEach(function(c,
d){c.x=e.generateTargetX(b[d],a.id,d)});e.data.xs[a.id]=b})};b.updateTargetXs=function(a,b){var e=this;a.forEach(function(a){b[a.id]&&e.updateTargetX([a],b[a.id])})};b.generateTargetX=function(a,b,c){return this.isTimeSeries()?a?this.parseDate(a):this.parseDate(this.getXValue(b,c)):this.isCustomX()&&!this.isCategorized()?n(a)?+a:this.getXValue(b,c):c};b.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}};b.updateXs=function(){var a=
this;a.data.targets.length&&(a.xs=[],a.data.targets[0].values.forEach(function(b){a.xs[b.index]=b.x}))};b.getPrevX=function(a){a=this.xs[a-1];return"undefined"!==typeof a?a:null};b.getNextX=function(a){a=this.xs[a+1];return"undefined"!==typeof a?a:null};b.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(a){return a.values.length})};b.getMaxDataCountTarget=function(a){var b=a.length,e=0,c;1<b?a.forEach(function(a){a.values.length>e&&(c=a,e=a.values.length)}):c=b?a[0]:null;return c};
b.getEdgeX=function(a){return a.length?[this.d3.min(a,function(a){return a.values[0].x}),this.d3.max(a,function(a){return a.values[a.values.length-1].x})]:[0,0]};b.mapToIds=function(a){return a.map(function(a){return a.id})};b.mapToTargetIds=function(a){return a?[].concat(a):this.mapToIds(this.data.targets)};b.hasTarget=function(a,b){a=this.mapToIds(a);var e;for(e=0;e<a.length;e++)if(a[e]===b)return!0;return!1};b.isTargetToShow=function(a){return 0>this.hiddenTargetIds.indexOf(a)};b.isLegendToShow=
function(a){return 0>this.hiddenLegendIds.indexOf(a)};b.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){return b.isTargetToShow(a.id)})};b.mapTargetsToUniqueXs=function(a){a=this.d3.set(this.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();a=this.isTimeSeries()?a.map(function(a){return new Date(+a)}):a.map(function(a){return+a});return a.sort(function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN})};b.addHiddenTargetIds=function(a){this.hiddenTargetIds=
this.hiddenTargetIds.concat(a)};b.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return 0>a.indexOf(b)})};b.addHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.concat(a)};b.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return 0>a.indexOf(b)})};b.getValuesAsIdKeyed=function(a){var b={};a.forEach(function(a){b[a.id]=[];a.values.forEach(function(e){b[a.id].push(e.value)})});return b};
b.checkValueInTargets=function(a,b){var e=Object.keys(a),c,d;for(c=0;c<e.length;c++){var f=a[e[c]].values;for(d=0;d<f.length;d++)if(b(f[d].value))return!0}return!1};b.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0>a})};b.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0<a})};b.isOrderDesc=function(){var a=this.config;return"string"===typeof a.data_order&&"desc"===a.data_order.toLowerCase()};b.isOrderAsc=function(){var a=
this.config;return"string"===typeof a.data_order&&"asc"===a.data_order.toLowerCase()};b.orderTargets=function(a){var b=this.config,e=this.isOrderAsc(),c=this.isOrderDesc();e||c?a.sort(function(a,b){var c=function(a,b){return a+Math.abs(b.value)};a=a.values.reduce(c,0);b=b.values.reduce(c,0);return e?b-a:a-b}):p(b.data_order)&&a.sort(b.data_order);return a};b.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return 0===a.x-b})};b.filterRemoveNull=
function(a){return a.filter(function(a){return n(a.value)})};b.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})};b.hasDataLabel=function(){var a=this.config;return"boolean"===typeof a.data_labels&&a.data_labels||"object"===typeof a.data_labels&&A(a.data_labels)?!0:!1};b.getDataLabelLength=function(a,b,c){var e=this,d=[0,0];e.selectChart.select("svg").selectAll(".dummy").data([a,b]).enter().append("text").text(function(a){return e.dataLabelFormat(a.id)(a)}).each(function(a,
b){d[b]=1.3*this.getBoundingClientRect()[c]}).remove();return d};b.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)};b.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)};b.findSameXOfValues=function(a,b){var e,c=a[b].x,d=[];for(e=b-1;0<=e&&c===a[e].x;e--)d.push(a[e]);for(e=b;e<a.length&&c===a[e].x;e++)d.push(a[e]);return d};b.findClosestFromTargets=function(a,b){var e=this;a=a.map(function(a){return e.findClosest(a.values,b)});return e.findClosest(a,
b)};b.findClosest=function(a,b){var e=this,c=e.config.point_sensitivity,d;a.filter(function(a){return a&&e.isBarType(a.id)}).forEach(function(a){var b=e.main.select("."+l.bars+e.getTargetSelectorSuffix(a.id)+" ."+l.bar+"-"+a.index).node();!d&&e.isWithinBar(b)&&(d=a)});a.filter(function(a){return a&&!e.isBarType(a.id)}).forEach(function(a){var f=e.dist(a,b);f<c&&(c=f,d=a)});return d};b.dist=function(a,b){var e=this.config,c=e.axis_rotated?1:0;e=e.axis_rotated?0:1;var d=this.circleY(a,a.index);a=this.x(a.x);
return Math.sqrt(Math.pow(a-b[c],2)+Math.pow(d-b[e],2))};b.convertValuesToStep=function(a){var b=[].concat(a),e;if(!this.isCategorized())return a;for(e=a.length+1;0<e;e--)b[e]=b[e-1];b[0]={x:b[0].x-1,value:b[0].value,id:b[0].id};b[a.length+1]={x:b[a.length].x+1,value:b[a.length].value,id:b[a.length].id};return b};b.updateDataAttributes=function(a,b){var e=this.config["data_"+a];if("undefined"===typeof b)return e;Object.keys(b).forEach(function(a){e[a]=b[a]});this.redraw({withLegend:!0});return e};
b.convertUrlToData=function(a,b,c,d,f){var e=this,g=b?b:"csv",m=e.d3.xhr(a);c&&Object.keys(c).forEach(function(a){m.header(a,c[a])});m.get(function(a,b){if(!b)throw Error(a.responseURL+" "+a.status+" ("+a.statusText+")");a="json"===g?e.convertJsonToData(JSON.parse(b.response),d):"tsv"===g?e.convertTsvToData(b.response):e.convertCsvToData(b.response);f.call(e,a)})};b.convertXsvToData=function(a,b){var e=b.parseRows(a);if(1===e.length){var c=[{}];e[0].forEach(function(a){c[0][a]=null})}else c=b.parse(a);
return c};b.convertCsvToData=function(a){return this.convertXsvToData(a,this.d3.csv)};b.convertTsvToData=function(a){return this.convertXsvToData(a,this.d3.tsv)};b.convertJsonToData=function(a,b){var e=this,c=[];if(b){if(b.x){var d=b.value.concat(b.x);e.config.data_x=b.x}else d=b.value;c.push(d);a.forEach(function(a){var b=[];d.forEach(function(c){c=e.findValueInJson(a,c);w(c)&&(c=null);b.push(c)});c.push(b)});b=e.convertRowsToData(c)}else Object.keys(a).forEach(function(b){c.push([b].concat(a[b]))}),
b=e.convertColumnsToData(c);return b};b.findValueInJson=function(a,b){b=b.replace(/\[(\w+)\]/g,".$1");b=b.replace(/^\./,"");b=b.split(".");for(var e=0;e<b.length;++e){var c=b[e];if(c in a)a=a[c];else return}return a};b.convertRowsToData=function(a){var b=a[0],e=[],c,d;for(c=1;c<a.length;c++){var f={};for(d=0;d<a[c].length;d++){if(w(a[c][d]))throw Error("Source data is missing a component at ("+c+","+d+")!");f[b[d]]=a[c][d]}e.push(f)}return e};b.convertColumnsToData=function(a){var b=[],e,c;for(e=
0;e<a.length;e++){var d=a[e][0];for(c=1;c<a[e].length;c++){w(b[c-1])&&(b[c-1]={});if(w(a[e][c]))throw Error("Source data is missing a component at ("+e+","+c+")!");b[c-1][d]=a[e][c]}}return b};b.convertDataToTargets=function(a,b){var e=this,c=e.config,d=e.d3.keys(a[0]).filter(e.isNotX,e),f=e.d3.keys(a[0]).filter(e.isX,e);d.forEach(function(d){var g=e.getXKey(d);e.isCustomX()||e.isTimeSeries()?0<=f.indexOf(g)?e.data.xs[d]=(b&&e.data.xs[d]?e.data.xs[d]:[]).concat(a.map(function(a){return a[g]}).filter(n).map(function(a,
b){return e.generateTargetX(a,d,b)})):c.data_x?e.data.xs[d]=e.getOtherTargetXs():A(c.data_xs)&&(e.data.xs[d]=e.getXValuesOfXKey(g,e.data.targets)):e.data.xs[d]=a.map(function(a,b){return b})});d.forEach(function(a){if(!e.data.xs[a])throw Error('x is not defined for id = "'+a+'".');});d=d.map(function(b,d){var f=c.data_idConverter(b);return{id:f,id_org:b,values:a.map(function(a,g){var m=e.getXKey(b);m=a[m];var h=null===a[b]||isNaN(a[b])?null:+a[b];if(e.isCustomX()&&e.isCategorized()&&0===d&&!w(m)){0===
d&&0===g&&(c.axis_x_categories=[]);var l=c.axis_x_categories.indexOf(m);-1===l&&(l=c.axis_x_categories.length,c.axis_x_categories.push(m))}else l=e.generateTargetX(m,b,g);if(w(a[b])||e.data.xs[b].length<=g)l=void 0;return{x:l,value:h,id:f}}).filter(function(a){return z(a.x)})}});d.forEach(function(a){c.data_xSort&&(a.values=a.values.sort(function(a,b){return(a.x||0===a.x?a.x:Infinity)-(b.x||0===b.x?b.x:Infinity)}));var b=0;a.values.forEach(function(a){a.index=b++});e.data.xs[a.id].sort(function(a,
b){return a-b})});e.hasNegativeValue=e.hasNegativeValueInTargets(d);e.hasPositiveValue=e.hasPositiveValueInTargets(d);c.data_type&&e.setTargetType(e.mapToIds(d).filter(function(a){return!(a in c.data_types)}),c.data_type);d.forEach(function(a){e.addCache(a.id_org,a)});return d};b.load=function(a,b){var e=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){e.setTargetType(a.id,b.types&&b.types[a.id]?b.types[a.id]:b.type)}),e.data.targets.forEach(function(b){for(var e=
0;e<a.length;e++)if(b.id===a[e].id){b.values=a[e].values;a.splice(e,1);break}}),e.data.targets=e.data.targets.concat(a));e.updateTargets(e.data.targets);e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});b.done&&b.done()};b.loadFromArgs=function(a){var b=this;a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.headers,a.keys,function(e){b.load(b.convertDataToTargets(e),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,
a.keys)),a):a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)};b.unload=function(a,b){var e=this;b||(b=function(){});(a=a.filter(function(a){return e.hasTarget(e.data.targets,a)}))&&0!==a.length?(e.svg.selectAll(a.map(function(a){return e.selectorTarget(a)})).transition().style("opacity",0).remove().call(e.endall,b),a.forEach(function(a){e.withoutFadeIn[a]=!1;e.legend&&e.legend.selectAll("."+
l.legendItem+e.getTargetSelectorSuffix(a)).remove();e.data.targets=e.data.targets.filter(function(b){return b.id!==a})})):b()};b.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a};b.initEventRect=function(){this.main.select("."+l.chart).append("g").attr("class",l.eventRects).style("fill-opacity",0)};b.redrawEventRect=function(){var a=this.config;var b=this.isMultipleX();a=this.main.select("."+l.eventRects).style("cursor",a.zoom_enabled?a.axis_rotated?
"ns-resize":"ew-resize":null).classed(l.eventRectsMultiple,b).classed(l.eventRectsSingle,!b);a.selectAll("."+l.eventRect).remove();this.eventRect=a.selectAll("."+l.eventRect);b?(b=this.eventRect.data([0]),this.generateEventRectsForMultipleXs(b.enter()),this.updateEventRect(b)):(b=this.getMaxDataCountTarget(this.data.targets),a.datum(b?b.values:[]),this.eventRect=a.selectAll("."+l.eventRect),b=this.eventRect.data(function(a){return a}),this.generateEventRectsForSingleX(b.enter()),this.updateEventRect(b),
b.exit().remove())};b.updateEventRect=function(a){var b=this,e=b.config,c;a=a||b.eventRect.data(function(a){return a});if(b.isMultipleX()){var d=c=0;var f=b.width;var g=b.height}else{if(!b.isCustomX()&&!b.isTimeSeries()||b.isCategorized()){var h=b.getEventRectWidth();d=function(a){return b.x(a.x)-h/2}}else b.updateXs(),h=function(a){var c=b.getPrevX(a.index);a=b.getNextX(a.index);if(null===c&&null===a)return e.axis_rotated?b.height:b.width;null===c&&(c=b.x.domain()[0]);null===a&&(a=b.x.domain()[1]);
return Math.max(0,(b.x(a)-b.x(c))/2)},d=function(a){var e=b.getPrevX(a.index),c=b.getNextX(a.index);a=b.data.xs[a.id][a.index];if(null===e&&null===c)return 0;null===e&&(e=b.x.domain()[0]);return(b.x(a)+b.x(e))/2};c=e.axis_rotated?0:d;d=e.axis_rotated?d:0;f=e.axis_rotated?b.width:h;g=e.axis_rotated?h:b.height}a.attr("class",b.classEvent.bind(b)).attr("x",c).attr("y",d).attr("width",f).attr("height",g)};b.generateEventRectsForSingleX=function(a){var b=this,e=b.d3,c=b.config;a.append("rect").attr("class",
b.classEvent.bind(b)).style("cursor",c.data_selection_enabled&&c.data_selection_grouped?"pointer":null).on("mouseover",function(a){a=a.index;b.dragging||b.flowing||b.hasArcType()||(c.point_focus_expand_enabled&&b.expandCircles(a,null,!0),b.expandBars(a,null,!0),b.main.selectAll("."+l.shape+"-"+a).each(function(a){c.data_onmouseover.call(b.api,a)}))}).on("mouseout",function(a){a=a.index;b.config&&!b.hasArcType()&&(b.hideXGridFocus(),b.hideTooltip(),b.unexpandCircles(),b.unexpandBars(),b.main.selectAll("."+
l.shape+"-"+a).each(function(a){c.data_onmouseout.call(b.api,a)}))}).on("mousemove",function(a){var d=a.index,f=b.svg.select("."+l.eventRect+"-"+d);b.dragging||b.flowing||b.hasArcType()||(b.isStepType(a)&&"step-after"===b.config.line_step_type&&e.mouse(this)[0]<b.x(b.getXValue(a.id,d))&&--d,a=b.filterTargetsToShow(b.data.targets).map(function(a){return b.addName(b.getValueOnIndex(a.values,d))}),c.tooltip_grouped&&(b.showTooltip(a,this),b.showXGridFocus(a)),(!c.tooltip_grouped||c.data_selection_enabled&&
!c.data_selection_grouped)&&b.main.selectAll("."+l.shape+"-"+d).each(function(){e.select(this).classed(l.EXPANDED,!0);c.data_selection_enabled&&f.style("cursor",c.data_selection_grouped?"pointer":null);c.tooltip_grouped||(b.hideXGridFocus(),b.hideTooltip(),c.data_selection_grouped||(b.unexpandCircles(d),b.unexpandBars(d)))}).filter(function(a){return b.isWithinShape(this,a)}).each(function(a){c.data_selection_enabled&&(c.data_selection_grouped||c.data_selection_isselectable(a))&&f.style("cursor",
"pointer");c.tooltip_grouped||(b.showTooltip([a],this),b.showXGridFocus([a]),c.point_focus_expand_enabled&&b.expandCircles(d,a.id,!0),b.expandBars(d,a.id,!0))}))}).on("click",function(a){var d=a.index;!b.hasArcType()&&b.toggleShape&&(b.cancelClick?b.cancelClick=!1:(b.isStepType(a)&&"step-after"===c.line_step_type&&e.mouse(this)[0]<b.x(b.getXValue(a.id,d))&&--d,b.main.selectAll("."+l.shape+"-"+d).each(function(a){if(c.data_selection_grouped||b.isWithinShape(this,a))b.toggleShape(this,a,d),b.config.data_onclick.call(b.api,
a,this)})))}).call(c.data_selection_draggable&&b.drag?e.behavior.drag().origin(Object).on("drag",function(){b.drag(e.mouse(this))}).on("dragstart",function(){b.dragstart(e.mouse(this))}).on("dragend",function(){b.dragend()}):function(){})};b.generateEventRectsForMultipleXs=function(a){function b(){e.svg.select("."+l.eventRect).style("cursor",null);e.hideXGridFocus();e.hideTooltip();e.unexpandCircles();e.unexpandBars()}var e=this,c=e.d3,d=e.config;a.append("rect").attr("x",0).attr("y",0).attr("width",
e.width).attr("height",e.height).attr("class",l.eventRect).on("mouseout",function(){e.config&&(e.hasArcType()||b())}).on("mousemove",function(){var a=e.filterTargetsToShow(e.data.targets);if(!e.dragging&&!e.hasArcType(a)){var f=c.mouse(this);var g=e.findClosestFromTargets(a,f);!e.mouseover||g&&g.id===e.mouseover.id||(d.data_onmouseout.call(e.api,e.mouseover),e.mouseover=void 0);if(g){if(a=e.isScatterType(g)||!d.tooltip_grouped?[g]:e.filterByX(a,g.x),a=a.map(function(a){return e.addName(a)}),e.showTooltip(a,
this),d.point_focus_expand_enabled&&e.expandCircles(g.index,g.id,!0),e.expandBars(g.index,g.id,!0),e.showXGridFocus(a),e.isBarType(g.id)||e.dist(g,f)<d.point_sensitivity)e.svg.select("."+l.eventRect).style("cursor","pointer"),e.mouseover||(d.data_onmouseover.call(e.api,g),e.mouseover=g)}else b()}}).on("click",function(){var a=e.filterTargetsToShow(e.data.targets),b;if(!e.hasArcType(a)){var f=c.mouse(this);(b=e.findClosestFromTargets(a,f))&&(e.isBarType(b.id)||e.dist(b,f)<d.point_sensitivity)&&e.main.selectAll("."+
l.shapes+e.getTargetSelectorSuffix(b.id)).selectAll("."+l.shape+"-"+b.index).each(function(){if(d.data_selection_grouped||e.isWithinShape(this,b))e.toggleShape(this,b,b.index),e.config.data_onclick.call(e.api,b,this)})}}).call(d.data_selection_draggable&&e.drag?c.behavior.drag().origin(Object).on("drag",function(){e.drag(c.mouse(this))}).on("dragstart",function(){e.dragstart(c.mouse(this))}).on("dragend",function(){e.dragend()}):function(){})};b.dispatchEvent=function(a,b,c){b="."+l.eventRect+(this.isMultipleX()?
"":"-"+b);b=this.main.select(b).node();var e=b.getBoundingClientRect(),d=e.left+(c?c[0]:0);c=e.top+(c?c[1]:0);e=document.createEvent("MouseEvents");e.initMouseEvent(a,!0,!0,k,0,d,c,d,c,!1,!1,!1,!1,0,null);b.dispatchEvent(e)};b.getCurrentWidth=function(){var a=this.config;return a.size_width?a.size_width:this.getParentWidth()};b.getCurrentHeight=function(){var a=this.config,b=a.size_height?a.size_height:this.getParentHeight();return 0<b?b:320/(this.hasType("gauge")&&!a.gauge_fullCircle?2:1)};b.getCurrentPaddingTop=
function(){var a=this.config;a=n(a.padding_top)?a.padding_top:0;this.title&&this.title.node()&&(a+=this.getTitlePadding());return a};b.getCurrentPaddingBottom=function(){var a=this.config;return n(a.padding_bottom)?a.padding_bottom:0};b.getCurrentPaddingLeft=function(a){var b=this.config;return n(b.padding_left)?b.padding_left:b.axis_rotated?b.axis_x_show?Math.max(v(this.getAxisWidthByAxisId("x",a)),40):1:!b.axis_y_show||b.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:v(this.getAxisWidthByAxisId("y",
a))};b.getCurrentPaddingRight=function(){var a=this.config,b=this.isLegendRight?this.getLegendWidth()+20:0;return n(a.padding_right)?a.padding_right+1:a.axis_rotated?10+b:!a.axis_y2_show||a.axis_y2_inner?2+b+(this.axis.getY2AxisLabelPosition().isOuter?20:0):v(this.getAxisWidthByAxisId("y2"))+b};b.getParentRectValue=function(a){for(var b=this.selectChart.node(),e;b&&"BODY"!==b.tagName;){try{e=b.getBoundingClientRect()[a]}catch(D){"width"===a&&(e=b.offsetWidth)}if(e)break;b=b.parentNode}return e};b.getParentWidth=
function(){return this.getParentRectValue("width")};b.getParentHeight=function(){var a=this.selectChart.style("height");return 0<a.indexOf("px")?+a.replace("px",""):0};b.getSvgLeft=function(a){var b=this.config,e=b.axis_rotated||!b.axis_rotated&&!b.axis_y_inner;e=(b=this.main.select("."+(b.axis_rotated?l.axisX:l.axisY)).node())&&e?b.getBoundingClientRect():{right:0};b=this.selectChart.node().getBoundingClientRect();var c=this.hasArcType();a=e.right-b.left-(c?0:this.getCurrentPaddingLeft(a));return 0<
a?a:0};b.getAxisWidthByAxisId=function(a,b){var e=this.axis.getLabelPositionById(a);return this.axis.getMaxTickWidth(a,b)+(e.isInner?20:40)};b.getHorizontalAxisHeight=function(a){var b=this.config,e=30;if("x"===a&&!b.axis_x_show)return 8;if("x"===a&&b.axis_x_height)return b.axis_x_height;if("y"===a&&!b.axis_y_show)return!b.legend_show||this.isLegendRight||this.isLegendInset?1:10;if("y2"===a&&!b.axis_y2_show)return this.rotated_padding_top;"x"===a&&!b.axis_rotated&&b.axis_x_tick_rotate&&(e=30+this.axis.getMaxTickWidth(a)*
Math.cos(Math.PI*(90-b.axis_x_tick_rotate)/180));"y"===a&&b.axis_rotated&&b.axis_y_tick_rotate&&(e=30+this.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-b.axis_y_tick_rotate)/180));return e+(this.axis.getLabelPositionById(a).isInner?0:10)+("y2"===a?-10:0)};b.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())};b.getShapeIndices=function(a){var b=this.config,e={},c=0,d,f;this.filterTargetsToShow(this.data.targets.filter(a,this)).forEach(function(a){for(d=0;d<b.data_groups.length;d++)if(!(0>
b.data_groups[d].indexOf(a.id)))for(f=0;f<b.data_groups[d].length;f++)if(b.data_groups[d][f]in e){e[a.id]=e[b.data_groups[d][f]];break}w(e[a.id])&&(e[a.id]=c++)});e.__max__=c-1;return e};b.getShapeX=function(a,b,c,d){var e=d?this.subX:this.x;return function(d){var f=d.id in c?c[d.id]:0;return d.x||0===d.x?e(d.x)-a*(b/2-f):0}};b.getShapeY=function(a){var b=this;return function(e){return(a?b.getSubYScale(e.id):b.getYScale(e.id))(e.value)}};b.getShapeOffset=function(a,b,c){var e=this,d=e.orderTargets(e.filterTargetsToShow(e.data.targets.filter(a,
e))),f=d.map(function(a){return a.id});return function(a,g){var m=c?e.getSubYScale(a.id):e.getYScale(a.id),h=m(0),l=h;d.forEach(function(c){var d=e.isStepType(a)?e.convertValuesToStep(c.values):c.values;if(c.id!==a.id&&b[c.id]===b[a.id]&&f.indexOf(c.id)<f.indexOf(a.id)){if("undefined"===typeof d[g]||+d[g].x!==+a.x)g=-1,d.forEach(function(b,e){b.x===a.x&&(g=e)});g in d&&0<=d[g].value*a.value&&(l+=m(d[g].value)-h)}});return l}};b.isWithinShape=function(a,b){var e=this.d3.select(a),c;this.isTargetToShow(b.id)?
"circle"===a.nodeName?c=this.isStepType(b)?this.isWithinStep(a,this.getYScale(b.id)(b.value)):this.isWithinCircle(a,1.5*this.pointSelectR(b)):"path"===a.nodeName&&(c=e.classed(l.bar)?this.isWithinBar(a):!0):c=!1;return c};b.getInterpolate=function(a){var b=this.isInterpolationType(this.config.spline_interpolation_type)?this.config.spline_interpolation_type:"cardinal";return this.isSplineType(a)?b:this.isStepType(a)?this.config.line_step_type:"linear"};b.initLine=function(){this.main.select("."+l.chart).append("g").attr("class",
l.chartLines)};b.updateTargetsForLine=function(a){var b=this,e=b.config,c=b.classChartLine.bind(b),d=b.classLines.bind(b),f=b.classAreas.bind(b),g=b.classCircles.bind(b),h=b.classFocus.bind(b);var k=b.main.select("."+l.chartLines).selectAll("."+l.chartLine).data(a).attr("class",function(a){return c(a)+h(a)}).enter().append("g").attr("class",c).style("opacity",0).style("pointer-events","none");k.append("g").attr("class",d);k.append("g").attr("class",f);k.append("g").attr("class",function(a){return b.generateClass(l.selectedCircles,
a.id)});k.append("g").attr("class",g).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null});a.forEach(function(a){b.main.selectAll("."+l.selectedCircles+b.getTargetSelectorSuffix(a.id)).selectAll("."+l.selectedCircle).each(function(b){b.value=a.values[b.index].value})})};b.updateLine=function(a){var b=this;b.mainLine=b.main.selectAll("."+l.lines).selectAll("."+l.line).data(b.lineData.bind(b));b.mainLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",
b.color);b.mainLine.style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null);b.mainLine.exit().transition().duration(a).style("opacity",0).remove()};b.redrawLine=function(a,b){return[(b?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]};b.generateDrawLine=function(a,b){var e=this,c=e.config,d=e.d3.svg.line(),f=e.generateGetLinePoints(a,b),
g=b?e.getSubYScale:e.getYScale;a=function(a){return(b?e.subxx:e.xx).call(e,a)};var m=function(a,b){return 0<c.data_groups.length?f(a,b)[0][1]:g.call(e,a.id)(a.value)};d=c.axis_rotated?d.x(m).y(a):d.x(a).y(m);c.line_connectNull||(d=d.defined(function(a){return null!=a.value}));return function(a){var f=c.line_connectNull?e.filterRemoveNull(a.values):a.values,m=b?e.x:e.subX,h=g.call(e,a.id),l=0,k=0;e.isLineType(a)?c.data_regions[a.id]?a=e.lineWithRegions(f,m,h,c.data_regions[a.id]):(e.isStepType(a)&&
(f=e.convertValuesToStep(f)),a=d.interpolate(e.getInterpolate(a))(f)):(f[0]&&(l=m(f[0].x),k=h(f[0].value)),a=c.axis_rotated?"M "+k+" "+l:"M "+l+" "+k);return a?a:"M 0 0"}};b.generateGetLinePoints=function(a,b){var e=this,c=e.config,d=e.getShapeX(0,a.__max__+1,a,!!b),f=e.getShapeY(!!b),g=e.getShapeOffset(e.isLineType,a,!!b),m=b?e.getSubYScale:e.getYScale;return function(a,b){var h=m.call(e,a.id)(0);b=g(a,b)||h;var l=d(a),k=f(a);c.axis_rotated&&(0<a.value&&k<h||0>a.value&&h<k)&&(k=h);return[[l,k-(h-
b)],[l,k-(h-b)],[l,k-(h-b)],[l,k-(h-b)]]}};b.lineWithRegions=function(a,b,c,d){function e(a,b){var e;for(e=0;e<b.length;e++)if(b[e].start<a&&a<=b[e].end)return!0;return!1}function f(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var g=this.config,m,h="M",l=this.isCategorized()?.5:0,k=[];if(z(d))for(m=0;m<d.length;m++)k[m]={},w(d[m].start)?k[m].start=a[0].x:k[m].start=this.isTimeSeries()?this.parseDate(d[m].start):d[m].start,w(d[m].end)?k[m].end=a[a.length-1].x:k[m].end=this.isTimeSeries()?
this.parseDate(d[m].end):d[m].end;var n=g.axis_rotated?function(a){return c(a.value)}:function(a){return b(a.x)};var x=g.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)};d=this.isTimeSeries()?function(a,e,d,m){var h=a.x.getTime();e=e.x-a.x;a=new Date(h+e*d);h=new Date(h+e*(d+m));d=g.axis_rotated?[[c(p(d)),b(a)],[c(p(d+m)),b(h)]]:[[b(a),c(p(d))],[b(h),c(p(d+m))]];return f(d)}:function(a,e,d,m){a=g.axis_rotated?[[c(p(d),!0),b(q(d))],[c(p(d+m),!0),b(q(d+m))]]:[[b(q(d),!0),c(p(d))],
[b(q(d+m),!0),c(p(d+m))]];return f(a)};for(m=0;m<a.length;m++)if(w(k)||!e(a[m].x,k))h+=" "+n(a[m])+" "+x(a[m]);else{var q=this.getScale(a[m-1].x+l,a[m].x+l,this.isTimeSeries());var p=this.getScale(a[m-1].value,a[m].value);var t=b(a[m].x)-b(a[m-1].x);var r=c(a[m].value)-c(a[m-1].value);t=Math.sqrt(Math.pow(t,2)+Math.pow(r,2));r=2/t;var v=2*r;for(t=r;1>=t;t+=v)h+=d(a[m-1],a[m],t,r)}return h};b.updateArea=function(a){var b=this,e=b.d3;b.mainArea=b.main.selectAll("."+l.areas).selectAll("."+l.area).data(b.lineData.bind(b));
b.mainArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){b.orgAreaOpacity=+e.select(this).style("opacity");return 0});b.mainArea.style("opacity",b.orgAreaOpacity);b.mainArea.exit().transition().duration(a).style("opacity",0).remove()};b.redrawArea=function(a,b){return[(b?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]};b.generateDrawArea=function(a,
b){var e=this,c=e.config,d=e.d3.svg.area(),f=e.generateGetAreaPoints(a,b),g=b?e.getSubYScale:e.getYScale;a=function(a){return(b?e.subxx:e.xx).call(e,a)};var m=function(a,b){return 0<c.data_groups.length?f(a,b)[0][1]:g.call(e,a.id)(e.getAreaBaseValue(a.id))},h=function(a,b){return 0<c.data_groups.length?f(a,b)[1][1]:g.call(e,a.id)(a.value)};d=c.axis_rotated?d.x0(m).x1(h).y(a):d.x(a).y0(c.area_above?0:m).y1(h);c.line_connectNull||(d=d.defined(function(a){return null!==a.value}));return function(a){var b=
c.line_connectNull?e.filterRemoveNull(a.values):a.values,f=0,g=0;e.isAreaType(a)?(e.isStepType(a)&&(b=e.convertValuesToStep(b)),a=d.interpolate(e.getInterpolate(a))(b)):(b[0]&&(f=e.x(b[0].x),g=e.getYScale(a.id)(b[0].value)),a=c.axis_rotated?"M "+g+" "+f:"M "+f+" "+g);return a?a:"M 0 0"}};b.getAreaBaseValue=function(){return 0};b.generateGetAreaPoints=function(a,b){var e=this,c=e.config,d=e.getShapeX(0,a.__max__+1,a,!!b),f=e.getShapeY(!!b),g=e.getShapeOffset(e.isAreaType,a,!!b),m=b?e.getSubYScale:
e.getYScale;return function(a,b){var h=m.call(e,a.id)(0);b=g(a,b)||h;var l=d(a),k=f(a);c.axis_rotated&&(0<a.value&&k<h||0>a.value&&h<k)&&(k=h);return[[l,b],[l,k-(h-b)],[l,k-(h-b)],[l,b]]}};b.updateCircle=function(){this.mainCircle=this.main.selectAll("."+l.circles).selectAll("."+l.circle).data(this.lineOrScatterData.bind(this));this.mainCircle.enter().append("circle").attr("class",this.classCircle.bind(this)).attr("r",this.pointR.bind(this)).style("fill",this.color);this.mainCircle.style("opacity",
this.initialOpacityForCircle.bind(this));this.mainCircle.exit().remove()};b.redrawCircle=function(a,b,c){var e=this.main.selectAll("."+l.selectedCircle);return[(c?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",a).attr("cy",b),(c?e.transition(Math.random().toString()):e).attr("cx",a).attr("cy",b)]};b.circleX=function(a){return a.x||0===a.x?this.x(a.x):null};b.updateCircleY=function(){var a=this;
if(0<a.config.data_groups.length){var b=a.getShapeIndices(a.isLineType);var c=a.generateGetLinePoints(b);a.circleY=function(a,b){return c(a,b)[0][1]}}else a.circleY=function(b){return a.getYScale(b.id)(b.value)}};b.getCircles=function(a,b){return(b?this.main.selectAll("."+l.circles+this.getTargetSelectorSuffix(b)):this.main).selectAll("."+l.circle+(n(a)?"-"+a:""))};b.expandCircles=function(a,b,c){var e=this.pointExpandedR.bind(this);c&&this.unexpandCircles();this.getCircles(a,b).classed(l.EXPANDED,
!0).attr("r",e)};b.unexpandCircles=function(a){var b=this,e=b.pointR.bind(b);b.getCircles(a).filter(function(){return b.d3.select(this).classed(l.EXPANDED)}).classed(l.EXPANDED,!1).attr("r",e)};b.pointR=function(a){var b=this.config;return this.isStepType(a)?0:p(b.point_r)?b.point_r(a):b.point_r};b.pointExpandedR=function(a){var b=this.config;return b.point_focus_expand_enabled?b.point_focus_expand_r?b.point_focus_expand_r:1.75*this.pointR(a):this.pointR(a)};b.pointSelectR=function(a){var b=this.config;
return p(b.point_select_r)?b.point_select_r(a):b.point_select_r?b.point_select_r:4*this.pointR(a)};b.isWithinCircle=function(a,b){var e=this.d3,c=e.mouse(a);e=e.select(a);a=+e.attr("cx");e=+e.attr("cy");return Math.sqrt(Math.pow(a-c[0],2)+Math.pow(e-c[1],2))<b};b.isWithinStep=function(a,b){return 30>Math.abs(b-this.d3.mouse(a)[1])};b.initBar=function(){this.main.select("."+l.chart).append("g").attr("class",l.chartBars)};b.updateTargetsForBar=function(a){var b=this.config,e=this.classChartBar.bind(this),
c=this.classBars.bind(this),d=this.classFocus.bind(this);this.main.select("."+l.chartBars).selectAll("."+l.chartBar).data(a).attr("class",function(a){return e(a)+d(a)}).enter().append("g").attr("class",e).style("opacity",0).style("pointer-events","none").append("g").attr("class",c).style("cursor",function(a){return b.data_selection_isselectable(a)?"pointer":null})};b.updateBar=function(a){var b=this,e=b.barData.bind(b),c=b.classBar.bind(b),d=b.initialOpacity.bind(b),f=function(a){return b.color(a.id)};
b.mainBar=b.main.selectAll("."+l.bars).selectAll("."+l.bar).data(e);b.mainBar.enter().append("path").attr("class",c).style("stroke",f).style("fill",f);b.mainBar.style("opacity",d);b.mainBar.exit().transition().duration(a).style("opacity",0).remove()};b.redrawBar=function(a,b){return[(b?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",a).style("fill",this.color).style("opacity",1)]};b.getBarW=function(a,b){var e=this.config;a="number"===typeof e.bar_width?e.bar_width:b?a.tickInterval()*
e.bar_width_ratio/b:0;return e.bar_width_max&&a>e.bar_width_max?e.bar_width_max:a};b.getBars=function(a,b){return(b?this.main.selectAll("."+l.bars+this.getTargetSelectorSuffix(b)):this.main).selectAll("."+l.bar+(n(a)?"-"+a:""))};b.expandBars=function(a,b,c){c&&this.unexpandBars();this.getBars(a,b).classed(l.EXPANDED,!0)};b.unexpandBars=function(a){this.getBars(a).classed(l.EXPANDED,!1)};b.generateDrawBar=function(a,b){var e=this.config,c=this.generateGetBarPoints(a,b);return function(a,b){a=c(a,b);
b=e.axis_rotated?1:0;var d=e.axis_rotated?0:1;return"M "+a[0][b]+","+a[0][d]+" L"+a[1][b]+","+a[1][d]+" L"+a[2][b]+","+a[2][d]+" L"+a[3][b]+","+a[3][d]+" z"}};b.generateGetBarPoints=function(a,b){var e=this,c=a.__max__+1,d=e.getBarW(b?e.subXAxis:e.xAxis,c),f=e.getShapeX(d,c,a,!!b),g=e.getShapeY(!!b),m=e.getShapeOffset(e.isBarType,a,!!b),h=b?e.getSubYScale:e.getYScale;return function(a,b){var c=h.call(e,a.id)(0);b=m(a,b)||c;var l=f(a),k=g(a);e.config.axis_rotated&&(0<a.value&&k<c||0>a.value&&c<k)&&
(k=c);return[[l,b],[l,k-(c-b)],[l+d,k-(c-b)],[l+d,b]]}};b.isWithinBar=function(a){var b=this.d3.mouse(a),e=a.getBoundingClientRect(),c=a.pathSegList.getItem(0),d=a.pathSegList.getItem(1);a=Math.min(c.x,d.x);c=Math.min(c.y,d.y);d=e.width;e=e.height;return a-2<b[0]&&b[0]<a+d+2&&c-2<b[1]&&b[1]<c+e+2};b.initText=function(){this.main.select("."+l.chart).append("g").attr("class",l.chartTexts);this.mainText=this.d3.selectAll([])};b.updateTargetsForText=function(a){var b=this.classChartText.bind(this),e=
this.classTexts.bind(this),c=this.classFocus.bind(this);this.main.select("."+l.chartTexts).selectAll("."+l.chartText).data(a).attr("class",function(a){return b(a)+c(a)}).enter().append("g").attr("class",b).style("opacity",0).style("pointer-events","none").append("g").attr("class",e)};b.updateText=function(a){var b=this,e=b.config,c=b.barOrLineData.bind(b),d=b.classText.bind(b);b.mainText=b.main.selectAll("."+l.texts).selectAll("."+l.text).data(c);b.mainText.enter().append("text").attr("class",d).attr("text-anchor",
function(a){return e.axis_rotated?0>a.value?"end":"start":"middle"}).style("stroke","none").style("fill",function(a){return b.color(a)}).style("fill-opacity",0);b.mainText.text(function(a,e,c){return b.dataLabelFormat(a.id)(a.value,a.id,e,c)});b.mainText.exit().transition().duration(a).style("fill-opacity",0).remove()};b.redrawText=function(a,b,c,d){return[(d?this.mainText.transition():this.mainText).attr("x",a).attr("y",b).style("fill",this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]};
b.getTextRect=function(a,b,c){var e=this.d3.select("body").append("div").classed("c3",!0),d=e.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0);c=this.d3.select(c).style("font");var f;d.selectAll(".dummy").data([a]).enter().append("text").classed(b?b:"",!0).style("font",c).text(a).each(function(){f=this.getBoundingClientRect()});e.remove();return f};b.generateXYForText=function(a,b,c,d){var e=this,f=e.generateGetAreaPoints(a,!1),g=e.generateGetBarPoints(b,
!1),m=e.generateGetLinePoints(c,!1),h=d?e.getXForText:e.getYForText;return function(a,b){var c=e.isAreaType(a)?f:e.isBarType(a)?g:m;return h.call(e,c(a,b),a,this)}};b.getXForText=function(a,b,c){c=c.getBoundingClientRect();if(this.config.axis_rotated){var e=this.isBarType(b)?4:6;a=a[2][1]+e*(0>b.value?-1:1)}else a=this.hasType("bar")?(a[2][0]+a[0][0])/2:a[0][0];null===b.value&&(a>this.width?a=this.width-c.width:0>a&&(a=4));return a};b.getYForText=function(a,b,c){c=c.getBoundingClientRect();this.config.axis_rotated?
a=(a[0][0]+a[2][0]+.6*c.height)/2:(a=a[2][1],0>b.value||0===b.value&&!this.hasPositiveValue?(a+=c.height,this.isBarType(b)&&this.isSafari()?a-=3:!this.isBarType(b)&&this.isChrome()&&(a+=3)):a+=this.isBarType(b)?-3:-6);null!==b.value||this.config.axis_rotated||(a<c.height?a=c.height:a>this.height&&(a=this.height-4));return a};b.setTargetType=function(a,b){var e=this,c=e.config;e.mapToTargetIds(a).forEach(function(a){e.withoutFadeIn[a]=b===c.data_types[a];c.data_types[a]=b});a||(c.data_type=b)};b.hasType=
function(a,b){var e=this.config.data_types,c=!1;(b=b||this.data.targets)&&b.length?b.forEach(function(b){if((b=e[b.id])&&0<=b.indexOf(a)||!b&&"line"===a)c=!0}):Object.keys(e).length?Object.keys(e).forEach(function(b){e[b]===a&&(c=!0)}):c=this.config.data_type===a;return c};b.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",a)||this.hasType("gauge",a)};b.isLineType=function(a){var b=this.config;a=r(a)?a:a.id;return!b.data_types[a]||0<="line spline area area-spline step area-step".split(" ").indexOf(b.data_types[a])};
b.isStepType=function(a){a=r(a)?a:a.id;return 0<=["step","area-step"].indexOf(this.config.data_types[a])};b.isSplineType=function(a){a=r(a)?a:a.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[a])};b.isAreaType=function(a){a=r(a)?a:a.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[a])};b.isBarType=function(a){a=r(a)?a:a.id;return"bar"===this.config.data_types[a]};b.isScatterType=function(a){a=r(a)?a:a.id;return"scatter"===this.config.data_types[a]};
b.isPieType=function(a){a=r(a)?a:a.id;return"pie"===this.config.data_types[a]};b.isGaugeType=function(a){a=r(a)?a:a.id;return"gauge"===this.config.data_types[a]};b.isDonutType=function(a){a=r(a)?a:a.id;return"donut"===this.config.data_types[a]};b.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)};b.lineData=function(a){return this.isLineType(a)?[a]:[]};b.arcData=function(a){return this.isArcType(a.data)?[a]:[]};b.barData=function(a){return this.isBarType(a)?
a.values:[]};b.lineOrScatterData=function(a){return this.isLineType(a)||this.isScatterType(a)?a.values:[]};b.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]};b.isInterpolationType=function(a){return 0<="linear linear-closed basis basis-open basis-closed bundle cardinal cardinal-open cardinal-closed monotone".split(" ").indexOf(a)};b.initGrid=function(){var a=this.config,b=this.d3;this.grid=this.main.append("g").attr("clip-path",this.clipPathForGrid).attr("class",
l.grid);a.grid_x_show&&this.grid.append("g").attr("class",l.xgrids);a.grid_y_show&&this.grid.append("g").attr("class",l.ygrids);a.grid_focus_show&&this.grid.append("g").attr("class",l.xgridFocus).append("line").attr("class",l.xgridFocus);this.xgrid=b.selectAll([]);a.grid_lines_front||this.initGridLines()};b.initGridLines=function(){var a=this.d3;this.gridLines=this.main.append("g").attr("clip-path",this.clipPathForGrid).attr("class",l.grid+" "+l.gridLines);this.gridLines.append("g").attr("class",
l.xgridLines);this.gridLines.append("g").attr("class",l.ygridLines);this.xgridLines=a.selectAll([])};b.updateXGrid=function(a){var b=this,e=b.config,c=b.d3,d=b.generateGridData(e.grid_x_type,b.x),f=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=e.axis_rotated?{x1:0,x2:b.width,y1:function(a){return b.x(a)-f},y2:function(a){return b.x(a)-f}}:{x1:function(a){return b.x(a)+f},x2:function(a){return b.x(a)+f},y1:0,y2:b.height};b.xgrid=b.main.select("."+l.xgrids).selectAll("."+l.xgrid).data(d);b.xgrid.enter().append("line").attr("class",
l.xgrid);a||b.xgrid.attr(b.xgridAttr).style("opacity",function(){return+c.select(this).attr(e.axis_rotated?"y1":"x1")===(e.axis_rotated?b.height:0)?0:1});b.xgrid.exit().remove()};b.updateYGrid=function(){var a=this.config,b=this.yAxis.tickValues()||this.y.ticks(a.grid_y_ticks);this.ygrid=this.main.select("."+l.ygrids).selectAll("."+l.ygrid).data(b);this.ygrid.enter().append("line").attr("class",l.ygrid);this.ygrid.attr("x1",a.axis_rotated?this.y:0).attr("x2",a.axis_rotated?this.y:this.width).attr("y1",
a.axis_rotated?0:this.y).attr("y2",a.axis_rotated?this.height:this.y);this.ygrid.exit().remove();this.smoothLines(this.ygrid,"grid")};b.gridTextAnchor=function(a){return a.position?a.position:"end"};b.gridTextDx=function(a){return"start"===a.position?4:"middle"===a.position?0:-4};b.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0};b.yGridTextX=function(a){return"start"===a.position?0:"middle"===a.position?this.width/2:this.width};b.updateGrid=function(a){var b=
this.main,e=this.config;this.grid.style("visibility",this.hasArcType()?"hidden":"visible");b.select("line."+l.xgridFocus).style("visibility","hidden");e.grid_x_show&&this.updateXGrid();this.xgridLines=b.select("."+l.xgridLines).selectAll("."+l.xgridLine).data(e.grid_x_lines);var c=this.xgridLines.enter().append("g").attr("class",function(a){return l.xgridLine+(a["class"]?" "+a["class"]:"")});c.append("line").style("opacity",0);c.append("text").attr("text-anchor",this.gridTextAnchor).attr("transform",
e.axis_rotated?"":"rotate(-90)").attr("dx",this.gridTextDx).attr("dy",-5).style("opacity",0);this.xgridLines.exit().transition().duration(a).style("opacity",0).remove();e.grid_y_show&&this.updateYGrid();this.ygridLines=b.select("."+l.ygridLines).selectAll("."+l.ygridLine).data(e.grid_y_lines);b=this.ygridLines.enter().append("g").attr("class",function(a){return l.ygridLine+(a["class"]?" "+a["class"]:"")});b.append("line").style("opacity",0);b.append("text").attr("text-anchor",this.gridTextAnchor).attr("transform",
e.axis_rotated?"rotate(-90)":"").attr("dx",this.gridTextDx).attr("dy",-5).style("opacity",0);b=this.yv.bind(this);this.ygridLines.select("line").transition().duration(a).attr("x1",e.axis_rotated?b:0).attr("x2",e.axis_rotated?b:this.width).attr("y1",e.axis_rotated?0:b).attr("y2",e.axis_rotated?this.height:b).style("opacity",1);this.ygridLines.select("text").transition().duration(a).attr("x",e.axis_rotated?this.xGridTextX.bind(this):this.yGridTextX.bind(this)).attr("y",b).text(function(a){return a.text}).style("opacity",
1);this.ygridLines.exit().transition().duration(a).style("opacity",0).remove()};b.redrawGrid=function(a){var b=this.config,e=this.xv.bind(this),c=this.xgridLines.select("line"),d=this.xgridLines.select("text");return[(a?c.transition():c).attr("x1",b.axis_rotated?0:e).attr("x2",b.axis_rotated?this.width:e).attr("y1",b.axis_rotated?e:0).attr("y2",b.axis_rotated?e:this.height).style("opacity",1),(a?d.transition():d).attr("x",b.axis_rotated?this.yGridTextX.bind(this):this.xGridTextX.bind(this)).attr("y",
e).text(function(a){return a.text}).style("opacity",1)]};b.showXGridFocus=function(a){var b=this.config;a=a.filter(function(a){return a&&n(a.value)});var e=this.main.selectAll("line."+l.xgridFocus),c=this.xx.bind(this);!b.tooltip_show||this.hasType("scatter")||this.hasArcType()||(e.style("visibility","visible").data([a[0]]).attr(b.axis_rotated?"y1":"x1",c).attr(b.axis_rotated?"y2":"x2",c),this.smoothLines(e,"grid"))};b.hideXGridFocus=function(){this.main.select("line."+l.xgridFocus).style("visibility",
"hidden")};b.updateXgridFocus=function(){var a=this.config;this.main.select("line."+l.xgridFocus).attr("x1",a.axis_rotated?0:-10).attr("x2",a.axis_rotated?this.width:-10).attr("y1",a.axis_rotated?-10:0).attr("y2",a.axis_rotated?-10:this.height)};b.generateGridData=function(a,b){var e=[],c=this.main.select("."+l.axisX).selectAll(".tick").size();if("year"===a)for(b=this.getXDomain(),a=b[0].getFullYear(),b=b[1].getFullYear();a<=b;a++)e.push(new Date(a+"-01-01 00:00:00"));else e=b.ticks(10),e.length>
c&&(e=e.filter(function(a){return 0>(""+a).indexOf(".")}));return e};b.getGridFilterToRemove=function(a){return a?function(b){var e=!1;[].concat(a).forEach(function(a){if("value"in a&&b.value===a.value||"class"in a&&b["class"]===a["class"])e=!0});return e}:function(){return!0}};b.removeGridLines=function(a,b){var e=this.config,c=this.getGridFilterToRemove(a);a=function(a){return!c(a)};var d=b?l.xgridLine:l.ygridLine;this.main.select("."+(b?l.xgridLines:l.ygridLines)).selectAll("."+d).filter(c).transition().duration(e.transition_duration).style("opacity",
0).remove();b?e.grid_x_lines=e.grid_x_lines.filter(a):e.grid_y_lines=e.grid_y_lines.filter(a)};b.initTooltip=function(){var a=this,b=a.config,c;a.tooltip=a.selectChart.style("position","relative").append("div").attr("class",l.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none");if(b.tooltip_init_show){if(a.isTimeSeries()&&r(b.tooltip_init_x)){b.tooltip_init_x=a.parseDate(b.tooltip_init_x);for(c=0;c<a.data.targets[0].values.length&&0!==a.data.targets[0].values[c].x-
b.tooltip_init_x;c++);b.tooltip_init_x=c}a.tooltip.html(b.tooltip_contents.call(a,a.data.targets.map(function(c){return a.addName(c.values[b.tooltip_init_x])}),a.axis.getXAxisTickFormat(),a.getYFormat(a.hasArcType()),a.color));a.tooltip.style("top",b.tooltip_init_position.top).style("left",b.tooltip_init_position.left).style("display","block")}};b.getTooltipContent=function(a,b,c,d){var e=this.config;b=e.tooltip_format_title||b;var f=e.tooltip_format_name||function(a){return a};c=e.tooltip_format_value||
c;var g=this.isOrderAsc();if(0===e.data_groups.length)a.sort(function(a,b){a=a?a.value:null;b=b?b.value:null;return g?a-b:b-a});else{var h=this.orderTargets(this.data.targets).map(function(a){return a.id});a.sort(function(a,b){var c=a?a.value:null,e=b?b.value:null;0<c&&0<e&&(c=a?h.indexOf(a.id):null,e=b?h.indexOf(b.id):null);return g?c-e:e-c})}for(e=0;e<a.length;e++)if(a[e]&&(a[e].value||0===a[e].value)){if(!m){var m=E(b?b(a[e].x):a[e].x);m="<table class='"+this.CLASS.tooltip+"'>"+(m||0===m?"<tr><th colspan='2'>"+
m+"</th></tr>":"")}var l=E(c(a[e].value,a[e].ratio,a[e].id,a[e].index,a));if(void 0!==l&&null!==a[e].name){var k=E(f(a[e].name,a[e].ratio,a[e].id,a[e].index));var n=this.levelColor?this.levelColor(a[e].value):d(a[e].id);m+="<tr class='"+this.CLASS.tooltipName+"-"+this.getTargetSelectorSuffix(a[e].id)+"'>";m+="<td class='name'><span style='background-color:"+n+"'></span>"+k+"</td>";m+="<td class='value'>"+l+"</td>";m+="</tr>"}}return m+"</table>"};b.tooltipPosition=function(a,b,c,d){var e=this.config,
f=this.d3;var g=this.hasArcType();d=f.mouse(d);g?(e=(this.width-(this.isLegendRight?this.getLegendWidth():0))/2+d[0],a=this.height/2+d[1]+20):(g=this.getSvgLeft(!0),e.axis_rotated?(e=g+d[0]+100,b=e+b,g=this.currentWidth-this.getCurrentPaddingRight(),a=this.x(a[0].x)+20):(e=g+this.getCurrentPaddingLeft(!0)+this.x(a[0].x)+20,b=e+b,g=g+this.currentWidth-this.getCurrentPaddingRight(),a=d[1]+15),b>g&&(e-=b-g+20),a+c>this.currentHeight&&(a-=c+30));0>a&&(a=0);return{top:a,left:e}};b.showTooltip=function(a,
c){var e=this.config,d=this.hasArcType(),f=a.filter(function(a){return a&&n(a.value)}),g=e.tooltip_position||b.tooltipPosition;0!==f.length&&e.tooltip_show&&(this.tooltip.html(e.tooltip_contents.call(this,a,this.axis.getXAxisTickFormat(),this.getYFormat(d),this.color)).style("display","block"),a=this.tooltip.property("offsetWidth"),e=this.tooltip.property("offsetHeight"),c=g.call(this,f,a,e,c),this.tooltip.style("top",c.top+"px").style("left",c.left+"px"))};b.hideTooltip=function(){this.tooltip.style("display",
"none")};b.initLegend=function(){this.legendItemTextBox={};this.legendHasRendered=!1;this.legend=this.svg.append("g").attr("transform",this.getTranslate("legend"));this.config.legend_show?this.updateLegendWithDefaults():(this.legend.style("visibility","hidden"),this.hiddenLegendIds=this.mapToIds(this.data.targets))};b.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})};b.updateSizeForLegend=function(a,
b){var c=this.config,e=this.isLegendTop?this.getCurrentPaddingTop()+c.legend_inset_y+5.5:this.currentHeight-a-this.getCurrentPaddingBottom()-c.legend_inset_y;c=this.isLegendLeft?this.getCurrentPaddingLeft()+c.legend_inset_x+.5:this.currentWidth-b-this.getCurrentPaddingRight()-c.legend_inset_x+.5;this.margin3={top:this.isLegendRight?0:this.isLegendInset?e:this.currentHeight-a,right:NaN,bottom:0,left:this.isLegendRight?this.currentWidth-b:this.isLegendInset?c:0}};b.transformLegend=function(a){(a?this.legend.transition():
this.legend).attr("transform",this.getTranslate("legend"))};b.updateLegendStep=function(a){this.legendStep=a};b.updateLegendItemWidth=function(a){this.legendItemWidth=a};b.updateLegendItemHeight=function(a){this.legendItemHeight=a};b.getLegendWidth=function(){return this.config.legend_show?this.isLegendRight||this.isLegendInset?this.legendItemWidth*(this.legendStep+1):this.currentWidth:0};b.getLegendHeight=function(){var a=0;this.config.legend_show&&(a=this.isLegendRight?this.currentHeight:Math.max(20,
this.legendItemHeight)*(this.legendStep+1));return a};b.opacityForLegend=function(a){return a.classed(l.legendItemHidden)?null:1};b.opacityForUnfocusedLegend=function(a){return a.classed(l.legendItemHidden)?null:.3};b.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a);c.legend.selectAll("."+l.legendItem).filter(function(b){return 0<=a.indexOf(b)}).classed(l.legendItemFocused,b).transition().duration(100).style("opacity",function(){return(b?c.opacityForLegend:c.opacityForUnfocusedLegend).call(c,
c.d3.select(this))})};b.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+l.legendItem).classed(l.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})};b.showLegend=function(a){var b=this,c=b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility","visible"),b.legendHasRendered||b.updateLegendWithDefaults());b.removeHiddenLegendIds(a);b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",
function(){return b.opacityForLegend(b.d3.select(this))})};b.hideLegend=function(a){var b=this.config;b.legend_show&&y(a)&&(b.legend_show=!1,this.legend.style("visibility","hidden"));this.addHiddenLegendIds(a);this.legend.selectAll(this.selectorLegends(a)).style("opacity",0).style("visibility","hidden")};b.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}};b.updateLegend=function(a,b,c){function e(a,b){f.legendItemTextBox[b]||(f.legendItemTextBox[b]=f.getTextRect(a.textContent,l.legendItem,
a));return f.legendItemTextBox[b]}function d(b,c,d){function l(a,b){b||(z=(D-n-w)/2,10>z&&(z=(D-w)/2,n=0,v++));r[a]=v;t[v]=f.isLegendInset?10:z;q[a]=n;n+=w}var y=0===d;d=d===a.length-1;b=e(b,c);d=b.width+k+(!d||f.isLegendRight||f.isLegendInset?10:0)+g.legend_padding;b=b.height+4;var w=f.isLegendRight||f.isLegendInset?b:d,D=f.isLegendRight||f.isLegendInset?f.getLegendHeight():f.getLegendWidth();y&&(m=h=v=n=0);if(g.legend_show&&!f.isLegendToShow(c))x[c]=p[c]=r[c]=q[c]=0;else{x[c]=d;p[c]=b;if(!h||d>=
h)h=d;if(!m||b>=m)m=b;y=f.isLegendRight||f.isLegendInset?m:h;if(g.legend_equally){Object.keys(x).forEach(function(a){x[a]=h});Object.keys(p).forEach(function(a){p[a]=m});var z=(D-y*a.length)/2;10>z?(v=n=0,a.forEach(function(a){l(a)})):l(c,!0)}else l(c)}}var f=this,g=f.config,h=0,m=0,k=g.legend_item_tile_width+5,n=0,q={},x={},p={},t=[0],r={},v=0;a=a.filter(function(a){return!z(g.data_names[a])||null!==g.data_names[a]});b=b||{};var y=C(b,"withTransition",!0);var w=C(b,"withTransitionForTransform",!0);
f.isLegendInset&&(v=g.legend_inset_step?g.legend_inset_step:a.length,f.updateLegendStep(v));if(f.isLegendRight){var A=function(a){return h*r[a]};var F=function(a){return t[r[a]]+q[a]}}else f.isLegendInset?(A=function(a){return h*r[a]+10},F=function(a){return t[r[a]]+q[a]}):(A=function(a){return t[r[a]]+q[a]},F=function(a){return m*r[a]});var E=function(a,b){return A(a,b)+4+g.legend_item_tile_width};var G=function(a,b){return F(a,b)+9};var I=function(a,b){return A(a,b)};var Ta=function(a,b){return F(a,
b)-5};b=function(a,b){return A(a,b)-2};var Xa=function(a,b){return A(a,b)-2+g.legend_item_tile_width};var xa=function(a,b){return F(a,b)+4};var na=f.legend.selectAll("."+l.legendItem).data(a).enter().append("g").attr("class",function(a){return f.generateClass(l.legendItem,a)}).style("visibility",function(a){return f.isLegendToShow(a)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a){g.legend_item_onclick?g.legend_item_onclick.call(f,a):f.d3.event.altKey?(f.api.hide(),f.api.show(a)):
(f.api.toggle(a),f.isTargetToShow(a)?f.api.focus(a):f.api.revert())}).on("mouseover",function(a){g.legend_item_onmouseover?g.legend_item_onmouseover.call(f,a):(f.d3.select(this).classed(l.legendItemFocused,!0),!f.transiting&&f.isTargetToShow(a)&&f.api.focus(a))}).on("mouseout",function(a){g.legend_item_onmouseout?g.legend_item_onmouseout.call(f,a):(f.d3.select(this).classed(l.legendItemFocused,!1),f.api.revert())});na.append("text").text(function(a){return z(g.data_names[a])?g.data_names[a]:a}).each(function(a,
b){d(this,a,b)}).style("pointer-events","none").attr("x",f.isLegendRight||f.isLegendInset?E:-200).attr("y",f.isLegendRight||f.isLegendInset?-200:G);na.append("rect").attr("class",l.legendItemEvent).style("fill-opacity",0).attr("x",f.isLegendRight||f.isLegendInset?I:-200).attr("y",f.isLegendRight||f.isLegendInset?-200:Ta);na.append("line").attr("class",l.legendItemTile).style("stroke",f.color).style("pointer-events","none").attr("x1",f.isLegendRight||f.isLegendInset?b:-200).attr("y1",f.isLegendRight||
f.isLegendInset?-200:xa).attr("x2",f.isLegendRight||f.isLegendInset?Xa:-200).attr("y2",f.isLegendRight||f.isLegendInset?-200:xa).attr("stroke-width",g.legend_item_tile_height);na=f.legend.select("."+l.legendBackground+" rect");f.isLegendInset&&0<h&&0===na.size()&&(na=f.legend.insert("g","."+l.legendItem).attr("class",l.legendBackground).append("rect"));var Q=f.legend.selectAll("text").data(a).text(function(a){return z(g.data_names[a])?g.data_names[a]:a}).each(function(a,b){d(this,a,b)});(y?Q.transition():
Q).attr("x",E).attr("y",G);E=f.legend.selectAll("rect."+l.legendItemEvent).data(a);(y?E.transition():E).attr("width",function(a){return x[a]}).attr("height",function(a){return p[a]}).attr("x",I).attr("y",Ta);I=f.legend.selectAll("line."+l.legendItemTile).data(a);(y?I.transition():I).style("stroke",f.color).attr("x1",b).attr("y1",xa).attr("x2",Xa).attr("y2",xa);na&&(y?na.transition():na).attr("height",f.getLegendHeight()-12).attr("width",h*(v+1)+10);f.legend.selectAll("."+l.legendItem).classed(l.legendItemHidden,
function(a){return!f.isTargetToShow(a)});f.updateLegendItemWidth(h);f.updateLegendItemHeight(m);f.updateLegendStep(v);f.updateSizes();f.updateScales();f.updateSvgSize();f.transformAll(w,c);f.legendHasRendered=!0};b.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)};b.redrawTitle=function(){this.title.attr("x",this.xForTitle.bind(this)).attr("y",this.yForTitle.bind(this))};b.xForTitle=function(){var a=this.config,b=a.title_position||
"left";return 0<=b.indexOf("right")?this.currentWidth-this.getTextRect(this.title.node().textContent,this.CLASS.title,this.title.node()).width-a.title_padding.right:0<=b.indexOf("center")?(this.currentWidth-this.getTextRect(this.title.node().textContent,this.CLASS.title,this.title.node()).width)/2:a.title_padding.left};b.yForTitle=function(){return this.config.title_padding.top+this.getTextRect(this.title.node().textContent,this.CLASS.title,this.title.node()).height};b.getTitlePadding=function(){return this.yForTitle()+
this.config.title_padding.bottom};(function(a,b){if(Object.create)b.prototype=Object.create(a.prototype);else{var c=function(){};c.prototype=a.prototype;b.prototype=new c}return b.prototype.constructor=b})(function(a){this.owner=a},g);g.prototype.init=function(){var a=this.owner,b=a.config,c=a.main;a.axes.x=c.append("g").attr("class",l.axis+" "+l.axisX).attr("clip-path",a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",b.axis_x_show?"visible":"hidden");a.axes.x.append("text").attr("class",
l.axisXLabel).attr("transform",b.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this));a.axes.y=c.append("g").attr("class",l.axis+" "+l.axisY).attr("clip-path",b.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",b.axis_y_show?"visible":"hidden");a.axes.y.append("text").attr("class",l.axisYLabel).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this));a.axes.y2=c.append("g").attr("class",
l.axis+" "+l.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",b.axis_y2_show?"visible":"hidden");a.axes.y2.append("text").attr("class",l.axisY2Label).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))};g.prototype.getXAxis=function(b,c,d,f,g,h,l){var e=this.owner,m=e.config;g={isCategory:e.isCategorized(),withOuterTick:g,tickMultiline:m.axis_x_tick_multiline,tickWidth:m.axis_x_tick_width,tickTextRotate:l?0:m.axis_x_tick_rotate,
withoutTransition:h};b=a(e.d3,g).scale(b).orient(c);e.isTimeSeries()&&f&&"function"!==typeof f&&(f=f.map(function(a){return e.parseDate(a)}));b.tickFormat(d).tickValues(f);e.isCategorized()&&(b.tickCentered(m.axis_x_tick_centered),y(m.axis_x_tick_culling)&&(m.axis_x_tick_culling=!1));return b};g.prototype.updateXAxisTickValues=function(a,b){var c=this.owner,e=c.config;if(e.axis_x_tick_fit||e.axis_x_tick_count)var d=this.generateTickValues(c.mapTargetsToUniqueXs(a),e.axis_x_tick_count,c.isTimeSeries());
b?b.tickValues(d):(c.xAxis.tickValues(d),c.subXAxis.tickValues(d));return d};g.prototype.getYAxis=function(b,c,d,f,g,h,l){var e=this.owner,m=e.config;b=a(e.d3,{withOuterTick:g,withoutTransition:h,tickTextRotate:l?0:m.axis_y_tick_rotate}).scale(b).orient(c).tickFormat(d);e.isTimeSeriesY()?b.ticks(e.d3.time[m.axis_y_tick_time_value],m.axis_y_tick_time_interval):b.tickValues(f);return b};g.prototype.getId=function(a){var b=this.owner.config;return a in b.data_axes?b.data_axes[a]:"y"};g.prototype.getXAxisTickFormat=
function(){var a=this.owner,b=a.config,c=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(a){return 0>a?a.toFixed(0):a};b.axis_x_tick_format&&(p(b.axis_x_tick_format)?c=b.axis_x_tick_format:a.isTimeSeries()&&(c=function(c){return c?a.axisTimeFormat(b.axis_x_tick_format)(c):""}));return p(c)?function(b){return c.call(a,b)}:c};g.prototype.getTickValues=function(a,b){return a?a:b?b.tickValues():void 0};g.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,
this.owner.xAxis)};g.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)};g.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)};g.prototype.getLabelOptionByAxisId=function(a){var b=this.owner.config;if("y"===a)var c=b.axis_y_label;else"y2"===a?c=b.axis_y2_label:"x"===a&&(c=b.axis_x_label);return c};g.prototype.getLabelText=function(a){a=this.getLabelOptionByAxisId(a);
return r(a)?a:a?a.text:null};g.prototype.setLabelText=function(a,b){var c=this.owner.config,e=this.getLabelOptionByAxisId(a);r(e)?"y"===a?c.axis_y_label=b:"y2"===a?c.axis_y2_label=b:"x"===a&&(c.axis_x_label=b):e&&(e.text=b)};g.prototype.getLabelPosition=function(a,b){b=(a=this.getLabelOptionByAxisId(a))&&"object"===typeof a&&a.position?a.position:b;return{isInner:0<=b.indexOf("inner"),isOuter:0<=b.indexOf("outer"),isLeft:0<=b.indexOf("left"),isCenter:0<=b.indexOf("center"),isRight:0<=b.indexOf("right"),
isTop:0<=b.indexOf("top"),isMiddle:0<=b.indexOf("middle"),isBottom:0<=b.indexOf("bottom")}};g.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")};g.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")};g.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")};
g.prototype.getLabelPositionById=function(a){return"y2"===a?this.getY2AxisLabelPosition():"y"===a?this.getYAxisLabelPosition():this.getXAxisLabelPosition()};g.prototype.textForXAxisLabel=function(){return this.getLabelText("x")};g.prototype.textForYAxisLabel=function(){return this.getLabelText("y")};g.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")};g.prototype.xForAxisLabel=function(a,b){var c=this.owner;return a?b.isLeft?0:b.isCenter?c.width/2:c.width:b.isBottom?-c.height:
b.isMiddle?-c.height/2:0};g.prototype.dxForAxisLabel=function(a,b){return a?b.isLeft?"0.5em":b.isRight?"-0.5em":"0":b.isTop?"-0.5em":b.isBottom?"0.5em":"0"};g.prototype.textAnchorForAxisLabel=function(a,b){return a?b.isLeft?"start":b.isCenter?"middle":"end":b.isBottom?"start":b.isMiddle?"middle":"end"};g.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};g.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,
this.getYAxisLabelPosition())};g.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};g.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};g.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};g.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,
this.getY2AxisLabelPosition())};g.prototype.dyForXAxisLabel=function(){var a=this.owner.config,b=this.getXAxisLabelPosition();return a.axis_rotated?b.isInner?"1.2em":-25-this.getMaxTickWidth("x"):b.isInner?"-0.5em":a.axis_x_height?a.axis_x_height-10:"3em"};g.prototype.dyForYAxisLabel=function(){var a=this.owner,b=this.getYAxisLabelPosition();return a.config.axis_rotated?b.isInner?"-0.5em":"3em":b.isInner?"1.2em":-10-(a.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)};g.prototype.dyForY2AxisLabel=
function(){var a=this.owner,b=this.getY2AxisLabelPosition();return a.config.axis_rotated?b.isInner?"1.2em":"-2.2em":b.isInner?"-0.5em":15+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)};g.prototype.textAnchorForXAxisLabel=function(){return this.textAnchorForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};g.prototype.textAnchorForYAxisLabel=function(){return this.textAnchorForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};g.prototype.textAnchorForY2AxisLabel=
function(){return this.textAnchorForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};g.prototype.getMaxTickWidth=function(a,b){var c=this.owner,e=c.config,d=0;if(b&&c.currentMaxTickWidths[a])return c.currentMaxTickWidths[a];if(c.svg){b=c.filterTargetsToShow(c.data.targets);if("y"===a){var f=c.y.copy().domain(c.getYDomain(b,"y"));e=this.getYAxis(f,c.yOrient,e.axis_y_tick_format,c.yAxisTickValues,!1,!0,!0)}else"y2"===a?(f=c.y2.copy().domain(c.getYDomain(b,"y2")),e=this.getYAxis(f,
c.y2Orient,e.axis_y2_tick_format,c.y2AxisTickValues,!1,!0,!0)):(f=c.x.copy().domain(c.getXDomain(b)),e=this.getXAxis(f,c.xOrient,c.xAxisTickFormat,c.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(b,e));var g=c.d3.select("body").append("div").classed("c3",!0);b=g.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0);b.append("g").call(e).each(function(){c.d3.select(this).selectAll("text").each(function(){var a=this.getBoundingClientRect();d<a.width&&
(d=a.width)});g.remove()})}c.currentMaxTickWidths[a]=0>=d?c.currentMaxTickWidths[a]:d;return c.currentMaxTickWidths[a]};g.prototype.updateLabels=function(a){var b=this.owner,c=b.main.select("."+l.axisX+" ."+l.axisXLabel),e=b.main.select("."+l.axisY+" ."+l.axisYLabel);b=b.main.select("."+l.axisY2+" ."+l.axisY2Label);(a?c.transition():c).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));
(a?e.transition():e).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));(a?b.transition():b).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))};g.prototype.getPadding=function(a,b,c,d){var e="number"===typeof a?a:a[b];return n(e)?"ratio"===a.unit?a[b]*d:this.convertPixelsToAxisPadding(e,
d):c};g.prototype.convertPixelsToAxisPadding=function(a,b){var c=this.owner;return a/(c.config.axis_rotated?c.width:c.height)*b};g.prototype.generateTickValues=function(a,b,c){var e=a,d;if(b)if(b=p(b)?b():b,1===b)e=[a[0]];else if(2===b)e=[a[0],a[a.length-1]];else if(2<b){var f=b-2;b=a[0];a=a[a.length-1];var g=(a-b)/(f+1);e=[b];for(d=0;d<f;d++){var h=+b+g*(d+1);e.push(c?new Date(h):h)}e.push(a)}c||(e=e.sort(function(a,b){return a-b}));return e};g.prototype.generateTransitions=function(a){var b=this.owner.axes;
return{axisX:a?b.x.transition().duration(a):b.x,axisY:a?b.y.transition().duration(a):b.y,axisY2:a?b.y2.transition().duration(a):b.y2,axisSubX:a?b.subx.transition().duration(a):b.subx}};g.prototype.redraw=function(a,b){var c=this.owner;c.axes.x.style("opacity",b?0:1);c.axes.y.style("opacity",b?0:1);c.axes.y2.style("opacity",b?0:1);c.axes.subx.style("opacity",b?0:1);a.axisX.call(c.xAxis);a.axisY.call(c.yAxis);a.axisY2.call(c.y2Axis);a.axisSubX.call(c.subXAxis)};b.getClipPath=function(a){return"url("+
(0<=k.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+a+")"};b.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")};b.getAxisClipX=function(a){var b=Math.max(30,this.margin.left);return a?-(1+b):-(b-1)};b.getAxisClipY=function(a){return a?-20:-this.margin.top};b.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)};b.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)};b.getYAxisClipX=
function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)};b.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)};b.getAxisClipWidth=function(a){var b=Math.max(30,this.margin.left),c=Math.max(30,this.margin.right);return a?this.width+2+b+c:this.margin.left+20};b.getAxisClipHeight=function(a){return(a?this.margin.bottom:this.margin.top+this.height)+20};b.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)};b.getXAxisClipHeight=
function(){return this.getAxisClipHeight(!this.config.axis_rotated)};b.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)};b.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)};b.initPie=function(){var a=this.config;this.pie=this.d3.layout.pie().value(function(a){return a.values.reduce(function(a,b){return a+b.value},0)});a.data_order||this.pie.sort(null)};b.updateRadius=function(){var a=this.config;
a=a.gauge_width||a.donut_width;this.radiusExpanded=Math.min(this.arcWidth,this.arcHeight)/2;this.radius=.95*this.radiusExpanded;this.innerRadiusRatio=a?(this.radius-a)/this.radius:.6;this.innerRadius=this.hasType("donut")||this.hasType("gauge")?this.radius*this.innerRadiusRatio:0};b.updateArc=function(){this.svgArc=this.getSvgArc();this.svgArcExpanded=this.getSvgArcExpanded();this.svgArcExpandedSub=this.getSvgArcExpanded(.98)};b.updateAngle=function(a){var b=this.config,c=!1,e=0;if(!b)return null;
this.pie(this.filterTargetsToShow(this.data.targets)).forEach(function(b){c||b.data.id!==a.data.id||(c=!0,a=b,a.index=e);e++});isNaN(a.startAngle)&&(a.startAngle=0);isNaN(a.endAngle)&&(a.endAngle=a.startAngle);if(this.isGaugeType(a.data)){var d=b.gauge_min;var f=b.gauge_max;var g=Math.PI*(b.gauge_fullCircle?2:1)/(f-d);d=a.value<d?0:a.value<f?a.value-d:f-d;a.startAngle=b.gauge_startingAngle;a.endAngle=a.startAngle+g*d}return c?a:null};b.getSvgArc=function(){var a=this,b=a.d3.svg.arc().outerRadius(a.radius).innerRadius(a.innerRadius),
c=function(c,e){return e?b(c):(c=a.updateAngle(c))?b(c):"M 0 0"};c.centroid=b.centroid;return c};b.getSvgArcExpanded=function(a){var b=this,c=b.d3.svg.arc().outerRadius(b.radiusExpanded*(a?a:1)).innerRadius(b.innerRadius);return function(a){return(a=b.updateAngle(a))?c(a):"M 0 0"}};b.getArc=function(a,b,c){return c||this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"};b.transformForArcLabel=function(a){var b=this.config,c=this.updateAngle(a);var e="";if(c&&!this.hasType("gauge")){e=this.svgArc.centroid(c);
c=isNaN(e[0])?0:e[0];e=isNaN(e[1])?0:e[1];var d=Math.sqrt(c*c+e*e);a=this.hasType("donut")&&b.donut_label_ratio?p(b.donut_label_ratio)?b.donut_label_ratio(a,this.radius,d):b.donut_label_ratio:this.hasType("pie")&&b.pie_label_ratio?p(b.pie_label_ratio)?b.pie_label_ratio(a,this.radius,d):b.pie_label_ratio:this.radius&&d?(.375<36/this.radius?1.175-36/this.radius:.8)*this.radius/d:0;e="translate("+c*a+","+e*a+")"}return e};b.getArcRatio=function(a){var b=this.config;b=Math.PI*(this.hasType("gauge")&&
!b.gauge_fullCircle?1:2);return a?(a.endAngle-a.startAngle)/b:null};b.convertToArcData=function(a){return this.addName({id:a.data.id,value:a.value,ratio:this.getArcRatio(a),index:a.index})};b.textForArcLabel=function(a){var b,c;if(!this.shouldShowArcLabel())return"";var e=(b=this.updateAngle(a))?b.value:null;b=this.getArcRatio(b);a=a.data.id;return this.hasType("gauge")||this.meetsArcLabelThreshold(b)?(c=this.getArcLabelFormat())?c(e,b,a):this.defaultArcValueFormat(e,b):""};b.expandArc=function(a){var b=
this;if(b.transiting)var c=k.setInterval(function(){b.transiting||(k.clearInterval(c),0<b.legend.selectAll(".c3-legend-item-focused").size()&&b.expandArc(a))},10);else a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+l.chartArc)).each(function(a){b.shouldExpand(a.data.id)&&b.d3.select(this).selectAll("path").transition().duration(b.expandDuration(a.data.id)).attr("d",b.svgArcExpanded).transition().duration(2*b.expandDuration(a.data.id)).attr("d",b.svgArcExpandedSub).each(function(a){b.isDonutType(a.data)})})};
b.unexpandArc=function(a){var b=this;b.transiting||(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+l.chartArc)).selectAll("path").transition().duration(function(a){return b.expandDuration(a.data.id)}).attr("d",b.svgArc),b.svg.selectAll("."+l.arc).style("opacity",1))};b.expandDuration=function(a){var b=this.config;return this.isDonutType(a)?b.donut_expand_duration:this.isGaugeType(a)?b.gauge_expand_duration:this.isPieType(a)?b.pie_expand_duration:50};b.shouldExpand=function(a){var b=
this.config;return this.isDonutType(a)&&b.donut_expand||this.isGaugeType(a)&&b.gauge_expand||this.isPieType(a)&&b.pie_expand};b.shouldShowArcLabel=function(){var a=this.config,b=!0;this.hasType("donut")?b=a.donut_label_show:this.hasType("pie")&&(b=a.pie_label_show);return b};b.meetsArcLabelThreshold=function(a){var b=this.config;b=this.hasType("donut")?b.donut_label_threshold:b.pie_label_threshold;return a>=b};b.getArcLabelFormat=function(){var a=this.config,b=a.pie_label_format;this.hasType("gauge")?
b=a.gauge_label_format:this.hasType("donut")&&(b=a.donut_label_format);return b};b.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""};b.updateTargetsForArc=function(a){var b=this.main,c=this.classChartArc.bind(this),e=this.classArcs.bind(this),d=this.classFocus.bind(this);a=b.select("."+l.chartArcs).selectAll("."+l.chartArc).data(this.pie(a)).attr("class",function(a){return c(a)+d(a.data)}).enter().append("g").attr("class",c);a.append("g").attr("class",e);a.append("text").attr("dy",
this.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")};b.initArc=function(){this.arcs=this.main.select("."+l.chart).append("g").attr("class",l.chartArcs).attr("transform",this.getTranslate("arc"));this.arcs.append("text").attr("class",l.chartArcsTitle).style("text-anchor","middle").text(this.getArcTitle())};b.redrawArc=function(a,b,c){var e=this,d=e.d3,f=e.config,g=e.main;var h=g.selectAll("."+l.arcs).selectAll("."+l.arc).data(e.arcData.bind(e));
h.enter().append("path").attr("class",e.classArc.bind(e)).style("fill",function(a){return e.color(a.data)}).style("cursor",function(a){return f.interaction_enabled&&f.data_selection_isselectable(a)?"pointer":null}).style("opacity",0).each(function(a){e.isGaugeType(a.data)&&(a.startAngle=a.endAngle=f.gauge_startingAngle);this._current=a});h.attr("transform",function(a){return!e.isGaugeType(a.data)&&c?"scale(0)":""}).style("opacity",function(a){return a===this._current?0:1}).on("mouseover",f.interaction_enabled?
function(a){if(!e.transiting&&(a=e.updateAngle(a))){var b=e.convertToArcData(a);e.expandArc(a.data.id);e.api.focus(a.data.id);e.toggleFocusLegend(a.data.id,!0);e.config.data_onmouseover(b,this)}}:null).on("mousemove",f.interaction_enabled?function(a){if(a=e.updateAngle(a))a=e.convertToArcData(a),a=[a],e.showTooltip(a,this)}:null).on("mouseout",f.interaction_enabled?function(a){if(!e.transiting&&(a=e.updateAngle(a))){var b=e.convertToArcData(a);e.unexpandArc(a.data.id);e.api.revert();e.revertLegend();
e.hideTooltip();e.config.data_onmouseout(b,this)}}:null).on("click",f.interaction_enabled?function(a,b){if(a=e.updateAngle(a))a=e.convertToArcData(a),e.toggleShape&&e.toggleShape(this,a,b),e.config.data_onclick.call(e.api,a,this)}:null).each(function(){e.transiting=!0}).transition().duration(a).attrTween("d",function(a){var b=e.updateAngle(a);if(!b)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0);isNaN(this._current.endAngle)&&(this._current.endAngle=
this._current.startAngle);var c=d.interpolate(this._current,b);this._current=c(0);return function(b){b=c(b);b.data=a.data;return e.getArc(b,!0)}}).attr("transform",c?"scale(1)":"").style("fill",function(a){return e.levelColor?e.levelColor(a.data.values[0].value):e.color(a.data.id)}).style("opacity",1).call(e.endall,function(){e.transiting=!1});h.exit().transition().duration(b).style("opacity",0).remove();g.selectAll("."+l.chartArc).select("text").style("opacity",0).attr("class",function(a){return e.isGaugeType(a.data)?
l.gaugeValue:""}).text(e.textForArcLabel.bind(e)).attr("transform",e.transformForArcLabel.bind(e)).style("font-size",function(a){return e.isGaugeType(a.data)?Math.round(e.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return e.isTargetToShow(a.data.id)&&e.isArcType(a.data)?1:0});g.select("."+l.chartArcsTitle).style("opacity",e.hasType("donut")||e.hasType("gauge")?1:0);e.hasType("gauge")&&(e.arcs.select("."+l.chartArcsBackground).attr("d",function(){return e.getArc({data:[{value:f.gauge_max}],
startAngle:f.gauge_startingAngle,endAngle:-1*f.gauge_startingAngle},!0,!0)}),e.arcs.select("."+l.chartArcsGaugeUnit).attr("dy",".75em").text(f.gauge_label_show?f.gauge_units:""),e.arcs.select("."+l.chartArcsGaugeMin).attr("dx",-1*(e.innerRadius+(e.radius-e.innerRadius)/(f.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(f.gauge_label_show?f.gauge_min:""),e.arcs.select("."+l.chartArcsGaugeMax).attr("dx",e.innerRadius+(e.radius-e.innerRadius)/(f.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(f.gauge_label_show?
f.gauge_max:""))};b.initGauge=function(){var a=this.arcs;this.hasType("gauge")&&(a.append("path").attr("class",l.chartArcsBackground),a.append("text").attr("class",l.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",l.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",l.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))};b.getGaugeLabelHeight=function(){return this.config.gauge_label_show?
20:0};b.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",l.regions)};b.updateRegion=function(a){var b=this.config;this.region.style("visibility",this.hasArcType()?"hidden":"visible");this.mainRegion=this.main.select("."+l.regions).selectAll("."+l.region).data(b.regions);this.mainRegion.enter().append("g").append("rect").style("fill-opacity",0);this.mainRegion.attr("class",this.classRegion.bind(this));this.mainRegion.exit().transition().duration(a).style("opacity",
0).remove()};b.redrawRegion=function(a){var b=this,c=b.mainRegion.selectAll("rect").each(function(){var a=b.d3.select(this.parentNode).datum();b.d3.select(this).datum(a)}),e=b.regionX.bind(b),d=b.regionY.bind(b),f=b.regionWidth.bind(b),g=b.regionHeight.bind(b);return[(a?c.transition():c).attr("x",e).attr("y",d).attr("width",f).attr("height",g).style("fill-opacity",function(a){return n(a.opacity)?a.opacity:.1})]};b.regionX=function(a){var b=this.config,c="y"===a.axis?this.y:this.y2;return"y"===a.axis||
"y2"===a.axis?b.axis_rotated?"start"in a?c(a.start):0:0:b.axis_rotated?0:"start"in a?this.x(this.isTimeSeries()?this.parseDate(a.start):a.start):0};b.regionY=function(a){var b=this.config,c="y"===a.axis?this.y:this.y2;return"y"===a.axis||"y2"===a.axis?b.axis_rotated?0:"end"in a?c(a.end):0:b.axis_rotated?"start"in a?this.x(this.isTimeSeries()?this.parseDate(a.start):a.start):0:0};b.regionWidth=function(a){var b=this.config,c=this.regionX(a),e="y"===a.axis?this.y:this.y2;a="y"===a.axis||"y2"===a.axis?
b.axis_rotated?"end"in a?e(a.end):this.width:this.width:b.axis_rotated?this.width:"end"in a?this.x(this.isTimeSeries()?this.parseDate(a.end):a.end):this.width;return a<c?0:a-c};b.regionHeight=function(a){var b=this.config,c=this.regionY(a),e="y"===a.axis?this.y:this.y2;a="y"===a.axis||"y2"===a.axis?b.axis_rotated?this.height:"start"in a?e(a.start):this.height:b.axis_rotated?"end"in a?this.x(this.isTimeSeries()?this.parseDate(a.end):a.end):this.height:this.height;return a<c?0:a-c};b.isRegionOnX=function(a){return!a.axis||
"x"===a.axis};b.drag=function(a){var b=this,c=b.config,e=b.main,d=b.d3;if(!b.hasArcType()&&c.data_selection_enabled&&(!c.zoom_enabled||b.zoom.altDomain)&&c.data_selection_multiple){var f=b.dragStart[0];var g=b.dragStart[1];var h=a[0];a=a[1];var k=Math.min(f,h);var n=Math.max(f,h);var q=c.data_selection_grouped?b.margin.top:Math.min(g,a);var p=c.data_selection_grouped?b.height:Math.max(g,a);e.select("."+l.dragarea).attr("x",k).attr("y",q).attr("width",n-k).attr("height",p-q);e.selectAll("."+l.shapes).selectAll("."+
l.shape).filter(function(a){return c.data_selection_isselectable(a)}).each(function(a,c){var e=d.select(this),f=e.classed(l.SELECTED),g=e.classed(l.INCLUDED);if(e.classed(l.circle)){var h=1*e.attr("cx");var m=1*e.attr("cy");var t=b.togglePoint;h=k<h&&h<n&&q<m&&m<p}else if(e.classed(l.bar)){t=F(this);h=t.x;m=t.y;var x=t.width;var r=t.height;t=b.togglePath;h=!(n<h||h+x<k)&&!(p<m||m+r<q)}else return;h^g&&(e.classed(l.INCLUDED,!g),e.classed(l.SELECTED,!f),t.call(b,!f,e,a,c))})}};b.dragstart=function(a){var b=
this.config;!this.hasArcType()&&b.data_selection_enabled&&(this.dragStart=a,this.main.select("."+l.chart).append("rect").attr("class",l.dragarea).style("opacity",.1),this.dragging=!0)};b.dragend=function(){var a=this.config;!this.hasArcType()&&a.data_selection_enabled&&(this.main.select("."+l.dragarea).transition().duration(100).style("opacity",0).remove(),this.main.selectAll("."+l.shape).classed(l.INCLUDED,!1),this.dragging=!1)};b.selectPoint=function(a,b,c){var e=this,d=e.config,f=(d.axis_rotated?
e.circleY:e.circleX).bind(e),g=(d.axis_rotated?e.circleX:e.circleY).bind(e),h=e.pointSelectR.bind(e);d.data_onselected.call(e.api,b,a.node());e.main.select("."+l.selectedCircles+e.getTargetSelectorSuffix(b.id)).selectAll("."+l.selectedCircle+"-"+c).data([b]).enter().append("circle").attr("class",function(){return e.generateClass(l.selectedCircle,c)}).attr("cx",f).attr("cy",g).attr("stroke",function(){return e.color(b)}).attr("r",function(a){return 1.4*e.pointSelectR(a)}).transition().duration(100).attr("r",
h)};b.unselectPoint=function(a,b,c){this.config.data_onunselected.call(this.api,b,a.node());this.main.select("."+l.selectedCircles+this.getTargetSelectorSuffix(b.id)).selectAll("."+l.selectedCircle+"-"+c).transition().duration(100).attr("r",0).remove()};b.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)};b.selectPath=function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node());c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})};
b.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node());c.config.interaction_brighten&&a.transition().duration(100).style("fill",function(){return c.color(b)})};b.togglePath=function(a,b,c,d){a?this.selectPath(b,c,d):this.unselectPath(b,c,d)};b.getToggle=function(a,b){if("circle"===a.nodeName)var c=this.isStepType(b)?function(){}:this.togglePoint;else"path"===a.nodeName&&(c=this.togglePath);return c};b.toggleShape=function(a,b,c){var e=this.d3,d=this.config,f=e.select(a),
g=f.classed(l.SELECTED),h=this.getToggle(a,b).bind(this);d.data_selection_enabled&&d.data_selection_isselectable(b)&&(d.data_selection_multiple||this.main.selectAll("."+l.shapes+(d.data_selection_grouped?this.getTargetSelectorSuffix(b.id):"")).selectAll("."+l.shape).each(function(a,b){var c=e.select(this);c.classed(l.SELECTED)&&h(!1,c.classed(l.SELECTED,!1),a,b)}),f.classed(l.SELECTED,!g),h(!g,f,b,c))};b.initBrush=function(){var a=this;a.brush=a.d3.svg.brush().on("brush",function(){a.redrawForBrush()});
a.brush.update=function(){a.context&&a.context.select("."+l.brush).call(this);return this};a.brush.scale=function(b){return a.config.axis_rotated?this.y(b):this.x(b)}};b.initSubchart=function(){var a=this.config,b=this.context=this.svg.append("g").attr("transform",this.getTranslate("context")),c=a.subchart_show?"visible":"hidden";b.style("visibility",c);b.append("g").attr("clip-path",this.clipPathForSubchart).attr("class",l.chart);b.select("."+l.chart).append("g").attr("class",l.chartBars);b.select("."+
l.chart).append("g").attr("class",l.chartLines);b.append("g").attr("clip-path",this.clipPath).attr("class",l.brush).call(this.brush);this.axes.subx=b.append("g").attr("class",l.axisX).attr("transform",this.getTranslate("subx")).attr("clip-path",a.axis_rotated?"":this.clipPathForXAxis).style("visibility",a.subchart_axis_x_show?c:"hidden")};b.updateTargetsForSubchart=function(a){var b=this.context,c=this.config,e=this.classChartBar.bind(this),d=this.classBars.bind(this);var f=this.classChartLine.bind(this);
var g=this.classLines.bind(this),h=this.classAreas.bind(this);if(c.subchart_show){var k=b.select("."+l.chartBars).selectAll("."+l.chartBar).data(a).attr("class",e);k=k.enter().append("g").style("opacity",0).attr("class",e);k.append("g").attr("class",d);a=b.select("."+l.chartLines).selectAll("."+l.chartLine).data(a).attr("class",f);f=a.enter().append("g").style("opacity",0).attr("class",f);f.append("g").attr("class",g);f.append("g").attr("class",h);b.selectAll("."+l.brush+" rect").attr(c.axis_rotated?
"width":"height",c.axis_rotated?this.width2:this.height2)}};b.updateBarForSubchart=function(a){this.contextBar=this.context.selectAll("."+l.bars).selectAll("."+l.bar).data(this.barData.bind(this));this.contextBar.enter().append("path").attr("class",this.classBar.bind(this)).style("stroke","none").style("fill",this.color);this.contextBar.style("opacity",this.initialOpacity.bind(this));this.contextBar.exit().transition().duration(a).style("opacity",0).remove()};b.redrawBarForSubchart=function(a,b,c){(b?
this.contextBar.transition(Math.random().toString()).duration(c):this.contextBar).attr("d",a).style("opacity",1)};b.updateLineForSubchart=function(a){this.contextLine=this.context.selectAll("."+l.lines).selectAll("."+l.line).data(this.lineData.bind(this));this.contextLine.enter().append("path").attr("class",this.classLine.bind(this)).style("stroke",this.color);this.contextLine.style("opacity",this.initialOpacity.bind(this));this.contextLine.exit().transition().duration(a).style("opacity",0).remove()};
b.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition(Math.random().toString()).duration(c):this.contextLine).attr("d",a).style("opacity",1)};b.updateAreaForSubchart=function(a){var b=this,c=b.d3;b.contextArea=b.context.selectAll("."+l.areas).selectAll("."+l.area).data(b.lineData.bind(b));b.contextArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){b.orgAreaOpacity=+c.select(this).style("opacity");return 0});b.contextArea.style("opacity",
0);b.contextArea.exit().transition().duration(a).style("opacity",0).remove()};b.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition(Math.random().toString()).duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)};b.redrawSubchart=function(a,b,c,d,f,g,h){b=this.d3;d=this.config;this.context.style("visibility",d.subchart_show?"visible":"hidden");d.subchart_show&&(b.event&&"zoom"===b.event.type&&this.brush.extent(this.x.orgDomain()).update(),
a&&(this.brush.empty()||this.brush.extent(this.x.orgDomain()).update(),a=this.generateDrawArea(f,!0),g=this.generateDrawBar(g,!0),h=this.generateDrawLine(h,!0),this.updateBarForSubchart(c),this.updateLineForSubchart(c),this.updateAreaForSubchart(c),this.redrawBarForSubchart(g,c,c),this.redrawLineForSubchart(h,c,c),this.redrawAreaForSubchart(a,c,c)))};b.redrawForBrush=function(){var a=this.x;this.redraw({withTransition:!1,withY:this.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1});
this.config.subchart_onbrush.call(this.api,a.orgDomain())};b.transformContext=function(a,b){b&&b.axisSubX?b=b.axisSubX:(b=this.context.select("."+l.axisX),a&&(b=b.transition()));this.context.attr("transform",this.getTranslate("context"));b.attr("transform",this.getTranslate("subx"))};b.getDefaultExtent=function(){var a=this.config;a=p(a.axis_x_extent)?a.axis_x_extent(this.getXDomain(this.data.targets)):a.axis_x_extent;this.isTimeSeries()&&(a=[this.parseDate(a[0]),this.parseDate(a[1])]);return a};
b.initZoom=function(){var a=this,b=a.d3,c=a.config,d;a.zoom=b.behavior.zoom().on("zoomstart",function(){d=b.event.sourceEvent;a.zoom.altDomain=b.event.sourceEvent.altKey?a.x.orgDomain():null;c.zoom_onzoomstart.call(a.api,b.event.sourceEvent)}).on("zoom",function(){a.redrawForZoom.call(a)}).on("zoomend",function(){var e=b.event.sourceEvent;e&&d.clientX===e.clientX&&d.clientY===e.clientY||(a.redrawEventRect(),a.updateZoom(),c.zoom_onzoomend.call(a.api,a.x.orgDomain()))});a.zoom.scale=function(a){return c.axis_rotated?
this.y(a):this.x(a)};a.zoom.orgScaleExtent=function(){var b=c.zoom_extent?c.zoom_extent:[1,10];return[b[0],Math.max(a.getMaxDataCount()/b[1],b[1])]};a.zoom.updateScaleExtent=function(){var b=q(a.x.orgDomain())/q(a.getZoomDomain()),c=this.orgScaleExtent();this.scaleExtent([c[0]*b,c[1]*b]);return this}};b.getZoomDomain=function(){var a=this.config,b=this.d3,c=b.min([this.orgXDomain[0],a.zoom_x_min]);a=b.max([this.orgXDomain[1],a.zoom_x_max]);return[c,a]};b.updateZoom=function(){var a=this.config.zoom_enabled?
this.zoom:function(){};this.main.select("."+l.zoomRect).call(a).on("dblclick.zoom",null);this.main.selectAll("."+l.eventRect).call(a).on("dblclick.zoom",null)};b.redrawForZoom=function(){var a=this.d3,b=this.config,c=this.zoom,d=this.x;b.zoom_enabled&&0!==this.filterTargetsToShow(this.data.targets).length&&("mousemove"===a.event.sourceEvent.type&&c.altDomain?(d.domain(c.altDomain),c.scale(d).updateScaleExtent()):(this.isCategorized()&&d.orgDomain()[0]===this.orgXDomain[0]&&d.domain([this.orgXDomain[0]-
1E-10,d.orgDomain()[1]]),this.redraw({withTransition:!1,withY:b.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===a.event.sourceEvent.type&&(this.cancelClick=!0),b.zoom_onzoom.call(this.api,d.orgDomain())))};b.generateColor=function(){var a=this.config,b=this.d3,c=a.data_colors,d=A(a.color_pattern)?a.color_pattern:b.scale.category10().range(),f=a.data_color,g=[];return function(a){var b=a.id||a.data&&a.data.id||a;if(c[b]instanceof Function)var e=c[b](a);else c[b]?e=c[b]:
(0>g.indexOf(b)&&g.push(b),e=d[g.indexOf(b)%d.length],c[b]=e);return f instanceof Function?f(e,a):e}};b.generateLevelColor=function(){var a=this.config,b=a.color_pattern,c=a.color_threshold,d="value"===c.unit,f=c.values&&c.values.length?c.values:[],g=c.max||100;return A(a.color_threshold)?function(a){var c,e=b[b.length-1];for(c=0;c<f.length;c++){var h=d?a:100*a/g;if(h<f[c]){e=b[c];break}}return e}:null};b.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,
e=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,d,f){return("y2"===b.axis.getId(f)?e:c).call(b,a,d)}};b.yFormat=function(a){var b=this.config;return(b.axis_y_tick_format?b.axis_y_tick_format:this.defaultValueFormat)(a)};b.y2Format=function(a){var b=this.config;return(b.axis_y2_tick_format?b.axis_y2_tick_format:this.defaultValueFormat)(a)};b.defaultValueFormat=function(a){return n(a)?+a:""};b.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"};b.dataLabelFormat=
function(a){var b=this.config.data_labels,c=function(a){return n(a)?+a:""};return"function"===typeof b.format?b.format:"object"===typeof b.format?b.format[a]?!0===b.format[a]?c:b.format[a]:function(){return""}:c};b.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0};b.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)};b.getCaches=function(a){var b=[],c;for(c=0;c<a.length;c++)a[c]in this.cache&&b.push(this.cloneTarget(this.cache[a[c]]));return b};var l=
b.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",
selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",
circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",
axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};b.generateClass=function(a,b){return" "+a+" "+a+this.getTargetSelectorSuffix(b)};b.classText=function(a){return this.generateClass(l.text,
a.index)};b.classTexts=function(a){return this.generateClass(l.texts,a.id)};b.classShape=function(a){return this.generateClass(l.shape,a.index)};b.classShapes=function(a){return this.generateClass(l.shapes,a.id)};b.classLine=function(a){return this.classShape(a)+this.generateClass(l.line,a.id)};b.classLines=function(a){return this.classShapes(a)+this.generateClass(l.lines,a.id)};b.classCircle=function(a){return this.classShape(a)+this.generateClass(l.circle,a.index)};b.classCircles=function(a){return this.classShapes(a)+
this.generateClass(l.circles,a.id)};b.classBar=function(a){return this.classShape(a)+this.generateClass(l.bar,a.index)};b.classBars=function(a){return this.classShapes(a)+this.generateClass(l.bars,a.id)};b.classArc=function(a){return this.classShape(a.data)+this.generateClass(l.arc,a.data.id)};b.classArcs=function(a){return this.classShapes(a.data)+this.generateClass(l.arcs,a.data.id)};b.classArea=function(a){return this.classShape(a)+this.generateClass(l.area,a.id)};b.classAreas=function(a){return this.classShapes(a)+
this.generateClass(l.areas,a.id)};b.classRegion=function(a,b){return this.generateClass(l.region,b)+" "+("class"in a?a["class"]:"")};b.classEvent=function(a){return this.generateClass(l.eventRect,a.index)};b.classTarget=function(a){var b=this.config.data_classes[a],c="";b&&(c=" "+l.target+"-"+b);return this.generateClass(l.target,a)+c};b.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)};b.classFocused=function(a){return" "+(0<=this.focusedTargetIds.indexOf(a.id)?l.focused:
"")};b.classDefocused=function(a){return" "+(0<=this.defocusedTargetIds.indexOf(a.id)?l.defocused:"")};b.classChartText=function(a){return l.chartText+this.classTarget(a.id)};b.classChartLine=function(a){return l.chartLine+this.classTarget(a.id)};b.classChartBar=function(a){return l.chartBar+this.classTarget(a.id)};b.classChartArc=function(a){return l.chartArc+this.classTarget(a.data.id)};b.getTargetSelectorSuffix=function(a){return a||0===a?("-"+a).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,
"-"):""};b.selectorTarget=function(a,b){return(b||"")+"."+l.target+this.getTargetSelectorSuffix(a)};b.selectorTargets=function(a,b){var c=this;a=a||[];return a.length?a.map(function(a){return c.selectorTarget(a,b)}):null};b.selectorLegend=function(a){return"."+l.legendItem+this.getTargetSelectorSuffix(a)};b.selectorLegends=function(a){var b=this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null};var n=b.isValue=function(a){return a||0===a},p=b.isFunction=function(a){return"function"===
typeof a},r=b.isString=function(a){return"string"===typeof a},w=b.isUndefined=function(a){return"undefined"===typeof a},z=b.isDefined=function(a){return"undefined"!==typeof a},v=b.ceil10=function(a){return 10*Math.ceil(a/10)},t=b.asHalfPixel=function(a){return Math.ceil(a)+.5},q=b.diffDomain=function(a){return a[1]-a[0]},y=b.isEmpty=function(a){return"undefined"===typeof a||null===a||r(a)&&0===a.length||"object"===typeof a&&0===Object.keys(a).length},A=b.notEmpty=function(a){return!b.isEmpty(a)},
C=b.getOption=function(a,b,c){return z(a[b])?a[b]:c},G=b.hasValue=function(a,b){var c=!1;Object.keys(a).forEach(function(e){a[e]===b&&(c=!0)});return c},E=b.sanitise=function(a){return"string"===typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},F=b.getPathBox=function(a){var b=a.getBoundingClientRect();a=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)];return{x:a[0].x,y:Math.min(a[0].y,a[1].y),width:b.width,height:b.height}};d.focus=function(a){var b=this.internal;a=b.mapToTargetIds(a);var c=
b.svg.selectAll(b.selectorTargets(a.filter(b.isTargetToShow,b)));this.revert();this.defocus();c.classed(l.focused,!0).classed(l.defocused,!1);b.hasArcType()&&b.expandArc(a);b.toggleFocusLegend(a,!0);b.focusedTargetIds=a;b.defocusedTargetIds=b.defocusedTargetIds.filter(function(b){return 0>a.indexOf(b)})};d.defocus=function(a){var b=this.internal;a=b.mapToTargetIds(a);b.svg.selectAll(b.selectorTargets(a.filter(b.isTargetToShow,b))).classed(l.focused,!1).classed(l.defocused,!0);b.hasArcType()&&b.unexpandArc(a);
b.toggleFocusLegend(a,!1);b.focusedTargetIds=b.focusedTargetIds.filter(function(b){return 0>a.indexOf(b)});b.defocusedTargetIds=a};d.revert=function(a){var b=this.internal;a=b.mapToTargetIds(a);b.svg.selectAll(b.selectorTargets(a)).classed(l.focused,!1).classed(l.defocused,!1);b.hasArcType()&&b.unexpandArc(a);b.config.legend_show&&(b.showLegend(a.filter(b.isLegendToShow.bind(b))),b.legend.selectAll(b.selectorLegends(a)).filter(function(){return b.d3.select(this).classed(l.legendItemFocused)}).classed(l.legendItemFocused,
!1));b.focusedTargetIds=[];b.defocusedTargetIds=[]};d.show=function(a,b){var c=this.internal;a=c.mapToTargetIds(a);b=b||{};c.removeHiddenTargetIds(a);var e=c.svg.selectAll(c.selectorTargets(a));e.transition().style("opacity",1,"important").call(c.endall,function(){e.style("opacity",null).style("opacity",1)});b.withLegend&&c.showLegend(a);c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};d.hide=function(a,b){var c=this.internal;a=c.mapToTargetIds(a);b=b||{};c.addHiddenTargetIds(a);
var e=c.svg.selectAll(c.selectorTargets(a));e.transition().style("opacity",0,"important").call(c.endall,function(){e.style("opacity",null).style("opacity",0)});b.withLegend&&c.hideLegend(a);c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};d.toggle=function(a,b){var c=this,e=this.internal;e.mapToTargetIds(a).forEach(function(a){e.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})};d.zoom=function(a){var b=this.internal;a&&(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),
b.brush.extent(a),b.redraw({withUpdateXDomain:!0,withY:b.config.zoom_rescale}),b.config.zoom_onzoom.call(this,b.x.orgDomain()));return b.brush.extent()};d.zoom.enable=function(a){var b=this.internal;b.config.zoom_enabled=a;b.updateAndRedraw()};d.unzoom=function(){var a=this.internal;a.brush.clear().update();a.redraw({withUpdateXDomain:!0})};d.zoom.max=function(a){var b=this.internal,c=b.config,e=b.d3;if(0===a||a)c.zoom_x_max=e.max([b.orgXDomain[1],a]);else return c.zoom_x_max};d.zoom.min=function(a){var b=
this.internal,c=b.config,e=b.d3;if(0===a||a)c.zoom_x_min=e.min([b.orgXDomain[0],a]);else return c.zoom_x_min};d.zoom.range=function(a){if(arguments.length)z(a.max)&&this.domain.max(a.max),z(a.min)&&this.domain.min(a.min);else return{max:this.domain.max(),min:this.domain.min()}};d.load=function(a){var b=this.internal,c=b.config;a.xs&&b.addXs(a.xs);"names"in a&&d.data.names.bind(this)(a.names);"classes"in a&&Object.keys(a.classes).forEach(function(b){c.data_classes[b]=a.classes[b]});"categories"in a&&
b.isCategorized()&&(c.axis_x_categories=a.categories);"axes"in a&&Object.keys(a.axes).forEach(function(b){c.data_axes[b]=a.axes[b]});"colors"in a&&Object.keys(a.colors).forEach(function(b){c.data_colors[b]=a.colors[b]});"cacheIds"in a&&b.hasCaches(a.cacheIds)?b.load(b.getCaches(a.cacheIds),a.done):"unload"in a?b.unload(b.mapToTargetIds("boolean"===typeof a.unload&&a.unload?null:a.unload),function(){b.loadFromArgs(a)}):b.loadFromArgs(a)};d.unload=function(a){var b=this.internal;a=a||{};a instanceof
Array?a={ids:a}:"string"===typeof a&&(a={ids:[a]});b.unload(b.mapToTargetIds(a.ids),function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});a.done&&a.done()})};d.flow=function(a){var b=this.internal,c=[],e=b.getMaxDataCount(),d=0,f=0;if(a.json)var g=b.convertJsonToData(a.json,a.keys);else if(a.rows)g=b.convertRowsToData(a.rows);else if(a.columns)g=b.convertColumnsToData(a.columns);else return;var h=b.convertDataToTargets(g,!0);b.data.targets.forEach(function(a){var e=!1,
g,l;for(g=0;g<h.length;g++)if(a.id===h[g].id){e=!0;a.values[a.values.length-1]&&(f=a.values[a.values.length-1].index+1);d=h[g].values.length;for(l=0;l<d;l++)h[g].values[l].index=f+l,b.isTimeSeries()||(h[g].values[l].x=f+l);a.values=a.values.concat(h[g].values);h.splice(g,1);break}e||c.push(a.id)});b.data.targets.forEach(function(a){var e,g;for(e=0;e<c.length;e++)if(a.id===c[e])for(f=a.values[a.values.length-1].index+1,g=0;g<d;g++)a.values.push({id:a.id,index:f+g,x:b.isTimeSeries()?b.getOtherTargetX(f+
g):f+g,value:null})});b.data.targets.length&&h.forEach(function(a){var c,e=[];for(c=b.data.targets[0].values[0].index;c<f;c++)e.push({id:a.id,index:c,x:b.isTimeSeries()?b.getOtherTargetX(c):c,value:null});a.values.forEach(function(a){a.index+=f;b.isTimeSeries()||(a.x+=f)});a.values=e.concat(a.values)});b.data.targets=b.data.targets.concat(h);b.getMaxDataCount();var l=b.data.targets[0];g=l.values[0];if(z(a.to)){d=0;var k=b.isTimeSeries()?b.parseDate(a.to):a.to;l.values.forEach(function(a){a.x<k&&d++})}else z(a.length)&&
(d=a.length);e?1===e&&b.isTimeSeries()&&(l=(l.values[l.values.length-1].x-g.x)/2,l=[new Date(+g.x-l),new Date(+g.x+l)],b.updateXDomain(null,!0,!0,!1,l)):(l=b.isTimeSeries()?1<l.values.length?l.values[l.values.length-1].x-g.x:g.x-b.getXDomain(b.data.targets)[0]:1,l=[g.x-l,g.x],b.updateXDomain(null,!0,!0,!1,l));b.updateTargets(b.data.targets);b.redraw({flow:{index:g.index,length:d,duration:n(a.duration)?a.duration:b.config.transition_duration,done:a.done,orgDataCount:e},withLegend:!0,withTransition:1<
e,withTrimXDomain:!1,withUpdateXAxis:!0})};b.generateFlow=function(a){var b=this,c=b.config,e=b.d3;return function(){var d=a.targets,f=a.flow,g=a.drawBar,h=a.drawLine,k=a.drawArea,m=a.cx,n=a.cy,p=a.xv,t=a.xForText,r=a.yForText,v=a.duration,x=1,y=f.index,w=f.length,z=b.getValueOnIndex(b.data.targets[0].values,y),A=b.getValueOnIndex(b.data.targets[0].values,y+w);x=b.x.domain();v=f.duration||v;var D=f.done||function(){},C=b.generateWait(),F=b.xgrid||e.selectAll([]),E=b.xgridLines||e.selectAll([]),G=
b.mainRegion||e.selectAll([]),I=b.mainText||e.selectAll([]),xa=b.mainBar||e.selectAll([]),na=b.mainLine||e.selectAll([]),Q=b.mainArea||e.selectAll([]),da=b.mainCircle||e.selectAll([]);b.flowing=!0;b.data.targets.forEach(function(a){a.values.splice(0,w)});d=b.updateXDomain(d,!0,!0);b.updateXGrid&&b.updateXGrid(!0);f.orgDataCount?f=1===f.orgDataCount||(z&&z.x)===(A&&A.x)?b.x(x[0])-b.x(d[0]):b.isTimeSeries()?b.x(x[0])-b.x(d[0]):b.x(z.x)-b.x(A.x):1!==b.data.targets[0].values.length?f=b.x(x[0])-b.x(d[0]):
b.isTimeSeries()?(z=b.getValueOnIndex(b.data.targets[0].values,0),A=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-1),f=b.x(z.x)-b.x(A.x)):f=q(d)/2;x=q(x)/q(d);var za="translate("+f+",0) scale("+x+",1)";b.hideXGridFocus();e.transition().ease("linear").duration(v).each(function(){C.add(b.axes.x.transition().call(b.xAxis));C.add(xa.transition().attr("transform",za));C.add(na.transition().attr("transform",za));C.add(Q.transition().attr("transform",za));C.add(da.transition().attr("transform",
za));C.add(I.transition().attr("transform",za));C.add(G.filter(b.isRegionOnX).transition().attr("transform",za));C.add(F.transition().attr("transform",za));C.add(E.transition().attr("transform",za))}).call(C,function(){var a,e=[],d=[],f=[];if(w){for(a=0;a<w;a++)e.push("."+l.shape+"-"+(y+a)),d.push("."+l.text+"-"+(y+a)),f.push("."+l.eventRect+"-"+(y+a));b.svg.selectAll("."+l.shapes).selectAll(e).remove();b.svg.selectAll("."+l.texts).selectAll(d).remove();b.svg.selectAll("."+l.eventRects).selectAll(f).remove();
b.svg.select("."+l.xgrid).remove()}F.attr("transform",null).attr(b.xgridAttr);E.attr("transform",null);E.select("line").attr("x1",c.axis_rotated?0:p).attr("x2",c.axis_rotated?b.width:p);E.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",p);xa.attr("transform",null).attr("d",g);na.attr("transform",null).attr("d",h);Q.attr("transform",null).attr("d",k);da.attr("transform",null).attr("cx",m).attr("cy",n);I.attr("transform",null).attr("x",t).attr("y",r).style("fill-opacity",b.opacityForText.bind(b));
G.attr("transform",null);G.select("rect").filter(b.isRegionOnX).attr("x",b.regionX.bind(b)).attr("width",b.regionWidth.bind(b));c.interaction_enabled&&b.redrawEventRect();D();b.flowing=!1})}};d.selected=function(a){var b=this.internal,c=b.d3;return c.merge(b.main.selectAll("."+l.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+l.shape).filter(function(){return c.select(this).classed(l.SELECTED)}).map(function(a){return a.map(function(a){a=a.__data__;return a.data?a.data:a})}))};d.select=function(a,
b,c){var e=this.internal,d=e.d3,f=e.config;f.data_selection_enabled&&e.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(g,h){var k=d.select(this),m=g.data?g.data.id:g.id,n=e.getToggle(this,g).bind(e);m=f.data_selection_grouped||!a||0<=a.indexOf(m);var q=!b||0<=b.indexOf(h),p=k.classed(l.SELECTED);k.classed(l.line)||k.classed(l.area)||(m&&q?f.data_selection_isselectable(g)&&!p&&n(!0,k.classed(l.SELECTED,!0),g,h):z(c)&&c&&p&&n(!1,k.classed(l.SELECTED,!1),g,h))})};d.unselect=function(a,
b){var c=this.internal,e=c.d3,d=c.config;d.data_selection_enabled&&c.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(f,g){var h=e.select(this),k=f.data?f.data.id:f.id,m=c.getToggle(this,f).bind(c);k=d.data_selection_grouped||!a||0<=a.indexOf(k);var n=!b||0<=b.indexOf(g),q=h.classed(l.SELECTED);h.classed(l.line)||h.classed(l.area)||k&&n&&d.data_selection_isselectable(f)&&q&&m(!1,h.classed(l.SELECTED,!1),f,g)})};d.transform=function(a,b){var c=this.internal,e=0<=["pie","donut"].indexOf(a)?
{withTransform:!0}:null;c.transformTo(b,a,e)};b.transformTo=function(a,b,c){var e=!this.hasArcType();c=c||{withTransitionForAxis:e};this.transiting=c.withTransitionForTransform=!1;this.setTargetType(a,b);this.updateTargets(this.data.targets);this.updateAndRedraw(c)};d.groups=function(a){var b=this.internal,c=b.config;if(w(a))return c.data_groups;c.data_groups=a;b.redraw();return c.data_groups};d.xgrids=function(a){var b=this.internal,c=b.config;if(!a)return c.grid_x_lines;c.grid_x_lines=a;b.redrawWithoutRescale();
return c.grid_x_lines};d.xgrids.add=function(a){return this.xgrids(this.internal.config.grid_x_lines.concat(a?a:[]))};d.xgrids.remove=function(a){this.internal.removeGridLines(a,!0)};d.ygrids=function(a){var b=this.internal,c=b.config;if(!a)return c.grid_y_lines;c.grid_y_lines=a;b.redrawWithoutRescale();return c.grid_y_lines};d.ygrids.add=function(a){return this.ygrids(this.internal.config.grid_y_lines.concat(a?a:[]))};d.ygrids.remove=function(a){this.internal.removeGridLines(a,!1)};d.regions=function(a){var b=
this.internal,c=b.config;if(!a)return c.regions;c.regions=a;b.redrawWithoutRescale();return c.regions};d.regions.add=function(a){var b=this.internal,c=b.config;if(!a)return c.regions;c.regions=c.regions.concat(a);b.redrawWithoutRescale();return c.regions};d.regions.remove=function(a){var b=this.internal,c=b.config;a=a||{};var e=b.getOption(a,"duration",c.transition_duration);var d=b.getOption(a,"classes",[l.region]);a=b.main.select("."+l.regions).selectAll(d.map(function(a){return"."+a}));(e?a.transition().duration(e):
a).style("opacity",0).remove();c.regions=c.regions.filter(function(a){var b=!1;if(!a["class"])return!0;a["class"].split(" ").forEach(function(a){0<=d.indexOf(a)&&(b=!0)});return!b});return c.regions};d.data=function(a){var b=this.internal.data.targets;return"undefined"===typeof a?b:b.filter(function(b){return 0<=[].concat(a).indexOf(b.id)})};d.data.shown=function(a){return this.internal.filterTargetsToShow(this.data(a))};d.data.values=function(a){var b=null;a&&(a=this.data(a),b=a[0]?a[0].values.map(function(a){return a.value}):
null);return b};d.data.names=function(a){this.internal.clearLegendItemTextBoxCache();return this.internal.updateDataAttributes("names",a)};d.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)};d.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)};d.category=function(a,b){var c=this.internal,e=c.config;1<arguments.length&&(e.axis_x_categories[a]=b,c.redraw());return e.axis_x_categories[a]};d.categories=function(a){var b=this.internal,c=b.config;if(!arguments.length)return c.axis_x_categories;
c.axis_x_categories=a;b.redraw();return c.axis_x_categories};d.color=function(a){return this.internal.color(a)};d.x=function(a){var b=this.internal;arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}));return b.data.xs};d.xs=function(a){var b=this.internal;arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}));return b.data.xs};d.axis=function(){};d.axis.labels=function(a){var b=this.internal;
arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,a[c])}),b.axis.updateLabels())};d.axis.max=function(a){var b=this.internal,c=b.config;if(arguments.length)"object"===typeof a?(n(a.x)&&(c.axis_x_max=a.x),n(a.y)&&(c.axis_y_max=a.y),n(a.y2)&&(c.axis_y2_max=a.y2)):c.axis_y_max=c.axis_y2_max=a,b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:c.axis_x_max,y:c.axis_y_max,y2:c.axis_y2_max}};d.axis.min=function(a){var b=this.internal,c=b.config;if(arguments.length)"object"===
typeof a?(n(a.x)&&(c.axis_x_min=a.x),n(a.y)&&(c.axis_y_min=a.y),n(a.y2)&&(c.axis_y2_min=a.y2)):c.axis_y_min=c.axis_y2_min=a,b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:c.axis_x_min,y:c.axis_y_min,y2:c.axis_y2_min}};d.axis.range=function(a){if(arguments.length)z(a.max)&&this.axis.max(a.max),z(a.min)&&this.axis.min(a.min);else return{max:this.axis.max(),min:this.axis.min()}};d.legend=function(){};d.legend.show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a));
b.updateAndRedraw({withLegend:!0})};d.legend.hide=function(a){var b=this.internal;b.hideLegend(b.mapToTargetIds(a));b.updateAndRedraw({withLegend:!0})};d.resize=function(a){var b=this.internal.config;b.size_width=a?a.width:null;b.size_height=a?a.height:null;this.flush()};d.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})};d.destroy=function(){var a=this.internal;k.clearInterval(a.intervalForObserveInserted);void 0!==a.resizeTimeout&&k.clearTimeout(a.resizeTimeout);
if(k.detachEvent)k.detachEvent("onresize",a.resizeFunction);else if(k.removeEventListener)k.removeEventListener("resize",a.resizeFunction);else{var b=k.onresize;b&&b.add&&b.remove&&b.remove(a.resizeFunction)}a.selectChart.classed("c3",!1).html("");Object.keys(a).forEach(function(b){a[b]=null});return null};d.tooltip=function(){};d.tooltip.show=function(a){var b=this.internal;if(a.mouse)var c=a.mouse;if(a.data)if(b.isMultipleX()){c=[b.x(a.data.x),b.getYScale(a.data.id)(a.data.value)];var e=null}else e=
n(a.data.index)?a.data.index:b.getIndexByX(a.data.x);else"undefined"!==typeof a.x?e=b.getIndexByX(a.x):"undefined"!==typeof a.index&&(e=a.index);b.dispatchEvent("mouseover",e,c);b.dispatchEvent("mousemove",e,c);b.config.tooltip_onshow.call(b,a.data)};d.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0);this.internal.config.tooltip_onhide.call(this)};var I;b.isSafari=function(){var a=k.navigator.userAgent;return 0<=a.indexOf("Safari")&&0>a.indexOf("Chrome")};b.isChrome=function(){return 0<=
k.navigator.userAgent.indexOf("Chrome")};Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,e=function(){},d=function(){return c.apply(this instanceof e?this:a,b.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;d.prototype=new e;return d});(function(){"SVGPathSeg"in k||(k.SVGPathSeg=function(a,
b,c){this.pathSegType=a;this.pathSegTypeAsLetter=b;this._owningPathSegList=c},SVGPathSeg.PATHSEG_UNKNOWN=0,SVGPathSeg.PATHSEG_CLOSEPATH=1,SVGPathSeg.PATHSEG_MOVETO_ABS=2,SVGPathSeg.PATHSEG_MOVETO_REL=3,SVGPathSeg.PATHSEG_LINETO_ABS=4,SVGPathSeg.PATHSEG_LINETO_REL=5,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,SVGPathSeg.PATHSEG_ARC_ABS=10,SVGPathSeg.PATHSEG_ARC_REL=11,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=
12,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},k.SVGPathSegClosePath=function(a){SVGPathSeg.call(this,
SVGPathSeg.PATHSEG_CLOSEPATH,"z",a)},SVGPathSegClosePath.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},SVGPathSegClosePath.prototype.clone=function(){return new SVGPathSegClosePath(void 0)},k.SVGPathSegMovetoAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_ABS,"M",a);this._x=b;this._y=c},SVGPathSegMovetoAbs.prototype=
Object.create(SVGPathSeg.prototype),SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoAbs.prototype.clone=function(){return new SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoAbs.prototype,
"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegMovetoRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_REL,"m",a);this._x=b;this._y=c},SVGPathSegMovetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoRel.prototype.clone=
function(){return new SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegLinetoAbs=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_ABS,"L",a);this._x=b;this._y=c},SVGPathSegLinetoAbs.prototype=
Object.create(SVGPathSeg.prototype),SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoAbs.prototype.clone=function(){return new SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoAbs.prototype,
"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegLinetoRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_REL,"l",a);this._x=b;this._y=c},SVGPathSegLinetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoRel.prototype.clone=
function(){return new SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegCurvetoCubicAbs=function(a,b,c,d,f,g,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",a);this._x=b;
this._y=c;this._x1=d;this._y1=f;this._x2=g;this._y2=h},SVGPathSegCurvetoCubicAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicAbs(void 0,this._x,
this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a;this._segmentChanged()},enumerable:!0}),
k.SVGPathSegCurvetoCubicRel=function(a,b,c,d,f,g,h){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",a);this._x=b;this._y=c;this._x1=d;this._y1=f;this._x2=g;this._y2=h},SVGPathSegCurvetoCubicRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+
this._x+" "+this._y},SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,
"x1",{get:function(){return this._x1},set:function(a){this._x1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},
set:function(a){this._y2=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegCurvetoQuadraticAbs=function(a,b,c,d,f){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",a);this._x=b;this._y=c;this._x1=d;this._y1=f},SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+
" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(a){this._y1=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegCurvetoQuadraticRel=function(a,b,c,d,f){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",a);this._x=b;this._y=c;this._x1=d;
this._y1=f},SVGPathSegCurvetoQuadraticRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,
"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(a){this._x1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},
set:function(a){this._y1=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegArcAbs=function(a,b,c,d,f,g,h,l){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_ABS,"A",a);this._x=b;this._y=c;this._r1=d;this._r2=f;this._angle=g;this._largeArcFlag=h;this._sweepFlag=l},SVGPathSegArcAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+
" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcAbs.prototype.clone=function(){return new SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},
set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegArcRel=function(a,b,c,d,f,g,h,l){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_REL,"a",a);this._x=b;this._y=c;this._r1=
d;this._r2=f;this._angle=g;this._largeArcFlag=h;this._sweepFlag=l},SVGPathSegArcRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcRel.prototype.clone=function(){return new SVGPathSegArcRel(void 0,
this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(a){this._r1=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(a){this._r2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(a){this._angle=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(a){this._largeArcFlag=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(a){this._sweepFlag=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegLinetoHorizontalAbs=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",a);this._x=b},SVGPathSegLinetoHorizontalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},
SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegLinetoHorizontalRel=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",
a);this._x=b},SVGPathSegLinetoHorizontalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},
set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegLinetoVerticalAbs=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",a);this._y=b},SVGPathSegLinetoVerticalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalAbs.prototype.clone=
function(){return new SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegLinetoVerticalRel=function(a,b){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",a);this._y=b},SVGPathSegLinetoVerticalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},
SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d,f){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",
a);this._x=b;this._y=c;this._x2=d;this._y2=f},SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,
this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a;this._segmentChanged()},
enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d,f){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",a);this._x=b;this._y=c;this._x2=d;this._y2=f},SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},
SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,
"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(a){this._x2=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(a){this._y2=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegCurvetoQuadraticSmoothAbs=function(a,b,c){SVGPathSeg.call(this,
SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",a);this._x=b;this._y=c},SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,
this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),k.SVGPathSegCurvetoQuadraticSmoothRel=function(a,b,c){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",a);this._x=b;this._y=
c},SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,
"x",{get:function(){return this._x},set:function(a){this._x=a;this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this._segmentChanged()},enumerable:!0}),SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new SVGPathSegClosePath(void 0)},SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(a,b){return new SVGPathSegMovetoAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegMovetoRel=
function(a,b){return new SVGPathSegMovetoRel(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(a,b){return new SVGPathSegLinetoAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegLinetoRel=function(a,b){return new SVGPathSegLinetoRel(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(a,b,c,d,f,g){return new SVGPathSegCurvetoCubicAbs(void 0,a,b,c,d,f,g)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(a,b,c,d,f,g){return new SVGPathSegCurvetoCubicRel(void 0,
a,b,c,d,f,g)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(a,b,c,d){return new SVGPathSegCurvetoQuadraticAbs(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(a,b,c,d){return new SVGPathSegCurvetoQuadraticRel(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegArcAbs=function(a,b,c,d,f,g,h){return new SVGPathSegArcAbs(void 0,a,b,c,d,f,g,h)},SVGPathElement.prototype.createSVGPathSegArcRel=function(a,b,c,d,f,g,h){return new SVGPathSegArcRel(void 0,
a,b,c,d,f,g,h)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(a){return new SVGPathSegLinetoHorizontalAbs(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(a){return new SVGPathSegLinetoHorizontalRel(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(a){return new SVGPathSegLinetoVerticalAbs(void 0,a)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(a){return new SVGPathSegLinetoVerticalRel(void 0,
a)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(a,b,c,d){return new SVGPathSegCurvetoCubicSmoothAbs(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(a,b,c,d){return new SVGPathSegCurvetoCubicSmoothRel(void 0,a,b,c,d)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(a,b){return new SVGPathSegCurvetoQuadraticSmoothAbs(void 0,a,b)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(a,
b){return new SVGPathSegCurvetoQuadraticSmoothRel(void 0,a,b)});"SVGPathSegList"in k||(k.SVGPathSegList=function(a){this._pathElement=a;this._list=this._parsePath(this._pathElement.getAttribute("d"));this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]};this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this));this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},Object.defineProperty(SVGPathSegList.prototype,
"numberOfItems",{get:function(){this._checkPathSynchronizedToList();return this._list.length},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"pathSegList",{get:function(){this._pathSegList||(this._pathSegList=new SVGPathSegList(this));return this._pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},
enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},SVGPathSegList.prototype._updateListFromPathMutations=function(a){if(this._pathElement){var b=!1;a.forEach(function(a){"d"==a.attributeName&&(b=!0)});b&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},
SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect();this._pathElement.setAttribute("d",SVGPathSegList._pathSegArrayAsString(this._list));this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},SVGPathSegList.prototype.segmentChanged=function(a){this._writeListToPath()},SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList();this._list.forEach(function(a){a._owningPathSegList=null});this._list=
[];this._writeListToPath()},SVGPathSegList.prototype.initialize=function(a){this._checkPathSynchronizedToList();this._list=[a];a._owningPathSegList=this;this._writeListToPath();return a},SVGPathSegList.prototype._checkValidIndex=function(a){if(isNaN(a)||0>a||a>=this.numberOfItems)throw"INDEX_SIZE_ERR";},SVGPathSegList.prototype.getItem=function(a){this._checkPathSynchronizedToList();this._checkValidIndex(a);return this._list[a]},SVGPathSegList.prototype.insertItemBefore=function(a,b){this._checkPathSynchronizedToList();
b>this.numberOfItems&&(b=this.numberOfItems);a._owningPathSegList&&(a=a.clone());this._list.splice(b,0,a);a._owningPathSegList=this;this._writeListToPath();return a},SVGPathSegList.prototype.replaceItem=function(a,b){this._checkPathSynchronizedToList();a._owningPathSegList&&(a=a.clone());this._checkValidIndex(b);this._list[b]=a;a._owningPathSegList=this;this._writeListToPath();return a},SVGPathSegList.prototype.removeItem=function(a){this._checkPathSynchronizedToList();this._checkValidIndex(a);var b=
this._list[a];this._list.splice(a,1);this._writeListToPath();return b},SVGPathSegList.prototype.appendItem=function(a){this._checkPathSynchronizedToList();a._owningPathSegList&&(a=a.clone());this._list.push(a);a._owningPathSegList=this;this._writeListToPath();return a},SVGPathSegList._pathSegArrayAsString=function(a){var b="",c=!0;a.forEach(function(a){c?(c=!1,b+=a._asPathString()):b+=" "+a._asPathString()});return b},SVGPathSegList.prototype._parsePath=function(a){if(!a||0==a.length)return[];var b=
this,c=function(){this.pathSegList=[]};c.prototype.appendSegment=function(a){this.pathSegList.push(a)};var e=function(a){this._string=a;this._currentIndex=0;this._endIndex=this._string.length;this._previousCommand=SVGPathSeg.PATHSEG_UNKNOWN;this._skipOptionalSpaces()};e.prototype._isCurrentSpace=function(){var a=this._string[this._currentIndex];return" ">=a&&(" "==a||"\n"==a||"\t"==a||"\r"==a||"\f"==a)};e.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;
return this._currentIndex<this._endIndex};e.prototype._skipOptionalSpacesOrDelimiter=function(){if(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))return!1;this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces());return this._currentIndex<this._endIndex};e.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex};e.prototype.peekSegmentType=
function(){return this._pathSegTypeFromChar(this._string[this._currentIndex])};e.prototype._pathSegTypeFromChar=function(a){switch(a){case "Z":case "z":return SVGPathSeg.PATHSEG_CLOSEPATH;case "M":return SVGPathSeg.PATHSEG_MOVETO_ABS;case "m":return SVGPathSeg.PATHSEG_MOVETO_REL;case "L":return SVGPathSeg.PATHSEG_LINETO_ABS;case "l":return SVGPathSeg.PATHSEG_LINETO_REL;case "C":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case "c":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case "Q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;
case "q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case "A":return SVGPathSeg.PATHSEG_ARC_ABS;case "a":return SVGPathSeg.PATHSEG_ARC_REL;case "H":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case "h":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case "V":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case "v":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case "S":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case "s":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case "T":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;
case "t":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return SVGPathSeg.PATHSEG_UNKNOWN}};e.prototype._nextCommandHelper=function(a,b){return("+"==a||"-"==a||"."==a||"0"<=a&&"9">=a)&&b!=SVGPathSeg.PATHSEG_CLOSEPATH?b==SVGPathSeg.PATHSEG_MOVETO_ABS?SVGPathSeg.PATHSEG_LINETO_ABS:b==SVGPathSeg.PATHSEG_MOVETO_REL?SVGPathSeg.PATHSEG_LINETO_REL:b:SVGPathSeg.PATHSEG_UNKNOWN};e.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var a=this.peekSegmentType();return a==
SVGPathSeg.PATHSEG_MOVETO_ABS||a==SVGPathSeg.PATHSEG_MOVETO_REL};e.prototype._parseNumber=function(){var a=0,b=0,c=1,e=0,d=1,f=1,g=this._currentIndex;this._skipOptionalSpaces();this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,d=-1);if(!(this._currentIndex==this._endIndex||("0">this._string.charAt(this._currentIndex)||"9"<this._string.charAt(this._currentIndex))&&
"."!=this._string.charAt(this._currentIndex))){for(var h=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)this._currentIndex++;if(this._currentIndex!=h)for(var l=this._currentIndex-1,k=1;l>=h;)b+=k*(this._string.charAt(l--)-0),k*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){this._currentIndex++;if(this._currentIndex>=this._endIndex||"0">this._string.charAt(this._currentIndex)||
"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)e+=(this._string.charAt(this._currentIndex++)-0)*(c*=.1)}if(this._currentIndex!=g&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){this._currentIndex++;
"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,f=-1);if(this._currentIndex>=this._endIndex||"0">this._string.charAt(this._currentIndex)||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&"9">=this._string.charAt(this._currentIndex);)a*=10,a+=this._string.charAt(this._currentIndex)-0,this._currentIndex++}b=(b+e)*d;a&&(b*=Math.pow(10,
f*a));if(g!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),b}};e.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var a=this._string.charAt(this._currentIndex++);if("0"==a)a=!1;else if("1"==a)a=!0;else return;this._skipOptionalSpacesOrDelimiter();return a}};e.prototype.parseSegment=function(){var a=this._string[this._currentIndex];var c=this._pathSegTypeFromChar(a);if(c==SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==SVGPathSeg.PATHSEG_UNKNOWN)return null;
c=this._nextCommandHelper(a,this._previousCommand);if(c==SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;this._previousCommand=c;switch(c){case SVGPathSeg.PATHSEG_MOVETO_REL:return new SVGPathSegMovetoRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_MOVETO_ABS:return new SVGPathSegMovetoAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_REL:return new SVGPathSegLinetoRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_ABS:return new SVGPathSegLinetoAbs(b,
this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new SVGPathSegLinetoHorizontalRel(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new SVGPathSegLinetoHorizontalAbs(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new SVGPathSegLinetoVerticalRel(b,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new SVGPathSegLinetoVerticalAbs(b,this._parseNumber());case SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),
new SVGPathSegClosePath(b);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:a=this._parseNumber();c=this._parseNumber();var e=this._parseNumber();var d=this._parseNumber();var f=this._parseNumber();var g=this._parseNumber();return new SVGPathSegCurvetoCubicRel(b,f,g,a,c,e,d);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return a=this._parseNumber(),c=this._parseNumber(),e=this._parseNumber(),d=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),new SVGPathSegCurvetoCubicAbs(b,f,g,a,c,e,d);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return e=
this._parseNumber(),d=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),new SVGPathSegCurvetoCubicSmoothRel(b,f,g,e,d);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return e=this._parseNumber(),d=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),new SVGPathSegCurvetoCubicSmoothAbs(b,f,g,e,d);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return a=this._parseNumber(),c=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),new SVGPathSegCurvetoQuadraticRel(b,
f,g,a,c);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return a=this._parseNumber(),c=this._parseNumber(),f=this._parseNumber(),g=this._parseNumber(),new SVGPathSegCurvetoQuadraticAbs(b,f,g,a,c);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new SVGPathSegCurvetoQuadraticSmoothRel(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new SVGPathSegCurvetoQuadraticSmoothAbs(b,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_ARC_REL:a=
this._parseNumber();c=this._parseNumber();e=this._parseNumber();d=this._parseArcFlag();var h=this._parseArcFlag();f=this._parseNumber();g=this._parseNumber();return new SVGPathSegArcRel(b,f,g,a,c,e,d,h);case SVGPathSeg.PATHSEG_ARC_ABS:return a=this._parseNumber(),c=this._parseNumber(),e=this._parseNumber(),d=this._parseArcFlag(),h=this._parseArcFlag(),f=this._parseNumber(),g=this._parseNumber(),new SVGPathSegArcAbs(b,f,g,a,c,e,d,h);default:throw"Unknown path seg type.";}};c=new c;a=new e(a);if(!a.initialCommandIsMoveTo())return[];
for(;a.hasMoreData();){e=a.parseSegment();if(!e)return[];c.appendSegment(e)}return c.pathSegList})})();"function"===typeof define&&define.amd?define("c3",["d3"],function(){return f}):"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=f:k.c3=f})(window);/*

 Video.js 7.0.4 <http://videojs.com/>
 Copyright Brightcove, Inc. <https://www.brightcove.com/>
 Available under Apache License Version 2.0
 <https://github.com/videojs/video.js/blob/master/LICENSE>

 Includes vtt.js <https://github.com/mozilla/vtt.js>
 Available under Apache License Version 2.0
 <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 2018 Brightcove, Inc
 @license Apache-2.0
*/
(function(k,h){"object"===typeof exports&&"undefined"!==typeof module?module.exports=h():"function"===typeof define&&define.amd?define(h):k.videojs=h()})(this,function(){function k(a,b){return b={exports:{}},a(b,b.exports),b.exports}function h(a,b){Vd(a).forEach(function(c){return b(a[c],c)})}function c(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return Vd(a).reduce(function(c,e){return b(c,a[e],e)},c)}function g(a){for(var b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-
1]=arguments[e];if(Object.assign)return Object.assign.apply(Object,[a].concat(c));c.forEach(function(b){b&&h(b,function(b,c){a[c]=b})});return a}function a(a){return!!a&&"object"===("undefined"===typeof a?"undefined":$a(a))}function f(b){return a(b)&&"[object Object]"===pd.call(b)&&b.constructor===Object}function d(a,b){return a&&b?"function"===typeof K.getComputedStyle?(a=K.getComputedStyle(a))?a[b]:"":"":""}function b(a){if(/\s/.test(a))throw Error("class has illegal whitespace characters");}function l(){return Y===
K.document}function n(b){return a(b)&&1===b.nodeType}function p(){try{return K.parent!==K.self}catch(ej){return!0}}function r(a){return function(b,c){if("string"!==typeof b||!/\S/.test(b))return Y[a](null);"string"===typeof c&&/\S/.test(c)&&(c=Y.querySelector(c));c=n(c)?c:Y;return c[a]&&c[a](b)}}function w(){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=arguments[3],e=Y.createElement(0<arguments.length&&void 0!==arguments[0]?
arguments[0]:"div");Object.getOwnPropertyNames(a).forEach(function(b){var c=a[b];-1!==b.indexOf("aria-")||"role"===b||"type"===b?(qa.warn(pe(jc,b,c)),e.setAttribute(b,c)):"textContent"===b?z(e,c):e[b]=c});Object.getOwnPropertyNames(b).forEach(function(a){e.setAttribute(a,b[a])});c&&N(e,c);return e}function z(a,b){"undefined"===typeof a.textContent?a.innerText=b:a.textContent=b;return a}function v(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}function t(a,c){b(c);return a.classList?
a.classList.contains(c):(new RegExp("(^|\\s)"+c+"($|\\s)")).test(a.className)}function q(a,b){a.classList?a.classList.add(b):t(a,b)||(a.className=(a.className+" "+b).trim());return a}function y(a,c){a.classList?a.classList.remove(c):(b(c),a.className=a.className.split(/\s+/).filter(function(a){return a!==c}).join(" "));return a}function A(a,b,c){var e=t(a,b);"function"===typeof c&&(c=c(a,b));"boolean"!==typeof c&&(c=!e);if(c!==e)return c?q(a,b):y(a,b),a}function C(a,b){Object.getOwnPropertyNames(b).forEach(function(c){var e=
b[c];null===e||"undefined"===typeof e||!1===e?a.removeAttribute(c):a.setAttribute(c,!0===e?"":e)})}function G(a){var b={};if(a&&a.attributes&&0<a.attributes.length)for(var c=a.attributes,e=c.length-1;0<=e;e--){var d=c[e].name,f=c[e].value;if("boolean"===typeof a[d]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+d+","))f=null!==f?!0:!1;b[d]=f}return b}function E(){Y.body.focus();Y.onselectstart=function(){return!1}}function F(){Y.onselectstart=function(){return!0}}
function I(a){if(a&&a.getBoundingClientRect&&a.parentNode){var b=a.getBoundingClientRect(),c={};"bottom height left right top width".split(" ").forEach(function(a){void 0!==b[a]&&(c[a]=b[a])});c.height||(c.height=parseFloat(d(a,"height")));c.width||(c.width=parseFloat(d(a,"width")));return c}}function e(a){var b=void 0;a.getBoundingClientRect&&a.parentNode&&(b=a.getBoundingClientRect());if(!b)return{left:0,top:0};a=Y.documentElement;var c=Y.body;return{left:Math.round(b.left+(K.pageXOffset||c.scrollLeft)-
(a.clientLeft||c.clientLeft||0)),top:Math.round(b.top+(K.pageYOffset||c.scrollTop)-(a.clientTop||c.clientTop||0))}}function m(a,b){var c={},d=e(a),f=a.offsetWidth;a=a.offsetHeight;var g=d.top;d=d.left;var h=b.pageY,l=b.pageX;b.changedTouches&&(l=b.changedTouches[0].pageX,h=b.changedTouches[0].pageY);c.y=Math.max(0,Math.min(1,(g-h+a)/a));c.x=Math.max(0,Math.min(1,(l-d)/f));return c}function x(b){return a(b)&&3===b.nodeType}function D(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function H(a){"function"===
typeof a&&(a=a());return(Array.isArray(a)?a:[a]).map(function(a){"function"===typeof a&&(a=a());if(n(a)||x(a))return a;if("string"===typeof a&&/\S/.test(a))return Y.createTextNode(a)}).filter(function(a){return a})}function N(a,b){H(b).forEach(function(b){return a.appendChild(b)});return a}function ka(a,b){return N(D(a),b)}function aa(a){return void 0===a.button&&void 0===a.buttons||0===a.button&&void 0===a.buttons?!0:0!==a.button||1!==a.buttons?!1:!0}function Aa(a){var b=a[Nb];b||(b=a[Nb]=tb++);
kc[b]||(kc[b]={});return kc[b]}function fa(a){return(a=a[Nb])?!!Object.getOwnPropertyNames(kc[a]).length:!1}function R(a){var b=a[Nb];if(b){delete kc[b];try{delete a[Nb]}catch(Hc){a.removeAttribute?a.removeAttribute(Nb):a[Nb]=null}}}function X(a,b){var c=Aa(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher));0>=Object.getOwnPropertyNames(c.handlers).length&&(delete c.handlers,delete c.dispatcher,
delete c.disabled);0===Object.getOwnPropertyNames(c).length&&R(a)}function M(a,b,c,e){c.forEach(function(c){a(b,c,e)})}function ba(a){function b(){return!0}function c(){return!1}if(!a||!a.isPropagationStopped){var e=a||K.event;a={};for(var d in e)"layerX"!==d&&"layerY"!==d&&"keyLocation"!==d&&"webkitMovementX"!==d&&"webkitMovementY"!==d&&("returnValue"===d&&e.preventDefault||(a[d]=e[d]));a.target||(a.target=a.srcElement||Y);a.relatedTarget||(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);
a.preventDefault=function(){e.preventDefault&&e.preventDefault();a.returnValue=!1;e.returnValue=!1;a.defaultPrevented=!0};a.defaultPrevented=!1;a.stopPropagation=function(){e.stopPropagation&&e.stopPropagation();a.cancelBubble=!0;e.cancelBubble=!0;a.isPropagationStopped=b};a.isPropagationStopped=c;a.stopImmediatePropagation=function(){e.stopImmediatePropagation&&e.stopImmediatePropagation();a.isImmediatePropagationStopped=b;a.stopPropagation()};a.isImmediatePropagationStopped=c;if(null!==a.clientX&&
void 0!==a.clientX){d=Y.documentElement;var f=Y.body;a.pageX=a.clientX+(d&&d.scrollLeft||f&&f.scrollLeft||0)-(d&&d.clientLeft||f&&f.clientLeft||0);a.pageY=a.clientY+(d&&d.scrollTop||f&&f.scrollTop||0)-(d&&d.clientTop||f&&f.clientTop||0)}a.which=a.charCode||a.keyCode;null!==a.button&&void 0!==a.button&&(a.button=a.button&1?0:a.button&4?1:a.button&2?2:0)}return a}function ja(a,b,c){if(Array.isArray(b))return M(ja,a,b,c);var e=Aa(a);e.handlers||(e.handlers={});e.handlers[b]||(e.handlers[b]=[]);c.guid||
(c.guid=tb++);e.handlers[b].push(c);e.dispatcher||(e.disabled=!1,e.dispatcher=function(b,c){if(!e.disabled){b=ba(b);var d=e.handlers[b.type];if(d){d=d.slice(0);for(var f=0,g=d.length;f<g&&!b.isImmediatePropagationStopped();f++)try{d[f].call(a,b,c)}catch(Md){qa.error(Md)}}}});1===e.handlers[b].length&&(a.addEventListener?(c=!1,od&&-1<ze.indexOf(b)&&(c={passive:!0}),a.addEventListener(b,e.dispatcher,c)):a.attachEvent&&a.attachEvent("on"+b,e.dispatcher))}function ca(a,b,c){if(fa(a)){var e=Aa(a);if(e.handlers){if(Array.isArray(b))return M(ca,
a,b,c);if(void 0===b)for(var d in e.handlers)Object.prototype.hasOwnProperty.call(e.handlers||{},d)&&(b=a,c=d,e.handlers[c]=[],X(b,c));else if(d=e.handlers[b]){if(!c)e.handlers[b]=[];else if(c.guid)for(e=0;e<d.length;e++)d[e].guid===c.guid&&d.splice(e--,1);X(a,b)}}}}function S(a,b,c){var e=fa(a)?Aa(a):{},d=a.parentNode||a.ownerDocument;"string"===typeof b?b={type:b,target:a}:b.target||(b.target=a);b=ba(b);e.dispatcher&&e.dispatcher.call(a,b,c);if(d&&!b.isPropagationStopped()&&!0===b.bubbles)S.call(null,
d,b,c);else if(!d&&!b.defaultPrevented&&(a=Aa(b.target),b.target[b.type])){a.disabled=!0;if("function"===typeof b.target[b.type])b.target[b.type]();a.disabled=!1}return!b.defaultPrevented}function oa(a,b,c){if(Array.isArray(b))return M(oa,a,b,c);var e=function Sa(){ca(a,b,Sa);c.apply(this,arguments)};e.guid=c.guid=c.guid||tb++;ja(a,b,e)}function Ba(a,b){b&&(md=b);K.setTimeout(Lc,a)}function La(a){var b=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).eventBusKey;if(b){if(!a[b].nodeName)throw Error('The eventBusKey "'+
b+'" does not refer to an element.');a.eventBusEl_=a[b]}else a.eventBusEl_=w("span",{className:"vjs-event-bus"});g(a,Xd);a.on("dispose",function(){a.off();K.setTimeout(function(){a.eventBusEl_=null},0)});return a}function va(a,b){g(a,dg);a.state=g({},a.state,b);if("function"===typeof a.handleStateChanged&&Vc(a))a.on("statechanged",a.handleStateChanged);return a}function ra(a){return"string"!==typeof a?a:a.charAt(0).toUpperCase()+a.slice(1)}function sb(a,b){return ra(a)===ra(b)}function wa(){for(var a=
{},b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];c.forEach(function(b){b&&h(b,function(b,c){f(b)?(f(a[c])||(a[c]={}),a[c]=wa(a[c],b)):a[c]=b})});return a}function Ta(a,b,c,e){var d=c.length-1;if("number"!==typeof e||0>e||e>d)throw Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+d+").");return c[e][b]}function Xa(a){return void 0===a||0===a.length?{length:0,start:function(){throw Error("This TimeRanges object is empty");
},end:function(){throw Error("This TimeRanges object is empty");}}:{length:a.length,start:Ta.bind(null,"start",0,a),end:Ta.bind(null,"end",1,a)}}function xa(a,b){return Array.isArray(a)?Xa(a):void 0===a||void 0===b?Xa():Xa([[a,b]])}function na(a,b){var c=0;if(!b)return 0;a&&a.length||(a=xa(0,0));for(var e=0;e<a.length;e++){var d=a.start(e);var f=a.end(e);f>b&&(f=b);c+=f-d}return c/b}function Q(b){if(b instanceof Q)return b;"number"===typeof b?this.code=b:"string"===typeof b?this.message=b:a(b)&&("number"===
typeof b.code&&(this.code=b.code),g(this,b));this.message||(this.message=Q.defaultMessages[this.code]||"")}function da(a){return void 0!==a&&null!==a&&"function"===typeof a.then}function za(a){da(a)&&a.then(null,function(a){})}function Ea(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function Ia(a,b,c){var e=a;ef(b)?(c=b,"string"===typeof a&&(e={uri:a})):e=nh(b,{uri:a});e.callback=c;return e}function la(a,b,c){b=Ia(a,b,c);return Oa(b)}function Oa(a){function b(b){clearTimeout(p);b instanceof
Error||(b=Error(""+(b||"Unknown XMLHttpRequest Error")));b.statusCode=0;var c=t;e||(e=!0,a.callback(b,c,void 0))}function c(){if(!g){clearTimeout(p);var b=a.useXDR&&void 0===d.status?200:1223===d.status?204:d.status;var c=t,f=null;if(0!==b){d.response?c=d.response:(c=d.responseText)||("document"===d.responseType?c=d.responseXML:(c=d.responseXML&&"parsererror"===d.responseXML.documentElement.nodeName,c=""!==d.responseType||c?null:d.responseXML));if(q)try{c=JSON.parse(c)}catch(kk){}c={body:c,statusCode:b,
method:l,headers:{},url:h,rawRequest:d};d.getAllResponseHeaders&&(c.headers=$f(d.getAllResponseHeaders()))}else f=Error("Internal XMLHttpRequest Error");b=c.body;e||(e=!0,a.callback(f,c,b))}}if("undefined"===typeof a.callback)throw Error("callback argument missing");var e=!1,d=a.xhr||null;d||(d=a.cors||a.useXDR?new la.XDomainRequest:new la.XMLHttpRequest);var f,g,h=d.url=a.uri||a.url,l=d.method=a.method||"GET",k=a.body||a.data,m=d.headers=a.headers||{},n=!!a.sync,q=!1,p,t={body:void 0,headers:{},
statusCode:0,method:l,url:h,rawRequest:d};"json"in a&&!1!==a.json&&(q=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==l&&"HEAD"!==l&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),k=JSON.stringify(!0===a.json?k:a.json)));d.onreadystatechange=function(){4===d.readyState&&setTimeout(c,0)};d.onload=c;d.onerror=b;d.onprogress=function(){};d.onabort=function(){g=!0};d.ontimeout=b;d.open(l,h,!n,a.username,a.password);n||(d.withCredentials=!!a.withCredentials);
!n&&0<a.timeout&&(p=setTimeout(function(){if(!g){g=!0;d.abort("timeout");var a=Error("XMLHttpRequest timeout");a.code="ETIMEDOUT";b(a)}},a.timeout));if(d.setRequestHeader)for(f in m)m.hasOwnProperty(f)&&d.setRequestHeader(f,m[f]);else if(a.headers&&!Ea(a.headers))throw Error("Headers cannot be set on an XDomainRequest object");"responseType"in a&&(d.responseType=a.responseType);"beforeSend"in a&&"function"===typeof a.beforeSend&&a.beforeSend(d);d.send(k||null);return d}function Ya(){}function P(a,
b){this.name="ParsingError";this.code=a.code;this.message=b||a.message}function u(a){a=a.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);if(!a)return null;if(a[3]){var b=a[3].replace(":","");return 3600*(a[1]|0)+60*(a[2]|0)+(b|0)+(a[4]|0)/1E3}return 59<a[1]?3600*(a[1]|0)+60*(a[2]|0)+0+(a[4]|0)/1E3:0+60*(a[1]|0)+(a[2]|0)+(a[4]|0)/1E3}function pa(){this.values=Uf(null)}function zb(a,b,c,e){a=e?a.split(e):[a];for(var d in a)"string"===typeof a[d]&&(e=a[d].split(c),2===e.length&&b(e[0],e[1]))}function Pa(a,
b,c){function e(){var b=u(a);if(null===b)throw new P(P.Errors.BadTimeStamp,"Malformed timestamp: "+f);a=a.replace(/^[^\sa-zA-Z-]+/,"");return b}function d(){a=a.replace(/^\s+/,"")}var f=a;d();b.startTime=e();d();if("--\x3e"!==a.substr(0,3))throw new P(P.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+f);a=a.substr(3);d();b.endTime=e();d();(function(a,b){var e=new pa;zb(a,function(a,b){switch(a){case "region":for(var d=c.length-1;0<=d;d--)if(c[d].id===b){e.set(a,
c[d].region);break}break;case "vertical":e.alt(a,b,["rl","lr"]);break;case "line":b=b.split(",");d=b[0];e.integer(a,d);e.percent(a,d)?e.set("snapToLines",!1):null;e.alt(a,d,["auto"]);2===b.length&&e.alt("lineAlign",b[1],["start","middle","end"]);break;case "position":b=b.split(",");e.percent(a,b[0]);2===b.length&&e.alt("positionAlign",b[1],["start","middle","end"]);break;case "size":e.percent(a,b);break;case "align":e.alt(a,b,["start","middle","end","left","right"])}},/:/,/\s/);b.region=e.get("region",
null);b.vertical=e.get("vertical","");b.line=e.get("line","auto");b.lineAlign=e.get("lineAlign","start");b.snapToLines=e.get("snapToLines",!0);b.size=e.get("size",100);b.align=e.get("align","middle");b.position=e.get("position",{start:0,left:0,middle:50,end:100,right:100},b.align);b.positionAlign=e.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},b.align)})(a,b)}function qd(a,b){function c(){if(!b)return null;var a=b.match(/^([^<]*)(<[^>]*>?)?/);a=a[1]?a[1]:a[2];
b=b.substr(a.length);return a}function e(a){return vi[a]}function d(a){for(;g=a.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)a=a.replace(g[0],e);return a}function f(b,c){var e=wi[b];if(!e)return null;var d=a.document.createElement(e);d.localName=e;(b=xi[b])&&c&&(d[b]=c.trim());return d}for(var g,h=a.document.createElement("div"),l=h,k,m=[];null!==(k=c());)if("<"===k[0])if("/"===k[1])m.length&&m[m.length-1]===k.substr(2).replace(">","")&&(m.pop(),l=l.parentNode);else{var n=u(k.substr(1,k.length-2));if(n)k=
a.document.createProcessingInstruction("timestamp",n),l.appendChild(k);else if(g=k.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))!(k=f(g[1],g[3]))||ph[k.localName]&&ph[k.localName]!==l.localName||(g[2]&&(k.className=g[2].substr(1).replace("."," ")),m.push(g[1]),l.appendChild(k),l=k)}else l.appendChild(a.document.createTextNode(d(k)));return h}function Db(a){for(var b=0;b<Sf.length;b++){var c=Sf[b];if(a>=c[0]&&a<=c[1])return!0}return!1}function lb(a){function b(a,b){for(var c=b.childNodes.length-
1;0<=c;c--)a.push(b.childNodes[c])}function c(a){if(!a||!a.length)return null;var e=a.pop(),d=e.textContent||e.innerText;if(d)return(e=d.match(/^.*(\n|\r)/))?(a.length=0,e[0]):d;if("ruby"===e.tagName)return c(a);if(e.childNodes)return b(a,e),c(a)}var e=[],d="";if(!a||!a.childNodes)return"ltr";for(b(e,a);d=c(e);)for(var f=0;f<d.length;f++)if(a=d.charCodeAt(f),Db(a))return"rtl";return"ltr"}function sd(){}function Qc(a,b,c){this.cue=b;this.cueDiv=qd(a,b.text);var e={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",
position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(e,this.cueDiv);this.div=a.document.createElement("div");e={direction:lb(this.cueDiv),writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===b.align?"center":b.align,font:c.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(e);
this.div.appendChild(this.cueDiv);a=0;switch(b.positionAlign){case "start":a=b.position;break;case "middle":a=b.position-b.size/2;break;case "end":a=b.position-b.size}""===b.vertical?this.applyStyles({left:this.formatStyle(a,"%"),width:this.formatStyle(b.size,"%")}):this.applyStyles({top:this.formatStyle(a,"%"),height:this.formatStyle(b.size,"%")});this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,
"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function Qa(a){if(a.div){var b=a.div.offsetHeight;var c=a.div.offsetWidth;var e=a.div.offsetTop;var d=(d=a.div.childNodes)&&(d=d[0])&&d.getClientRects&&d.getClientRects();a=a.div.getBoundingClientRect();var f=d?Math.max(d[0]&&d[0].height||0,a.height/d.length):0}this.left=a.left;this.right=a.right;this.top=a.top||e;this.height=a.height||b;this.bottom=a.bottom||e+(a.height||b);this.width=a.width||c;this.lineHeight=
void 0!==f?f:a.lineHeight}function Jb(){}function sa(a){return"string"!==typeof a?!1:qh[a.toLowerCase()]?a.toLowerCase():!1}function Ka(a,b,c){this.hasBeenReset=!1;var e="",d=!1,f=a,g=b,h=c,l=null,k="",m=!0,n="auto",q="start",Hc=50,p="middle",t=50,r="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return e},set:function(a){e=""+a}},pauseOnExit:{enumerable:!0,get:function(){return d},set:function(a){d=!!a}},startTime:{enumerable:!0,get:function(){return f},set:function(a){if("number"!==
typeof a)throw new TypeError("Start time must be set to a number.");f=a;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return g},set:function(a){if("number"!==typeof a)throw new TypeError("End time must be set to a number.");g=a;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return h},set:function(a){h=""+a;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(a){l=a;this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return k},set:function(a){a=
"string"!==typeof a?!1:hh[a.toLowerCase()]?a.toLowerCase():!1;if(!1===a)throw new SyntaxError("An invalid or illegal string was specified.");k=a;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return m},set:function(a){m=!!a;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return n},set:function(a){if("number"!==typeof a&&"auto"!==a)throw new SyntaxError("An invalid number or illegal string was specified.");n=a;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return q},
set:function(a){a=sa(a);if(!a)throw new SyntaxError("An invalid or illegal string was specified.");q=a;this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return Hc},set:function(a){if(0>a||100<a)throw Error("Position must be between 0 and 100.");Hc=a;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return p},set:function(a){a=sa(a);if(!a)throw new SyntaxError("An invalid or illegal string was specified.");p=a;this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return t},
set:function(a){if(0>a||100<a)throw Error("Size must be between 0 and 100.");t=a;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return r},set:function(a){a=sa(a);if(!a)throw new SyntaxError("An invalid or illegal string was specified.");r=a;this.hasBeenReset=!0}}});this.displayState=void 0}function tc(a){return"number"===typeof a&&0<=a&&100>=a}function Rd(a,b,c,e){var d=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},f=a.textTracks();d.kind=b;c&&(d.label=c);e&&(d.language=e);
d.tech=a;d=new Cb.text.TrackClass(d);f.addTrack(d);return d}function Kb(a,b,c){a.setTimeout(function(){return Jc(b,Wb[b.type],c,a)},1)}function Rc(a,b){a.forEach(function(a){return a.setTech&&a.setTech(b)})}function ye(a,b,c){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,d="call"+ra(c);d=a.reduce(gc(d),e);d=(e=d===Ab)?null:b[c](d);for(var f=a.length-1;0<=f;f--){var g=a[f];if(g[c])g[c](e,d)}return d}function gc(a){return function(b,c){return b===Ab?Ab:c[a]?c[a](b):b}}function ke(a,
b){var c=Nc[a.id()],e=null;if(void 0===c||null===c)return e=b(a),Nc[a.id()]=[[b,e]],e;for(var d=0;d<c.length;d++){var f=c[d];f[0]===b&&(e=f[1])}null===e&&(e=b(a),c.push([b,e]));return e}function Jc(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],c=arguments[2],e=arguments[3],d=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],f=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!1,h=b[0],l=b.slice(1);if("string"===
typeof h)Jc(a,Wb[h],c,e,d,f);else if(h){var k=ke(e,h);k.setSource(g({},a),function(b,g){if(b)return Jc(a,l,c,e,d,f);d.push(k);Jc(g,a.type===g.type?l:Wb[g.type],c,e,d,f)})}else l.length?Jc(a,l,c,e,d,f):f?c(a,d):Jc(a,Wb["*"],c,e,d,!0)}function Sd(a){var b=eh(a.src);!a.type&&b&&(a.type=b);return a}function kb(a,b){return"rgba("+parseInt(a[1]+a[1],16)+","+parseInt(a[2]+a[2],16)+","+parseInt(a[3]+a[3],16)+","+b+")"}function Wa(a){return df(a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:a)}function Vb(a,
b){b&&(a=b(a));if(a&&"none"!==a)return a}function J(b,c,e){var d=J.getPlayer(b);if(d)return c&&qa.warn('Player "'+b+'" is already initialised. Options will not be applied.'),e&&d.ready(e),d;var f="string"===typeof b?Fb("#"+Rh(b)):b;if(!n(f))throw new TypeError("The element or ID supplied is not valid. (videojs)");Y.body.contains(f)||qa.warn("The element supplied is not included in the DOM");c=c||{};J.hooks("beforesetup").forEach(function(b){b=b(f,wa(c));!a(b)||Array.isArray(b)?qa.error("please return an object in beforesetup hooks"):
c=wa(c,b)});d=new (O.getComponent("Player"))(f,c,e);J.hooks("setup").forEach(function(a){return a(d)});return d}function Va(a,b){return function(c){var e=this;if(b){if(Ua&&!c)return c=b.toString().replace(/^function.+?{/,"").slice(0,-1),c=Kc(c),this[Zg]=new Ua(c),ld(this[Zg],c),this[Zg];var d={postMessage:function(a){e.onmessage&&setTimeout(function(){e.onmessage({data:a,target:d})})}};b.call(d);this.postMessage=function(a){setTimeout(function(){d.onmessage({data:a,target:e})})};this.isThisThread=
!0}else return new Ua(a)}}function Kc(a){try{return Ca.createObjectURL(new Blob([a],{type:"application/javascript"}))}catch(Hc){var b=new L;b.append(a);return Ca.createObjectURL(b.getBlob(type))}}function ld(a,b){if(a&&b){var c=a.terminate;a.objURL=b;a.terminate=function(){a.objURL&&Ca.revokeObjectURL(a.objURL);c.call(a)}}}function sc(){}var bb="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},K="undefined"!==typeof window?window:"undefined"!==
typeof bb?bb:"undefined"!==typeof self?self:{},oe={},Td=Object.freeze({default:oe}),cg=Td&&oe||Td,hf="undefined"!==typeof bb?bb:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var td=document;else(td=hf["__GLOBAL_DOCUMENT_CACHE@4"])||(td=hf["__GLOBAL_DOCUMENT_CACHE@4"]=cg);var Y=td,gb=void 0,ud="info",Eb=[],Ud=function(a,b){var c=gb.levels[ud],e=new RegExp("^("+c+")$");"log"!==a&&b.unshift(a.toUpperCase()+":");Eb&&Eb.push([].concat(b));b.unshift("VIDEOJS:");if(K.console){var d=
K.console[a];d||"debug"!==a||(d=K.console.info||K.console.log);if(d&&c&&e.test(a))d[Array.isArray(b)?"apply":"call"](K.console,b)}};gb=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];Ud("log",b)};gb.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:ud};gb.level=function(a){if("string"===typeof a){if(!gb.levels.hasOwnProperty(a))throw Error('"'+a+'" in not a valid log level');ud=a}return ud};
gb.history=function(){return Eb?[].concat(Eb):[]};gb.history.clear=function(){Eb&&(Eb.length=0)};gb.history.disable=function(){null!==Eb&&(Eb.length=0,Eb=null)};gb.history.enable=function(){null===Eb&&(Eb=[])};gb.error=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return Ud("error",b)};gb.warn=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return Ud("warn",b)};gb.debug=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=
arguments[c];return Ud("debug",b)};var qa=gb,pe=function(a){for(var b="",c=0;c<arguments.length;c++)b+=a[c].replace(/\n\r?\s*/g,"")+(arguments[c+1]||"");return b},$a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},T=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},W=function(a,b){if("function"!==typeof b&&
null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},V=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b},Sc=function(a,b){a.raw=b;return a},pd=Object.prototype.toString,
Vd=function(b){return a(b)?Object.keys(b):[]},jc=Sc(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]),Fb=r("querySelector"),
rb=r("querySelectorAll"),Lb=Object.freeze({isReal:l,isEl:n,isInFrame:p,createEl:w,textContent:z,prependTo:v,hasClass:t,addClass:q,removeClass:y,toggleClass:A,setAttributes:C,getAttributes:G,getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},removeAttribute:function(a,b){a.removeAttribute(b)},blockTextSelection:E,unblockTextSelection:F,getBoundingClientRect:I,findPosition:e,getPointerPosition:m,isTextNode:x,emptyEl:D,normalizeContent:H,appendContent:N,
insertContent:ka,isSingleLeftClick:aa,$:Fb,$$:rb}),tb=1,kc={},Nb="vdata"+(new Date).getTime(),od=!1;(function(){try{var a=Object.defineProperty({},"passive",{get:function(){od=!0}});K.addEventListener("test",null,a);K.removeEventListener("test",null,a)}catch(Si){}})();var ze=["touchstart","touchmove"],Tc=Object.freeze({fixEvent:ba,on:ja,off:ca,trigger:S,one:oa}),nd=!1,md=void 0,Lc=function(){if(l()&&!1!==md.options.autoSetup){var a=Array.prototype.slice.call(Y.getElementsByTagName("video")),b=Array.prototype.slice.call(Y.getElementsByTagName("audio")),
c=Array.prototype.slice.call(Y.getElementsByTagName("video-js"));if((a=a.concat(b,c))&&0<a.length)for(b=0,c=a.length;b<c;b++){var e=a[b];if(e&&e.getAttribute)void 0===e.player&&null!==e.getAttribute("data-setup")&&md(e);else{Ba(1);break}}else nd||Ba(1)}};l()&&"complete"===Y.readyState?nd=!0:oa(K,"load",function(){nd=!0});var Uc=function(a){var b=Y.createElement("style");b.className=a;return b},uc=function(a,b){a.styleSheet?a.styleSheet.cssText=b:a.textContent=b},ma=function(a,b,c){b.guid||(b.guid=
tb++);var e=function(){return b.apply(a,arguments)};e.guid=c?c+"_"+b.guid:b.guid;return e},vc=function(a,b){var c=Date.now();return function(){var e=Date.now();e-c>=b&&(a.apply(void 0,arguments),c=e)}},Wd=function(a,b,c){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:K,d=void 0;return function(){var f=this,g=arguments,h=function(){h=d=null;c||a.apply(f,g)};!d&&c&&a.apply(f,g);e.clearTimeout(d);d=e.setTimeout(h,b)}},Fa=function(){};Fa.prototype.allowedEvents_={};Fa.prototype.on=function(a,
b){var c=this.addEventListener;this.addEventListener=function(){};ja(this,a,b);this.addEventListener=c};Fa.prototype.addEventListener=Fa.prototype.on;Fa.prototype.off=function(a,b){ca(this,a,b)};Fa.prototype.removeEventListener=Fa.prototype.off;Fa.prototype.one=function(a,b){var c=this.addEventListener;this.addEventListener=function(){};oa(this,a,b);this.addEventListener=c};Fa.prototype.trigger=function(a){var b=a.type||a;"string"===typeof a&&(a={type:b});a=ba(a);if(this.allowedEvents_[b]&&this["on"+
b])this["on"+b](a);S(this,a)};Fa.prototype.dispatchEvent=Fa.prototype.trigger;var Vc=function(a){return a instanceof Fa||!!a.eventBusEl_&&["on","one","off","trigger"].every(function(b){return"function"===typeof a[b]})},Yb=function(a){return"string"===typeof a&&/\S/.test(a)||Array.isArray(a)&&!!a.length},Wc=function(a){if(!a.nodeName&&!Vc(a))throw Error("Invalid target; must be a DOM node or evented object.");},jf=function(a){if(!Yb(a))throw Error("Invalid event type; must be a non-empty string or array.");
},wc=function(a){if("function"!==typeof a)throw Error("Invalid listener; must be a function.");},Ae=function(a,b){var c=3>b.length||b[0]===a||b[0]===a.eventBusEl_;if(c){var e=a.eventBusEl_;3<=b.length&&b.shift();var d=b[0];b=b[1]}else e=b[0],d=b[1],b=b[2];Wc(e);jf(d);wc(b);b=ma(a,b);return{isTargetingSelf:c,target:e,type:d,listener:b}},xc=function(a,b,c,e){Wc(a);if(a.nodeName)Tc[b](a,c,e);else a[b](c,e)},Xd={on:function(){for(var a=this,b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];
b=Ae(this,c);c=b.isTargetingSelf;var d=b.target,f=b.type,g=b.listener;xc(d,"on",f,g);if(!c){var h=function(){return a.off(d,f,g)};h.guid=g.guid;b=function(){return a.off("dispose",h)};b.guid=g.guid;xc(this,"on","dispose",h);xc(d,"on","dispose",b)}},one:function(){for(var a=this,b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];b=Ae(this,c);var d=b.target,f=b.type,g=b.listener;b.isTargetingSelf?xc(d,"one",f,g):(b=function he(){for(var b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];
a.off(d,f,he);g.apply(null,c)},b.guid=g.guid,xc(d,"one",f,b))},off:function(a,b,c){!a||Yb(a)?ca(this.eventBusEl_,a,b):(Wc(a),jf(b),wc(c),c=ma(this,c),this.off("dispose",c),a.nodeName?(ca(a,b,c),ca(a,"dispose",c)):Vc(a)&&(a.off(b,c),a.off("dispose",c)))},trigger:function(a,b){return S(this.eventBusEl_,a,b)}},dg={state:{},setState:function(a){var b=this;"function"===typeof a&&(a=a());var c=void 0;h(a,function(a,e){b.state[e]!==a&&(c=c||{},c[e]={from:b.state[e],to:a});b.state[e]=a});c&&Vc(this)&&this.trigger({changes:c,
type:"statechanged"});return c}},O=function(){function a(b,c,e){T(this,a);this.player_=!b&&this.play?b=this:b;this.options_=wa({},this.options_);c=this.options_=wa(this.options_,c);this.id_=c.id||c.el&&c.el.id;this.id_||(this.id_=(b&&b.id&&b.id()||"no_player")+"_component_"+tb++);this.name_=c.name||null;c.el?this.el_=c.el:!1!==c.createEl&&(this.el_=this.createEl());!1!==c.evented&&La(this,{eventBusKey:this.el_?"el_":null});va(this,this.constructor.defaultState);this.children_=[];this.childIndex_=
{};this.childNameIndex_={};!1!==c.initChildren&&this.initChildren();this.ready(e);!1!==c.reportTouchActivity&&this.enableTouchActivity()}a.prototype.dispose=function(){this.trigger({type:"dispose",bubbles:!1});if(this.children_)for(var a=this.children_.length-1;0<=a;a--)this.children_[a].dispose&&this.children_[a].dispose();this.childNameIndex_=this.childIndex_=this.children_=null;this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),R(this.el_),this.el_=null);this.player_=null};
a.prototype.player=function(){return this.player_};a.prototype.options=function(a){qa.warn("this.options() has been deprecated and will be moved to the constructor in 6.0");return a?this.options_=wa(this.options_,a):this.options_};a.prototype.el=function(){return this.el_};a.prototype.createEl=function(a,b,c){return w(a,b,c)};a.prototype.localize=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a,e=this.player_.language&&this.player_.language(),d=this.player_.languages&&
this.player_.languages(),f=d&&d[e];e=e&&e.split("-")[0];d=d&&d[e];f&&f[a]?c=f[a]:d&&d[a]&&(c=d[a]);b&&(c=c.replace(/\{(\d+)\}/g,function(a,c){var e=c=b[c-1];"undefined"===typeof c&&(e=a);return e}));return c};a.prototype.contentEl=function(){return this.contentEl_||this.el_};a.prototype.id=function(){return this.id_};a.prototype.name=function(){return this.name_};a.prototype.children=function(){return this.children_};a.prototype.getChildById=function(a){return this.childIndex_[a]};a.prototype.getChild=
function(a){if(a)return a=ra(a),this.childNameIndex_[a]};a.prototype.addChild=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.children_.length,d=void 0;if("string"===typeof b){d=ra(b);var f=c.componentClass||d;c.name=d;var g=a.getComponent(f);if(!g)throw Error("Component "+f+" does not exist");if("function"!==typeof g)return null;c=new g(this.player_||this,c)}else c=b;this.children_.splice(e,0,c);"function"===
typeof c.id&&(this.childIndex_[c.id()]=c);(d=d||c.name&&ra(c.name()))&&(this.childNameIndex_[d]=c);"function"===typeof c.el&&c.el()&&(e=this.contentEl().children[e]||null,this.contentEl().insertBefore(c.el(),e));return c};a.prototype.removeChild=function(a){"string"===typeof a&&(a=this.getChild(a));if(a&&this.children_){for(var b=!1,c=this.children_.length-1;0<=c;c--)if(this.children_[c]===a){b=!0;this.children_.splice(c,1);break}b&&(this.childIndex_[a.id()]=null,this.childNameIndex_[a.name()]=null,
(b=a.el())&&b.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el()))}};a.prototype.initChildren=function(){var b=this,c=this.options_.children;if(c){var e=this.options_,d=void 0,f=a.getComponent("Tech");d=Array.isArray(c)?c:Object.keys(c);d.concat(Object.keys(this.options_).filter(function(a){return!d.some(function(b){return"string"===typeof b?a===b:a===b.name})})).map(function(a){if("string"===typeof a){var e=a;a=c[e]||b.options_[e]||{}}else e=a.name;return{name:e,opts:a}}).filter(function(b){return(b=
a.getComponent(b.opts.componentClass||ra(b.name)))&&!f.isTech(b)}).forEach(function(a){var c=a.name;a=a.opts;void 0!==e[c]&&(a=e[c]);!1!==a&&(!0===a&&(a={}),a.playerOptions=b.options_.playerOptions,(a=b.addChild(c,a))&&(b[c]=a))})}};a.prototype.buildCSSClass=function(){return""};a.prototype.ready=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;a&&(this.isReady_?b?a.call(this):this.setTimeout(a,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(a)))};a.prototype.triggerReady=
function(){this.isReady_=!0;this.setTimeout(function(){var a=this.readyQueue_;this.readyQueue_=[];a&&0<a.length&&a.forEach(function(a){a.call(this)},this);this.trigger("ready")},1)};a.prototype.$=function(a,b){return Fb(a,b||this.contentEl())};a.prototype.$$=function(a,b){return rb(a,b||this.contentEl())};a.prototype.hasClass=function(a){return t(this.el_,a)};a.prototype.addClass=function(a){q(this.el_,a)};a.prototype.removeClass=function(a){y(this.el_,a)};a.prototype.toggleClass=function(a,b){A(this.el_,
a,b)};a.prototype.show=function(){this.removeClass("vjs-hidden")};a.prototype.hide=function(){this.addClass("vjs-hidden")};a.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")};a.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")};a.prototype.getAttribute=function(a){return this.el_.getAttribute(a)};a.prototype.setAttribute=function(a,b){this.el_.setAttribute(a,b)};a.prototype.removeAttribute=function(a){this.el_.removeAttribute(a)};a.prototype.width=function(a,
b){return this.dimension("width",a,b)};a.prototype.height=function(a,b){return this.dimension("height",a,b)};a.prototype.dimensions=function(a,b){this.width(a,!0);this.height(b)};a.prototype.dimension=function(a,b,c){if(void 0!==b){if(null===b||b!==b)b=0;-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?this.el_.style[a]=b:this.el_.style[a]="auto"===b?"":b+"px";c||this.trigger("componentresize")}else{if(!this.el_)return 0;b=this.el_.style[a];c=b.indexOf("px");return-1!==c?parseInt(b.slice(0,c),
10):parseInt(this.el_["offset"+ra(a)],10)}};a.prototype.currentDimension=function(a){var b=0;if("width"!==a&&"height"!==a)throw Error("currentDimension only accepts width or height value");"function"===typeof K.getComputedStyle&&(b=K.getComputedStyle(this.el_),b=b.getPropertyValue(a)||b[a]);b=parseFloat(b);0===b&&(a="offset"+ra(a),b=this.el_[a]);return b};a.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};a.prototype.currentWidth=
function(){return this.currentDimension("width")};a.prototype.currentHeight=function(){return this.currentDimension("height")};a.prototype.focus=function(){this.el_.focus()};a.prototype.blur=function(){this.el_.blur()};a.prototype.emitTapEvents=function(){var a=0,b=null,c=void 0;this.on("touchstart",function(e){1===e.touches.length&&(b={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},a=(new Date).getTime(),c=!0)});this.on("touchmove",function(a){if(1<a.touches.length)c=!1;else if(b){var e=a.touches[0].pageX-
b.pageX;a=a.touches[0].pageY-b.pageY;10<Math.sqrt(e*e+a*a)&&(c=!1)}});var e=function(){c=!1};this.on("touchleave",e);this.on("touchcancel",e);this.on("touchend",function(e){b=null;!0===c&&200>(new Date).getTime()-a&&(e.preventDefault(),this.trigger("tap"))})};a.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var a=ma(this.player(),this.player().reportUserActivity),b=void 0;this.on("touchstart",function(){a();this.clearInterval(b);b=this.setInterval(a,250)});
var c=function(c){a();this.clearInterval(b)};this.on("touchmove",a);this.on("touchend",c);this.on("touchcancel",c)}};a.prototype.setTimeout=function(a,b){var c=this;a=ma(this,a);var e=K.setTimeout(a,b);a=function(){return c.clearTimeout(e)};a.guid="vjs-timeout-"+e;this.on("dispose",a);return e};a.prototype.clearTimeout=function(a){K.clearTimeout(a);var b=function(){};b.guid="vjs-timeout-"+a;this.off("dispose",b);return a};a.prototype.setInterval=function(a,b){var c=this;a=ma(this,a);var e=K.setInterval(a,
b);a=function(){return c.clearInterval(e)};a.guid="vjs-interval-"+e;this.on("dispose",a);return e};a.prototype.clearInterval=function(a){K.clearInterval(a);var b=function(){};b.guid="vjs-interval-"+a;this.off("dispose",b);return a};a.prototype.requestAnimationFrame=function(a){var b=this;if(this.supportsRaf_){a=ma(this,a);var c=K.requestAnimationFrame(a);a=function(){return b.cancelAnimationFrame(c)};a.guid="vjs-raf-"+c;this.on("dispose",a);return c}return this.setTimeout(a,1E3/60)};a.prototype.cancelAnimationFrame=
function(a){if(this.supportsRaf_){K.cancelAnimationFrame(a);var b=function(){};b.guid="vjs-raf-"+a;this.off("dispose",b);return a}return this.clearTimeout(a)};a.registerComponent=function(b,c){if("string"!==typeof b||!b)throw Error('Illegal component name, "'+b+'"; must be a non-empty string.');var e=a.getComponent("Tech");e=e&&e.isTech(c);var d=a===c||a.prototype.isPrototypeOf(c.prototype);if(e||!d)throw Error('Illegal component, "'+b+'"; '+(e?"techs must be registered using Tech.registerTech()":
"must be a Component subclass")+".");b=ra(b);a.components_||(a.components_={});e=a.getComponent("Player");if("Player"===b&&e&&e.players){var f=e.players;e=Object.keys(f);if(f&&0<e.length&&e.map(function(a){return f[a]}).every(Boolean))throw Error("Can not register Player component after player has been created.");}return a.components_[b]=c};a.getComponent=function(b){if(b&&(b=ra(b),a.components_&&a.components_[b]))return a.components_[b]};return a}();O.prototype.supportsRaf_="function"===typeof K.requestAnimationFrame&&
"function"===typeof K.cancelAnimationFrame;O.registerComponent("Component",O);var Za=K.navigator&&K.navigator.userAgent||"",lc=/AppleWebKit\/([\d.]+)/i.exec(Za),kf=lc?parseFloat(lc.pop()):null,vd=/iPad/i.test(Za),Be=/iPhone/i.test(Za)&&!vd,lf=/iPod/i.test(Za),mc=Be||vd||lf,mf=function(){var a=Za.match(/OS (\d+)_/i);return a&&a[1]?a[1]:null}(),Zb=/Android/i.test(Za),Mc=function(){var a=Za.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;var b=a[1]&&parseFloat(a[1]),c=a[2]&&parseFloat(a[2]);
return b&&c?parseFloat(a[1]+"."+a[2]):b?b:null}(),Ob=Zb&&5>Mc&&537>kf,Xc=/Firefox/i.test(Za),$b=/Edge/i.test(Za),Pb=!$b&&/Chrome/i.test(Za),qe=function(){var a=Za.match(/Chrome\/(\d+)/);return a&&a[1]?parseFloat(a[1]):null}(),wd=function(){var a=/MSIE\s(\d+)\.\d/.exec(Za);a=a&&parseFloat(a[1]);!a&&/Trident\/7.0/i.test(Za)&&/rv:11.0/.test(Za)&&(a=11);return a}(),Ce=/Safari/i.test(Za)&&!Pb&&!Zb&&!$b,De=Ce||mc,xd=l()&&("ontouchstart"in K||K.DocumentTouch&&K.document instanceof K.DocumentTouch),Yc=Object.freeze({IS_IPAD:vd,
IS_IPHONE:Be,IS_IPOD:lf,IS_IOS:mc,IOS_VERSION:mf,IS_ANDROID:Zb,ANDROID_VERSION:Mc,IS_NATIVE_ANDROID:Ob,IS_FIREFOX:Xc,IS_EDGE:$b,IS_CHROME:Pb,CHROME_VERSION:qe,IE_VERSION:wd,IS_SAFARI:Ce,IS_ANY_SAFARI:De,TOUCH_ENABLED:xd}),ub={},Zc=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],Yd=Zc[0],yc=void 0,$c=0;for(;$c<Zc.length;$c++)if(Zc[$c][1]in Y){yc=Zc[$c];break}if(yc)for(var Zd=0;Zd<yc.length;Zd++)ub[Yd[Zd]]=yc[Zd];Q.prototype.code=0;Q.prototype.message="";Q.prototype.status=null;Q.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");
Q.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var ya=0;ya<Q.errorTypes.length;ya++)Q[Q.errorTypes[ya]]=ya,Q.prototype[Q.errorTypes[ya]]=
ya;var Nd=function(a){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce(function(b,c,e){a[c]&&(b[c]=a[c]);return b},{cues:a.cues&&Array.prototype.map.call(a.cues,function(a){return{startTime:a.startTime,endTime:a.endTime,text:a.text,id:a.id}})})},je={textTracksToJson:function(a){var b=a.$$("track"),c=Array.prototype.map.call(b,function(a){return a.track});return Array.prototype.map.call(b,function(a){var b=Nd(a.track);a.src&&(b.src=a.src);return b}).concat(Array.prototype.filter.call(a.textTracks(),
function(a){return-1===c.indexOf(a)}).map(Nd))},jsonToTextTracks:function(a,b){a.forEach(function(a){var c=b.addRemoteTextTrack(a).track;!a.src&&a.cues&&a.cues.forEach(function(a){return c.addCue(a)})});return b.textTracks()},trackToJson_:Nd},yb=function(a){function b(c,e){T(this,b);c=V(this,a.call(this,c,e));c.opened_=c.hasBeenOpened_=c.hasBeenFilled_=!1;c.closeable(!c.options_.uncloseable);c.content(c.options_.content);c.contentEl_=w("div",{className:"vjs-modal-dialog-content"},{role:"document"});
c.descEl_=w("p",{className:"vjs-modal-dialog-description vjs-control-text",id:c.el().getAttribute("aria-describedby")});z(c.descEl_,c.description());c.el_.appendChild(c.descEl_);c.el_.appendChild(c.contentEl_);return c}W(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})};b.prototype.dispose=function(){this.previouslyActiveEl_=
this.descEl_=this.contentEl_=null;a.prototype.dispose.call(this)};b.prototype.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+a.prototype.buildCSSClass.call(this)};b.prototype.handleKeyPress=function(a){27===a.which&&this.closeable()&&this.close()};b.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")};b.prototype.description=function(){var a=this.options_.description||this.localize("This is a modal window.");this.closeable()&&(a+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button."));
return a};b.prototype.open=function(){if(!this.opened_){var a=this.player();this.trigger("beforemodalopen");this.opened_=!0;(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill();this.wasPlaying_=!a.paused();this.options_.pauseOnOpen&&this.wasPlaying_&&a.pause();if(this.closeable())this.on(this.el_.ownerDocument,"keydown",ma(this,this.handleKeyPress));this.hadControls_=a.controls();a.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden",
"false");this.trigger("modalopen");this.hasBeenOpened_=!0}};b.prototype.opened=function(a){if("boolean"===typeof a)this[a?"open":"close"]();return this.opened_};b.prototype.close=function(){if(this.opened_){var a=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&a.play();this.closeable()&&this.off(this.el_.ownerDocument,"keydown",ma(this,this.handleKeyPress));this.hadControls_&&a.controls(!0);this.hide();this.el().setAttribute("aria-hidden",
"true");this.trigger("modalclose");this.conditionalBlur_();this.options_.temporary&&this.dispose()}};b.prototype.closeable=function(a){if("boolean"===typeof a){a=this.closeable_=!!a;var b=this.getChild("closeButton");if(a&&!b){var c=this.contentEl_;this.contentEl_=this.el_;b=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=c;this.on(b,"close",this.close)}!a&&b&&(this.off(b,"close",this.close),this.removeChild(b),b.dispose())}return this.closeable_};b.prototype.fill=
function(){this.fillWith(this.content())};b.prototype.fillWith=function(a){var b=this.contentEl(),c=b.parentNode,e=b.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=!0;c.removeChild(b);this.empty();ka(b,a);this.trigger("modalfill");e?c.insertBefore(b,e):c.appendChild(b);(a=this.getChild("closeButton"))&&c.appendChild(a.el_)};b.prototype.empty=function(){this.trigger("beforemodalempty");D(this.contentEl());this.trigger("modalempty")};b.prototype.content=function(a){"undefined"!==typeof a&&
(this.content_=a);return this.content_};b.prototype.conditionalFocus_=function(){var a=Y.activeElement,b=this.player_.el_;this.previouslyActiveEl_=null;if(b.contains(a)||b===a)this.previouslyActiveEl_=a,this.focus(),this.on(Y,"keydown",this.handleKeyDown)};b.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null);this.off(Y,"keydown",this.handleKeyDown)};b.prototype.handleKeyDown=function(a){if(9===a.which){for(var b=this.focusableEls_(),
c=this.el_.querySelector(":focus"),e=void 0,d=0;d<b.length;d++)if(c===b[d]){e=d;break}Y.activeElement===this.el_&&(e=0);a.shiftKey&&0===e?(b[b.length-1].focus(),a.preventDefault()):a.shiftKey||e!==b.length-1||(b[0].focus(),a.preventDefault())}};b.prototype.focusableEls_=function(){var a=this.el_.querySelectorAll("*");return Array.prototype.filter.call(a,function(a){return(a instanceof K.HTMLAnchorElement||a instanceof K.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof K.HTMLInputElement||a instanceof
K.HTMLSelectElement||a instanceof K.HTMLTextAreaElement||a instanceof K.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof K.HTMLIFrameElement||a instanceof K.HTMLObjectElement||a instanceof K.HTMLEmbedElement||a.hasAttribute("tabindex")&&-1!==a.getAttribute("tabindex")||a.hasAttribute("contenteditable")})};return b}(O);yb.prototype.options_={pauseOnOpen:!0,temporary:!0};O.registerComponent("ModalDialog",yb);var Ic=function(a){function b(){var c=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:[];T(this,b);var e=V(this,a.call(this));e.tracks_=[];Object.defineProperty(e,"length",{get:function(){return this.tracks_.length}});for(var d=0;d<c.length;d++)e.addTrack(c[d]);return e}W(b,a);b.prototype.addTrack=function(a){var b=this.tracks_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.tracks_[b]}});-1===this.tracks_.indexOf(a)&&(this.tracks_.push(a),this.trigger({track:a,type:"addtrack"}))};b.prototype.removeTrack=function(a){for(var b=void 0,c=0,e=
this.length;c<e;c++)if(this[c]===a){b=this[c];b.off&&b.off();this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack"})};b.prototype.getTrackById=function(a){for(var b=null,c=0,e=this.length;c<e;c++){var d=this[c];if(d.id===a){b=d;break}}return b};return b}(Fa);Ic.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var Xe in Ic.prototype.allowedEvents_)Ic.prototype["on"+Xe]=null;var rc=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&
b.id!==a[c].id&&(a[c].enabled=!1)},le=function(a){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];T(this,b);for(var e=c.length-1;0<=e;e--)if(c[e].enabled){rc(c,c[e]);break}c=V(this,a.call(this,c));c.changing_=!1;return c}W(b,a);b.prototype.addTrack=function(b){var c=this;b.enabled&&rc(this,b);a.prototype.addTrack.call(this,b);b.addEventListener&&b.addEventListener("enabledchange",function(){c.changing_||(c.changing_=!0,rc(c,b),c.changing_=!1,c.trigger("change"))})};return b}(Ic),
Ye=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].selected=!1)},$g=function(a){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];T(this,b);for(var e=c.length-1;0<=e;e--)if(c[e].selected){Ye(c,c[e]);break}c=V(this,a.call(this,c));c.changing_=!1;Object.defineProperty(c,"selectedIndex",{get:function(){for(var a=0;a<this.length;a++)if(this[a].selected)return a;return-1},set:function(){}});return c}W(b,a);b.prototype.addTrack=function(b){var c=
this;b.selected&&Ye(this,b);a.prototype.addTrack.call(this,b);b.addEventListener&&b.addEventListener("selectedchange",function(){c.changing_||(c.changing_=!0,Ye(c,b),c.changing_=!1,c.trigger("change"))})};return b}(Ic),Ze=function(a){function b(){T(this,b);return V(this,a.apply(this,arguments))}W(b,a);b.prototype.addTrack=function(b){a.prototype.addTrack.call(this,b);b.addEventListener("modechange",ma(this,function(){this.trigger("change")}));-1===["metadata","chapters"].indexOf(b.kind)&&b.addEventListener("modechange",
ma(this,function(){this.trigger("selectedlanguagechange")}))};return b}(Ic),me=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];T(this,a);this.trackElements_=[];Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var c=0,e=b.length;c<e;c++)this.addTrackElement_(b[c])}a.prototype.addTrackElement_=function(a){var b=this.trackElements_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.trackElements_[b]}});
-1===this.trackElements_.indexOf(a)&&this.trackElements_.push(a)};a.prototype.getTrackElementByTrack_=function(a){for(var b=void 0,c=0,e=this.trackElements_.length;c<e;c++)if(a===this.trackElements_[c].track){b=this.trackElements_[c];break}return b};a.prototype.removeTrackElement_=function(a){for(var b=0,c=this.trackElements_.length;b<c;b++)if(a===this.trackElements_[b]){this.trackElements_.splice(b,1);break}};return a}(),ne=function(){function a(b){T(this,a);a.prototype.setCues_.call(this,b);Object.defineProperty(this,
"length",{get:function(){return this.length_}})}a.prototype.setCues_=function(a){var b=this.length||0,c=0,e=a.length;this.cues_=a;this.length_=a.length;a=function(a){""+a in this||Object.defineProperty(this,""+a,{get:function(){return this.cues_[a]}})};if(b<e)for(c=b;c<e;c++)a.call(this,c)};a.prototype.getCueById=function(a){for(var b=null,c=0,e=this.length;c<e;c++){var d=this[c];if(d.id===a){b=d;break}}return b};return a}(),ji={alternative:"alternative",captions:"captions",main:"main",sign:"sign",
subtitles:"subtitles",commentary:"commentary"},ah={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Xf={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Yf={disabled:"disabled",hidden:"hidden",showing:"showing"},bf=function(a){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};T(this,b);var e=V(this,a.call(this)),d={id:c.id||
"vjs_track_"+tb++,kind:c.kind||"",label:c.label||"",language:c.language||""};c=function(a){Object.defineProperty(e,a,{get:function(){return d[a]},set:function(){}})};for(var f in d)c(f);return e}W(b,a);return b}(Fa),cf=function(a){var b="protocol hostname port pathname search hash host".split(" "),c=Y.createElement("a");c.href=a;var e=""===c.host&&"file:"!==c.protocol,d=void 0;e&&(d=Y.createElement("div"),d.innerHTML='<a href="'+a+'"></a>',c=d.firstChild,d.setAttribute("style","display:none; position:absolute;"),
Y.body.appendChild(d));a={};for(var f=0;f<b.length;f++)a[b[f]]=c[b[f]];"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,""));"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,""));a.protocol||(a.protocol=K.location.protocol);e&&Y.body.removeChild(d);return a},mh=function(a){if(!a.match(/^https?:\/\//)){var b=Y.createElement("div");b.innerHTML='<a href="'+a+'">x</a>';a=b.firstChild.href}return a},Pc=function(a){return"string"===typeof a&&(a=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(a))?
a.pop().toLowerCase():""},Mb=function(a){var b=K.location;a=cf(a);return(":"===a.protocol?b.protocol:a.protocol)+a.host!==b.protocol+b.host},ti=Object.freeze({parseUrl:cf,getAbsoluteURL:mh,getFileExtension:Pc,isCrossOrigin:Mb}),$e=function(a){var b=te.call(a);return"[object Function]"===b||"function"===typeof a&&"[object RegExp]"!==b||"undefined"!==typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)},te=Object.prototype.toString,fh=Object.freeze({default:$e,
__moduleExports:$e}),Oc=k(function(a,b){b=a.exports=function(a){return a.replace(/^\s*|\s*$/g,"")};b.left=function(a){return a.replace(/^\s*/,"")};b.right=function(a){return a.replace(/\s*$/,"")}}),ue=Object.freeze({default:Oc,__moduleExports:Oc,left:Oc.left,right:Oc.right}),ef=fh&&$e||fh,Pd=function(a,b,c){if(!ef(b))throw new TypeError("iterator must be a function");3>arguments.length&&(c=this);if("[object Array]"===re.call(a))for(var e=c,d=0,f=a.length;d<f;d++)Od.call(a,d)&&b.call(e,a[d],d,a);else if("string"===
typeof a)for(e=c,d=0,f=a.length;d<f;d++)b.call(e,a.charAt(d),d,a);else for(d in e=c,a)Od.call(a,d)&&b.call(e,a[d],d,a)},re=Object.prototype.toString,Od=Object.prototype.hasOwnProperty,Wf=Object.freeze({default:Pd,__moduleExports:Pd}),se=ue&&Oc||ue,ui=Wf&&Pd||Wf,ag=function(a){if(!a)return{};var b={};ui(se(a).split("\n"),function(a){var c=a.indexOf(":"),e=se(a.slice(0,c)).toLowerCase();a=se(a.slice(c+1));"undefined"===typeof b[e]?b[e]=a:"[object Array]"===Object.prototype.toString.call(b[e])?b[e].push(a):
b[e]=[b[e],a]});return b},gh=Object.freeze({default:ag,__moduleExports:ag}),ff=function(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b],e;for(e in c)ve.call(c,e)&&(a[e]=c[e])}return a},ve=Object.prototype.hasOwnProperty,gf=Object.freeze({default:ff,__moduleExports:ff}),$f=gh&&ag||gh,nh=gf&&ff||gf;la.XMLHttpRequest=K.XMLHttpRequest||Ya;la.XDomainRequest="withCredentials"in new la.XMLHttpRequest?la.XMLHttpRequest:K.XDomainRequest;(function(a,b){for(var c=0;c<a.length;c++)b(a[c])})("get put post patch head delete".split(" "),
function(a){la["delete"===a?"del":a]=function(b,c,e){c=Ia(b,c,e);c.method=a.toUpperCase();return Oa(c)}});var hc=function(a,b){var c=new K.WebVTT.Parser(K,K.vttjs,K.WebVTT.StringDecoder()),e=[];c.oncue=function(a){b.addCue(a)};c.onparsingerror=function(a){e.push(a)};c.onflush=function(){b.trigger({type:"loadeddata",target:b})};c.parse(a);0<e.length&&(K.console&&K.console.groupCollapsed&&K.console.groupCollapsed("Text Track parsing errors for "+b.src),e.forEach(function(a){return qa.error(a)}),K.console&&
K.console.groupEnd&&K.console.groupEnd());c.flush()},oh=function(a,b){var c={uri:a};if(a=Mb(a))c.cors=a;la(c,ma(this,function(a,c,e){if(a)return qa.error(a,c);b.loaded_=!0;if("function"!==typeof K.WebVTT){if(b.tech_){var d=function(){return hc(e,b)};b.tech_.on("vttjsloaded",d);b.tech_.on("vttjserror",function(){qa.error("vttjs failed to load, stopping trying to process "+b.src);b.tech_.off("vttjsloaded",d)})}}else hc(e,b)}))},Xb=function(a){function b(){var c=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:{};T(this,b);if(!c.tech)throw Error("A tech was not provided.");c=wa(c,{kind:Xf[c.kind]||"subtitles",language:c.language||c.srclang||""});var e=Yf[c.mode]||"disabled",d=c.default;if("metadata"===c.kind||"chapters"===c.kind)e="hidden";var f=V(this,a.call(this,c));f.tech_=c.tech;f.cues_=[];f.activeCues_=[];var g=new ne(f.cues_),h=new ne(f.activeCues_),l=!1,k=ma(f,function(){this.activeCues;l&&(this.trigger("cuechange"),l=!1)});"disabled"!==e&&f.tech_.ready(function(){f.tech_.on("timeupdate",
k)},!0);Object.defineProperties(f,{default:{get:function(){return d},set:function(){}},mode:{get:function(){return e},set:function(a){var b=this;Yf[a]&&(e=a,"showing"===e&&this.tech_.ready(function(){b.tech_.on("timeupdate",k)},!0),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?g:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return h;for(var a=this.tech_.currentTime(),b=[],c=0,e=this.cues.length;c<e;c++){var d=this.cues[c];
d.startTime<=a&&d.endTime>=a?b.push(d):d.startTime===d.endTime&&d.startTime<=a&&d.startTime+.5>=a&&b.push(d)}l=!1;if(b.length!==this.activeCues_.length)l=!0;else for(a=0;a<b.length;a++)-1===this.activeCues_.indexOf(b[a])&&(l=!0);this.activeCues_=b;h.setCues_(this.activeCues_);return h},set:function(){}}});c.src?(f.src=c.src,oh(c.src,f)):f.loaded_=!0;return f}W(b,a);b.prototype.addCue=function(a){var b=a;if(K.vttjs&&!(a instanceof K.vttjs.VTTCue)){b=new K.vttjs.VTTCue(a.startTime,a.endTime,a.text);
for(var c in a)c in b||(b[c]=a[c]);b.id=a.id;b.originalCue_=a}a=this.tech_.textTracks();for(c=0;c<a.length;c++)a[c]!==this&&a[c].removeCue(b);this.cues_.push(b);this.cues.setCues_(this.cues_)};b.prototype.removeCue=function(a){for(var b=this.cues_.length;b--;){var c=this.cues_[b];if(c===a||c.originalCue_&&c.originalCue_===a){this.cues_.splice(b,1);this.cues.setCues_(this.cues_);break}}};return b}(bf);Xb.prototype.allowedEvents_={cuechange:"cuechange"};var we=function(a){function b(){var c=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{};T(this,b);c=wa(c,{kind:ah[c.kind]||""});var e=V(this,a.call(this,c)),d=!1;Object.defineProperty(e,"enabled",{get:function(){return d},set:function(a){"boolean"===typeof a&&a!==d&&(d=a,this.trigger("enabledchange"))}});c.enabled&&(e.enabled=c.enabled);e.loaded_=!0;return e}W(b,a);return b}(bf),kh=function(a){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};T(this,b);c=wa(c,{kind:ji[c.kind]||""});var e=V(this,a.call(this,c)),d=!1;Object.defineProperty(e,
"selected",{get:function(){return d},set:function(a){"boolean"===typeof a&&a!==d&&(d=a,this.trigger("selectedchange"))}});c.selected&&(e.selected=c.selected);return e}W(b,a);return b}(bf),rd=function(a){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};T(this,b);var e=V(this,a.call(this)),d=void 0,f=new Xb(c);e.kind=f.kind;e.src=f.src;e.srclang=f.language;e.label=f.label;e.default=f.default;Object.defineProperties(e,{readyState:{get:function(){return d}},track:{get:function(){return f}}});
d=0;f.addEventListener("loadeddata",function(){d=2;e.trigger({type:"load",target:e})});return e}W(b,a);return b}(Fa);rd.prototype.allowedEvents_={load:"load"};rd.NONE=0;rd.LOADING=1;rd.LOADED=2;rd.ERROR=3;var Bb={audio:{ListClass:le,TrackClass:we,capitalName:"Audio"},video:{ListClass:$g,TrackClass:kh,capitalName:"Video"},text:{ListClass:Ze,TrackClass:Xb,capitalName:"Text"}};Object.keys(Bb).forEach(function(a){Bb[a].getterName=a+"Tracks";Bb[a].privateName=a+"Tracks_"});var xe={remoteText:{ListClass:Ze,
TrackClass:Xb,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:me,TrackClass:rd,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Cb=wa(Bb,xe);xe.names=Object.keys(xe);Bb.names=Object.keys(Bb);Cb.names=[].concat(xe.names).concat(Bb.names);var Uf=Object.create||function(){function a(){}return function(b){if(1!==arguments.length)throw Error("Object.create shim only accepts one parameter.");
a.prototype=b;return new a}}();P.prototype=Uf(Error.prototype);P.prototype.constructor=P;P.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};pa.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var e=0;e<c.length;++e)if(b===c[e]){this.set(a,b);break}},
integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))},percent:function(a,b){return b.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(b=parseFloat(b),0<=b&&100>=b)?(this.set(a,b),!0):!1}};var vi={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":"\u00a0"},wi={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},xi={v:"title",lang:"lang"},ph={rt:"ruby"},Sf=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,
1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],
[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,
126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];sd.prototype.applyStyles=function(a,b){b=b||this.div;for(var c in a)a.hasOwnProperty(c)&&(b.style[c]=a[c])};sd.prototype.formatStyle=function(a,
b){return 0===a?0:a+b};Qc.prototype=Uf(sd.prototype);Qc.prototype.constructor=Qc;Qa.prototype.move=function(a,b){b=void 0!==b?b:this.lineHeight;switch(a){case "+x":this.left+=b;this.right+=b;break;case "-x":this.left-=b;this.right-=b;break;case "+y":this.top+=b;this.bottom+=b;break;case "-y":this.top-=b,this.bottom-=b}};Qa.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top};Qa.prototype.overlapsAny=function(a){for(var b=0;b<a.length;b++)if(this.overlaps(a[b]))return!0;
return!1};Qa.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right};Qa.prototype.overlapsOppositeAxis=function(a,b){switch(b){case "+x":return this.left<a.left;case "-x":return this.right>a.right;case "+y":return this.top<a.top;case "-y":return this.bottom>a.bottom}};Qa.prototype.intersectPercentage=function(a){return Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left))*Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,
a.top))/(this.height*this.width)};Qa.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}};Qa.getSimpleBoxPosition=function(a){var b=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,c=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,e=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a;return{left:a.left,
right:a.right,top:a.top||e,height:a.height||b,bottom:a.bottom||e+(a.height||b),width:a.width||c}};Jb.StringDecoder=function(){return{decode:function(a){if(!a)return"";if("string"!==typeof a)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}};Jb.convertCueToDOMTree=function(a,b){return a&&b?qd(a,b):null};Jb.processCues=function(a,b,c){if(!a||!b||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var e=a.document.createElement("div");e.style.position=
"absolute";e.style.left="0";e.style.right="0";e.style.top="0";e.style.bottom="0";e.style.margin="1.5%";c.appendChild(e);if(function(a){for(var b=0;b<a.length;b++)if(a[b].hasBeenReset||!a[b].displayState)return!0;return!1}(b)){var d=[],f=Qa.getSimpleBoxPosition(e),g={font:Math.round(5*f.height)/100+"px sans-serif"};(function(){for(var c,h,l=0;l<b.length;l++){h=b[l];c=new Qc(a,h,g);e.appendChild(c.div);var k=void 0,m=void 0,n=c,fc=f,q=d,jb=new Qa(n),ta=n.cue;if("number"===typeof ta.line&&(ta.snapToLines||
0<=ta.line&&100>=ta.line))var p=ta.line;else if(ta.track&&ta.track.textTrackList&&ta.track.textTrackList.mediaElement){p=ta.track;for(var t=p.textTrackList,r=0,v=0;v<t.length&&t[v]!==p;v++)"showing"===t[v].mode&&r++;p=-1*++r}else p=-1;t=[];if(ta.snapToLines){switch(ta.vertical){case "":t=["+y","-y"];m="height";break;case "rl":t=["+x","-x"];m="width";break;case "lr":t=["-x","+x"],m="width"}r=jb.lineHeight;v=r*Math.round(p);m=fc[m]+r;var Sa=t[0];Math.abs(v)>m&&(v=(0>v?-1:1)*Math.ceil(m/r)*r);0>p&&(v+=
""===ta.vertical?fc.height:fc.width,t=t.reverse());jb.move(Sa,v)}else{jb=jb.lineHeight/fc.height*100;switch(ta.lineAlign){case "middle":p-=jb/2;break;case "end":p-=jb}switch(ta.vertical){case "":n.applyStyles({top:n.formatStyle(p,"%")});break;case "rl":n.applyStyles({left:n.formatStyle(p,"%")});break;case "lr":n.applyStyles({right:n.formatStyle(p,"%")})}t=["+y","-x","+x","-y"];jb=new Qa(n)}a:{ta=jb;jb=t;m=new Qa(ta);p=1;for(t=0;t<jb.length;t++){for(;ta.overlapsOppositeAxis(fc,jb[t])||ta.within(fc)&&
ta.overlapsAny(q);)ta.move(jb[t]);if(ta.within(fc)){k=ta;break a}r=ta.intersectPercentage(fc);p>r&&(k=new Qa(ta),p=r);ta=new Qa(m)}k=k||m}n.move(k.toCSSCompatValues(fc));h.displayState=c.div;d.push(Qa.getSimpleBoxPosition(c))}})()}else for(c=0;c<b.length;c++)e.appendChild(b[c].displayState)};Jb.Parser=function(a,b,c){c||(c=b,b={});b||(b={});this.window=a;this.vttjs=b;this.state="INITIAL";this.buffer="";this.decoder=c||new TextDecoder("utf8");this.regionList=[]};Jb.Parser.prototype={reportOrThrowError:function(a){if(a instanceof
P)this.onparsingerror&&this.onparsingerror(a);else throw a;},parse:function(a){function b(){for(var a=f.buffer,b=0;b<a.length&&"\r"!==a[b]&&"\n"!==a[b];)++b;var c=a.substr(0,b);"\r"===a[b]&&++b;"\n"===a[b]&&++b;f.buffer=a.substr(b);return c}function c(a){var b=new pa;zb(a,function(a,c){switch(a){case "id":b.set(a,c);break;case "width":b.percent(a,c);break;case "lines":b.integer(a,c);break;case "regionanchor":case "viewportanchor":c=c.split(",");if(2!==c.length)break;var e=new pa;e.percent("x",c[0]);
e.percent("y",c[1]);if(!e.has("x")||!e.has("y"))break;b.set(a+"X",e.get("x"));b.set(a+"Y",e.get("y"));break;case "scroll":b.alt(a,c,["up"])}},/=/,/\s/);b.has("id")&&(a=new (f.vttjs.VTTRegion||f.window.VTTRegion),a.width=b.get("width",100),a.lines=b.get("lines",3),a.regionAnchorX=b.get("regionanchorX",0),a.regionAnchorY=b.get("regionanchorY",100),a.viewportAnchorX=b.get("viewportanchorX",0),a.viewportAnchorY=b.get("viewportanchorY",100),a.scroll=b.get("scroll",""),f.onregion&&f.onregion(a),f.regionList.push({id:b.get("id"),
region:a}))}function e(a){var b=new pa;zb(a,function(a,c){switch(a){case "MPEGT":b.integer(a+"S",c);break;case "LOCA":b.set(a+"L",u(c))}},/[^\d]:/,/,/);f.ontimestampmap&&f.ontimestampmap({MPEGTS:b.get("MPEGTS"),LOCAL:b.get("LOCAL")})}function d(a){a.match(/X-TIMESTAMP-MAP/)?zb(a,function(a,b){switch(a){case "X-TIMESTAMP-MAP":e(b)}},/=/):zb(a,function(a,b){switch(a){case "Region":c(b)}},/:/)}var f=this;a&&(f.buffer+=f.decoder.decode(a,{stream:!0}));try{if("INITIAL"===f.state){if(!/\r\n|\n/.test(f.buffer))return this;
var g=b();var h=g.match(/^WEBVTT([ \t].*)?$/);if(!h||!h[0])throw new P(P.Errors.BadSignature);f.state="HEADER"}for(a=!1;f.buffer;){if(!/\r\n|\n/.test(f.buffer))return this;a?a=!1:g=b();switch(f.state){case "HEADER":/:/.test(g)?d(g):g||(f.state="ID");continue;case "NOTE":g||(f.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(g)){f.state="NOTE";break}if(!g)continue;f.cue=new (f.vttjs.VTTCue||f.window.VTTCue)(0,0,"");f.state="CUE";if(-1===g.indexOf("--\x3e")){f.cue.id=g;continue}case "CUE":try{Pa(g,
f.cue,f.regionList)}catch(Md){f.reportOrThrowError(Md);f.cue=null;f.state="BADCUE";continue}f.state="CUETEXT";continue;case "CUETEXT":var l=-1!==g.indexOf("--\x3e");if(!g||l&&(a=!0)){f.oncue&&f.oncue(f.cue);f.cue=null;f.state="ID";continue}f.cue.text&&(f.cue.text+="\n");f.cue.text+=g;continue;case "BADCUE":g||(f.state="ID")}}}catch(Md){f.reportOrThrowError(Md);if("CUETEXT"===f.state&&f.cue&&f.oncue)f.oncue(f.cue);f.cue=null;f.state="INITIAL"===f.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{this.buffer+=
this.decoder.decode();if(this.cue||"HEADER"===this.state)this.buffer+="\n\n",this.parse();if("INITIAL"===this.state)throw new P(P.Errors.BadSignature);}catch(ej){this.reportOrThrowError(ej)}this.onflush&&this.onflush();return this}};var Vf=Object.freeze({default:Jb,__moduleExports:Jb}),hh={"":1,lr:1,rl:1},qh={start:1,middle:1,end:1,left:1,right:1};Ka.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var rh=Object.freeze({default:Ka,__moduleExports:Ka}),yi={"":!0,
up:!0},Tf=function(){var a=100,b=3,c=0,e=100,d=0,f=100,g="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(b){if(!tc(b))throw Error("Width must be between 0 and 100.");a=b}},lines:{enumerable:!0,get:function(){return b},set:function(a){if("number"!==typeof a)throw new TypeError("Lines must be set to a number.");b=a}},regionAnchorY:{enumerable:!0,get:function(){return e},set:function(a){if(!tc(a))throw Error("RegionAnchorX must be between 0 and 100.");e=a}},
regionAnchorX:{enumerable:!0,get:function(){return c},set:function(a){if(!tc(a))throw Error("RegionAnchorY must be between 0 and 100.");c=a}},viewportAnchorY:{enumerable:!0,get:function(){return f},set:function(a){if(!tc(a))throw Error("ViewportAnchorY must be between 0 and 100.");f=a}},viewportAnchorX:{enumerable:!0,get:function(){return d},set:function(a){if(!tc(a))throw Error("ViewportAnchorX must be between 0 and 100.");d=a}},scroll:{enumerable:!0,get:function(){return g},set:function(a){a="string"!==
typeof a?!1:yi[a.toLowerCase()]?a.toLowerCase():!1;if(!1===a)throw new SyntaxError("An invalid or illegal string was specified.");g=a}}})},bg=Object.freeze({default:Tf,__moduleExports:Tf}),ni=Vf&&Jb||Vf,zi=rh&&Ka||rh,oi=bg&&Tf||bg,ih=k(function(a){a=a.exports={WebVTT:ni,VTTCue:zi,VTTRegion:oi};K.vttjs=a;K.WebVTT=a.WebVTT;var b=a.VTTCue,c=a.VTTRegion,e=K.VTTCue,d=K.VTTRegion;a.shim=function(){K.VTTCue=b;K.VTTRegion=c};a.restore=function(){K.VTTCue=e;K.VTTRegion=d};K.VTTCue||a.shim()}),Ja=function(a){function b(){var c=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};T(this,b);c.reportTouchActivity=!1;var d=V(this,a.call(this,null,c,e));d.hasStarted_=!1;d.on("playing",function(){this.hasStarted_=!0});d.on("loadstart",function(){this.hasStarted_=!1});Cb.names.forEach(function(a){a=Cb[a];c&&c[a.getterName]&&(d[a.privateName]=c[a.getterName])});d.featuresProgressEvents||d.manualProgressOn();d.featuresTimeupdateEvents||d.manualTimeUpdatesOn();
["Text","Audio","Video"].forEach(function(a){!1===c["native"+a+"Tracks"]&&(d["featuresNative"+a+"Tracks"]=!1)});if(!1===c.nativeCaptions||!1===c.nativeTextTracks)d.featuresNativeTextTracks=!1;else if(!0===c.nativeCaptions||!0===c.nativeTextTracks)d.featuresNativeTextTracks=!0;d.featuresNativeTextTracks||d.emulateTextTracks();d.autoRemoteTextTracks_=new Cb.text.ListClass;d.initTrackListeners();c.nativeControlsForTouch||d.emitTapEvents();d.constructor&&(d.name_=d.constructor.name||"Unknown Tech");return d}
W(b,a);b.prototype.triggerSourceset=function(a){var b=this;if(!this.isReady_)this.one("ready",function(){return b.setTimeout(function(){return b.triggerSourceset(a)},1)});this.trigger({src:a,type:"sourceset"})};b.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange);this.manualProgress=!0;this.one("ready",this.trackProgress)};b.prototype.manualProgressOff=function(){this.manualProgress=!1;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};
b.prototype.trackProgress=function(a){this.stopTrackingProgress();this.progressInterval=this.setInterval(ma(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress");this.bufferedPercent_=a;1===a&&this.stopTrackingProgress()}),500)};b.prototype.onDurationChange=function(a){this.duration_=this.duration()};b.prototype.buffered=function(){return xa(0,0)};b.prototype.bufferedPercent=function(){return na(this.buffered(),this.duration_)};b.prototype.stopTrackingProgress=
function(){this.clearInterval(this.progressInterval)};b.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};b.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};b.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=
this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)};b.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};b.prototype.dispose=function(){this.clearTracks(Bb.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();a.prototype.dispose.call(this)};b.prototype.clearTracks=function(a){var b=this;a=[].concat(a);
a.forEach(function(a){for(var c=b[a+"Tracks"]()||[],e=c.length;e--;){var d=c[e];"text"===a&&b.removeRemoteTextTrack(d);c.removeTrack(d)}})};b.prototype.cleanupAutoTextTracks=function(){for(var a=this.autoRemoteTextTracks_||[],b=a.length;b--;)this.removeRemoteTextTrack(a[b])};b.prototype.reset=function(){};b.prototype.error=function(a){void 0!==a&&(this.error_=new Q(a),this.trigger("error"));return this.error_};b.prototype.played=function(){return this.hasStarted_?xa(0,0):xa()};b.prototype.setCurrentTime=
function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};b.prototype.initTrackListeners=function(){var a=this;Bb.names.forEach(function(b){var c=function(){a.trigger(b+"trackchange")},e=a[Bb[b].getterName]();e.addEventListener("removetrack",c);e.addEventListener("addtrack",c);a.on("dispose",function(){e.removeEventListener("removetrack",c);e.removeEventListener("addtrack",c)})})};b.prototype.addWebVttScript_=function(){var a=this;if(!K.WebVTT)if(Y.body.contains(this.el()))if(!this.options_["vtt.js"]&&
f(ih)&&0<Object.keys(ih).length)this.trigger("vttjsloaded");else{var b=Y.createElement("script");b.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";b.onload=function(){a.trigger("vttjsloaded")};b.onerror=function(){a.trigger("vttjserror")};this.on("dispose",function(){b.onload=null;b.onerror=null});K.WebVTT=!0;this.el().parentNode.appendChild(b)}else this.ready(this.addWebVttScript_)};b.prototype.emulateTextTracks=function(){var a=this,b=this.textTracks(),c=this.remoteTextTracks(),
e=function(a){return b.addTrack(a.track)},d=function(a){return b.removeTrack(a.track)};c.on("addtrack",e);c.on("removetrack",d);this.addWebVttScript_();var f=function(){return a.trigger("texttrackchange")},g=function(){f();for(var a=0;a<b.length;a++){var c=b[a];c.removeEventListener("cuechange",f);"showing"===c.mode&&c.addEventListener("cuechange",f)}};g();b.addEventListener("change",g);b.addEventListener("addtrack",g);b.addEventListener("removetrack",g);this.on("dispose",function(){c.off("addtrack",
e);c.off("removetrack",d);b.removeEventListener("change",g);b.removeEventListener("addtrack",g);b.removeEventListener("removetrack",g);for(var a=0;a<b.length;a++)b[a].removeEventListener("cuechange",f)})};b.prototype.addTextTrack=function(a,b,c){if(!a)throw Error("TextTrack kind is required but was not provided");return Rd(this,a,b,c)};b.prototype.createRemoteTextTrack=function(a){a=wa(a,{tech:this});return new xe.remoteTextEl.TrackClass(a)};b.prototype.addRemoteTextTrack=function(){var a=this,b=
arguments[1],c=this.createRemoteTextTrack(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});!0!==b&&!1!==b&&(qa.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),b=!0);this.remoteTextTrackEls().addTrackElement_(c);this.remoteTextTracks().addTrack(c.track);!0!==b&&this.ready(function(){return a.autoRemoteTextTracks_.addTrack(c.track)});return c};b.prototype.removeRemoteTextTrack=
function(a){var b=this.remoteTextTrackEls().getTrackElementByTrack_(a);this.remoteTextTrackEls().removeTrackElement_(b);this.remoteTextTracks().removeTrack(a);this.autoRemoteTextTracks_.removeTrack(a)};b.prototype.getVideoPlaybackQuality=function(){return{}};b.prototype.setPoster=function(){};b.prototype.playsinline=function(){};b.prototype.setPlaysinline=function(){};b.prototype.overrideNativeAudioTracks=function(){};b.prototype.overrideNativeVideoTracks=function(){};b.prototype.canPlayType=function(){return""};
b.canPlayType=function(){return""};b.canPlaySource=function(a,c){return b.canPlayType(a.type)};b.isTech=function(a){return a.prototype instanceof b||a instanceof b||a===b};b.registerTech=function(a,c){b.techs_||(b.techs_={});if(!b.isTech(c))throw Error("Tech "+a+" must be a Tech");if(!b.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!b.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");a=ra(a);b.techs_[a]=c;"Tech"!==a&&b.defaultTechOrder_.push(a);
return c};b.getTech=function(a){if(a){a=ra(a);if(b.techs_&&b.techs_[a])return b.techs_[a];if(K&&K.videojs&&K.videojs[a])return qa.warn("The "+a+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),K.videojs[a]}};return b}(O);Cb.names.forEach(function(a){var b=Cb[a];Ja.prototype[b.getterName]=function(){this[b.privateName]=this[b.privateName]||new b.ListClass;return this[b.privateName]}});Ja.prototype.featuresVolumeControl=!0;Ja.prototype.featuresFullscreenResize=
!1;Ja.prototype.featuresPlaybackRate=!1;Ja.prototype.featuresProgressEvents=!1;Ja.prototype.featuresSourceset=!1;Ja.prototype.featuresTimeupdateEvents=!1;Ja.prototype.featuresNativeTextTracks=!1;Ja.withSourceHandlers=function(a){a.registerSourceHandler=function(b,c){var e=a.sourceHandlers;e||(e=a.sourceHandlers=[]);void 0===c&&(c=e.length);e.splice(c,0,b)};a.canPlayType=function(b){for(var c=a.sourceHandlers||[],e,d=0;d<c.length;d++)if(e=c[d].canPlayType(b))return e;return""};a.selectSourceHandler=
function(b,c){for(var e=a.sourceHandlers||[],d,f=0;f<e.length;f++)if(d=e[f].canHandleSource(b,c))return e[f];return null};a.canPlaySource=function(b,c){var e=a.selectSourceHandler(b,c);return e?e.canHandleSource(b,c):""};["seekable","seeking","duration"].forEach(function(a){var b=this[a];"function"===typeof b&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):b.apply(this,arguments)})},a.prototype);a.prototype.setSource=
function(b){var c=a.selectSourceHandler(b,this.options_);c||(a.nativeSourceHandler?c=a.nativeSourceHandler:qa.error("No source handler found for the current source."));this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);c!==a.nativeSourceHandler&&(this.currentSource_=b);this.sourceHandler_=c.handleSource(b,this,this.options_);this.on("dispose",this.disposeSourceHandler)};a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=
null);this.cleanupAutoTextTracks();this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};O.registerComponent("Tech",Ja);Ja.registerTech("Tech",Ja);Ja.defaultTechOrder_=[];var Wb={},Nc={},Ab={},bh={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},ch={setCurrentTime:1},dh={play:1,pause:1},ki={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",
oga:"audio/ogg",m3u8:"application/x-mpegURL"},eh=function(){var a=Pc(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"");return ki[a.toLowerCase()]||""},li=function(a,b){if(!b)return"";if(a.cache_.source.src===b&&a.cache_.source.type)return a.cache_.source.type;var c=a.cache_.sources.filter(function(a){return a.src===b});if(c.length)return c[0].type;a=a.$$("source");for(c=0;c<a.length;c++){var e=a[c];if(e.type&&e.src&&e.src===b)return e.type}return eh(b)},mi=function Si(b){if(Array.isArray(b)){var c=
[];b.forEach(function(b){b=Si(b);Array.isArray(b)?c=c.concat(b):a(b)&&c.push(b)});b=c}else b="string"===typeof b&&b.trim()?[Sd({src:b})]:a(b)&&"string"===typeof b.src&&b.src&&b.src.trim()?[Sd(b)]:[];return b},Rf=function(a){function b(c,e,d){T(this,b);var f=wa({createEl:!1},e);d=V(this,a.call(this,c,f,d));if(e.playerOptions.sources&&0!==e.playerOptions.sources.length)c.src(e.playerOptions.sources);else for(f=0,e=e.playerOptions.techOrder;f<e.length;f++){var g=ra(e[f]),h=Ja.getTech(g);g||(h=O.getComponent(g));
if(h&&h.isSupported()){c.loadTech_(g);break}}return d}W(b,a);return b}(O);O.registerComponent("MediaLoader",Rf);var Qd=function(a){function b(c,e){T(this,b);c=V(this,a.call(this,c,e));c.emitTapEvents();c.enable();return c}W(b,a);b.prototype.createEl=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};c=g({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',
className:this.buildCSSClass(),tabIndex:0},c);"button"===b&&qa.error("Creating a ClickableComponent with an HTML element of "+b+" is not supported; use a Button instead.");e=g({role:"button"},e);this.tabIndex_=c.tabIndex;b=a.prototype.createEl.call(this,b,c,e);this.createControlTextEl(b);return b};b.prototype.dispose=function(){this.controlTextEl_=null;a.prototype.dispose.call(this)};b.prototype.createControlTextEl=function(a){this.controlTextEl_=w("span",{className:"vjs-control-text"},{"aria-live":"polite"});
a&&a.appendChild(this.controlTextEl_);this.controlText(this.controlText_,a);return this.controlTextEl_};b.prototype.controlText=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===a)return this.controlText_||"Need Text";var c=this.localize(a);this.controlText_=a;z(this.controlTextEl_,c);this.nonIconControl||b.setAttribute("title",c)};b.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)};b.prototype.enable=
function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))};b.prototype.disable=function(){this.enabled_=!1;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex");
this.off(["tap","click"],this.handleClick);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur)};b.prototype.handleClick=function(a){};b.prototype.handleFocus=function(a){ja(Y,"keydown",ma(this,this.handleKeyPress))};b.prototype.handleKeyPress=function(b){32===b.which||13===b.which?(b.preventDefault(),this.trigger("click")):a.prototype.handleKeyPress&&a.prototype.handleKeyPress.call(this,b)};b.prototype.handleBlur=function(a){ca(Y,"keydown",ma(this,this.handleKeyPress))};return b}(O);
O.registerComponent("ClickableComponent",Qd);var jh=function(a){function b(c,e){T(this,b);e=V(this,a.call(this,c,e));e.update();c.on("posterchange",ma(e,e.update));return e}W(b,a);b.prototype.dispose=function(){this.player().off("posterchange",this.update);a.prototype.dispose.call(this)};b.prototype.createEl=function(){return w("div",{className:"vjs-poster",tabIndex:-1})};b.prototype.update=function(a){a=this.player().poster();this.setSrc(a);a?this.show():this.hide()};b.prototype.setSrc=function(a){var b=
"";a&&(b='url("'+a+'")');this.el_.style.backgroundImage=b};b.prototype.handleClick=function(a){this.player_.controls()&&(this.player_.paused()?za(this.player_.play()):this.player_.pause())};return b}(Qd);O.registerComponent("PosterImage",jh);var pi={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',
script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},qi=function(a){function b(c,e,d){T(this,b);e=V(this,a.call(this,c,e,d));c.on("loadstart",ma(e,e.toggleDisplay));c.on("texttrackchange",ma(e,e.updateDisplay));c.on("loadstart",ma(e,e.preselectTrack));c.ready(ma(e,function(){if(c.tech_&&c.tech_.featuresNativeTextTracks)this.hide();else{c.on("fullscreenchange",ma(this,this.updateDisplay));for(var a=this.options_.playerOptions.tracks||[],b=0;b<a.length;b++)this.player_.addRemoteTextTrack(a[b],
!0);this.preselectTrack()}}));return e}W(b,a);b.prototype.preselectTrack=function(){for(var a={captions:1,subtitles:1},b=this.player_.textTracks(),c=this.player_.cache_.selectedLanguage,e=void 0,d=void 0,f=void 0,g=0;g<b.length;g++){var h=b[g];c&&c.enabled&&c.language===h.language?h.kind===c.kind?f=h:f||(f=h):c&&!c.enabled?d=e=f=null:h.default&&("descriptions"!==h.kind||e?h.kind in a&&!d&&(d=h):e=h)}f?f.mode="showing":d?d.mode="showing":e&&(e.mode="showing")};b.prototype.toggleDisplay=function(){this.player_.tech_&&
this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()};b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};b.prototype.clearDisplay=function(){"function"===typeof K.WebVTT&&K.WebVTT.processCues(K,[],this.el_)};b.prototype.updateDisplay=function(){var a=this.player_.textTracks();this.clearDisplay();for(var b=null,c=null,e=a.length;e--;){var d=a[e];"showing"===d.mode&&("descriptions"===
d.kind?b=d:c=d)}c?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):b&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(b))};b.prototype.updateForTrack=function(a){if("function"===typeof K.WebVTT&&a.activeCues){for(var b=[],c=0;c<a.activeCues.length;c++)b.push(a.activeCues[c]);K.WebVTT.processCues(K,b,this.el_);if(this.player_.textTrackSettings)for(a=this.player_.textTrackSettings.getValues(),
c=b.length;c--;){var e=b[c];if(e){e=e.displayState;a.color&&(e.firstChild.style.color=a.color);if(a.textOpacity){var d=kb(a.color||"#fff",a.textOpacity);try{e.firstChild.style.color=d}catch(he){}}a.backgroundColor&&(e.firstChild.style.backgroundColor=a.backgroundColor);if(a.backgroundOpacity){d=kb(a.backgroundColor||"#000",a.backgroundOpacity);try{e.firstChild.style.backgroundColor=d}catch(he){}}if(a.windowColor)if(a.windowOpacity){d=kb(a.windowColor,a.windowOpacity);try{e.style.backgroundColor=d}catch(he){}}else e.style.backgroundColor=
a.windowColor;a.edgeStyle&&("dropshadow"===a.edgeStyle?e.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===a.edgeStyle?e.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===a.edgeStyle?e.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===a.edgeStyle&&(e.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));a.fontPercent&&1!==a.fontPercent&&(d=K.parseFloat(e.style.fontSize),
e.style.fontSize=d*a.fontPercent+"px",e.style.height="auto",e.style.top="auto",e.style.bottom="2px");a.fontFamily&&"default"!==a.fontFamily&&("small-caps"===a.fontFamily?e.firstChild.style.fontVariant="small-caps":e.firstChild.style.fontFamily=pi[a.fontFamily])}}}};return b}(O);O.registerComponent("TextTrackDisplay",qi);var ri=function(a){function b(){T(this,b);return V(this,a.apply(this,arguments))}W(b,a);b.prototype.createEl=function(){var b=this.player_.isAudio();b=this.localize(b?"Audio Player":
"Video Player");b=w("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[b])});var c=a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});c.appendChild(b);return c};return b}(O);O.registerComponent("LoadingSpinner",ri);var ic=function(a){function b(){T(this,b);return V(this,a.apply(this,arguments))}W(b,a);b.prototype.createEl=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=2<arguments.length&&void 0!==arguments[2]?
arguments[2]:{};a="button";b=g({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},b);c=g({type:"button"},c);b=O.prototype.createEl.call(this,a,b,c);this.createControlTextEl(b);return b};b.prototype.addChild=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};qa.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead.");return O.prototype.addChild.call(this,
a,b)};b.prototype.enable=function(){a.prototype.enable.call(this);this.el_.removeAttribute("disabled")};b.prototype.disable=function(){a.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};b.prototype.handleKeyPress=function(b){32!==b.which&&13!==b.which&&a.prototype.handleKeyPress.call(this,b)};return b}(Qd);O.registerComponent("Button",ic);var lh=function(a){function b(c,e){T(this,b);c=V(this,a.call(this,c,e));c.mouseused_=!1;c.on("mousedown",c.handleMouseDown);return c}W(b,
a);b.prototype.buildCSSClass=function(){return"vjs-big-play-button"};b.prototype.handleClick=function(a){var b=this.player_.play();if(this.mouseused_&&a.clientX&&a.clientY)za(b);else{var c=(a=this.player_.getChild("controlBar"))&&a.getChild("playToggle");c?(a=function(){return c.focus()},da(b)?b.then(a,function(){}):this.setTimeout(a,1)):this.player_.focus()}};b.prototype.handleKeyPress=function(b){this.mouseused_=!1;a.prototype.handleKeyPress.call(this,b)};b.prototype.handleMouseDown=function(a){this.mouseused_=
!0};return b}(ic);lh.prototype.controlText_="Play Video";O.registerComponent("BigPlayButton",lh);var si=function(a){function b(c,e){T(this,b);c=V(this,a.call(this,c,e));c.controlText(e&&e.controlText||c.localize("Close"));return c}W(b,a);b.prototype.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)};b.prototype.handleClick=function(a){this.trigger({type:"close",bubbles:!1})};return b}(ic);O.registerComponent("CloseButton",si);var af=function(a){function b(c,e){T(this,
b);e=V(this,a.call(this,c,e));e.on(c,"play",e.handlePlay);e.on(c,"pause",e.handlePause);e.on(c,"ended",e.handleEnded);return e}W(b,a);b.prototype.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)};b.prototype.handleClick=function(a){this.player_.paused()?this.player_.play():this.player_.pause()};b.prototype.handleSeeked=function(a){this.removeClass("vjs-ended");this.player_.paused()?this.handlePause(a):this.handlePlay(a)};b.prototype.handlePlay=function(a){this.removeClass("vjs-ended");
this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};b.prototype.handlePause=function(a){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};b.prototype.handleEnded=function(a){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return b}(ic);af.prototype.controlText_="Play";O.registerComponent("PlayToggle",af);var Zf=function(a,b){a=0>a?0:a;var c=
Math.floor(a%60),e=Math.floor(a/60%60),d=Math.floor(a/3600),f=Math.floor(b/60%60);b=Math.floor(b/3600);if(isNaN(a)||Infinity===a)d=e=c="-";d=0<d||0<b?d+":":"";return d+(((d||10<=f)&&10>e?"0"+e:e)+":")+(10>c?"0"+c:c)},df=Zf,Dd=function(a){function b(c,e){T(this,b);e=V(this,a.call(this,c,e));e.throttledUpdateContent=vc(ma(e,e.updateContent),25);e.on(c,"timeupdate",e.throttledUpdateContent);return e}W(b,a);b.prototype.createEl=function(b){b=this.buildCSSClass();var c=a.prototype.createEl.call(this,"div",
{className:b+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+"\u00a0</span>"});this.contentEl_=w("span",{className:b+"-display"},{"aria-live":"off"});this.updateTextNode_();c.appendChild(this.contentEl_);return c};b.prototype.dispose=function(){this.textNode_=this.contentEl_=null;a.prototype.dispose.call(this)};b.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);
this.textNode_=Y.createTextNode(this.formattedTime_||this.formatTime_(0));this.contentEl_.appendChild(this.textNode_)}};b.prototype.formatTime_=function(a){return Wa(a)};b.prototype.updateFormattedTime_=function(a){a=this.formatTime_(a);a!==this.formattedTime_&&(this.formattedTime_=a,this.requestAnimationFrame(this.updateTextNode_))};b.prototype.updateContent=function(a){};return b}(O);Dd.prototype.labelText_="Time";Dd.prototype.controlText_="Time";O.registerComponent("TimeDisplay",Dd);var og=function(a){function b(c,
e){T(this,b);e=V(this,a.call(this,c,e));e.on(c,"ended",e.handleEnded);return e}W(b,a);b.prototype.buildCSSClass=function(){return"vjs-current-time"};b.prototype.updateContent=function(a){a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(a)};b.prototype.handleEnded=function(a){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())};return b}(Dd);og.prototype.labelText_="Current Time";og.prototype.controlText_="Current Time";
O.registerComponent("CurrentTimeDisplay",og);var pg=function(a){function b(c,e){T(this,b);e=V(this,a.call(this,c,e));e.on(c,"durationchange",e.updateContent);e.on(c,"loadedmetadata",e.throttledUpdateContent);return e}W(b,a);b.prototype.buildCSSClass=function(){return"vjs-duration"};b.prototype.updateContent=function(a){(a=this.player_.duration())&&this.duration_!==a&&(this.duration_=a,this.updateFormattedTime_(a))};return b}(Dd);pg.prototype.labelText_="Duration";pg.prototype.controlText_="Duration";
O.registerComponent("DurationDisplay",pg);var Ch=function(a){function b(){T(this,b);return V(this,a.apply(this,arguments))}W(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})};return b}(O);O.registerComponent("TimeDivider",Ch);var rf=function(a){function b(c,e){T(this,b);e=V(this,a.call(this,c,e));e.on(c,"durationchange",e.throttledUpdateContent);e.on(c,"ended",e.handleEnded);return e}
W(b,a);b.prototype.buildCSSClass=function(){return"vjs-remaining-time"};b.prototype.formatTime_=function(b){return"-"+a.prototype.formatTime_.call(this,b)};b.prototype.updateContent=function(a){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))};b.prototype.handleEnded=function(a){this.player_.duration()&&this.updateFormattedTime_(0)};return b}(Dd);rf.prototype.labelText_=
"Remaining Time";rf.prototype.controlText_="Remaining Time";O.registerComponent("RemainingTimeDisplay",rf);var Dh=function(a){function b(c,e){T(this,b);c=V(this,a.call(this,c,e));c.updateShowing();c.on(c.player(),"durationchange",c.updateShowing);return c}W(b,a);b.prototype.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=w("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+
"\u00a0</span>"+this.localize("LIVE")},{"aria-live":"off"});b.appendChild(this.contentEl_);return b};b.prototype.dispose=function(){this.contentEl_=null;a.prototype.dispose.call(this)};b.prototype.updateShowing=function(a){Infinity===this.player().duration()?this.show():this.hide()};return b}(O);O.registerComponent("LiveDisplay",Dh);var He=function(a){function b(c,e){T(this,b);c=V(this,a.call(this,c,e));c.bar=c.getChild(c.options_.barName);c.vertical(!!c.options_.vertical);c.enable();return c}W(b,
a);b.prototype.enabled=function(){return this.enabled_};b.prototype.enable=function(){if(!this.enabled()){this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("focus",this.handleFocus);this.on("blur",this.handleBlur);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=!0}};b.prototype.disable=
function(){if(this.enabled()){var a=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(a,"mousemove",this.handleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");
this.addClass("disabled");this.playerEvent&&this.off(this.player_,this.playerEvent,this.update);this.enabled_=!1}};b.prototype.createEl=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};c.className+=" vjs-slider";c=g({tabIndex:0},c);e=g({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},e);return a.prototype.createEl.call(this,b,c,e)};b.prototype.handleMouseDown=function(a){var b=
this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault();"touchstart"!==a.type||Pb||a.preventDefault();E();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(b,"mousemove",this.handleMouseMove);this.on(b,"mouseup",this.handleMouseUp);this.on(b,"touchmove",this.handleMouseMove);this.on(b,"touchend",this.handleMouseUp);this.handleMouseMove(a)};b.prototype.handleMouseMove=function(a){};b.prototype.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;F();this.removeClass("vjs-sliding");
this.trigger("sliderinactive");this.off(a,"mousemove",this.handleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);this.update()};b.prototype.update=function(){if(this.el_){var a=this.getPercent(),b=this.bar;if(b){if("number"!==typeof a||a!==a||0>a||Infinity===a)a=0;var c=(100*a).toFixed(2)+"%";b=b.el().style;this.vertical()?b.height=c:b.width=c;return a}}};b.prototype.calculateDistance=function(a){a=m(this.el_,
a);return this.vertical()?a.y:a.x};b.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};b.prototype.handleKeyPress=function(a){if(37===a.which||40===a.which)a.preventDefault(),this.stepBack();else if(38===a.which||39===a.which)a.preventDefault(),this.stepForward()};b.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};b.prototype.handleClick=function(a){a.stopImmediatePropagation();a.preventDefault()};
b.prototype.vertical=function(a){if(void 0===a)return this.vertical_||!1;(this.vertical_=!!a)?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")};return b}(O);O.registerComponent("Slider",He);var qg=function(a){function b(c,e){T(this,b);e=V(this,a.call(this,c,e));e.partEls_=[];e.on(c,"progress",e.update);return e}W(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+
this.localize("Loaded")+"</span>: 0%</span>"})};b.prototype.dispose=function(){this.partEls_=null;a.prototype.dispose.call(this)};b.prototype.update=function(a){a=this.player_.buffered();var b=this.player_.duration(),c=this.player_.bufferedEnd(),e=this.partEls_,d=function(a,b){a=a/b||0;return 100*(1<=a?1:a)+"%"};this.el_.style.width=d(c,b);for(b=0;b<a.length;b++){var f=a.start(b),g=a.end(b),h=e[b];h||(h=this.el_.appendChild(w()),e[b]=h);h.style.left=d(f,c);h.style.width=d(g-f,c)}for(c=e.length;c>
a.length;c--)this.el_.removeChild(e[c-1]);e.length=a.length};return b}(O);O.registerComponent("LoadProgressBar",qg);var Hi=function(a){function b(){T(this,b);return V(this,a.apply(this,arguments))}W(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})};b.prototype.update=function(a,b,c){var e=I(this.el_),d=I(this.player_.el()),f=a.width*b;d&&e&&(b=a.left-d.left+f,a=a.width-f+(d.right-a.right),d=e.width/2,b<d?d+=d-b:a<d&&(d=a),0>d?d=0:d>e.width&&
(d=e.width),this.el_.style.right="-"+d+"px",z(this.el_,c))};return b}(O);O.registerComponent("TimeTooltip",Hi);var rg=function(a){function b(){T(this,b);return V(this,a.apply(this,arguments))}W(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})};b.prototype.update=function(a,b){var c=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);
this.rafId_=this.requestAnimationFrame(function(){var e=c.player_.scrubbing()?c.player_.getCache().currentTime:c.player_.currentTime();e=Wa(e,c.player_.duration());var d=c.getChild("timeTooltip");d&&d.update(a,b,e)})};return b}(O);rg.prototype.options_={children:[]};mc||Zb||rg.prototype.options_.children.push("timeTooltip");O.registerComponent("PlayProgressBar",rg);var sg=function(a){function b(c,e){T(this,b);c=V(this,a.call(this,c,e));c.update=vc(ma(c,c.update),25);return c}W(b,a);b.prototype.createEl=
function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};b.prototype.update=function(a,b){var c=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);this.rafId_=this.requestAnimationFrame(function(){var e=c.player_.duration();e=Wa(b*e,e);c.el_.style.left=a.width*b+"px";c.getChild("timeTooltip").update(a,b,e)})};return b}(O);sg.prototype.options_={children:["timeTooltip"]};O.registerComponent("MouseTimeDisplay",sg);var Ie=function(a){function b(c,e){T(this,b);c=
V(this,a.call(this,c,e));c.setEventHandlers_();return c}W(b,a);b.prototype.setEventHandlers_=function(){var a=this;this.update=vc(ma(this,this.update),30);this.on(this.player_,"timeupdate",this.update);this.on(this.player_,"ended",this.handleEnded);this.updateInterval=null;this.on(this.player_,["playing"],function(){a.clearInterval(a.updateInterval);a.updateInterval=a.setInterval(function(){a.requestAnimationFrame(function(){a.update()})},30)});this.on(this.player_,["ended","pause","waiting"],function(){a.clearInterval(a.updateInterval)});
this.on(this.player_,["timeupdate","ended"],this.update)};b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};b.prototype.update_=function(a,b){var c=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*b).toFixed(2));this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Wa(a,c),Wa(c,c)],"{1} of {2}"));this.bar.update(I(this.el_),
b)};b.prototype.update=function(b){b=a.prototype.update.call(this);this.update_(this.getCurrentTime_(),b);return b};b.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};b.prototype.handleEnded=function(a){this.update_(this.player_.duration(),1)};b.prototype.getPercent=function(){var a=this.getCurrentTime_()/this.player_.duration();return 1<=a?1:a||0};b.prototype.handleMouseDown=function(b){aa(b)&&(b.stopPropagation(),
this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,b))};b.prototype.handleMouseMove=function(a){aa(a)&&(a=this.calculateDistance(a)*this.player_.duration(),a===this.player_.duration()&&(a-=.1),this.player_.currentTime(a))};b.prototype.enable=function(){a.prototype.enable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.show()};b.prototype.disable=function(){a.prototype.disable.call(this);var b=this.getChild("mouseTimeDisplay");
b&&b.hide()};b.prototype.handleMouseUp=function(b){a.prototype.handleMouseUp.call(this,b);b&&b.stopPropagation();this.player_.scrubbing(!1);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0});this.videoWasPlaying&&za(this.player_.play())};b.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)};b.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)};b.prototype.handleAction=function(a){this.player_.paused()?this.player_.play():
this.player_.pause()};b.prototype.handleKeyPress=function(b){32===b.which||13===b.which?(b.preventDefault(),this.handleAction(b)):a.prototype.handleKeyPress&&a.prototype.handleKeyPress.call(this,b)};return b}(He);Ie.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};mc||Zb||Ie.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Ie.prototype.playerEvent="timeupdate";O.registerComponent("SeekBar",Ie);var sf=function(a){function b(c,e){T(this,b);c=V(this,
a.call(this,c,e));c.handleMouseMove=vc(ma(c,c.handleMouseMove),25);c.throttledHandleMouseSeek=vc(ma(c,c.handleMouseSeek),25);c.enable();return c}W(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};b.prototype.handleMouseMove=function(a){var b=this.getChild("seekBar");if(b){var c=b.getChild("mouseTimeDisplay"),e=b.el();b=I(e);a=m(e,a).x;1<a?a=1:0>a&&(a=0);c&&c.update(b,a)}};b.prototype.handleMouseSeek=function(a){var b=
this.getChild("seekBar");b&&b.handleMouseMove(a)};b.prototype.enabled=function(){return this.enabled_};b.prototype.disable=function(){this.children().forEach(function(a){return a.disable&&a.disable()});this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)};b.prototype.enable=function(){this.children().forEach(function(a){return a.enable&&a.enable()});this.enabled()||
(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)};b.prototype.handleMouseDown=function(a){var b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseDown(a);this.on(b,"mousemove",this.throttledHandleMouseSeek);this.on(b,"touchmove",this.throttledHandleMouseSeek);this.on(b,"mouseup",this.handleMouseUp);this.on(b,"touchend",this.handleMouseUp)};b.prototype.handleMouseUp=function(a){var b=
this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseUp(a);this.off(b,"mousemove",this.throttledHandleMouseSeek);this.off(b,"touchmove",this.throttledHandleMouseSeek);this.off(b,"mouseup",this.handleMouseUp);this.off(b,"touchend",this.handleMouseUp)};return b}(O);sf.prototype.options_={children:["seekBar"]};O.registerComponent("ProgressControl",sf);var tg=function(a){function b(c,e){T(this,b);e=V(this,a.call(this,c,e));e.on(c,"fullscreenchange",e.handleFullscreenChange);return e}W(b,
a);b.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)};b.prototype.handleFullscreenChange=function(a){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")};b.prototype.handleClick=function(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()};return b}(ic);tg.prototype.controlText_="Fullscreen";O.registerComponent("FullscreenToggle",tg);var fd=function(a,b){b.tech_&&
!b.tech_.featuresVolumeControl&&a.addClass("vjs-hidden");a.on(b,"loadstart",function(){b.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})},tf=function(a){function b(){T(this,b);return V(this,a.apply(this,arguments))}W(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return b}(O);O.registerComponent("VolumeLevel",tf);var ug=function(a){function b(c,e){T(this,
b);var d=V(this,a.call(this,c,e));d.on("slideractive",d.updateLastVolume_);d.on(c,"volumechange",d.updateARIAAttributes);c.ready(function(){return d.updateARIAAttributes()});return d}W(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};b.prototype.handleMouseDown=function(b){aa(b)&&a.prototype.handleMouseDown.call(this,b)};b.prototype.handleMouseMove=function(a){aa(a)&&
(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))};b.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)};b.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()};b.prototype.stepForward=function(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};b.prototype.stepBack=function(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)};b.prototype.updateARIAAttributes=function(a){a=this.player_.muted()?0:
this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a);this.el_.setAttribute("aria-valuetext",a+"%")};b.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())};b.prototype.updateLastVolume_=function(){var a=this,b=this.player_.volume();this.one("sliderinactive",function(){0===a.player_.volume()&&a.player_.lastVolume_(b)})};return b}(He);ug.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};ug.prototype.playerEvent="volumechange";O.registerComponent("VolumeBar",
ug);var Je=function(a){function b(c){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};T(this,b);e.vertical=e.vertical||!1;if("undefined"===typeof e.volumeBar||f(e.volumeBar))e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical;var d=V(this,a.call(this,c,e));fd(d,c);d.throttledHandleMouseMove=vc(ma(d,d.handleMouseMove),25);d.on("mousedown",d.handleMouseDown);d.on("touchstart",d.handleMouseDown);d.on(d.volumeBar,["focus","slideractive"],function(){d.volumeBar.addClass("vjs-slider-active");
d.addClass("vjs-slider-active");d.trigger("slideractive")});d.on(d.volumeBar,["blur","sliderinactive"],function(){d.volumeBar.removeClass("vjs-slider-active");d.removeClass("vjs-slider-active");d.trigger("sliderinactive")});return d}W(b,a);b.prototype.createEl=function(){var b="vjs-volume-horizontal";this.options_.vertical&&(b="vjs-volume-vertical");return a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+b})};b.prototype.handleMouseDown=function(a){a=this.el_.ownerDocument;
this.on(a,"mousemove",this.throttledHandleMouseMove);this.on(a,"touchmove",this.throttledHandleMouseMove);this.on(a,"mouseup",this.handleMouseUp);this.on(a,"touchend",this.handleMouseUp)};b.prototype.handleMouseUp=function(a){a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove);this.off(a,"touchmove",this.throttledHandleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchend",this.handleMouseUp)};b.prototype.handleMouseMove=function(a){this.volumeBar.handleMouseMove(a)};
return b}(O);Je.prototype.options_={children:["volumeBar"]};O.registerComponent("VolumeControl",Je);var vg=function(a){function b(c,e){T(this,b);e=V(this,a.call(this,c,e));fd(e,c);e.on(c,["loadstart","volumechange"],e.update);return e}W(b,a);b.prototype.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)};b.prototype.handleClick=function(a){a=this.player_.volume();var b=this.player_.lastVolume_();0===a?(this.player_.volume(.1>b?.1:b),this.player_.muted(!1)):this.player_.muted(this.player_.muted()?
!1:!0)};b.prototype.update=function(a){this.updateIcon_();this.updateControlText_()};b.prototype.updateIcon_=function(){var a=this.player_.volume(),b=3;0===a||this.player_.muted()?b=0:.33>a?b=1:.67>a&&(b=2);for(a=0;4>a;a++)y(this.el_,"vjs-vol-"+a);q(this.el_,"vjs-vol-"+b)};b.prototype.updateControlText_=function(){var a=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)};return b}(ic);vg.prototype.controlText_="Mute";O.registerComponent("MuteToggle",
vg);var Fh=function(a){function b(c){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};T(this,b);e.inline="undefined"!==typeof e.inline?e.inline:!0;if("undefined"===typeof e.volumeControl||f(e.volumeControl))e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline;e=V(this,a.call(this,c,e));fd(e,c);e.on(e.volumeControl,["slideractive"],e.sliderActive_);e.on(e.volumeControl,["sliderinactive"],e.sliderInactive_);return e}W(b,a);b.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")};
b.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")};b.prototype.createEl=function(){var b="vjs-volume-panel-horizontal";this.options_.inline||(b="vjs-volume-panel-vertical");return a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+b})};return b}(O);Fh.prototype.options_={children:["muteToggle","volumeControl"]};O.registerComponent("VolumePanel",Fh);var uf=function(a){function b(c,e){T(this,b);c=V(this,a.call(this,c,e));e&&(c.menuButton_=e.menuButton);
c.focusedChild_=-1;c.on("keydown",c.handleKeyPress);return c}W(b,a);b.prototype.addItem=function(a){this.addChild(a);a.on("click",ma(this,function(b){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==a.name()&&this.menuButton_.focus())}))};b.prototype.createEl=function(){this.contentEl_=w(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var b=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});
b.appendChild(this.contentEl_);ja(b,"click",function(a){a.preventDefault();a.stopImmediatePropagation()});return b};b.prototype.dispose=function(){this.contentEl_=null;a.prototype.dispose.call(this)};b.prototype.handleKeyPress=function(a){if(37===a.which||40===a.which)a.preventDefault(),this.stepForward();else if(38===a.which||39===a.which)a.preventDefault(),this.stepBack()};b.prototype.stepForward=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1);this.focus(a)};b.prototype.stepBack=
function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1);this.focus(a)};b.prototype.focus=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,b=this.children().slice();b.length&&b[0].className&&/vjs-menu-title/.test(b[0].className)&&b.shift();0<b.length&&(0>a?a=0:a>=b.length&&(a=b.length-1),this.focusedChild_=a,b[a].el_.focus())};return b}(O);O.registerComponent("Menu",uf);var Ke=function(a){function b(c){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{};T(this,b);var d=V(this,a.call(this,c,e));d.menuButton_=new ic(c,e);d.menuButton_.controlText(d.controlText_);d.menuButton_.el_.setAttribute("aria-haspopup","true");e=ic.prototype.buildCSSClass();d.menuButton_.el_.className=d.buildCSSClass()+" "+e;d.menuButton_.removeClass("vjs-control");d.addChild(d.menuButton_);d.update();d.enabled_=!0;d.on(d.menuButton_,"tap",d.handleClick);d.on(d.menuButton_,"click",d.handleClick);d.on(d.menuButton_,"focus",d.handleFocus);d.on(d.menuButton_,"blur",d.handleBlur);
d.on("keydown",d.handleSubmenuKeyPress);return d}W(b,a);b.prototype.update=function(){var a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));this.menu=a;this.addChild(a);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()};b.prototype.createMenu=function(){var a=new uf(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var b=w("li",{className:"vjs-menu-title",
innerHTML:ra(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;a.children_.unshift(b);v(b,a.contentEl())}if(this.items=this.createItems())for(b=0;b<this.items.length;b++)a.addItem(this.items[b]);return a};b.prototype.createItems=function(){};b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};b.prototype.buildWrapperCSSClass=function(){var b="vjs-menu-button";b=!0===this.options_.inline?b+"-inline":b+"-popup";var c=ic.prototype.buildCSSClass();
return"vjs-menu-button "+b+" "+c+" "+a.prototype.buildCSSClass.call(this)};b.prototype.buildCSSClass=function(){var b="vjs-menu-button";b=!0===this.options_.inline?b+"-inline":b+"-popup";return"vjs-menu-button "+b+" "+a.prototype.buildCSSClass.call(this)};b.prototype.controlText=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(a,b)};b.prototype.handleClick=function(a){this.one(this.menu.contentEl(),"mouseleave",ma(this,
function(a){this.unpressButton();this.el_.blur()}));this.buttonPressed_?this.unpressButton():this.pressButton()};b.prototype.focus=function(){this.menuButton_.focus()};b.prototype.blur=function(){this.menuButton_.blur()};b.prototype.handleFocus=function(){ja(Y,"keydown",ma(this,this.handleKeyPress))};b.prototype.handleBlur=function(){ca(Y,"keydown",ma(this,this.handleKeyPress))};b.prototype.handleKeyPress=function(a){27===a.which||9===a.which?(this.buttonPressed_&&this.unpressButton(),9!==a.which&&
(a.preventDefault(),this.menuButton_.el_.focus())):38!==a.which&&40!==a.which||this.buttonPressed_||(this.pressButton(),a.preventDefault())};b.prototype.handleSubmenuKeyPress=function(a){if(27===a.which||9===a.which)this.buttonPressed_&&this.unpressButton(),9!==a.which&&(a.preventDefault(),this.menuButton_.el_.focus())};b.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),mc&&p()||this.menu.focus())};
b.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))};b.prototype.disable=function(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()};b.prototype.enable=function(){this.enabled_=!0;this.removeClass("vjs-disabled");this.menuButton_.enable()};return b}(O);O.registerComponent("MenuButton",Ke);var oc=function(a){function b(c,e){T(this,b);var d=e.tracks;
c=V(this,a.call(this,c,e));1>=c.items.length&&c.hide();if(!d)return V(c);var f=ma(c,c.update);d.addEventListener("removetrack",f);d.addEventListener("addtrack",f);c.player_.on("ready",f);c.player_.on("dispose",function(){d.removeEventListener("removetrack",f);d.removeEventListener("addtrack",f)});return c}W(b,a);return b}(Ke);O.registerComponent("TrackButton",oc);var Ed=function(a){function b(c,e){T(this,b);c=V(this,a.call(this,c,e));c.selectable=e.selectable;c.isSelected_=e.selected||!1;c.multiSelectable=
e.multiSelectable;c.selected(c.isSelected_);c.selectable?c.multiSelectable?c.el_.setAttribute("role","menuitemcheckbox"):c.el_.setAttribute("role","menuitemradio"):c.el_.setAttribute("role","menuitem");return c}W(b,a);b.prototype.createEl=function(b,c,e){this.nonIconControl=!0;return a.prototype.createEl.call(this,"li",g({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},c),e)};b.prototype.handleClick=function(a){this.selected(!0)};
b.prototype.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))};return b}(Qd);O.registerComponent("MenuItem",Ed);var gd=function(a){function b(c,e){T(this,b);var d=e.track,f=c.textTracks();e.label=d.label||d.language||"Unknown";e.selected="showing"===d.mode;var g=
V(this,a.call(this,c,e));g.track=d;var h=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];g.handleTracksChange.apply(g,b)},l=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];g.handleSelectedLanguageChange.apply(g,b)};c.on(["loadstart","texttrackchange"],h);f.addEventListener("change",h);f.addEventListener("selectedlanguagechange",l);g.on("dispose",function(){c.off(["loadstart","texttrackchange"],h);f.removeEventListener("change",h);f.removeEventListener("selectedlanguagechange",
l)});if(void 0===f.onchange){var k=void 0;g.on(["tap","click"],function(){if("object"!==$a(K.Event))try{k=new K.Event("change")}catch(lk){}k||(k=Y.createEvent("Event"),k.initEvent("change",!0,!0));f.dispatchEvent(k)})}g.handleTracksChange();return g}W(b,a);b.prototype.handleClick=function(b){var c=this.track.kind,e=this.track.kinds,d=this.player_.textTracks();e||(e=[c]);a.prototype.handleClick.call(this,b);if(d)for(b=0;b<d.length;b++)c=d[b],c===this.track&&-1<e.indexOf(c.kind)?"showing"!==c.mode&&
(c.mode="showing"):"disabled"!==c.mode&&(c.mode="disabled")};b.prototype.handleTracksChange=function(a){a="showing"===this.track.mode;a!==this.isSelected_&&this.selected(a)};b.prototype.handleSelectedLanguageChange=function(a){"showing"===this.track.mode&&(a=this.player_.cache_.selectedLanguage,a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))};b.prototype.dispose=function(){this.track=
null;a.prototype.dispose.call(this)};return b}(Ed);O.registerComponent("TextTrackMenuItem",gd);var Gh=function(a){function b(c,e){T(this,b);e.track={player:c,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"};e.kinds||(e.kinds=[e.kind]);e.track.label=e.label?e.label:e.kinds.join(" and ")+" off";e.selectable=!0;e.multiSelectable=!1;return V(this,a.call(this,c,e))}W(b,a);b.prototype.handleTracksChange=function(a){a=this.player().textTracks();for(var b=!0,c=0,e=a.length;c<e;c++){var d=a[c];if(-1<
this.options_.kinds.indexOf(d.kind)&&"showing"===d.mode){b=!1;break}}b!==this.isSelected_&&this.selected(b)};b.prototype.handleSelectedLanguageChange=function(a){a=this.player().textTracks();for(var b=!0,c=0,e=a.length;c<e;c++){var d=a[c];if(-1<["captions","descriptions","subtitles"].indexOf(d.kind)&&"showing"===d.mode){b=!1;break}}b&&(this.player_.cache_.selectedLanguage={enabled:!1})};return b}(gd);O.registerComponent("OffTextTrackMenuItem",Gh);var Fd=function(a){function b(c){var e=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:{};T(this,b);e.tracks=c.textTracks();return V(this,a.call(this,c,e))}W(b,a);b.prototype.createItems=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:gd,c=void 0;this.label_&&(c=this.label_+" off");a.push(new Gh(this.player_,{kinds:this.kinds_,kind:this.kind_,label:c}));this.hideThreshold_+=1;c=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var e=
0;e<c.length;e++){var d=c[e];if(-1<this.kinds_.indexOf(d.kind)){var f=new b(this.player_,{track:d,selectable:!0,multiSelectable:!1});f.addClass("vjs-"+d.kind+"-menu-item");a.push(f)}}return a};return b}(oc);O.registerComponent("TextTrackButton",Fd);var wg=function(a){function b(c,e){T(this,b);var d=e.track,f=e.cue,g=c.currentTime();e.selectable=!0;e.multiSelectable=!1;e.label=f.text;e.selected=f.startTime<=g&&g<f.endTime;c=V(this,a.call(this,c,e));c.track=d;c.cue=f;d.addEventListener("cuechange",
ma(c,c.update));return c}W(b,a);b.prototype.handleClick=function(b){a.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};b.prototype.update=function(a){a=this.cue;var b=this.player_.currentTime();this.selected(a.startTime<=b&&b<a.endTime)};return b}(Ed);O.registerComponent("ChaptersTrackMenuItem",wg);var de=function(a){function b(c,e,d){T(this,b);return V(this,a.call(this,c,e,d))}W(b,a);b.prototype.buildCSSClass=function(){return"vjs-chapters-button "+
a.prototype.buildCSSClass.call(this)};b.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)};b.prototype.update=function(b){this.track_&&(!b||"addtrack"!==b.type&&"removetrack"!==b.type)||this.setTrack(this.findChaptersTrack());a.prototype.update.call(this)};b.prototype.setTrack=function(a){if(this.track_!==a){this.updateHandler_||(this.updateHandler_=this.update.bind(this));if(this.track_){var b=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);
b&&b.removeEventListener("load",this.updateHandler_);this.track_=null}if(this.track_=a)this.track_.mode="hidden",(a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&a.addEventListener("load",this.updateHandler_)}};b.prototype.findChaptersTrack=function(){for(var a=this.player_.textTracks()||[],b=a.length-1;0<=b;b--){var c=a[b];if(c.kind===this.kind_)return c}};b.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ra(this.kind_))};
b.prototype.createMenu=function(){this.options_.title=this.getMenuCaption();return a.prototype.createMenu.call(this)};b.prototype.createItems=function(){var a=[];if(!this.track_)return a;var b=this.track_.cues;if(!b)return a;for(var c=0,e=b.length;c<e;c++){var d=new wg(this.player_,{track:this.track_,cue:b[c]});a.push(d)}return a};return b}(Fd);de.prototype.kind_="chapters";de.prototype.controlText_="Chapters";O.registerComponent("ChaptersButton",de);var vf=function(a){function b(c,e,d){T(this,b);
e=V(this,a.call(this,c,e,d));var f=c.textTracks(),g=ma(e,e.handleTracksChange);f.addEventListener("change",g);e.on("dispose",function(){f.removeEventListener("change",g)});return e}W(b,a);b.prototype.handleTracksChange=function(a){a=this.player().textTracks();for(var b=!1,c=0,e=a.length;c<e;c++){var d=a[c];if(d.kind!==this.kind_&&"showing"===d.mode){b=!0;break}}b?this.disable():this.enable()};b.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)};
b.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)};return b}(Fd);vf.prototype.kind_="descriptions";vf.prototype.controlText_="Descriptions";O.registerComponent("DescriptionsButton",vf);var wf=function(a){function b(c,e,d){T(this,b);return V(this,a.call(this,c,e,d))}W(b,a);b.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)};b.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+
a.prototype.buildWrapperCSSClass.call(this)};return b}(Fd);wf.prototype.kind_="subtitles";wf.prototype.controlText_="Subtitles";O.registerComponent("SubtitlesButton",wf);var xf=function(a){function b(c,e){T(this,b);e.track={player:c,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"};e.selectable=!1;e.name="CaptionSettingsMenuItem";c=V(this,a.call(this,c,e));c.addClass("vjs-texttrack-settings");c.controlText(", opens "+e.kind+" settings dialog");return c}W(b,a);b.prototype.handleClick=
function(a){this.player().getChild("textTrackSettings").open()};return b}(gd);O.registerComponent("CaptionSettingsMenuItem",xf);var yf=function(a){function b(c,e,d){T(this,b);return V(this,a.call(this,c,e,d))}W(b,a);b.prototype.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)};b.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)};b.prototype.createItems=function(){var b=[];this.player().tech_&&
this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new xf(this.player_,{kind:this.kind_})),this.hideThreshold_+=1);return a.prototype.createItems.call(this,b)};return b}(Fd);yf.prototype.kind_="captions";yf.prototype.controlText_="Captions";O.registerComponent("CaptionsButton",yf);var xg=function(a){function b(){T(this,b);return V(this,a.apply(this,arguments))}W(b,a);b.prototype.createEl=function(b,c,e){var d='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);
"captions"===this.options_.track.kind&&(d+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      ");return a.prototype.createEl.call(this,b,g({innerHTML:d+"</span>"},c),e)};return b}(gd);O.registerComponent("SubsCapsMenuItem",xg);var yg=function(a){function b(c){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};T(this,b);e=V(this,a.call(this,c,e));e.label_="subtitles";-1<["en","en-us",
"en-ca","fr-ca"].indexOf(e.player_.language_)&&(e.label_="captions");e.menuButton_.controlText(ra(e.label_));return e}W(b,a);b.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)};b.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)};b.prototype.createItems=function(){var b=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||
(b.push(new xf(this.player_,{kind:this.label_})),this.hideThreshold_+=1);return b=a.prototype.createItems.call(this,b,xg)};return b}(Fd);yg.prototype.kinds_=["captions","subtitles"];yg.prototype.controlText_="Subtitles";O.registerComponent("SubsCapsButton",yg);var Jh=function(a){function b(c,e){T(this,b);var d=e.track,f=c.audioTracks();e.label=d.label||d.language||"Unknown";e.selected=d.enabled;var g=V(this,a.call(this,c,e));g.track=d;var h=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=
arguments[c];g.handleTracksChange.apply(g,b)};f.addEventListener("change",h);g.on("dispose",function(){f.removeEventListener("change",h)});return g}W(b,a);b.prototype.handleClick=function(b){var c=this.player_.audioTracks();a.prototype.handleClick.call(this,b);for(b=0;b<c.length;b++){var e=c[b];e.enabled=e===this.track}};b.prototype.handleTracksChange=function(a){this.selected(this.track.enabled)};return b}(Ed);O.registerComponent("AudioTrackMenuItem",Jh);var Kh=function(a){function b(c){var e=1<
arguments.length&&void 0!==arguments[1]?arguments[1]:{};T(this,b);e.tracks=c.audioTracks();return V(this,a.call(this,c,e))}W(b,a);b.prototype.buildCSSClass=function(){return"vjs-audio-button "+a.prototype.buildCSSClass.call(this)};b.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+a.prototype.buildWrapperCSSClass.call(this)};b.prototype.createItems=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var b=this.player_.audioTracks(),
c=0;c<b.length;c++)a.push(new Jh(this.player_,{track:b[c],selectable:!0,multiSelectable:!1}));return a};return b}(oc);Kh.prototype.controlText_="Audio Track";O.registerComponent("AudioTrackButton",Kh);var zf=function(a){function b(c,e){T(this,b);var d=e.rate,f=parseFloat(d,10);e.label=d;e.selected=1===f;e.selectable=!0;e.multiSelectable=!1;e=V(this,a.call(this,c,e));e.label=d;e.rate=f;e.on(c,"ratechange",e.update);return e}W(b,a);b.prototype.handleClick=function(b){a.prototype.handleClick.call(this);
this.player().playbackRate(this.rate)};b.prototype.update=function(a){this.selected(this.player().playbackRate()===this.rate)};return b}(Ed);zf.prototype.contentElType="button";O.registerComponent("PlaybackRateMenuItem",zf);var zg=function(a){function b(c,e){T(this,b);e=V(this,a.call(this,c,e));e.updateVisibility();e.updateLabel();e.on(c,"loadstart",e.updateVisibility);e.on(c,"ratechange",e.updateLabel);return e}W(b,a);b.prototype.createEl=function(){var b=a.prototype.createEl.call(this);this.labelEl_=
w("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});b.appendChild(this.labelEl_);return b};b.prototype.dispose=function(){this.labelEl_=null;a.prototype.dispose.call(this)};b.prototype.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)};b.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)};b.prototype.createMenu=function(){var a=new uf(this.player()),b=this.playbackRates();if(b)for(var c=
b.length-1;0<=c;c--)a.addChild(new zf(this.player(),{rate:b[c]+"x"}));return a};b.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};b.prototype.handleClick=function(a){a=this.player().playbackRate();for(var b=this.playbackRates(),c=b[0],e=0;e<b.length;e++)if(b[e]>a){c=b[e];break}this.player().playbackRate(c)};b.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};
b.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length};b.prototype.updateVisibility=function(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")};b.prototype.updateLabel=function(a){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")};return b}(Ke);zg.prototype.controlText_="Playback Rate";O.registerComponent("PlaybackRateMenuButton",
zg);var Lh=function(a){function b(){T(this,b);return V(this,a.apply(this,arguments))}W(b,a);b.prototype.buildCSSClass=function(){return"vjs-spacer "+a.prototype.buildCSSClass.call(this)};b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return b}(O);O.registerComponent("Spacer",Lh);var Af=function(a){function b(){T(this,b);return V(this,a.apply(this,arguments))}W(b,a);b.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+
a.prototype.buildCSSClass.call(this)};b.prototype.createEl=function(){var b=a.prototype.createEl.call(this,{className:this.buildCSSClass()});b.innerHTML="\u00a0";return b};return b}(Lh);O.registerComponent("CustomControlSpacer",Af);var Le=function(a){function b(){T(this,b);return V(this,a.apply(this,arguments))}W(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return b}(O);Le.prototype.options_={children:"playToggle volumePanel currentTimeDisplay timeDivider durationDisplay progressControl liveDisplay remainingTimeDisplay customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton subsCapsButton audioTrackButton fullscreenToggle".split(" ")};
O.registerComponent("ControlBar",Le);var Ag=function(a){function b(c,e){T(this,b);e=V(this,a.call(this,c,e));e.on(c,"error",e.open);return e}W(b,a);b.prototype.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)};b.prototype.content=function(){var a=this.player().error();return a?this.localize(a.message):""};return b}(yb);Ag.prototype.options_=wa(yb.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});O.registerComponent("ErrorDisplay",
Ag);var wb=["#000","Black"],Bf=["#00F","Blue"],Cf=["#0FF","Cyan"],Me=["#0F0","Green"],Df=["#F0F","Magenta"],Bg=["#F00","Red"],Hb=["#FFF","White"],Ef=["#FF0","Yellow"],Ne=["1","Opaque"],Ff=["0.5","Semi-Transparent"],Cg=["0","Transparent"],Gd={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[wb,Hb,Bg,Me,Bf,Ef,Df,Cf]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Ne,Ff,
Cg]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Hb,wb,Bg,Me,Bf,Ef,Df,Cf]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif",
"Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(a){return"1.00"===a?null:Number(a)}},textOpacity:{selector:".vjs-text-opacity > select",
id:"captions-foreground-opacity-%s",label:"Transparency",options:[Ne,Ff]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Cg,Ff,Ne]}};Gd.windowColor.options=Gd.backgroundColor.options;var Oh=function(a){function b(c,e){T(this,b);e.temporary=!1;var d=V(this,a.call(this,c,e));d.updateDisplay=ma(d,d.updateDisplay);d.fill();d.hasBeenOpened_=
d.hasBeenFilled_=!0;d.endDialog=w("p",{className:"vjs-control-text",textContent:d.localize("End of dialog window.")});d.el().appendChild(d.endDialog);d.setDefaults();void 0===e.persistTextTrackSettings&&(d.options_.persistTextTrackSettings=d.options_.playerOptions.persistTextTrackSettings);d.on(d.$(".vjs-done-button"),"click",function(){d.saveSettings();d.close()});d.on(d.$(".vjs-default-button"),"click",function(){d.setDefaults();d.updateDisplay()});h(Gd,function(a){d.on(d.$(a.selector),"change",
d.updateDisplay)});d.options_.persistTextTrackSettings&&d.restoreSettings();return d}W(b,a);b.prototype.dispose=function(){this.endDialog=null;a.prototype.dispose.call(this)};b.prototype.createElSelect_=function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"label",d=Gd[a],f=d.id.replace("%s",this.id_),g=[c,f].join(" ").trim();return["<"+e+' id="'+f+'" class="'+("label"===e?"vjs-label":"")+'">',this.localize(d.label),
"</"+e+">",'<select aria-labelledby="'+g+'">'].concat(d.options.map(function(a){var c=f+"-"+a[1].replace(/\W+/g,"");return['<option id="'+c+'" value="'+a[0]+'" ','aria-labelledby="'+g+" "+c+'">',b.localize(a[1]),"</option>"].join("")})).concat("</select>").join("")};b.prototype.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",a),'<span class="vjs-text-opacity vjs-opacity">',
this.createElSelect_("textOpacity",a),"</span></fieldset>"].join("")};b.prototype.createElBgColor_=function(){var a="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",a),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",a),"</span></fieldset>"].join("")};b.prototype.createElWinColor_=function(){var a="captions-window-"+this.id_;
return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",a),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",a),"</span></fieldset>"].join("")};b.prototype.createElColors_=function(){return w("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};b.prototype.createElFont_=function(){return w("div",
{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),'</fieldset><fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),'</fieldset><fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};b.prototype.createElControls_=function(){var a=this.localize("restore all settings to the default values");
return w("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+a+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+a+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})};b.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};b.prototype.label=function(){return this.localize("Caption Settings Dialog")};b.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};
b.prototype.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};b.prototype.getValues=function(){var a=this;return c(Gd,function(b,c,e){var d=a.$(c.selector);c=Vb(d.options[d.options.selectedIndex].value,c.parser);void 0!==c&&(b[e]=c);return b},{})};b.prototype.setValues=function(a){var b=this;h(Gd,function(c,e){var d=b.$(c.selector);e=a[e];c=c.parser;if(e)for(var f=0;f<d.options.length;f++)if(Vb(d.options[f].value,c)===e){d.selectedIndex=f;break}})};b.prototype.setDefaults=
function(){var a=this;h(Gd,function(b){var c=b.hasOwnProperty("default")?b.default:0;a.$(b.selector).selectedIndex=c})};b.prototype.restoreSettings=function(){var a=void 0;try{a=JSON.parse(K.localStorage.getItem("vjs-text-track-settings"))}catch(ta){qa.warn(ta)}a&&this.setValues(a)};b.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var a=this.getValues();try{Object.keys(a).length?K.localStorage.setItem("vjs-text-track-settings",JSON.stringify(a)):K.localStorage.removeItem("vjs-text-track-settings")}catch(ta){qa.warn(ta)}}};
b.prototype.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()};b.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null;this.off(Y,"keydown",this.handleKeyDown);var a=this.player_.controlBar,b=a&&a.subsCapsButton;a=a&&a.captionsButton;b?b.focus():a&&a.focus()};return b}(yb);O.registerComponent("TextTrackSettings",Oh);var Ji=function(a){function b(c,e){T(this,b);var d=e.ResizeObserver||K.ResizeObserver;null===e.ResizeObserver&&(d=!1);var f=wa({createEl:!d},
e),g=V(this,a.call(this,c,f));g.ResizeObserver=e.ResizeObserver||K.ResizeObserver;g.loadListener_=null;g.resizeObserver_=null;g.debouncedHandler_=Wd(function(){g.resizeHandler()},100,!1,c);d?(g.resizeObserver_=new g.ResizeObserver(g.debouncedHandler_),g.resizeObserver_.observe(c.el())):(g.loadListener_=function(){g.el_.contentWindow&&ja(g.el_.contentWindow,"resize",g.debouncedHandler_);g.off("load",g.loadListener_)},g.on("load",g.loadListener_));return g}W(b,a);b.prototype.createEl=function(){return a.prototype.createEl.call(this,
"iframe",{className:"vjs-resize-manager"})};b.prototype.resizeHandler=function(){this.player_.trigger("playerresize")};b.prototype.dispose=function(){this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.el_&&this.el_.contentWindow&&ca(this.el_.contentWindow,"resize",this.debouncedHandler_);this.loadListener_&&this.off("load",this.loadListener_);this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=
null};return b}(O);O.registerComponent("ResizeManager",Ji);var Dg=function(a){var b=a.el();if(b.hasAttribute("src"))return a.triggerSourceset(b.src),!0;b=a.$$("source");var c=[],e="";if(!b.length)return!1;for(var d=0;d<b.length;d++){var f=b[d].src;f&&-1===c.indexOf(f)&&c.push(f)}if(!c.length)return!1;1===c.length&&(e=c[0]);a.triggerSourceset(e);return!0},Ki=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(a){var b=Y.createElement(this.nodeName.toLowerCase());
b.innerHTML=a;for(a=Y.createDocumentFragment();b.childNodes.length;)a.appendChild(b.childNodes[0]);this.innerText="";K.Element.prototype.appendChild.call(this,a);return this.innerHTML}}),Eg=function(a,b){for(var c={},e=0;e<a.length&&!((c=Object.getOwnPropertyDescriptor(a[e],b))&&c.set&&c.get);e++);c.enumerable=!0;c.configurable=!0;return c},ee=function(a){var b=a.el();if(!b.resetSourceWatch_){var c={},e=Eg([a.el(),K.HTMLMediaElement.prototype,K.Element.prototype,Ki],"innerHTML"),d=function(c){return function(){for(var e=
arguments.length,d=Array(e),f=0;f<e;f++)d[f]=arguments[f];e=c.apply(b,d);Dg(a);return e}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){b[a]&&(c[a]=b[a],b[a]=d(c[a]))});Object.defineProperty(b,"innerHTML",wa(e,{set:d(e.set)}));b.resetSourceWatch_=function(){b.resetSourceWatch_=null;Object.keys(c).forEach(function(a){b[a]=c[a]});Object.defineProperty(b,"innerHTML",e)};a.one("sourceset",b.resetSourceWatch_)}},Fg=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?
mh(K.Element.prototype.getAttribute.call(this,"src")):""},set:function(a){K.Element.prototype.setAttribute.call(this,"src",a);return a}}),Li=function(a){if(a.featuresSourceset){var b=a.el();if(!b.resetSourceset_){var c=Eg([a.el(),K.HTMLMediaElement.prototype,Fg],"src"),e=b.setAttribute,d=b.load;Object.defineProperty(b,"src",wa(c,{set:function(e){e=c.set.call(b,e);a.triggerSourceset(b.src);return e}}));b.setAttribute=function(c,d){d=e.call(b,c,d);/src/i.test(c)&&a.triggerSourceset(b.src);return d};
b.load=function(){var c=d.call(b);Dg(a)||(a.triggerSourceset(""),ee(a));return c};b.currentSrc?a.triggerSourceset(b.currentSrc):Dg(a)||ee(a);b.resetSourceset_=function(){b.resetSourceset_=null;b.load=d;b.setAttribute=e;Object.defineProperty(b,"src",c);b.resetSourceWatch_&&b.resetSourceWatch_()}}}},Ph=Sc(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),
Z=function(a){function b(c,e){T(this,b);e=V(this,a.call(this,c,e));var d=c.source,f=!1;d&&(e.el_.currentSrc!==d.src||c.tag&&3===c.tag.initNetworkState_)?e.setSource(d):e.handleLateInit_(e.el_);c.enableSourceset&&e.setupSourcesetHandling_();if(e.el_.hasChildNodes()){var g=e.el_.childNodes,h=g.length;for(d=[];h--;){var l=g[h];"track"===l.nodeName.toLowerCase()&&(e.featuresNativeTextTracks?(e.remoteTextTrackEls().addTrackElement_(l),e.remoteTextTracks().addTrack(l.track),e.textTracks().addTrack(l.track),
f||e.el_.hasAttribute("crossorigin")||!Mb(l.src)||(f=!0)):d.push(l))}for(g=0;g<d.length;g++)e.el_.removeChild(d[g])}e.proxyNativeTracks_();e.featuresNativeTextTracks&&f&&qa.warn(pe(Ph));e.restoreMetadataTracksInIOSNativePlayer_();(xd||Be||Ob)&&!0===c.nativeControlsForTouch&&e.setControls(!0);e.proxyWebkitFullscreen_();e.triggerReady();return e}W(b,a);b.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_();b.disposeMediaElement(this.el_);this.options_=null;a.prototype.dispose.call(this)};
b.prototype.setupSourcesetHandling_=function(){Li(this)};b.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var a=this.textTracks(),b=void 0,c=function(){b=[];for(var c=0;c<a.length;c++){var e=a[c];"metadata"===e.kind&&b.push({track:e,storedMode:e.mode})}};c();a.addEventListener("change",c);this.on("dispose",function(){return a.removeEventListener("change",c)});var e=function he(){for(var c=0;c<b.length;c++){var e=b[c];"disabled"===e.track.mode&&e.track.mode!==e.storedMode&&(e.track.mode=
e.storedMode)}a.removeEventListener("change",he)};this.on("webkitbeginfullscreen",function(){a.removeEventListener("change",c);a.removeEventListener("change",e);a.addEventListener("change",e)});this.on("webkitendfullscreen",function(){a.removeEventListener("change",c);a.addEventListener("change",c);a.removeEventListener("change",e)})};b.prototype.overrideNative_=function(a,b){var c=this;if(b===this["featuresNative"+a+"Tracks"]){var e=a.toLowerCase();this[e+"TracksListeners_"]&&Object.keys(this[e+
"TracksListeners_"]).forEach(function(a){c.el()[e+"Tracks"].removeEventListener(a,c[e+"TracksListeners_"][a])});this["featuresNative"+a+"Tracks"]=!b;this[e+"TracksListeners_"]=null;this.proxyNativeTracksForType_(e)}};b.prototype.overrideNativeAudioTracks=function(a){this.overrideNative_("Audio",a)};b.prototype.overrideNativeVideoTracks=function(a){this.overrideNative_("Video",a)};b.prototype.proxyNativeTracksForType_=function(a){var b=this;a=Bb[a];var c=this.el()[a.getterName],e=this[a.getterName]();
if(this["featuresNative"+a.capitalName+"Tracks"]&&c&&c.addEventListener){var d={change:function(a){e.trigger({type:"change",target:e,currentTarget:e,srcElement:e})},addtrack:function(a){e.addTrack(a.track)},removetrack:function(a){e.removeTrack(a.track)}},f=function(){for(var a=[],b=0;b<e.length;b++){for(var d=!1,f=0;f<c.length;f++)if(c[f]===e[b]){d=!0;break}d||a.push(e[b])}for(;a.length;)e.removeTrack(a.shift())};this[a.getterName+"Listeners_"]=d;Object.keys(d).forEach(function(a){var e=d[a];c.addEventListener(a,
e);b.on("dispose",function(b){return c.removeEventListener(a,e)})});this.on("loadstart",f);this.on("dispose",function(a){return b.off("loadstart",f)})}};b.prototype.proxyNativeTracks_=function(){var a=this;Bb.names.forEach(function(b){a.proxyNativeTracksForType_(b)})};b.prototype.createEl=function(){var a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var c=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(c,a);b.disposeMediaElement(a);a=c}else a=
Y.createElement("video"),c=this.options_.tag&&G(this.options_.tag),c=wa({},c),xd&&!0===this.options_.nativeControlsForTouch||delete c.controls,C(a,g(c,{id:this.options_.techId,class:"vjs-tech"}));a.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&a.setAttribute("preload",this.options_.preload);c=["loop","muted","playsinline","autoplay"];for(var e=0;e<c.length;e++){var d=c[e],f=this.options_[d];"undefined"!==typeof f&&(f?a.setAttribute(d,d):a.removeAttribute(d),a[d]=f)}return a};
b.prototype.handleLateInit_=function(a){if(0!==a.networkState&&3!==a.networkState)if(0===a.readyState){var b=!1,c=function(){b=!0};this.on("loadstart",c);var e=function(){b||this.trigger("loadstart")};this.on("loadedmetadata",e);this.ready(function(){this.off("loadstart",c);this.off("loadedmetadata",e);b||this.trigger("loadstart")})}else{var d=["loadstart"];d.push("loadedmetadata");2<=a.readyState&&d.push("loadeddata");3<=a.readyState&&d.push("canplay");4<=a.readyState&&d.push("canplaythrough");this.ready(function(){d.forEach(function(a){this.trigger(a)},
this)})}};b.prototype.setCurrentTime=function(a){try{this.el_.currentTime=a}catch(ta){qa(ta,"Video is not ready. (Video.js)")}};b.prototype.duration=function(){var a=this;return Infinity===this.el_.duration&&Zb&&Pb&&0===this.el_.currentTime?(this.on("timeupdate",function Sa(){0<a.el_.currentTime&&(Infinity===a.el_.duration&&a.trigger("durationchange"),a.off("timeupdate",Sa))}),NaN):this.el_.duration||NaN};b.prototype.width=function(){return this.el_.offsetWidth};b.prototype.height=function(){return this.el_.offsetHeight};
b.prototype.proxyWebkitFullscreen_=function(){var a=this;if("webkitDisplayingFullscreen"in this.el_){var b=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},c=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",b),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",c);this.on("dispose",function(){a.off("webkitbeginfullscreen",c);a.off("webkitendfullscreen",b)})}};b.prototype.supportsFullScreen=
function(){if("function"===typeof this.el_.webkitEnterFullScreen){var a=K.navigator&&K.navigator.userAgent||"";if(/Android/.test(a)||!/Chrome|Mac OS X 10.5/.test(a))return!0}return!1};b.prototype.enterFullScreen=function(){var a=this.el_;a.paused&&a.networkState<=a.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){a.pause();a.webkitEnterFullScreen()},0)):a.webkitEnterFullScreen()};b.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()};b.prototype.src=function(a){if(void 0===
a)return this.el_.src;this.setSrc(a)};b.prototype.reset=function(){b.resetMediaElement(this.el_)};b.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc};b.prototype.setControls=function(a){this.el_.controls=!!a};b.prototype.addTextTrack=function(b,c,e){return this.featuresNativeTextTracks?this.el_.addTextTrack(b,c,e):a.prototype.addTextTrack.call(this,b,c,e)};b.prototype.createRemoteTextTrack=function(b){if(!this.featuresNativeTextTracks)return a.prototype.createRemoteTextTrack.call(this,
b);var c=Y.createElement("track");b.kind&&(c.kind=b.kind);b.label&&(c.label=b.label);if(b.language||b.srclang)c.srclang=b.language||b.srclang;b.default&&(c.default=b.default);b.id&&(c.id=b.id);b.src&&(c.src=b.src);return c};b.prototype.addRemoteTextTrack=function(b,c){b=a.prototype.addRemoteTextTrack.call(this,b,c);this.featuresNativeTextTracks&&this.el().appendChild(b);return b};b.prototype.removeRemoteTextTrack=function(b){a.prototype.removeRemoteTextTrack.call(this,b);if(this.featuresNativeTextTracks)for(var c=
this.$$("track"),e=c.length;e--;)b!==c[e]&&b!==c[e].track||this.el().removeChild(c[e])};b.prototype.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var a={};"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount);K.performance&&"function"===typeof K.performance.now?
a.creationTime=K.performance.now():K.performance&&K.performance.timing&&"number"===typeof K.performance.timing.navigationStart&&(a.creationTime=K.Date.now()-K.performance.timing.navigationStart);return a};return b}(Ja);if(l()){Z.TEST_VID=Y.createElement("video");var Gf=Y.createElement("track");Gf.kind="captions";Gf.srclang="en";Gf.label="English";Z.TEST_VID.appendChild(Gf)}Z.isSupported=function(){try{Z.TEST_VID.volume=.5}catch(Si){return!1}return!(!Z.TEST_VID||!Z.TEST_VID.canPlayType)};Z.canPlayType=
function(a){return Z.TEST_VID.canPlayType(a)};Z.canPlaySource=function(a,b){return Z.canPlayType(a.type)};Z.canControlVolume=function(){try{var a=Z.TEST_VID.volume;Z.TEST_VID.volume=a/2+.1;return a!==Z.TEST_VID.volume}catch(Hc){return!1}};Z.canControlPlaybackRate=function(){if(Zb&&Pb&&58>qe)return!1;try{var a=Z.TEST_VID.playbackRate;Z.TEST_VID.playbackRate=a/2+.1;return a!==Z.TEST_VID.playbackRate}catch(Hc){return!1}};Z.canOverrideAttributes=function(){try{var a=function(){};Object.defineProperty(Y.createElement("video"),
"src",{get:a,set:a});Object.defineProperty(Y.createElement("audio"),"src",{get:a,set:a});Object.defineProperty(Y.createElement("video"),"innerHTML",{get:a,set:a});Object.defineProperty(Y.createElement("audio"),"innerHTML",{get:a,set:a})}catch(Hc){return!1}return!0};Z.supportsNativeTextTracks=function(){return De};Z.supportsNativeVideoTracks=function(){return!(!Z.TEST_VID||!Z.TEST_VID.videoTracks)};Z.supportsNativeAudioTracks=function(){return!(!Z.TEST_VID||!Z.TEST_VID.audioTracks)};Z.Events="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");
Z.prototype.featuresVolumeControl=Z.canControlVolume();Z.prototype.featuresPlaybackRate=Z.canControlPlaybackRate();Z.prototype.featuresSourceset=Z.canOverrideAttributes();Z.prototype.movingMediaElementInDOM=!mc;Z.prototype.featuresFullscreenResize=!0;Z.prototype.featuresProgressEvents=!0;Z.prototype.featuresTimeupdateEvents=!0;Z.prototype.featuresNativeTextTracks=Z.supportsNativeTextTracks();Z.prototype.featuresNativeVideoTracks=Z.supportsNativeVideoTracks();Z.prototype.featuresNativeAudioTracks=
Z.supportsNativeAudioTracks();var Qh=Z.TEST_VID&&Z.TEST_VID.constructor.prototype.canPlayType,Gg=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Z.patchCanPlayType=function(){4<=Mc&&!Xc&&!Pb&&(Z.TEST_VID.constructor.prototype.canPlayType=function(a){return a&&Gg.test(a)?"maybe":Qh.call(this,a)})};Z.unpatchCanPlayType=function(){var a=Z.TEST_VID.constructor.prototype.canPlayType;Z.TEST_VID.constructor.prototype.canPlayType=Qh;return a};Z.patchCanPlayType();Z.disposeMediaElement=function(a){if(a){for(a.parentNode&&
a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src");if("function"===typeof a.load)try{a.load()}catch(Hc){}}};Z.resetMediaElement=function(a){if(a){for(var b=a.querySelectorAll("source"),c=b.length;c--;)a.removeChild(b[c]);a.removeAttribute("src");if("function"===typeof a.load)try{a.load()}catch(ta){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach(function(a){Z.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}});
["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){Z.prototype["set"+ra(a)]=function(b){(this.el_[a]=b)?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}});"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate played networkState readyState videoWidth videoHeight".split(" ").forEach(function(a){Z.prototype[a]=function(){return this.el_[a]}});"volume src poster preload playbackRate defaultPlaybackRate".split(" ").forEach(function(a){Z.prototype["set"+
ra(a)]=function(b){this.el_[a]=b}});["pause","load","play"].forEach(function(a){Z.prototype[a]=function(){return this.el_[a]()}});Ja.withSourceHandlers(Z);Z.nativeSourceHandler={};Z.nativeSourceHandler.canPlayType=function(a){try{return Z.TEST_VID.canPlayType(a)}catch(Hc){return""}};Z.nativeSourceHandler.canHandleSource=function(a,b){return a.type?Z.nativeSourceHandler.canPlayType(a.type):a.src?(a=Pc(a.src),Z.nativeSourceHandler.canPlayType("video/"+a)):""};Z.nativeSourceHandler.handleSource=function(a,
b,c){b.setSrc(a.src)};Z.nativeSourceHandler.dispose=function(){};Z.registerSourceHandler(Z.nativeSourceHandler);Ja.registerTech("Html5",Z);var Hg=Sc(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),id=
"progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange".split(" "),Ig={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},db=function(a){function b(c,e,d){T(this,b);c.id=c.id||e.id||"vjs_video_"+tb++;e=g(b.getTagSettings(c),e);e.initChildren=!1;e.createEl=!1;e.evented=!1;e.reportTouchActivity=!1;if(!e.language)if("function"===typeof c.closest){var f=c.closest("[lang]");f&&f.getAttribute&&(e.language=f.getAttribute("lang"))}else for(f=
c;f&&1===f.nodeType;){if(G(f).hasOwnProperty("lang")){e.language=f.getAttribute("lang");break}f=f.parentNode}d=V(this,a.call(this,null,e,d));d.isPosterFromTech_=!1;d.queuedCallbacks_=[];d.isReady_=!1;d.hasStarted_=!1;d.userActive_=!1;if(!d.options_||!d.options_.techOrder||!d.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");d.tag=c;d.tagAttributes=c&&G(c);d.language(d.options_.language);
if(e.languages){var h={};Object.getOwnPropertyNames(e.languages).forEach(function(a){h[a.toLowerCase()]=e.languages[a]});d.languages_=h}else d.languages_=b.prototype.options_.languages;d.cache_={};d.poster_=e.poster||"";d.controls_=!!e.controls;d.cache_.lastVolume=1;c.controls=!1;c.removeAttribute("controls");d.scrubbing_=!1;d.el_=d.createEl();d.cache_.lastPlaybackRate=d.defaultPlaybackRate();La(d,{eventBusKey:"el_"});f=wa(d.options_);if(e.plugins){var l=e.plugins;Object.keys(l).forEach(function(a){if("function"===
typeof this[a])this[a](l[a]);else throw Error('plugin "'+a+'" does not exist');},d)}d.options_.playerOptions=f;d.middleware_=[];d.initChildren();d.isAudio("audio"===c.nodeName.toLowerCase());d.controls()?d.addClass("vjs-controls-enabled"):d.addClass("vjs-controls-disabled");d.el_.setAttribute("role","region");d.isAudio()?d.el_.setAttribute("aria-label",d.localize("Audio Player")):d.el_.setAttribute("aria-label",d.localize("Video Player"));d.isAudio()&&d.addClass("vjs-audio");d.flexNotSupported_()&&
d.addClass("vjs-no-flex");mc||d.addClass("vjs-workinghover");b.players[d.id_]=d;d.addClass("vjs-v7");d.userActive(!0);d.reportUserActivity();d.one("play",d.listenForUserActivity_);d.on("fullscreenchange",d.handleFullscreenChange_);d.on("stageclick",d.handleStageClick_);d.changingSrc_=!1;d.playWaitingForReady_=!1;d.playOnLoadstart_=null;return d}W(b,a);b.prototype.dispose=function(){this.trigger("dispose");this.off("dispose");this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),
this.styleEl_=null);b.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);Nc[this.id()]=null;a.prototype.dispose.call(this)};b.prototype.createEl=function(){var b=this.tag,c=void 0,e=this.playerElIngest_=b.parentNode&&b.parentNode.hasAttribute&&b.parentNode.hasAttribute("data-vjs-player"),
d="video-js"===this.tag.tagName.toLowerCase();e?c=this.el_=b.parentNode:d||(c=this.el_=a.prototype.createEl.call(this,"div"));var f=G(b);if(d){c=this.el_=b;for(b=this.tag=Y.createElement("video");c.children.length;)b.appendChild(c.firstChild);t(c,"video-js")||q(c,"video-js");c.appendChild(b);e=this.playerElIngest_=c;Object.keys(c).forEach(function(a){b[a]=c[a]})}b.setAttribute("tabindex","-1");wd&&b.setAttribute("role","application");b.removeAttribute("width");b.removeAttribute("height");Object.getOwnPropertyNames(f).forEach(function(a){d&&
"class"===a||c.setAttribute(a,f[a]);d&&b.setAttribute(a,f[a])});b.playerId=b.id;b.id+="_html5_api";b.className="vjs-tech";b.player=c.player=this;this.addClass("vjs-paused");if(!0!==K.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Uc("vjs-styles-dimensions");var g=Fb(".vjs-styles-defaults"),h=Fb("head");h.insertBefore(this.styleEl_,g?g.nextSibling:h.firstChild)}this.width(this.options_.width);this.height(this.options_.height);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);g=b.getElementsByTagName("a");
for(h=0;h<g.length;h++){var l=g.item(h);q(l,"vjs-hidden");l.setAttribute("hidden","hidden")}b.initNetworkState_=b.networkState;b.parentNode&&!e&&b.parentNode.insertBefore(c,b);v(b,c);this.children_.unshift(b);this.el_.setAttribute("lang",this.language_);return this.el_=c};b.prototype.width=function(a){return this.dimension("width",a)};b.prototype.height=function(a){return this.dimension("height",a)};b.prototype.dimension=function(a,b){var c=a+"_";if(void 0===b)return this[c]||0;if(""===b)this[c]=
void 0,this.updateStyleEl_();else{var e=parseFloat(b);isNaN(e)?qa.error('Improper value "'+b+'" supplied for for '+a):(this[c]=e,this.updateStyleEl_())}};b.prototype.fluid=function(a){if(void 0===a)return!!this.fluid_;this.fluid_=!!a;a?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid");this.updateStyleEl_()};b.prototype.aspectRatio=function(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(a))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");
this.aspectRatio_=a;this.fluid(!0);this.updateStyleEl_()};b.prototype.updateStyleEl_=function(){if(!0===K.VIDEOJS_NO_DYNAMIC_STYLE){var a="number"===typeof this.width_?this.width_:this.options_.width,b="number"===typeof this.height_?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();c&&(0<=a&&(c.width=a),0<=b&&(c.height=b))}else{a=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var e=
a[1]/a[0];a=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/e:this.videoWidth()||300;b=void 0!==this.height_?this.height_:a*e;c=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions";this.addClass(c);uc(this.styleEl_,"\n      ."+c+" {\n        width: "+a+"px;\n        height: "+b+"px;\n      }\n\n      ."+c+".vjs-fluid {\n        padding-top: "+100*e+"%;\n      }\n    ")}};b.prototype.loadTech_=function(a,b){var c=this;this.tech_&&this.unloadTech_();var e=
ra(a),d=a.charAt(0).toLowerCase()+a.slice(1);"Html5"!==e&&this.tag&&(Ja.getTech("Html5").disposeMediaElement(this.tag),this.tag=this.tag.player=null);this.techName_=e;this.isReady_=!1;var f={source:b,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+e+"_api",autoplay:this.options_.autoplay,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),
playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Cb.names.forEach(function(a){a=Cb[a];f[a.getterName]=c[a.privateName]});g(f,this.options_[e]);g(f,this.options_[d]);g(f,this.options_[a.toLowerCase()]);this.tag&&(f.tag=this.tag);b&&b.src===this.cache_.src&&0<this.cache_.currentTime&&(f.startTime=this.cache_.currentTime);a=Ja.getTech(a);if(!a)throw Error("No Tech named '"+e+
"' exists! '"+e+"' should be registered using videojs.registerTech()'");this.tech_=new a(f);this.tech_.ready(ma(this,this.handleTechReady_),!0);je.jsonToTextTracks(this.textTracksJson_||[],this.tech_);id.forEach(function(a){c.on(c.tech_,a,c["handleTech"+ra(a)+"_"])});Object.keys(Ig).forEach(function(a){c.on(c.tech_,a,function(b){if(0===c.tech_.playbackRate()&&c.tech_.seeking())c.queuedCallbacks_.push({callback:c["handleTech"+Ig[a]+"_"].bind(c),event:b});else c["handleTech"+Ig[a]+"_"](b)})});this.on(this.tech_,
"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",
this.handleTechFullscreenChange_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===
e&&this.tag||v(this.tech_.el(),this.el());this.tag&&(this.tag=this.tag.player=null)};b.prototype.unloadTech_=function(){var a=this;Cb.names.forEach(function(b){b=Cb[b];a[b.privateName]=a[b.getterName]()});this.textTracksJson_=je.textTracksToJson(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=!1};b.prototype.tech=function(a){void 0===a&&qa.warn(pe(Hg));return this.tech_};b.prototype.addTechControlsListeners_=
function(){this.removeTechControlsListeners_();this.on(this.tech_,"mousedown",this.handleTechClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};b.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,
"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mousedown",this.handleTechClick_)};b.prototype.handleTechReady_=function(){this.triggerReady();this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_();if((this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused())try{delete this.tag.poster}catch(fc){qa("deleting tag.poster throws in some browsers",
fc)}};b.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))};b.prototype.updateSourceCaches_=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=a,c="";"string"!==typeof b&&(b=a.src,c=a.type);this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];b&&!c&&(c=li(this,
b));this.cache_.source={src:b,type:c};a=this.cache_.sources.filter(function(a){return a.src&&a.src===b});c=[];for(var e=this.$$("source"),d=[],f=0;f<e.length;f++){var g=G(e[f]);c.push(g);g.src&&g.src===b&&d.push(g.src)}d.length&&!a.length?this.cache_.sources=c:a.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=b};b.prototype.handleTechSourceset_=function(a){var b=this;if(!this.changingSrc_&&(this.updateSourceCaches_(a.src),!a.src))this.tech_.one(["sourceset","loadstart"],function jb(a){"sourceset"!==
a.type&&b.updateSourceCaches_(b.techGet_("currentSrc"));b.tech_.off(["sourceset","loadstart"],jb)});this.trigger({src:a.src,type:"sourceset"})};b.prototype.hasStarted=function(a){if(void 0===a)return this.hasStarted_;a!==this.hasStarted_&&((this.hasStarted_=a)?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))};b.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(!0);
this.trigger("play")};b.prototype.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(a){return a.callback(a.event)}),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};b.prototype.handleTechWaiting_=function(){var a=this;this.addClass("vjs-waiting");this.trigger("waiting");this.one("timeupdate",function(){return a.removeClass("vjs-waiting")})};b.prototype.handleTechCanPlay_=
function(){this.removeClass("vjs-waiting");this.trigger("canplay")};b.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};b.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting");this.trigger("playing")};b.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking");this.trigger("seeking")};b.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking");this.trigger("seeked")};b.prototype.handleTechFirstPlay_=
function(){this.options_.starttime&&(qa.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime));this.addClass("vjs-has-started");this.trigger("firstplay")};b.prototype.handleTechPause_=function(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};b.prototype.handleTechEnded_=function(){this.addClass("vjs-ended");this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause();this.trigger("ended")};
b.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))};b.prototype.handleTechClick_=function(a){aa(a)&&this.controls_&&(this.paused()?za(this.play()):this.pause())};b.prototype.handleTechTap_=function(){this.userActive(!this.userActive())};b.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()};b.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()};b.prototype.handleTechTouchEnd_=function(a){a.preventDefault()};
b.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")};b.prototype.handleStageClick_=function(){this.reportUserActivity()};b.prototype.handleTechFullscreenChange_=function(a,b){b&&this.isFullscreen(b.isFullscreen);this.trigger("fullscreenchange")};b.prototype.handleTechError_=function(){var a=this.tech_.error();this.error(a)};b.prototype.handleTechTextData_=function(){var a=null;1<arguments.length&&(a=arguments[1]);this.trigger("textdata",
a)};b.prototype.getCache=function(){return this.cache_};b.prototype.techCall_=function(a,b){this.ready(function(){if(a in ch)return this.tech_[a](this.middleware_.reduce(gc(a),b));if(a in dh)return ye(this.middleware_,this.tech_,a,b);try{if(this.tech_)this.tech_[a](b)}catch(Sa){throw qa(Sa),Sa;}},!0)};b.prototype.techGet_=function(a){if(this.tech_&&this.tech_.isReady_){if(a in bh){var b=this.tech_;return this.middleware_.reduceRight(gc(a),b[a]())}if(a in dh)return ye(this.middleware_,this.tech_,a);
try{return this.tech_[a]()}catch(Sa){if(void 0===this.tech_[a])throw qa("Video.js: "+a+" method not defined for "+this.techName_+" playback technology.",Sa),Sa;if("TypeError"===Sa.name)throw qa("Video.js: "+a+" unavailable on "+this.techName_+" playback technology element.",Sa),this.tech_.isReady_=!1,Sa;qa(Sa);throw Sa;}}};b.prototype.play=function(){var a=this;this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_);if(this.isReady_)if(this.changingSrc_||!this.src()&&!this.currentSrc())this.playOnLoadstart_=
function(){a.playOnLoadstart_=null;za(a.play())},this.one("loadstart",this.playOnLoadstart_);else return this.techGet_("play");else this.playWaitingForReady_||(this.playWaitingForReady_=!0,this.ready(function(){a.playWaitingForReady_=!1;za(a.play())}))};b.prototype.pause=function(){this.techCall_("pause")};b.prototype.paused=function(){return!1===this.techGet_("paused")?!1:!0};b.prototype.played=function(){return this.techGet_("played")||xa(0,0)};b.prototype.scrubbing=function(a){if("undefined"===
typeof a)return this.scrubbing_;this.scrubbing_=!!a;a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")};b.prototype.currentTime=function(a){if("undefined"!==typeof a)0>a&&(a=0),this.techCall_("setCurrentTime",a);else return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime};b.prototype.duration=function(a){if(void 0===a)return void 0!==this.cache_.duration?this.cache_.duration:NaN;a=parseFloat(a);0>a&&(a=Infinity);a!==this.cache_.duration&&(this.cache_.duration=
a,Infinity===a?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))};b.prototype.remainingTime=function(){return this.duration()-this.currentTime()};b.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())};b.prototype.buffered=function(){var a=this.techGet_("buffered");a&&a.length||(a=xa(0,0));return a};b.prototype.bufferedPercent=function(){return na(this.buffered(),this.duration())};b.prototype.bufferedEnd=function(){var a=
this.buffered(),b=this.duration();a=a.end(a.length-1);a>b&&(a=b);return a};b.prototype.volume=function(a){if(void 0!==a)a=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=a,this.techCall_("setVolume",a),0<a&&this.lastVolume_(a);else return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a};b.prototype.muted=function(a){if(void 0!==a)this.techCall_("setMuted",a);else return this.techGet_("muted")||!1};b.prototype.defaultMuted=function(a){return void 0!==a?this.techCall_("setDefaultMuted",
a):this.techGet_("defaultMuted")||!1};b.prototype.lastVolume_=function(a){if(void 0!==a&&0!==a)this.cache_.lastVolume=a;else return this.cache_.lastVolume};b.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1};b.prototype.isFullscreen=function(a){if(void 0!==a)this.isFullscreen_=!!a;else return!!this.isFullscreen_};b.prototype.requestFullscreen=function(){this.isFullscreen(!0);ub.requestFullscreen?(ja(Y,ub.fullscreenchange,ma(this,function ta(a){this.isFullscreen(Y[ub.fullscreenElement]);
!1===this.isFullscreen()&&ca(Y,ub.fullscreenchange,ta);this.trigger("fullscreenchange")})),this.el_[ub.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))};b.prototype.exitFullscreen=function(){this.isFullscreen(!1);if(ub.requestFullscreen)Y[ub.exitFullscreen]();else this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))};b.prototype.enterFullWindow=
function(){this.isFullWindow=!0;this.docOrigOverflow=Y.documentElement.style.overflow;ja(Y,"keydown",ma(this,this.fullWindowOnEscKey));Y.documentElement.style.overflow="hidden";q(Y.body,"vjs-full-window");this.trigger("enterFullWindow")};b.prototype.fullWindowOnEscKey=function(a){27===a.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())};b.prototype.exitFullWindow=function(){this.isFullWindow=!1;ca(Y,"keydown",this.fullWindowOnEscKey);Y.documentElement.style.overflow=
this.docOrigOverflow;y(Y.body,"vjs-full-window");this.trigger("exitFullWindow")};b.prototype.canPlayType=function(a){for(var b,c=0,e=this.options_.techOrder;c<e.length;c++){b=e[c];var d=Ja.getTech(b);d||(d=O.getComponent(b));if(!d)qa.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.');else if(d.isSupported()&&(b=d.canPlayType(a)))return b}return""};b.prototype.selectSource=function(a){var b=this,c=this.options_.techOrder.map(function(a){return[a,Ja.getTech(a)]}).filter(function(a){var b=
a[0];if(a=a[1])return a.isSupported();qa.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.');return!1}),e=function(a,b,c){var e=void 0;a.some(function(a){return b.some(function(b){if(e=c(a,b))return!0})});return e},d=void 0;d=function(a){return function(b,c){return a(c,b)}};var f=function(a,c){var e=a[0];if(a[1].canPlaySource(c,b.options_[e.toLowerCase()]))return{source:c,tech:e}};return(d=this.options_.sourceOrder?e(a,c,d(f)):e(c,a,f))||!1};b.prototype.src=function(a){var b=
this;if("undefined"===typeof a)return this.cache_.src||"";var c=mi(a);c.length?(this.changingSrc_=!0,this.cache_.sources=c,this.updateSourceCaches_(c[0]),Kb(this,c[0],function(a,e){b.middleware_=e;b.cache_.sources=c;b.updateSourceCaches_(a);if(b.src_(a)){if(1<c.length)return b.src(c.slice(1));b.changingSrc_=!1;b.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);b.triggerReady()}else Rc(e,b.tech_)})):this.setTimeout(function(){this.error({code:4,
message:this.localize(this.options_.notSupportedMessage)})},0)};b.prototype.src_=function(a){var b=this,c=this.selectSource([a]);if(!c)return!0;if(!sb(c.tech,this.techName_))return this.changingSrc_=!0,this.loadTech_(c.tech,c.source),this.tech_.ready(function(){b.changingSrc_=!1}),!1;this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src);this.changingSrc_=!1},!0);return!1};b.prototype.load=function(){this.techCall_("load")};
b.prototype.reset=function(){this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset")};b.prototype.currentSources=function(){var a=this.currentSource(),b=[];0!==Object.keys(a).length&&b.push(a);return this.cache_.sources||b};b.prototype.currentSource=function(){return this.cache_.source||{}};b.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""};b.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""};b.prototype.preload=
function(a){if(void 0!==a)this.techCall_("setPreload",a),this.options_.preload=a;else return this.techGet_("preload")};b.prototype.autoplay=function(a){if(void 0!==a)this.techCall_("setAutoplay",a),this.options_.autoplay=a;else return this.techGet_("autoplay",a)};b.prototype.playsinline=function(a){return void 0!==a?(this.techCall_("setPlaysinline",a),this.options_.playsinline=a,this):this.techGet_("playsinline")};b.prototype.loop=function(a){if(void 0!==a)this.techCall_("setLoop",a),this.options_.loop=
a;else return this.techGet_("loop")};b.prototype.poster=function(a){if(void 0===a)return this.poster_;a||(a="");a!==this.poster_&&(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))};b.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=!0,this.trigger("posterchange"))}};b.prototype.controls=
function(a){if(void 0===a)return!!this.controls_;a=!!a;this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))};
b.prototype.usingNativeControls=function(a){if(void 0===a)return!!this.usingNativeControls_;a=!!a;this.usingNativeControls_!==a&&((this.usingNativeControls_=a)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))};b.prototype.error=function(a){if(void 0===a)return this.error_||null;null===a?(this.error_=a,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=
new Q(a),this.addClass("vjs-error"),qa.error("(CODE:"+this.error_.code+" "+Q.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"))};b.prototype.reportUserActivity=function(a){this.userActivity_=!0};b.prototype.userActive=function(a){if(void 0===a)return this.userActive_;a=!!a;if(a!==this.userActive_)if(this.userActive_=a)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");else{if(this.tech_)this.tech_.one("mousemove",
function(a){a.stopPropagation();a.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}};b.prototype.listenForUserActivity_=function(){var a=void 0,b=void 0,c=void 0,e=ma(this,this.reportUserActivity);this.on("mousedown",function(){e();this.clearInterval(a);a=this.setInterval(e,250)});this.on("mousemove",function(a){if(a.screenX!==b||a.screenY!==c)b=a.screenX,c=a.screenY,e()});this.on("mouseup",function(b){e();
this.clearInterval(a)});this.on("keydown",e);this.on("keyup",e);var d=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1;this.userActive(!0);this.clearTimeout(d);var a=this.options_.inactivityTimeout;0>=a||(d=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},a))}},250)};b.prototype.playbackRate=function(a){if(void 0!==a)this.techCall_("setPlaybackRate",a);else return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):
1};b.prototype.defaultPlaybackRate=function(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1};b.prototype.isAudio=function(a){if(void 0!==a)this.isAudio_=!!a;else return!!this.isAudio_};b.prototype.addTextTrack=function(a,b,c){if(this.tech_)return this.tech_.addTextTrack(a,b,c)};b.prototype.addRemoteTextTrack=function(a,b){if(this.tech_)return this.tech_.addRemoteTextTrack(a,b)};b.prototype.removeRemoteTextTrack=
function(){var a=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).track;a=void 0===a?arguments[0]:a;if(this.tech_)return this.tech_.removeRemoteTextTrack(a)};b.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")};b.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};b.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};b.prototype.language=function(a){if(void 0===
a)return this.language_;this.language_=String(a).toLowerCase()};b.prototype.languages=function(){return wa(b.prototype.options_.languages,this.languages_)};b.prototype.toJSON=function(){var a=wa(this.options_),b=a.tracks;a.tracks=[];for(var c=0;c<b.length;c++){var e=b[c];e=wa(e);e.player=void 0;a.tracks[c]=e}return a};b.prototype.createModal=function(a,b){var c=this;b=b||{};b.content=a||"";var e=new yb(this,b);this.addChild(e);e.on("dispose",function(){c.removeChild(e)});e.open();return e};b.getTagSettings=
function(a){var b={sources:[],tracks:[]},c=G(a),e=c["data-setup"];t(a,"vjs-fluid")&&(c.fluid=!0);if(null!==e){var d=null;try{var f=JSON.parse(e||"{}",void 0)}catch(Md){d=Md}f=[d,f];e=f[0];f=f[1];e&&qa.error(e);g(c,f)}g(b,c);if(a.hasChildNodes())for(a=a.childNodes,c=0,e=a.length;c<e;c++)f=a[c],d=f.nodeName.toLowerCase(),"source"===d?b.sources.push(G(f)):"track"===d&&b.tracks.push(G(f));return b};b.prototype.flexNotSupported_=function(){var a=Y.createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in
a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)};return b}(O);Cb.names.forEach(function(a){var b=Cb[a];db.prototype[b.getterName]=function(){if(this.tech_)return this.tech_[b.getterName]();this[b.privateName]=this[b.privateName]||new b.ListClass;return this[b.privateName]}});db.players={};var B=K.navigator;db.prototype.options_={techOrder:Ja.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2E3,playbackRates:[],children:"mediaLoader posterImage textTrackDisplay loadingSpinner bigPlayButton controlBar errorDisplay textTrackSettings resizeManager".split(" "),
language:B&&(B.languages&&B.languages[0]||B.userLanguage||B.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."};["ended","seeking","seekable","networkState","readyState"].forEach(function(a){db.prototype[a]=function(){return this.techGet_(a)}});id.forEach(function(a){db.prototype["handleTech"+ra(a)+"_"]=function(){return this.trigger(a)}});O.registerComponent("Player",db);var pc={},ac=function(a){return pc.hasOwnProperty(a)?pc[a]:void 0},xb=function(a,
b,c){c=(c?"before":"")+"pluginsetup";a.trigger(c,b);a.trigger(c+":"+b.name,b)},Ac=function(a,b){var c=function(){xb(this,{name:a,plugin:b,instance:null},!0);var c=b.apply(this,arguments);this.activePlugins_=this.activePlugins_||{};this.activePlugins_[a]=!0;xb(this,{name:a,plugin:b,instance:c});return c};Object.keys(b).forEach(function(a){c[a]=b[a]});return c},hb=function(a,b){b.prototype.name=a;return function(){xb(this,{name:a,plugin:b,instance:null},!0);for(var c=arguments.length,e=Array(c),d=0;d<
c;d++)e[d]=arguments[d];var f=new (Function.prototype.bind.apply(b,[null].concat([this].concat(e))));this[a]=function(){return f};xb(this,f.getEventHash());return f}},Sb=function(){function a(b){T(this,a);if(this.constructor===a)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=b;La(this);delete this.trigger;va(this,this.constructor.defaultState);var c=this.name;b.activePlugins_=b.activePlugins_||{};b.activePlugins_[c]=!0;this.dispose=ma(this,this.dispose);b.on("dispose",
this.dispose)}a.prototype.version=function(){return this.constructor.VERSION};a.prototype.getEventHash=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a.name=this.name;a.plugin=this.constructor;a.instance=this;return a};a.prototype.trigger=function(a){return S(this.eventBusEl_,a,this.getEventHash(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))};a.prototype.handleStateChanged=function(a){};a.prototype.dispose=function(){var a=this.name,b=this.player;this.trigger("dispose");
this.off();b.off("dispose",this.dispose);b.activePlugins_[a]=!1;this.player=this.state=null;b[a]=hb(a,pc[a])};a.isBasic=function(b){b="string"===typeof b?ac(b):b;return"function"===typeof b&&!a.prototype.isPrototypeOf(b.prototype)};a.registerPlugin=function(b,c){if("string"!==typeof b)throw Error('Illegal plugin name, "'+b+'", must be a string, was '+("undefined"===typeof b?"undefined":$a(b))+".");if(pc.hasOwnProperty(b))qa.warn('A plugin named "'+b+'" already exists. You may want to avoid re-registering plugins!');
else if(db.prototype.hasOwnProperty(b))throw Error('Illegal plugin name, "'+b+'", cannot share a name with an existing player method!');if("function"!==typeof c)throw Error('Illegal plugin for "'+b+'", must be a function, was '+("undefined"===typeof c?"undefined":$a(c))+".");pc[b]=c;"plugin"!==b&&(a.isBasic(c)?db.prototype[b]=Ac(b,c):db.prototype[b]=hb(b,c));return c};a.deregisterPlugin=function(a){if("plugin"===a)throw Error("Cannot de-register base plugin.");pc.hasOwnProperty(a)&&(delete pc[a],
delete db.prototype[a])};a.getPlugins=function(){var a=void 0;(0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(pc)).forEach(function(b){var c=ac(b);c&&(a=a||{},a[b]=c)});return a};a.getPluginVersion=function(a){return(a=ac(a))&&a.VERSION||""};return a}();Sb.getPlugin=ac;Sb.BASE_PLUGIN_NAME="plugin";Sb.registerPlugin("plugin",Sb);db.prototype.usingPlugin=function(a){return!!this.activePlugins_&&!0===this.activePlugins_[a]};db.prototype.hasPlugin=function(a){return!!pc.hasOwnProperty(a)};
var Ni=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof b?"undefined":$a(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(a.super_=b)},Rh=function(a){return 0===a.indexOf("#")?a.slice(1):a};J.hooks_={};J.hooks=function(a,b){J.hooks_[a]=J.hooks_[a]||[];b&&(J.hooks_[a]=J.hooks_[a].concat(b));return J.hooks_[a]};J.hook=function(a,b){J.hooks(a,
b)};J.hookOnce=function(a,b){J.hooks(a,[].concat(b).map(function(b){return function Sa(){J.removeHook(a,Sa);return b.apply(void 0,arguments)}}))};J.removeHook=function(a,b){b=J.hooks(a).indexOf(b);if(-1>=b)return!1;J.hooks_[a]=J.hooks_[a].slice();J.hooks_[a].splice(b,1);return!0};if(!0!==K.VIDEOJS_NO_DYNAMIC_STYLE&&l()){var Oe=Fb(".vjs-styles-defaults");if(!Oe){Oe=Uc("vjs-styles-defaults");var Jg=Fb("head");Jg&&Jg.insertBefore(Oe,Jg.firstChild);uc(Oe,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}Ba(1,
J);J.VERSION="7.0.4";J.options=db.prototype.options_;J.getPlayers=function(){return db.players};J.getPlayer=function(a){var b=db.players;if("string"===typeof a){a=Rh(a);var c=b[a];if(c)return c;a=Fb("#"+a)}if(n(a)&&(c=a,a=c.player,c=c.playerId,a||b[c]))return a||b[c]};J.getAllPlayers=function(){return Object.keys(db.players).map(function(a){return db.players[a]}).filter(Boolean)};J.players=db.players;J.getComponent=O.getComponent;J.registerComponent=function(a,b){Ja.isTech(b)&&qa.warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");
O.registerComponent.call(O,a,b)};J.getTech=Ja.getTech;J.registerTech=Ja.registerTech;J.use=function(a,b){Wb[a]=Wb[a]||[];Wb[a].push(b)};Object.defineProperty(J,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(J.middleware,"TERMINATOR",{value:Ab,writeable:!1,enumerable:!0});J.browser=Yc;J.TOUCH_ENABLED=xd;J.extend=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=function(){a.apply(this,arguments)},e={};"object"===("undefined"===typeof b?"undefined":
$a(b))?(b.constructor!==Object.prototype.constructor&&(c=b.constructor),e=b):"function"===typeof b&&(c=b);Ni(c,a);for(var d in e)e.hasOwnProperty(d)&&(c.prototype[d]=e[d]);return c};J.mergeOptions=wa;J.bind=ma;J.registerPlugin=Sb.registerPlugin;J.plugin=function(a,b){qa.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return Sb.registerPlugin(a,b)};J.getPlugins=Sb.getPlugins;J.getPlugin=Sb.getPlugin;J.getPluginVersion=Sb.getPluginVersion;J.addLanguage=function(a,b){var c;
a=(""+a).toLowerCase();J.options.languages=wa(J.options.languages,(c={},c[a]=b,c));return J.options.languages[a]};J.log=qa;J.createTimeRange=J.createTimeRanges=xa;J.formatTime=Wa;J.setFormatTime=function(a){df=a};J.resetFormatTime=function(){df=Zf};J.parseUrl=cf;J.isCrossOrigin=Mb;J.EventTarget=Fa;J.on=ja;J.one=oa;J.off=ca;J.trigger=S;J.xhr=la;J.TextTrack=Xb;J.AudioTrack=we;J.VideoTrack=kh;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach(function(a){J[a]=
function(){qa.warn("videojs."+a+"() is deprecated; use videojs.dom."+a+"() instead");return Lb[a].apply(null,arguments)}});J.computedStyle=d;J.dom=Lb;J.url=ti;var Pe=k(function(a,b){(function(b){var c=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,e=/^([^\/;?#]*)(.*)$/,d=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,g={buildAbsoluteURL:function(a,b,c){c=c||{};a=a.trim();b=b.trim();if(!b){if(!c.alwaysNormalize)return a;c=g.parseURL(a);if(!c)throw Error("Error trying to parse base URL.");
c.path=g.normalizePath(c.path);return g.buildURLFromParts(c)}var d=g.parseURL(b);if(!d)throw Error("Error trying to parse relative URL.");if(d.scheme){if(!c.alwaysNormalize)return b;d.path=g.normalizePath(d.path);return g.buildURLFromParts(d)}b=g.parseURL(a);if(!b)throw Error("Error trying to parse base URL.");!b.netLoc&&b.path&&"/"!==b.path[0]&&(a=e.exec(b.path),b.netLoc=a[1],b.path=a[2]);b.netLoc&&!b.path&&(b.path="/");a={scheme:b.scheme,netLoc:d.netLoc,path:null,params:d.params,query:d.query,fragment:d.fragment};
d.netLoc||(a.netLoc=b.netLoc,"/"!==d.path[0]&&(d.path?(b=b.path,b=b.substring(0,b.lastIndexOf("/")+1)+d.path,a.path=g.normalizePath(b)):(a.path=b.path,d.params||(a.params=b.params,d.query||(a.query=b.query)))));null===a.path&&(a.path=c.alwaysNormalize?g.normalizePath(d.path):d.path);return g.buildURLFromParts(a)},parseURL:function(a){return(a=c.exec(a))?{scheme:a[1]||"",netLoc:a[2]||"",path:a[3]||"",params:a[4]||"",query:a[5]||"",fragment:a[6]||""}:null},normalizePath:function(a){for(a=a.split("").reverse().join("").replace(d,
"");a.length!==(a=a.replace(f,"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};a.exports=g})(bb)}),ea=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},sh=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a},Kg=function(a,b){if("function"!==typeof b&&null!==
b)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof b?"undefined":$a(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},ae=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==("undefined"===typeof b?"undefined":$a(b))&&"function"!==typeof b?a:b},
Ee=function(){function a(){ea(this,a);this.listeners={}}a.prototype.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)};a.prototype.off=function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b};a.prototype.trigger=function(a){var b=this.listeners[a],c;if(b)if(2===arguments.length){var e=b.length;for(c=0;c<e;++c)b[c].call(this,arguments[1])}else{var d=Array.prototype.slice.call(arguments,1);e=b.length;for(c=
0;c<e;++c)b[c].apply(this,d)}};a.prototype.dispose=function(){this.listeners={}};a.prototype.pipe=function(a){this.on("data",function(b){a.push(b)})};return a}(),eg=function(a){function b(){ea(this,b);var c=ae(this,a.call(this));c.buffer="";return c}Kg(b,a);b.prototype.push=function(a){this.buffer+=a;for(a=this.buffer.indexOf("\n");-1<a;a=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)};return b}(Ee),Qe=function(a){a=a.split(/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/);
for(var b={},c=a.length,e;c--;)""!==a[c]&&(e=/([^=]*)=(.*)/.exec(a[c]).slice(1),e[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),b[e[0]]=e[1]);return b},th=function(a){function b(){ea(this,b);var c=ae(this,a.call(this));c.customParsers=[];return c}Kg(b,a);b.prototype.push=function(a){var b;a=a.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"");if(0!==a.length)if("#"!==a[0])this.trigger("data",{type:"uri",uri:a});else{for(b=0;b<this.customParsers.length;b++)if(this.customParsers[b].call(this,
a))return;if(0!==a.indexOf("#EXT"))this.trigger("data",{type:"comment",text:a.slice(1)});else if(a=a.replace("\r",""),b=/^#EXTM3U/.exec(a))this.trigger("data",{type:"tag",tagType:"m3u"});else if(b=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(a))a={type:"tag",tagType:"inf"},b[1]&&(a.duration=parseFloat(b[1])),b[2]&&(a.title=b[2]),this.trigger("data",a);else if(b=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(a))a={type:"tag",tagType:"targetduration"},b[1]&&(a.duration=parseInt(b[1],10)),this.trigger("data",a);
else if(b=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(a))a={type:"tag",tagType:"totalduration"},b[1]&&(a.duration=parseInt(b[1],10)),this.trigger("data",a);else if(b=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(a))a={type:"tag",tagType:"version"},b[1]&&(a.version=parseInt(b[1],10)),this.trigger("data",a);else if(b=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))a={type:"tag",tagType:"media-sequence"},b[1]&&(a.number=parseInt(b[1],10)),this.trigger("data",a);else if(b=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))a=
{type:"tag",tagType:"discontinuity-sequence"},b[1]&&(a.number=parseInt(b[1],10)),this.trigger("data",a);else if(b=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(a))a={type:"tag",tagType:"playlist-type"},b[1]&&(a.playlistType=b[1]),this.trigger("data",a);else if(b=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(a))a={type:"tag",tagType:"byterange"},b[1]&&(a.length=parseInt(b[1],10)),b[2]&&(a.offset=parseInt(b[2],10)),this.trigger("data",a);else if(b=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(a))a={type:"tag",tagType:"allow-cache"},
b[1]&&(a.allowed=!/NO/.test(b[1])),this.trigger("data",a);else if(b=/^#EXT-X-MAP:?(.*)$/.exec(a)){a={type:"tag",tagType:"map"};if(b[1]&&(b=Qe(b[1]),b.URI&&(a.uri=b.URI),b.BYTERANGE)){var c=b.BYTERANGE.split("@");b=c[0];c=c[1];a.byterange={};b&&(a.byterange.length=parseInt(b,10));c&&(a.byterange.offset=parseInt(c,10))}this.trigger("data",a)}else(b=/^#EXT-X-STREAM-INF:?(.*)$/.exec(a))?(a={type:"tag",tagType:"stream-inf"},b[1]&&(a.attributes=Qe(b[1]),a.attributes.RESOLUTION&&(b=a.attributes.RESOLUTION.split("x"),
c={},b[0]&&(c.width=parseInt(b[0],10)),b[1]&&(c.height=parseInt(b[1],10)),a.attributes.RESOLUTION=c),a.attributes.BANDWIDTH&&(a.attributes.BANDWIDTH=parseInt(a.attributes.BANDWIDTH,10)),a.attributes["PROGRAM-ID"]&&(a.attributes["PROGRAM-ID"]=parseInt(a.attributes["PROGRAM-ID"],10))),this.trigger("data",a)):(b=/^#EXT-X-MEDIA:?(.*)$/.exec(a))?(a={type:"tag",tagType:"media"},b[1]&&(a.attributes=Qe(b[1])),this.trigger("data",a)):(b=/^#EXT-X-ENDLIST/.exec(a))?this.trigger("data",{type:"tag",tagType:"endlist"}):
(b=/^#EXT-X-DISCONTINUITY/.exec(a))?this.trigger("data",{type:"tag",tagType:"discontinuity"}):(b=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(a))?(a={type:"tag",tagType:"program-date-time"},b[1]&&(a.dateTimeString=b[1],a.dateTimeObject=new Date(b[1])),this.trigger("data",a)):(b=/^#EXT-X-KEY:?(.*)$/.exec(a))?(a={type:"tag",tagType:"key"},b[1]&&(a.attributes=Qe(b[1]),a.attributes.IV&&("0x"===a.attributes.IV.substring(0,2).toLowerCase()&&(a.attributes.IV=a.attributes.IV.substring(2)),a.attributes.IV=a.attributes.IV.match(/.{8}/g),
a.attributes.IV[0]=parseInt(a.attributes.IV[0],16),a.attributes.IV[1]=parseInt(a.attributes.IV[1],16),a.attributes.IV[2]=parseInt(a.attributes.IV[2],16),a.attributes.IV[3]=parseInt(a.attributes.IV[3],16),a.attributes.IV=new Uint32Array(a.attributes.IV))),this.trigger("data",a)):(b=/^#EXT-X-START:?(.*)$/.exec(a))?(a={type:"tag",tagType:"start"},b[1]&&(a.attributes=Qe(b[1]),a.attributes["TIME-OFFSET"]=parseFloat(a.attributes["TIME-OFFSET"]),a.attributes.PRECISE=/YES/.test(a.attributes.PRECISE)),this.trigger("data",
a)):(b=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(a))?(a={type:"tag",tagType:"cue-out-cont"},a.data=b[1]?b[1]:"",this.trigger("data",a)):(b=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(a))?(a={type:"tag",tagType:"cue-out"},a.data=b[1]?b[1]:"",this.trigger("data",a)):(b=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a))?(a={type:"tag",tagType:"cue-in"},a.data=b[1]?b[1]:"",this.trigger("data",a)):this.trigger("data",{type:"tag",data:a.slice(4)})}};b.prototype.addParser=function(a){var b=this,c=a.expression,e=a.customType,d=a.dataParser,
f=a.segment;"function"!==typeof d&&(d=function(a){return a});this.customParsers.push(function(a){if(c.exec(a))return b.trigger("data",{type:"custom",data:d(a),customType:e,segment:f}),!0})};return b}(Ee),ua=function(a){function b(){ea(this,b);var c=ae(this,a.call(this));c.lineStream=new eg;c.parseStream=new th;c.lineStream.pipe(c.parseStream);var e=[],d={},f=void 0,g=void 0,h=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},k=0;c.manifest={allowCache:!0,discontinuityStarts:[],
segments:[]};c.parseStream.on("data",function(a){var b=void 0,m=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=a.allowed;"allowed"in a||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var b={};"length"in a&&(d.byterange=b,b.length=a.length,"offset"in a||(this.trigger("info",{message:"defaulting offset to zero"}),a.offset=0));"offset"in a&&(d.byterange=b,b.offset=a.offset)},endlist:function(){this.manifest.endList=
!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));0<a.duration&&(d.duration=a.duration);0===a.duration&&(d.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=e},key:function(){a.attributes?
"NONE"===a.attributes.METHOD?g=null:a.attributes.URI?(a.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),g={method:a.attributes.METHOD||"AES-128",uri:a.attributes.URI},"undefined"!==typeof a.attributes.IV&&(g.iv=a.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(a.number)?this.manifest.mediaSequence=a.number:
this.trigger("warn",{message:"ignoring invalid media sequence: "+a.number})},"discontinuity-sequence":function(){isFinite(a.number)?k=this.manifest.discontinuitySequence=a.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+a.number})},"playlist-type":function(){/VOD|EVENT/.test(a.playlistType)?this.manifest.playlistType=a.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+a.playlist})},map:function(){f={};a.uri&&(f.uri=a.uri);a.byterange&&(f.byterange=
a.byterange)},"stream-inf":function(){this.manifest.playlists=e;this.manifest.mediaGroups=this.manifest.mediaGroups||l;a.attributes?(d.attributes||(d.attributes={}),sh(d.attributes,a.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||l;if(a.attributes&&a.attributes.TYPE&&a.attributes["GROUP-ID"]&&a.attributes.NAME){var c=this.manifest.mediaGroups[a.attributes.TYPE];c[a.attributes["GROUP-ID"]]=c[a.attributes["GROUP-ID"]]||
{};b=c[a.attributes["GROUP-ID"]];m={"default":/yes/i.test(a.attributes.DEFAULT)};m.autoselect=m["default"]?!0:/yes/i.test(a.attributes.AUTOSELECT);a.attributes.LANGUAGE&&(m.language=a.attributes.LANGUAGE);a.attributes.URI&&(m.uri=a.attributes.URI);a.attributes["INSTREAM-ID"]&&(m.instreamId=a.attributes["INSTREAM-ID"]);a.attributes.CHARACTERISTICS&&(m.characteristics=a.attributes.CHARACTERISTICS);a.attributes.FORCED&&(m.forced=/yes/i.test(a.attributes.FORCED));b[a.attributes.NAME]=m}else this.trigger("warn",
{message:"ignoring incomplete or missing media group"})},discontinuity:function(){k+=1;d.discontinuity=!0;this.manifest.discontinuityStarts.push(e.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=a.dateTimeString,this.manifest.dateTimeObject=a.dateTimeObject);d.dateTimeString=a.dateTimeString;d.dateTimeObject=a.dateTimeObject},targetduration:function(){!isFinite(a.duration)||0>a.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+
a.duration}):this.manifest.targetDuration=a.duration},totalduration:function(){!isFinite(a.duration)||0>a.duration?this.trigger("warn",{message:"ignoring invalid total duration: "+a.duration}):this.manifest.totalDuration=a.duration},start:function(){!a.attributes||isNaN(a.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):this.manifest.start={timeOffset:a.attributes["TIME-OFFSET"],precise:a.attributes.PRECISE}},"cue-out":function(){d.cueOut=
a.data},"cue-out-cont":function(){d.cueOutCont=a.data},"cue-in":function(){d.cueIn=a.data}}[a.tagType]||h).call(c)},uri:function(){d.uri=a.uri;e.push(d);!this.manifest.targetDuration||"duration"in d||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),d.duration=this.manifest.targetDuration);g&&(d.key=g);d.timeline=k;f&&(d.map=f);d={}},comment:function(){},custom:function(){a.segment?(d.custom=d.custom||{},d.custom[a.customType]=a.data):(this.manifest.custom=this.manifest.custom||
{},this.manifest.custom[a.customType]=a.data)}})[a.type].call(c)});return c}Kg(b,a);b.prototype.push=function(a){this.lineStream.push(a)};b.prototype.end=function(){this.lineStream.push("\n")};b.prototype.addParser=function(a){this.parseStream.addParser(a)};return b}(Ee),Lg=function(a){return a.reduce(function(a,b){var c=b.attributes.role&&b.attributes.role.value||"main",e=b.attributes.lang||"",d="main";e&&(d=b.attributes.lang+" ("+c+")");if(a[d]&&a[d].playlists[0].attributes.BANDWIDTH>b.attributes.bandwidth)return a;
var f,g=b.attributes;b=b.segments;b={attributes:(f={NAME:g.id,BANDWIDTH:g.bandwidth,CODECS:g.codecs},f["PROGRAM-ID"]=1,f),uri:"",endList:"static"===(g.type||"static"),timeline:g.periodIndex,resolvedUri:"",targetDuration:g.duration,segments:b,mediaSequence:b.length?b[0].number:1};g.contentProtection&&(b.contentProtection=g.contentProtection);a[d]={language:e,autoselect:!0,"default":"main"===c,playlists:[b],uri:""};return a},{})},zc=function(a){return a.reduce(function(a,b){var c=b.attributes.lang||
"text";if(a[c])return a;var e;var d=b.attributes;b=b.segments;"undefined"===typeof b&&(b=[{uri:d.baseUrl,timeline:d.periodIndex,resolvedUri:d.baseUrl||"",duration:d.sourceDuration,number:0}],d.duration=d.sourceDuration);d={attributes:(e={NAME:d.id,BANDWIDTH:d.bandwidth},e["PROGRAM-ID"]=1,e),uri:"",endList:"static"===(d.type||"static"),timeline:d.periodIndex,resolvedUri:d.baseUrl||"",targetDuration:d.duration,segments:b,mediaSequence:b.length?b[0].number:1};a[c]={language:c,"default":!1,autoselect:!1,
playlists:[d],uri:""};return a},{})},Sh=function(a){var b,c=a.attributes;a=a.segments;a={attributes:(b={NAME:c.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:c.width,height:c.height},CODECS:c.codecs,BANDWIDTH:c.bandwidth},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===(c.type||"static"),timeline:c.periodIndex,resolvedUri:"",targetDuration:c.duration,segments:a,mediaSequence:a.length?a[0].number:1};c.contentProtection&&(a.contentProtection=c.contentProtection);return a},fg=function(a){var b;if(!a.length)return{};
var c=a[0].attributes,e=c.sourceDuration;c=c.minimumUpdatePeriod;var d=void 0===c?0:c,f=a.filter(function(a){a=a.attributes;return"video/mp4"===a.mimeType||"video"===a.contentType}).map(Sh);c=a.filter(function(a){a=a.attributes;return"audio/mp4"===a.mimeType||"audio"===a.contentType});a=a.filter(function(a){a=a.attributes;return"text/vtt"===a.mimeType||"text"===a.contentType});e={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(b={AUDIO:{},VIDEO:{}},b["CLOSED-CAPTIONS"]={},
b.SUBTITLES={},b),uri:"",duration:e,playlists:f,minimumUpdatePeriod:1E3*d};c.length&&(e.mediaGroups.AUDIO.audio=Lg(c));a.length&&(e.mediaGroups.SUBTITLES.subs=zc(a));return e},Fe="function"===typeof Symbol&&"symbol"===$a(Symbol.iterator)?function(a){return"undefined"===typeof a?"undefined":$a(a)}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":"undefined"===typeof a?"undefined":$a(a)},vh=function(a){return!!a&&"object"===("undefined"===typeof a?
"undefined":Fe(a))},mb=function Hc(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(a,b){Object.keys(b).forEach(function(c){Array.isArray(a[c])&&Array.isArray(b[c])?a[c]=a[c].concat(b[c]):vh(a[c])&&vh(b[c])?a[c]=Hc(a[c],b[c]):a[c]=b[c]});return a},{})},ia=function(a,b){if(/^[a-z]+:/i.test(b))return b;/\/\//i.test(a)||(a=Pe.buildAbsoluteURL(K.location.href,a));return Pe.buildAbsoluteURL(a,b)},fb=function(a){var b=a.baseUrl,c=a.source;c=void 0===c?"":c;
a=a.range;a=void 0===a?"":a;b={uri:c,resolvedUri:ia((void 0===b?"":b)||"",c)};a&&(a=a.split("-"),c=parseInt(a[0],10),a=parseInt(a[1],10),b.byterange={length:a-c,offset:c});return b},Th=function(a,b){var c=a.type;c=void 0===c?"static":c;var e=a.minimumUpdatePeriod;e=void 0===e?0:e;var d=a.media;d=void 0===d?"":d;var f=a.sourceDuration,g=a.timescale;g=void 0===g?1:g;var h=a.startNumber;h=void 0===h?1:h;for(var l=a.periodIndex,k=[],m=-1,n=0;n<b.length;n++){var q=b[n],p=q.d,t=q.r||0;q=q.t||0;0>m&&(m=
q);q&&q>m&&(m=q);if(0>t)if(t=n+1,t===b.length)if("dynamic"===c&&0<e&&0<d.indexOf("$Number$")){t=a.timescale;q=a.start;var r=a.minimumUpdatePeriod;t=Math.ceil((((a.NOW+a.clientOffset)/1E3+(void 0===r?0:r)-(a.availabilityStartTime+(void 0===q?0:q)))*(void 0===t?1:t)-m)/p)}else t=(f*g-m)/p;else t=(b[t].t-m)/p;else t+=1;t=h+k.length+t;for(q=h+k.length;q<t;)k.push({number:q,duration:p/g,time:m,timeline:l}),m+=p,q++}return k},Ga=function(a){return a.reduce(function(a,b){return a.concat(b)},[])},ha=function(a){if(!a.length)return[];
for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},Ha={"static":function(a){var b=a.timescale;return{start:0,end:Math.ceil(a.sourceDuration/(a.duration/(void 0===b?1:b)))}},dynamic:function(a){var b=a.timescale;b=void 0===b?1:b;var c=a.duration,e=a.start,d=a.minimumUpdatePeriod,f=a.timeShiftBufferDepth,g=(a.NOW+a.clientOffset)/1E3;a=a.availabilityStartTime+(void 0===e?0:e);return{start:Math.max(0,Math.floor((g-a-(void 0===f?Infinity:f))*b/c)),end:Math.min(Math.ceil((g+(void 0===d?0:d)-a)*b/c),
Math.floor((g-a)*b/c))}}},Hf=function(a){return function(b,c){var e=a.duration,d=a.timescale,f=a.startNumber;return{number:(void 0===f?1:f)+b,duration:e/(void 0===d?1:d),timeline:a.periodIndex,time:c*e}}},If=function(a){var b=a.type,c=void 0===b?"static":b;b=a.duration;var e=a.timescale;e=void 0===e?1:e;var d=a.sourceDuration,f=Ha[c](a),g=f.end,h=[];for(f=f.start;f<g;f++)h.push(f);a=h.map(Hf(a));"static"===c&&(c=a.length-1,a[c].duration=d-b/e*c);return a},Re=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Uh=function(a){return function(b,
c,e,d){if("$$"===b)return"$";if("undefined"===typeof a[c])return b;b=""+a[c];if("RepresentationID"===c)return b;d=e?parseInt(d,10):1;return b.length>=d?b:""+Array(d-b.length+1).join("0")+b}},Ng=function(a,b){return a.duration||b?a.duration?If(a):Th(a,b):[{number:a.startNumber||1,duration:a.sourceDuration,time:0,timeline:a.periodIndex}]},Og=function(a,b){var c={RepresentationID:a.id,Bandwidth:a.bandwidth||0},e=a.initialization;e=void 0===e?{sourceURL:"",range:""}:e;var d=fb({baseUrl:a.baseUrl,source:e.sourceURL.replace(Re,
Uh(c)),range:e.range});return Ng(a,b).map(function(b){c.Number=b.number;c.Time=b.time;var e=(a.media||"").replace(Re,Uh(c));return{uri:e,timeline:b.timeline,duration:b.duration,resolvedUri:ia(a.baseUrl||"",e),map:d,number:b.number}})},Jf=function(a,b){var c=a.duration,e=a.segmentUrls;e=void 0===e?[]:e;if(!c&&!b||c&&b)throw Error("SEGMENT_TIME_UNSPECIFIED");var d=e.map(function(b){var c=a.baseUrl,e=a.initialization;e=void 0===e?{}:e;e=fb({baseUrl:c,source:e.sourceURL,range:e.range});b=fb({baseUrl:c,
source:b.media,range:b.mediaRange});b.map=e;return b});e=void 0;c&&(e=If(a));b&&(e=Th(a,b));return e.map(function(a,b){if(d[b])return b=d[b],b.timeline=a.timeline,b.duration=a.duration,b.number=a.number,b}).filter(function(a){return a})},wh=function(a){var b=a.baseUrl,c=a.initialization,e=void 0===c?{}:c;c=a.sourceDuration;var d=a.timescale;d=void 0===d?1:d;var f=a.indexRange,g=void 0===f?"":f;f=a.duration;if(!b)throw Error("NO_BASE_URL");e=fb({baseUrl:b,source:e.sourceURL,range:e.range});b=fb({baseUrl:b,
source:b,range:g});b.map=e;f?(a=If(a),a.length&&(b.duration=a[0].duration,b.timeline=a[0].timeline)):c&&(b.duration=c/d,b.timeline=0);b.number=0;return[b]},xh=function(a){var b=a.attributes,c=a.segmentInfo,e=a=void 0;c.template?(e=Og,a=mb(b,c.template)):c.base?(e=wh,a=mb(b,c.base)):c.list&&(e=Jf,a=mb(b,c.list));if(!e)return{attributes:b};b=e(a,c.timeline);a.duration?(c=a,e=c.timescale,a.duration=c.duration/(void 0===e?1:e)):a.duration=b.length?b.reduce(function(a,b){return Math.max(a,Math.ceil(b.duration))},
0):0;return{attributes:a,segments:b}},ab=function(a,b){return ha(a.childNodes).filter(function(a){return a.tagName===b})},Id=function(a){a=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(a);if(!a)return 0;a=a.slice(1);var b=a[1],c=a[2],e=a[3],d=a[4],f=a[5];return 31536E3*parseFloat(a[0]||0)+2592E3*parseFloat(b||0)+86400*parseFloat(c||0)+3600*parseFloat(e||0)+60*parseFloat(d||0)+parseFloat(f||0)},Se={mediaPresentationDuration:function(a){return Id(a)},availabilityStartTime:function(a){/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a)&&
(a+="Z");return Date.parse(a)/1E3},minimumUpdatePeriod:function(a){return Id(a)},timeShiftBufferDepth:function(a){return Id(a)},start:function(a){return Id(a)},width:function(a){return parseInt(a,10)},height:function(a){return parseInt(a,10)},bandwidth:function(a){return parseInt(a,10)},startNumber:function(a){return parseInt(a,10)},timescale:function(a){return parseInt(a,10)},duration:function(a){var b=parseInt(a,10);return isNaN(b)?Id(a):b},d:function(a){return parseInt(a,10)},t:function(a){return parseInt(a,
10)},r:function(a){return parseInt(a,10)},DEFAULT:function(a){return a}},cb=function(a){return a&&a.attributes?ha(a.attributes).reduce(function(a,b){a[b.name]=(Se[b.name]||Se.DEFAULT)(b.value);return a},{}):{}},qf={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},yd=function(a,
b){return b.length?Ga(a.map(function(a){return b.map(function(b){return ia(a,b.textContent.trim())})})):a},be=function(a){var b=ab(a,"SegmentTemplate")[0],c=ab(a,"SegmentList")[0],e=c&&ab(c,"SegmentURL").map(function(a){return mb({tag:"SegmentURL"},cb(a))});a=ab(a,"SegmentBase")[0];var d=c||b;d=d&&ab(d,"SegmentTimeline")[0];var f=c||a||b;f=f&&ab(f,"Initialization")[0];(b=b&&cb(b))&&f?b.initialization=f&&cb(f):b&&b.initialization&&(b.initialization={sourceURL:b.initialization});var g={template:b,timeline:d&&
ab(d,"S").map(function(a){return cb(a)}),list:c&&mb(cb(c),{segmentUrls:e,initialization:cb(f)}),base:a&&mb(cb(a),{initialization:cb(f)})};Object.keys(g).forEach(function(a){g[a]||delete g[a]});return g},pf=function(a,b,c){return function(e){var d=ab(e,"BaseURL");d=yd(b,d);var f=mb(a,cb(e)),g=be(e);return d.map(function(a){return{segmentInfo:mb(c,g),attributes:mb(f,{baseUrl:a})}})}},Bc=function(a){return a.reduce(function(a,b){var c=cb(b),e=qf[c.schemeIdUri];if(e&&(a[e]={attributes:c},b=ab(b,"cenc:pssh")[0])){if(c=
b=b.textContent.trim()){b=K.atob(b);c=new Uint8Array(b.length);for(var d=0;d<b.length;d++)c[d]=b.charCodeAt(d)}a[e].pssh=c}return a},{})},yh=function(a,b,c){return function(e){var d=cb(e),f=yd(b,ab(e,"BaseURL")),g=ab(e,"Role")[0];g={role:cb(g)};d=mb(a,d,g);g=Bc(ab(e,"ContentProtection"));Object.keys(g).length&&(d=mb(d,{contentProtection:g}));g=be(e);e=ab(e,"Representation");g=mb(c,g);return Ga(e.map(pf(d,f,g)))}},Pi=function(a,b){return function(c,e){var d=yd(b,ab(c,"BaseURL")),f=cb(c);e=mb(a,f,{periodIndex:e});
f=ab(c,"AdaptationSet");c=be(c);return Ga(f.map(yh(e,d,c)))}},zh=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=b.manifestUri;c=void 0===c?"":c;var e=b.NOW;e=void 0===e?Date.now():e;b=b.clientOffset;b=void 0===b?0:b;var d=ab(a,"Period");if(1!==d.length)throw Error("INVALID_NUMBER_OF_PERIOD");var f=cb(a);c=yd([c],ab(a,"BaseURL"));f.sourceDuration=f.mediaPresentationDuration||0;f.NOW=e;f.clientOffset=b;return Ga(d.map(Pi(f,c)))},Ah=function(a){if(""===a)throw Error("DASH_EMPTY_MANIFEST");
a=(a=(new K.DOMParser).parseFromString(a,"application/xml"))&&"MPD"===a.documentElement.tagName?a.documentElement:null;if(!a||a&&0<a.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");return a},U=function(a){a=ab(a,"UTCTiming")[0];if(!a)return null;a=cb(a);switch(a.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":a.method="HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":a.method=
"GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":a.method="DIRECT";a.value=Date.parse(a.value);break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");}return a},eb=function(a,b){return fg(zh(Ah(a),b).map(xh))},Tb={toUnsigned:function(a){return a>>>0}},ig=Object.freeze({default:Tb,__moduleExports:Tb,toUnsigned:Tb.toUnsigned}),Da=(ig&&Tb||ig).toUnsigned;var ad=function(a,b){var c=[],e;if(!b.length)return null;for(e=0;e<a.byteLength;){var d=Da(a[e]<<24|a[e+1]<<
16|a[e+2]<<8|a[e+3]);var f=Pg(a.subarray(e+4,e+8));d=1<d?e+d:a.byteLength;f===b[0]&&(1===b.length?c.push(a.subarray(e+8,d)):(e=ad(a.subarray(e+8,d),b.slice(1)),e.length&&(c=c.concat(e))));e=d}return c};var Pg=function(a){var b=""+String.fromCharCode(a[0]);b+=String.fromCharCode(a[1]);b+=String.fromCharCode(a[2]);return b+=String.fromCharCode(a[3])};var Te={parseType:Pg,timescale:function(a){return ad(a,["moov","trak"]).reduce(function(a,b){var c=ad(b,["tkhd"])[0];if(!c)return null;var e=c[0];e=0===
e?12:20;c=Da(c[e]<<24|c[e+1]<<16|c[e+2]<<8|c[e+3]);b=ad(b,["mdia","mdhd"])[0];if(!b)return null;e=b[0];e=0===e?12:20;a[c]=Da(b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3]);return a},{})},startTime:function(a,b){b=ad(b,["moof","traf"]);b=[].concat.apply([],b.map(function(b){return ad(b,["tfhd"]).map(function(c){c=Da(c[4]<<24|c[5]<<16|c[6]<<8|c[7]);c=a[c]||9E4;var e=(e=ad(b,["tfdt"]).map(function(a){var b=a[0];var c=Da(a[4]<<24|a[5]<<16|a[6]<<8|a[7]);1===b&&(c*=Math.pow(2,32),c+=Da(a[8]<<24|a[9]<<16|a[10]<<
8|a[11]));return c})[0])||Infinity;return e/c})}));b=Math.min.apply(null,b);return isFinite(b)?b:0}},Jd={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},jg=Object.freeze({default:Jd,__moduleExports:Jd,H264_STREAM_TYPE:Jd.H264_STREAM_TYPE,ADTS_STREAM_TYPE:Jd.ADTS_STREAM_TYPE,METADATA_STREAM_TYPE:Jd.METADATA_STREAM_TYPE}),Gc=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]);a[b]=a[b].concat(c)};this.off=function(b,c){if(!a[b])return!1;c=a[b].indexOf(c);
a[b]=a[b].slice();a[b].splice(c,1);return-1<c};this.trigger=function(b){var c,e;if(c=a[b])if(2===arguments.length){var d=c.length;for(e=0;e<d;++e)c[e].call(this,arguments[1])}else{var f=[];for(e=1;e<arguments.length;++e)f.push(arguments[e]);d=c.length;for(e=0;e<d;++e)c[e].apply(this,f)}};this.dispose=function(){a={}}}};Gc.prototype.pipe=function(a){this.on("data",function(b){a.push(b)});this.on("done",function(b){a.flush(b)});return a};Gc.prototype.push=function(a){this.trigger("data",a)};Gc.prototype.flush=
function(a){this.trigger("done",a)};var bd=Object.freeze({default:Gc,__moduleExports:Gc}),nb=function(a,b){var c=1;for(a>b&&(c=-1);4294967296<Math.abs(b-a);)a+=8589934592*c;return a},ce=function fc(a){var b,c;fc.prototype.init.call(this);this.type_=a;this.push=function(a){a.type===this.type_&&(void 0===c&&(c=a.dts),a.dts=nb(a.dts,c),a.pts=nb(a.pts,c),b=a.dts,this.trigger("data",a))};this.flush=function(){c=b;this.trigger("done")};this.discontinuity=function(){b=c=void 0}};ce.prototype=new (bd&&Gc||
bd);var dd={TimestampRolloverStream:ce,handleRollover:nb},cd=Object.freeze({default:dd,__moduleExports:dd,TimestampRolloverStream:dd.TimestampRolloverStream,handleRollover:dd.handleRollover}),bc=jg&&Jd||jg,nc=function(a){var b=a[1]&31;return b=b<<8|a[2]},cc=function(a){return!!(a[1]&64)},dc=function(a){var b=0;1<(a[3]&48)>>>4&&(b+=a[4]+1);return b},Qb=function(a){switch(a){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";
case 9:return"access_unit_delimiter_rbsp";default:return null}},ob={parseType:function(a,b){a=nc(a);return 0===a?"pat":a===b?"pmt":b?"pes":null},parsePat:function(a){var b=cc(a),c=4+dc(a);b&&(c+=a[c]+1);return(a[c+10]&31)<<8|a[c+11]},parsePmt:function(a){var b={},c=cc(a),e=4+dc(a);c&&(e+=a[e]+1);if(a[e+5]&1){c=3+((a[e+1]&15)<<8|a[e+2])-4;for(var d=12+((a[e+10]&15)<<8|a[e+11]);d<c;){var f=e+d;b[(a[f+1]&31)<<8|a[f+2]]=a[f];d+=((a[f+3]&15)<<8|a[f+4])+5}return b}},parsePayloadUnitStartIndicator:cc,parsePesType:function(a,
b){a=nc(a);switch(b[a]){case bc.H264_STREAM_TYPE:return"video";case bc.ADTS_STREAM_TYPE:return"audio";case bc.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(a){if(!cc(a))return null;var b=4+dc(a);if(b>=a.byteLength)return null;var c=null;var e=a[b+7];e&192&&(c={},c.pts=(a[b+9]&14)<<27|(a[b+10]&255)<<20|(a[b+11]&254)<<12|(a[b+12]&255)<<5|(a[b+13]&254)>>>3,c.pts*=4,c.pts+=(a[b+13]&6)>>>1,c.dts=c.pts,e&64&&(c.dts=(a[b+14]&14)<<27|(a[b+15]&255)<<20|(a[b+16]&254)<<
12|(a[b+17]&255)<<5|(a[b+18]&254)>>>3,c.dts*=4,c.dts+=(a[b+18]&6)>>>1));return c},videoPacketContainsKeyFrame:function(a){var b=4+dc(a);a=a.subarray(b);for(var c=b=0,e=!1;c<a.byteLength-3;c++)if(1===a[c+2]){b=c+5;break}for(;b<a.byteLength;)switch(a[b]){case 0:if(0!==a[b-1]){b+=2;break}else if(0!==a[b-2]){b++;break}c+3!==b-2&&(c=Qb(a[c+3]&31),"slice_layer_without_partitioning_rbsp_idr"===c&&(e=!0));do b++;while(1!==a[b]&&b<a.length);c=b-2;b+=3;break;case 1:if(0!==a[b-1]||0!==a[b-2]){b+=3;break}c=Qb(a[c+
3]&31);"slice_layer_without_partitioning_rbsp_idr"===c&&(e=!0);c=b-2;b+=3;break;default:b+=3}(a=a.subarray(c))&&3<a.byteLength&&(c=Qb(a[3]&31),"slice_layer_without_partitioning_rbsp_idr"===c&&(e=!0));return e}},zd=Object.freeze({default:ob,__moduleExports:ob,parseType:ob.parseType,parsePat:ob.parsePat,parsePmt:ob.parsePmt,parsePayloadUnitStartIndicator:ob.parsePayloadUnitStartIndicator,parsePesType:ob.parsePesType,parsePesTime:ob.parsePesTime,videoPacketContainsKeyFrame:ob.videoPacketContainsKeyFrame}),
ed=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],Rb=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},Dc={parseId3TagSize:function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(a[b+5]&16)>>4?c+20:c+10},parseAdtsSize:function(a,b){return a[b+3]&6144|a[b+4]<<3|(a[b+5]&224)>>5},parseType:function(a,b){return 73===a[b]&&68===a[b+1]&&51===a[b+2]?"timed-metadata":a[b]&1&&240===(a[b+1]&240)?"audio":null},parseSampleRate:function(a){for(var b=0;b+5<a.length;)if(255!==a[b]||
240!==(a[b+1]&246))b++;else return ed[(a[b+2]&60)>>>2];return null},parseAacTimestamp:function(a){var b=10;a[5]&64&&(b=b+4+Rb(a.subarray(10,14)));do{var c=Rb(a.subarray(b+4,b+8));if(1>c)break;var e=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]);if("PRIV"===e){e=a.subarray(b+10,b+c+10);for(var d=0;d<e.byteLength;d++)if(0===e[d]){var f=unescape,g,h=e,l=d,k="";for(g=0;g<l;g++)k+="%"+("00"+h[g].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===f(k))return a=e.subarray(d+1),b=
(a[3]&1)<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2,b*=4,b+=a[7]&3;break}}b+=10;b+=c}while(b<a.byteLength);return null}},Kf=Object.freeze({default:Dc,__moduleExports:Dc,parseId3TagSize:Dc.parseId3TagSize,parseAdtsSize:Dc.parseAdtsSize,parseType:Dc.parseType,parseSampleRate:Dc.parseSampleRate,parseAacTimestamp:Dc.parseAacTimestamp}),Ad=Kf&&Dc||Kf,Gb=(cd&&dd||cd).handleRollover;var Na=zd&&ob||zd;var Lf=function(a,b){if(a.audio&&a.audio.length){var c=b;"undefined"===typeof c&&(c=a.audio[0].dts);a.audio.forEach(function(a){a.dts=
Gb(a.dts,c);a.pts=Gb(a.pts,c);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4})}if(a.video&&a.video.length){var e=b;"undefined"===typeof e&&(e=a.video[0].dts);a.video.forEach(function(a){a.dts=Gb(a.dts,e);a.pts=Gb(a.pts,e);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4});a.firstKeyFrame&&(a=a.firstKeyFrame,a.dts=Gb(a.dts,e),a.pts=Gb(a.pts,e),a.dtsTime=a.dts/9E4,a.ptsTime=a.dts/9E4)}},Kd=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},Mf=function(){function a(a,b){for(var c=
0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),Qi=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof b?"undefined":$a(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)},Ra=null,Qg=function(){function a(b){Kd(this,a);if(!Ra){var c=[[[],[],[],[],[]],[[],[],[],[],[]]],e=c[0],d=c[1],f=e[4],g=d[4],h,l,k,m=[],n=[],q;for(h=0;256>h;h++)n[(m[h]=h<<1^283*(h>>7))^h]=h;for(l=k=0;!f[l];l^=q||1,k=n[k]||1){var p=k^k<<1^k<<2^k<<3^k<<4;p=p>>8^p&255^99;f[l]=p;g[p]=l;var t=m[h=m[q=m[l]]];var r=16843009*t^65537*h^257*q^16843008*l;t=257*m[p]^16843008*p;for(h=0;4>h;h++)e[h][l]=t=t<<24^t>>>8,d[h][p]=r=r<<24^r>>>8}for(h=0;5>h;h++)e[h]=e[h].slice(0),
d[h]=d[h].slice(0);Ra=c}this._tables=[[Ra[0][0].slice(),Ra[0][1].slice(),Ra[0][2].slice(),Ra[0][3].slice(),Ra[0][4].slice()],[Ra[1][0].slice(),Ra[1][1].slice(),Ra[1][2].slice(),Ra[1][3].slice(),Ra[1][4].slice()]];c=this._tables[0][4];e=this._tables[1];l=b.length;k=1;if(4!==l&&6!==l&&8!==l)throw Error("Invalid aes key size");f=b.slice(0);g=[];this._key=[f,g];for(b=l;b<4*l+28;b++){d=f[b-1];if(0===b%l||8===l&&4===b%l)d=c[d>>>24]<<24^c[d>>16&255]<<16^c[d>>8&255]<<8^c[d&255],0===b%l&&(d=d<<8^d>>>24^k<<
24,k=k<<1^283*(k>>7));f[b]=f[b-l]^d}for(l=0;b;l++,b--)d=f[l&3?b:b-4],g[l]=4>=b||4>l?d:e[0][c[d>>>24]]^e[1][c[d>>16&255]]^e[2][c[d>>8&255]]^e[3][c[d&255]]}a.prototype.decrypt=function(a,b,c,e,d,f){var g=this._key[1];a^=g[0];e^=g[1];c^=g[2];b^=g[3];var h=g.length/4-2,l,k=4;var m=this._tables[1];var n=m[0],q=m[1],p=m[2],t=m[3],r=m[4];for(l=0;l<h;l++){m=n[a>>>24]^q[e>>16&255]^p[c>>8&255]^t[b&255]^g[k];var v=n[e>>>24]^q[c>>16&255]^p[b>>8&255]^t[a&255]^g[k+1];var y=n[c>>>24]^q[b>>16&255]^p[a>>8&255]^t[e&
255]^g[k+2];b=n[b>>>24]^q[a>>16&255]^p[e>>8&255]^t[c&255]^g[k+3];k+=4;a=m;e=v;c=y}for(l=0;4>l;l++)d[(3&-l)+f]=r[a>>>24]<<24^r[e>>16&255]<<16^r[c>>8&255]<<8^r[b&255]^g[k++],m=a,a=e,e=c,c=b,b=m};return a}(),Ld=function(){function a(){Kd(this,a);this.listeners={}}a.prototype.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)};a.prototype.off=function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b};a.prototype.trigger=
function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var c=b.length,e=0;e<c;++e)b[e].call(this,arguments[1]);else{c=Array.prototype.slice.call(arguments,1);e=b.length;for(var d=0;d<e;++d)b[d].apply(this,c)}};a.prototype.dispose=function(){this.listeners={}};a.prototype.pipe=function(a){this.on("data",function(b){a.push(b)})};return a}(),Rg=function(a){function b(){Kd(this,b);var c=a.call(this,Ld);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
c=!c||"object"!==("undefined"===typeof c?"undefined":$a(c))&&"function"!==typeof c?this:c;c.jobs=[];c.delay=1;c.timeout_=null;return c}Qi(b,a);b.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};b.prototype.push=function(a){this.jobs.push(a);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};return b}(Ld),Ib=function(a){return a<<24|(a&65280)<<8|(a&16711680)>>8|a>>>24},Sg=function(a,
b,c){var e=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2);b=new Qg(Array.prototype.slice.call(b));a=new Uint8Array(a.byteLength);var d=new Int32Array(a.buffer),f;var g=c[0];var h=c[1];var l=c[2];c=c[3];for(f=0;f<e.length;f+=4){var k=Ib(e[f]);var m=Ib(e[f+1]);var n=Ib(e[f+2]);var q=Ib(e[f+3]);b.decrypt(k,m,n,q,d,f);d[f]=Ib(d[f]^g);d[f+1]=Ib(d[f+1]^h);d[f+2]=Ib(d[f+2]^l);d[f+3]=Ib(d[f+3]^c);g=k;h=m;l=n;c=q}return a},Vh=function(){function a(b,c,e,d){Kd(this,a);var f=a.STEP,g=new Int32Array(b.buffer),
h=new Uint8Array(b.byteLength);b=0;this.asyncStream_=new Rg;this.asyncStream_.push(this.decryptChunk_(g.subarray(b,b+f),c,e,h));for(b=f;b<g.length;b+=f)e=new Uint32Array([Ib(g[b-4]),Ib(g[b-3]),Ib(g[b-2]),Ib(g[b-1])]),this.asyncStream_.push(this.decryptChunk_(g.subarray(b,b+f),c,e,h));this.asyncStream_.push(function(){d(null,h.subarray(0,h.byteLength-h[h.byteLength-1]))})}a.prototype.decryptChunk_=function(a,b,c,e){return function(){var d=Sg(a,b,c);e.set(d,a.byteOffset)}};Mf(a,null,[{key:"STEP",get:function(){return 32E3}}]);
return a}(),qc=function(a,b){if(/^[a-z]+:/i.test(b))return b;/\/\//i.test(a)||(a=Pe.buildAbsoluteURL(K.location.href,a));return Pe.buildAbsoluteURL(a,b)},qb=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},ib=function(){function a(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),Cd=function ta(a,
b,c){null===a&&(a=Function.prototype);var e=Object.getOwnPropertyDescriptor(a,b);if(void 0===e){if(a=Object.getPrototypeOf(a),null!==a)return ta(a,b,c)}else{if("value"in e)return e.value;b=e.get;return void 0===b?void 0:b.call(c)}},vb=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof b?"undefined":$a(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},ec=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==("undefined"===typeof b?"undefined":$a(b))&&"function"!==typeof b?a:b},mg=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],e=!0,d=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(e=(h=g.next()).done)&&(c.push(h.value),!b||c.length!==b);e=!0);}catch(Ti){d=
!0,f=Ti}finally{try{if(!e&&g["return"])g["return"]()}finally{if(d)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),Bd=J.mergeOptions,Bh=J.log,fe=function(a,b){["AUDIO","SUBTITLES"].forEach(function(c){for(var e in a.mediaGroups[c])for(var d in a.mediaGroups[c][e])b(a.mediaGroups[c][e][d],c,e,d)})},ng=function(a,b,c){var e=b.slice();c=c||0;b=Math.min(a.length,b.length+c);for(var d=c;d<b;d++)e[d-c]=Bd(a[d],e[d-c]);return e},Ge=function(a,b){a=Bd(a,
{});var c=a.playlists[b.uri];if(!c||c.segments&&b.segments&&c.segments.length===b.segments.length&&c.mediaSequence===b.mediaSequence)return null;var e=Bd(c,b);c.segments&&(e.segments=ng(c.segments,b.segments,b.mediaSequence-c.mediaSequence));e.segments.forEach(function(a){var b=e.resolvedUri;a.resolvedUri||(a.resolvedUri=qc(b,a.uri));a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=qc(b,a.key.uri));a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=qc(b,a.map.uri))});for(c=0;c<a.playlists.length;c++)a.playlists[c].uri===
b.uri&&(a.playlists[c]=e);a.playlists[b.uri]=e;return a},Tg=function(a){for(var b=a.playlists.length;b--;){var c=a.playlists[b];a.playlists[c.uri]=c;c.resolvedUri=qc(a.uri,c.uri);c.id=b;c.attributes||(c.attributes={},Bh.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},Wh=function(a){fe(a,function(b){b.uri&&(b.resolvedUri=qc(a.uri,b.uri))})},Xh=function(a,b){var c=a.segments[a.segments.length-1];return b&&c&&c.duration?1E3*c.duration:500*(a.targetDuration||10)},Nf=function(a){function b(a,
c,e){qb(this,b);var d=ec(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));d.srcUrl=a;d.hls_=c;d.withCredentials=e;if(!d.srcUrl)throw Error("A non-empty playlist URL is required");d.state="HAVE_NOTHING";d.on("mediaupdatetimeout",function(){"HAVE_METADATA"===d.state&&(d.state="HAVE_CURRENT_METADATA",d.request=d.hls_.xhr({uri:qc(d.master.uri,d.media().uri),withCredentials:d.withCredentials},function(a,b){if(d.request){if(a)return d.playlistRequestError(d.request,d.media().uri,"HAVE_METADATA");
d.haveMetadata(d.request,d.media().uri)}}))});return d}vb(b,a);ib(b,[{key:"playlistRequestError",value:function(a,b,c){this.request=null;c&&(this.state=c);this.error={playlist:this.master.playlists[b],status:a.status,message:"HLS playlist request error at URL: "+b,responseText:a.responseText,code:500<=a.status?4:2};this.trigger("error")}},{key:"haveMetadata",value:function(a,b){var c=this;this.request=null;this.state="HAVE_METADATA";var e=new ua;e.push(a.responseText);e.end();e.manifest.uri=b;e.manifest.attributes=
e.manifest.attributes||{};a=Ge(this.master,e.manifest);this.targetDuration=e.manifest.targetDuration;a?(this.master=a,this.media_=this.master.playlists[e.manifest.uri]):this.trigger("playlistunchanged");this.media().endList||(K.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=K.setTimeout(function(){c.trigger("mediaupdatetimeout")},Xh(this.media(),!!a)));this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest();K.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",
value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"media",value:function(a){var b=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var c=this.state;if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}var e=!this.media_||a.uri!==this.media_.uri;if(this.master.playlists[a.uri].endList)this.request&&
(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,e&&(this.trigger("mediachanging"),this.trigger("mediachange"));else if(e){this.state="SWITCHING_MEDIA";if(this.request){if(qc(this.master.uri,a.uri)===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.request=this.hls_.xhr({uri:qc(this.master.uri,a.uri),withCredentials:this.withCredentials},
function(e,d){if(b.request){if(e)return b.playlistRequestError(b.request,a.uri,c);b.haveMetadata(d,a.uri);"HAVE_MASTER"===c?b.trigger("loadedmetadata"):b.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest();K.clearTimeout(this.mediaUpdateTimeout);"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(a){var b=
this;K.clearTimeout(this.mediaUpdateTimeout);var c=this.media();a?this.mediaUpdateTimeout=K.setTimeout(function(){return b.load()},c?c.targetDuration/2*1E3:5E3):this.started?c&&!c.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var a=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,c){if(a.request){a.request=null;if(b)return a.error={status:c.status,message:"HLS playlist request error at URL: "+
a.srcUrl,responseText:c.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");b=new ua;b.push(c.responseText);b.end();a.state="HAVE_MASTER";b.manifest.uri=a.srcUrl;if(b.manifest.playlists)a.master=b.manifest,Tg(a.master),Wh(a.master),a.trigger("loadedplaylist"),a.request||a.media(b.manifest.playlists[0]);else return a.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:K.location.href,playlists:[{uri:a.srcUrl,id:0}]},a.master.playlists[a.srcUrl]=
a.master.playlists[0],a.master.playlists[0].resolvedUri=a.srcUrl,a.master.playlists[0].attributes=a.master.playlists[0].attributes||{},a.haveMetadata(c,a.srcUrl),a.trigger("loadedmetadata")}})}}]);return b}(J.EventTarget),Yh=J.createTimeRange,Ri=function(a,b){var c=0;b-=a.mediaSequence;var e=a.segments[b];if(e){if("undefined"!==typeof e.start)return{result:e.start,precise:!0};if("undefined"!==typeof e.end)return{result:e.end-e.duration,precise:!0}}for(;b--;){e=a.segments[b];if("undefined"!==typeof e.end)return{result:c+
e.end,precise:!0};c+=e.duration;if("undefined"!==typeof e.start)return{result:c+e.start,precise:!0}}return{result:c,precise:!1}},Zh=function(a,b,c){"undefined"===typeof b&&(b=a.mediaSequence+a.segments.length);if(b<a.mediaSequence)return 0;var e=Ri(a,b);if(e.precise)return e.result;a:{var d=0;for(var f=b-a.mediaSequence;f<a.segments.length;f++){b=a.segments[f];if("undefined"!==typeof b.start){a=b.start-d;d=!0;break a}d+=b.duration;if("undefined"!==typeof b.end){a=b.end-d;d=!0;break a}}a=-1;d=!1}return d?
a:e.result+c},Ug=function(a,b,c){if(!a)return 0;"number"!==typeof c&&(c=0);if("undefined"===typeof b){if(a.totalDuration)return a.totalDuration;if(!a.endList)return K.Infinity}return Zh(a,b,c)},Ue=function(a,b,c){var e=0;b>c&&(c=[c,b],b=c[0],c=c[1]);if(0>b){for(;b<Math.min(0,c);b++)e+=a.targetDuration;b=0}for(;b<c;b++)e+=a.segments[b].duration;return e},$h=function(a){if(!a.segments.length)return 0;for(var b=a.segments.length-1,c=a.segments[b].duration||a.targetDuration,e=c+2*a.targetDuration;b--&&
!(c+=a.segments[b].duration,c>=e););return Math.max(0,b)},Eh=function(a,b,c){if(!a||!a.segments)return null;if(a.endList)return Ug(a);if(null===b)return null;b=b||0;c=c?$h(a):a.segments.length;return Zh(a,a.mediaSequence+c,b)},Hh=function(a,b){if(0===b-Math.floor(b))return b+.1*a;for(var c=b.toString().split(".")[1].length,e=1;e<=c;e++){var d=Math.pow(10,e),f=b*d;if(0===f-Math.floor(f)||e===c)return(f+a)/d}},Ih=Hh.bind(null,1),Ii=Hh.bind(null,-1),ai=function(a){return a.excludeUntil&&a.excludeUntil>
Date.now()},Vg=function(a){return a.excludeUntil&&Infinity===a.excludeUntil},Of=function(a){var b=ai(a);return!a.disabled&&!b},bi=function(a,b){return b.attributes&&b.attributes[a]},ge=function(a,b){if(1===a.playlists.length)return!0;var c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(function(a){return Of(a)?(a.attributes.BANDWIDTH||0)<c:!1}).length},pb={duration:Ug,seekable:function(a,b){var c=b||0;a=Eh(a,b,!0);return null===a?Yh():Yh(c,a)},safeLiveIndex:$h,getMediaInfoForTime:function(a,
b,c,e){var d,f=a.segments.length,g=b-e;if(0>g){if(0<c)for(d=c-1;0<=d;d--){var h=a.segments[d];g+=Ii(h.duration);if(0<g)return{mediaIndex:d,startTime:e-Ue(a,c,d)}}return{mediaIndex:0,startTime:b}}if(0>c){for(d=c;0>d;d++)if(g-=a.targetDuration,0>g)return{mediaIndex:0,startTime:b};c=0}for(d=c;d<f;d++)if(h=a.segments[d],g-=Ih(h.duration),0>g)return{mediaIndex:d,startTime:e+Ue(a,c,d)};return{mediaIndex:f-1,startTime:b}},isEnabled:Of,isDisabled:function(a){return a.disabled},isBlacklisted:ai,isIncompatible:Vg,
playlistEnd:Eh,isAes:function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].key)return!0;return!1},isFmp4:function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].map)return!0;return!1},hasAttribute:bi,estimateSegmentRequestTime:function(a,b,c){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return bi("BANDWIDTH",c)?(a*c.attributes.BANDWIDTH-8*e)/b:NaN},isLowestEnabledRendition:ge},Mh=J.xhr,Nh=J.mergeOptions,Ec=function(){return function Sa(a,b){a=Nh({timeout:45E3},
a);var c=Sa.beforeRequest||J.Hls.xhr.beforeRequest;c&&"function"===typeof c&&(c=c(a))&&(a=c);var e=Mh(a,function(a,c){var d=e.response;!a&&d&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=d.byteLength||d.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8E3)));c.headers&&(e.responseHeaders=c.headers);a&&"ETIMEDOUT"===a.code&&(e.timedout=!0);a||e.aborted||200===c.statusCode||206===c.statusCode||0===c.statusCode||(a=Error("XHR Failed with a response of: "+
(e&&(d||e.responseText))));b(a,e)}),d=e.abort;e.abort=function(){e.aborted=!0;return d.apply(e,arguments)};e.uri=a.uri;e.requestTime=Date.now();return e}},ci=function(a,b){a=a.toString(16);return"00".substring(0,2-a.length)+a+(b%2?" ":"")},Pf=function(a){return 32<=a&&126>a?String.fromCharCode(a):"."},Wg=function(a){var b={};Object.keys(a).forEach(function(c){var e=a[c];ArrayBuffer.isView(e)?b[c]={bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:b[c]=e});return b},Ma=function(a){var b=
a.byterange||{length:Infinity,offset:0};return[b.length,b.offset,a.resolvedUri].join()},Mg=function(a){a=Array.prototype.slice.call(a);for(var b="",c,e,d=0;d<a.length/16;d++)c=a.slice(16*d,16*d+16).map(ci).join(""),e=a.slice(16*d,16*d+16).map(Pf).join(""),b+=c+" "+e+"\n";return b},Hd=Object.freeze({createTransferableMessage:Wg,initSegmentId:Ma,hexDump:Mg,tagDump:function(a){return Mg(a.bytes)},textRanges:function(a){var b="",c;for(c=0;c<a.length;c++){var e=a;var d=c;e=e.start(d)+"-"+e.end(d);b+=e+
" "}return b}}),Fc=1/30,jd=3*Fc,di=function(a,b){var c=[],e;if(a&&a.length)for(e=0;e<a.length;e++)b(a.start(e),a.end(e))&&c.push([a.start(e),a.end(e)]);return J.createTimeRanges(c)},ei=function(a,b){return di(a,function(a,c){return a-Fc<=b&&c+Fc>=b})},Qf=function(a,b){return di(a,function(a){return a-Fc>=b})},Ve=function(a){var b=[];if(!a||!a.length)return"";for(var c=0;c<a.length;c++)b.push(a.start(c)+" => "+a.end(c));return b.join(", ")},fi=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?
arguments[2]:1;return((a.length?a.end(a.length-1):0)-b)/c},Xg=function(a){for(var b=[],c=0;c<a.length;c++)b.push({start:a.start(c),end:a.end(c)});return b},hd=function(a,b,c){var e;if(c&&c.cues)for(e=c.cues.length;e--;){var d=c.cues[e];d.startTime<=b&&d.endTime>=a&&c.removeCue(d)}},Yg=function(a){Object.defineProperties(a.frame,{id:{get:function(){J.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return a.value.key}},value:{get:function(){J.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");
return a.value.data}},privateData:{get:function(){J.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return a.value.data}}})},gi=function(a){return isNaN(a)||Infinity===Math.abs(a)?Number.MAX_VALUE:a},Mi=function(a,b,c){var e=K.WebKitDataCue||K.VTTCue;b&&b.forEach(function(a){this.inbandTextTracks_[a.stream].addCue(new e(a.startTime+this.timestampOffset,a.endTime+this.timestampOffset,a.text))},a);if(c){var d=gi(a.mediaSource_.duration);c.forEach(function(a){var b=a.cueTime+
this.timestampOffset;a.frames.forEach(function(a){var c=new e(b,b,a.value||a.url||a.data||"");c.frame=a;c.value=a;Yg(c);this.metadataTrack_.addCue(c)},this)},a);if(a.metadataTrack_&&a.metadataTrack_.cues&&a.metadataTrack_.cues.length){a=a.metadataTrack_.cues;b=[];for(c=0;c<a.length;c++)a[c]&&b.push(a[c]);var f=b.reduce(function(a,b){var c=a[b.startTime]||[];c.push(b);a[b.startTime]=c;return a},{}),g=Object.keys(f).sort(function(a,b){return Number(a)-Number(b)});g.forEach(function(a,b){var c=Number(g[b+
1])||d;f[a].forEach(function(a){a.endTime=c})})}}},kd="undefined"!==typeof window?window:{},Zg="undefined"===typeof Symbol?"__target":Symbol(),L=kd.BlobBuilder||kd.WebKitBlobBuilder||kd.MozBlobBuilder||kd.MSBlobBuilder,Ca=kd.URL||kd.webkitURL||Ca&&Ca.msURL,Ua=kd.Worker;if(Ua){var $d=Kc("self.onmessage = function () {}"),nf=new Uint8Array(1);try{var Ai=new Ua($d);Ai.postMessage(nf,[nf.buffer])}catch(ta){Ua=null}finally{Ca.revokeObjectURL($d),Ai&&Ai.terminate()}}var mj=new Va("./transmuxer-worker.worker.js",
function(a,b){var c=this;(function(){var b="undefined"!==typeof a?a:"undefined"!==typeof global?global:"undefined"!==typeof c?c:{},e="undefined"!==typeof a?a:"undefined"!==typeof b?b:"undefined"!==typeof c?c:{},d=Math.pow(2,32)-1,f,g,h,l,k,m,n,q,p,t,r,v,y,w,x,z;(function(){var a;h={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],
tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(a in h)h.hasOwnProperty(a)&&(h[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);l=new Uint8Array([105,115,111,109]);m=new Uint8Array([97,118,99,49]);k=new Uint8Array([0,0,0,1]);n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);q=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,
110,100,72,97,110,100,108,101,114,0]);p={video:n,audio:q};v=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);r=new Uint8Array([0,0,0,0,0,0,0,0]);w=y=new Uint8Array([0,0,0,0,0,0,0,0]);x=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);z=y;t=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var A=function(a){var b=[],c=0,e;for(e=1;e<arguments.length;e++)b.push(arguments[e]);for(e=b.length;e--;)c+=b[e].byteLength;var d=new Uint8Array(c+8);(new DataView(d.buffer,d.byteOffset,d.byteLength)).setUint32(0,
d.byteLength);d.set(a,4);e=0;for(c=8;e<b.length;e++)d.set(b[e],c),c+=b[e].byteLength;return d};var jb=function(){return A(h.dinf,A(h.dref,v))};var C=function(a){return A(h.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))};var F=function(){return A(h.ftyp,l,k,l,m)};var D=function(a){return A(h.hdlr,p[a])};var H=function(a){var b=new Uint8Array([0,0,0,0,0,0,0,
2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,a.duration&255,85,196,0,0]);a.samplerate&&(b[12]=a.samplerate>>>24&255,b[13]=a.samplerate>>>16&255,b[14]=a.samplerate>>>8&255,b[15]=a.samplerate&255);return A(h.mdhd,b)};var E=function(a){return A(h.mdia,H(a),D(a.type),u(a))};var G=function(a){return A(h.mfhd,new Uint8Array([0,0,0,0,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]))};var u=function(a){return A(h.minf,"video"===a.type?A(h.vmhd,t):A(h.smhd,r),jb(),
N(a))};var X=function(a){for(var b=a.length,c=[];b--;)c[b]=Aa(a[b]);return A.apply(null,[h.moov,R(4294967295)].concat(c).concat(I(a)))};var I=function(a){for(var b=a.length,c=[];b--;)c[b]=fa(a[b]);return A.apply(null,[h.mvex].concat(c))};var R=function(a){a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,255,255,255,255]);return A(h.mvhd,a)};var aa=function(a){a=a.samples||[];var b=new Uint8Array(4+a.length),c;for(c=0;c<a.length;c++){var e=a[c].flags;b[c+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy}return A(h.sdtp,b)};var N=function(a){return A(h.stbl,f(a),A(h.stts,z),A(h.stsc,w),A(h.stsz,x),A(h.stco,y))};(function(){f=function(c){return A(h.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===c.type?a(c):b(c))};var a=function(a){var b=a.sps||[],c=a.pps||[],e=[],d=[],f;for(f=0;f<
b.length;f++)e.push((b[f].byteLength&65280)>>>8),e.push(b[f].byteLength&255),e=e.concat(Array.prototype.slice.call(b[f]));for(f=0;f<c.length;f++)d.push((c[f].byteLength&65280)>>>8),d.push(c[f].byteLength&255),d=d.concat(Array.prototype.slice.call(c[f]));return A(h.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(a.width&65280)>>8,a.width&255,(a.height&65280)>>8,a.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,
0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),A(h.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([b.length]).concat(e).concat([c.length]).concat(d))),A(h.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};var b=function(a){return A(h.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(a.channelcount&65280)>>8,a.channelcount&255,(a.samplesize&65280)>>8,a.samplesize&255,0,0,0,0,(a.samplerate&65280)>>8,a.samplerate&255,0,0]),C(a))}})();var M=function(a){a=new Uint8Array([0,
0,0,7,0,0,0,0,0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,0,(a.duration&4278190080)>>24,(a.duration&16711680)>>16,(a.duration&65280)>>8,a.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(a.width&65280)>>8,a.width&255,0,0,(a.height&65280)>>8,a.height&255,0,0]);return A(h.tkhd,a)};var ca=function(a){var b=A(h.tfhd,new Uint8Array([0,0,0,58,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>
8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var c=Math.floor(a.baseMediaDecodeTime/(d+1));var e=Math.floor(a.baseMediaDecodeTime%(d+1));c=A(h.tfdt,new Uint8Array([1,0,0,0,c>>>24&255,c>>>16&255,c>>>8&255,c&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255]));if("audio"===a.type)return a=g(a,92),A(h.traf,b,c,a);e=aa(a);a=g(a,e.length+92);return A(h.traf,b,c,a,e)};var Aa=function(a){a.duration=a.duration||4294967295;return A(h.trak,M(a),E(a))};var fa=function(a){var b=new Uint8Array([0,0,0,0,(a.id&4278190080)>>
24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==a.type&&(b[b.length-1]=0);return A(h.trex,b)};(function(){var a=function(a,b){var c=0,e=0,d=0,f=0;a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(e=2),void 0!==a[0].flags&&(d=4),void 0!==a[0].compositionTimeOffset&&(f=8));return[0,0,c|e|d|f,1,(a.length&4278190080)>>>24,(a.length&16711680)>>>16,(a.length&65280)>>>8,a.length&255,(b&4278190080)>>>24,(b&16711680)>>>16,(b&65280)>>>8,b&255]};var b=
function(b,c){var e;b=b.samples||[];c+=20+16*b.length;c=a(b,c);for(e=0;e<b.length;e++){var d=b[e];c=c.concat([(d.duration&4278190080)>>>24,(d.duration&16711680)>>>16,(d.duration&65280)>>>8,d.duration&255,(d.size&4278190080)>>>24,(d.size&16711680)>>>16,(d.size&65280)>>>8,d.size&255,d.flags.isLeading<<2|d.flags.dependsOn,d.flags.isDependedOn<<6|d.flags.hasRedundancy<<4|d.flags.paddingValue<<1|d.flags.isNonSyncSample,d.flags.degradationPriority&61440,d.flags.degradationPriority&15,(d.compositionTimeOffset&
4278190080)>>>24,(d.compositionTimeOffset&16711680)>>>16,(d.compositionTimeOffset&65280)>>>8,d.compositionTimeOffset&255])}return A(h.trun,new Uint8Array(c))};var c=function(b,c){var e;b=b.samples||[];c+=20+8*b.length;c=a(b,c);for(e=0;e<b.length;e++){var d=b[e];c=c.concat([(d.duration&4278190080)>>>24,(d.duration&16711680)>>>16,(d.duration&65280)>>>8,d.duration&255,(d.size&4278190080)>>>24,(d.size&16711680)>>>16,(d.size&65280)>>>8,d.size&255])}return A(h.trun,new Uint8Array(c))};g=function(a,e){return"audio"===
a.type?c(a,e):b(a,e)}})();var wa={ftyp:F,mdat:function(a){return A(h.mdat,a)},moof:function(a,b){for(var c=[],e=b.length;e--;)c[e]=ca(b[e]);return A.apply(null,[h.moof,G(a)].concat(c))},moov:X,initSegment:function(a){var b=F();a=X(a);var c=new Uint8Array(b.byteLength+a.byteLength);c.set(b);c.set(a,b.byteLength);return c}};b=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]);a[b]=a[b].concat(c)};this.off=function(b,c){if(!a[b])return!1;c=a[b].indexOf(c);a[b]=a[b].slice();
a[b].splice(c,1);return-1<c};this.trigger=function(b){var c,e;if(c=a[b])if(2===arguments.length){var d=c.length;for(e=0;e<d;++e)c[e].call(this,arguments[1])}else{var f=[];for(e=1;e<arguments.length;++e)f.push(arguments[e]);d=c.length;for(e=0;e<d;++e)c[e].apply(this,f)}};this.dispose=function(){a={}}}};b.prototype.pipe=function(a){this.on("data",function(b){a.push(b)});this.on("done",function(b){a.flush(b)});return a};b.prototype.push=function(a){this.trigger("data",a)};b.prototype.flush=function(a){this.trigger("done",
a)};var ka=function(a,b){var c=[],e;if(!(b[0]&64))return c;var d=b[0]&31;for(e=0;e<d;e++){var f=3*e;var g={type:b[f+2]&3,pts:a};b[f+2]&4&&(g.ccData=b[f+3]<<8|b[f+4],c.push(g))}return c},B=function Jj(){Jj.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new da(0,0),new da(0,1),new da(1,0),new da(1,1)];this.reset();this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data"));a.on("done",this.trigger.bind(this,"done"))},this)};B.prototype=new b;B.prototype.push=
function(a){if("sei_rbsp"===a.nalUnitType){var b=a.escapedRBSP;for(var c=0,e={payloadType:-1,payloadSize:0},d=0,f=0;c<b.byteLength&&128!==b[c];){for(;255===b[c];)d+=255,c++;for(d+=b[c++];255===b[c];)f+=255,c++;f+=b[c++];if(!e.payload&&4===d){e.payloadType=d;e.payloadSize=f;e.payload=b.subarray(c,c+f);break}c+=f;f=d=0}4===e.payloadType&&(b=181!==e.payload[0]||49!==(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:
e.payload.subarray(8,e.payload.length-1))&&(a.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:a.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(this.captionPackets_=this.captionPackets_.concat(ka(a.pts,b)),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts))}};B.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,
b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){2>a.type&&this.dispatchCea608Packet(a)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(a){a.flush()},this)):this.ccStreams_.forEach(function(a){a.flush()},this)};B.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(a){a.reset()})};B.prototype.dispatchCea608Packet=
function(a){this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};B.prototype.setsChannel1Active=function(a){return 4096===(a.ccData&30720)};B.prototype.setsChannel2Active=function(a){return 6144===(a.ccData&30720)};var Sa={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,
306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,
817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},sb=function(a){if(null===a)return"";a=Sa[a]||a;return String.fromCharCode(a)},ba=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ta=function(){for(var a=[],b=15;b--;)a.push("");return a},da=function Kj(a,b){Kj.prototype.init.call(this);this.field_=a||0;this.dataChannel_=b||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();
this.reset();this.push=function(a){var b=a.ccData&32639;if(b===this.lastControlCode_)this.lastControlCode_=null;else{4096===(b&61440)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null);var c=b>>>8;var e=b&255;b!==this.PADDING_&&(b===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":b===this.END_OF_CAPTION_?(this.clearFormatting(a.pts),this.flushDisplayed(a.pts),e=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=e,this.startPts_=a.pts):b===this.ROLL_UP_2_ROWS_?
(this.topRow_=13,this.mode_="rollUp"):b===this.ROLL_UP_3_ROWS_?(this.topRow_=12,this.mode_="rollUp"):b===this.ROLL_UP_4_ROWS_?(this.topRow_=11,this.mode_="rollUp"):b===this.CARRIAGE_RETURN_?(this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts):b===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[14]=this.nonDisplayed_[14].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1):b===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(a.pts),this.displayed_=
ta()):b===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=ta():b===this.RESUME_DIRECT_CAPTIONING_?this.mode_="paintOn":this.isSpecialCharacter(c,e)?(b=sb((c&3)<<8|e),this[this.mode_](a.pts,b),this.column_++):this.isExtCharacter(c,e)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1),b=sb((c&3)<<8|e),this[this.mode_](a.pts,b),this.column_++):this.isMidRowCode(c,e)?(this.clearFormatting(a.pts),this[this.mode_](a.pts,
" "),this.column_++,14===(e&14)&&this.addFormatting(a.pts,["i"]),1===(e&1)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(c,e)?this.column_+=e&3:this.isPAC(c,e)?(c=ba.indexOf(b&7968),c!==this.row_&&(this.clearFormatting(a.pts),this.row_=c),e&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16===(b&16)&&(this.column_=4*((b&14)>>1)),this.isColorPAC(e)&&14===(e&14)&&this.addFormatting(a.pts,["i"])):this.isNormalChar(c)&&(0===e&&(e=null),b=sb(c),b+=sb(e),this[this.mode_](a.pts,
b),this.column_+=b.length))}}};da.prototype=new b;da.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){return a.trim()}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})};da.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=ta();this.nonDisplayed_=ta();this.lastControlCode_=null;this.column_=0;this.row_=14;this.formatting_=[]};da.prototype.setConstants=function(){0===
this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=
this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};da.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&48<=b&&63>=b};da.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=b&&63>=b};da.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&32<=b&&47>=b};da.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&33<=b&&35>=b};da.prototype.isPAC=function(a,b){return a>=this.BASE_&&
a<this.BASE_+8&&64<=b&&127>=b};da.prototype.isColorPAC=function(a){return 64<=a&&79>=a||96<=a&&127>=a};da.prototype.isNormalChar=function(a){return 32<=a&&127>=a};da.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);b=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,b)};da.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[];this[this.mode_](a,
b)}};da.prototype.popOn=function(a,b){this.nonDisplayed_[this.row_]+=b};da.prototype.rollUp=function(a,b){this.displayed_[14]+=b};da.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.topRow_;14>a;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[14]=""};da.prototype.paintOn=function(){};var S=da,Ea={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},oa=function(a,b){var c=1;for(a>b&&(c=-1);4294967296<Math.abs(b-a);)a+=8589934592*
c;return a},Ta=function Lj(a){var b,c;Lj.prototype.init.call(this);this.type_=a;this.push=function(a){a.type===this.type_&&(void 0===c&&(c=a.dts),a.dts=oa(a.dts,c),a.pts=oa(a.pts,c),b=a.dts,this.trigger("data",a))};this.flush=function(){c=b;this.trigger("done")};this.discontinuity=function(){b=c=void 0}};Ta.prototype=new b;var Q=function(a,b,c){for(var e="";b<c;b++)e+="%"+("00"+a[b].toString(16)).slice(-2);return e},Ia=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},za={TXXX:function(a){var b;
if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(Q(a.data,1,b));a.value=decodeURIComponent(Q(a.data,b+1,a.data.length)).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(Q(a.data,1,b));a.url=decodeURIComponent(Q(a.data,b+1,a.data.length));break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=unescape(Q(a.data,
0,b));break}a.privateData=a.data.subarray(b+1);a.data=a.privateData}};var ja=function(a){var b=!(!a||!a.debug);a=a&&a.descriptor;var c=0,e=[],d=0,f;ja.prototype.init.call(this);this.dispatchType=Ea.METADATA_STREAM_TYPE.toString(16);if(a)for(f=0;f<a.length;f++)this.dispatchType+=("00"+a[f].toString(16)).slice(-2);this.push=function(a){var f;if("timed-metadata"===a.type)if(a.dataAlignmentIndicator&&(d=0,e.length=0),0===e.length&&(10>a.data.length||73!==a.data[0]||68!==a.data[1]||51!==a.data[2]))b&&
console.log("Skipping unrecognized metadata packet");else if(e.push(a),d+=a.data.byteLength,1===e.length&&(c=Ia(a.data.subarray(6,10)),c+=10),!(d<c)){a={data:new Uint8Array(c),frames:[],pts:e[0].pts,dts:e[0].dts};for(f=0;f<c;)a.data.set(e[0].data.subarray(0,c-f),f),f+=e[0].data.byteLength,d-=e[0].data.byteLength,e.shift();f=10;a.data[5]&64&&(f=f+4+Ia(a.data.subarray(10,14)),c-=Ia(a.data.subarray(16,20)));do{var g=Ia(a.data.subarray(f+4,f+8));if(1>g)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");
var h=String.fromCharCode(a.data[f],a.data[f+1],a.data[f+2],a.data[f+3]);h={id:h,data:a.data.subarray(f+10,f+g+10)};h.key=h.id;if(za[h.id]&&(za[h.id](h),"com.apple.streaming.transportStreamTimestamp"===h.owner)){var l=h.data,k=(l[3]&1)<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;k*=4;k+=l[7]&3;h.timeStamp=k;void 0===a.pts&&void 0===a.dts&&(a.pts=h.timeStamp,a.dts=h.timeStamp);this.trigger("timestamp",h)}a.frames.push(h);f+=10;f+=g}while(f<c);this.trigger("data",a)}}};ja.prototype=new b;var Xa=function(){var a=
new Uint8Array(188),b=0;Xa.prototype.init.call(this);this.push=function(c){var e=0,d=188;if(b){var f=new Uint8Array(c.byteLength+b);f.set(a.subarray(0,b));f.set(c,b);b=0}else f=c;for(;d<f.byteLength;)71===f[e]&&71===f[d]?(this.trigger("data",f.subarray(e,d)),e+=188,d+=188):(e++,d++);e<f.byteLength&&(a.set(f.subarray(e),0),b=f.byteLength-e)};this.flush=function(){188===b&&71===a[0]&&(this.trigger("data",a),b=0);this.trigger("done")}};Xa.prototype=new b;var na=function(){na.prototype.init.call(this);
var a=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var b=function(a,b){var d=0;b.payloadUnitStartIndicator&&(d+=a[d]+1);"pat"===b.type?c(a.subarray(d),b):e(a.subarray(d),b)};var c=function(b,c){c.section_number=b[7];c.last_section_number=b[8];a.pmtPid=(b[10]&31)<<8|b[11];c.pmtPid=a.pmtPid};var e=function(b,c){var e;if(b[5]&1){a.programMapTable={video:null,audio:null,"timed-metadata":{}};var d=3+((b[1]&15)<<8|b[2])-4;for(e=12+((b[10]&15)<<8|b[11]);e<d;){var f=b[e],g=(b[e+1]&31)<<8|
b[e+2];f===Ea.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=g:f===Ea.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?a.programMapTable.audio=g:f===Ea.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][g]=f);e+=((b[e+3]&15)<<8|b[e+4])+5}c.programMapTable=a.programMapTable}};this.push=function(a){var c={},e=4;c.payloadUnitStartIndicator=!!(a[1]&64);c.pid=a[1]&31;c.pid<<=8;c.pid|=a[2];1<(a[3]&48)>>>4&&(e+=a[e]+1);if(0===c.pid)c.type="pat",b(a.subarray(e),c),this.trigger("data",
c);else if(c.pid===this.pmtPid)for(c.type="pmt",b(a.subarray(e),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,e,c]):this.processPes_(a,e,c)};this.processPes_=function(a,b,c){c.streamType=c.pid===this.programMapTable.video?Ea.H264_STREAM_TYPE:c.pid===this.programMapTable.audio?Ea.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][c.pid];c.type="pes";
c.data=a.subarray(b);this.trigger("data",c)}};na.prototype=new b;na.STREAM_TYPES={h264:27,adts:15};var xa=function(){var a=this,b={data:[],size:0},c={data:[],size:0},e={data:[],size:0},d=function(b,c,e){var d=new Uint8Array(b.size),f={type:c},g,h=0;if(b.data.length&&!(9>b.size)){f.trackId=b.data[0].pid;for(g=0;g<b.data.length;g++){var l=b.data[g];d.set(l.data,h);h+=l.data.byteLength}f.packetLength=6+(d[4]<<8|d[5]);f.dataAlignmentIndicator=0!==(d[6]&4);g=d[7];g&192&&(f.pts=(d[9]&14)<<27|(d[10]&255)<<
20|(d[11]&254)<<12|(d[12]&255)<<5|(d[13]&254)>>>3,f.pts*=4,f.pts+=(d[13]&6)>>>1,f.dts=f.pts,g&64&&(f.dts=(d[14]&14)<<27|(d[15]&255)<<20|(d[16]&254)<<12|(d[17]&255)<<5|(d[18]&254)>>>3,f.dts*=4,f.dts+=(d[18]&6)>>>1));f.data=d.subarray(9+d[8]);c="video"===c||f.packetLength<=b.size;if(e||c)b.size=0,b.data.length=0;c&&a.trigger("data",f)}};xa.prototype.init.call(this);this.push=function(f){({pat:function(){},pes:function(){switch(f.streamType){case Ea.H264_STREAM_TYPE:case Ea.H264_STREAM_TYPE:var a=b;
var g="video";break;case Ea.ADTS_STREAM_TYPE:a=c;g="audio";break;case Ea.METADATA_STREAM_TYPE:a=e;g="timed-metadata";break;default:return}f.payloadUnitStartIndicator&&d(a,g,!0);a.data.push(f);a.size+=f.data.byteLength},pmt:function(){var b={type:"metadata",tracks:[]},c=f.programMapTable;null!==c.video&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.video,codec:"avc",type:"video"});null!==c.audio&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.audio,codec:"adts",type:"audio"});
a.trigger("data",b)}})[f.type]()};this.flush=function(){d(b,"video");d(c,"audio");d(e,"timed-metadata");this.trigger("done")}};xa.prototype=new b;var J={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Xa,TransportParseStream:na,ElementaryStream:xa,TimestampRolloverStream:Ta,CaptionStream:B,Cea608Stream:S,MetadataStream:ja};for(va in Ea)Ea.hasOwnProperty(va)&&(J[va]=Ea[va]);var K=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var Ba=function(){var a;Ba.prototype.init.call(this);
this.push=function(b){var c=0,e=0;if("audio"===b.type){if(a){var d=a;a=new Uint8Array(d.byteLength+b.data.byteLength);a.set(d);a.set(b.data,d.byteLength)}else a=b.data;for(;c+5<a.length;)if(255!==a[c]||240!==(a[c+1]&246))c++;else{d=2*(~a[c+1]&1);var f=(a[c+3]&3)<<11|a[c+4]<<3|(a[c+5]&224)>>5;var g=1024*((a[c+6]&3)+1);var h=9E4*g/K[(a[c+2]&60)>>>2];f=c+f;if(a.byteLength<f)break;this.trigger("data",{pts:b.pts+e*h,dts:b.dts+e*h,sampleCount:g,audioobjecttype:(a[c+2]>>>6&3)+1,channelcount:(a[c+2]&1)<<
2|(a[c+3]&192)>>>6,samplerate:K[(a[c+2]&60)>>>2],samplingfrequencyindex:(a[c+2]&60)>>>2,samplesize:16,data:a.subarray(c+7+d,f)});if(a.byteLength===f){a=void 0;break}e++;a=a.subarray(f)}}};this.flush=function(){this.trigger("done")}};Ba.prototype=new b;var ra=function(a){var b=a.byteLength,c=0,e=0;this.length=function(){return 8*b};this.bitsAvailable=function(){return 8*b+e};this.loadWord=function(){var d=a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw Error("no bytes available");
f.set(a.subarray(d,d+g));c=(new DataView(f.buffer)).getUint32(0);e=8*g;b-=g};this.skipBits=function(a){if(!(e>a)){a-=e;var d=Math.floor(a/8);a-=8*d;b-=d;this.loadWord()}c<<=a;e-=a};this.readBits=function(a){var d=Math.min(e,a),f=c>>>32-d;e-=d;0<e?c<<=d:0<b&&this.loadWord();d=a-d;return 0<d?f<<d|this.readBits(d):f};this.skipLeadingZeros=function(){var a;for(a=0;a<e;++a)if(0!==(c&2147483648>>>a))return c<<=a,e-=a,a;this.loadWord();return a+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+
this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var la=function(){var a=0,b,c;la.prototype.init.call(this);this.push=function(e){if(c){var d=
new Uint8Array(c.byteLength+e.data.byteLength);d.set(c);d.set(e.data,c.byteLength);c=d}else c=e.data;for(;a<c.byteLength-3;a++)if(1===c[a+2]){b=a+5;break}for(;b<c.byteLength;)switch(c[b]){case 0:if(0!==c[b-1]){b+=2;break}else if(0!==c[b-2]){b++;break}a+3!==b-2&&this.trigger("data",c.subarray(a+3,b-2));do b++;while(1!==c[b]&&b<c.length);a=b-2;b+=3;break;case 1:if(0!==c[b-1]||0!==c[b-2]){b+=3;break}this.trigger("data",c.subarray(a+3,b-2));a=b-2;b+=3;break;default:b+=3}c=c.subarray(a);b-=a;a=0};this.flush=
function(){c&&3<c.byteLength&&this.trigger("data",c.subarray(a+3));c=null;a=0;this.trigger("done")}};la.prototype=new b;var P={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var L=function(){var a=new la,b,c,e;L.prototype.init.call(this);var d=this;this.push=function(d){"video"===d.type&&(b=d.trackId,c=d.pts,e=d.dts,a.push(d))};a.on("data",function(a){var f={trackId:b,pts:c,dts:e,data:a};switch(a[0]&31){case 5:f.nalUnitType="slice_layer_without_partitioning_rbsp_idr";
break;case 6:f.nalUnitType="sei_rbsp";f.escapedRBSP=g(a.subarray(1));break;case 7:f.nalUnitType="seq_parameter_set_rbsp";f.escapedRBSP=g(a.subarray(1));f.config=h(f.escapedRBSP);break;case 8:f.nalUnitType="pic_parameter_set_rbsp";break;case 9:f.nalUnitType="access_unit_delimiter_rbsp"}d.trigger("data",f)});a.on("done",function(){d.trigger("done")});this.flush=function(){a.flush()};var f=function(a,b){var c=8,e=8,d;for(d=0;d<a;d++)0!==e&&(e=b.readExpGolomb(),e=(c+e+256)%256),c=0===e?c:e};var g=function(a){for(var b=
a.byteLength,c=[],e=1,d;e<b-2;)0===a[e]&&0===a[e+1]&&3===a[e+2]?(c.push(e+2),e+=2):e++;if(0===c.length)return a;b-=c.length;d=new Uint8Array(b);var f=0;for(e=0;e<b;f++,e++)f===c[0]&&(f++,c.shift()),d[e]=a[f];return d};var h=function(a){var b=0,c=0,e=0,d=0,g=1;a=new ra(a);var h=a.readUnsignedByte();var l=a.readUnsignedByte();var k=a.readUnsignedByte();a.skipUnsignedExpGolomb();if(P[h]){var m=a.readUnsignedExpGolomb();3===m&&a.skipBits(1);a.skipUnsignedExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);
if(a.readBoolean()){var n=3!==m?8:12;for(m=0;m<n;m++)a.readBoolean()&&(6>m?f(16,a):f(64,a))}}a.skipUnsignedExpGolomb();m=a.readUnsignedExpGolomb();if(0===m)a.readUnsignedExpGolomb();else if(1===m)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),n=a.readUnsignedExpGolomb(),m=0;m<n;m++)a.skipExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);m=a.readUnsignedExpGolomb();n=a.readUnsignedExpGolomb();var q=a.readBits(1);0===q&&a.skipBits(1);a.skipBits(1);a.readBoolean()&&(b=a.readUnsignedExpGolomb(),
c=a.readUnsignedExpGolomb(),e=a.readUnsignedExpGolomb(),d=a.readUnsignedExpGolomb());if(a.readBoolean()&&a.readBoolean()){var p=a.readUnsignedByte();switch(p){case 1:var t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];
break;case 16:t=[2,1];break;case 255:t=[a.readUnsignedByte()<<8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}t&&(g=t[0]/t[1])}return{profileIdc:h,levelIdc:k,profileCompatibility:l,width:Math.ceil((16*(m+1)-2*b-2*c)*g),height:(2-q)*(n+1)*16-2*e-2*d}}};L.prototype=new b;var La=function(){var a=new Uint8Array,b=0;La.prototype.init.call(this);this.setTimestamp=function(a){b=a};this.parseId3TagSize=function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(a[b+5]&16)>>4?c+
20:c+10};this.parseAdtsSize=function(a,b){return a[b+3]&6144|a[b+4]<<3|(a[b+5]&224)>>5};this.push=function(c){var e=0;if(a.length){var d=a.length;a=new Uint8Array(c.byteLength+d);a.set(a.subarray(0,d));a.set(c,d)}else a=c;for(;3<=a.length-e;)if(73===a[e]&&68===a[e+1]&&51===a[e+2]){if(10>a.length-e)break;c=this.parseId3TagSize(a,e);if(c>a.length)break;d={type:"timed-metadata",data:a.subarray(e,e+c)};this.trigger("data",d);e+=c}else if(a[e]&1&&240===(a[e+1]&240)){if(7>a.length-e)break;c=this.parseAdtsSize(a,
e);if(c>a.length)break;d={type:"audio",data:a.subarray(e,e+c),pts:b,dts:b};this.trigger("data",d);e+=c}else e++;a=0<a.length-e?a.subarray(e):new Uint8Array}};La.prototype=new b;var va=[33,16,5,32,164,27];B=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];S=function(a){for(var b=[];a--;)b.push(0);return b};var pa=function(a){return Object.keys(a).reduce(function(b,c){b[c]=new Uint8Array(a[c].reduce(function(a,b){return a.concat(b)},[]));return b},{})}({96E3:[va,[227,64],S(154),[56]],88200:[va,[231],S(170),
[56]],64E3:[va,[248,192],S(240),[56]],48E3:[va,[255,192],S(268),[55,148,128],S(54),[112]],44100:[va,[255,192],S(268),[55,163,128],S(84),[112]],32E3:[va,[255,192],S(268),[55,234],S(226),[112]],24E3:[va,[255,192],S(268),[55,255,128],S(268),[111,112],S(126),[224]],16E3:[va,[255,192],S(268),[55,255,128],S(268),[111,255],S(269),[223,108],S(195),[1,192]],12E3:[B,S(268),[3,127,248],S(268),[6,255,240],S(268),[13,255,224],S(268),[27,253,128],S(259),[56]],11025:[B,S(268),[3,127,248],S(268),[6,255,240],S(268),
[13,255,224],S(268),[27,255,192],S(268),[55,175,128],S(108),[112]],8E3:[B,S(268),[3,121,16],S(47),[7]]});var O=function(a){return 9E4*a};var Oa=function(a,b){return a*b};var Ya=function(a){return a/9E4};var T=function(a,b){return a/b};var U={secondsToVideoTs:O,secondsToAudioTs:Oa,videoTsToSeconds:Ya,audioTsToSeconds:T,audioTsToVideoTs:function(a,b){return O(T(a,b))},videoTsToAudioTs:function(a,b){return Oa(Ya(a),b)}},V=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],
W=["width","height","profileIdc","levelIdc","profileCompatibility"];var Y=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}};var Z=function(a){return 73===a[0]&&68===a[1]&&51===a[2]?!0:!1};var zb=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};var ia=function(a){var b,c=0;for(b=0;b<a.length;b++){var e=a[b];c+=e.data.byteLength}return c};var ea=function(a,b){var c=[],e=0,d=0,f=
0,g=Infinity;b=b||{};ea.prototype.init.call(this);this.push=function(b){Pa(a,b);a&&V.forEach(function(c){a[c]=b[c]});c.push(b)};this.setEarliestDts=function(b){d=b-a.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(a){g=a};this.setAudioAppendStart=function(a){f=a};this.flush=function(){if(0!==c.length){var d=this.trimAdtsFramesByEarliestDts_(c);a.baseMediaDecodeTime=ma(a,b.keepOriginalTimestamps);this.prefixWithSilence_(a,d);a.samples=this.generateSampleTable_(d);var f=
wa.mdat(this.concatenateFrameData_(d));c=[];d=wa.moof(e,[a]);var g=new Uint8Array(d.byteLength+f.byteLength);e++;g.set(d);g.set(f,d.byteLength);lb(a);this.trigger("data",{track:a,boxes:g})}this.trigger("done","AudioSegmentStream")};this.prefixWithSilence_=function(a,b){var c,e=c=0;if(b.length){var d=U.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate);var h=Math.ceil(9E4/(a.samplerate/1024));f&&g&&(c=d-Math.max(f,g),c=Math.floor(c/h),e=c*h);if(!(1>c||45E3<e)){h=pa[a.samplerate];h||(h=b[0].data);
for(d=0;d<c;d++)b.splice(d,0,{data:h});a.baseMediaDecodeTime-=Math.floor(U.videoTsToAudioTs(e,a.samplerate))}}};this.trimAdtsFramesByEarliestDts_=function(b){if(a.minSegmentDts>=d)return b;a.minSegmentDts=Infinity;return b.filter(function(b){return b.dts>=d?(a.minSegmentDts=Math.min(a.minSegmentDts,b.dts),a.minSegmentPts=a.minSegmentDts,!0):!1})};this.generateSampleTable_=function(a){var b,c=[];for(b=0;b<a.length;b++){var e=a[b];c.push({size:e.data.byteLength,duration:1024})}return c};this.concatenateFrameData_=
function(a){var b,c=0,e=new Uint8Array(ia(a));for(b=0;b<a.length;b++){var d=a[b];e.set(d.data,c);c+=d.data.byteLength}return e}};ea.prototype=new b;var ha=function(a,b){var c=0,e=[],d=[],f,g;b=b||{};ha.prototype.init.call(this);delete a.minPTS;this.gopCache_=[];this.push=function(b){Pa(a,b);"seq_parameter_set_rbsp"!==b.nalUnitType||f||(f=b.config,a.sps=[b.data],W.forEach(function(b){a[b]=f[b]},this));"pic_parameter_set_rbsp"!==b.nalUnitType||g||(g=b.data,a.pps=[b.data]);e.push(b)};this.flush=function(){for(var f,
g,h;e.length&&"access_unit_delimiter_rbsp"!==e[0].nalUnitType;)e.shift();if(0!==e.length){f=this.groupNalsIntoFrames_(e);f=this.groupFramesIntoGops_(f);f[0][0].keyFrame||((g=this.getGopForFusion_(e[0],a))?(f.unshift(g),f.byteLength+=g.byteLength,f.nalCount+=g.nalCount,f.pts=g.pts,f.dts=g.dts,f.duration+=g.duration):f=this.extendFirstKeyFrame_(f));if(d.length){g=b.alignGopsAtEnd?this.alignGopsAtEnd_(f):this.alignGopsAtStart_(f);if(!g){this.gopCache_.unshift({gop:f.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=
Math.min(6,this.gopCache_.length);e=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}lb(a);f=g}Pa(a,f);a.samples=this.generateSampleTable_(f);g=wa.mdat(this.concatenateNalData_(f));a.baseMediaDecodeTime=ma(a,b.keepOriginalTimestamps);this.trigger("processedGopsInfo",f.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));this.gopCache_.unshift({gop:f.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);e=[];this.trigger("baseMediaDecodeTime",
a.baseMediaDecodeTime);this.trigger("timelineStartInfo",a.timelineStartInfo);f=wa.moof(c,[a]);h=new Uint8Array(f.byteLength+g.byteLength);c++;h.set(f);h.set(g,f.byteLength);this.trigger("data",{track:a,boxes:h})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){lb(a);g=f=void 0};this.getGopForFusion_=function(b){var c=Infinity,e;for(e=0;e<this.gopCache_.length;e++){var d=this.gopCache_[e];var f=d.gop;if(a.pps&&zb(a.pps[0],d.pps[0])&&a.sps&&zb(a.sps[0],d.sps[0])&&
!(f.dts<a.timelineStartInfo.dts)&&(f=b.dts-f.dts-f.duration,-1E4<=f&&45E3>=f&&(!g||c>f))){var g=d;c=f}}return g?g.gop:null};this.extendFirstKeyFrame_=function(a){if(!a[0][0].keyFrame&&1<a.length){var b=a.shift();a.byteLength-=b.byteLength;a.nalCount-=b.nalCount;a[0][0].dts=b.dts;a[0][0].pts=b.pts;a[0][0].duration+=b.duration}return a};this.groupNalsIntoFrames_=function(a){var b,c=[],e=[];for(b=c.byteLength=0;b<a.length;b++){var d=a[b];"access_unit_delimiter_rbsp"===d.nalUnitType?(c.length&&(c.duration=
d.dts-c.dts,e.push(c)),c=[d],c.byteLength=d.data.byteLength,c.pts=d.pts,c.dts=d.dts):("slice_layer_without_partitioning_rbsp_idr"===d.nalUnitType&&(c.keyFrame=!0),c.duration=d.dts-c.dts,c.byteLength+=d.data.byteLength,c.push(d))}e.length&&(!c.duration||0>=c.duration)&&(c.duration=e[e.length-1].duration);e.push(c);return e};this.groupFramesIntoGops_=function(a){var b,c=[],e=[];c.byteLength=0;c.nalCount=0;c.duration=0;c.pts=a[0].pts;c.dts=a[0].dts;e.byteLength=0;e.nalCount=0;e.duration=0;e.pts=a[0].pts;
e.dts=a[0].dts;for(b=0;b<a.length;b++){var d=a[b];d.keyFrame?(c.length&&(e.push(c),e.byteLength+=c.byteLength,e.nalCount+=c.nalCount,e.duration+=c.duration),c=[d],c.nalCount=d.length,c.byteLength=d.byteLength,c.pts=d.pts,c.dts=d.dts,c.duration=d.duration):(c.duration+=d.duration,c.nalCount+=d.length,c.byteLength+=d.byteLength,c.push(d))}e.length&&0>=c.duration&&(c.duration=e[e.length-1].duration);e.byteLength+=c.byteLength;e.nalCount+=c.nalCount;e.duration+=c.duration;e.push(c);return e};this.generateSampleTable_=
function(a,b){var c,e=b||0,d=[];for(b=0;b<a.length;b++){var f=a[b];for(c=0;c<f.length;c++){var g=f[c];var h=Y();h.dataOffset=e;h.compositionTimeOffset=g.pts-g.dts;h.duration=g.duration;h.size=4*g.length;h.size+=g.byteLength;g.keyFrame&&(h.flags.dependsOn=2);e+=h.size;d.push(h)}}return d};this.concatenateNalData_=function(a){var b,c,e,d=0,f=new Uint8Array(a.byteLength+4*a.nalCount),g=new DataView(f.buffer);for(b=0;b<a.length;b++){var h=a[b];for(c=0;c<h.length;c++){var l=h[c];for(e=0;e<l.length;e++){var k=
l[e];g.setUint32(d,k.data.byteLength);d+=4;f.set(k.data,d);d+=k.data.byteLength}}}return f};this.alignGopsAtStart_=function(a){var b,c;var e=a.byteLength;var f=a.nalCount;var g=a.duration;for(b=c=0;b<d.length&&c<a.length;){var h=d[b];var l=a[c];if(h.pts===l.pts)break;l.pts>h.pts?b++:(c++,e-=l.byteLength,f-=l.nalCount,g-=l.duration)}if(0===c)return a;if(c===a.length)return null;a=a.slice(c);a.byteLength=e;a.duration=g;a.nalCount=f;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=function(a){var b;
var c=d.length-1;var e=a.length-1;var f=null;for(b=!1;0<=c&&0<=e;){var g=d[c];var h=a[e];if(g.pts===h.pts){b=!0;break}g.pts>h.pts?c--:(c===d.length-1&&(f=e),e--)}if(!b&&null===f)return null;c=b?e:f;if(0===c)return a;a=a.slice(c);c=a.reduce(function(a,b){a.byteLength+=b.byteLength;a.duration+=b.duration;a.nalCount+=b.nalCount;return a},{byteLength:0,duration:0,nalCount:0});a.byteLength=c.byteLength;a.duration=c.duration;a.nalCount=c.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsWith=
function(a){d=a}};ha.prototype=new b;var Pa=function(a,b){"number"===typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts=void 0===a.minSegmentPts?b.pts:Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts=void 0===a.maxSegmentPts?b.pts:Math.max(a.maxSegmentPts,b.pts));"number"===typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),a.minSegmentDts=void 0===a.minSegmentDts?b.dts:Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts=void 0===
a.maxSegmentDts?b.dts:Math.max(a.maxSegmentDts,b.dts))};var lb=function(a){delete a.minSegmentDts;delete a.maxSegmentDts;delete a.minSegmentPts;delete a.maxSegmentPts};var ma=function(a,b){var c=a.minSegmentDts;b||(c-=a.timelineStartInfo.dts);b=a.timelineStartInfo.baseMediaDecodeTime;b=Math.max(0,b+c);"audio"===a.type&&(a=a.samplerate/9E4,b=Math.floor(b*a));return b};var sa=function(a,b){this.numberOfTracks=0;this.metadataStream=b;this.remuxTracks="undefined"!==typeof a.remux?!!a.remux:!0;this.pendingTracks=
[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;sa.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);this.pendingTracks.push(a.track);this.pendingBoxes.push(a.boxes);this.pendingBytes+=a.boxes.byteLength;"video"===a.track.type&&(this.videoTrack=a.track);"audio"===a.track.type&&(this.audioTrack=a.track)}};sa.prototype=new b;
sa.prototype.flush=function(a){var b=0,c={captions:[],captionStreams:{},metadata:[],info:{}},e=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(e=this.videoTrack.timelineStartInfo.pts,W.forEach(function(a){c.info[a]=this.videoTrack[a]},this)):this.audioTrack&&
(e=this.audioTrack.timelineStartInfo.pts,V.forEach(function(a){c.info[a]=this.audioTrack[a]},this));c.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;a=wa.initSegment(this.pendingTracks);c.initSegment=new Uint8Array(a.byteLength);c.initSegment.set(a);c.data=new Uint8Array(this.pendingBytes);for(a=0;a<this.pendingBoxes.length;a++)c.data.set(this.pendingBoxes[a],b),b+=this.pendingBoxes[a].byteLength;for(a=0;a<this.pendingCaptions.length;a++)b=
this.pendingCaptions[a],b.startTime=b.startPts-e,b.startTime/=9E4,b.endTime=b.endPts-e,b.endTime/=9E4,c.captionStreams[b.stream]=!0,c.captions.push(b);for(a=0;a<this.pendingMetadata.length;a++)b=this.pendingMetadata[a],b.cueTime=b.pts-e,b.cueTime/=9E4,c.metadata.push(b);c.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",
c);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};var qa=function(a){var b=this,c=!0,e,d;qa.prototype.init.call(this);a=a||{};this.baseMediaDecodeTime=a.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var c={};this.transmuxPipeline_=c;c.type="aac";c.metadataStream=new J.MetadataStream;c.aacStream=new La;c.audioTimestampRolloverStream=new J.TimestampRolloverStream("audio");c.timedMetadataTimestampRolloverStream=new J.TimestampRolloverStream("timed-metadata");
c.adtsStream=new Ba;c.coalesceStream=new sa(a,c.metadataStream);c.headOfPipeline=c.aacStream;c.aacStream.pipe(c.audioTimestampRolloverStream).pipe(c.adtsStream);c.aacStream.pipe(c.timedMetadataTimestampRolloverStream).pipe(c.metadataStream).pipe(c.coalesceStream);c.metadataStream.on("timestamp",function(a){c.aacStream.setTimestamp(a.timeStamp)});c.aacStream.on("data",function(e){"timed-metadata"!==e.type||c.audioSegmentStream||(d=d||{timelineStartInfo:{baseMediaDecodeTime:b.baseMediaDecodeTime},codec:"adts",
type:"audio"},c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new ea(d,a),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream))});c.coalesceStream.on("data",this.trigger.bind(this,"data"));c.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var c={};this.transmuxPipeline_=c;c.type="ts";c.metadataStream=new J.MetadataStream;c.packetStream=new J.TransportPacketStream;c.parseStream=new J.TransportParseStream;c.elementaryStream=new J.ElementaryStream;
c.videoTimestampRolloverStream=new J.TimestampRolloverStream("video");c.audioTimestampRolloverStream=new J.TimestampRolloverStream("audio");c.timedMetadataTimestampRolloverStream=new J.TimestampRolloverStream("timed-metadata");c.adtsStream=new Ba;c.h264Stream=new L;c.captionStream=new J.CaptionStream;c.coalesceStream=new sa(a,c.metadataStream);c.headOfPipeline=c.packetStream;c.packetStream.pipe(c.parseStream).pipe(c.elementaryStream);c.elementaryStream.pipe(c.videoTimestampRolloverStream).pipe(c.h264Stream);
c.elementaryStream.pipe(c.audioTimestampRolloverStream).pipe(c.adtsStream);c.elementaryStream.pipe(c.timedMetadataTimestampRolloverStream).pipe(c.metadataStream).pipe(c.coalesceStream);c.h264Stream.pipe(c.captionStream).pipe(c.coalesceStream);c.elementaryStream.on("data",function(f){var g;if("metadata"===f.type){for(g=f.tracks.length;g--;)e||"video"!==f.tracks[g].type?d||"audio"!==f.tracks[g].type||(d=f.tracks[g],d.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime):(e=f.tracks[g],e.timelineStartInfo.baseMediaDecodeTime=
b.baseMediaDecodeTime);e&&!c.videoSegmentStream&&(c.coalesceStream.numberOfTracks++,c.videoSegmentStream=new ha(e,a),c.videoSegmentStream.on("timelineStartInfo",function(a){d&&(d.timelineStartInfo=a,c.audioSegmentStream.setEarliestDts(a.dts))}),c.videoSegmentStream.on("processedGopsInfo",b.trigger.bind(b,"gopInfo")),c.videoSegmentStream.on("baseMediaDecodeTime",function(a){d&&c.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),c.h264Stream.pipe(c.videoSegmentStream).pipe(c.coalesceStream));d&&!c.audioSegmentStream&&
(c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new ea(d,a),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream))}});c.coalesceStream.on("data",this.trigger.bind(this,"data"));c.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(a){var b=this.transmuxPipeline_;this.baseMediaDecodeTime=a;d&&(d.timelineStartInfo.dts=void 0,d.timelineStartInfo.pts=void 0,lb(d),d.timelineStartInfo.baseMediaDecodeTime=a,b.audioTimestampRolloverStream&&b.audioTimestampRolloverStream.discontinuity());
e&&(b.videoSegmentStream&&(b.videoSegmentStream.gopCache_=[],b.videoTimestampRolloverStream.discontinuity()),e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,lb(e),b.captionStream.reset(),e.timelineStartInfo.baseMediaDecodeTime=a);b.timedMetadataTimestampRolloverStream&&b.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){d&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};this.alignGopsWith=function(a){e&&this.transmuxPipeline_.videoSegmentStream&&
this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)};this.push=function(a){if(c){var b=Z(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();c=!1}this.transmuxPipeline_.headOfPipeline.push(a)};this.flush=function(){c=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};qa.prototype=new b;var ua=function(){function a(a,
b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),Qa=function(a){a.on("data",function(a){var b=a.initSegment;a.initSegment={data:b.buffer,byteOffset:b.byteOffset,byteLength:b.byteLength};b=a.data;a.data=b.buffer;e.postMessage({action:"data",segment:a,byteOffset:b.byteOffset,byteLength:b.byteLength},[a.data])});if(a.captionStream)a.captionStream.on("data",
function(a){e.postMessage({action:"caption",data:a})});a.on("done",function(a){e.postMessage({action:"done"})});a.on("gopInfo",function(a){e.postMessage({action:"gopInfo",gopInfo:a})})},ya=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.options=b||{};this.init()}ua(a,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new qa(this.options);Qa(this.transmuxer)}},{key:"push",value:function(a){a=new Uint8Array(a.data,
a.byteOffset,a.byteLength);this.transmuxer.push(a)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(a){this.transmuxer.setBaseMediaDecodeTime(Math.round(9E4*(a.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(a){this.transmuxer.setAudioAppendStart(Math.ceil(9E4*a.appendStart))}},{key:"flush",value:function(a){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())}}]);
return a}();return new function(a){a.onmessage=function(a){if("init"===a.data.action&&a.data.options)this.messageHandlers=new ya(a.data.options);else if(this.messageHandlers||(this.messageHandlers=new ya),a.data&&a.data.action&&"init"!==a.data.action&&this.messageHandlers[a.data.action])this.messageHandlers[a.data.action](a.data)}}(c)})()}),nj=function(a){var b={type:"",parameters:{}};a=a.trim().split(";");b.type=a.shift().trim();a.forEach(function(a){var c=a.trim().split("=");1<c.length&&(a=c[0].replace(/"/g,
"").trim(),c=c[1].replace(/"/g,"").trim(),b.parameters[a]=c)});return b},Vi=function(a){return a.map(function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a,b,c){a=("00"+Number(b).toString(16)).slice(-2);c=("00"+Number(c).toString(16)).slice(-2);return"avc1."+a+"00"+c})})},pj=function(a,b){var c=a.addSourceBuffer(b),e=Object.create(null);e.updating=!1;e.realBuffer_=c;a=function(a){"function"===typeof c[a]?e[a]=function(){return c[a].apply(c,arguments)}:"undefined"===typeof e[a]&&Object.defineProperty(e,
a,{get:function(){return c[a]},set:function(b){return c[a]=b}})};for(var d in c)a(d);return e},of=function(a,b,c){if(!b||!a.length)return[];b=Math.ceil(9E4*(b.currentTime()-c+3));for(c=0;c<a.length&&!(a[c].pts>b);c++);return a.slice(c)},oj=function(a){function b(a,c){qb(this,b);var e=ec(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,J.EventTarget));e.timestampOffset_=0;e.pendingBuffers_=[];e.bufferUpdating_=!1;e.mediaSource_=a;e.codecs_=c;e.audioCodec_=null;e.videoCodec_=null;e.audioDisabled_=
!1;e.appendAudioInitSegment_=!0;e.gopBuffer_=[];e.timeMapping_=0;e.safeAppend_=11<=J.browser.IE_VERSION;a={remux:!1,alignGopsAtEnd:e.safeAppend_};e.codecs_.forEach(function(a){/mp4a\.\d+.\d+/i.test(a)?e.audioCodec_=a:/avc1\.[\da-f]+/i.test(a)&&(e.videoCodec_=a)});e.transmuxer_=new mj;e.transmuxer_.postMessage({action:"init",options:a});e.transmuxer_.onmessage=function(a){if("data"===a.data.action)return e.data_(a);if("done"===a.data.action)return e.done_(a);if("gopInfo"===a.data.action)return e.appendGopInfo_(a)};
Object.defineProperty(e,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"===typeof a&&0<=a&&(this.timestampOffset_=a,this.appendAudioInitSegment_=!0,this.timeMapping_=this.gopBuffer_.length=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a}))}});Object.defineProperty(e,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(a){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=
a);this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=a)}});Object.defineProperty(e,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(e,"buffered",{get:function(){var a=null,b=null,c=0,e=[],d=[];if(!this.videoBuffer_&&!this.audioBuffer_)return J.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_||this.audioDisabled_)return this.videoBuffer_.buffered;
if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return J.createTimeRange();for(var f=this.videoBuffer_.buffered,g=this.audioBuffer_.buffered,h=f.length;h--;)e.push({time:f.start(h),type:"start"}),e.push({time:f.end(h),type:"end"});for(h=g.length;h--;)e.push({time:g.start(h),type:"start"}),e.push({time:g.end(h),type:"end"});e.sort(function(a,b){return a.time-b.time});for(h=0;h<e.length;h++)"start"===e[h].type?(c++,2===c&&(a=e[h].time)):"end"===e[h].type&&(c--,1===c&&
(b=e[h].time)),null!==a&&null!==b&&(d.push([a,b]),b=a=null);return J.createTimeRanges(d)}});return e}vb(b,a);ib(b,[{key:"data_",value:function(a){var b=a.data.segment;b.data=new Uint8Array(b.data,a.data.byteOffset,a.data.byteLength);b.initSegment=new Uint8Array(b.initSegment.data,b.initSegment.byteOffset,b.initSegment.byteLength);a=this.mediaSource_.player_;if(b.captions&&b.captions.length){this.inbandTextTracks_||(this.inbandTextTracks_={});for(var c in b.captionStreams)if(!this.inbandTextTracks_[c]){a.tech_.trigger({type:"usage",
name:"hls-608"});var e=a.textTracks().getTrackById(c);this.inbandTextTracks_[c]=e?e:a.addRemoteTextTrack({kind:"captions",id:c,label:c},!1).track}}b.metadata&&b.metadata.length&&!this.metadataTrack_&&(this.metadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,this.metadataTrack_.inBandMetadataTrackDispatchType=b.metadata.dispatchType);this.pendingBuffers_.push(b)}},{key:"done_",value:function(a){"closed"===this.mediaSource_.readyState?this.pendingBuffers_.length=0:
this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var a=this,b=["audio","video"];b.forEach(function(c){if(a[c+"Codec_"]&&!a[c+"Buffer_"]){var e=null;a.mediaSource_[c+"Buffer_"]?(e=a.mediaSource_[c+"Buffer_"],e.updating=!1):(e=pj(a.mediaSource_.nativeMediaSource_,c+'/mp4;codecs="'+a[c+"Codec_"]+'"'),a.mediaSource_[c+"Buffer_"]=e);a[c+"Buffer_"]=e;["update","updatestart","updateend"].forEach(function(d){e.addEventListener(d,function(){if("audio"!==c||!a.audioDisabled_)if("updateend"===
d&&(a[c+"Buffer_"].updating=!1),b.every(function(b){return"audio"===b&&a.audioDisabled_?!0:c!==b&&a[b+"Buffer_"]&&a[b+"Buffer_"].updating?!1:!0}))return a.trigger(d)})})}})}},{key:"appendBuffer",value:function(a){this.bufferUpdating_=!0;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var b=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:b.end(b.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:of(this.gopBuffer_,
this.mediaSource_.player_,this.timeMapping_)});this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(a){var b=this.gopBuffer_;a=a.data.gopInfo;if(a.length)if(this.safeAppend_)b=a.slice();else{var c=a[0].pts,e=0;for(e;e<b.length&&!(b[e].pts>=c);e++);b=b.slice(0,e).concat(a)}this.gopBuffer_=b}},{key:"remove",value:function(a,b){if(this.videoBuffer_){this.videoBuffer_.updating=
!0;this.videoBuffer_.remove(a,b);var c=this.gopBuffer_,e=this.timeMapping_,d=Math.ceil(9E4*(a-e)),f=Math.ceil(9E4*(b-e));e=c.slice();for(var g=c.length;g--&&!(c[g].pts<=f););if(-1!==g){for(f=g+1;f--&&!(c[f].pts<=d););f=Math.max(f,0);e.splice(f,g-f+1)}this.gopBuffer_=e}!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(a,b));hd(a,b,this.metadataTrack_);if(this.inbandTextTracks_)for(var h in this.inbandTextTracks_)hd(a,b,this.inbandTextTracks_[h])}},{key:"processPendingSegments_",
value:function(){var a={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};a=this.pendingBuffers_.reduce(function(a,b){var c=b.type,e=b.data,d=b.initSegment;a[c].segments.push(e);a[c].bytes+=e.byteLength;a[c].initSegment=d;b.captions&&(a.captions=a.captions.concat(b.captions));b.info&&(a[c].info=b.info);b.metadata&&(a.metadata=a.metadata.concat(b.metadata));return a},a);this.videoBuffer_||this.audioBuffer_||(0===a.video.bytes&&(this.videoCodec_=null),0===a.audio.bytes&&
(this.audioCodec_=null),this.createRealSourceBuffers_());a.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:a.audio.info});a.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:a.video.info});this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(a.audio.segments.unshift(a.audio.initSegment),a.audio.bytes+=a.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var b=!1;this.videoBuffer_&&a.video.bytes?(a.video.segments.unshift(a.video.initSegment),
a.video.bytes+=a.video.initSegment.byteLength,this.concatAndAppendSegments_(a.video,this.videoBuffer_),Mi(this,a.captions,a.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(b=!0);!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(a.audio,this.audioBuffer_);this.pendingBuffers_.length=0;b&&this.trigger("updateend");this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(a,b){var c=0,e=void 0;if(a.bytes){e=new Uint8Array(a.bytes);a.segments.forEach(function(a){e.set(a,
c);c+=a.byteLength});try{b.updating=!0,b.appendBuffer(e)}catch(We){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:We.message,originalError:We})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort();!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"});this.pendingBuffers_.length=0;this.bufferUpdating_=!1}}]);return b}(J.EventTarget),Bi=function(a){function b(){qb(this,
b);var a=ec(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),c=void 0;a.nativeMediaSource_=new K.MediaSource;for(c in a.nativeMediaSource_)c in b.prototype||"function"!==typeof a.nativeMediaSource_[c]||(a[c]=a.nativeMediaSource_[c].bind(a.nativeMediaSource_));a.duration_=NaN;Object.defineProperty(a,"duration",{get:function(){return Infinity===this.duration_?this.duration_:this.nativeMediaSource_.duration},set:function(a){this.duration_=a;Infinity!==a&&(this.nativeMediaSource_.duration=a)}});
Object.defineProperty(a,"seekable",{get:function(){return Infinity===this.duration_?J.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}});Object.defineProperty(a,"readyState",{get:function(){return this.nativeMediaSource_.readyState}});Object.defineProperty(a,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}});a.sourceBuffers=[];a.activeSourceBuffers_=[];a.updateActiveSourceBuffers_=function(){a.activeSourceBuffers_.length=0;if(1===a.sourceBuffers.length){var b=
a.sourceBuffers[0];b.appendAudioInitSegment_=!0;b.audioDisabled_=!b.audioCodec_;a.activeSourceBuffers_.push(b)}else{var c=!1,e=!0;for(b=0;b<a.player_.audioTracks().length;b++){var d=a.player_.audioTracks()[b];if(d.enabled&&"main"!==d.kind){c=!0;e=!1;break}}a.sourceBuffers.forEach(function(b,d){b.appendAudioInitSegment_=!0;if(b.videoCodec_&&b.audioCodec_)b.audioDisabled_=c;else if(b.videoCodec_&&!b.audioCodec_)b.audioDisabled_=!0,e=!1;else if(!b.videoCodec_&&b.audioCodec_&&(b.audioDisabled_=d?e:!e,
b.audioDisabled_))return;a.activeSourceBuffers_.push(b)})}};a.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(a){a.appendAudioInitSegment_=!0})};a.onHlsReset_=function(){a.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.postMessage({action:"resetCaptions"})})};a.onHlsSegmentTimeMapping_=function(b){a.sourceBuffers.forEach(function(a){return a.timeMapping_=b.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(a){this.nativeMediaSource_.addEventListener(a,
this.trigger.bind(this))},a);a.on("sourceopen",function(b){if(b=Y.querySelector('[src="'+a.url_+'"]'))a.player_=J(b.parentNode),a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),
a.player_.on("mediachange",a.onPlayerMediachange_)});a.on("sourceended",function(b){b=gi(a.duration);for(var c=0;c<a.sourceBuffers.length;c++){var e=a.sourceBuffers[c];(e=e.metadataTrack_&&e.metadataTrack_.cues)&&e.length&&(e[e.length-1].endTime=b)}});a.on("sourceclose",function(a){this.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.terminate()});this.sourceBuffers.length=0;this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",
this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))});return a}vb(b,a);ib(b,[{key:"addSeekableRange_",value:function(a,b){if(Infinity!==this.duration)throw a=
Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),a.name="InvalidStateError",a.code=11,a;if(b>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))this.nativeMediaSource_.duration=b}},{key:"addSourceBuffer",value:function(a){var b=void 0;b=nj(a);/^(video|audio)\/mp2t$/i.test(b.type)?(a=[],b.parameters&&b.parameters.codecs&&(a=b.parameters.codecs.split(","),a=Vi(a),a=a.filter(function(a){return/mp4a\.\d+.\d+/i.test(a)||/avc1\.[\da-f]+/i.test(a)})),
0===a.length&&(a=["avc1.4d400d","mp4a.40.2"]),b=new oj(this,a),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),b.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):b=this.nativeMediaSource_.addSourceBuffer(a);this.sourceBuffers.push(b);return b}}]);return b}(J.EventTarget),uh=0;J.mediaSources={};var Wi=function(a,b){if(a=J.mediaSources[a])a.trigger({type:"sourceopen",swfId:b});else throw Error("Media Source not found (Video.js)");},Ci=function(){return!!K.MediaSource&&
!!K.MediaSource.isTypeSupported&&K.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},gg=function(){this.MediaSource={open:Wi,supportsNativeMediaSources:Ci};if(Ci())return new Bi;throw Error("Cannot use create a virtual MediaSource for this video");};gg.open=Wi;gg.supportsNativeMediaSources=Ci;var Xi={createObjectURL:function(a){if(a instanceof Bi){var b=K.URL.createObjectURL(a.nativeMediaSource_);return a.url_=b}if(!(a instanceof Bi))return b=K.URL.createObjectURL(a),a.url_=
b;b="blob:vjs-media-source/"+uh;uh++;J.mediaSources[b]=a;return b}};J.MediaSource=gg;J.URL=Xi;var qj=J.mergeOptions,Yi=function(a,b){var c=qj(a,{duration:b.duration,minimumUpdatePeriod:b.minimumUpdatePeriod});for(a=0;a<b.playlists.length;a++){var e=Ge(c,b.playlists[a]);e&&(c=e)}fe(b,function(a,b,e,d){if(a.playlists&&a.playlists.length){var f=a.playlists[0].uri;if(a=Ge(c,a.playlists[0]))c=a,c.mediaGroups[b][e][d].playlists[0]=c.playlists[f]}});return c},Di=function(a){function b(a,c,e,d){qb(this,b);
var f=ec(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));f.hls_=c;f.withCredentials=e;if(!a)throw Error("A non-empty playlist URL or playlist is required");f.on("minimumUpdatePeriod",function(){f.refreshXml_()});f.on("mediaupdatetimeout",function(){f.refreshMedia_()});if("string"===typeof a)return f.srcUrl=a,f.state="HAVE_NOTHING",ec(f);f.masterPlaylistLoader_=d;f.state="HAVE_METADATA";f.started=!0;f.media(a);K.setTimeout(function(){f.trigger("loadedmetadata")},0);return f}vb(b,a);ib(b,[{key:"dispose",
value:function(){this.stopRequest();K.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"media",value:function(a){if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var b=this.state;if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}var c=!this.media_||
a.uri!==this.media_.uri;this.state="HAVE_METADATA";c&&(this.media_&&this.trigger("mediachanging"),this.media_=a,this.refreshMedia_(),"HAVE_MASTER"!==b&&this.trigger("mediachange"))}},{key:"pause",value:function(){this.stopRequest();"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(){this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var a=eb(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});a.uri=this.srcUrl;
for(var b=0;b<a.playlists.length;b++){var c="placeholder-uri-"+b;a.playlists[b].uri=c;a.playlists[c]=a.playlists[b]}fe(a,function(b,c,e,d){b.playlists&&b.playlists.length&&(c="placeholder-uri-"+c+"-"+e+"-"+d,b.playlists[0].uri=c,a.playlists[c]=b.playlists[0])});Tg(a);Wh(a);return a}},{key:"start",value:function(){var a=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,c){if(a.request){a.request=null;if(b)return a.error={status:c.status,
message:"DASH playlist request error at URL: "+a.srcUrl,responseText:c.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.masterXml_=c.responseText;a.masterLoaded_=c.responseHeaders&&c.responseHeaders.date?Date.parse(c.responseHeaders.date):Date.now();a.syncClientServerClock_(a.onClientServerClockSync_.bind(a))}})}},{key:"syncClientServerClock_",value:function(a){var b=this,c=U(Ah(this.masterXml_));if(null===c)return this.clientOffset_=this.masterLoaded_-Date.now(),
a();if("DIRECT"===c.method)return this.clientOffset_=c.value-Date.now(),a();this.request=this.hls_.xhr({uri:qc(this.srcUrl,c.value),method:c.method,withCredentials:this.withCredentials},function(e,d){if(b.request){if(e)return b.clientOffset_=b.masterLoaded_-Date.now(),a();e="HEAD"===c.method?d.responseHeaders&&d.responseHeaders.date?Date.parse(d.responseHeaders.date):b.masterLoaded_:Date.parse(d.responseText);b.clientOffset_=e-Date.now();a()}})}},{key:"onClientServerClockSync_",value:function(){var a=
this;this.master=this.parseMasterXml();this.state="HAVE_MASTER";this.trigger("loadedplaylist");this.media_||this.media(this.master.playlists[0]);K.setTimeout(function(){a.trigger("loadedmetadata")},0);this.master.minimumUpdatePeriod&&K.setTimeout(function(){a.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}},{key:"refreshXml_",value:function(){var a=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,c){if(a.request){a.request=null;if(b)return a.error=
{status:c.status,message:"DASH playlist request error at URL: "+a.srcUrl,responseText:c.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.masterXml_=c.responseText;b=a.parseMasterXml();a.master=Yi(a.master,b);K.setTimeout(function(){a.trigger("minimumUpdatePeriod")},a.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(){var a=this,b=void 0,c=void 0;this.masterPlaylistLoader_?(b=this.masterPlaylistLoader_.master,c=this.masterPlaylistLoader_.parseMasterXml()):
(b=this.master,c=this.parseMasterXml());(b=Yi(b,c))?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=b:this.master=b,this.media_=b.playlists[this.media_.uri]):this.trigger("playlistunchanged");this.media().endList||(this.mediaUpdateTimeout=K.setTimeout(function(){a.trigger("mediaupdatetimeout")},Xh(this.media(),!!b)));this.trigger("loadedplaylist")}}]);return b}(J.EventTarget),hg=function(a){return J.log.debug?J.log.debug.bind(J,"VHS:",a+" >"):function(){}},rj=function(){function a(b,
c,e,d){qb(this,a);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=b;this.processedAppend_=!1;this.type_=e;this.mimeType_=c;this.logger_=hg("SourceUpdater["+e+"]["+c+"]");"closed"===b.readyState?b.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,c,d)):this.createSourceBuffer_(c,d)}ib(a,[{key:"createSourceBuffer_",value:function(a,b){var c=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(a);this.logger_("created SourceBuffer");if(b&&(b.trigger("sourcebufferadded"),
2>this.mediaSource.sourceBuffers.length)){b.on("sourcebufferadded",function(){c.start_()});return}this.start_()}},{key:"start_",value:function(){var a=this;this.started_=!0;this.onUpdateendCallback_=function(){var b=a.pendingCallback_;a.pendingCallback_=null;a.logger_("buffered ["+Ve(a.buffered())+"]");b&&b();a.runCallback_()};this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function(a){var b=this;this.processedAppend_&&this.queueCallback_(function(){b.sourceBuffer_.abort()},
a)}},{key:"appendBuffer",value:function(a,b){var c=this;this.processedAppend_=!0;this.queueCallback_(function(){c.sourceBuffer_.appendBuffer(a)},b)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:J.createTimeRanges()}},{key:"remove",value:function(a,b){var c=this;this.processedAppend_&&this.queueCallback_(function(){c.logger_("remove ["+a+" => "+b+"]");c.sourceBuffer_.remove(a,b)},sc)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||
this.pendingCallback_}},{key:"timestampOffset",value:function(a){var b=this;"undefined"!==typeof a&&(this.queueCallback_(function(){b.sourceBuffer_.timestampOffset=a}),this.timestampOffset_=a);return this.timestampOffset_}},{key:"queueCallback_",value:function(a,b){this.callbacks_.push([a.bind(this),b]);this.runCallback_()}},{key:"runCallback_",value:function(){if(!this.updating()&&this.callbacks_.length&&this.started_){var a=this.callbacks_.shift();this.pendingCallback_=a[1];a[0]()}}},{key:"dispose",
value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]);return a}(),Cc={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Zi=function(a){var b={};a.byterange&&(a=a.byterange,b.Range="bytes="+a.offset+"-"+(a.offset+a.length-1));return b},$i=function(a){a.forEach(function(a){a.abort()})},
sj=function(a){var b=a.target;b=Date.now()-b.requestTime;b={bandwidth:Infinity,bytesReceived:0,roundTripTime:b||0};b.bytesReceived=a.loaded;b.bandwidth=Math.floor(b.bytesReceived/b.roundTripTime*8E3);return b},Ei=function(a,b){return b.timedout?{status:b.status,message:"HLS request timed-out at URL: "+b.uri,code:-101,xhr:b}:b.aborted?{status:b.status,message:"HLS request aborted at URL: "+b.uri,code:-102,xhr:b}:a?{status:b.status,message:"HLS request errored at URL: "+b.uri,code:2,xhr:b}:null},tj=
function(a,b){return function(c,e){var d=e.response;if(c=Ei(c,e))return b(c,a);if(16!==d.byteLength)return b({status:e.status,message:"Invalid HLS key at URL: "+e.uri,code:2,xhr:e},a);e=new DataView(d);a.key.bytes=new Uint32Array([e.getUint32(0),e.getUint32(4),e.getUint32(8),e.getUint32(12)]);return b(null,a)}},uj=function(a,b){return function(c,e){var d=e.response;if(c=Ei(c,e))return b(c,a);if(0===d.byteLength)return b({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:2,xhr:e},
a);a.map.bytes=new Uint8Array(e.response);return b(null,a)}},vj=function(a,b){return function(c,e){var d=e.response;if(c=Ei(c,e))return b(c,a);if(0===d.byteLength)return b({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:2,xhr:e},a);a.stats={bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0};a.key?a.encryptedBytes=new Uint8Array(e.response):a.bytes=new Uint8Array(e.response);return b(null,a)}},wj=function(a,b,c){a.addEventListener("message",
function he(e){if(e.data.source===b.requestId)return a.removeEventListener("message",he),e=e.data.decrypted,b.bytes=new Uint8Array(e.bytes,e.byteOffset,e.byteLength),c(null,b)});a.postMessage(Wg({source:b.requestId,encrypted:b.encryptedBytes,key:b.key.bytes,iv:b.key.iv}),[b.encryptedBytes.buffer,b.key.bytes.buffer])},xj=function(a){return a.reduce(function(a,b){return b.code>a.code?b:a})},yj=function(a,b,c){var e=[],d=0;return function(f,g){f&&($i(a),e.push(f));d+=1;if(d===a.length)return g.endOfAllRequests=
Date.now(),0<e.length?(f=xj(e),c(f,g)):g.encryptedBytes?wj(b,g,c):c(null,g)}},zj=function(a,b){return function(c){a.stats=J.mergeOptions(a.stats,sj(c));!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=Date.now());return b(c,a)}},Aj=function(a,b,c,e,d,f){var g=[];c=yj(g,c,f);if(e.key){f=J.mergeOptions(b,{uri:e.key.resolvedUri,responseType:"arraybuffer"});var h=tj(e,c);f=a(f,h);g.push(f)}e.map&&!e.map.bytes&&(f=J.mergeOptions(b,{uri:e.map.resolvedUri,responseType:"arraybuffer",
headers:Zi(e.map)}),h=uj(e,c),f=a(f,h),g.push(f));b=J.mergeOptions(b,{uri:e.resolvedUri,responseType:"arraybuffer",headers:Zi(e)});c=vj(e,c);a=a(b,c);a.addEventListener("progress",zj(e,d));g.push(a);return function(){return $i(g)}},aj={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},kg=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b={codecCount:0},c;b.codecCount=a.split(",").length;b.codecCount=b.codecCount||2;if(c=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(a))b.videoCodec=
c[2],b.videoObjectTypeIndicator=c[3];b.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(a);b.audioProfile=b.audioProfile&&b.audioProfile[2];return b},Bj=function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a){return Vi([a])[0]})},Fi=function(a,b,c){return a+"/"+b+'; codecs="'+c.filter(function(a){return!!a}).join(", ")+'"'},Cj=function(a,b){if(!a.mediaGroups.AUDIO||!b)return null;a=a.mediaGroups.AUDIO[b];if(!a)return null;for(var c in a)if(b=a[c],b.default&&b.playlists)return kg(b.playlists[0].attributes.CODECS).audioProfile;
return null},bj=function(a,b){return a?(a=K.getComputedStyle(a))?a[b]:"":""},lg=function(a,b){var c=a.slice();a.sort(function(a,e){var d=b(a,e);return 0===d?c.indexOf(a)-c.indexOf(e):d})},Gi=function(a,b){var c=void 0,e=void 0;a.attributes.BANDWIDTH&&(c=a.attributes.BANDWIDTH);c=c||K.Number.MAX_VALUE;b.attributes.BANDWIDTH&&(e=b.attributes.BANDWIDTH);e=e||K.Number.MAX_VALUE;return c-e},Dj=function(a,b,c,e){a=a.playlists.map(function(a){var b=a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width;
var c=a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height;var e=(e=a.attributes.BANDWIDTH)||K.Number.MAX_VALUE;return{bandwidth:e,width:b,height:c,playlist:a}});lg(a,function(a,b){return a.bandwidth-b.bandwidth});a=a.filter(function(a){return!pb.isIncompatible(a.playlist)});var d=a.filter(function(a){return pb.isEnabled(a.playlist)});d.length||(d=a.filter(function(a){return!pb.isDisabled(a.playlist)}));var f=d.filter(function(a){return a.bandwidth*Cc.BANDWIDTH_VARIANCE<b}),g=f[f.length-1],h=f.filter(function(a){return a.bandwidth===
g.bandwidth})[0];f=f.filter(function(a){return a.width&&a.height});lg(f,function(a,b){return a.width-b.width});var l=f.filter(function(a){return a.width===c&&a.height===e});g=l[l.length-1];l=l.filter(function(a){return a.bandwidth===g.bandwidth})[0];var k=void 0,m=void 0;m=void 0;l||(k=f.filter(function(a){return a.width>c||a.height>e}),m=k.filter(function(a){return a.width===k[0].width&&a.height===k[0].height}),g=m[m.length-1],m=m.filter(function(a){return a.bandwidth===g.bandwidth})[0]);return(a=
m||l||h||d[0]||a[0])?a.playlist:null},Ej=function(a){var b=a.currentTime,c=a.bandwidth,e=a.duration,d=a.segmentDuration,f=a.timeUntilRebuffer,g=a.currentTimeline,h=a.syncController;a=a.master.playlists.filter(function(a){return!pb.isIncompatible(a)});var l=a.filter(pb.isEnabled);l.length||(l=a.filter(function(a){return!pb.isDisabled(a)}));a=l.filter(pb.hasAttribute.bind(null,"BANDWIDTH")).map(function(a){var l=h.getSyncPoint(a,e,g,b)?1:2;l=pb.estimateSegmentRequestTime(d,c,a)*l-f;return{playlist:a,
rebufferingImpact:l}});l=a.filter(function(a){return 0>=a.rebufferingImpact});lg(l,function(a,b){return Gi(b.playlist,a.playlist)});if(l.length)return l[0];lg(a,function(a,b){return a.rebufferingImpact-b.rebufferingImpact});return a[0]||null},cj=function(a,b,c){if(!a||!b)return!1;c=c===a.segments.length;return a.endList&&"open"===b.readyState&&c},Fj=function(a,b,c){return"main"===a&&b&&c?c.containsAudio||c.containsVideo?b.containsVideo&&!c.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":
!b.containsVideo&&c.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null},Gj=function(a){var b=a.segment,c=a.playlist,e=c.mediaSequence,d=c.segments;return["appending ["+a.mediaIndex+"] of ["+e+", "+(e+(void 0===d?[]:d).length)+"] from playlist ["+c.id+"]","["+b.start+" => "+b.end+"] in timeline ["+
a.timeline+"]"].join(" ")},Oi=function(a){function b(a){qb(this,b);var c=ec(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(!a)throw new TypeError("Initialization settings are required");if("function"!==typeof a.currentTime)throw new TypeError("No currentTime getter specified");if(!a.mediaSource)throw new TypeError("No MediaSource specified");c.bandwidth=a.bandwidth;c.throughput={rate:0,count:0};c.roundTrip=NaN;c.resetStats_();c.mediaIndex=null;c.hasPlayed_=a.hasPlayed;c.currentTime_=
a.currentTime;c.seekable_=a.seekable;c.seeking_=a.seeking;c.duration_=a.duration;c.mediaSource_=a.mediaSource;c.hls_=a.hls;c.loaderType_=a.loaderType;c.startingMedia_=void 0;c.segmentMetadataTrack_=a.segmentMetadataTrack;c.goalBufferLength_=a.goalBufferLength;c.sourceType_=a.sourceType;c.state_="INIT";c.checkBufferTimeout_=null;c.error_=void 0;c.currentTimeline_=-1;c.pendingSegment_=null;c.mimeType_=null;c.sourceUpdater_=null;c.xhrOptions_=null;c.activeInitSegmentId_=null;c.initSegments_={};c.decrypter_=
a.decrypter;c.syncController_=a.syncController;c.syncPoint_={segmentIndex:0,time:0};c.syncController_.on("syncinfoupdate",function(){return c.trigger("syncinfoupdate")});c.mediaSource_.addEventListener("sourceopen",function(){return c.ended_=!1});c.fetchAtBuffer_=!1;c.logger_=hg("SegmentLoader["+c.loaderType_+"]");Object.defineProperty(c,"state",{get:function(){return this.state_},set:function(a){a!==this.state_&&(this.logger_(this.state_+" -> "+a),this.state_=a)}});return c}vb(b,a);ib(b,[{key:"resetStats_",
value:function(){this.mediaSecondsLoaded=this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=0}},{key:"dispose",value:function(){this.state="DISPOSED";this.pause();this.abort_();this.sourceUpdater_&&this.sourceUpdater_.dispose();this.resetStats_()}},{key:"abort",value:function(){"WAITING"!==this.state?this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||
this.monitorBuffer_())}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests();this.pendingSegment_=null}},{key:"error",value:function(a){"undefined"!==typeof a&&(this.error_=a);this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function(){this.ended_=!0;this.pause();this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():J.createTimeRanges()}},{key:"initSegment",value:function(a){var b=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var c=Ma(a),e=this.initSegments_[c];b&&!e&&a.bytes&&(this.initSegments_[c]=e={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes});return e||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){this.monitorBuffer_();if(this.playlist_){this.syncController_.setDateTimeMapping(this.playlist_);
if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){this.state="READY";this.sourceUpdater_=new rj(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(a){var c=this.playlist_,e=this.pendingSegment_;
this.playlist_=a;this.xhrOptions_=b;this.hasPlayed_()||(a.syncInfo={mediaSequence:a.mediaSequence,time:0});this.logger_("playlist update ["+(c?c.id:null)+" => "+a.id+"]");this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();c&&c.uri===a.uri?(b=a.mediaSequence-c.mediaSequence,this.logger_("live window shift ["+b+"]"),null!==this.mediaIndex&&(this.mediaIndex-=b),e&&(e.mediaIndex-=b,0<=e.mediaIndex&&(e.segment=a.segments[e.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(c,
a)):null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(K.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(a,b){this.mimeType_||(this.mimeType_=a,this.sourceBufferEmitter_=b,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(){this.ended_=!1;this.resetLoader();this.remove(0,
this.duration_());this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1;this.resyncLoader()}},{key:"resyncLoader",value:function(){this.syncPoint_=this.mediaIndex=null;this.abort()}},{key:"remove",value:function(a,b){this.sourceUpdater_&&this.sourceUpdater_.remove(a,b);hd(a,b,this.segmentMetadataTrack_)}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&K.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=K.setTimeout(this.monitorBufferTick_.bind(this),
1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&K.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=K.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var a=this.checkBuffer_(this.buffered_(),this.playlist_,
this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(a)if(cj(this.playlist_,this.mediaSource_,a.mediaIndex))this.endOfStream();else if(a.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_()){if(a.timeline!==this.currentTimeline_||null!==a.startOfSegment&&a.startOfSegment<this.sourceUpdater_.timestampOffset())this.syncController_.reset(),a.timestampOffset=a.startOfSegment;this.loadSegment_(a)}}}},{key:"checkBuffer_",value:function(a,
b,c,e,d,f){var g=0;a.length&&(g=a.end(a.length-1));a=Math.max(0,g-d);if(!b.segments.length||a>=this.goalBufferLength_()||!e&&1<=a)return null;if(null===f)return c=this.getSyncSegmentCandidate_(b),this.generateSegmentInfo_(b,c,null,!0);if(null!==c)return g=(e=b.segments[c])&&e.end?e.end:g,this.generateSegmentInfo_(b,c+1,g,!1);g=this.fetchAtBuffer_?pb.getMediaInfoForTime(b,g,f.segmentIndex,f.time):pb.getMediaInfoForTime(b,d,f.segmentIndex,f.time);c=g.mediaIndex;g=g.startTime;return this.generateSegmentInfo_(b,
c,g,!1)}},{key:"getSyncSegmentCandidate_",value:function(a){var b=this;if(-1===this.currentTimeline_)return 0;var c=a.segments.map(function(a,b){return{timeline:a.timeline,segmentIndex:b}}).filter(function(a){return a.timeline===b.currentTimeline_});return c.length?c[Math.min(c.length-1,1)].segmentIndex:Math.max(a.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(a,b,c,e){if(0>b||b>=a.segments.length)return null;var d=a.segments[b];return{requestId:"segment-loader-"+Math.random(),
uri:d.resolvedUri,mediaIndex:b,isSyncRequest:e,startOfSegment:c,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:d.timeline,duration:d.duration,segment:d}}},{key:"abortRequestEarly_",value:function(a){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||1E3>Date.now()-(a.firstBytesReceivedAt||Date.now()))return!1;var b=this.currentTime_(),c=a.bandwidth,e=this.pendingSegment_.duration,d=pb.estimateSegmentRequestTime(e,c,this.playlist_,
a.bytesReceived);a=fi(this.buffered_(),b,this.hls_.tech_.playbackRate())-1;if(d<=a)return!1;if(b=Ej({master:this.hls_.playlists.master,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:e,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_})){c=d-a-b.rebufferingImpact;e=.5;a<=Fc&&(e=1);if(!b.playlist||b.playlist.uri===this.playlist_.uri||c<e)return!1;this.bandwidth=b.playlist.attributes.BANDWIDTH*Cc.BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");
return!0}}},{key:"handleProgress_",value:function(a,b){this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(b.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(a){this.state="WAITING";this.pendingSegment_=a;this.trimBackBuffer_(a);a.abortRequests=Aj(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(a),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(a){var b=
this.seekable_();a=this.currentTime_();var c=this.playlist_.targetDuration||10;b=b.length&&0<b.start(0)&&b.start(0)<a?b.start(0):a-30;a=Math.min(b,a-c);0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",value:function(a){var b=a.segment,c={resolvedUri:b.resolvedUri,byterange:b.byterange,requestId:a.requestId};b.key&&(a=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]),c.key={resolvedUri:b.key.resolvedUri,iv:a});b.map&&(c.map=this.initSegment(b.map));return c}},{key:"segmentRequestFinished_",
value:function(a,b){this.mediaRequests+=1;b.stats&&(this.mediaBytesTransferred+=b.stats.bytesReceived,this.mediaTransferDuration+=b.stats.roundTripTime);this.pendingSegment_?b.requestId===this.pendingSegment_.requestId&&(a?(this.pendingSegment_=null,this.state="READY",-102===a.code?this.mediaRequestsAborted+=1:(this.pause(),-101===a.code?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(a),this.trigger("error")))):
(this.bandwidth=b.stats.bandwidth,this.roundTrip=b.stats.roundTripTime,b.map&&(b.map=this.initSegment(b.map,!0)),this.processSegmentResponse_(b))):this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(a){var b=this.pendingSegment_;b.bytes=a.bytes;a.map&&(b.segment.map.bytes=a.map.bytes);b.endOfAllRequests=a.endOfAllRequests;this.handleSegment_()}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_){var b=this.pendingSegment_,c=b.segment,e=this.syncController_.probeSegmentInfo(b);
"undefined"===typeof this.startingMedia_&&e&&(e.containsAudio||e.containsVideo)&&(this.startingMedia_={containsAudio:e.containsAudio,containsVideo:e.containsVideo});if(e=Fj(this.loaderType_,this.startingMedia_,e))this.error({message:e,blacklistDuration:Infinity}),this.trigger("error");else if(b.isSyncRequest)this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";else{null!==b.timestampOffset&&b.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(b.timestampOffset),
this.trigger("timestampoffset"));e=this.syncController_.mappingForTimeline(b.timeline);null!==e&&this.trigger({type:"segmenttimemapping",mapping:e});this.state="APPENDING";if(c.map){var d=Ma(c.map);this.activeInitSegmentId_&&this.activeInitSegmentId_===d||(e=this.initSegment(c.map),this.sourceUpdater_.appendBuffer(e.bytes,function(){a.activeInitSegmentId_=d}))}b.byteLength=b.bytes.byteLength;this.mediaSecondsLoaded="number"===typeof c.start&&"number"===typeof c.end?this.mediaSecondsLoaded+(c.end-
c.start):this.mediaSecondsLoaded+c.duration;this.logger_(Gj(b));this.sourceUpdater_.appendBuffer(b.bytes,this.handleUpdateEnd_.bind(this))}}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(this.pendingSegment_){var a=this.pendingSegment_,b=a.segment,c=null!==this.mediaIndex;this.pendingSegment_=null;this.recordThroughput_(a);this.addSegmentMetadataCue_(a);this.state="READY";this.mediaIndex=a.mediaIndex;this.fetchAtBuffer_=!0;this.currentTimeline_=a.timeline;this.trigger("syncinfoupdate");
b.end&&this.currentTime_()-b.end>3*a.playlist.targetDuration?this.resetEverything():(c&&this.trigger("bandwidthupdate"),this.trigger("progress"),cj(a.playlist,this.mediaSource_,a.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}else this.state="READY",this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(a){var b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1;this.throughput.rate+=(Math.floor(a.byteLength/c*8E3)-b)/++this.throughput.count}},
{key:"addSegmentMetadataCue_",value:function(a){if(this.segmentMetadataTrack_){var b=a.segment,c=b.start;b=b.end;if("number"===typeof c&&isFinite(c)&&"number"===typeof b&&isFinite(b)){hd(c,b,this.segmentMetadataTrack_);var e=K.WebKitDataCue||K.VTTCue;a={bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.uri,start:c,end:b};var d=JSON.stringify(a);c=new e(c,
b,d);c.value=a;this.segmentMetadataTrack_.addCue(c)}}}}]);return b}(J.EventTarget),dj=new Uint8Array(["\n","\n"].map(function(a){return a.charCodeAt(0)})),Mj=function(a){function b(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};qb(this,b);c=ec(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));c.mediaSource_=null;c.subtitlesTrack_=null;return c}vb(b,a);ib(b,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return J.createTimeRanges();
var a=this.subtitlesTrack_.cues;return J.createTimeRanges([[a[0].startTime,a[a.length-1].startTime]])}},{key:"initSegment",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var c=Ma(a),e=this.initSegments_[c];b&&!e&&a.bytes&&(b=new Uint8Array(dj.byteLength+a.bytes.byteLength),b.set(a.bytes),b.set(dj,a.bytes.byteLength),this.initSegments_[c]=e={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:b});return e||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&
this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function(a){if("undefined"===typeof a)return this.subtitlesTrack_;this.subtitlesTrack_=a;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_}},{key:"remove",value:function(a,b){hd(a,b,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var a=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,
this.duration_(),this.currentTimeline_,this.currentTime_()));var b=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(b=this.skipEmptySegments_(b))null===this.syncController_.timestampOffsetForTimeline(b.timeline)?(this.syncController_.one("timestampoffset",function(){a.state="READY";a.paused()||a.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(b)}},{key:"skipEmptySegments_",value:function(a){for(;a&&a.segment.empty;)a=
this.generateSegmentInfo_(a.playlist,a.mediaIndex+1,a.startOfSegment+a.duration,a.isSyncRequest);return a}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var b=this.pendingSegment_,c=b.segment;if("function"!==typeof K.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var e=function(){a.handleSegment_()};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",e);this.subtitlesTrack_.tech_.one("vttjserror",
function(){a.subtitlesTrack_.tech_.off("vttjsloaded",e);a.error({message:"Error loading vtt.js"});a.state="READY";a.pause();a.trigger("error")})}else{c.requested=!0;try{this.parseVTTCues_(b)}catch(We){return this.error({message:We.message}),this.state="READY",this.pause(),this.trigger("error")}this.updateTimeMapping_(b,this.syncController_.timelines[b.timeline],this.playlist_);b.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(b.byteLength=b.bytes.byteLength,
this.mediaSecondsLoaded+=c.duration,b.cues.length&&this.remove(b.cues[0].endTime,b.cues[b.cues.length-1].endTime),b.cues.forEach(function(b){a.subtitlesTrack_.addCue(b)}),this.handleUpdateEnd_())}}else this.state="READY"}},{key:"parseVTTCues_",value:function(a){var b=void 0,c=!1;"function"===typeof K.TextDecoder?b=new K.TextDecoder("utf8"):(b=K.WebVTT.StringDecoder(),c=!0);b=new K.WebVTT.Parser(K,K.vttjs,b);a.cues=[];a.timestampmap={MPEGTS:0,LOCAL:0};b.oncue=a.cues.push.bind(a.cues);b.ontimestampmap=
function(b){return a.timestampmap=b};b.onparsingerror=function(a){J.log.warn("Error encountered when parsing cues: "+a.message)};if(a.segment.map){var e=a.segment.map.bytes;c&&(e=String.fromCharCode.apply(null,e));b.parse(e)}e=a.bytes;c&&(e=String.fromCharCode.apply(null,e));b.parse(e);b.flush()}},{key:"updateTimeMapping_",value:function(a,b,c){var e=a.segment;if(b)if(a.cues.length){var d=a.timestampmap,f=d.MPEGTS/9E4-d.LOCAL+b.mapping;a.cues.forEach(function(a){a.startTime+=f;a.endTime+=f});c.syncInfo||
(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:Math.min(a.cues[0].startTime,a.cues[a.cues.length-1].startTime-e.duration)})}else e.empty=!0}}]);return b}(Oi),Nj=function(a,b){if(a.segments)for(var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,e=void 0,d=0;d<a.segments.length;d++){var f=a.segments[d];if(!e)a:{var g=c+f.duration/2;e=b.cues;for(var h=0;h<e.length;h++){var l=e[h];if(g>=l.adStartTime&&g<=l.adEndTime){e=l;break a}}e=null}if(e){if("cueIn"in f){e.endTime=c;e.adEndTime=
c;c+=f.duration;e=null;continue}if(c<e.endTime){c+=f.duration;continue}e.endTime+=f.duration}else"cueOut"in f&&(e=new K.VTTCue(c,c+f.duration,f.cueOut),e.adStartTime=c,e.adEndTime=c+parseFloat(f.cueOut),b.addCue(e)),"cueOutCont"in f&&(g=f.cueOutCont.split("/").map(parseFloat),e=mg(g,2),g=e[0],h=e[1],e=new K.VTTCue(c,c+f.duration,""),e.adStartTime=c-g,e.adEndTime=e.adStartTime+h,b.addCue(e));c+=f.duration}},fj=[{name:"VOD",run:function(a,b,c,e,d){return Infinity!==c?{time:0,segmentIndex:0}:null}},
{name:"ProgramDateTime",run:function(a,b,c,e,d){if(!a.datetimeToDisplayTime)return null;b=b.segments||[];e=c=null;d=d||0;for(var f=0;f<b.length;f++){var g=b[f];if(g.dateTimeObject){g=g.dateTimeObject.getTime()/1E3+a.datetimeToDisplayTime;var h=Math.abs(d-g);if(null!==e&&e<h)break;e=h;c={time:g,segmentIndex:f}}}return c}},{name:"Segment",run:function(a,b,c,e,d){a=b.segments||[];c=b=null;d=d||0;for(var f=0;f<a.length;f++){var g=a[f];if(g.timeline===e&&"undefined"!==typeof g.start){var h=Math.abs(d-
g.start);if(null!==c&&c<h)break;if(!b||null===c||c>=h)c=h,b={time:g.start,segmentIndex:f}}}return b}},{name:"Discontinuity",run:function(a,b,c,e,d){c=null;d=d||0;if(b.discontinuityStarts&&b.discontinuityStarts.length){e=null;for(var f=0;f<b.discontinuityStarts.length;f++){var g=b.discontinuityStarts[f],h=a.discontinuities[b.discontinuitySequence+f+1];if(h){var l=Math.abs(d-h.time);if(null!==e&&e<l)break;if(!c||null===e||e>=l)e=l,c={time:h.time,segmentIndex:g}}}}return c}},{name:"Playlist",run:function(a,
b,c,e,d){return b.syncInfo?{time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence}:null}}],Oj=function(a){function b(){qb(this,b);var a=ec(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.inspectCache_=void 0;a.timelines=[];a.discontinuities=[];a.datetimeToDisplayTime=null;a.logger_=hg("SyncController");return a}vb(b,a);ib(b,[{key:"getSyncPoint",value:function(a,b,c,e){a=this.runStrategies_(a,b,c,e);return a.length?this.selectSyncPoint_(a,{key:"time",value:e}):null}},
{key:"getExpiredTime",value:function(a,b){if(!a||!a.segments)return null;b=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!b.length)return null;b=this.selectSyncPoint_(b,{key:"segmentIndex",value:0});0<b.segmentIndex&&(b.time*=-1);return Math.abs(b.time+Ue(a,b.segmentIndex,0))}},{key:"runStrategies_",value:function(a,b,c,e){for(var d=[],f=0;f<fj.length;f++){var g=fj[f],h=g.run(this,a,b,c,e);h&&(h.strategy=g.name,d.push({strategy:g.name,syncPoint:h}))}return d}},{key:"selectSyncPoint_",value:function(a,
b){for(var c=a[0].syncPoint,e=Math.abs(a[0].syncPoint[b.key]-b.value),d=a[0].strategy,f=1;f<a.length;f++){var g=Math.abs(a[f].syncPoint[b.key]-b.value);g<e&&(e=g,c=a[f].syncPoint,d=a[f].strategy)}this.logger_("syncPoint for ["+b.key+": "+b.value+"] chosen with strategy"+(" ["+d+"]: [time:"+c.time+",")+(" segmentIndex:"+c.segmentIndex+"]"));return c}},{key:"saveExpiredSegmentInfo",value:function(a,b){for(var c=b.mediaSequence-a.mediaSequence-1;0<=c;c--){var e=a.segments[c];if(e&&"undefined"!==typeof e.start){b.syncInfo=
{mediaSequence:a.mediaSequence+c,time:e.start};this.logger_("playlist refresh sync: [time:"+b.syncInfo.time+","+(" mediaSequence: "+b.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(a){!this.datetimeToDisplayTime&&a.segments&&a.segments.length&&a.segments[0].dateTimeObject&&(this.datetimeToDisplayTime=-(a.segments[0].dateTimeObject.getTime()/1E3))}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(a){var b=
a.segment,c=a.playlist,e;(e=b.map?this.probeMp4Segment_(a):this.probeTsSegment_(a))&&this.calculateSegmentTimeMapping_(a,e)&&(this.saveDiscontinuitySyncInfo_(a),c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:b.start}));return e}},{key:"probeMp4Segment_",value:function(a){var b=a.segment,c=Te.timescale(b.map.bytes);c=Te.startTime(c,a.bytes);null!==a.timestampOffset&&(a.timestampOffset-=c);return{start:c,end:c+b.duration}}},{key:"probeTsSegment_",value:function(a){var b=a.bytes;
a=this.inspectCache_;var c=73===b[0]&&68===b[1]&&51===b[2]?!0:!1;if(c)b:{var e=!1,d=0,f=null;c=null;for(var g,h=0,l;3<=b.length-h;){switch(Ad.parseType(b,h)){case "timed-metadata":if(10>b.length-h){e=!0;break}g=Ad.parseId3TagSize(b,h);if(g>b.length){e=!0;break}null===c&&(l=b.subarray(h,h+g),c=Ad.parseAacTimestamp(l));h+=g;break;case "audio":if(7>b.length-h){e=!0;break}g=Ad.parseAdtsSize(b,h);if(g>b.length){e=!0;break}null===f&&(l=b.subarray(h,h+g),f=Ad.parseSampleRate(l));d++;h+=g;break;default:h++}if(e){b=
null;break b}}null===f||null===c?b=null:(b=9E4/f,b={audio:[{type:"audio",dts:c,pts:c},{type:"audio",dts:c+1024*d*b,pts:c+1024*d*b}]})}else{c={pid:null,table:null};e={};f=0;for(g=188;g<b.byteLength;)if(71===b[f]&&71===b[g]){h=b.subarray(f,g);l=Na.parseType(h,c.pid);switch(l){case "pat":c.pid||(c.pid=Na.parsePat(h));break;case "pmt":c.table||(c.table=Na.parsePmt(h))}if(c.pid&&c.table)break;f+=188;g+=188}else f++,g++;for(d in c.table)if(c.table.hasOwnProperty(d))switch(c.table[d]){case bc.H264_STREAM_TYPE:e.video=
[];var k;g=b;h=c;l=e;var m=0,n=188,q=!1,p=[];for(k=0;n<g.byteLength;)if(71===g[m]&&71===g[n]){f=g.subarray(m,n);var t=Na.parseType(f,h.pid);switch(t){case "pes":var r=Na.parsePesType(f,h.table);t=Na.parsePayloadUnitStartIndicator(f);if("video"===r&&(t&&!q&&(r=Na.parsePesTime(f))&&(r.type="video",l.video.push(r),q=!0),!l.firstKeyFrame)){if(t&&0!==k){r=new Uint8Array(k);for(t=0;p.length;)k=p.shift(),r.set(k,t),t+=k.byteLength;Na.videoPacketContainsKeyFrame(r)&&(l.firstKeyFrame=Na.parsePesTime(r),l.firstKeyFrame.type=
"video");k=0}p.push(f);k+=f.byteLength}}if(q&&l.firstKeyFrame)break;m+=188;n+=188}else m++,n++;n=g.byteLength;m=n-188;for(q=!1;0<=m;)if(71===g[m]&&71===g[n]){f=g.subarray(m,n);t=Na.parseType(f,h.pid);switch(t){case "pes":if(r=Na.parsePesType(f,h.table),t=Na.parsePayloadUnitStartIndicator(f),"video"===r&&t&&(r=Na.parsePesTime(f)))r.type="video",l.video.push(r),q=!0}if(q)break;m-=188;n-=188}else m--,n--;0===e.video.length&&delete e.video;break;case bc.ADTS_STREAM_TYPE:e.audio=[];f=b;g=c;h=e;l=0;m=188;
for(n=!1;m<f.byteLength;)if(71===f[l]&&71===f[m]){q=f.subarray(l,m);p=Na.parseType(q,g.pid);switch(p){case "pes":if(k=Na.parsePesType(q,g.table),p=Na.parsePayloadUnitStartIndicator(q),"audio"===k&&p&&(q=Na.parsePesTime(q)))q.type="audio",h.audio.push(q),n=!0}if(n)break;l+=188;m+=188}else l++,m++;m=f.byteLength;l=m-188;for(n=!1;0<=l;)if(71===f[l]&&71===f[m]){q=f.subarray(l,m);p=Na.parseType(q,g.pid);switch(p){case "pes":if(k=Na.parsePesType(q,g.table),p=Na.parsePayloadUnitStartIndicator(q),"audio"===
k&&p&&(q=Na.parsePesTime(q)))q.type="audio",h.audio.push(q),n=!0}if(n)break;l-=188;m-=188}else l--,m--;0===e.audio.length&&delete e.audio}b=e}b&&(b.audio||b.video)?(Lf(b,a),a=b):a=null;d=b=void 0;if(!a)return null;a.video&&2===a.video.length?(this.inspectCache_=a.video[1].dts,b=a.video[0].dtsTime,d=a.video[1].dtsTime):a.audio&&2===a.audio.length&&(this.inspectCache_=a.audio[1].dts,b=a.audio[0].dtsTime,d=a.audio[1].dtsTime);return{start:b,end:d,containsVideo:a.video&&2===a.video.length,containsAudio:a.audio&&
2===a.audio.length}}},{key:"timestampOffsetForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].time}},{key:"mappingForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].mapping}},{key:"calculateSegmentTimeMapping_",value:function(a,b){var c=a.segment,e=this.timelines[a.timeline];if(null!==a.timestampOffset)e={time:a.startOfSegment,mapping:a.startOfSegment-b.start},this.timelines[a.timeline]=e,this.trigger("timestampoffset"),
this.logger_("time mapping for timeline "+a.timeline+": "+("[time: "+e.time+"] [mapping: "+e.mapping+"]")),c.start=a.startOfSegment,c.end=b.end+e.mapping;else if(e)c.start=b.start+e.mapping,c.end=b.end+e.mapping;else return!1;return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(a){var b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts&&b.discontinuityStarts.length)for(var e=0;e<b.discontinuityStarts.length;e++){var d=
b.discontinuityStarts[e],f=b.discontinuitySequence+e+1,g=d-a.mediaIndex,h=Math.abs(g);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>h)d=0>g?c.start-Ue(b,a.mediaIndex,d):c.end+Ue(b,a.mediaIndex+1,d),this.discontinuities[f]={time:d,accuracy:h}}}}]);return b}(J.EventTarget),Pj=new Va("./decrypter-worker.worker.js",function(a,b){var c=this;(function(){var b="undefined"!==typeof a?a:"undefined"!==typeof global?global:"undefined"!==typeof c?c:{},e="undefined"!==typeof a?a:"undefined"!==
typeof b?b:"undefined"!==typeof c?c:{},d=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),g=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
("undefined"===typeof b?"undefined":$a(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},h=null,l=function(){function a(b){d(this,a);if(!h){var c=[[[],[],[],[],[]],[[],[],[],[],[]]],e=c[0],f=c[1],g=e[4],l=f[4],k,m,n,q=[],p=[],t;for(k=0;256>k;k++)p[(q[k]=k<<1^283*(k>>7))^k]=k;for(m=n=0;!g[m];m^=t||1,n=p[n]||1){var r=n^n<<1^n<<2^n<<3^n<<4;r=r>>8^r&255^99;g[m]=r;l[r]=m;
var v=q[k=q[t=q[m]]];var y=16843009*v^65537*k^257*t^16843008*m;v=257*q[r]^16843008*r;for(k=0;4>k;k++)e[k][m]=v=v<<24^v>>>8,f[k][r]=y=y<<24^y>>>8}for(k=0;5>k;k++)e[k]=e[k].slice(0),f[k]=f[k].slice(0);h=c}this._tables=[[h[0][0].slice(),h[0][1].slice(),h[0][2].slice(),h[0][3].slice(),h[0][4].slice()],[h[1][0].slice(),h[1][1].slice(),h[1][2].slice(),h[1][3].slice(),h[1][4].slice()]];c=this._tables[0][4];e=this._tables[1];m=b.length;n=1;if(4!==m&&6!==m&&8!==m)throw Error("Invalid aes key size");g=b.slice(0);
l=[];this._key=[g,l];for(b=m;b<4*m+28;b++){f=g[b-1];if(0===b%m||8===m&&4===b%m)f=c[f>>>24]<<24^c[f>>16&255]<<16^c[f>>8&255]<<8^c[f&255],0===b%m&&(f=f<<8^f>>>24^n<<24,n=n<<1^283*(n>>7));g[b]=g[b-m]^f}for(m=0;b;m++,b--)f=g[m&3?b:b-4],l[m]=4>=b||4>m?f:e[0][c[f>>>24]]^e[1][c[f>>16&255]]^e[2][c[f>>8&255]]^e[3][c[f&255]]}a.prototype.decrypt=function(a,b,c,e,d,f){var g=this._key[1];a^=g[0];e^=g[1];c^=g[2];b^=g[3];var h=g.length/4-2,l,k=4;var m=this._tables[1];var n=m[0],q=m[1],p=m[2],t=m[3],r=m[4];for(l=
0;l<h;l++){m=n[a>>>24]^q[e>>16&255]^p[c>>8&255]^t[b&255]^g[k];var v=n[e>>>24]^q[c>>16&255]^p[b>>8&255]^t[a&255]^g[k+1];var y=n[c>>>24]^q[b>>16&255]^p[a>>8&255]^t[e&255]^g[k+2];b=n[b>>>24]^q[a>>16&255]^p[e>>8&255]^t[c&255]^g[k+3];k+=4;a=m;e=v;c=y}for(l=0;4>l;l++)d[(3&-l)+f]=r[a>>>24]<<24^r[e>>16&255]<<16^r[c>>8&255]<<8^r[b&255]^g[k++],m=a,a=e,e=c,c=b,b=m};return a}(),k=function(){function a(){d(this,a);this.listeners={}}a.prototype.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)};
a.prototype.off=function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b};a.prototype.trigger=function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var c=b.length,e=0;e<c;++e)b[e].call(this,arguments[1]);else{c=Array.prototype.slice.call(arguments,1);e=b.length;for(var d=0;d<e;++d)b[d].apply(this,c)}};a.prototype.dispose=function(){this.listeners={}};a.prototype.pipe=function(a){this.on("data",function(b){a.push(b)})};return a}(),
m=function(a){function b(){d(this,b);var c=a.call(this,k);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==("undefined"===typeof c?"undefined":$a(c))&&"function"!==typeof c?this:c;c.jobs=[];c.delay=1;c.timeout_=null;return c}g(b,a);b.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};b.prototype.push=function(a){this.jobs.push(a);this.timeout_||(this.timeout_=
setTimeout(this.processJob_.bind(this),this.delay))};return b}(k),n=function(a){return a<<24|(a&65280)<<8|(a&16711680)>>8|a>>>24},q=function(){function a(b,c,e,f){d(this,a);var g=a.STEP,h=new Int32Array(b.buffer),l=new Uint8Array(b.byteLength);b=0;this.asyncStream_=new m;this.asyncStream_.push(this.decryptChunk_(h.subarray(b,b+g),c,e,l));for(b=g;b<h.length;b+=g)e=new Uint32Array([n(h[b-4]),n(h[b-3]),n(h[b-2]),n(h[b-1])]),this.asyncStream_.push(this.decryptChunk_(h.subarray(b,b+g),c,e,l));this.asyncStream_.push(function(){f(null,
l.subarray(0,l.byteLength-l[l.byteLength-1]))})}a.prototype.decryptChunk_=function(a,b,c,e){return function(){var d=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2),f=new l(Array.prototype.slice.call(b)),g=new Uint8Array(a.byteLength),h=new Int32Array(g.buffer),k;var m=c[0];var q=c[1];var p=c[2];var t=c[3];for(k=0;k<d.length;k+=4){var r=n(d[k]);var v=n(d[k+1]);var y=n(d[k+2]);var w=n(d[k+3]);f.decrypt(r,v,y,w,h,k);h[k]=n(h[k]^m);h[k+1]=n(h[k+1]^q);h[k+2]=n(h[k+2]^p);h[k+3]=n(h[k+3]^t);m=r;q=
v;p=y;t=w}e.set(g,a.byteOffset)}};f(a,null,[{key:"STEP",get:function(){return 32E3}}]);return a}(),p=function(a){var b={};Object.keys(a).forEach(function(c){var e=a[c];ArrayBuffer.isView(e)?b[c]={bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:b[c]=e});return b};return new function(a){a.onmessage=function(a){var b=a.data;a=new Uint8Array(b.encrypted.bytes,b.encrypted.byteOffset,b.encrypted.byteLength);var c=new Uint32Array(b.key.bytes,b.key.byteOffset,b.key.byteLength/4),d=new Uint32Array(b.iv.bytes,
b.iv.byteOffset,b.iv.byteLength/4);new q(a,c,d,function(a,c){e.postMessage(p({source:b.source,decrypted:c}),[c.buffer])})}}(c)})()}),hi=function(a,b){a.abort();a.pause();b&&b.activePlaylistLoader&&(b.activePlaylistLoader.pause(),b.activePlaylistLoader=null)},Qj=function(a,b){return function(){var c=b.segmentLoaders,e=c[a],d=c.main;c=b.mediaTypes[a];var f=c.activeTrack();f=c.activeGroup(f);var g=c.activePlaylistLoader;hi(e,c);f&&(f.playlistLoader?(e.resyncLoader(),e=f.playlistLoader,c.activePlaylistLoader=
e,e.load()):g&&d.resetEverything())}},Rj=function(a,b){return function(){var c=b.segmentLoaders,e=c[a],d=c.main;c=b.mediaTypes[a];var f=c.activeTrack(),g=c.activeGroup(f),h=c.activePlaylistLoader;hi(e,c);g&&(g.playlistLoader?(h!==g.playlistLoader&&(e.track&&e.track(f),e.resetEverything()),e=g.playlistLoader,c.activePlaylistLoader=e,e.load()):d.resetEverything())}},ii={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a],e=b.blacklistCurrentPlaylist;hi(b.segmentLoaders[a],c);var d=c.activeTrack(),
f=c.activeGroup();f=(f.filter(function(a){return a.default})[0]||f[0]).id;f=c.tracks[f];if(d===f)e({message:"Problem encountered loading the default audio track."});else{J.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var g in c.tracks)c.tracks[g].enabled=c.tracks[g]===f;c.onTrackChanged()}}},SUBTITLES:function(a,b){return function(){var c=b.segmentLoaders[a],e=b.mediaTypes[a];J.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");
hi(c,e);if(c=e.activeTrack())c.mode="disabled";e.onTrackChanged()}}},gj={AUDIO:function(a,b,c){if(b){var e=c.tech,d=c.requestOptions,f=c.segmentLoaders[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,d);(!e.paused()||a.endList&&"none"!==e.preload())&&f.load()});b.on("loadedplaylist",function(){f.playlist(b.media(),d);e.paused()||f.load()});b.on("error",ii[a](a,c))}},SUBTITLES:function(a,b,c){var e=c.tech,d=c.requestOptions,f=c.segmentLoaders[a],g=c.mediaTypes[a];b.on("loadedmetadata",
function(){var a=b.media();f.playlist(a,d);f.track(g.activeTrack());(!e.paused()||a.endList&&"none"!==e.preload())&&f.load()});b.on("loadedplaylist",function(){f.playlist(b.media(),d);e.paused()||f.load()});b.on("error",ii[a](a,c))}},Sj=function(a,b){return function(c){return c.attributes[a]===b}},Tj=function(a){return function(b){return b.resolvedUri===a}},Uj={AUDIO:function(a,b){var c=b.hls,e=b.sourceType,d=b.segmentLoaders[a],f=b.requestOptions.withCredentials,g=b.master,h=g.mediaGroups;g=g.playlists;
var l=b.mediaTypes[a],k=l.groups;l=l.tracks;var m=b.masterPlaylistLoader;h[a]&&0!==Object.keys(h[a]).length||(h[a]={main:{default:{default:!0}}});for(var n in h[a]){k[n]||(k[n]=[]);var q=g.filter(Sj(a,n)),p;for(p in h[a][n]){var t=h[a][n][p];q.filter(Tj(t.resolvedUri)).length&&delete t.resolvedUri;var r=t.resolvedUri?new Nf(t.resolvedUri,c,f):t.playlists&&"dash"===e?new Di(t.playlists[0],c,f,m):null;t=J.mergeOptions({id:p,playlistLoader:r},t);gj[a](a,t.playlistLoader,b);k[n].push(t);if("undefined"===
typeof l[p]){r=J.AudioTrack;var v=p,y=t.default?"main":"alternative";t.characteristics&&0<=t.characteristics.indexOf("public.accessibility.describes-video")&&(y="main-desc");t=new r({id:v,kind:y,enabled:!1,language:t.language,default:t.default,label:p});l[p]=t}}}d.on("error",ii[a](a,b))},SUBTITLES:function(a,b){var c=b.tech,e=b.hls,d=b.sourceType,f=b.segmentLoaders[a],g=b.requestOptions.withCredentials,h=b.master.mediaGroups,l=b.mediaTypes[a],k=l.groups;l=l.tracks;var m=b.masterPlaylistLoader,n;for(n in h[a]){k[n]||
(k[n]=[]);for(var q in h[a][n])if(!h[a][n][q].forced){var p=h[a][n][q],t=void 0;"hls"===d?t=new Nf(p.resolvedUri,e,g):"dash"===d&&(t=new Di(p.playlists[0],e,g,m));p=J.mergeOptions({id:q,playlistLoader:t},p);gj[a](a,p.playlistLoader,b);k[n].push(p);"undefined"===typeof l[q]&&(p=c.addRemoteTextTrack({id:q,kind:"subtitles",enabled:!1,language:p.language,label:q},!1).track,l[q]=p)}}f.on("error",ii[a](a,b))},"CLOSED-CAPTIONS":function(a,b){var c=b.tech,e=b.master.mediaGroups,d=b.mediaTypes[a];b=d.groups;
d=d.tracks;for(var f in e[a]){b[f]||(b[f]=[]);for(var g in e[a][f]){var h=e[a][f][g];h.instreamId.match(/CC\d/)&&(b[f].push(J.mergeOptions({id:g},h)),"undefined"===typeof d[g]&&(h=c.addRemoteTextTrack({id:h.instreamId,kind:"captions",enabled:!1,language:h.language,label:g},!1).track,d[g]=h))}}}},Vj=function(a,b){return function(c){var e=b.mediaTypes[a].groups,d=b.masterPlaylistLoader.media();if(!d)return null;var f=null;d.attributes[a]&&(f=e[d.attributes[a]]);f=f||e.main;return"undefined"===typeof c?
f:null===c?null:f.filter(function(a){return a.id===c.id})[0]||null}},Wj={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a].tracks,e;for(e in c)if(c[e].enabled)return c[e];return null}},SUBTITLES:function(a,b){return function(){var c=b.mediaTypes[a].tracks,e;for(e in c)if("showing"===c[e].mode)return c[e];return null}}},Xj=function(a){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){Uj[b](b,a)});var b=a.mediaTypes,c=a.masterPlaylistLoader,e=a.tech,d=a.hls;["AUDIO","SUBTITLES"].forEach(function(c){b[c].activeGroup=
Vj(c,a);b[c].activeTrack=Wj[c](c,a);b[c].onGroupChanged=Qj(c,a);b[c].onTrackChanged=Rj(c,a)});var f=b.AUDIO.activeGroup();f=(f.filter(function(a){return a.default})[0]||f[0]).id;b.AUDIO.tracks[f].enabled=!0;b.AUDIO.onTrackChanged();c.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return b[a].onGroupChanged()})});var g=function(){b.AUDIO.onTrackChanged();e.trigger({type:"usage",name:"hls-audio-change"})};e.audioTracks().addEventListener("change",g);e.remoteTextTracks().addEventListener("change",
b.SUBTITLES.onTrackChanged);d.on("dispose",function(){e.audioTracks().removeEventListener("change",g);e.remoteTextTracks().removeEventListener("change",b.SUBTITLES.onTrackChanged)});e.clearTracks("audio");for(var h in b.AUDIO.tracks)e.audioTracks().addTrack(b.AUDIO.tracks[h])},Yj=function(){var a={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){a[b]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:sc,activeTrack:sc,onGroupChanged:sc,onTrackChanged:sc}});return a},ie=void 0,
Zj="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),ak=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},bk=function(a){function b(a){qb(this,b);var c=ec(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),e=a.url,d=a.withCredentials,f=a.tech,g=a.bandwidth,h=a.externHls,l=a.useCueTags,k=a.blacklistDuration,m=a.enableLowInitialPlaylist,n=a.sourceType;if(!e)throw Error("A non-empty playlist URL is required");
ie=h;c.withCredentials=d;c.tech_=f;c.hls_=f.hls;c.sourceType_=n;c.useCueTags_=l;c.blacklistDuration=k;c.enableLowInitialPlaylist=m;c.useCueTags_&&(c.cueTagsTrack_=c.tech_.addTextTrack("metadata","ad-cues"),c.cueTagsTrack_.inBandMetadataTrackDispatchType="");c.requestOptions_={withCredentials:c.withCredentials,timeout:null};c.mediaTypes_=Yj();c.mediaSource=new J.MediaSource;c.mediaSource.addEventListener("sourceopen",c.handleSourceOpen_.bind(c));c.seekable_=J.createTimeRanges();c.hasPlayed_=function(){return!1};
c.syncController_=new Oj(a);c.segmentMetadataTrack_=f.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;c.decrypter_=new Pj;d={hls:c.hls_,mediaSource:c.mediaSource,currentTime:c.tech_.currentTime.bind(c.tech_),seekable:function(){return c.seekable()},seeking:function(){return c.tech_.seeking()},duration:function(){return c.mediaSource.duration},hasPlayed:function(){return c.hasPlayed_()},goalBufferLength:function(){return c.goalBufferLength()},bandwidth:g,syncController:c.syncController_,
decrypter:c.decrypter_,sourceType:c.sourceType_};c.masterPlaylistLoader_="dash"===c.sourceType_?new Di(e,c.hls_,c.withCredentials):new Nf(e,c.hls_,c.withCredentials);c.setupMasterPlaylistLoaderListeners_();c.mainSegmentLoader_=new Oi(J.mergeOptions(d,{segmentMetadataTrack:c.segmentMetadataTrack_,loaderType:"main"}),a);c.audioSegmentLoader_=new Oi(J.mergeOptions(d,{loaderType:"audio"}),a);c.subtitleSegmentLoader_=new Mj(J.mergeOptions(d,{loaderType:"vtt"}),a);c.setupSegmentLoaderListeners_();Zj.forEach(function(a){c[a+
"_"]=ak.bind(c,a)});c.logger_=hg("MPC");c.masterPlaylistLoader_.load();return c}vb(b,a);ib(b,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var b=a.masterPlaylistLoader_.media(),c=1500*a.masterPlaylistLoader_.targetDuration;ge(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c;b.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(b,
a.requestOptions_),a.mainSegmentLoader_.load());Xj({sourceType:a.sourceType_,segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,hls:a.hls_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)});a.triggerPresenceUsage_(a.master(),b);try{a.setupSourceBuffers_()}catch(Md){return J.log.warn("Failed to create SourceBuffers",
Md),a.mediaSource.endOfStream("decode")}a.setupFirstPlay();a.trigger("selectedinitialmedia")});this.masterPlaylistLoader_.on("loadedplaylist",function(){var b=a.masterPlaylistLoader_.media();if(b){if(a.useCueTags_&&a.updateAdCues_(b),a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.updateDuration(),a.tech_.paused()||a.mainSegmentLoader_.load(),!b.endList){var c=function(){var b=a.seekable();0!==b.length&&a.mediaSource.addSeekableRange_(b.start(0),b.end(0))};if(Infinity!==a.duration())a.tech_.one("durationchange",
function We(){if(Infinity===a.duration())c();else a.tech_.one("durationchange",We)});else c()}}else a.excludeUnsupportedVariants_(),b=void 0,a.enableLowInitialPlaylist&&(b=a.selectInitialPlaylist()),b||(b=a.selectPlaylist()),a.initialMedia_=b,a.masterPlaylistLoader_.media(a.initialMedia_)});this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort();a.mainSegmentLoader_.pause()});
this.masterPlaylistLoader_.on("mediachange",function(){var b=a.masterPlaylistLoader_.media(),c=1500*a.masterPlaylistLoader_.targetDuration;ge(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c;a.mainSegmentLoader_.playlist(b,a.requestOptions_);a.mainSegmentLoader_.load();a.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var b=a.masterPlaylistLoader_.media();a.stuckAtPlaylistEnd_(b)&&
(a.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),a.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(a,b){a=a.mediaGroups||{};var c=!0,e=Object.keys(a.AUDIO),d;for(d in a.AUDIO)for(var f in a.AUDIO[d])a.AUDIO[d][f].uri||
(c=!1);c&&this.tech_.trigger({type:"usage",name:"hls-demuxed"});Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"});ie.Playlist.isAes(b)&&this.tech_.trigger({type:"usage",name:"hls-aes"});ie.Playlist.isFmp4(b)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"});e.length&&1<Object.keys(a.AUDIO[e[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",
value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var b=a.selectPlaylist(),c=a.masterPlaylistLoader_.media(),e=a.tech_.buffered();e=e.length?e.end(e.length-1)-a.tech_.currentTime():0;var d=a.bufferLowWaterLine();(!c.endList||a.duration()<Cc.MAX_BUFFER_LOW_WATER_LINE||b.attributes.BANDWIDTH<c.attributes.BANDWIDTH||e>=d)&&a.masterPlaylistLoader_.media(b);a.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")});this.mainSegmentLoader_.on("error",
function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},
120)});this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(b){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:b.mapping})});this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load();
this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"fastQualityChange_",value:function(){var a=this.selectPlaylist();a!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(a),this.mainSegmentLoader_.resetLoader())}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0);this.hasPlayed_()&&this.load();var a=this.tech_.seekable();
if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<a.start(0))return this.tech_.setCurrentTime(a.end(a.length-1))}}},{key:"setupFirstPlay",value:function(){var a=this,b=this.masterPlaylistLoader_.media();if(!b||this.tech_.paused()||this.hasPlayed_())return!1;if(!b.endList){var c=this.seekable();if(!c.length)return!1;if(J.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){a.trigger("firstplay");a.tech_.setCurrentTime(c.end(0));a.hasPlayed_=
function(){return!0}}),!1;this.trigger("firstplay");this.tech_.setCurrentTime(c.end(0))}this.hasPlayed_=function(){return!0};this.load();return!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(Hj){return J.log.warn("Failed to create Source Buffers",Hj),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var a=this.tech_.play();"undefined"!==typeof a&&"function"===typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")}},{key:"onEndOfStream",
value:function(){var a=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_);a&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(a){if(!this.seekable().length)return!1;var b=this.syncController_.getExpiredTime(a,this.mediaSource.duration);if(null===b)return!1;a=ie.Playlist.playlistEnd(a,
b);b=this.tech_.currentTime();var c=this.tech_.buffered();if(!c.length)return a-b<=jd;c=c.end(c.length-1);return c-b<=jd&&a-c<=jd}},{key:"blacklistCurrentPlaylist",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=arguments[1];var c=a.playlist||this.masterPlaylistLoader_.media();b=b||a.blacklistDuration||this.blacklistDuration;if(!c){this.error=a;try{return this.mediaSource.endOfStream("network")}catch(We){return this.trigger("error")}}var e=1===this.masterPlaylistLoader_.master.playlists.filter(Of).length;
if(e)return J.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(e);c.excludeUntil=Date.now()+1E3*b;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});b=this.selectPlaylist();J.log.warn("Problem encountered with the current HLS playlist."+(a.message?" "+a.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(b)}},
{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(a){var b=ei(this.tech_.buffered(),a);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;if(b&&b.length)return a;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();
this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());this.load()}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:ie.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",
value:function(){var a=void 0;if(this.masterPlaylistLoader_){var b=this.masterPlaylistLoader_.media();if(b){var c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null!==c){var e=ie.Playlist.seekable(b,c);if(0!==e.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){b=this.mediaTypes_.AUDIO.activePlaylistLoader.media();c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null===c)return;a=ie.Playlist.seekable(b,c);if(0===a.length)return}a?a.start(0)>e.end(0)||
e.start(0)>a.end(0)?this.seekable_=e:this.seekable_=J.createTimeRanges([[a.start(0)>e.start(0)?a.start(0):e.start(0),a.end(0)<e.end(0)?a.end(0):e.end(0)]]):this.seekable_=e;this.logger_("seekable updated ["+Ve(this.seekable_)+"]");this.tech_.trigger("seekablechanged")}}}}}},{key:"updateDuration",value:function(){var a=this,b=this.mediaSource.duration,c=ie.Playlist.duration(this.masterPlaylistLoader_.media()),e=this.tech_.buffered(),d=function Ti(){a.mediaSource.duration=c;a.tech_.trigger("durationchange");
a.mediaSource.removeEventListener("sourceopen",Ti)};0<e.length&&(c=Math.max(c,e.end(e.length-1)));b!==c&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",d):d())}},{key:"dispose",value:function(){var a=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(b){b=a.mediaTypes_[b].groups;for(var c in b)b[c].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();
this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var a=this.masterPlaylistLoader_.media(),b;if(a&&"open"===this.mediaSource.readyState){var c=this.masterPlaylistLoader_.master;var e=a.segments&&a.segments.length&&a.segments[0].map?"mp4":"mp2t";var d=a.attributes||{};var f=d.CODECS?kg(d.CODECS):aj;
var g=a.attributes||{};d=!0;var h=!1;if(a){if(c.mediaGroups.AUDIO&&g.AUDIO){var l=c.mediaGroups.AUDIO[g.AUDIO];if(l){h=!0;d=!1;for(var k in l)if(!l[k].uri&&!l[k].playlists){d=!0;break}}}h&&!f.audioProfile&&(d||(f.audioProfile=Cj(c,g.AUDIO)),f.audioProfile||(J.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),f.audioProfile=aj.audioProfile));var m;f.videoCodec&&(b=""+f.videoCodec+f.videoObjectTypeIndicator);f.audioProfile&&
(m="mp4a.40."+f.audioProfile);c=Fi("audio",e,[m]);k=Fi("video",e,[b]);e=Fi("video",e,[b,m]);b=h?!d&&b?[k,c]:d||b?[e,c]:[c,c]:b?[e]:[c]}else b=[];if(1>b.length)return this.error="No compatible SourceBuffer configuration for the variant stream:"+a.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(b);this.excludeIncompatibleVariants_(a)}}},{key:"configureLoaderMimeTypes_",value:function(a){var b=1<a.length&&-1===a[0].indexOf(",")&&a[0]!==a[1]?new J.EventTarget:null;this.mainSegmentLoader_.mimeType(a[0],
b);a[1]&&this.audioSegmentLoader_.mimeType(a[1],b)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(a){a.attributes.CODECS&&K.MediaSource&&K.MediaSource.isTypeSupported&&!K.MediaSource.isTypeSupported('video/mp4; codecs="'+Bj(a.attributes.CODECS)+'"')&&(a.excludeUntil=Infinity)})}},{key:"excludeIncompatibleVariants_",value:function(a){var b=2,c=null,e=void 0;a.attributes.CODECS&&(e=kg(a.attributes.CODECS),c=e.videoCodec,b=e.codecCount);this.master().playlists.forEach(function(a){var e=
{codecCount:2,videoCodec:null};a.attributes.CODECS&&(e=kg(a.attributes.CODECS));e.codecCount!==b&&(a.excludeUntil=Infinity);e.videoCodec!==c&&(a.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function(a){var b=0,c=this.seekable();c.length&&(b=c.start(0));Nj(a,this.cueTagsTrack_,b)}},{key:"goalBufferLength",value:function(){var a=this.tech_.currentTime(),b=Cc.GOAL_BUFFER_LENGTH;return Math.min(b+a*Cc.GOAL_BUFFER_LENGTH_RATE,Math.max(b,Cc.MAX_GOAL_BUFFER_LENGTH))}},{key:"bufferLowWaterLine",
value:function(){var a=this.tech_.currentTime(),b=Cc.BUFFER_LOW_WATER_LINE;return Math.min(b+a*Cc.BUFFER_LOW_WATER_LINE_RATE,Math.max(b,Cc.MAX_BUFFER_LOW_WATER_LINE))}}]);return b}(J.EventTarget),ck=function(a,b,c){return function(e){var d=a.master.playlists[b],f=Vg(d),g=Of(d);if("undefined"===typeof e)return g;e?delete d.disabled:d.disabled=!0;e===g||f||(c(),e?a.trigger("renditionenabled"):a.trigger("renditiondisabled"));return e}},dk=function Sa(a,b,c){qb(this,Sa);var e=a.masterPlaylistController_.fastQualityChange_.bind(a.masterPlaylistController_);
if(b.attributes.RESOLUTION){var d=b.attributes.RESOLUTION;this.width=d.width;this.height=d.height}this.bandwidth=b.attributes.BANDWIDTH;this.id=c;this.enabled=ck(a.playlists,b.uri,e)},ek=function(a){var b=a.playlists;a.representations=function(){return b.master.playlists.filter(function(a){return!Vg(a)}).map(function(b,c){return new dk(a,b,b.uri)})}},hj=["seeking","seeked","pause","playing","error"],fk=function(){function a(b){var c=this;qb(this,a);this.tech_=b.tech;this.seekable=b.seekable;this.consecutiveUpdates=
0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=null;this.logger_=hg("PlaybackWatcher");this.logger_("initialize");var e=function(){return c.monitorCurrentTime_()},d=function(){return c.techWaiting_()},f=function(){return c.cancelTimer_()},g=function(){return c.fixesBadSeeks_()};this.tech_.on("seekablechanged",g);this.tech_.on("waiting",d);this.tech_.on(hj,f);this.tech_.on("canplay",e);this.dispose=function(){c.logger_("dispose");c.tech_.off("seekablechanged",g);c.tech_.off("waiting",
d);c.tech_.off(hj,f);c.tech_.off("canplay",e);c.checkCurrentTimeTimeout_&&K.clearTimeout(c.checkCurrentTimeTimeout_);c.cancelTimer_()}}ib(a,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&K.clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=K.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())this.consecutiveUpdates=0,this.lastRecordedTime=
this.tech_.currentTime();else if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),b=this.tech_.buffered();if(this.lastRecordedTime===a&&(!b.length||a+jd>=b.end(b.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=a)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0;this.timer_&&
(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var a=this.tech_.seeking(),b=this.seekable(),c=this.tech_.currentTime(),e=void 0;a&&this.afterSeekableWindow_(b,c)&&(e=b.end(b.length-1));a&&this.beforeSeekableWindow_(b,c)&&(e=b.start(0)+jd);return"undefined"!==typeof e?(this.logger_("Trying to seek outside of seekable at time "+c+" with "+("seekable range "+Ve(b)+". Seeking to ")+(e+".")),this.tech_.setCurrentTime(e),!0):!1}},{key:"waiting_",
value:function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),b=this.tech_.buffered();b=ei(b,a);b.length&&a+3<=b.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(a),this.logger_("Stopped at "+a+" while inside a buffered region "+("["+b.start(0)+" -> "+b.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}))}}},{key:"techWaiting_",value:function(){var a=this.seekable(),b=this.tech_.currentTime();
if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,b))return a=a.end(a.length-1),this.logger_("Fell out of live window at time "+b+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0;var c=this.tech_.buffered();a=Qf(c,b);return this.videoUnderflow_(a,c,b)?(this.cancelTimer_(),this.tech_.setCurrentTime(b),this.tech_.trigger({type:"usage",
name:"hls-video-underflow"}),!0):0<a.length?(c=a.start(0)-b,this.logger_("Stopped at "+b+", setting timer for "+c+", seeking "+("to "+a.start(0))),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*c,b),!0):!1}},{key:"afterSeekableWindow_",value:function(a,b){return a.length?b>a.end(a.length-1)+jd?!0:!1:!1}},{key:"beforeSeekableWindow_",value:function(a,b){return a.length&&0<a.start(0)&&b<a.start(0)-jd?!0:!1}},{key:"videoUnderflow_",value:function(a,b,c){return 0===a.length&&(a=this.gapFromVideoUnderflow_(b,
c))?(this.logger_("Encountered a gap in video from "+a.start+" to "+a.end+". "+("Seeking to current time "+c)),!0):!1}},{key:"skipTheGap_",value:function(a){var b=this.tech_.buffered(),c=this.tech_.currentTime();b=Qf(b,c);this.cancelTimer_();0!==b.length&&c===a&&(this.logger_("skipTheGap_:","currentTime:",c,"scheduled currentTime:",a,"nextRange start:",b.start(0)),this.tech_.setCurrentTime(b.start(0)+Fc),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(a,
b){if(2>a.length)a=J.createTimeRanges();else{for(var c=[],e=1;e<a.length;e++){var d=a.end(e-1),f=a.start(e);c.push([d,f])}a=J.createTimeRanges(c)}for(c=0;c<a.length;c++)if(e=a.start(c),d=a.end(c),4>b-e&&2<b-e)return{start:e,end:d};return null}}]);return a}(),gk={errorInterval:30,getSource:function(a){var b=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_;return a(b)}},hk=function jb(a,b){var c=0,e=0,d=J.mergeOptions(gk,b);a.ready(function(){a.trigger({type:"usage",name:"hls-error-reload-initialized"})});
var f=function(){e&&a.currentTime(e)},g=function(b){null!==b&&void 0!==b&&(e=Infinity!==a.duration()&&a.currentTime()||0,a.one("loadedmetadata",f),a.src(b),a.trigger({type:"usage",name:"hls-error-reload"}),a.play())},h=function(){if(Date.now()-c<1E3*d.errorInterval)a.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(d.getSource&&"function"===typeof d.getSource)return c=Date.now(),d.getSource.call(a,g);J.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},
l=function Ij(){a.off("loadedmetadata",f);a.off("error",h);a.off("dispose",Ij)};a.on("error",h);a.on("dispose",l);a.reloadSourceOnError=function(b){l();jb(a,b)}},ij=function(a){hk(this,a)},Ub={PlaylistLoader:Nf,Playlist:pb,Decrypter:Vh,AsyncStream:Rg,decrypt:Sg,utils:Hd,STANDARD_PLAYLIST_SELECTOR:function(){return Dj(this.playlists.master,this.systemBandwidth,parseInt(bj(this.tech_.el(),"width"),10),parseInt(bj(this.tech_.el(),"height"),10))},INITIAL_PLAYLIST_SELECTOR:function(){var a=this.playlists.master.playlists.filter(pb.isEnabled);
lg(a,function(a,b){return Gi(a,b)});return a.filter(function(a){return kg(a.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:Gi,comparePlaylistResolution:function(a,b){var c=void 0,e=void 0;a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(c=a.attributes.RESOLUTION.width);c=c||K.Number.MAX_VALUE;b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width&&(e=b.attributes.RESOLUTION.width);e=e||K.Number.MAX_VALUE;return c===e&&a.attributes.BANDWIDTH&&b.attributes.BANDWIDTH?a.attributes.BANDWIDTH-
b.attributes.BANDWIDTH:c-e},xhr:Ec()};"GOAL_BUFFER_LENGTH MAX_GOAL_BUFFER_LENGTH GOAL_BUFFER_LENGTH_RATE BUFFER_LOW_WATER_LINE MAX_BUFFER_LOW_WATER_LINE BUFFER_LOW_WATER_LINE_RATE BANDWIDTH_VARIANCE".split(" ").forEach(function(a){Object.defineProperty(Ub,a,{get:function(){J.log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");return Cc[a]},set:function(b){J.log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");"number"!==typeof b||0>b?J.log.warn("value of Hls."+
a+" must be greater than or equal to 0"):Cc[a]=b}})});var jj=function(a){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(a)?"hls":/^application\/dash\+xml/i.test(a)?"dash":null},kj=function(a,b){b=b.media();for(var c=-1,e=0;e<a.length;e++)if(a[e].id===b.uri){c=e;break}a.selectedIndex_=c;a.trigger({selectedIndex:c,type:"change"})},ik=function(a,b){b.representations().forEach(function(b){a.addQualityLevel(b)});kj(a,b.playlists)};Ub.canPlaySource=function(){return J.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};
Ub.supportsNativeHls=function(){var a=Y.createElement("video");return J.getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(b){return/maybe|probably/i.test(a.canPlayType(b))}):!1}();var jk=J.getTech("Html5").isSupported()?/maybe|probably/i.test(Y.createElement("video").canPlayType("application/dash+xml")):!1;Ub.supportsNativeDash=jk;Ub.supportsTypeNatively=function(a){return"hls"===
a?Ub.supportsNativeHls:"dash"===a?Ub.supportsNativeDash:!1};Ub.isSupported=function(){return J.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var lj=function(a){function b(a,c,e){qb(this,b);var d=ec(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c,e.hls));c.options_&&c.options_.playerId&&(e=J(c.options_.playerId),e.hasOwnProperty("hls")||Object.defineProperty(e,"hls",{get:function(){J.log.warn("player.hls is deprecated. Use player.tech_.hls instead.");
c.trigger({type:"usage",name:"hls-player-access"});return d}}),e.vhs=d,e.dash=d);d.tech_=c;d.source_=a;d.stats={};d.ignoreNextSeekingEvent_=!1;d.setOptions_();if(d.options_.overrideNative&&(c.featuresNativeVideoTracks||c.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");d.on(Y,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(a){(a=Y.fullscreenElement||Y.webkitFullscreenElement||Y.mozFullScreenElement||
Y.msFullscreenElement)&&a.contains(d.tech_.el())&&d.masterPlaylistController_.fastQualityChange_()});d.on(d.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())});d.on(d.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()});d.on(d.tech_,"play",d.play);return d}vb(b,a);ib(b,[{key:"setOptions_",value:function(){var a=this;this.options_.withCredentials=this.options_.withCredentials||
!1;"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300);"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=4194304);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&4194304===this.options_.bandwidth;["withCredentials","bandwidth"].forEach(function(b){"undefined"!==typeof a.source_[b]&&(a.options_[b]=a.source_[b])});this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(a,b){var c=this;a&&(this.setOptions_(),
this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Ub,this.options_.sourceType=jj(b),this.masterPlaylistController_=new bk(this.options_),this.playbackWatcher_=new fk(J.mergeOptions(this.options_,{seekable:function(){return c.seekable()}})),this.masterPlaylistController_.on("error",function(){J.players[c.tech_.options_.playerId].error(c.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):
Ub.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Ub.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(a){this.masterPlaylistController_.selectPlaylist=a.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},
set:function(a){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=a;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=a;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?
1/this.throughput:0)))},set:function(){J.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return c.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return c.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return c.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return c.masterPlaylistController_.mediaRequestsTimedout_()||
0},enumerable:!0},mediaRequestsErrored:{get:function(){return c.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return c.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return c.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return c.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Xg(c.tech_.buffered())},
enumerable:!0},currentTime:{get:function(){return c.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return c.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return c.tech_.name_},enumerable:!0},duration:{get:function(){return c.tech_.duration()},enumerable:!0},master:{get:function(){return c.playlists.master},enumerable:!0},playerDimensions:{get:function(){return c.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Xg(c.tech_.seekable())},
enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return c.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){ek(c);if("dash"===c.options_.sourceType){var a=J.players[c.tech_.options_.playerId];if(a.eme){var b=c.source_.keySystems;var e=c.playlists.media(),d=c.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media();
if(b){var f={},g;for(g in b)f[g]={audioContentType:'audio/mp4; codecs="'+d.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+e.attributes.CODECS+'"'},e.contentProtection&&e.contentProtection[g]&&e.contentProtection[g].pssh&&(f[g].pssh=e.contentProtection[g].pssh),"string"===typeof b[g]&&(f[g].url=b[g]);b=J.mergeOptions(b,f)}b&&(a.currentSource().keySystems=b)}}}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,
"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return c.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(J.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var a=this,b=J.players[this.tech_.options_.playerId];b&&b.qualityLevels&&(this.qualityLevels_=b.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){ik(a.qualityLevels_,a)}),this.playlists.on("mediachange",
function(){kj(a.qualityLevels_,a.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(a){this.masterPlaylistController_.setCurrentTime(a)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.masterPlaylistController_&&this.masterPlaylistController_.dispose();
this.qualityLevels_&&this.qualityLevels_.dispose();Cd(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"dispose",this).call(this)}}]);return b}(J.getComponent("Component")),Ui={name:"videojs-http-streaming",VERSION:"1.0.2",canHandleSource:function(a){var b=J.mergeOptions(J.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return Ui.canPlayType(a.type,b)},handleSource:function(a,b){var c=J.mergeOptions(J.options,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{});b.hls=
new lj(a,b,c);b.hls.xhr=Ec();b.hls.src(a.src,a.type);return b.hls},canPlayType:function(a){var b=J.mergeOptions(J.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).hls.overrideNative,c=jj(a);return!c||Ub.supportsTypeNatively(c)&&!b?"":"maybe"}};if("undefined"===typeof J.MediaSource||"undefined"===typeof J.URL)J.MediaSource=gg,J.URL=Xi;gg.supportsNativeMediaSources()&&J.getTech("Html5").registerSourceHandler(Ui,0);J.HlsHandler=lj;J.HlsSourceHandler=Ui;J.Hls=Ub;J.use||J.registerComponent("Hls",
Ub);J.options.hls=J.options.hls||{};J.registerPlugin?J.registerPlugin("reloadSourceOnError",ij):J.plugin("reloadSourceOnError",ij);return J});(function(k,h){"object"===typeof exports&&"undefined"!==typeof module?module.exports=h(require("video.js")):"function"===typeof define&&define.amd?define(["videojs"],function(c){return k.Youtube=h(c)}):k.Youtube=h(k.videojs)})(this,function(k){function h(){YT.ready(function(){d.isApiReady=!0;for(var a=0;a<d.apiReadyQueue.length;++a)d.apiReadyQueue[a].initYTPlayer()})}function c(a,c){var b=!1,d=document.createElement("script"),f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(d,
f);d.onload=function(){b||(b=!0,c())};d.onreadystatechange=function(){b||"complete"!==this.readyState&&"loaded"!==this.readyState||(b=!0,c())};d.src=a}function g(){var a=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css";c.styleSheet?c.styleSheet.cssText=".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }":
c.appendChild(document.createTextNode(".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }"));a.appendChild(c)}var a=k.browser.IS_IOS||k.browser.IS_NATIVE_ANDROID,f=k.getTech("Tech"),d=k.extend(f,{constructor:function(b,c){f.call(this,b,c);this.setPoster(b.poster);this.setSrc(this.options_.source,!0);this.setTimeout(function(){this.el_&&
(this.el_.parentNode.className+=" vjs-youtube",a&&(this.el_.parentNode.className+=" vjs-youtube-mobile"),d.isApiReady?this.initYTPlayer():d.apiReadyQueue.push(this))}.bind(this))},dispose:function(){if(this.ytPlayer)this.ytPlayer.stopVideo&&this.ytPlayer.stopVideo(),this.ytPlayer.destroy&&this.ytPlayer.destroy();else{var a=d.apiReadyQueue.indexOf(this);-1!==a&&d.apiReadyQueue.splice(a,1)}this.ytPlayer=null;this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-youtube","").replace(" vjs-youtube-mobile",
"");this.el_.parentNode.removeChild(this.el_);f.prototype.dispose.call(this)},createEl:function(){var b=document.createElement("div");b.setAttribute("id",this.options_.techId);b.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute");b.setAttribute("class","vjs-tech");var c=document.createElement("div");c.appendChild(b);a||this.options_.ytControls||(b=document.createElement("div"),b.setAttribute("class","vjs-iframe-blocker"),b.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),
b.onclick=function(){this.pause()}.bind(this),c.appendChild(b));return c},initYTPlayer:function(){var a={controls:0,modestbranding:1,rel:0,showinfo:0,loop:this.options_.loop?1:0};"undefined"!==typeof this.options_.autohide&&(a.autohide=this.options_.autohide);"undefined"!==typeof this.options_.cc_load_policy&&(a.cc_load_policy=this.options_.cc_load_policy);"undefined"!==typeof this.options_.ytControls&&(a.controls=this.options_.ytControls);"undefined"!==typeof this.options_.disablekb&&(a.disablekb=
this.options_.disablekb);"undefined"!==typeof this.options_.end&&(a.end=this.options_.end);"undefined"!==typeof this.options_.color&&(a.color=this.options_.color);a.controls?"undefined"!==typeof this.options_.fs&&(a.fs=this.options_.fs):a.fs=0;"undefined"!==typeof this.options_.end&&(a.end=this.options_.end);"undefined"!==typeof this.options_.hl?a.hl=this.options_.hl:"undefined"!==typeof this.options_.language&&(a.hl=this.options_.language.substr(0,2));"undefined"!==typeof this.options_.iv_load_policy&&
(a.iv_load_policy=this.options_.iv_load_policy);"undefined"!==typeof this.options_.list?a.list=this.options_.list:this.url&&"undefined"!==typeof this.url.listId&&(a.list=this.url.listId);"undefined"!==typeof this.options_.listType&&(a.listType=this.options_.listType);"undefined"!==typeof this.options_.modestbranding&&(a.modestbranding=this.options_.modestbranding);"undefined"!==typeof this.options_.playlist&&(a.playlist=this.options_.playlist);"undefined"!==typeof this.options_.playsinline&&(a.playsinline=
this.options_.playsinline);"undefined"!==typeof this.options_.rel&&(a.rel=this.options_.rel);"undefined"!==typeof this.options_.showinfo&&(a.showinfo=this.options_.showinfo);"undefined"!==typeof this.options_.start&&(a.start=this.options_.start);"undefined"!==typeof this.options_.theme&&(a.theme=this.options_.theme);if("undefined"!==typeof this.options_.customVars){var c=this.options_.customVars;Object.keys(c).forEach(function(b){a[b]=c[b]})}this.activeVideoId=this.url?this.url.videoId:null;this.activeList=
a.list;var d={videoId:this.activeVideoId,playerVars:a,events:{onReady:this.onPlayerReady.bind(this),onPlaybackQualityChange:this.onPlayerPlaybackQualityChange.bind(this),onPlaybackRateChange:this.onPlayerPlaybackRateChange.bind(this),onStateChange:this.onPlayerStateChange.bind(this),onVolumeChange:this.onPlayerVolumeChange.bind(this),onError:this.onPlayerError.bind(this)}};"undefined"!==typeof this.options_.enablePrivacyEnhancedMode&&this.options_.enablePrivacyEnhancedMode&&(d.host="https://www.youtube-nocookie.com");
this.ytPlayer=new YT.Player(this.options_.techId,d)},onPlayerReady:function(){this.options_.muted&&this.ytPlayer.mute();1<this.ytPlayer.getAvailablePlaybackRates().length&&(this.featuresPlaybackRate=!0);this.playerReady_=!0;this.triggerReady();this.playOnReady?this.play():this.cueOnReady&&(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)},onPlayerPlaybackQualityChange:function(){},onPlayerPlaybackRateChange:function(){this.trigger("ratechange")},onPlayerStateChange:function(a){a=
a.data;if(a!==this.lastState&&!this.errorNumber)switch(this.lastState=a,a){case -1:this.trigger("loadstart");this.trigger("loadedmetadata");this.trigger("durationchange");this.trigger("ratechange");break;case YT.PlayerState.ENDED:this.trigger("ended");break;case YT.PlayerState.PLAYING:this.trigger("timeupdate");this.trigger("durationchange");this.trigger("playing");this.trigger("play");if(this.isSeeking)this.onSeeked();break;case YT.PlayerState.PAUSED:this.trigger("canplay");if(this.isSeeking)this.onSeeked();
else this.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate"),this.player_.trigger("waiting")}},onPlayerVolumeChange:function(){this.trigger("volumechange")},onPlayerError:function(a){this.errorNumber=a.data;this.trigger("pause");this.trigger("error")},error:function(){var a=1E3+this.errorNumber;switch(this.errorNumber){case 5:return{code:a,message:"Error while trying to play the video"};case 2:case 100:return{code:a,message:"Unable to find the video"};case 101:case 150:return{code:a,
message:"Playback on other Websites has been disabled by the video owner."}}return{code:a,message:"YouTube unknown error ("+this.errorNumber+")"}},loadVideoById_:function(a){a={videoId:a};this.options_.start&&(a.startSeconds=this.options_.start);this.options_.end&&(a.endEnd=this.options_.end);this.ytPlayer.loadVideoById(a)},cueVideoById_:function(a){a={videoId:a};this.options_.start&&(a.startSeconds=this.options_.start);this.options_.end&&(a.endEnd=this.options_.end);this.ytPlayer.cueVideoById(a)},
src:function(a){a&&this.setSrc({src:a});return this.source},poster:function(){return a?null:this.poster_},setPoster:function(a){this.poster_=a},setSrc:function(b){b&&b.src&&(delete this.errorNumber,this.source=b,this.url=d.parseUrl(b.src),!this.options_.poster&&this.url.videoId&&(this.poster_="https://img.youtube.com/vi/"+this.url.videoId+"/0.jpg",this.trigger("posterchange"),this.checkHighResPoster()),this.options_.autoplay&&!a?this.isReady_?this.play():this.playOnReady=!0:this.activeVideoId!==this.url.videoId&&
(this.isReady_?(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId):this.cueOnReady=!0))},autoplay:function(){return this.options_.autoplay},setAutoplay:function(a){this.options_.autoplay=a},loop:function(){return this.options_.loop},setLoop:function(a){this.options_.loop=a},play:function(){this.url&&this.url.videoId&&(this.wasPausedBeforeSeek=!1,this.isReady_?(this.url.listId&&(this.activeList===this.url.listId?this.ytPlayer.playVideo():(this.ytPlayer.loadPlaylist(this.url.listId),
this.activeList=this.url.listId)),this.activeVideoId===this.url.videoId?this.ytPlayer.playVideo():(this.loadVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)):(this.trigger("waiting"),this.playOnReady=!0))},pause:function(){this.ytPlayer&&this.ytPlayer.pauseVideo()},paused:function(){return this.ytPlayer?this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING:!0},currentTime:function(){return this.ytPlayer?this.ytPlayer.getCurrentTime():0},setCurrentTime:function(a){this.lastState===
YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime());this.isSeeking||(this.wasPausedBeforeSeek=this.paused());this.ytPlayer.seekTo(a,!0);this.trigger("timeupdate");this.trigger("seeking");this.isSeeking=!0;this.lastState===YT.PlayerState.PAUSED&&this.timeBeforeSeek!==a&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval(function(){this.lastState===YT.PlayerState.PAUSED&&this.isSeeking?this.currentTime()!==this.timeBeforeSeek&&(this.trigger("timeupdate"),
this.onSeeked()):clearInterval(this.checkSeekedInPauseInterval)}.bind(this),250))},seeking:function(){return this.isSeeking},seekable:function(){return this.ytPlayer?k.createTimeRange(0,this.ytPlayer.getDuration()):k.createTimeRange()},onSeeked:function(){clearInterval(this.checkSeekedInPauseInterval);this.isSeeking=!1;this.wasPausedBeforeSeek&&this.pause();this.trigger("seeked")},playbackRate:function(){return this.ytPlayer?this.ytPlayer.getPlaybackRate():1},setPlaybackRate:function(a){this.ytPlayer&&
this.ytPlayer.setPlaybackRate(a)},duration:function(){return this.ytPlayer?this.ytPlayer.getDuration():0},currentSrc:function(){return this.source&&this.source.src},ended:function(){return this.ytPlayer?this.lastState===YT.PlayerState.ENDED:!1},volume:function(){return this.ytPlayer?this.ytPlayer.getVolume()/100:1},setVolume:function(a){this.ytPlayer&&this.ytPlayer.setVolume(100*a)},muted:function(){return this.ytPlayer?this.ytPlayer.isMuted():!1},setMuted:function(a){this.ytPlayer&&(this.muted(!0),
a?this.ytPlayer.mute():this.ytPlayer.unMute(),this.setTimeout(function(){this.trigger("volumechange")},50))},buffered:function(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction)return k.createTimeRange();var a=this.ytPlayer.getVideoLoadedFraction()*this.ytPlayer.getDuration();return k.createTimeRange(0,a)},preload:function(){},load:function(){},reset:function(){},networkState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case -1:return 0;case 3:return 2;default:return 1}},
readyState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case -1:return 0;case 5:return 1;case 3:return 2;default:return 4}},supportsFullScreen:function(){return!0},checkHighResPoster:function(){var a="https://img.youtube.com/vi/"+this.url.videoId+"/maxresdefault.jpg";try{var c=new Image;c.onload=function(){if("naturalHeight"in c){if(90>=c.naturalHeight||120>=c.naturalWidth)return}else if(90>=c.height||120>=c.width)return;this.poster_=a;this.trigger("posterchange")}.bind(this);
c.onerror=function(){};c.src=a}catch(n){}}});d.isSupported=function(){return!0};d.canPlaySource=function(a){return d.canPlayType(a.type)};d.canPlayType=function(a){return"video/youtube"===a};d.parseUrl=function(a){var b={videoId:null},c=a.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);c&&11===c[2].length&&(b.videoId=c[2]);(c=a.match(/[?&]list=([^#\&\?]+)/))&&c[1]&&(b.listId=c[1]);return b};d.apiReadyQueue=[];"undefined"!==typeof document&&(c("https://www.youtube.com/iframe_api",
h),g());"undefined"!==typeof k.registerTech?k.registerTech("Youtube",d):k.registerComponent("Youtube",d)});/*
 2018 Brightcove, Inc
 @license Apache-2.0
*/
(function(k){"object"===typeof exports&&"undefined"!==typeof module?module.exports=k():"function"===typeof define&&define.amd?define([],k):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).videojsContribHls=k()})(function(){return function h(c,g,a){function f(b,n){if(!g[b]){if(!c[b]){var l="function"==typeof require&&require;if(!n&&l)return l(b,!0);if(d)return d(b,!0);n=Error("Cannot find module '"+b+"'");throw n.code="MODULE_NOT_FOUND",n;
}n=g[b]={exports:{}};c[b][0].call(n.exports,function(a){var d=c[b][1][a];return f(d?d:a)},n,n.exports,h,c,g,a)}return g[b].exports}for(var d="function"==typeof require&&require,b=0;b<a.length;b++)f(a[b]);return f}({1:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});var a=function(){return function(a,c){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var b=[],d=!0,f=!1,g=void 0;try{for(var h=a[Symbol.iterator](),l;!(d=(l=h.next()).done)&&(b.push(l.value),!c||b.length!==
c);d=!0);}catch(t){f=!0,g=t}finally{try{if(!d&&h["return"])h["return"]()}finally{if(f)throw g;}}return b}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),f=(h=h("global/window"))&&h.__esModule?h:{"default":h},d=function(a,c){a=a.cues;for(var b=0;b<a.length;b++){var d=a[b];if(c>=d.adStartTime&&c<=d.adEndTime)return d}return null};g["default"]={updateAdCues:function(b,c){if(b.segments)for(var g=2>=arguments.length||void 0===arguments[2]?0:arguments[2],h=void 0,l=0;l<
b.segments.length;l++){var w=b.segments[l];h||(h=d(c,g+w.duration/2));if(h){if("cueIn"in w){h.endTime=g;h.adEndTime=g;g+=w.duration;h=null;continue}if(g<h.endTime){g+=w.duration;continue}h.endTime+=w.duration}else if("cueOut"in w&&(h=new f["default"].VTTCue(g,g+w.duration,w.cueOut),h.adStartTime=g,h.adEndTime=g+parseFloat(w.cueOut),c.addCue(h)),"cueOutCont"in w){var z=w.cueOutCont.split("/").map(parseFloat);h=a(z,2);z=h[0];var v=h[1];h=new f["default"].VTTCue(g,g+w.duration,"");h.adStartTime=g-z;
h.adEndTime=h.adStartTime+v;c.addCue(h)}g+=w.duration}},findAdCue:d};c.exports=g["default"]},{"global/window":32}],2:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});var a=function(a,c){a=a.toString(16);return"00".substring(0,2-a.length)+a+(c%2?" ":"")},f=function(a){return 32<=a&&126>a?String.fromCharCode(a):"."},d={hexDump:function(b){b=Array.prototype.slice.call(b);for(var c="",d,g,h=0;h<b.length/16;h++)d=b.slice(16*h,16*h+16).map(a).join(""),g=b.slice(16*h,16*h+16).map(f).join(""),
c+=d+" "+g+"\n";return c},tagDump:function(a){return d.hexDump(a.bytes)},textRanges:function(a){var b="",c;for(c=0;c<a.length;c++){var d=a;var f=c;d=d.start(f)+"-"+d.end(f);b+=d+" "}return b},createTransferableMessage:function(a){var b={};Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d});return b},initSegmentId:function(a){var b=a.byterange||{length:Infinity,offset:0};return[b.length,b.offset,a.resolvedUri].join()}};
g["default"]=d;c.exports=g["default"]},{}],3:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});g["default"]={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1};c.exports=g["default"]},{}],4:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});var a=h("global/window"),f=a&&a.__esModule?a:{"default":a},d=h("aes-decrypter"),b=h("./bin-utils"),l=
function(a){a.onmessage=function(a){var c=a.data;a=new Uint8Array(c.encrypted.bytes,c.encrypted.byteOffset,c.encrypted.byteLength);var g=new Uint32Array(c.key.bytes,c.key.byteOffset,c.key.byteLength/4),h=new Uint32Array(c.iv.bytes,c.iv.byteOffset,c.iv.byteLength/4);new d.Decrypter(a,g,h,function(a,d){f["default"].postMessage((0,b.createTransferableMessage)({source:c.source,decrypted:d}),[d.buffer])})}};g["default"]=function(a){return new l(a)};c.exports=g["default"]},{"./bin-utils":2,"aes-decrypter":25,
"global/window":32}],5:[function(h,c,g){(function(a){function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,"__esModule",{value:!0});var b=function(){function a(a,
b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),l=function(a,b,c){var e=!0;for(;e;)if(null===a&&(a=Function.prototype),e=Object.getOwnPropertyDescriptor(a,b),void 0===e){a=Object.getPrototypeOf(a);if(null===a)break;e=!0}else{if("value"in e)return e.value;b=e.get;return void 0===b?void 0:b.call(c)}},n=h("./playlist-loader"),p=c(n),
r=h("./playlist.js");n=h("./segment-loader");var w=c(n);n=h("./vtt-segment-loader");var z=c(n);n=h("./ranges");var v=c(n),t=c("undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null);a=h("./ad-cue-tags");var q=c(a);a=h("./sync-controller");var y=c(a),A=h("videojs-contrib-media-sources/es5/codec-utils");a=h("webwackify");var C=c(a);a=h("./decrypter-worker");var G=c(a);a=h("./config");var E=c(a),F=h("./util/codecs.js"),I=h("./media-groups"),e=void 0,m={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",
audioProfile:"2"},x="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),D=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},H=function(){var a=void 0;try{a=h.resolve("./decrypter-worker")}catch(fa){}return a},N=function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a){return(0,A.translateLegacyCodecs)([a])[0]})};g.mapLegacyAvcCodecs_=N;var ka=function(a,b,c){return a+"/"+b+'; codecs="'+
c.filter(function(a){return!!a}).join(", ")+'"'},aa=function(a,b){var c=b.segments&&b.segments.length&&b.segments[0].map?"mp4":"mp2t";var e=b.attributes||{};var d=e.CODECS?(0,F.parseCodecs)(e.CODECS):m;var f=b.attributes||{};e=!0;var g=!1;if(!b)return[];if(a.mediaGroups.AUDIO&&f.AUDIO&&(a=a.mediaGroups.AUDIO[f.AUDIO])){g=!0;e=!1;for(var h in a)if(!a[h].uri){e=!0;break}}g&&!d.audioProfile&&(t["default"].log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),
d.audioProfile=m.audioProfile);var l,n;d.videoCodec&&(l=""+d.videoCodec+d.videoObjectTypeIndicator);d.audioProfile&&(n="mp4a.40."+d.audioProfile);h=ka("audio",c,[n]);a=ka("video",c,[l]);c=ka("video",c,[l,n]);return g?!e&&l?[a,h]:[c,h]:l?[c]:[h]};g.mimeTypesForPlaylist_=aa;a=function(a){function c(a){var b=this;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");l(Object.getPrototypeOf(c.prototype),"constructor",this).call(this);var d=a.url,f=a.withCredentials,g=a.mode,
h=a.tech,m=a.bandwidth,n=a.externHls,q=a.useCueTags,r=a.blacklistDuration,v=a.enableLowInitialPlaylist;if(!d)throw Error("A non-empty playlist URL is required");e=n;this.withCredentials=f;this.tech_=h;this.hls_=h.hls;this.mode_=g;this.useCueTags_=q;this.blacklistDuration=r;this.enableLowInitialPlaylist=v;this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType="");this.requestOptions_={withCredentials:this.withCredentials,
timeout:null};this.mediaTypes_=(0,I.createMediaTypes)();this.mediaSource=new t["default"].MediaSource({mode:g});this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this));this.seekable_=t["default"].createTimeRanges();this.hasPlayed_=function(){return!1};this.syncController_=new y["default"](a);this.segmentMetadataTrack_=h.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;this.decrypter_=(0,C["default"])(G["default"],H());f={hls:this.hls_,mediaSource:this.mediaSource,
currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function(){return b.seekable()},seeking:function(){return b.tech_.seeking()},duration:function(){return b.mediaSource.duration},hasPlayed:function(){return b.hasPlayed_()},goalBufferLength:function(){return b.goalBufferLength()},bandwidth:m,syncController:this.syncController_,decrypter:this.decrypter_};this.masterPlaylistLoader_=new p["default"](d,this.hls_,this.withCredentials);this.setupMasterPlaylistLoaderListeners_();this.mainSegmentLoader_=
new w["default"](t["default"].mergeOptions(f,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),a);this.audioSegmentLoader_=new w["default"](t["default"].mergeOptions(f,{loaderType:"audio"}),a);this.subtitleSegmentLoader_=new z["default"](t["default"].mergeOptions(f,{loaderType:"vtt"}),a);this.setupSegmentLoaderListeners_();x.forEach(function(a){b[a+"_"]=D.bind(b,a)});this.masterPlaylistLoader_.load()}d(c,a);b(c,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var a=
this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var b=a.masterPlaylistLoader_.media(),c=1500*a.masterPlaylistLoader_.targetDuration;(0,r.isLowestEnabledRendition)(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c;b.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load());(0,I.setupMediaGroups)({segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,
main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,mode:a.mode_,hls:a.hls_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)});a.triggerPresenceUsage_(a.master(),b);try{a.setupSourceBuffers_()}catch(ba){return t["default"].log.warn("Failed to create SourceBuffers",ba),a.mediaSource.endOfStream("decode")}a.setupFirstPlay();a.trigger("selectedinitialmedia")});this.masterPlaylistLoader_.on("loadedplaylist",
function(){var b=a.masterPlaylistLoader_.media();b?(a.useCueTags_&&a.updateAdCues_(b),a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.updateDuration(),a.tech_.paused()||a.mainSegmentLoader_.load(),b.endList||function(){var b=function(){var b=a.seekable();0!==b.length&&a.mediaSource.addSeekableRange_(b.start(0),b.end(0))};Infinity!==a.duration()?function(){a.tech_.one("durationchange",function ja(){if(Infinity===a.duration())b();else a.tech_.one("durationchange",ja)})}():b()}()):(b=void 0,a.enableLowInitialPlaylist&&
(b=a.selectInitialPlaylist()),b||(b=a.selectPlaylist()),a.initialMedia_=b,a.masterPlaylistLoader_.media(a.initialMedia_))});this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort();a.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var b=a.masterPlaylistLoader_.media(),c=1500*a.masterPlaylistLoader_.targetDuration;(0,r.isLowestEnabledRendition)(a.masterPlaylistLoader_.master,
a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c;a.mainSegmentLoader_.playlist(b,a.requestOptions_);a.mainSegmentLoader_.load();a.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var b=a.masterPlaylistLoader_.media();a.stuckAtPlaylistEnd_(b)&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),a.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",
name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(a,b){a=a.mediaGroups||{};var c=!0,d=Object.keys(a.AUDIO),f;for(f in a.AUDIO)for(var g in a.AUDIO[f])a.AUDIO[f][g].uri||(c=!1);c&&this.tech_.trigger({type:"usage",name:"hls-demuxed"});Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"});e.Playlist.isAes(b)&&this.tech_.trigger({type:"usage",
name:"hls-aes"});e.Playlist.isFmp4(b)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"});d.length&&1<Object.keys(a.AUDIO[d[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var b=a.selectPlaylist(),c=a.masterPlaylistLoader_.media(),e=a.tech_.buffered();e=e.length?e.end(e.length-
1)-a.tech_.currentTime():0;var d=a.bufferLowWaterLine();(!c.endList||a.duration()<E["default"].MAX_BUFFER_LOW_WATER_LINE||b.attributes.BANDWIDTH<c.attributes.BANDWIDTH||e>=d)&&a.masterPlaylistLoader_.media(b);a.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")});this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});
this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)});this.mainSegmentLoader_.on("reseteverything",
function(){a.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(b){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:b.mapping})});this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();
this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"fastQualityChange_",value:function(){var a=this.selectPlaylist();a!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(a),this.mainSegmentLoader_.resetLoader())}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0);this.hasPlayed_()&&this.load();var a=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<
a.start(0))return this.tech_.setCurrentTime(a.end(a.length-1))}}},{key:"setupFirstPlay",value:function(){var a=this,b=this.masterPlaylistLoader_.media();if(!b||this.tech_.paused()||this.hasPlayed_())return!1;if(!b.endList&&(b=function(){var b=a.seekable();if(!b.length)return{v:!1};if(t["default"].browser.IE_VERSION&&"html5"===a.mode_&&0===a.tech_.readyState())return a.tech_.one("loadedmetadata",function(){a.trigger("firstplay");a.tech_.setCurrentTime(b.end(0));a.hasPlayed_=function(){return!0}}),
{v:!1};a.trigger("firstplay");a.tech_.setCurrentTime(b.end(0))}(),"object"===typeof b))return b.v;this.hasPlayed_=function(){return!0};this.load();return!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(X){return t["default"].log.warn("Failed to create Source Buffers",X),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var a=this.tech_.play();"undefined"!==typeof a&&"function"===typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")}},
{key:"onEndOfStream",value:function(){var a=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=a&&this.audioSegmentLoader_.ended_);a&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(a){if(!this.seekable().length)return!1;var b=this.syncController_.getExpiredTime(a,this.mediaSource.duration);if(null===b)return!1;a=e.Playlist.playlistEnd(a,b);b=this.tech_.currentTime();var c=this.tech_.buffered();if(!c.length)return a-b<=v["default"].SAFE_TIME_DELTA;
c=c.end(c.length-1);return c-b<=v["default"].SAFE_TIME_DELTA&&a-c<=v["default"].SAFE_TIME_DELTA}},{key:"blacklistCurrentPlaylist",value:function(a,b){void 0===a&&(a={});var c=a.playlist||this.masterPlaylistLoader_.media();b=b||a.blacklistDuration||this.blacklistDuration;if(!c){this.error=a;try{return this.mediaSource.endOfStream("network")}catch(ja){return this.trigger("error")}}var e=1===this.masterPlaylistLoader_.master.playlists.filter(r.isEnabled).length;if(e)return t["default"].log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),
this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(e);c.excludeUntil=Date.now()+1E3*b;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});b=this.selectPlaylist();t["default"].log.warn("Problem encountered with the current HLS playlist."+(a.message?" "+a.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(b)}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause();this.mediaTypes_.AUDIO.activePlaylistLoader&&
this.audioSegmentLoader_.pause();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(a){var b=v["default"].findRange(this.tech_.buffered(),a);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;if(b&&b.length&&"flash"!==this.mode_)return a;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&
(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());this.load()}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:e.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var a=void 0;
if(this.masterPlaylistLoader_){var b=this.masterPlaylistLoader_.media();if(b){var c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null!==c){var d=e.Playlist.seekable(b,c);if(0!==d.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){b=this.mediaTypes_.AUDIO.activePlaylistLoader.media();c=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null===c)return;a=e.Playlist.seekable(b,c);if(0===a.length)return}a?a.start(0)>d.end(0)||d.start(0)>a.end(0)?this.seekable_=
d:this.seekable_=t["default"].createTimeRanges([[a.start(0)>d.start(0)?a.start(0):d.start(0),a.end(0)<d.end(0)?a.end(0):d.end(0)]]):this.seekable_=d;this.tech_.trigger("seekablechanged")}}}}}},{key:"updateDuration",value:function(){var a=this,b=this.mediaSource.duration,c=e.Playlist.duration(this.masterPlaylistLoader_.media()),d=this.tech_.buffered(),f=function S(){a.mediaSource.duration=c;a.tech_.trigger("durationchange");a.mediaSource.removeEventListener("sourceopen",S)};0<d.length&&(c=Math.max(c,
d.end(d.length-1)));b!==c&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",f):f())}},{key:"dispose",value:function(){var a=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(b){b=a.mediaTypes_[b].groups;for(var c in b)b[c].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",
value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var a=this.masterPlaylistLoader_.media();if(a&&"open"===this.mediaSource.readyState){var b=aa(this.masterPlaylistLoader_.master,a);if(1>b.length)return this.error="No compatible SourceBuffer configuration for the variant stream:"+a.resolvedUri,this.mediaSource.endOfStream("decode");this.mainSegmentLoader_.mimeType(b[0]);
b[1]&&this.audioSegmentLoader_.mimeType(b[1]);this.excludeIncompatibleVariants_(a)}}},{key:"excludeIncompatibleVariants_",value:function(a){var b=this.masterPlaylistLoader_.master,c=2,e=null,d=void 0;a.attributes.CODECS&&(d=(0,F.parseCodecs)(a.attributes.CODECS),e=d.videoCodec,c=d.codecCount);b.playlists.forEach(function(a){var b={codecCount:2,videoCodec:null};if(a.attributes.CODECS){var d=a.attributes.CODECS;b=(0,F.parseCodecs)(d);window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+
N(d)+'"')&&(a.excludeUntil=Infinity)}b.codecCount!==c&&(a.excludeUntil=Infinity);b.videoCodec!==e&&(a.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function(a){var b=0,c=this.seekable();c.length&&(b=c.start(0));q["default"].updateAdCues(a,this.cueTagsTrack_,b)}},{key:"goalBufferLength",value:function(){var a=this.tech_.currentTime(),b=E["default"].GOAL_BUFFER_LENGTH;return Math.min(b+a*E["default"].GOAL_BUFFER_LENGTH_RATE,Math.max(b,E["default"].MAX_GOAL_BUFFER_LENGTH))}},{key:"bufferLowWaterLine",
value:function(){var a=this.tech_.currentTime(),b=E["default"].BUFFER_LOW_WATER_LINE;return Math.min(b+a*E["default"].BUFFER_LOW_WATER_LINE_RATE,Math.max(b,E["default"].MAX_BUFFER_LOW_WATER_LINE))}}]);return c}(t["default"].EventTarget);g.MasterPlaylistController=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./ad-cue-tags":1,"./config":3,"./decrypter-worker":4,"./media-groups":6,"./playlist-loader":9,"./playlist.js":11,"./ranges":12,
"./segment-loader":16,"./sync-controller":18,"./util/codecs.js":19,"./vtt-segment-loader":20,"videojs-contrib-media-sources/es5/codec-utils":65,webwackify:76}],6:[function(h,c,g){(function(a){Object.defineProperty(g,"__esModule",{value:!0});var c=(a="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null)&&a.__esModule?a:{"default":a},d=(a=h("./playlist-loader"))&&a.__esModule?a:{"default":a},b=function(){},l=function(a,b){a.abort();a.pause();b&&b.activePlaylistLoader&&(b.activePlaylistLoader.pause(),
b.activePlaylistLoader=null)};g.stopLoaders=l;var n=function(a,b){b.activePlaylistLoader=a;a.load()};g.startLoaders=n;var p=function(a,b){return function(){var c=b.segmentLoaders,d=c[a];c=c.main;var f=b.mediaTypes[a],g=f.activeTrack();g=f.activeGroup(g);var h=f.activePlaylistLoader;l(d,f);g&&(g.playlistLoader?(d.resyncLoader(),n(g.playlistLoader,f)):h&&c.resetEverything())}};g.onGroupChanged=p;var r=function(a,b){return function(){var c=b.segmentLoaders,d=c[a];c=c.main;var f=b.mediaTypes[a],g=f.activeTrack(),
h=f.activeGroup(g),e=f.activePlaylistLoader;l(d,f);h&&(h.playlistLoader?(e!==h.playlistLoader&&(d.track&&d.track(g),d.resetEverything()),n(h.playlistLoader,f)):c.resetEverything())}};g.onTrackChanged=r;var w={AUDIO:function(a,b){return function(){var d=b.mediaTypes[a],f=b.blacklistCurrentPlaylist;l(b.segmentLoaders[a],d);var g=d.activeTrack(),h=d.activeGroup();h=(h.filter(function(a){return a["default"]})[0]||h[0]).id;h=d.tracks[h];if(g===h)f({message:"Problem encountered loading the default audio track."});
else{c["default"].log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var n in d.tracks)d.tracks[n].enabled=d.tracks[n]===h;d.onTrackChanged()}}},SUBTITLES:function(a,b){return function(){var d=b.segmentLoaders[a],f=b.mediaTypes[a];c["default"].log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");l(d,f);if(d=f.activeTrack())d.mode="disabled";f.onTrackChanged()}}};g.onError=w;var z={AUDIO:function(a,b,c){if(b){var d=c.tech,
f=c.requestOptions,g=c.segmentLoaders[a];b.on("loadedmetadata",function(){var a=b.media();g.playlist(a,f);(!d.paused()||a.endList&&"none"!==d.preload())&&g.load()});b.on("loadedplaylist",function(){g.playlist(b.media(),f);d.paused()||g.load()});b.on("error",w[a](a,c))}},SUBTITLES:function(a,b,c){var d=c.tech,f=c.requestOptions,g=c.segmentLoaders[a],h=c.mediaTypes[a];b.on("loadedmetadata",function(){var a=b.media();g.playlist(a,f);g.track(h.activeTrack());(!d.paused()||a.endList&&"none"!==d.preload())&&
g.load()});b.on("loadedplaylist",function(){g.playlist(b.media(),f);d.paused()||g.load()});b.on("error",w[a](a,c))}};g.setupListeners=z;var v={AUDIO:function(a,b){var f=b.mode,g=b.hls,h=b.segmentLoaders[a],l=b.requestOptions.withCredentials,n=b.master.mediaGroups,e=b.mediaTypes[a],m=e.groups;e=e.tracks;n[a]&&0!==Object.keys(n[a]).length&&"html5"===f||(n[a]={main:{"default":{"default":!0}}});for(var q in n[a]){m[q]||(m[q]=[]);for(var p in n[a][q]){f=n[a][q][p];var t=f.resolvedUri?new d["default"](f.resolvedUri,
g,l):null;f=c["default"].mergeOptions({id:p,playlistLoader:t},f);z[a](a,f.playlistLoader,b);m[q].push(f);if("undefined"===typeof e[p]){t=c["default"].AudioTrack;var r=p,v=f["default"]?"main":"alternative";f.characteristics&&0<=f.characteristics.indexOf("public.accessibility.describes-video")&&(v="main-desc");f=new t({id:r,kind:v,enabled:!1,language:f.language,"default":f["default"],label:p});e[p]=f}}}h.on("error",w[a](a,b))},SUBTITLES:function(a,b){var f=b.tech,g=b.hls,h=b.segmentLoaders[a],l=b.requestOptions.withCredentials,
n=b.master.mediaGroups,e=b.mediaTypes[a],m=e.groups;e=e.tracks;for(var q in n[a]){m[q]||(m[q]=[]);for(var p in n[a][q])if(!n[a][q][p].forced){var t=n[a][q][p];t=c["default"].mergeOptions({id:p,playlistLoader:new d["default"](t.resolvedUri,g,l)},t);z[a](a,t.playlistLoader,b);m[q].push(t);"undefined"===typeof e[p]&&(t=f.addRemoteTextTrack({id:p,kind:"subtitles",enabled:!1,language:t.language,label:p},!1).track,e[p]=t)}}h.on("error",w[a](a,b))},"CLOSED-CAPTIONS":function(a,b){var d=b.tech,f=b.master.mediaGroups,
g=b.mediaTypes[a];b=g.groups;g=g.tracks;for(var h in f[a]){b[h]||(b[h]=[]);for(var l in f[a][h]){var e=f[a][h][l];e.instreamId.match(/CC\d/)&&(b[h].push(c["default"].mergeOptions({id:l},e)),"undefined"===typeof g[l]&&(e=d.addRemoteTextTrack({id:e.instreamId,kind:"captions",enabled:!1,language:e.language,label:l},!1).track,g[l]=e))}}}};g.initialize=v;var t=function(a,b){return function(c){var d=b.mediaTypes[a].groups,f=b.masterPlaylistLoader.media();if(!f)return null;var g=null;f.attributes[a]&&(g=
d[f.attributes[a]]);g=g||d.main;return"undefined"===typeof c?g:null===c?null:g.filter(function(a){return a.id===c.id})[0]||null}};g.activeGroup=t;var q={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a].tracks,d;for(d in c)if(c[d].enabled)return c[d];return null}},SUBTITLES:function(a,b){return function(){var c=b.mediaTypes[a].tracks,d;for(d in c)if("showing"===c[d].mode)return c[d];return null}}};g.activeTrack=q;g.setupMediaGroups=function(a){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){v[b](b,
a)});var b=a.mediaTypes,c=a.masterPlaylistLoader,d=a.tech,f=a.hls;["AUDIO","SUBTITLES"].forEach(function(c){b[c].activeGroup=t(c,a);b[c].activeTrack=q[c](c,a);b[c].onGroupChanged=p(c,a);b[c].onTrackChanged=r(c,a)});var g=b.AUDIO.activeGroup();g=(g.filter(function(a){return a["default"]})[0]||g[0]).id;b.AUDIO.tracks[g].enabled=!0;b.AUDIO.onTrackChanged();c.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return b[a].onGroupChanged()})});var h=function(){b.AUDIO.onTrackChanged();
d.trigger({type:"usage",name:"hls-audio-change"})};d.audioTracks().addEventListener("change",h);d.remoteTextTracks().addEventListener("change",b.SUBTITLES.onTrackChanged);f.on("dispose",function(){d.audioTracks().removeEventListener("change",h);d.remoteTextTracks().removeEventListener("change",b.SUBTITLES.onTrackChanged)});d.clearTracks("audio");for(var e in b.AUDIO.tracks)d.audioTracks().addTrack(b.AUDIO.tracks[e])};g.createMediaTypes=function(){var a={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(c){a[c]=
{groups:{},tracks:{},activePlaylistLoader:null,activeGroup:b,activeTrack:b,onGroupChanged:b,onTrackChanged:b}});return a}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./playlist-loader":9}],7:[function(h,c,g){(function(a){Object.defineProperty(g,"__esModule",{value:!0});var c=(a="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null)&&a.__esModule?a:{"default":a},d=h("./bin-utils"),b={FAILURE:2,TIMEOUT:-101,
ABORTED:-102};g.REQUEST_ERRORS=b;var l=function(a){var b={};a.byterange&&(a=a.byterange,b.Range="bytes="+a.offset+"-"+(a.offset+a.length-1));return b},n=function(a){a.forEach(function(a){a.abort()})},p=function(a){var b=a.target;b=Date.now()-b.requestTime;b={bandwidth:Infinity,bytesReceived:0,roundTripTime:b||0};b.bytesReceived=a.loaded;b.bandwidth=Math.floor(b.bytesReceived/b.roundTripTime*8E3);return b},r=function(a,c){return c.timedout?{status:c.status,message:"HLS request timed-out at URL: "+
c.uri,code:b.TIMEOUT,xhr:c}:c.aborted?{status:c.status,message:"HLS request aborted at URL: "+c.uri,code:b.ABORTED,xhr:c}:a?{status:c.status,message:"HLS request errored at URL: "+c.uri,code:b.FAILURE,xhr:c}:null},w=function(a,c){return function(d,f){var g=f.response;if(d=r(d,f))return c(d,a);if(16!==g.byteLength)return c({status:f.status,message:"Invalid HLS key at URL: "+f.uri,code:b.FAILURE,xhr:f},a);f=new DataView(g);a.key.bytes=new Uint32Array([f.getUint32(0),f.getUint32(4),f.getUint32(8),f.getUint32(12)]);
return c(null,a)}},z=function(a,c){return function(d,f){var g=f.response;if(d=r(d,f))return c(d,a);if(0===g.byteLength)return c({status:f.status,message:"Empty HLS segment content at URL: "+f.uri,code:b.FAILURE,xhr:f},a);a.map.bytes=new Uint8Array(f.response);return c(null,a)}},v=function(a,c){return function(d,f){var g=f.response;if(d=r(d,f))return c(d,a);if(0===g.byteLength)return c({status:f.status,message:"Empty HLS segment content at URL: "+f.uri,code:b.FAILURE,xhr:f},a);a.stats={bandwidth:f.bandwidth,
bytesReceived:f.bytesReceived||0,roundTripTime:f.roundTripTime||0};a.key?a.encryptedBytes=new Uint8Array(f.response):a.bytes=new Uint8Array(f.response);return c(null,a)}},t=function(a,b,c){a.addEventListener("message",function I(e){if(e.data.source===b.requestId)return a.removeEventListener("message",I),e=e.data.decrypted,b.bytes=new Uint8Array(e.bytes,e.byteOffset,e.byteLength),c(null,b)});a.postMessage((0,d.createTransferableMessage)({source:b.requestId,encrypted:b.encryptedBytes,key:b.key.bytes,
iv:b.key.iv}),[b.encryptedBytes.buffer,b.key.bytes.buffer])},q=function(a){return a.reduce(function(a,b){return b.code>a.code?b:a})},y=function(a,b,c){var d=[],f=0;return function(e,g){e&&(n(a),d.push(e));f+=1;if(f===a.length)return g.endOfAllRequests=Date.now(),0<d.length?(e=q(d),c(e,g)):g.encryptedBytes?t(b,g,c):c(null,g)}},A=function(a,b){return function(d){a.stats=c["default"].mergeOptions(a.stats,p(d));!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=Date.now());
return b(d,a)}};g.mediaSegmentRequest=function(a,b,d,f,g,e){var h=[];d=y(h,d,e);if(f.key){e=c["default"].mergeOptions(b,{uri:f.key.resolvedUri,responseType:"arraybuffer"});var q=w(f,d);e=a(e,q);h.push(e)}f.map&&!f.map.bytes&&(e=c["default"].mergeOptions(b,{uri:f.map.resolvedUri,responseType:"arraybuffer",headers:l(f.map)}),q=z(f,d),e=a(e,q),h.push(e));b=c["default"].mergeOptions(b,{uri:f.resolvedUri,responseType:"arraybuffer",headers:l(f)});d=v(f,d);a=a(b,d);a.addEventListener("progress",A(f,g));
h.push(a);return function(){return n(h)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bin-utils":2}],8:[function(h,c,g){(function(a){function f(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(g,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,
c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b=h("global/window"),l=f(b);b=h("./ranges");var n=f(b),p=f("undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null),r=["seeking","seeked","pause","playing","error"];a=function(){function a(b){var c=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.tech_=b.tech;this.seekable=b.seekable;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=null;b.debug&&
(this.logger_=p["default"].log.bind(p["default"],"playback-watcher ->"));this.logger_("initialize");var d=function(){return c.monitorCurrentTime_()},f=function(){return c.techWaiting_()},g=function(){return c.cancelTimer_()},h=function(){return c.fixesBadSeeks_()};this.tech_.on("seekablechanged",h);this.tech_.on("waiting",f);this.tech_.on(r,g);this.tech_.on("canplay",d);this.dispose=function(){c.logger_("dispose");c.tech_.off("seekablechanged",h);c.tech_.off("waiting",f);c.tech_.off(r,g);c.tech_.off("canplay",
d);c.checkCurrentTimeTimeout_&&l["default"].clearTimeout(c.checkCurrentTimeTimeout_);c.cancelTimer_()}}d(a,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&l["default"].clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=l["default"].setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime();
else if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),b=this.tech_.buffered();if(this.lastRecordedTime===a&&(!b.length||a+n["default"].SAFE_TIME_DELTA>=b.end(b.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=a)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0;this.timer_&&
(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var a=this.tech_.seeking(),b=this.seekable(),c=this.tech_.currentTime(),d=void 0;a&&this.afterSeekableWindow_(b,c)&&(d=b.end(b.length-1));a&&this.beforeSeekableWindow_(b,c)&&(d=b.start(0)+n["default"].SAFE_TIME_DELTA);return"undefined"!==typeof d?(this.logger_("Trying to seek outside of seekable at time "+c+" with "+("seekable range "+n["default"].printableRange(b)+". Seeking to ")+(d+
".")),this.tech_.setCurrentTime(d),!0):!1}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),b=this.tech_.buffered();b=n["default"].findRange(b,a);b.length&&a+3<=b.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(a),this.logger_("Stopped at "+a+" while inside a buffered region "+("["+b.start(0)+" -> "+b.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}))}}},{key:"techWaiting_",
value:function(){var a=this.seekable(),b=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,b))return a=a.end(a.length-1),this.logger_("Fell out of live window at time "+b+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0;var c=this.tech_.buffered();a=n["default"].findNextRange(c,b);return this.videoUnderflow_(a,
c,b)?(this.cancelTimer_(),this.tech_.setCurrentTime(b),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):0<a.length?(c=a.start(0)-b,this.logger_("Stopped at "+b+", setting timer for "+c+", seeking "+("to "+a.start(0))),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*c,b),!0):!1}},{key:"afterSeekableWindow_",value:function(a,b){return a.length?b>a.end(a.length-1)+n["default"].SAFE_TIME_DELTA?!0:!1:!1}},{key:"beforeSeekableWindow_",value:function(a,b){return a.length&&0<a.start(0)&&
b<a.start(0)-n["default"].SAFE_TIME_DELTA?!0:!1}},{key:"videoUnderflow_",value:function(a,b,c){return 0===a.length&&(a=this.gapFromVideoUnderflow_(b,c))?(this.logger_("Encountered a gap in video from "+a.start+" to "+a.end+". "+("Seeking to current time "+c)),!0):!1}},{key:"skipTheGap_",value:function(a){var b=this.tech_.buffered(),c=this.tech_.currentTime();b=n["default"].findNextRange(b,c);this.cancelTimer_();0!==b.length&&c===a&&(this.logger_("skipTheGap_:","currentTime:",c,"scheduled currentTime:",
a,"nextRange start:",b.start(0)),this.tech_.setCurrentTime(b.start(0)+n["default"].TIME_FUDGE_FACTOR),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(a,b){a=n["default"].findGaps(a);for(var c=0;c<a.length;c++){var d=a.start(c),f=a.end(c);if(4>b-d&&2<b-d)return{start:d,end:f}}return null}},{key:"logger_",value:function(){}}]);return a}();g["default"]=a;c.exports=g["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{})},{"./ranges":12,"global/window":32}],9:[function(h,c,g){(function(a){function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,
"__esModule",{value:!0});var b=function(){function a(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===
b?void 0:b.call(c)}},n=h("./resolve-url"),p=c(n),r="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null;a=h("m3u8-parser");var w=c(a);a=h("global/window");var z=c(a),v=function(a,b,c){var d=b.slice();c=c||0;b=Math.min(a.length,b.length+c);for(var e=c;e<b;e++)d[e-c]=(0,r.mergeOptions)(a[e],d[e-c]);return d};g.updateSegments=v;var t=function(a,b){a.resolvedUri||(a.resolvedUri=(0,p["default"])(b,a.uri));a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=(0,p["default"])(b,a.key.uri));
a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=(0,p["default"])(b,a.map.uri))};g.resolveSegmentUris=t;var q=function(a,b){a=(0,r.mergeOptions)(a,{});var c=a.playlists.filter(function(a){return a.uri===b.uri})[0];if(!c||c.segments&&b.segments&&c.segments.length===b.segments.length&&c.mediaSequence===b.mediaSequence)return null;var d=(0,r.mergeOptions)(c,b);c.segments&&(d.segments=v(c.segments,b.segments,b.mediaSequence-c.mediaSequence));d.segments.forEach(function(a){t(a,d.resolvedUri)});for(c=0;c<
a.playlists.length;c++)a.playlists[c].uri===b.uri&&(a.playlists[c]=d);a.playlists[b.uri]=d;return a};g.updateMaster=q;var y=function(a){for(var b=a.playlists.length;b--;){var c=a.playlists[b];a.playlists[c.uri]=c;c.resolvedUri=(0,p["default"])(a.uri,c.uri);c.attributes||(c.attributes={},r.log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}};g.setupMediaPlaylists=y;var A=function(a){["AUDIO","SUBTITLES"].forEach(function(b){for(var c in a.mediaGroups[b])for(var d in a.mediaGroups[b][c]){var e=
a.mediaGroups[b][c][d];e.uri&&(e.resolvedUri=(0,p["default"])(a.uri,e.uri))}})};g.resolveMediaGroupUris=A;var C=function(a,b){var c=a.segments[a.segments.length-1];return b&&c&&c.duration?1E3*c.duration:500*(a.targetDuration||10)};g.refreshDelay=C;a=function(a){function c(a,b,e){var d=this;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");l(Object.getPrototypeOf(c.prototype),"constructor",this).call(this);this.srcUrl=a;this.hls_=b;this.withCredentials=e;if(!this.srcUrl)throw Error("A non-empty playlist URL is required");
this.state="HAVE_NOTHING";this.on("mediaupdatetimeout",function(){"HAVE_METADATA"===d.state&&(d.state="HAVE_CURRENT_METADATA",d.request=d.hls_.xhr({uri:(0,p["default"])(d.master.uri,d.media().uri),withCredentials:d.withCredentials},function(a,b){if(d.request){if(a)return d.playlistRequestError(d.request,d.media().uri,"HAVE_METADATA");d.haveMetadata(d.request,d.media().uri)}}))})}d(c,a);b(c,[{key:"playlistRequestError",value:function(a,b,c){this.request=null;c&&(this.state=c);this.error={playlist:this.master.playlists[b],
status:a.status,message:"HLS playlist request error at URL: "+b,responseText:a.responseText,code:500<=a.status?4:2};this.trigger("error")}},{key:"haveMetadata",value:function(a,b){var c=this;this.request=null;this.state="HAVE_METADATA";var d=new w["default"].Parser;d.push(a.responseText);d.end();d.manifest.uri=b;d.manifest.attributes=d.manifest.attributes||{};a=q(this.master,d.manifest);this.targetDuration=d.manifest.targetDuration;a?(this.master=a,this.media_=this.master.playlists[d.manifest.uri]):
this.trigger("playlistunchanged");this.media().endList||(z["default"].clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=z["default"].setTimeout(function(){c.trigger("mediaupdatetimeout")},C(this.media(),!!a)));this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest();z["default"].clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"media",
value:function(a){var b=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var c=this.state;if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}var d=!this.media_||a.uri!==this.media_.uri;if(this.master.playlists[a.uri].endList)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,d&&
(this.trigger("mediachanging"),this.trigger("mediachange"));else if(d){this.state="SWITCHING_MEDIA";if(this.request){if((0,p["default"])(this.master.uri,a.uri)===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.request=this.hls_.xhr({uri:(0,p["default"])(this.master.uri,a.uri),withCredentials:this.withCredentials},function(e,d){if(b.request){if(e)return b.playlistRequestError(b.request,a.uri,c);b.haveMetadata(d,
a.uri);"HAVE_MASTER"===c?b.trigger("loadedmetadata"):b.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest();z["default"].clearTimeout(this.mediaUpdateTimeout);"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(a){var b=this;z["default"].clearTimeout(this.mediaUpdateTimeout);var c=this.media();a?this.mediaUpdateTimeout=
z["default"].setTimeout(function(){return b.load()},c?c.targetDuration/2*1E3:5E3):this.started?c&&!c.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var a=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,c){if(a.request){a.request=null;if(b)return a.error={status:c.status,message:"HLS playlist request error at URL: "+a.srcUrl,responseText:c.responseText,code:2},"HAVE_NOTHING"===
a.state&&(a.started=!1),a.trigger("error");b=new w["default"].Parser;b.push(c.responseText);b.end();a.state="HAVE_MASTER";b.manifest.uri=a.srcUrl;if(b.manifest.playlists)a.master=b.manifest,y(a.master),A(a.master),a.trigger("loadedplaylist"),a.request||a.media(b.manifest.playlists[0]);else return a.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:z["default"].location.href,playlists:[{uri:a.srcUrl}]},a.master.playlists[a.srcUrl]=a.master.playlists[0],a.master.playlists[0].resolvedUri=
a.srcUrl,a.master.playlists[0].attributes=a.master.playlists[0].attributes||{},a.haveMetadata(c,a.srcUrl),a.trigger("loadedmetadata")}})}}]);return c}(r.EventTarget);g["default"]=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./resolve-url":15,"global/window":32,"m3u8-parser":33}],10:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});var a=(c=h("./config"))&&c.__esModule?c:{"default":c},f=(c=h("./playlist"))&&
c.__esModule?c:{"default":c},d=h("./util/codecs.js"),b=function(a,b){return a?(a=window.getComputedStyle(a))?a[b]:"":""},l=function(a,b){var c=a.slice();a.sort(function(a,d){var f=b(a,d);return 0===f?c.indexOf(a)-c.indexOf(d):f})},n=function(a,b){var c=void 0,d=void 0;a.attributes.BANDWIDTH&&(c=a.attributes.BANDWIDTH);c=c||window.Number.MAX_VALUE;b.attributes.BANDWIDTH&&(d=b.attributes.BANDWIDTH);d=d||window.Number.MAX_VALUE;return c-d};g.comparePlaylistBandwidth=n;g.comparePlaylistResolution=function(a,
b){var c=void 0,d=void 0;a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(c=a.attributes.RESOLUTION.width);c=c||window.Number.MAX_VALUE;b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width&&(d=b.attributes.RESOLUTION.width);d=d||window.Number.MAX_VALUE;return c===d&&a.attributes.BANDWIDTH&&b.attributes.BANDWIDTH?a.attributes.BANDWIDTH-b.attributes.BANDWIDTH:c-d};var p=function(b,c,d,g){b=b.playlists.map(function(a){var b=a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width;var c=a.attributes.RESOLUTION&&
a.attributes.RESOLUTION.height;var d=(d=a.attributes.BANDWIDTH)||window.Number.MAX_VALUE;return{bandwidth:d,width:b,height:c,playlist:a}});l(b,function(a,b){return a.bandwidth-b.bandwidth});b=b.filter(function(a){return!f["default"].isIncompatible(a.playlist)});var h=b.filter(function(a){return f["default"].isEnabled(a.playlist)});h.length||(h=b.filter(function(a){return!f["default"].isDisabled(a.playlist)}));var n=h.filter(function(b){return b.bandwidth*a["default"].BANDWIDTH_VARIANCE<c}),p=n[n.length-
1],r=n.filter(function(a){return a.bandwidth===p.bandwidth})[0];n=n.filter(function(a){return a.width&&a.height});l(n,function(a,b){return a.width-b.width});var v=n.filter(function(a){return a.width===d&&a.height===g});p=v[v.length-1];v=v.filter(function(a){return a.bandwidth===p.bandwidth})[0];var w=void 0,z=void 0;z=void 0;v||(w=n.filter(function(a){return a.width>d||a.height>g}),z=w.filter(function(a){return a.width===w[0].width&&a.height===w[0].height}),p=z[z.length-1],z=z.filter(function(a){return a.bandwidth===
p.bandwidth})[0]);return(b=z||v||r||h[0]||b[0])?b.playlist:null};g.simpleSelector=p;g.lastBandwidthSelector=function(){return p(this.playlists.master,this.systemBandwidth,parseInt(b(this.tech_.el(),"width"),10),parseInt(b(this.tech_.el(),"height"),10))};g.movingAverageBandwidthSelector=function(a){var c=-1;if(0>a||1<a)throw Error("Moving average bandwidth decay must be between 0 and 1.");return function(){0>c&&(c=this.systemBandwidth);c=a*this.systemBandwidth+(1-a)*c;return p(this.playlists.master,
c,parseInt(b(this.tech_.el(),"width"),10),parseInt(b(this.tech_.el(),"height"),10))}};g.minRebufferMaxBandwidthSelector=function(a){var b=a.currentTime,c=a.bandwidth,d=a.duration,g=a.segmentDuration,h=a.timeUntilRebuffer,p=a.currentTimeline,r=a.syncController;a=a.master.playlists.filter(function(a){return!f["default"].isIncompatible(a)});var C=a.filter(f["default"].isEnabled);C.length||(C=a.filter(function(a){return!f["default"].isDisabled(a)}));a=C.filter(f["default"].hasAttribute.bind(null,"BANDWIDTH")).map(function(a){var l=
r.getSyncPoint(a,d,p,b)?1:2;l=f["default"].estimateSegmentRequestTime(g,c,a)*l-h;return{playlist:a,rebufferingImpact:l}});C=a.filter(function(a){return 0>=a.rebufferingImpact});l(C,function(a,b){return n(b.playlist,a.playlist)});if(C.length)return C[0];l(a,function(a,b){return a.rebufferingImpact-b.rebufferingImpact});return a[0]||null};g.lowestBitrateCompatibleVariantSelector=function(){var a=this.playlists.master.playlists.filter(f["default"].isEnabled);l(a,function(a,b){return n(a,b)});return a.filter(function(a){return(0,
d.parseCodecs)(a.attributes.CODECS).videoCodec})[0]||null}},{"./config":3,"./playlist":11,"./util/codecs.js":19}],11:[function(h,c,g){(function(a){Object.defineProperty(g,"__esModule",{value:!0});var c="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null,d=(a=h("global/window"))&&a.__esModule?a:{"default":a},b=function(a,b){var c=0;b-=a.mediaSequence;var e=a.segments[b];if(e){if("undefined"!==typeof e.start)return{result:e.start,precise:!0};if("undefined"!==typeof e.end)return{result:e.end-
e.duration,precise:!0}}for(;b--;){e=a.segments[b];if("undefined"!==typeof e.end)return{result:c+e.end,precise:!0};c+=e.duration;if("undefined"!==typeof e.start)return{result:c+e.start,precise:!0}}return{result:c,precise:!1}},l=function(a,c,e){"undefined"===typeof c&&(c=a.mediaSequence+a.segments.length);if(c<a.mediaSequence)return 0;var d=b(a,c);if(d.precise)return d.result;a:{var f=0;for(var g=c-a.mediaSequence;g<a.segments.length;g++){c=a.segments[g];if("undefined"!==typeof c.start){a=c.start-f;
f=!0;break a}f+=c.duration;if("undefined"!==typeof c.end){a=c.end-f;f=!0;break a}}a=-1;f=!1}return f?a:d.result+e},n=function(a,b,c){if(!a)return 0;"number"!==typeof c&&(c=0);if("undefined"===typeof b){if(a.totalDuration)return a.totalDuration;if(!a.endList)return d["default"].Infinity}return l(a,b,c)};g.duration=n;var p=function(a,b,c){var e=0;b>c&&(c=[c,b],b=c[0],c=c[1]);if(0>b){for(;b<Math.min(0,c);b++)e+=a.targetDuration;b=0}for(;b<c;b++)e+=a.segments[b].duration;return e};g.sumDurations=p;var r=
function(a){if(!a.segments.length)return 0;for(var b=a.segments.length-1,c=a.segments[b].duration||a.targetDuration,e=c+2*a.targetDuration;b--&&!(c+=a.segments[b].duration,c>=e););return Math.max(0,b)};g.safeLiveIndex=r;var w=function(a,b,c){if(!a||!a.segments)return null;if(a.endList)return n(a);if(null===b)return null;b=b||0;c=c?r(a):a.segments.length;return l(a,a.mediaSequence+c,b)};g.playlistEnd=w;a=function(a,b){var e=b||0;a=w(a,b,!0);return null===a?(0,c.createTimeRange)():(0,c.createTimeRange)(e,
a)};g.seekable=a;var z=function(a,b){if(0===b-Math.floor(b))return b+.1*a;for(var c=b.toString().split(".")[1].length,e=1;e<=c;e++){var d=Math.pow(10,e),f=b*d;if(0===f-Math.floor(f)||e===c)return(f+a)/d}},v=z.bind(null,1),t=z.bind(null,-1);z=function(a,b,c,e){var d,f=a.segments.length,g=b-e;if(0>g){if(0<c)for(d=c-1;0<=d;d--){var h=a.segments[d];g+=t(h.duration);if(0<g)return{mediaIndex:d,startTime:e-p(a,c,d)}}return{mediaIndex:0,startTime:b}}if(0>c){for(d=c;0>d;d++)if(g-=a.targetDuration,0>g)return{mediaIndex:0,
startTime:b};c=0}for(d=c;d<f;d++)if(h=a.segments[d],g-=v(h.duration),0>g)return{mediaIndex:d,startTime:e+p(a,c,d)};return{mediaIndex:f-1,startTime:b}};g.getMediaInfoForTime=z;var q=function(a){return a.excludeUntil&&a.excludeUntil>Date.now()};g.isBlacklisted=q;var y=function(a){return a.excludeUntil&&Infinity===a.excludeUntil};g.isIncompatible=y;var A=function(a){var b=q(a);return!a.disabled&&!b};g.isEnabled=A;var C=function(a){return a.disabled};g.isDisabled=C;var G=function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].key)return!0;
return!1};g.isAes=G;var E=function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].map)return!0;return!1};g.isFmp4=E;var F=function(a,b){return b.attributes&&b.attributes[a]};g.hasAttribute=F;var I=function(a,b,c){var e=3>=arguments.length||void 0===arguments[3]?0:arguments[3];return F("BANDWIDTH",c)?(a*c.attributes.BANDWIDTH-8*e)/b:NaN};g.estimateSegmentRequestTime=I;var e=function(a,b){if(1===a.playlists.length)return!0;var c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(function(a){return A(a)?
(a.attributes.BANDWIDTH||0)<c:!1}).length};g.isLowestEnabledRendition=e;g["default"]={duration:n,seekable:a,safeLiveIndex:r,getMediaInfoForTime:z,isEnabled:A,isDisabled:C,isBlacklisted:q,isIncompatible:y,playlistEnd:w,isAes:G,isFmp4:E,hasAttribute:F,estimateSegmentRequestTime:I,isLowestEnabledRendition:e}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"global/window":32}],12:[function(h,c,g){(function(a){Object.defineProperty(g,
"__esModule",{value:!0});var f=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,f=!1,g=void 0;try{for(var h=a[Symbol.iterator](),l;!(d=(l=h.next()).done)&&(c.push(l.value),!b||c.length!==b);d=!0);}catch(C){f=!0,g=C}finally{try{if(!d&&h["return"])h["return"]()}finally{if(f)throw g;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),d=(a="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?
a.videojs:null)&&a.__esModule?a:{"default":a},b=1/30,h=function(a,b){b=f(b,2);return Math.min(Math.max(b[0],a),b[1])},n=function(a,b){var c=[],f;if(a&&a.length)for(f=0;f<a.length;f++)b(a.start(f),a.end(f))&&c.push([a.start(f),a.end(f)]);return d["default"].createTimeRanges(c)},p=function(a,b){var c=null,f=null,g=0,h=[],l=[];if(!(a&&a.length&&b&&b.length))return d["default"].createTimeRange();for(var n=a.length;n--;)h.push({time:a.start(n),type:"start"}),h.push({time:a.end(n),type:"end"});for(n=b.length;n--;)h.push({time:b.start(n),
type:"start"}),h.push({time:b.end(n),type:"end"});h.sort(function(a,b){return a.time-b.time});for(n=0;n<h.length;n++)"start"===h[n].type?(g++,2===g&&(c=h[n].time)):"end"===h[n].type&&(g--,1===g&&(f=h[n].time)),null!==c&&null!==f&&(l.push([c,f]),f=c=null);return d["default"].createTimeRanges(l)};g["default"]={findRange:function(a,c){return n(a,function(a,d){return a-b<=c&&d+b>=c})},findNextRange:function(a,c){return n(a,function(a){return a-b>=c})},findGaps:function(a){if(2>a.length)return d["default"].createTimeRanges();
for(var b=[],c=1;c<a.length;c++){var f=a.end(c-1),g=a.start(c);b.push([f,g])}return d["default"].createTimeRanges(b)},findSoleUncommonTimeRangesEnd:function(a,b){var c=void 0,d=void 0,f=void 0,g=[],h=[],l=function(a){return a[0]<=f&&a[1]>=f};if(a)for(c=0;c<a.length;c++)d=a.start(c),f=a.end(c),h.push([d,f]);if(b)for(c=0;c<b.length;c++)d=b.start(c),f=b.end(c),h.some(l)||g.push(f);return 1!==g.length?null:g[0]},getSegmentBufferedPercent:function(a,b,c,f){b=a+b;var g=d["default"].createTimeRanges([[a,
b]]),l=d["default"].createTimeRanges([[h(a,[c,b]),b]]);if(l.start(0)===l.end(0))return 0;a=g.end(0)-g.start(0);b=l.end(0)-l.start(0);b=a-b;l=p(l,f);f=p(g,f);for(var n=g=0,r=l.length;r--;)g+=l.end(r)-l.start(r),l.start(r)===c&&(g+=b);for(r=f.length;r--;)n+=f.end(r)-f.start(r);c=Math.max(g,n)/a*100;return isNaN(c)||Infinity===c||-Infinity===c?0:c},TIME_FUDGE_FACTOR:b,SAFE_TIME_DELTA:3*b,printableRange:function(a){var b=[];if(!a||!a.length)return"";for(var c=0;c<a.length;c++)b.push(a.start(c)+" => "+
a.end(c));return b.join(", ")},timeUntilRebuffer:function(a,b){var c=2>=arguments.length||void 0===arguments[2]?1:arguments[2];return((a.length?a.end(a.length-1):0)-b)/c}};c.exports=g["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],13:[function(h,c,g){(function(a){Object.defineProperty(g,"__esModule",{value:!0});var f=(a="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null)&&a.__esModule?
a:{"default":a},d={errorInterval:30,getSource:function(a){var b=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_;return a(b)}},b=function n(a,b){var c=0,g=0,h=f["default"].mergeOptions(d,b);a.ready(function(){a.trigger({type:"usage",name:"hls-error-reload-initialized"})});var p=function(){g&&a.currentTime(g)},q=function(b){null!==b&&void 0!==b&&(g=Infinity!==a.duration()&&a.currentTime()||0,a.one("loadedmetadata",p),a.src(b),a.trigger({type:"usage",name:"hls-error-reload"}),a.play())},r=function(){if(Date.now()-
c<1E3*h.errorInterval)a.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(h.getSource&&"function"===typeof h.getSource)return c=Date.now(),h.getSource.call(a,q);f["default"].log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},A=function G(){a.off("loadedmetadata",p);a.off("error",r);a.off("dispose",G)};a.on("error",r);a.on("dispose",A);a.reloadSourceOnError=function(b){A();n(a,b)}};g["default"]=function(a){b(this,a)};c.exports=g["default"]}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],14:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});var a=h("./playlist.js"),f=function(b,c,d){return function(f){var g=b.master.playlists[c],h=(0,a.isIncompatible)(g),l=(0,a.isEnabled)(g);if("undefined"===typeof f)return l;f?delete g.disabled:g.disabled=!0;f===l||h||(d(),f?b.trigger("renditionenabled"):b.trigger("renditiondisabled"));return f}},d=function l(a,c,d){if(!(this instanceof
l))throw new TypeError("Cannot call a class as a function");var g=a.masterPlaylistController_.fastQualityChange_.bind(a.masterPlaylistController_);if(c.attributes.RESOLUTION){var h=c.attributes.RESOLUTION;this.width=h.width;this.height=h.height}this.bandwidth=c.attributes.BANDWIDTH;this.id=d;this.enabled=f(a.playlists,c.uri,g)};g["default"]=function(c){var f=c.playlists;c.representations=function(){return f.master.playlists.filter(function(c){return!(0,a.isIncompatible)(c)}).map(function(a,f){return new d(c,
a,a.uri)})}};c.exports=g["default"]},{"./playlist.js":11}],15:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});var a=h("url-toolkit"),f=a&&a.__esModule?a:{"default":a},d=(h=h("global/window"))&&h.__esModule?h:{"default":h};g["default"]=function(a,c){if(/^[a-z]+:/i.test(c))return c;/\/\//i.test(a)||(a=f["default"].buildAbsoluteURL(d["default"].location.href,a));return f["default"].buildAbsoluteURL(a,c)};c.exports=g["default"]},{"global/window":32,"url-toolkit":63}],16:[function(h,
c,g){(function(a){function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,"__esModule",{value:!0});var b=function(){function a(a,b){for(var c=0;c<b.length;c++){var e=
b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a,b,c){var e=!0;for(;e;)if(null===a&&(a=Function.prototype),e=Object.getOwnPropertyDescriptor(a,b),void 0===e){a=Object.getPrototypeOf(a);if(null===a)break;e=!0}else{if("value"in e)return e.value;b=e.get;return void 0===b?void 0:b.call(c)}},n=h("./playlist"),p=c(n),r=c("undefined"!==typeof window?window.videojs:
"undefined"!==typeof a?a.videojs:null);a=h("./source-updater");var w=c(a);a=h("./config");var z=c(a);a=h("global/window");var v=c(a);a=h("videojs-contrib-media-sources/es5/remove-cues-from-track.js");var t=c(a),q=h("./bin-utils"),y=h("./media-segment-request"),A=h("./ranges"),C=h("./playlist-selectors"),G=function(a,b,c){if(!a||!b)return!1;c=c===a.segments.length;return a.endList&&"open"===b.readyState&&c},E=function(a,b,c){return"main"===a&&b&&c?c.containsAudio||c.containsVideo?b.containsVideo&&
!c.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!b.containsVideo&&c.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null};g.illegalMediaSwitch=
E;var F=function(a,b,c){a=a.length&&0<a.start(0)&&a.start(0)<b?a.start(0):b-30;return Math.min(a,b-c)};g.safeBackBufferTrimTime=F;a=function(a){function c(a){var b=this,e=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");l(Object.getPrototypeOf(c.prototype),"constructor",this).call(this);if(!a)throw new TypeError("Initialization settings are required");if("function"!==typeof a.currentTime)throw new TypeError("No currentTime getter specified");
if(!a.mediaSource)throw new TypeError("No MediaSource specified");this.state="INIT";this.bandwidth=a.bandwidth;this.throughput={rate:0,count:0};this.roundTrip=NaN;this.resetStats_();this.mediaIndex=null;this.hasPlayed_=a.hasPlayed;this.currentTime_=a.currentTime;this.seekable_=a.seekable;this.seeking_=a.seeking;this.duration_=a.duration;this.mediaSource_=a.mediaSource;this.hls_=a.hls;this.loaderType_=a.loaderType;this.startingMedia_=void 0;this.segmentMetadataTrack_=a.segmentMetadataTrack;this.goalBufferLength_=
a.goalBufferLength;this.checkBufferTimeout_=null;this.error_=void 0;this.currentTimeline_=-1;this.activeInitSegmentId_=this.xhrOptions_=this.sourceUpdater_=this.mimeType_=this.pendingSegment_=null;this.initSegments_={};this.decrypter_=a.decrypter;this.syncController_=a.syncController;this.syncPoint_={segmentIndex:0,time:0};this.syncController_.on("syncinfoupdate",function(){return b.trigger("syncinfoupdate")});this.mediaSource_.addEventListener("sourceopen",function(){return b.ended_=!1});this.fetchAtBuffer_=
!1;e.debug&&(this.logger_=r["default"].log.bind(r["default"],"segment-loader",this.loaderType_,"->"))}d(c,a);b(c,[{key:"resetStats_",value:function(){this.mediaSecondsLoaded=this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=0}},{key:"dispose",value:function(){this.state="DISPOSED";this.pause();this.abort_();this.sourceUpdater_&&this.sourceUpdater_.dispose();this.resetStats_()}},{key:"abort",value:function(){"WAITING"!==
this.state?this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests();this.pendingSegment_=null}},{key:"error",value:function(a){"undefined"!==typeof a&&(this.error_=a);this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function(){this.ended_=!0;this.pause();this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?
this.sourceUpdater_.buffered():r["default"].createTimeRanges()}},{key:"initSegment",value:function(a){var b=1>=arguments.length||void 0===arguments[1]?!1:arguments[1];if(!a)return null;var c=(0,q.initSegmentId)(a),e=this.initSegments_[c];b&&!e&&a.bytes&&(this.initSegments_[c]=e={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes});return e||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},
{key:"load",value:function(){this.monitorBuffer_();if(this.playlist_){this.syncController_.setDateTimeMapping(this.playlist_);if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){this.state="READY";this.sourceUpdater_=new w["default"](this.mediaSource_,this.mimeType_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function(a){var b=
1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if(a){var c=this.playlist_,e=this.pendingSegment_;this.playlist_=a;this.xhrOptions_=b;this.hasPlayed_()||(a.syncInfo={mediaSequence:a.mediaSequence,time:0});this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();c&&c.uri===a.uri?(b=a.mediaSequence-c.mediaSequence,this.logger_("mediaSequenceDiff",b),null!==this.mediaIndex&&(this.mediaIndex-=b),e&&(e.mediaIndex-=b,0<=e.mediaIndex&&(e.segment=a.segments[e.mediaIndex])),
this.syncController_.saveExpiredSegmentInfo(c,a)):null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(v["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(a){this.mimeType_||(this.mimeType_=a,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(){this.ended_=!1;this.resetLoader();
this.remove(0,this.duration_());this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1;this.resyncLoader()}},{key:"resyncLoader",value:function(){this.syncPoint_=this.mediaIndex=null;this.abort()}},{key:"remove",value:function(a,b){this.sourceUpdater_&&this.sourceUpdater_.remove(a,b);(0,t["default"])(a,b,this.segmentMetadataTrack_)}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&v["default"].clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=
v["default"].setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&v["default"].clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=v["default"].setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,
this.currentTime_()));var a=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(a)if(G(this.playlist_,this.mediaSource_,a.mediaIndex))this.endOfStream();else if(a.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_()){if(a.timeline!==this.currentTimeline_||null!==a.startOfSegment&&a.startOfSegment<this.sourceUpdater_.timestampOffset())this.syncController_.reset(),a.timestampOffset=
a.startOfSegment;this.loadSegment_(a)}}}},{key:"checkBuffer_",value:function(a,b,c,e,d,f){var g=0;a.length&&(g=a.end(a.length-1));a=Math.max(0,g-d);if(!b.segments.length||a>=this.goalBufferLength_()||!e&&1<=a)return null;this.logger_("checkBuffer_","mediaIndex:",c,"hasPlayed:",e,"currentTime:",d,"syncPoint:",f,"fetchAtBuffer:",this.fetchAtBuffer_,"bufferedTime:",a);if(null===f)return c=this.getSyncSegmentCandidate_(b),this.logger_("getSync","mediaIndex:",c),this.generateSegmentInfo_(b,c,null,!0);
if(null!==c)return this.logger_("walkForward","mediaIndex:",c+1),g=(e=b.segments[c])&&e.end?e.end:g,this.generateSegmentInfo_(b,c+1,g,!1);g=this.fetchAtBuffer_?p["default"].getMediaInfoForTime(b,g,f.segmentIndex,f.time):p["default"].getMediaInfoForTime(b,d,f.segmentIndex,f.time);c=g.mediaIndex;g=g.startTime;this.logger_("getMediaIndexForTime","mediaIndex:",c,"startOfSegment:",g);return this.generateSegmentInfo_(b,c,g,!1)}},{key:"getSyncSegmentCandidate_",value:function(a){var b=this;if(-1===this.currentTimeline_)return 0;
var c=a.segments.map(function(a,b){return{timeline:a.timeline,segmentIndex:b}}).filter(function(a){return a.timeline===b.currentTimeline_});return c.length?c[Math.min(c.length-1,1)].segmentIndex:Math.max(a.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(a,b,c,e){if(0>b||b>=a.segments.length)return null;var d=a.segments[b];return{requestId:"segment-loader-"+Math.random(),uri:d.resolvedUri,mediaIndex:b,isSyncRequest:e,startOfSegment:c,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,
timeline:d.timeline,duration:d.duration,segment:d}}},{key:"abortRequestEarly_",value:function(a){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||1E3>Date.now()-(a.firstBytesReceivedAt||Date.now()))return!1;var b=this.currentTime_(),c=a.bandwidth,e=this.pendingSegment_.duration,d=p["default"].estimateSegmentRequestTime(e,c,this.playlist_,a.bytesReceived);a=(0,A.timeUntilRebuffer)(this.buffered_(),b,this.hls_.tech_.playbackRate())-1;if(d<=a)return!1;if(b=
(0,C.minRebufferMaxBandwidthSelector)({master:this.hls_.playlists.master,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:e,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_})){c=d-a-b.rebufferingImpact;e=.5;a<=A.TIME_FUDGE_FACTOR&&(e=1);if(!b.playlist||b.playlist.uri===this.playlist_.uri||c<e)return!1;this.bandwidth=b.playlist.attributes.BANDWIDTH*z["default"].BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return!0}}},{key:"handleProgress_",
value:function(a,b){this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(b.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(a){this.state="WAITING";this.pendingSegment_=a;this.trimBackBuffer_(a);a.abortRequests=(0,y.mediaSegmentRequest)(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(a),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(a){a=F(this.seekable_(),
this.currentTime_(),this.playlist_.targetDuration||10);0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",value:function(a){var b=a.segment,c={resolvedUri:b.resolvedUri,byterange:b.byterange,requestId:a.requestId};b.key&&(a=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]),c.key={resolvedUri:b.key.resolvedUri,iv:a});b.map&&(c.map=this.initSegment(b.map));return c}},{key:"segmentRequestFinished_",value:function(a,b){this.mediaRequests+=1;b.stats&&(this.mediaBytesTransferred+=
b.stats.bytesReceived,this.mediaTransferDuration+=b.stats.roundTripTime);this.pendingSegment_?b.requestId===this.pendingSegment_.requestId&&(a?(this.pendingSegment_=null,this.state="READY",a.code===y.REQUEST_ERRORS.ABORTED?this.mediaRequestsAborted+=1:(this.pause(),a.code===y.REQUEST_ERRORS.TIMEOUT?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(a),this.trigger("error")))):(this.bandwidth=b.stats.bandwidth,
this.roundTrip=b.stats.roundTripTime,b.map&&(b.map=this.initSegment(b.map,!0)),this.processSegmentResponse_(b))):this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(a){var b=this.pendingSegment_;b.bytes=a.bytes;a.map&&(b.segment.map.bytes=a.map.bytes);b.endOfAllRequests=a.endOfAllRequests;this.handleSegment_()}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_){var b=this.pendingSegment_,c=b.segment,e=this.syncController_.probeSegmentInfo(b);"undefined"===
typeof this.startingMedia_&&e&&(e.containsAudio||e.containsVideo)&&(this.startingMedia_={containsAudio:e.containsAudio,containsVideo:e.containsVideo});(e=E(this.loaderType_,this.startingMedia_,e))?(this.error({message:e,blacklistDuration:Infinity}),this.trigger("error")):b.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(null!==b.timestampOffset&&b.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(b.timestampOffset),
this.trigger("timestampoffset")),e=this.syncController_.mappingForTimeline(b.timeline),null!==e&&this.trigger({type:"segmenttimemapping",mapping:e}),this.state="APPENDING",c.map&&function(){var b=(0,q.initSegmentId)(c.map);if(!a.activeInitSegmentId_||a.activeInitSegmentId_!==b){var e=a.initSegment(c.map);a.sourceUpdater_.appendBuffer(e.bytes,function(){a.activeInitSegmentId_=b})}}(),b.byteLength=b.bytes.byteLength,this.mediaSecondsLoaded="number"===typeof c.start&&"number"===typeof c.end?this.mediaSecondsLoaded+
(c.end-c.start):this.mediaSecondsLoaded+c.duration,this.sourceUpdater_.appendBuffer(b.bytes,this.handleUpdateEnd_.bind(this)))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){this.logger_("handleUpdateEnd_","segmentInfo:",this.pendingSegment_);if(this.pendingSegment_){var a=this.pendingSegment_,b=a.segment,c=null!==this.mediaIndex;this.pendingSegment_=null;this.recordThroughput_(a);this.addSegmentMetadataCue_(a);this.state="READY";this.mediaIndex=a.mediaIndex;this.fetchAtBuffer_=
!0;this.currentTimeline_=a.timeline;this.trigger("syncinfoupdate");b.end&&this.currentTime_()-b.end>3*a.playlist.targetDuration?this.resetEverything():(c&&this.trigger("bandwidthupdate"),this.trigger("progress"),G(a.playlist,this.mediaSource_,a.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}else this.state="READY",this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(a){var b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1;this.throughput.rate+=
(Math.floor(a.byteLength/c*8E3)-b)/++this.throughput.count}},{key:"logger_",value:function(){}},{key:"addSegmentMetadataCue_",value:function(a){if(this.segmentMetadataTrack_){var b=a.segment,c=b.start;b=b.end;if("number"===typeof c&&isFinite(c)&&"number"===typeof b&&isFinite(b)){(0,t["default"])(c,b,this.segmentMetadataTrack_);var e=v["default"].WebKitDataCue||v["default"].VTTCue;a={bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,
byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.uri,start:c,end:b};var d=JSON.stringify(a);c=new e(c,b,d);c.value=a;this.segmentMetadataTrack_.addCue(c)}}}}]);return c}(r["default"].EventTarget);g["default"]=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bin-utils":2,"./config":3,"./media-segment-request":7,"./playlist":11,"./playlist-selectors":10,"./ranges":12,"./source-updater":17,"global/window":32,
"videojs-contrib-media-sources/es5/remove-cues-from-track.js":72}],17:[function(h,c,g){(function(a){Object.defineProperty(g,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d=(a="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null)&&a.__esModule?a:
{"default":a},b=function(){};a=function(){function a(b,c){var d=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var f=function(){d.sourceBuffer_=b.addSourceBuffer(c);d.onUpdateendCallback_=function(){var a=d.pendingCallback_;d.pendingCallback_=null;a&&a();d.runCallback_()};d.sourceBuffer_.addEventListener("updateend",d.onUpdateendCallback_);d.runCallback_()};this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=b;this.processedAppend_=
!1;"closed"===b.readyState?b.addEventListener("sourceopen",f):f()}f(a,[{key:"abort",value:function(a){var b=this;this.processedAppend_&&this.queueCallback_(function(){b.sourceBuffer_.abort()},a)}},{key:"appendBuffer",value:function(a,b){var c=this;this.processedAppend_=!0;this.queueCallback_(function(){c.sourceBuffer_.appendBuffer(a)},b)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:d["default"].createTimeRanges()}},{key:"remove",value:function(a,c){var d=
this;this.processedAppend_&&this.queueCallback_(function(){d.sourceBuffer_.remove(a,c)},b)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(a){var b=this;"undefined"!==typeof a&&(this.queueCallback_(function(){b.sourceBuffer_.timestampOffset=a}),this.timestampOffset_=a);return this.timestampOffset_}},{key:"queueCallback_",value:function(a,b){this.callbacks_.push([a.bind(this),b]);this.runCallback_()}},
{key:"runCallback_",value:function(){if(!this.updating()&&this.callbacks_.length){var a=this.callbacks_.shift();this.pendingCallback_=a[1];a[0]()}}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]);return a}();g["default"]=a;c.exports=g["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?
window:{})},{}],18:[function(h,c,g){(function(a){function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b=h("mux.js/lib/mp4/probe"),l=b&&b.__esModule?b:{"default":b},n=h("mux.js/lib/tools/ts-inspector.js"),p=h("./playlist"),r=(a="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null)&&a.__esModule?a:{"default":a},w=[{name:"VOD",run:function(a,b,c,d,f){return Infinity!==c?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",
run:function(a,b,c,d,f){return a.datetimeToDisplayTime&&b.dateTimeObject?{time:b.dateTimeObject.getTime()/1E3+a.datetimeToDisplayTime,segmentIndex:0}:null}},{name:"Segment",run:function(a,b,c,d,f){a=b.segments||[];c=b=null;f=f||0;for(var g=0;g<a.length;g++){var h=a[g];if(h.timeline===d&&"undefined"!==typeof h.start){var l=Math.abs(f-h.start);if(null!==c&&c<l)break;if(!b||null===c||c>=l)c=l,b={time:h.start,segmentIndex:g}}}return b}},{name:"Discontinuity",run:function(a,b,c,d,f){c=null;f=f||0;if(b.discontinuityStarts&&
b.discontinuityStarts.length){d=null;for(var g=0;g<b.discontinuityStarts.length;g++){var h=b.discontinuityStarts[g],l=a.discontinuities[b.discontinuitySequence+g+1];if(l){var n=Math.abs(f-l.time);if(null!==d&&d<n)break;if(!c||null===d||d>=n)d=n,c={time:l.time,segmentIndex:h}}}}return c}},{name:"Playlist",run:function(a,b,c,d,f){return b.syncInfo?{time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence}:null}}];g.syncPointStrategies=w;a=function(a){function b(){var a=0>=arguments.length||
void 0===arguments[0]?{}:arguments[0];if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");a:{var c=Object.getPrototypeOf(b.prototype),d="constructor";var f=this;var g=!0;for(;g;)if(null===c&&(c=Function.prototype),g=Object.getOwnPropertyDescriptor(c,d),void 0===g){c=Object.getPrototypeOf(c);if(null===c)break;g=!0}else{if("value"in g){f=g.value;break a}d=g.get;f=void 0===d?void 0:d.call(f);break a}f=void 0}f.call(this);this.inspectCache_=void 0;this.timelines=[];this.discontinuities=
[];this.datetimeToDisplayTime=null;a.debug&&(this.logger_=r["default"].log.bind(r["default"],"sync-controller ->"))}c(b,a);d(b,[{key:"getSyncPoint",value:function(a,b,c,d){a=this.runStrategies_(a,b,c,d);return a.length?this.selectSyncPoint_(a,{key:"time",value:d}):null}},{key:"getExpiredTime",value:function(a,b){if(!a||!a.segments)return null;b=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!b.length)return null;b=this.selectSyncPoint_(b,{key:"segmentIndex",value:0});0<b.segmentIndex&&(b.time*=
-1);return Math.abs(b.time+(0,p.sumDurations)(a,b.segmentIndex,0))}},{key:"runStrategies_",value:function(a,b,c,d){for(var f=[],g=0;g<w.length;g++){var h=w[g],l=h.run(this,a,b,c,d);l&&(l.strategy=h.name,f.push({strategy:h.name,syncPoint:l}),this.logger_("syncPoint found via <"+h.name+">:",l))}return f}},{key:"selectSyncPoint_",value:function(a,b){for(var c=a[0].syncPoint,d=Math.abs(a[0].syncPoint[b.key]-b.value),f=a[0].strategy,g=1;g<a.length;g++){var h=Math.abs(a[g].syncPoint[b.key]-b.value);h<d&&
(d=h,c=a[g].syncPoint,f=a[g].strategy)}this.logger_("syncPoint with strategy <"+f+"> chosen: ",c);return c}},{key:"saveExpiredSegmentInfo",value:function(a,b){for(var c=b.mediaSequence-a.mediaSequence-1;0<=c;c--){var d=a.segments[c];if(d&&"undefined"!==typeof d.start){b.syncInfo={mediaSequence:a.mediaSequence+c,time:d.start};this.logger_("playlist sync:",b.syncInfo);this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(a){!this.datetimeToDisplayTime&&a.dateTimeObject&&
(this.datetimeToDisplayTime=-(a.dateTimeObject.getTime()/1E3))}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(a){var b=a.segment,c=a.playlist,d;(d=b.map?this.probeMp4Segment_(a):this.probeTsSegment_(a))&&this.calculateSegmentTimeMapping_(a,d)&&(this.saveDiscontinuitySyncInfo_(a),c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:b.start}));return d}},{key:"probeMp4Segment_",value:function(a){var b=a.segment,c=l["default"].timescale(b.map.bytes);
c=l["default"].startTime(c,a.bytes);null!==a.timestampOffset&&(a.timestampOffset-=c);return{start:c,end:c+b.duration}}},{key:"probeTsSegment_",value:function(a){a=(0,n.inspect)(a.bytes,this.inspectCache_);var b=void 0,c=void 0;if(!a)return null;a.video&&2===a.video.length?(this.inspectCache_=a.video[1].dts,b=a.video[0].dtsTime,c=a.video[1].dtsTime):a.audio&&2===a.audio.length&&(this.inspectCache_=a.audio[1].dts,b=a.audio[0].dtsTime,c=a.audio[1].dtsTime);return{start:b,end:c,containsVideo:a.video&&
2===a.video.length,containsAudio:a.audio&&2===a.audio.length}}},{key:"timestampOffsetForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].time}},{key:"mappingForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].mapping}},{key:"calculateSegmentTimeMapping_",value:function(a,b){var c=a.segment,d=this.timelines[a.timeline];if(null!==a.timestampOffset)this.logger_("tsO:",a.timestampOffset),d={time:a.startOfSegment,
mapping:a.startOfSegment-b.start},this.timelines[a.timeline]=d,this.trigger("timestampoffset"),c.start=a.startOfSegment,c.end=b.end+d.mapping;else if(d)c.start=b.start+d.mapping,c.end=b.end+d.mapping;else return!1;return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(a){var b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts.length)for(var d=0;d<b.discontinuityStarts.length;d++){var f=b.discontinuityStarts[d],g=
b.discontinuitySequence+d+1,h=f-a.mediaIndex,l=Math.abs(h);if(!this.discontinuities[g]||this.discontinuities[g].accuracy>l)f=0>h?c.start-(0,p.sumDurations)(b,a.mediaIndex,f):c.end+(0,p.sumDurations)(b,a.mediaIndex+1,f),this.discontinuities[g]={time:f,accuracy:l}}}},{key:"logger_",value:function(){}}]);return b}(r["default"].EventTarget);g["default"]=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./playlist":11,"mux.js/lib/mp4/probe":57,
"mux.js/lib/tools/ts-inspector.js":59}],19:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});g.parseCodecs=function(){var a=0>=arguments.length||void 0===arguments[0]?"":arguments[0],c={codecCount:0},d;c.codecCount=a.split(",").length;c.codecCount=c.codecCount||2;if(d=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(a))c.videoCodec=d[2],c.videoObjectTypeIndicator=d[3];c.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(a);c.audioProfile=c.audioProfile&&c.audioProfile[2];return c}},{}],
20:[function(h,c,g){(function(a){function f(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,"__esModule",{value:!0});var b=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=h("./segment-loader");l=f(l);var n=f("undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null);a=h("global/window");var p=f(a);a=h("videojs-contrib-media-sources/es5/remove-cues-from-track.js");var r=f(a),w=h("./bin-utils"),z=new Uint8Array(["\n","\n"].map(function(a){return a.charCodeAt(0)}));
l=function(a){function c(a){var b=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");a:{var d=Object.getPrototypeOf(c.prototype),f="constructor";var g=this;var h=!0;for(;h;)if(null===d&&(d=Function.prototype),h=Object.getOwnPropertyDescriptor(d,f),void 0===h){d=Object.getPrototypeOf(d);if(null===d)break;h=!0}else{if("value"in h){g=h.value;break a}f=h.get;g=void 0===f?void 0:f.call(g);break a}g=void 0}g.call(this,
a,b);this.subtitlesTrack_=this.mediaSource_=null}d(c,a);b(c,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return n["default"].createTimeRanges();var a=this.subtitlesTrack_.cues;return n["default"].createTimeRanges([[a[0].startTime,a[a.length-1].startTime]])}},{key:"initSegment",value:function(a){var b=1>=arguments.length||void 0===arguments[1]?!1:arguments[1];if(!a)return null;var c=(0,w.initSegmentId)(a),d=this.initSegments_[c];b&&!d&&a.bytes&&(b=
new Uint8Array(z.byteLength+a.bytes.byteLength),b.set(a.bytes),b.set(z,a.bytes.byteLength),this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:b});return d||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function(a){if("undefined"===typeof a)return this.subtitlesTrack_;this.subtitlesTrack_=
a;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_}},{key:"remove",value:function(a,b){(0,r["default"])(a,b,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var a=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var b=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(b=this.skipEmptySegments_(b))null===
this.syncController_.timestampOffsetForTimeline(b.timeline)?(this.syncController_.one("timestampoffset",function(){a.state="READY";a.paused()||a.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(b)}},{key:"skipEmptySegments_",value:function(a){for(;a&&a.segment.empty;)a=this.generateSegmentInfo_(a.playlist,a.mediaIndex+1,a.startOfSegment+a.duration,a.isSyncRequest);return a}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state=
"APPENDING";var b=this.pendingSegment_,c=b.segment;if("function"!==typeof p["default"].WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var d=function(){var b=function(){a.handleSegment_()};a.state="WAITING_ON_VTTJS";a.subtitlesTrack_.tech_.one("vttjsloaded",b);a.subtitlesTrack_.tech_.one("vttjserror",function(){a.subtitlesTrack_.tech_.off("vttjsloaded",b);a.error({message:"Error loading vtt.js"});a.state="READY";a.pause();a.trigger("error")});return{v:void 0}}();if("object"===typeof d)return d.v}c.requested=
!0;try{this.parseVTTCues_(b)}catch(G){return this.error({message:G.message}),this.state="READY",this.pause(),this.trigger("error")}this.updateTimeMapping_(b,this.syncController_.timelines[b.timeline],this.playlist_);b.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(b.byteLength=b.bytes.byteLength,this.mediaSecondsLoaded+=c.duration,b.cues.length&&this.remove(b.cues[0].endTime,b.cues[b.cues.length-1].endTime),b.cues.forEach(function(b){a.subtitlesTrack_.addCue(b)}),
this.handleUpdateEnd_())}else this.state="READY"}},{key:"parseVTTCues_",value:function(a){var b=void 0,c=!1;"function"===typeof p["default"].TextDecoder?b=new p["default"].TextDecoder("utf8"):(b=p["default"].WebVTT.StringDecoder(),c=!0);b=new p["default"].WebVTT.Parser(p["default"],p["default"].vttjs,b);a.cues=[];a.timestampmap={MPEGTS:0,LOCAL:0};b.oncue=a.cues.push.bind(a.cues);b.ontimestampmap=function(b){return a.timestampmap=b};b.onparsingerror=function(a){n["default"].log.warn("Error encountered when parsing cues: "+
a.message)};if(a.segment.map){var d=a.segment.map.bytes;c&&(d=String.fromCharCode.apply(null,d));b.parse(d)}d=a.bytes;c&&(d=String.fromCharCode.apply(null,d));b.parse(d);b.flush()}},{key:"updateTimeMapping_",value:function(a,b,c){var d=a.segment;if(b)if(a.cues.length){var f=a.timestampmap,g=f.MPEGTS/9E4-f.LOCAL+b.mapping;a.cues.forEach(function(a){a.startTime+=g;a.endTime+=g});c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:Math.min(a.cues[0].startTime,a.cues[a.cues.length-
1].startTime-d.duration)})}else d.empty=!0}}]);return c}(l["default"]);g["default"]=l;c.exports=g["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bin-utils":2,"./segment-loader":16,"global/window":32,"videojs-contrib-media-sources/es5/remove-cues-from-track.js":72}],21:[function(h,c,g){(function(a){Object.defineProperty(g,"__esModule",{value:!0});var f="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?
a.videojs:null,d=f&&f.__esModule?f:{"default":f};g["default"]=function(){return function l(a,c){a=(0,f.mergeOptions)({timeout:45E3},a);var g=l.beforeRequest||d["default"].Hls.xhr.beforeRequest;g&&"function"===typeof g&&(g=g(a))&&(a=g);var h=(0,f.xhr)(a,function(a,d){var f=h.response;!a&&f&&(h.responseTime=Date.now(),h.roundTripTime=h.responseTime-h.requestTime,h.bytesReceived=f.byteLength||f.length,h.bandwidth||(h.bandwidth=Math.floor(h.bytesReceived/h.roundTripTime*8E3)));a&&"ETIMEDOUT"===a.code&&
(h.timedout=!0);a||h.aborted||200===d.statusCode||206===d.statusCode||0===d.statusCode||(a=Error("XHR Failed with a response of: "+(h&&(f||h.responseText))));c(a,h)}),n=h.abort;h.abort=function(){h.aborted=!0;return n.apply(h,arguments)};h.uri=a.uri;h.requestTime=Date.now();return h}};c.exports=g["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],22:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});var a=
function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),f=null;h=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");if(!f){var b=[[[],[],[],[],[]],[[],[],[],[],[]]],d=b[0],g=b[1],h=d[4],w=g[4],z,v,t,q=[],y=[],A;for(z=0;256>z;z++)y[(q[z]=z<<1^283*(z>>7))^z]=z;
for(v=t=0;!h[v];v^=A||1,t=y[t]||1){var C=t^t<<1^t<<2^t<<3^t<<4;C=C>>8^C&255^99;h[v]=C;w[C]=v;var G=q[z=q[A=q[v]]];var E=16843009*G^65537*z^257*A^16843008*v;G=257*q[C]^16843008*C;for(z=0;4>z;z++)d[z][v]=G=G<<24^G>>>8,g[z][C]=E=E<<24^E>>>8}for(z=0;5>z;z++)d[z]=d[z].slice(0),g[z]=g[z].slice(0);f=b}this._tables=[[f[0][0].slice(),f[0][1].slice(),f[0][2].slice(),f[0][3].slice(),f[0][4].slice()],[f[1][0].slice(),f[1][1].slice(),f[1][2].slice(),f[1][3].slice(),f[1][4].slice()]];b=this._tables[0][4];d=this._tables[1];
v=a.length;t=1;if(4!==v&&6!==v&&8!==v)throw Error("Invalid aes key size");h=a.slice(0);w=[];this._key=[h,w];for(a=v;a<4*v+28;a++){g=h[a-1];if(0===a%v||8===v&&4===a%v)g=b[g>>>24]<<24^b[g>>16&255]<<16^b[g>>8&255]<<8^b[g&255],0===a%v&&(g=g<<8^g>>>24^t<<24,t=t<<1^283*(t>>7));h[a]=h[a-v]^g}for(v=0;a;v++,a--)g=h[v&3?a:a-4],w[v]=4>=a||4>v?g:d[0][b[g>>>24]]^d[1][b[g>>16&255]]^d[2][b[g>>8&255]]^d[3][b[g&255]]}a(c,[{key:"decrypt",value:function(a,c,d,f,g,h){var b=this._key[1];a^=b[0];f^=b[1];d^=b[2];c^=b[3];
var l=b.length/4-2,n,q=4;var p=this._tables[1];var r=p[0],w=p[1],G=p[2],E=p[3],F=p[4];for(n=0;n<l;n++){p=r[a>>>24]^w[f>>16&255]^G[d>>8&255]^E[c&255]^b[q];var I=r[f>>>24]^w[d>>16&255]^G[c>>8&255]^E[a&255]^b[q+1];var e=r[d>>>24]^w[c>>16&255]^G[a>>8&255]^E[f&255]^b[q+2];c=r[c>>>24]^w[a>>16&255]^G[f>>8&255]^E[d&255]^b[q+3];q+=4;a=p;f=I;d=e}for(n=0;4>n;n++)g[(3&-n)+h]=F[a>>>24]<<24^F[f>>16&255]<<16^F[d>>8&255]<<8^F[c&255]^b[q++],p=a,a=f,f=d,d=c,c=p}}]);return c}();g["default"]=h;c.exports=g["default"]},
{}],23:[function(h,c,g){function a(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}Object.defineProperty(g,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d=(h=h("./stream"))&&h.__esModule?h:{"default":h};h=function(b){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");a:{var a=Object.getPrototypeOf(c.prototype),b="constructor";var f=this;var g=!0;for(;g;)if(null===a&&(a=Function.prototype),g=Object.getOwnPropertyDescriptor(a,b),void 0===g){a=Object.getPrototypeOf(a);if(null===
a)break;g=!0}else{if("value"in g){f=g.value;break a}b=g.get;f=void 0===b?void 0:b.call(f);break a}f=void 0}f.call(this,d["default"]);this.jobs=[];this.delay=1;this.timeout_=null}a(c,b);f(c,[{key:"processJob_",value:function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null}},{key:"push",value:function(a){this.jobs.push(a);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}]);return c}(d["default"]);g["default"]=
h;c.exports=g["default"]},{"./stream":26}],24:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),f=(c=h("./aes"))&&c.__esModule?c:{"default":c},d=(c=h("./async-stream"))&&c.__esModule?c:{"default":c},b=h("pkcs7"),l=function(a){return a<<
24|(a&65280)<<8|(a&16711680)>>8|a>>>24},n=function(a,b,c){var d=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2);b=new f["default"](Array.prototype.slice.call(b));a=new Uint8Array(a.byteLength);var g=new Int32Array(a.buffer),h;var n=c[0];var p=c[1];var r=c[2];c=c[3];for(h=0;h<d.length;h+=4){var w=l(d[h]);var G=l(d[h+1]);var E=l(d[h+2]);var F=l(d[h+3]);b.decrypt(w,G,E,F,g,h);g[h]=l(g[h]^n);g[h+1]=l(g[h+1]^p);g[h+2]=l(g[h+2]^r);g[h+3]=l(g[h+3]^c);n=w;p=G;r=E;c=F}return a};g.decrypt=n;h=function(){function c(a,
f,g,h){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var n=c.STEP,q=new Int32Array(a.buffer),p=new Uint8Array(a.byteLength);a=0;this.asyncStream_=new d["default"];this.asyncStream_.push(this.decryptChunk_(q.subarray(a,a+n),f,g,p));for(a=n;a<q.length;a+=n)g=new Uint32Array([l(q[a-4]),l(q[a-3]),l(q[a-2]),l(q[a-1])]),this.asyncStream_.push(this.decryptChunk_(q.subarray(a,a+n),f,g,p));this.asyncStream_.push(function(){h(null,(0,b.unpad)(p))})}a(c,[{key:"decryptChunk_",
value:function(a,b,c,d){return function(){var f=n(a,b,c);d.set(f,a.byteOffset)}}}],[{key:"STEP",get:function(){return 32E3}}]);return c}();g.Decrypter=h;g["default"]={Decrypter:h,decrypt:n}},{"./aes":22,"./async-stream":23,pkcs7:28}],25:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});var a=h("./decrypter");h=h("./async-stream");g["default"]={decrypt:a.decrypt,Decrypter:a.Decrypter,AsyncStream:(h&&h.__esModule?h:{"default":h})["default"]};c.exports=g["default"]},{"./async-stream":23,
"./decrypter":24}],26:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,f){b&&a(c.prototype,b);f&&a(c,f);return c}}();h=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.listeners={}}a(c,[{key:"on",value:function(a,b){this.listeners[a]||
(this.listeners[a]=[]);this.listeners[a].push(b)}},{key:"off",value:function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b}},{key:"trigger",value:function(a){var b,c;if(b=this.listeners[a])if(2===arguments.length){var d=b.length;for(c=0;c<d;++c)b[c].call(this,arguments[1])}else{var f=Array.prototype.slice.call(arguments,1);d=b.length;for(c=0;c<d;++c)b[c].apply(this,f)}}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(a){this.on("data",
function(b){a.push(b)})}}]);return c}();g["default"]=h;c.exports=g["default"]},{}],27:[function(h,c,g){c.exports=function(c){var d=a[c.byteLength%16||0],b=new Uint8Array(c.byteLength+d.length);b.set(c);b.set(d,c.byteLength);return b};var a=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,
10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],28:[function(h,c,g){g.pad=h("./pad.js");g.unpad=h("./unpad.js")},{"./pad.js":27,"./unpad.js":29}],29:[function(h,c,g){c.exports=function(a){return a.subarray(0,a.byteLength-a[a.byteLength-1])}},{}],30:[function(h,c,g){},{}],31:[function(h,c,g){g="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};g="undefined"!==
typeof g?g:"undefined"!==typeof window?window:{};h=h("min-document");if("undefined"!==typeof document)var a=document;else(a=g["__GLOBAL_DOCUMENT_CACHE@4"])||(a=g["__GLOBAL_DOCUMENT_CACHE@4"]=h);c.exports=a},{"min-document":30}],32:[function(h,c,g){h="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};c.exports="undefined"!==typeof window?window:"undefined"!==typeof h?h:"undefined"!==typeof self?self:{}},{}],33:[function(h,c,g){function a(a){return a&&
a.__esModule?a:{"default":a}}g=h("./line-stream");g=a(g);var f=h("./parse-stream");f=a(f);h=h("./parser");h=a(h);c.exports={LineStream:g["default"],ParseStream:f["default"],Parser:h["default"]}},{"./line-stream":34,"./parse-stream":35,"./parser":36}],34:[function(h,c,g){function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,"__esModule",{value:!0});var f=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();h=h("./stream");h=function(c){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a=(b.__proto__||
Object.getPrototypeOf(b)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.buffer="";return a}a(b,c);f(b,[{key:"push",value:function(a){this.buffer+=a;for(a=this.buffer.indexOf("\n");-1<a;a=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)}}]);return b}((h&&h.__esModule?h:{"default":h})["default"]);g["default"]=h},{"./stream":37}],
35:[function(h,c,g){function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,"__esModule",{value:!0});var f=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var c=[],d=!0,f=
!1,g=void 0;try{for(var h=a[Symbol.iterator](),l;!(d=(l=h.next()).done)&&(c.push(l.value),!b||c.length!==b);d=!0);}catch(q){f=!0,g=q}finally{try{if(!d&&h["return"])h["return"]()}finally{if(f)throw g;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,
c);d&&a(b,d);return b}}();h=h("./stream");var b=function(a){a=a.split(/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/);for(var b={},c=a.length,d;c--;)""!==a[c]&&(d=/([^=]*)=(.*)/.exec(a[c]).slice(1),d[0]=d[0].replace(/^\s+|\s+$/g,""),d[1]=d[1].replace(/^\s+|\s+$/g,""),d[1]=d[1].replace(/^['"](.*)['"]$/g,"$1"),b[d[0]]=d[1]);return b};h=function(c){function g(){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var a=(g.__proto__||Object.getPrototypeOf(g)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!a||"object"!==typeof a&&"function"!==typeof a?this:a}a(g,c);d(g,[{key:"push",value:function(a){var c;a=a.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"");if(0!==a.length)if("#"!==a[0])this.trigger("data",{type:"uri",uri:a});else if(0!==a.indexOf("#EXT"))this.trigger("data",{type:"comment",text:a.slice(1)});else if(a=a.replace("\r",""),c=/^#EXTM3U/.exec(a))this.trigger("data",{type:"tag",tagType:"m3u"});else if(c=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(a))a={type:"tag",tagType:"inf"},c[1]&&(a.duration=
parseFloat(c[1])),c[2]&&(a.title=c[2]),this.trigger("data",a);else if(c=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(a))a={type:"tag",tagType:"targetduration"},c[1]&&(a.duration=parseInt(c[1],10)),this.trigger("data",a);else if(c=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(a))a={type:"tag",tagType:"totalduration"},c[1]&&(a.duration=parseInt(c[1],10)),this.trigger("data",a);else if(c=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(a))a={type:"tag",tagType:"version"},c[1]&&(a.version=parseInt(c[1],10)),this.trigger("data",
a);else if(c=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))a={type:"tag",tagType:"media-sequence"},c[1]&&(a.number=parseInt(c[1],10)),this.trigger("data",a);else if(c=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))a={type:"tag",tagType:"discontinuity-sequence"},c[1]&&(a.number=parseInt(c[1],10)),this.trigger("data",a);else if(c=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(a))a={type:"tag",tagType:"playlist-type"},c[1]&&(a.playlistType=c[1]),this.trigger("data",a);else if(c=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(a))a=
{type:"tag",tagType:"byterange"},c[1]&&(a.length=parseInt(c[1],10)),c[2]&&(a.offset=parseInt(c[2],10)),this.trigger("data",a);else if(c=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(a))a={type:"tag",tagType:"allow-cache"},c[1]&&(a.allowed=!/NO/.test(c[1])),this.trigger("data",a);else if(c=/^#EXT-X-MAP:?(.*)$/.exec(a)){a={type:"tag",tagType:"map"};if(c[1]&&(c=b(c[1]),c.URI&&(a.uri=c.URI),c.BYTERANGE)){c=c.BYTERANGE.split("@");var d=f(c,2);c=d[0];d=d[1];a.byterange={};c&&(a.byterange.length=parseInt(c,10));
d&&(a.byterange.offset=parseInt(d,10))}this.trigger("data",a)}else(c=/^#EXT-X-STREAM-INF:?(.*)$/.exec(a))?(a={type:"tag",tagType:"stream-inf"},c[1]&&(a.attributes=b(c[1]),a.attributes.RESOLUTION&&(c=a.attributes.RESOLUTION.split("x"),d={},c[0]&&(d.width=parseInt(c[0],10)),c[1]&&(d.height=parseInt(c[1],10)),a.attributes.RESOLUTION=d),a.attributes.BANDWIDTH&&(a.attributes.BANDWIDTH=parseInt(a.attributes.BANDWIDTH,10)),a.attributes["PROGRAM-ID"]&&(a.attributes["PROGRAM-ID"]=parseInt(a.attributes["PROGRAM-ID"],
10))),this.trigger("data",a)):(c=/^#EXT-X-MEDIA:?(.*)$/.exec(a))?(a={type:"tag",tagType:"media"},c[1]&&(a.attributes=b(c[1])),this.trigger("data",a)):(c=/^#EXT-X-ENDLIST/.exec(a))?this.trigger("data",{type:"tag",tagType:"endlist"}):(c=/^#EXT-X-DISCONTINUITY/.exec(a))?this.trigger("data",{type:"tag",tagType:"discontinuity"}):(c=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(a))?(a={type:"tag",tagType:"program-date-time"},c[1]&&(a.dateTimeString=c[1],a.dateTimeObject=new Date(c[1])),this.trigger("data",a)):
(c=/^#EXT-X-KEY:?(.*)$/.exec(a))?(a={type:"tag",tagType:"key"},c[1]&&(a.attributes=b(c[1]),a.attributes.IV&&("0x"===a.attributes.IV.substring(0,2).toLowerCase()&&(a.attributes.IV=a.attributes.IV.substring(2)),a.attributes.IV=a.attributes.IV.match(/.{8}/g),a.attributes.IV[0]=parseInt(a.attributes.IV[0],16),a.attributes.IV[1]=parseInt(a.attributes.IV[1],16),a.attributes.IV[2]=parseInt(a.attributes.IV[2],16),a.attributes.IV[3]=parseInt(a.attributes.IV[3],16),a.attributes.IV=new Uint32Array(a.attributes.IV))),
this.trigger("data",a)):(c=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(a))?(a={type:"tag",tagType:"cue-out-cont"},a.data=c[1]?c[1]:"",this.trigger("data",a)):(c=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(a))?(a={type:"tag",tagType:"cue-out"},a.data=c[1]?c[1]:"",this.trigger("data",a)):(c=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a))?(a={type:"tag",tagType:"cue-in"},a.data=c[1]?c[1]:"",this.trigger("data",a)):this.trigger("data",{type:"tag",data:a.slice(4)})}}]);return g}((h&&h.__esModule?h:{"default":h})["default"]);g["default"]=
h},{"./stream":37}],36:[function(h,c,g){function a(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,"__esModule",{value:!0});var b=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,
c);d&&a(b,d);return b}}();c=h("./stream");c=a(c);var n=h("./line-stream"),p=a(n);h=h("./parse-stream");var r=a(h);h=function(a){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a=f(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));a.lineStream=new p["default"];a.parseStream=new r["default"];a.lineStream.pipe(a.parseStream);var d=[],g={},h=void 0,l=void 0,n=function(){},w={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},z=0;a.manifest={allowCache:!0,
discontinuityStarts:[],segments:[]};a.parseStream.on("data",function(c){var f=void 0,e=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=c.allowed;"allowed"in c||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var a={};"length"in c&&(g.byterange=a,a.length=c.length,"offset"in c||(this.trigger("info",{message:"defaulting offset to zero"}),c.offset=0));"offset"in c&&(g.byterange=a,a.offset=c.offset)},endlist:function(){this.manifest.endList=
!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));0<c.duration&&(g.duration=c.duration);0===c.duration&&(g.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=d},key:function(){c.attributes?
"NONE"===c.attributes.METHOD?l=null:c.attributes.URI?(c.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:c.attributes.METHOD||"AES-128",uri:c.attributes.URI},"undefined"!==typeof c.attributes.IV&&(l.iv=c.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(c.number)?this.manifest.mediaSequence=c.number:
this.trigger("warn",{message:"ignoring invalid media sequence: "+c.number})},"discontinuity-sequence":function(){isFinite(c.number)?z=this.manifest.discontinuitySequence=c.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+c.number})},"playlist-type":function(){/VOD|EVENT/.test(c.playlistType)?this.manifest.playlistType=c.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+c.playlist})},map:function(){h={};c.uri&&(h.uri=c.uri);c.byterange&&(h.byterange=
c.byterange)},"stream-inf":function(){this.manifest.playlists=d;this.manifest.mediaGroups=this.manifest.mediaGroups||w;c.attributes?(g.attributes||(g.attributes={}),b(g.attributes,c.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||w;if(c.attributes&&c.attributes.TYPE&&c.attributes["GROUP-ID"]&&c.attributes.NAME){var a=this.manifest.mediaGroups[c.attributes.TYPE];a[c.attributes["GROUP-ID"]]=a[c.attributes["GROUP-ID"]]||
{};f=a[c.attributes["GROUP-ID"]];e={"default":/yes/i.test(c.attributes.DEFAULT)};e.autoselect=e["default"]?!0:/yes/i.test(c.attributes.AUTOSELECT);c.attributes.LANGUAGE&&(e.language=c.attributes.LANGUAGE);c.attributes.URI&&(e.uri=c.attributes.URI);c.attributes["INSTREAM-ID"]&&(e.instreamId=c.attributes["INSTREAM-ID"]);c.attributes.CHARACTERISTICS&&(e.characteristics=c.attributes.CHARACTERISTICS);c.attributes.FORCED&&(e.forced=/yes/i.test(c.attributes.FORCED));f[c.attributes.NAME]=e}else this.trigger("warn",
{message:"ignoring incomplete or missing media group"})},discontinuity:function(){z+=1;g.discontinuity=!0;this.manifest.discontinuityStarts.push(d.length)},"program-date-time":function(){this.manifest.dateTimeString=c.dateTimeString;this.manifest.dateTimeObject=c.dateTimeObject},targetduration:function(){!isFinite(c.duration)||0>c.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+c.duration}):this.manifest.targetDuration=c.duration},totalduration:function(){!isFinite(c.duration)||
0>c.duration?this.trigger("warn",{message:"ignoring invalid total duration: "+c.duration}):this.manifest.totalDuration=c.duration},"cue-out":function(){g.cueOut=c.data},"cue-out-cont":function(){g.cueOutCont=c.data},"cue-in":function(){g.cueIn=c.data}}[c.tagType]||n).call(a)},uri:function(){g.uri=c.uri;d.push(g);!this.manifest.targetDuration||"duration"in g||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),g.duration=this.manifest.targetDuration);l&&(g.key=l);g.timeline=
z;h&&(g.map=h);g={}},comment:function(){}})[c.type].call(a)});return a}d(c,a);l(c,[{key:"push",value:function(a){this.lineStream.push(a)}},{key:"end",value:function(){this.lineStream.push("\n")}}]);return c}(c["default"]);g["default"]=h},{"./line-stream":34,"./parse-stream":35,"./stream":37}],37:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=
!0);Object.defineProperty(a,d.key,d)}}return function(c,b,f){b&&a(c.prototype,b);f&&a(c,f);return c}}();h=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.listeners={}}a(c,[{key:"on",value:function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)}},{key:"off",value:function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b}},{key:"trigger",value:function(a){var b=
this.listeners[a],c;if(b)if(2===arguments.length){var d=b.length;for(c=0;c<d;++c)b[c].call(this,arguments[1])}else{var f=Array.prototype.slice.call(arguments,1);d=b.length;for(c=0;c<d;++c)b[c].apply(this,f)}}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(a){this.on("data",function(b){a.push(b)})}}]);return c}();g["default"]=h},{}],38:[function(h,c,g){h=h("../utils/stream.js");var a=function(){var c=new Uint8Array,d=0;a.prototype.init.call(this);this.setTimestamp=
function(a){d=a};this.parseId3TagSize=function(a,c){var b=a[c+6]<<21|a[c+7]<<14|a[c+8]<<7|a[c+9];return(a[c+5]&16)>>4?b+20:b+10};this.parseAdtsSize=function(a,c){return a[c+3]&6144|a[c+4]<<3|(a[c+5]&224)>>5};this.push=function(a){var b=0;if(c.length){var f=c.length;c=new Uint8Array(a.byteLength+f);c.set(c.subarray(0,f));c.set(a,f)}else c=a;for(;3<=c.length-b;)if(73===c[b]&&68===c[b+1]&&51===c[b+2]){if(10>c.length-b)break;a=this.parseId3TagSize(c,b);if(a>c.length)break;f={type:"timed-metadata",data:c.subarray(b,
b+a)};this.trigger("data",f);b+=a}else if(c[b]&1&&240===(c[b+1]&240)){if(7>c.length-b)break;a=this.parseAdtsSize(c,b);if(a>c.length)break;f={type:"audio",data:c.subarray(b,b+a),pts:d,dts:d};this.trigger("data",f);b+=a}else b++;c=0<c.length-b?c.subarray(b):new Uint8Array}};a.prototype=new h;c.exports=a},{"../utils/stream.js":62}],39:[function(h,c,g){var a=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],f=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]};c.exports={parseId3TagSize:function(a,
b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(a[b+5]&16)>>4?c+20:c+10},parseAdtsSize:function(a,b){return a[b+3]&6144|a[b+4]<<3|(a[b+5]&224)>>5},parseType:function(a,b){return 73===a[b]&&68===a[b+1]&&51===a[b+2]?"timed-metadata":a[b]&1&&240===(a[b+1]&240)?"audio":null},parseSampleRate:function(c){for(var b=0;b+5<c.length;)if(255!==c[b]||240!==(c[b+1]&246))b++;else return a[(c[b+2]&60)>>>2];return null},parseAacTimestamp:function(a){var b=10;a[5]&64&&(b=b+4+f(a.subarray(10,14)));do{var c=
f(a.subarray(b+4,b+8));if(1>c)break;var d=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]);if("PRIV"===d){d=a.subarray(b+10,b+c+10);for(var g=0;g<d.byteLength;g++)if(0===d[g]){var h=unescape,w,z=d,v=g,t="";for(w=0;w<v;w++)t+="%"+("00"+z[w].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===h(t))return a=d.subarray(g+1),b=(a[3]&1)<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2,b*=4,b+=a[7]&3;break}}b+=10;b+=c}while(b<a.byteLength);return null}}},{}],40:[function(h,c,g){h=h("../utils/stream.js");
var a=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var f=function(){var c;f.prototype.init.call(this);this.push=function(b){var d=0,f=0;if("audio"===b.type){if(c){var g=c;c=new Uint8Array(g.byteLength+b.data.byteLength);c.set(g);c.set(b.data,g.byteLength)}else c=b.data;for(;d+5<c.length;)if(255!==c[d]||240!==(c[d+1]&246))d++;else{g=2*(~c[d+1]&1);var h=(c[d+3]&3)<<11|c[d+4]<<3|(c[d+5]&224)>>5;var w=1024*((c[d+6]&3)+1);var z=9E4*w/a[(c[d+2]&60)>>>2];h=d+h;if(c.byteLength<h)break;
this.trigger("data",{pts:b.pts+f*z,dts:b.dts+f*z,sampleCount:w,audioobjecttype:(c[d+2]>>>6&3)+1,channelcount:(c[d+2]&1)<<2|(c[d+3]&192)>>>6,samplerate:a[(c[d+2]&60)>>>2],samplingfrequencyindex:(c[d+2]&60)>>>2,samplesize:16,data:c.subarray(d+7+g,h)});if(c.byteLength===h){c=void 0;break}f++;c=c.subarray(h)}}};this.flush=function(){this.trigger("done")}};f.prototype=new h;c.exports=f},{"../utils/stream.js":62}],41:[function(h,c,g){g=h("../utils/stream.js");var a=h("../utils/exp-golomb.js");var f=function(){var a=
0,b,c;f.prototype.init.call(this);this.push=function(d){if(c){var f=new Uint8Array(c.byteLength+d.data.byteLength);f.set(c);f.set(d.data,c.byteLength);c=f}else c=d.data;for(;a<c.byteLength-3;a++)if(1===c[a+2]){b=a+5;break}for(;b<c.byteLength;)switch(c[b]){case 0:if(0!==c[b-1]){b+=2;break}else if(0!==c[b-2]){b++;break}a+3!==b-2&&this.trigger("data",c.subarray(a+3,b-2));do b++;while(1!==c[b]&&b<c.length);a=b-2;b+=3;break;case 1:if(0!==c[b-1]||0!==c[b-2]){b+=3;break}this.trigger("data",c.subarray(a+
3,b-2));a=b-2;b+=3;break;default:b+=3}c=c.subarray(a);b-=a;a=0};this.flush=function(){c&&3<c.byteLength&&this.trigger("data",c.subarray(a+3));c=null;a=0;this.trigger("done")}};f.prototype=new g;var d={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var b=function(){var c=new f,g,h,r;b.prototype.init.call(this);var w=this;this.push=function(a){"video"===a.type&&(g=a.trackId,h=a.pts,r=a.dts,c.push(a))};c.on("data",function(a){var b={trackId:g,pts:h,dts:r,data:a};switch(a[0]&
31){case 5:b.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:b.nalUnitType="sei_rbsp";b.escapedRBSP=v(a.subarray(1));break;case 7:b.nalUnitType="seq_parameter_set_rbsp";b.escapedRBSP=v(a.subarray(1));b.config=t(b.escapedRBSP);break;case 8:b.nalUnitType="pic_parameter_set_rbsp";break;case 9:b.nalUnitType="access_unit_delimiter_rbsp"}w.trigger("data",b)});c.on("done",function(){w.trigger("done")});this.flush=function(){c.flush()};var z=function(a,b){var c=8,d=8,f;for(f=0;f<a;f++)0!==
d&&(d=b.readExpGolomb(),d=(c+d+256)%256),c=0===d?c:d};var v=function(a){for(var b=a.byteLength,c=[],d=1,f;d<b-2;)0===a[d]&&0===a[d+1]&&3===a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;b-=c.length;f=new Uint8Array(b);var g=0;for(d=0;d<b;g++,d++)g===c[0]&&(g++,c.shift()),f[d]=a[g];return f};var t=function(b){var c=0,f=0,g=0,h=0,l=1;b=new a(b);var n=b.readUnsignedByte();var q=b.readUnsignedByte();var e=b.readUnsignedByte();b.skipUnsignedExpGolomb();if(d[n]){var m=b.readUnsignedExpGolomb();
3===m&&b.skipBits(1);b.skipUnsignedExpGolomb();b.skipUnsignedExpGolomb();b.skipBits(1);if(b.readBoolean()){var t=3!==m?8:12;for(m=0;m<t;m++)b.readBoolean()&&(6>m?z(16,b):z(64,b))}}b.skipUnsignedExpGolomb();m=b.readUnsignedExpGolomb();if(0===m)b.readUnsignedExpGolomb();else if(1===m)for(b.skipBits(1),b.skipExpGolomb(),b.skipExpGolomb(),t=b.readUnsignedExpGolomb(),m=0;m<t;m++)b.skipExpGolomb();b.skipUnsignedExpGolomb();b.skipBits(1);m=b.readUnsignedExpGolomb();t=b.readUnsignedExpGolomb();var p=b.readBits(1);
0===p&&b.skipBits(1);b.skipBits(1);b.readBoolean()&&(c=b.readUnsignedExpGolomb(),f=b.readUnsignedExpGolomb(),g=b.readUnsignedExpGolomb(),h=b.readUnsignedExpGolomb());if(b.readBoolean()&&b.readBoolean()){var v=b.readUnsignedByte();switch(v){case 1:var r=[1,1];break;case 2:r=[12,11];break;case 3:r=[10,11];break;case 4:r=[16,11];break;case 5:r=[40,33];break;case 6:r=[24,11];break;case 7:r=[20,11];break;case 8:r=[32,11];break;case 9:r=[80,33];break;case 10:r=[18,11];break;case 11:r=[15,11];break;case 12:r=
[64,33];break;case 13:r=[160,99];break;case 14:r=[4,3];break;case 15:r=[3,2];break;case 16:r=[2,1];break;case 255:r=[b.readUnsignedByte()<<8|b.readUnsignedByte(),b.readUnsignedByte()<<8|b.readUnsignedByte()]}r&&(l=r[0]/r[1])}return{profileIdc:n,levelIdc:e,profileCompatibility:q,width:Math.ceil((16*(m+1)-2*c-2*f)*l),height:(2-p)*(t+1)*16-2*g-2*h}}};b.prototype=new g;c.exports={H264Stream:b,NalByteStream:f}},{"../utils/exp-golomb.js":61,"../utils/stream.js":62}],42:[function(h,c,g){h=[33,16,5,32,164,
27];g=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var a=function(a){for(var c=[];a--;)c.push(0);return c};h={96E3:[h,[227,64],a(154),[56]],88200:[h,[231],a(170),[56]],64E3:[h,[248,192],a(240),[56]],48E3:[h,[255,192],a(268),[55,148,128],a(54),[112]],44100:[h,[255,192],a(268),[55,163,128],a(84),[112]],32E3:[h,[255,192],a(268),[55,234],a(226),[112]],24E3:[h,[255,192],a(268),[55,255,128],a(268),[111,112],a(126),[224]],16E3:[h,[255,192],a(268),[55,255,128],a(268),[111,255],a(269),[223,108],a(195),[1,192]],
12E3:[g,a(268),[3,127,248],a(268),[6,255,240],a(268),[13,255,224],a(268),[27,253,128],a(259),[56]],11025:[g,a(268),[3,127,248],a(268),[6,255,240],a(268),[13,255,224],a(268),[27,255,192],a(268),[55,175,128],a(108),[112]],8E3:[g,a(268),[3,121,16],a(47),[7]]};c.exports=function(a){return Object.keys(a).reduce(function(c,b){c[b]=new Uint8Array(a[b].reduce(function(a,b){return a.concat(b)},[]));return c},{})}(h)},{}],43:[function(h,c,g){h=h("../utils/stream.js");var a=function(c){this.numberOfTracks=0;
this.metadataStream=c.metadataStream;this.videoTags=[];this.audioTags=[];this.audioTrack=this.videoTrack=null;this.pendingCaptions=[];this.pendingMetadata=[];this.processedTracks=this.pendingTracks=0;a.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);"video"===a.track.type&&(this.videoTrack=a.track,this.videoTags=a.tags,this.pendingTracks++);"audio"===a.track.type&&(this.audioTrack=a.track,this.audioTags=
a.tags,this.pendingTracks++)}};a.prototype=new h;a.prototype.flush=function(a){var c={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks&&("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a||0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks)))return;this.processedTracks+=this.pendingTracks;this.pendingTracks=0;if(!(this.processedTracks<this.numberOfTracks)){if(this.videoTrack)var b=this.videoTrack.timelineStartInfo.pts;
else this.audioTrack&&(b=this.audioTrack.timelineStartInfo.pts);c.tags.videoTags=this.videoTags;c.tags.audioTags=this.audioTags;for(a=0;a<this.pendingCaptions.length;a++){var f=this.pendingCaptions[a];f.startTime=f.startPts-b;f.startTime/=9E4;f.endTime=f.endPts-b;f.endTime/=9E4;c.captionStreams[f.stream]=!0;c.captions.push(f)}for(a=0;a<this.pendingMetadata.length;a++)f=this.pendingMetadata[a],f.cueTime=f.pts-b,f.cueTime/=9E4,c.metadata.push(f);c.metadata.dispatchType=this.metadataStream.dispatchType;
this.audioTrack=this.videoTrack=null;this.videoTags=[];this.audioTags=[];this.pendingCaptions.length=0;this.processedTracks=this.pendingTracks=this.pendingMetadata.length=0;this.trigger("data",c);this.trigger("done")}};c.exports=a},{"../utils/stream.js":62}],44:[function(h,c,g){var a=h("./flv-tag.js");c.exports=function(c,d,b){var f=new Uint8Array(9),g=new DataView(f.buffer);c=c||0;d=void 0===d?!0:d;b=void 0===b?!0:b;g.setUint8(0,70);g.setUint8(1,76);g.setUint8(2,86);g.setUint8(3,1);g.setUint8(4,
(d?4:0)|(b?1:0));g.setUint32(5,f.byteLength);if(0>=c)return c=new Uint8Array(f.byteLength+4),c.set(f),c.set([0,0,0,0],f.byteLength),c;d=new a(a.METADATA_TAG);d.pts=d.dts=0;d.writeMetaDataDouble("duration",c);d=d.finalize().length;c=new Uint8Array(f.byteLength+d);c.set(f);c.set(g.byteLength,d);return c}},{"./flv-tag.js":45}],45:[function(h,c,g){var a=function(c,d){var b=0,f=16384,g=function(a,b){b=a.position+b;b<a.bytes.byteLength||(b=new Uint8Array(2*b),b.set(a.bytes.subarray(0,a.position),0),a.bytes=
b,a.view=new DataView(a.bytes.buffer))},h=a.widthBytes||new Uint8Array(5),r=a.heightBytes||new Uint8Array(6),w=a.videocodecidBytes||new Uint8Array(12),z;if(!a.widthBytes){for(z=0;5>z;z++)h[z]="width".charCodeAt(z);for(z=0;6>z;z++)r[z]="height".charCodeAt(z);for(z=0;12>z;z++)w[z]="videocodecid".charCodeAt(z);a.widthBytes=h;a.heightBytes=r;a.videocodecidBytes=w}this.keyFrame=!1;switch(c){case a.VIDEO_TAG:this.length=16;f*=6;break;case a.AUDIO_TAG:this.length=13;this.keyFrame=!0;break;case a.METADATA_TAG:this.length=
29;this.keyFrame=!0;break;default:throw Error("Unknown FLV tag type");}this.bytes=new Uint8Array(f);this.view=new DataView(this.bytes.buffer);this.bytes[0]=c;this.position=this.length;this.keyFrame=d;this.dts=this.pts=0;this.writeBytes=function(a,b,c){b=b||0;c=c||a.byteLength;var d=b+c;g(this,c);this.bytes.set(a.subarray(b,d),this.position);this.position+=c;this.length=Math.max(this.length,this.position)};this.writeByte=function(a){g(this,1);this.bytes[this.position]=a;this.position++;this.length=
Math.max(this.length,this.position)};this.writeShort=function(a){g(this,2);this.view.setUint16(this.position,a);this.position+=2;this.length=Math.max(this.length,this.position)};this.negIndex=function(a){return this.bytes[this.length-a]};this.nalUnitSize=function(){return 0===b?0:this.length-(b+4)};this.startNalUnit=function(){if(0<b)throw Error("Attempted to create new NAL wihout closing the old one");b=this.length;this.position=this.length+=4};this.endNalUnit=function(a){if(this.length===b+4)this.length-=
4;else if(0<b){var c=b+4;var d=this.length-c;this.position=b;this.view.setUint32(this.position,d);this.position=this.length;a&&a.push(this.bytes.subarray(c,c+d))}b=0};this.writeMetaDataDouble=function(a,c){var d;g(this,2+a.length+9);this.view.setUint16(this.position,a.length);this.position+=2;if("width"===a)this.bytes.set(h,this.position),this.position+=5;else if("height"===a)this.bytes.set(r,this.position),this.position+=6;else if("videocodecid"===a)this.bytes.set(w,this.position),this.position+=
12;else for(d=0;d<a.length;d++)this.bytes[this.position]=a.charCodeAt(d),this.position++;this.position++;this.view.setFloat64(this.position,c);this.position+=8;this.length=Math.max(this.length,this.position);++b};this.writeMetaDataBoolean=function(a,c){var d;g(this,2);this.view.setUint16(this.position,a.length);this.position+=2;for(d=0;d<a.length;d++)g(this,1),this.bytes[this.position]=a.charCodeAt(d),this.position++;g(this,2);this.view.setUint8(this.position,1);this.position++;this.view.setUint8(this.position,
c?1:0);this.position++;this.length=Math.max(this.length,this.position);++b};this.finalize=function(){switch(this.bytes[0]){case a.VIDEO_TAG:this.bytes[11]=(this.keyFrame||d?16:32)|7;this.bytes[12]=d?0:1;var c=this.pts-this.dts;this.bytes[13]=(c&16711680)>>>16;this.bytes[14]=(c&65280)>>>8;this.bytes[15]=(c&255)>>>0;break;case a.AUDIO_TAG:this.bytes[11]=175;this.bytes[12]=d?0:1;break;case a.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,
10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,b),this.position=this.length,this.bytes.set([0,0,9],this.position),this.length=this.position+=3}c=this.length-11;this.bytes[1]=(c&16711680)>>>16;this.bytes[2]=(c&65280)>>>8;this.bytes[3]=(c&255)>>>0;this.bytes[4]=(this.dts&16711680)>>>16;this.bytes[5]=(this.dts&65280)>>>8;this.bytes[6]=(this.dts&255)>>>0;this.bytes[7]=
(this.dts&4278190080)>>>24;this.bytes[8]=0;this.bytes[9]=0;this.bytes[10]=0;g(this,4);this.view.setUint32(this.length,this.length);this.length+=4;this.position+=4;this.bytes=this.bytes.subarray(0,this.length);this.frameTime=a.frameTime(this.bytes);return this}};a.AUDIO_TAG=8;a.VIDEO_TAG=9;a.METADATA_TAG=18;a.isAudioFrame=function(c){return a.AUDIO_TAG===c[0]};a.isVideoFrame=function(c){return a.VIDEO_TAG===c[0]};a.isMetaData=function(c){return a.METADATA_TAG===c[0]};a.isKeyFrame=function(c){return a.isVideoFrame(c)?
23===c[11]:a.isAudioFrame(c)||a.isMetaData(c)?!0:!1};a.frameTime=function(a){var c=a[4]<<16;c|=a[5]<<8;c|=a[6]<<0;return c|=a[7]<<24};c.exports=a},{}],46:[function(h,c,g){c.exports={tag:h("./flv-tag"),Transmuxer:h("./transmuxer"),getFlvHeader:h("./flv-header")}},{"./flv-header":44,"./flv-tag":45,"./transmuxer":48}],47:[function(h,c,g){c.exports=function(){var a=this;this.list=[];this.push=function(a){this.list.push({bytes:a.bytes,dts:a.dts,pts:a.pts,keyFrame:a.keyFrame,metaDataTag:a.metaDataTag})};
Object.defineProperty(this,"length",{get:function(){return a.list.length}})}},{}],48:[function(h,c,g){g=h("../utils/stream.js");var a=h("./flv-tag.js"),f=h("../m2ts/m2ts.js"),d=h("../codecs/adts.js"),b=h("../codecs/h264").H264Stream,l=h("./coalesce-stream.js"),n=h("./tag-list.js");var p=function(a,b){"number"===typeof b.pts&&(a.timelineStartInfo.pts=void 0===a.timelineStartInfo.pts?b.pts:Math.min(a.timelineStartInfo.pts,b.pts));"number"===typeof b.dts&&(a.timelineStartInfo.dts=void 0===a.timelineStartInfo.dts?
b.dts:Math.min(a.timelineStartInfo.dts,b.dts))};var r=function(b,c){var d=new a(a.METADATA_TAG);d.dts=c;d.pts=c;d.writeMetaDataDouble("videocodecid",7);d.writeMetaDataDouble("width",b.width);d.writeMetaDataDouble("height",b.height);return d};var w=function(b,c){var d=new a(a.VIDEO_TAG,!0);d.dts=c;d.pts=c;d.writeByte(1);d.writeByte(b.profileIdc);d.writeByte(b.profileCompatibility);d.writeByte(b.levelIdc);d.writeByte(255);d.writeByte(225);d.writeShort(b.sps[0].length);d.writeBytes(b.sps[0]);d.writeByte(b.pps.length);
for(c=0;c<b.pps.length;++c)d.writeShort(b.pps[c].length),d.writeBytes(b.pps[c]);return d};var z=function(b){var c=[],d=[],f;z.prototype.init.call(this);this.push=function(a){p(b,a);b&&(b.audioobjecttype=a.audioobjecttype,b.channelcount=a.channelcount,b.samplerate=a.samplerate,b.samplingfrequencyindex=a.samplingfrequencyindex,b.samplesize=a.samplesize,b.extraData=b.audioobjecttype<<11|b.samplingfrequencyindex<<7|b.channelcount<<3);a.pts=Math.round(a.pts/90);a.dts=Math.round(a.dts/90);c.push(a)};this.flush=
function(){var g,h=new n;if(0!==c.length){for(g=-Infinity;c.length;){var l=c.shift();d.length&&l.pts>=d[0]&&(g=d.shift(),this.writeMetaDataTags(h,g));if(b.extraData!==f||1E3<=l.pts-g)this.writeMetaDataTags(h,l.pts),f=b.extraData,g=l.pts;var q=new a(a.AUDIO_TAG);q.pts=l.pts;q.dts=l.dts;q.writeBytes(l.data);h.push(q.finalize())}d.length=0;f=null;this.trigger("data",{track:b,tags:h.list})}this.trigger("done","AudioSegmentStream")};this.writeMetaDataTags=function(c,d){var f=new a(a.METADATA_TAG);f.pts=
d;f.dts=d;f.writeMetaDataDouble("audiocodecid",10);f.writeMetaDataBoolean("stereo",2===b.channelcount);f.writeMetaDataDouble("audiosamplerate",b.samplerate);f.writeMetaDataDouble("audiosamplesize",16);c.push(f.finalize());f=new a(a.AUDIO_TAG,!0);f.pts=d;f.dts=d;f.view.setUint16(f.position,b.extraData);f.position+=2;f.length=Math.max(f.length,f.position);c.push(f.finalize())};this.onVideoKeyFrame=function(a){d.push(a)}};z.prototype=new g;var v=function(b){var c=[],d,f;v.prototype.init.call(this);this.finishFrame=
function(a,c){if(c){if(d&&b&&b.newMetadata&&(c.keyFrame||0===a.length)){var g=r(d,c.dts).finalize(),h=w(b,c.dts).finalize();g.metaDataTag=h.metaDataTag=!0;a.push(g);a.push(h);b.newMetadata=!1;this.trigger("keyframe",c.dts)}c.endNalUnit();a.push(c.finalize());f=null}};this.push=function(a){p(b,a);a.pts=Math.round(a.pts/90);a.dts=Math.round(a.dts/90);c.push(a)};this.flush=function(){for(var g,h=new n;c.length&&"access_unit_delimiter_rbsp"!==c[0].nalUnitType;)c.shift();if(0!==c.length){for(;c.length;)g=
c.shift(),"seq_parameter_set_rbsp"===g.nalUnitType?(b.newMetadata=!0,d=g.config,b.width=d.width,b.height=d.height,b.sps=[g.data],b.profileIdc=d.profileIdc,b.levelIdc=d.levelIdc,b.profileCompatibility=d.profileCompatibility,f.endNalUnit()):"pic_parameter_set_rbsp"===g.nalUnitType?(b.newMetadata=!0,b.pps=[g.data],f.endNalUnit()):"access_unit_delimiter_rbsp"===g.nalUnitType?(f&&this.finishFrame(h,f),f=new a(a.VIDEO_TAG),f.pts=g.pts,f.dts=g.dts):("slice_layer_without_partitioning_rbsp_idr"===g.nalUnitType&&
(f.keyFrame=!0),f.endNalUnit()),f.startNalUnit(),f.writeBytes(g.data);f&&this.finishFrame(h,f);this.trigger("data",{track:b,tags:h.list})}this.trigger("done","VideoSegmentStream")}};v.prototype=new g;var t=function(a){var c=this,g,h;t.prototype.init.call(this);a=a||{};this.metadataStream=new f.MetadataStream;a.metadataStream=this.metadataStream;var n=new f.TransportPacketStream;var q=new f.TransportParseStream;var p=new f.ElementaryStream;var r=new f.TimestampRolloverStream("video");var e=new f.TimestampRolloverStream("audio");
var m=new f.TimestampRolloverStream("timed-metadata");var w=new d;var D=new b;var H=new l(a);n.pipe(q).pipe(p);p.pipe(r).pipe(D);p.pipe(e).pipe(w);p.pipe(m).pipe(this.metadataStream).pipe(H);var N=new f.CaptionStream;D.pipe(N).pipe(H);p.on("data",function(a){var b,c,e;if("metadata"===a.type){for(b=a.tracks.length;b--;)"video"===a.tracks[b].type?c=a.tracks[b]:"audio"===a.tracks[b].type&&(e=a.tracks[b]);c&&!g&&(H.numberOfTracks++,g=new v(c),D.pipe(g).pipe(H));if(e&&!h&&(H.numberOfTracks++,h=new z(e),
w.pipe(h).pipe(H),g))g.on("keyframe",h.onVideoKeyFrame)}});this.push=function(a){n.push(a)};this.flush=function(){n.flush()};this.resetCaptions=function(){N.reset()};H.on("data",function(a){c.trigger("data",a)});H.on("done",function(){c.trigger("done")})};t.prototype=new g;c.exports=t},{"../codecs/adts.js":40,"../codecs/h264":41,"../m2ts/m2ts.js":50,"../utils/stream.js":62,"./coalesce-stream.js":43,"./flv-tag.js":45,"./tag-list.js":47}],49:[function(h,c,g){h=h("../utils/stream");var a=function(a,
b){var c=[],d;if(!(b[0]&64))return c;var f=b[0]&31;for(d=0;d<f;d++){var g=3*d;var h={type:b[g+2]&3,pts:a};b[g+2]&4&&(h.ccData=b[g+3]<<8|b[g+4],c.push(h))}return c},f=function(){f.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new p(0,0),new p(0,1),new p(1,0),new p(1,1)];this.reset();this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data"));a.on("done",this.trigger.bind(this,"done"))},this)};f.prototype=new h;f.prototype.push=function(b){if("sei_rbsp"===b.nalUnitType){var c=
b.escapedRBSP;for(var d=0,f={payloadType:-1,payloadSize:0},g=0,h=0;d<c.byteLength&&128!==c[d];){for(;255===c[d];)g+=255,d++;for(g+=c[d++];255===c[d];)h+=255,d++;h+=c[d++];if(!f.payload&&4===g){f.payloadType=g;f.payloadSize=h;f.payload=c.subarray(d,d+h);break}d+=h;h=g=0}4===f.payloadType&&(c=181!==f.payload[0]||49!==(f.payload[1]<<8|f.payload[2])||"GA94"!==String.fromCharCode(f.payload[3],f.payload[4],f.payload[5],f.payload[6])||3!==f.payload[7]?null:f.payload.subarray(8,f.payload.length-1))&&(b.dts<
this.latestDts_?this.ignoreNextEqualDts_=!0:b.dts===this.latestDts_&&this.ignoreNextEqualDts_?this.ignoreNextEqualDts_=!1:(this.captionPackets_=this.captionPackets_.concat(a(b.pts,c)),this.latestDts_=b.dts))}};f.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){2>a.type&&this.dispatchCea608Packet(a)},
this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(a){a.flush()},this)):this.ccStreams_.forEach(function(a){a.flush()},this)};f.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(a){a.reset()})};f.prototype.dispatchCea608Packet=function(a){this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&
this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};f.prototype.setsChannel1Active=function(a){return 4096===(a.ccData&30720)};f.prototype.setsChannel2Active=function(a){return 6144===(a.ccData&30720)};var d={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,
553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},b=function(a){if(null===a)return"";a=d[a]||a;return String.fromCharCode(a)},
l=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],n=function(){for(var a=[],b=15;b--;)a.push("");return a},p=function(a,c){p.prototype.init.call(this);this.field_=a||0;this.dataChannel_=c||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(a){var c=a.ccData&32639;if(c===this.lastControlCode_)this.lastControlCode_=null;else{4096===(c&61440)?this.lastControlCode_=c:c!==this.PADDING_&&(this.lastControlCode_=null);
var d=c>>>8;var f=c&255;c!==this.PADDING_&&(c===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":c===this.END_OF_CAPTION_?(this.clearFormatting(a.pts),this.flushDisplayed(a.pts),f=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=f,this.startPts_=a.pts):c===this.ROLL_UP_2_ROWS_?(this.topRow_=13,this.mode_="rollUp"):c===this.ROLL_UP_3_ROWS_?(this.topRow_=12,this.mode_="rollUp"):c===this.ROLL_UP_4_ROWS_?(this.topRow_=11,this.mode_="rollUp"):c===this.CARRIAGE_RETURN_?(this.clearFormatting(a.pts),
this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts):c===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[14]=this.nonDisplayed_[14].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1):c===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(a.pts),this.displayed_=n()):c===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=n():c===this.RESUME_DIRECT_CAPTIONING_?this.mode_="paintOn":this.isSpecialCharacter(d,f)?(c=b((d&3)<<8|f),this[this.mode_](a.pts,c),this.column_++):
this.isExtCharacter(d,f)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1),c=b((d&3)<<8|f),this[this.mode_](a.pts,c),this.column_++):this.isMidRowCode(d,f)?(this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14===(f&14)&&this.addFormatting(a.pts,["i"]),1===(f&1)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(d,f)?this.column_+=f&3:this.isPAC(d,f)?(d=l.indexOf(c&7968),d!==
this.row_&&(this.clearFormatting(a.pts),this.row_=d),f&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16===(c&16)&&(this.column_=4*((c&14)>>1)),this.isColorPAC(f)&&14===(f&14)&&this.addFormatting(a.pts,["i"])):this.isNormalChar(d)&&(0===f&&(f=null),c=b(d),c+=b(f),this[this.mode_](a.pts,c),this.column_+=c.length))}}};p.prototype=new h;p.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){return a.trim()}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&
this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})};p.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=n();this.nonDisplayed_=n();this.lastControlCode_=null;this.column_=0;this.row_=14;this.formatting_=[]};p.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,
this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};p.prototype.isSpecialCharacter=function(a,b){return a===
this.EXT_&&48<=b&&63>=b};p.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=b&&63>=b};p.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&32<=b&&47>=b};p.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&33<=b&&35>=b};p.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&64<=b&&127>=b};p.prototype.isColorPAC=function(a){return 64<=a&&79>=a||96<=a&&127>=a};p.prototype.isNormalChar=function(a){return 32<=a&&127>=a};p.prototype.addFormatting=
function(a,b){this.formatting_=this.formatting_.concat(b);b=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,b)};p.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[];this[this.mode_](a,b)}};p.prototype.popOn=function(a,b){this.nonDisplayed_[this.row_]+=b};p.prototype.rollUp=function(a,b){this.displayed_[14]+=b};p.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]=
"";for(a=this.topRow_;14>a;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[14]=""};p.prototype.paintOn=function(){};c.exports={CaptionStream:f,Cea608Stream:p}},{"../utils/stream":62}],50:[function(h,c,g){g=h("../utils/stream.js");var a=h("./caption-stream"),f=h("./stream-types"),d=h("./timestamp-rollover-stream").TimestampRolloverStream,b=h("./stream-types.js");var l=function(){var a=new Uint8Array(188),b=0;l.prototype.init.call(this);this.push=function(c){var d=0,f=188;if(b){var g=new Uint8Array(c.byteLength+
b);g.set(a.subarray(0,b));g.set(c,b);b=0}else g=c;for(;f<g.byteLength;)71===g[d]&&71===g[f]?(this.trigger("data",g.subarray(d,f)),d+=188,f+=188):(d++,f++);d<g.byteLength&&(a.set(g.subarray(d),0),b=g.byteLength-d)};this.flush=function(){188===b&&71===a[0]&&(this.trigger("data",a),b=0);this.trigger("done")}};l.prototype=new g;var n=function(){n.prototype.init.call(this);var a=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var b=function(a,b){var f=0;b.payloadUnitStartIndicator&&(f+=a[f]+
1);"pat"===b.type?c(a.subarray(f),b):d(a.subarray(f),b)};var c=function(b,c){c.section_number=b[7];c.last_section_number=b[8];a.pmtPid=(b[10]&31)<<8|b[11];c.pmtPid=a.pmtPid};var d=function(b,c){var d;if(b[5]&1){a.programMapTable={video:null,audio:null,"timed-metadata":{}};var g=3+((b[1]&15)<<8|b[2])-4;for(d=12+((b[10]&15)<<8|b[11]);d<g;){var h=b[d],l=(b[d+1]&31)<<8|b[d+2];h===f.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=l:h===f.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?
a.programMapTable.audio=l:h===f.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][l]=h);d+=((b[d+3]&15)<<8|b[d+4])+5}c.programMapTable=a.programMapTable}};this.push=function(a){var c={},d=4;c.payloadUnitStartIndicator=!!(a[1]&64);c.pid=a[1]&31;c.pid<<=8;c.pid|=a[2];1<(a[3]&48)>>>4&&(d+=a[d]+1);if(0===c.pid)c.type="pat",b(a.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",b(a.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,
this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,d,c]):this.processPes_(a,d,c)};this.processPes_=function(a,b,c){c.streamType=c.pid===this.programMapTable.video?f.H264_STREAM_TYPE:c.pid===this.programMapTable.audio?f.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][c.pid];c.type="pes";c.data=a.subarray(b);this.trigger("data",c)}};n.prototype=new g;n.STREAM_TYPES={h264:27,adts:15};var p=function(){var a=this,c={data:[],size:0},d={data:[],
size:0},g={data:[],size:0},h=function(b,c,d){var f=new Uint8Array(b.size),g={type:c},h,l=0;if(b.data.length&&!(9>b.size)){g.trackId=b.data[0].pid;for(h=0;h<b.data.length;h++){var e=b.data[h];f.set(e.data,l);l+=e.data.byteLength}g.packetLength=6+(f[4]<<8|f[5]);g.dataAlignmentIndicator=0!==(f[6]&4);h=f[7];h&192&&(g.pts=(f[9]&14)<<27|(f[10]&255)<<20|(f[11]&254)<<12|(f[12]&255)<<5|(f[13]&254)>>>3,g.pts*=4,g.pts+=(f[13]&6)>>>1,g.dts=g.pts,h&64&&(g.dts=(f[14]&14)<<27|(f[15]&255)<<20|(f[16]&254)<<12|(f[17]&
255)<<5|(f[18]&254)>>>3,g.dts*=4,g.dts+=(f[18]&6)>>>1));g.data=f.subarray(9+f[8]);c="video"===c||g.packetLength<=b.size;if(d||c)b.size=0,b.data.length=0;c&&a.trigger("data",g)}};p.prototype.init.call(this);this.push=function(l){({pat:function(){},pes:function(){switch(l.streamType){case f.H264_STREAM_TYPE:case b.H264_STREAM_TYPE:var a=c;var n="video";break;case f.ADTS_STREAM_TYPE:a=d;n="audio";break;case f.METADATA_STREAM_TYPE:a=g;n="timed-metadata";break;default:return}l.payloadUnitStartIndicator&&
h(a,n,!0);a.data.push(l);a.size+=l.data.byteLength},pmt:function(){var b={type:"metadata",tracks:[]},c=l.programMapTable;null!==c.video&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.video,codec:"avc",type:"video"});null!==c.audio&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+c.audio,codec:"adts",type:"audio"});a.trigger("data",b)}})[l.type]()};this.flush=function(){h(c,"video");h(d,"audio");h(g,"timed-metadata");this.trigger("done")}};p.prototype=new g;h={PAT_PID:0,
MP2T_PACKET_LENGTH:188,TransportPacketStream:l,TransportParseStream:n,ElementaryStream:p,TimestampRolloverStream:d,CaptionStream:a.CaptionStream,Cea608Stream:a.Cea608Stream,MetadataStream:h("./metadata-stream")};for(var r in f)f.hasOwnProperty(r)&&(h[r]=f[r]);c.exports=h},{"../utils/stream.js":62,"./caption-stream":49,"./metadata-stream":51,"./stream-types":53,"./stream-types.js":53,"./timestamp-rollover-stream":54}],51:[function(h,c,g){g=h("../utils/stream");var a=h("./stream-types"),f=function(a,
b,c){for(var d="";b<c;b++)d+="%"+("00"+a[b].toString(16)).slice(-2);return d},d=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},b={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(f(a.data,1,b));a.value=decodeURIComponent(f(a.data,b+1,a.data.length)).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(f(a.data,1,b));
a.url=decodeURIComponent(f(a.data,b+1,a.data.length));break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=unescape(f(a.data,0,b));break}a.privateData=a.data.subarray(b+1);a.data=a.privateData}};var l=function(c){var f=!(!c||!c.debug);c=c&&c.descriptor;var g=0,h=[],n=0,v;l.prototype.init.call(this);this.dispatchType=a.METADATA_STREAM_TYPE.toString(16);if(c)for(v=0;v<c.length;v++)this.dispatchType+=("00"+c[v].toString(16)).slice(-2);this.push=function(a){var c;if("timed-metadata"===
a.type)if(a.dataAlignmentIndicator&&(n=0,h.length=0),0===h.length&&(10>a.data.length||73!==a.data[0]||68!==a.data[1]||51!==a.data[2]))f&&console.log("Skipping unrecognized metadata packet");else if(h.push(a),n+=a.data.byteLength,1===h.length&&(g=d(a.data.subarray(6,10)),g+=10),!(n<g)){a={data:new Uint8Array(g),frames:[],pts:h[0].pts,dts:h[0].dts};for(c=0;c<g;)a.data.set(h[0].data.subarray(0,g-c),c),c+=h[0].data.byteLength,n-=h[0].data.byteLength,h.shift();c=10;a.data[5]&64&&(c=c+4+d(a.data.subarray(10,
14)),g-=d(a.data.subarray(16,20)));do{var l=d(a.data.subarray(c+4,c+8));if(1>l)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");var p=String.fromCharCode(a.data[c],a.data[c+1],a.data[c+2],a.data[c+3]);p={id:p,data:a.data.subarray(c+10,c+l+10)};p.key=p.id;if(b[p.id]&&(b[p.id](p),"com.apple.streaming.transportStreamTimestamp"===p.owner)){var t=p.data,r=(t[3]&1)<<30|t[4]<<22|t[5]<<14|t[6]<<6|t[7]>>>2;r*=4;r+=t[7]&3;p.timeStamp=r;void 0===a.pts&&void 0===a.dts&&(a.pts=
p.timeStamp,a.dts=p.timeStamp);this.trigger("timestamp",p)}a.frames.push(p);c+=10;c+=l}while(c<g);this.trigger("data",a)}}};l.prototype=new g;c.exports=l},{"../utils/stream":62,"./stream-types":53}],52:[function(h,c,g){var a=h("./stream-types.js"),f=function(a){var b=a[1]&31;return b=b<<8|a[2]},d=function(a){return!!(a[1]&64)},b=function(a){var b=0;1<(a[3]&48)>>>4&&(b+=a[4]+1);return b},l=function(a){switch(a){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";
case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};c.exports={parseType:function(a,b){a=f(a);return 0===a?"pat":a===b?"pmt":b?"pes":null},parsePat:function(a){var c=d(a),f=4+b(a);c&&(f+=a[f]+1);return(a[f+10]&31)<<8|a[f+11]},parsePmt:function(a){var c={},f=d(a),g=4+b(a);f&&(g+=a[g]+1);if(a[g+5]&1){f=3+((a[g+1]&15)<<8|a[g+2])-4;for(var h=12+((a[g+10]&15)<<8|a[g+11]);h<f;){var l=g+h;c[(a[l+1]&31)<<8|a[l+2]]=a[l];h+=((a[l+3]&15)<<8|a[l+4])+5}return c}},
parsePayloadUnitStartIndicator:d,parsePesType:function(b,c){b=f(b);switch(c[b]){case a.H264_STREAM_TYPE:return"video";case a.ADTS_STREAM_TYPE:return"audio";case a.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(a){if(!d(a))return null;var c=4+b(a);if(c>=a.byteLength)return null;var f=null;var g=a[c+7];g&192&&(f={},f.pts=(a[c+9]&14)<<27|(a[c+10]&255)<<20|(a[c+11]&254)<<12|(a[c+12]&255)<<5|(a[c+13]&254)>>>3,f.pts*=4,f.pts+=(a[c+13]&6)>>>1,f.dts=f.pts,g&64&&(f.dts=
(a[c+14]&14)<<27|(a[c+15]&255)<<20|(a[c+16]&254)<<12|(a[c+17]&255)<<5|(a[c+18]&254)>>>3,f.dts*=4,f.dts+=(a[c+18]&6)>>>1));return f},videoPacketContainsKeyFrame:function(a){var c=4+b(a);a=a.subarray(c);for(var d=c=0,f=!1;d<a.byteLength-3;d++)if(1===a[d+2]){c=d+5;break}for(;c<a.byteLength;)switch(a[c]){case 0:if(0!==a[c-1]){c+=2;break}else if(0!==a[c-2]){c++;break}d+3!==c-2&&(d=l(a[d+3]&31),"slice_layer_without_partitioning_rbsp_idr"===d&&(f=!0));do c++;while(1!==a[c]&&c<a.length);d=c-2;c+=3;break;
case 1:if(0!==a[c-1]||0!==a[c-2]){c+=3;break}d=l(a[d+3]&31);"slice_layer_without_partitioning_rbsp_idr"===d&&(f=!0);d=c-2;c+=3;break;default:c+=3}(a=a.subarray(d))&&3<a.byteLength&&(d=l(a[3]&31),"slice_layer_without_partitioning_rbsp_idr"===d&&(f=!0));return f}}},{"./stream-types.js":53}],53:[function(h,c,g){c.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],54:[function(h,c,g){h=h("../utils/stream");var a=function(a,b){var c=1;for(a>b&&(c=-1);4294967296<Math.abs(b-a);)a+=
8589934592*c;return a},f=function(c){var b,d;f.prototype.init.call(this);this.type_=c;this.push=function(c){c.type===this.type_&&(void 0===d&&(d=c.dts),c.dts=a(c.dts,d),c.pts=a(c.pts,d),b=c.dts,this.trigger("data",c))};this.flush=function(){d=b;this.trigger("done")};this.discontinuity=function(){b=d=void 0}};f.prototype=new h;c.exports={TimestampRolloverStream:f,handleRollover:a}},{"../utils/stream":62}],55:[function(h,c,g){c.exports={generator:h("./mp4-generator"),Transmuxer:h("./transmuxer").Transmuxer,
AudioSegmentStream:h("./transmuxer").AudioSegmentStream,VideoSegmentStream:h("./transmuxer").VideoSegmentStream}},{"./mp4-generator":56,"./transmuxer":58}],56:[function(h,c,g){var a=Math.pow(2,32)-1,f,d,b,l,n,p,r,w,z,v,t,q,y,A,C,G;(function(){var a;b={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],
trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(a in b)b.hasOwnProperty(a)&&(b[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);l=new Uint8Array([105,115,111,109]);p=new Uint8Array([97,118,99,49]);n=new Uint8Array([0,0,0,1]);r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);w=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,
114,0]);z={video:r,audio:w};q=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);t=new Uint8Array([0,0,0,0,0,0,0,0]);A=y=new Uint8Array([0,0,0,0,0,0,0,0]);C=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);G=y;v=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var E=function(a){var b=[],c=0,e;for(e=1;e<arguments.length;e++)b.push(arguments[e]);for(e=b.length;e--;)c+=b[e].byteLength;var d=new Uint8Array(c+8);(new DataView(d.buffer,d.byteOffset,d.byteLength)).setUint32(0,d.byteLength);d.set(a,
4);e=0;for(c=8;e<b.length;e++)d.set(b[e],c),c+=b[e].byteLength;return d};var F=function(){return E(b.dinf,E(b.dref,q))};var I=function(a){return E(b.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))};var e=function(){return E(b.ftyp,l,n,l,p)};var m=function(a){return E(b.hdlr,z[a])};var x=function(a){var c=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>
24&255,a.duration>>>16&255,a.duration>>>8&255,a.duration&255,85,196,0,0]);a.samplerate&&(c[12]=a.samplerate>>>24&255,c[13]=a.samplerate>>>16&255,c[14]=a.samplerate>>>8&255,c[15]=a.samplerate&255);return E(b.mdhd,c)};var D=function(a){return E(b.mdia,x(a),m(a.type),N(a))};var H=function(a){return E(b.mfhd,new Uint8Array([0,0,0,0,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]))};var N=function(a){return E(b.minf,"video"===a.type?E(b.vmhd,v):E(b.smhd,t),F(),R(a))};var ka=function(a){for(var c=
a.length,e=[];c--;)e[c]=ba(a[c]);return E.apply(null,[b.moov,Aa(4294967295)].concat(e).concat(aa(a)))};var aa=function(a){for(var c=a.length,e=[];c--;)e[c]=ja(a[c]);return E.apply(null,[b.mvex].concat(e))};var Aa=function(a){a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);
return E(b.mvhd,a)};var fa=function(a){a=a.samples||[];var c=new Uint8Array(4+a.length),e;for(e=0;e<a.length;e++){var d=a[e].flags;c[e+4]=d.dependsOn<<4|d.isDependedOn<<2|d.hasRedundancy}return E(b.sdtp,c)};var R=function(a){return E(b.stbl,f(a),E(b.stts,G),E(b.stsc,A),E(b.stsz,C),E(b.stco,y))};(function(){f=function(e){return E(b.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?a(e):c(e))};var a=function(a){var c=a.sps||[],e=a.pps||[],d=[],f=[],g;for(g=0;g<c.length;g++)d.push((c[g].byteLength&
65280)>>>8),d.push(c[g].byteLength&255),d=d.concat(Array.prototype.slice.call(c[g]));for(g=0;g<e.length;g++)f.push((e[g].byteLength&65280)>>>8),f.push(e[g].byteLength&255),f=f.concat(Array.prototype.slice.call(e[g]));return E(b.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(a.width&65280)>>8,a.width&255,(a.height&65280)>>8,a.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),
E(b.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([c.length]).concat(d).concat([e.length]).concat(f))),E(b.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};var c=function(a){return E(b.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(a.channelcount&65280)>>8,a.channelcount&255,(a.samplesize&65280)>>8,a.samplesize&255,0,0,0,0,(a.samplerate&65280)>>8,a.samplerate&255,0,0]),I(a))}})();var X=function(a){a=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,
(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,0,(a.duration&4278190080)>>24,(a.duration&16711680)>>16,(a.duration&65280)>>8,a.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(a.width&65280)>>8,a.width&255,0,0,(a.height&65280)>>8,a.height&255,0,0]);return E(b.tkhd,a)};var M=function(c){var e=E(b.tfhd,new Uint8Array([0,0,0,58,(c.id&4278190080)>>24,(c.id&16711680)>>16,(c.id&65280)>>8,c.id&255,0,0,0,1,0,0,
0,0,0,0,0,0,0,0,0,0]));var f=Math.floor(c.baseMediaDecodeTime/(a+1));var g=Math.floor(c.baseMediaDecodeTime%(a+1));f=E(b.tfdt,new Uint8Array([1,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255,g>>>24&255,g>>>16&255,g>>>8&255,g&255]));if("audio"===c.type)return c=d(c,92),E(b.traf,e,f,c);g=fa(c);c=d(c,g.length+92);return E(b.traf,e,f,c,g)};var ba=function(a){a.duration=a.duration||4294967295;return E(b.trak,X(a),D(a))};var ja=function(a){var c=new Uint8Array([0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>
16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==a.type&&(c[c.length-1]=0);return E(b.trex,c)};(function(){var a=function(a,b){var c=0,e=0,d=0,f=0;a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(e=2),void 0!==a[0].flags&&(d=4),void 0!==a[0].compositionTimeOffset&&(f=8));return[0,0,c|e|d|f,1,(a.length&4278190080)>>>24,(a.length&16711680)>>>16,(a.length&65280)>>>8,a.length&255,(b&4278190080)>>>24,(b&16711680)>>>16,(b&65280)>>>8,b&255]};var c=function(c,e){var d;
c=c.samples||[];e+=20+16*c.length;e=a(c,e);for(d=0;d<c.length;d++){var f=c[d];e=e.concat([(f.duration&4278190080)>>>24,(f.duration&16711680)>>>16,(f.duration&65280)>>>8,f.duration&255,(f.size&4278190080)>>>24,(f.size&16711680)>>>16,(f.size&65280)>>>8,f.size&255,f.flags.isLeading<<2|f.flags.dependsOn,f.flags.isDependedOn<<6|f.flags.hasRedundancy<<4|f.flags.paddingValue<<1|f.flags.isNonSyncSample,f.flags.degradationPriority&61440,f.flags.degradationPriority&15,(f.compositionTimeOffset&4278190080)>>>
24,(f.compositionTimeOffset&16711680)>>>16,(f.compositionTimeOffset&65280)>>>8,f.compositionTimeOffset&255])}return E(b.trun,new Uint8Array(e))};var e=function(c,e){var d;c=c.samples||[];e+=20+8*c.length;e=a(c,e);for(d=0;d<c.length;d++){var f=c[d];e=e.concat([(f.duration&4278190080)>>>24,(f.duration&16711680)>>>16,(f.duration&65280)>>>8,f.duration&255,(f.size&4278190080)>>>24,(f.size&16711680)>>>16,(f.size&65280)>>>8,f.size&255])}return E(b.trun,new Uint8Array(e))};d=function(a,b){return"audio"===
a.type?e(a,b):c(a,b)}})();c.exports={ftyp:e,mdat:function(a){return E(b.mdat,a)},moof:function(a,c){for(var e=[],d=c.length;d--;)e[d]=M(c[d]);return E.apply(null,[b.moof,H(a)].concat(e))},moov:ka,initSegment:function(a){var b=e();a=ka(a);var c=new Uint8Array(b.byteLength+a.byteLength);c.set(b);c.set(a,b.byteLength);return c}}},{}],57:[function(h,c,g){var a=function(c,b){var d=[],g;if(!b.length)return null;for(g=0;g<c.byteLength;){var h=c[g]<<24;h|=c[g+1]<<16;h|=c[g+2]<<8;h|=c[g+3];var r=f(c.subarray(g+
4,g+8));h=1<h?g+h:c.byteLength;r===b[0]&&(1===b.length?d.push(c.subarray(g+8,h)):(g=a(c.subarray(g+8,h),b.slice(1)),g.length&&(d=d.concat(g))));g=h}return d};var f=function(a){var b=""+String.fromCharCode(a[0]);b+=String.fromCharCode(a[1]);b+=String.fromCharCode(a[2]);return b+=String.fromCharCode(a[3])};c.exports={parseType:f,timescale:function(c){return a(c,["moov","trak"]).reduce(function(b,c){var d=a(c,["tkhd"])[0];if(!d)return null;var f=d[0];f=0===f?12:20;d=d[f]<<24|d[f+1]<<16|d[f+2]<<8|d[f+
3];c=a(c,["mdia","mdhd"])[0];if(!c)return null;f=c[0];f=0===f?12:20;b[d]=c[f]<<24|c[f+1]<<16|c[f+2]<<8|c[f+3];return b},{})},startTime:function(c,b){b=a(b,["moof","traf"]);b=[].concat.apply([],b.map(function(b){return a(b,["tfhd"]).map(function(d){d=c[d[4]<<24|d[5]<<16|d[6]<<8|d[7]]||9E4;var f=(f=a(b,["tfdt"]).map(function(a){var b=a[0];var c=a[4]<<24|a[5]<<16|a[6]<<8|a[7];1===b&&(c*=Math.pow(2,32),c+=a[8]<<24|a[9]<<16|a[10]<<8|a[11]);return c})[0])||Infinity;return f/d})}));b=Math.min.apply(null,
b);return isFinite(b)?b:0}}},{}],58:[function(h,c,g){g=h("../utils/stream.js");var a=h("./mp4-generator.js"),f=h("../m2ts/m2ts.js"),d=h("../codecs/adts.js"),b=h("../codecs/h264").H264Stream,l=h("../aac"),n=h("../data/silence"),p=h("../utils/clock"),r=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],w=["width","height","profileIdc","levelIdc","profileCompatibility"];var z=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}};
var v=function(a){return 73===a[0]&&68===a[1]&&51===a[2]?!0:!1};var t=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};var q=function(a){var b,c=0;for(b=0;b<a.length;b++){var e=a[b];c+=e.data.byteLength}return c};var y=function(b){var c=[],e=0,d=0,f=0,g=Infinity;y.prototype.init.call(this);this.push=function(a){C(b,a);b&&r.forEach(function(c){b[c]=a[c]});c.push(a)};this.setEarliestDts=function(a){d=a-b.timelineStartInfo.baseMediaDecodeTime};
this.setVideoBaseMediaDecodeTime=function(a){g=a};this.setAudioAppendStart=function(a){f=a};this.flush=function(){if(0!==c.length){var d=this.trimAdtsFramesByEarliestDts_(c);b.baseMediaDecodeTime=E(b);this.prefixWithSilence_(b,d);b.samples=this.generateSampleTable_(d);var f=a.mdat(this.concatenateFrameData_(d));c=[];d=a.moof(e,[b]);var g=new Uint8Array(d.byteLength+f.byteLength);e++;g.set(d);g.set(f,d.byteLength);G(b);this.trigger("data",{track:b,boxes:g})}this.trigger("done","AudioSegmentStream")};
this.prefixWithSilence_=function(a,b){var c,e=c=0;if(b.length){var d=p.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate);var h=Math.ceil(9E4/(a.samplerate/1024));f&&g&&(c=d-Math.max(f,g),c=Math.floor(c/h),e=c*h);if(!(1>c||45E3<e)){h=n[a.samplerate];h||(h=b[0].data);for(d=0;d<c;d++)b.splice(d,0,{data:h});a.baseMediaDecodeTime-=Math.floor(p.videoTsToAudioTs(e,a.samplerate))}}};this.trimAdtsFramesByEarliestDts_=function(a){if(b.minSegmentDts>=d)return a;b.minSegmentDts=Infinity;return a.filter(function(a){return a.dts>=
d?(b.minSegmentDts=Math.min(b.minSegmentDts,a.dts),b.minSegmentPts=b.minSegmentDts,!0):!1})};this.generateSampleTable_=function(a){var b,c=[];for(b=0;b<a.length;b++){var e=a[b];c.push({size:e.data.byteLength,duration:1024})}return c};this.concatenateFrameData_=function(a){var b,c=0,e=new Uint8Array(q(a));for(b=0;b<a.length;b++){var d=a[b];e.set(d.data,c);c+=d.data.byteLength}return e}};y.prototype=new g;var A=function(b,c){var e=0,d=[],f=[],g,h;c=c||{};A.prototype.init.call(this);delete b.minPTS;
this.gopCache_=[];this.push=function(a){C(b,a);"seq_parameter_set_rbsp"!==a.nalUnitType||g||(g=a.config,b.sps=[a.data],w.forEach(function(a){b[a]=g[a]},this));"pic_parameter_set_rbsp"!==a.nalUnitType||h||(h=a.data,b.pps=[a.data]);d.push(a)};this.flush=function(){for(var g,h,l;d.length&&"access_unit_delimiter_rbsp"!==d[0].nalUnitType;)d.shift();if(0!==d.length){g=this.groupNalsIntoFrames_(d);g=this.groupFramesIntoGops_(g);g[0][0].keyFrame||((h=this.getGopForFusion_(d[0],b))?(g.unshift(h),g.byteLength+=
h.byteLength,g.nalCount+=h.nalCount,g.pts=h.pts,g.dts=h.dts,g.duration+=h.duration):g=this.extendFirstKeyFrame_(g));if(f.length){h=c.alignGopsAtEnd?this.alignGopsAtEnd_(g):this.alignGopsAtStart_(g);if(!h){this.gopCache_.unshift({gop:g.pop(),pps:b.pps,sps:b.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);d=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}G(b);g=h}C(b,g);b.samples=this.generateSampleTable_(g);h=a.mdat(this.concatenateNalData_(g));b.baseMediaDecodeTime=
E(b);this.trigger("processedGopsInfo",g.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));this.gopCache_.unshift({gop:g.pop(),pps:b.pps,sps:b.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);d=[];this.trigger("baseMediaDecodeTime",b.baseMediaDecodeTime);this.trigger("timelineStartInfo",b.timelineStartInfo);g=a.moof(e,[b]);l=new Uint8Array(g.byteLength+h.byteLength);e++;l.set(g);l.set(h,g.byteLength);this.trigger("data",{track:b,boxes:l})}this.resetStream_();this.trigger("done",
"VideoSegmentStream")};this.resetStream_=function(){G(b);h=g=void 0};this.getGopForFusion_=function(a){var c=Infinity,e;for(e=0;e<this.gopCache_.length;e++){var d=this.gopCache_[e];var f=d.gop;if(b.pps&&t(b.pps[0],d.pps[0])&&b.sps&&t(b.sps[0],d.sps[0])&&!(f.dts<b.timelineStartInfo.dts)&&(f=a.dts-f.dts-f.duration,-1E4<=f&&45E3>=f&&(!g||c>f))){var g=d;c=f}}return g?g.gop:null};this.extendFirstKeyFrame_=function(a){if(!a[0][0].keyFrame&&1<a.length){var b=a.shift();a.byteLength-=b.byteLength;a.nalCount-=
b.nalCount;a[0][0].dts=b.dts;a[0][0].pts=b.pts;a[0][0].duration+=b.duration}return a};this.groupNalsIntoFrames_=function(a){var b,c=[],e=[];for(b=c.byteLength=0;b<a.length;b++){var d=a[b];"access_unit_delimiter_rbsp"===d.nalUnitType?(c.length&&(c.duration=d.dts-c.dts,e.push(c)),c=[d],c.byteLength=d.data.byteLength,c.pts=d.pts,c.dts=d.dts):("slice_layer_without_partitioning_rbsp_idr"===d.nalUnitType&&(c.keyFrame=!0),c.duration=d.dts-c.dts,c.byteLength+=d.data.byteLength,c.push(d))}e.length&&(!c.duration||
0>=c.duration)&&(c.duration=e[e.length-1].duration);e.push(c);return e};this.groupFramesIntoGops_=function(a){var b,c=[],e=[];c.byteLength=0;c.nalCount=0;c.duration=0;c.pts=a[0].pts;c.dts=a[0].dts;e.byteLength=0;e.nalCount=0;e.duration=0;e.pts=a[0].pts;e.dts=a[0].dts;for(b=0;b<a.length;b++){var d=a[b];d.keyFrame?(c.length&&(e.push(c),e.byteLength+=c.byteLength,e.nalCount+=c.nalCount,e.duration+=c.duration),c=[d],c.nalCount=d.length,c.byteLength=d.byteLength,c.pts=d.pts,c.dts=d.dts,c.duration=d.duration):
(c.duration+=d.duration,c.nalCount+=d.length,c.byteLength+=d.byteLength,c.push(d))}e.length&&0>=c.duration&&(c.duration=e[e.length-1].duration);e.byteLength+=c.byteLength;e.nalCount+=c.nalCount;e.duration+=c.duration;e.push(c);return e};this.generateSampleTable_=function(a,b){var c,e=b||0,d=[];for(b=0;b<a.length;b++){var f=a[b];for(c=0;c<f.length;c++){var g=f[c];var h=z();h.dataOffset=e;h.compositionTimeOffset=g.pts-g.dts;h.duration=g.duration;h.size=4*g.length;h.size+=g.byteLength;g.keyFrame&&(h.flags.dependsOn=
2);e+=h.size;d.push(h)}}return d};this.concatenateNalData_=function(a){var b,c,e,d=0,f=new Uint8Array(a.byteLength+4*a.nalCount),g=new DataView(f.buffer);for(b=0;b<a.length;b++){var h=a[b];for(c=0;c<h.length;c++){var l=h[c];for(e=0;e<l.length;e++){var m=l[e];g.setUint32(d,m.data.byteLength);d+=4;f.set(m.data,d);d+=m.data.byteLength}}}return f};this.alignGopsAtStart_=function(a){var b,c;var e=a.byteLength;var d=a.nalCount;var g=a.duration;for(b=c=0;b<f.length&&c<a.length;){var h=f[b];var l=a[c];if(h.pts===
l.pts)break;l.pts>h.pts?b++:(c++,e-=l.byteLength,d-=l.nalCount,g-=l.duration)}if(0===c)return a;if(c===a.length)return null;a=a.slice(c);a.byteLength=e;a.duration=g;a.nalCount=d;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=function(a){var b;var c=f.length-1;var e=a.length-1;var d=null;for(b=!1;0<=c&&0<=e;){var g=f[c];var h=a[e];if(g.pts===h.pts){b=!0;break}g.pts>h.pts?c--:(c===f.length-1&&(d=e),e--)}if(!b&&null===d)return null;c=b?e:d;if(0===c)return a;a=a.slice(c);c=a.reduce(function(a,
b){a.byteLength+=b.byteLength;a.duration+=b.duration;a.nalCount+=b.nalCount;return a},{byteLength:0,duration:0,nalCount:0});a.byteLength=c.byteLength;a.duration=c.duration;a.nalCount=c.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsWith=function(a){f=a}};A.prototype=new g;var C=function(a,b){"number"===typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts=void 0===a.minSegmentPts?b.pts:Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts=void 0===
a.maxSegmentPts?b.pts:Math.max(a.maxSegmentPts,b.pts));"number"===typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),a.minSegmentDts=void 0===a.minSegmentDts?b.dts:Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?b.dts:Math.max(a.maxSegmentDts,b.dts))};var G=function(a){delete a.minSegmentDts;delete a.maxSegmentDts;delete a.minSegmentPts;delete a.maxSegmentPts};var E=function(a){var b=a.minSegmentDts-a.timelineStartInfo.dts;var c=a.timelineStartInfo.baseMediaDecodeTime;
c=Math.max(0,c+b);"audio"===a.type&&(a=a.samplerate/9E4,c=Math.floor(c*a));return c};var F=function(a,b){this.numberOfTracks=0;this.metadataStream=b;this.remuxTracks="undefined"!==typeof a.remux?!!a.remux:!0;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;F.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);
this.pendingTracks.push(a.track);this.pendingBoxes.push(a.boxes);this.pendingBytes+=a.boxes.byteLength;"video"===a.track.type&&(this.videoTrack=a.track);"audio"===a.track.type&&(this.audioTrack=a.track)}};F.prototype=new g;F.prototype.flush=function(b){var c=0,e={captions:[],captionStreams:{},metadata:[],info:{}},d=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==b&&"AudioSegmentStream"!==b||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;
this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(d=this.videoTrack.timelineStartInfo.pts,w.forEach(function(a){e.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(d=this.audioTrack.timelineStartInfo.pts,r.forEach(function(a){e.info[a]=this.audioTrack[a]},this));e.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;b=a.initSegment(this.pendingTracks);e.initSegment=new Uint8Array(b.byteLength);
e.initSegment.set(b);e.data=new Uint8Array(this.pendingBytes);for(b=0;b<this.pendingBoxes.length;b++)e.data.set(this.pendingBoxes[b],c),c+=this.pendingBoxes[b].byteLength;for(b=0;b<this.pendingCaptions.length;b++)c=this.pendingCaptions[b],c.startTime=c.startPts-d,c.startTime/=9E4,c.endTime=c.endPts-d,c.endTime/=9E4,e.captionStreams[c.stream]=!0,e.captions.push(c);for(b=0;b<this.pendingMetadata.length;b++)c=this.pendingMetadata[b],c.cueTime=c.pts-d,c.cueTime/=9E4,e.metadata.push(c);e.metadata.dispatchType=
this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",e);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};var I=function(a){var c=this,e=!0,g,h;I.prototype.init.call(this);a=a||{};this.baseMediaDecodeTime=a.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var b={};this.transmuxPipeline_=
b;b.type="aac";b.metadataStream=new f.MetadataStream;b.aacStream=new l;b.audioTimestampRolloverStream=new f.TimestampRolloverStream("audio");b.timedMetadataTimestampRolloverStream=new f.TimestampRolloverStream("timed-metadata");b.adtsStream=new d;b.coalesceStream=new F(a,b.metadataStream);b.headOfPipeline=b.aacStream;b.aacStream.pipe(b.audioTimestampRolloverStream).pipe(b.adtsStream);b.aacStream.pipe(b.timedMetadataTimestampRolloverStream).pipe(b.metadataStream).pipe(b.coalesceStream);b.metadataStream.on("timestamp",
function(a){b.aacStream.setTimestamp(a.timeStamp)});b.aacStream.on("data",function(a){"timed-metadata"!==a.type||b.audioSegmentStream||(h=h||{timelineStartInfo:{baseMediaDecodeTime:c.baseMediaDecodeTime},codec:"adts",type:"audio"},b.coalesceStream.numberOfTracks++,b.audioSegmentStream=new y(h),b.adtsStream.pipe(b.audioSegmentStream).pipe(b.coalesceStream))});b.coalesceStream.on("data",this.trigger.bind(this,"data"));b.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=
function(){var e={};this.transmuxPipeline_=e;e.type="ts";e.metadataStream=new f.MetadataStream;e.packetStream=new f.TransportPacketStream;e.parseStream=new f.TransportParseStream;e.elementaryStream=new f.ElementaryStream;e.videoTimestampRolloverStream=new f.TimestampRolloverStream("video");e.audioTimestampRolloverStream=new f.TimestampRolloverStream("audio");e.timedMetadataTimestampRolloverStream=new f.TimestampRolloverStream("timed-metadata");e.adtsStream=new d;e.h264Stream=new b;e.captionStream=
new f.CaptionStream;e.coalesceStream=new F(a,e.metadataStream);e.headOfPipeline=e.packetStream;e.packetStream.pipe(e.parseStream).pipe(e.elementaryStream);e.elementaryStream.pipe(e.videoTimestampRolloverStream).pipe(e.h264Stream);e.elementaryStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream);e.elementaryStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream);e.h264Stream.pipe(e.captionStream).pipe(e.coalesceStream);e.elementaryStream.on("data",
function(b){var d;if("metadata"===b.type){for(d=b.tracks.length;d--;)g||"video"!==b.tracks[d].type?h||"audio"!==b.tracks[d].type||(h=b.tracks[d],h.timelineStartInfo.baseMediaDecodeTime=c.baseMediaDecodeTime):(g=b.tracks[d],g.timelineStartInfo.baseMediaDecodeTime=c.baseMediaDecodeTime);g&&!e.videoSegmentStream&&(e.coalesceStream.numberOfTracks++,e.videoSegmentStream=new A(g,a),e.videoSegmentStream.on("timelineStartInfo",function(a){h&&(h.timelineStartInfo=a,e.audioSegmentStream.setEarliestDts(a.dts))}),
e.videoSegmentStream.on("processedGopsInfo",c.trigger.bind(c,"gopInfo")),e.videoSegmentStream.on("baseMediaDecodeTime",function(a){h&&e.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),e.h264Stream.pipe(e.videoSegmentStream).pipe(e.coalesceStream));h&&!e.audioSegmentStream&&(e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new y(h),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}});e.coalesceStream.on("data",this.trigger.bind(this,"data"));e.coalesceStream.on("done",this.trigger.bind(this,
"done"))};this.setBaseMediaDecodeTime=function(a){var b=this.transmuxPipeline_;this.baseMediaDecodeTime=a;h&&(h.timelineStartInfo.dts=void 0,h.timelineStartInfo.pts=void 0,G(h),h.timelineStartInfo.baseMediaDecodeTime=a,b.audioTimestampRolloverStream&&b.audioTimestampRolloverStream.discontinuity());g&&(b.videoSegmentStream&&(b.videoSegmentStream.gopCache_=[],b.videoTimestampRolloverStream.discontinuity()),g.timelineStartInfo.dts=void 0,g.timelineStartInfo.pts=void 0,G(g),b.captionStream.reset(),g.timelineStartInfo.baseMediaDecodeTime=
a);b.timedMetadataTimestampRolloverStream&&b.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){h&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};this.alignGopsWith=function(a){g&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)};this.push=function(a){if(e){var b=v(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();
e=!1}this.transmuxPipeline_.headOfPipeline.push(a)};this.flush=function(){e=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};I.prototype=new g;c.exports={Transmuxer:I,VideoSegmentStream:A,AudioSegmentStream:y,AUDIO_PROPERTIES:r,VIDEO_PROPERTIES:w}},{"../aac":38,"../codecs/adts.js":40,"../codecs/h264":41,"../data/silence":42,"../m2ts/m2ts.js":50,"../utils/clock":60,"../utils/stream.js":62,
"./mp4-generator.js":56}],59:[function(h,c,g){var a=h("../m2ts/stream-types.js"),f=h("../m2ts/timestamp-rollover-stream.js").handleRollover;var d=h("../m2ts/probe.js");var b=h("../aac/probe.js");var l=function(a,b){if(a.audio&&a.audio.length){var c=b;"undefined"===typeof c&&(c=a.audio[0].dts);a.audio.forEach(function(a){a.dts=f(a.dts,c);a.pts=f(a.pts,c);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4})}if(a.video&&a.video.length){var d=b;"undefined"===typeof d&&(d=a.video[0].dts);a.video.forEach(function(a){a.dts=
f(a.dts,d);a.pts=f(a.pts,d);a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4});a.firstKeyFrame&&(a=a.firstKeyFrame,a.dts=f(a.dts,d),a.pts=f(a.pts,d),a.dtsTime=a.dts/9E4,a.ptsTime=a.dts/9E4)}};c.exports={inspect:function(c,f){var g=73===c[0]&&68===c[1]&&51===c[2]?!0:!1;if(g)a:{var h=!1,n=0,p=null;g=null;for(var t,q=0,y;3<=c.length-q;){switch(b.parseType(c,q)){case "timed-metadata":if(10>c.length-q){h=!0;break}t=b.parseId3TagSize(c,q);if(t>c.length){h=!0;break}null===g&&(y=c.subarray(q,q+t),g=b.parseAacTimestamp(y));
q+=t;break;case "audio":if(7>c.length-q){h=!0;break}t=b.parseAdtsSize(c,q);if(t>c.length){h=!0;break}null===p&&(y=c.subarray(q,q+t),p=b.parseSampleRate(y));n++;q+=t;break;default:q++}if(h){c=null;break a}}null===p||null===g?c=null:(c=9E4/p,c={audio:[{type:"audio",dts:g,pts:g},{type:"audio",dts:g+1024*n*c,pts:g+1024*n*c}]})}else{g={pid:null,table:null};h={};p=0;for(t=188;t<c.byteLength;)if(71===c[p]&&71===c[t]){q=c.subarray(p,t);y=d.parseType(q,g.pid);switch(y){case "pat":g.pid||(g.pid=d.parsePat(q));
break;case "pmt":g.table||(g.table=d.parsePmt(q))}if(g.pid&&g.table)break;p+=188;t+=188}else p++,t++;for(n in g.table)if(g.table.hasOwnProperty(n))switch(g.table[n]){case a.H264_STREAM_TYPE:h.video=[];var A;t=c;q=g;y=h;var C=0,G=188,E=!1,F=[];for(A=0;G<t.byteLength;)if(71===t[C]&&71===t[G]){p=t.subarray(C,G);var I=d.parseType(p,q.pid);switch(I){case "pes":var e=d.parsePesType(p,q.table);I=d.parsePayloadUnitStartIndicator(p);if("video"===e&&(I&&!E&&(e=d.parsePesTime(p))&&(e.type="video",y.video.push(e),
E=!0),!y.firstKeyFrame)){if(I&&0!==A){e=new Uint8Array(A);for(I=0;F.length;)A=F.shift(),e.set(A,I),I+=A.byteLength;d.videoPacketContainsKeyFrame(e)&&(y.firstKeyFrame=d.parsePesTime(e),y.firstKeyFrame.type="video");A=0}F.push(p);A+=p.byteLength}}if(E&&y.firstKeyFrame)break;C+=188;G+=188}else C++,G++;G=t.byteLength;C=G-188;for(E=!1;0<=C;)if(71===t[C]&&71===t[G]){p=t.subarray(C,G);I=d.parseType(p,q.pid);switch(I){case "pes":if(e=d.parsePesType(p,q.table),I=d.parsePayloadUnitStartIndicator(p),"video"===
e&&I&&(e=d.parsePesTime(p)))e.type="video",y.video.push(e),E=!0}if(E)break;C-=188;G-=188}else C--,G--;0===h.video.length&&delete h.video;break;case a.ADTS_STREAM_TYPE:h.audio=[];p=c;t=g;q=h;y=0;C=188;for(G=!1;C<p.byteLength;)if(71===p[y]&&71===p[C]){E=p.subarray(y,C);F=d.parseType(E,t.pid);switch(F){case "pes":if(A=d.parsePesType(E,t.table),F=d.parsePayloadUnitStartIndicator(E),"audio"===A&&F&&(E=d.parsePesTime(E)))E.type="audio",q.audio.push(E),G=!0}if(G)break;y+=188;C+=188}else y++,C++;C=p.byteLength;
y=C-188;for(G=!1;0<=y;)if(71===p[y]&&71===p[C]){E=p.subarray(y,C);F=d.parseType(E,t.pid);switch(F){case "pes":if(A=d.parsePesType(E,t.table),F=d.parsePayloadUnitStartIndicator(E),"audio"===A&&F&&(E=d.parsePesTime(E)))E.type="audio",q.audio.push(E),G=!0}if(G)break;y-=188;C-=188}else y--,C--;0===h.audio.length&&delete h.audio}c=h}if(!c||!c.audio&&!c.video)return null;l(c,f);return c}}},{"../aac/probe.js":39,"../m2ts/probe.js":52,"../m2ts/stream-types.js":53,"../m2ts/timestamp-rollover-stream.js":54}],
60:[function(h,c,g){var a=function(a){return 9E4*a};var f=function(a,b){return a*b};var d=function(a){return a/9E4};var b=function(a,b){return a/b};c.exports={secondsToVideoTs:a,secondsToAudioTs:f,videoTsToSeconds:d,audioTsToSeconds:b,audioTsToVideoTs:function(c,d){return a(b(c,d))},videoTsToAudioTs:function(a,b){return f(d(a),b)}}},{}],61:[function(h,c,g){c.exports=function(a){var c=a.byteLength,d=0,b=0;this.length=function(){return 8*c};this.bitsAvailable=function(){return 8*c+b};this.loadWord=
function(){var f=a.byteLength-c,g=new Uint8Array(4),h=Math.min(4,c);if(0===h)throw Error("no bytes available");g.set(a.subarray(f,f+h));d=(new DataView(g.buffer)).getUint32(0);b=8*h;c-=h};this.skipBits=function(a){if(!(b>a)){a-=b;var f=Math.floor(a/8);a-=8*f;c-=f;this.loadWord()}d<<=a;b-=a};this.readBits=function(a){var f=Math.min(b,a),g=d>>>32-f;b-=f;0<b?d<<=f:0<c&&this.loadWord();f=a-f;return 0<f?g<<f|this.readBits(f):g};this.skipLeadingZeros=function(){var a;for(a=0;a<b;++a)if(0!==(d&2147483648>>>
a))return d<<=a,b-=a,a;this.loadWord();return a+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};
this.loadWord()}},{}],62:[function(h,c,g){h=function(){this.init=function(){var a={};this.on=function(c,d){a[c]||(a[c]=[]);a[c]=a[c].concat(d)};this.off=function(c,d){if(!a[c])return!1;d=a[c].indexOf(d);a[c]=a[c].slice();a[c].splice(d,1);return-1<d};this.trigger=function(c){var d,b;if(d=a[c])if(2===arguments.length){var f=d.length;for(b=0;b<f;++b)d[b].call(this,arguments[1])}else{var g=[];for(b=1;b<arguments.length;++b)g.push(arguments[b]);f=d.length;for(b=0;b<f;++b)d[b].apply(this,g)}};this.dispose=
function(){a={}}}};h.prototype.pipe=function(a){this.on("data",function(c){a.push(c)});this.on("done",function(c){a.flush(c)});return a};h.prototype.push=function(a){this.trigger("data",a)};h.prototype.flush=function(a){this.trigger("done",a)};c.exports=h},{}],63:[function(h,c,g){(function(a){var f=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,d=/^([^\/;?#]*)(.*)$/,b=/(?:\/|^)\.(?=\/)/g,h=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,n={buildAbsoluteURL:function(a,b,c){c=c||{};
a=a.trim();b=b.trim();if(!b){if(!c.alwaysNormalize)return a;c=this.parseURL(a);if(!c)throw Error("Error trying to parse base URL.");c.path=n.normalizePath(c.path);return n.buildURLFromParts(c)}var f=this.parseURL(b);if(!f)throw Error("Error trying to parse relative URL.");if(f.scheme){if(!c.alwaysNormalize)return b;f.path=n.normalizePath(f.path);return n.buildURLFromParts(f)}b=this.parseURL(a);if(!b)throw Error("Error trying to parse base URL.");!b.netLoc&&b.path&&"/"!==b.path[0]&&(a=d.exec(b.path),
b.netLoc=a[1],b.path=a[2]);b.netLoc&&!b.path&&(b.path="/");a={scheme:b.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};f.netLoc||(a.netLoc=b.netLoc,"/"!==f.path[0]&&(f.path?(b=b.path,b=b.substring(0,b.lastIndexOf("/")+1)+f.path,a.path=n.normalizePath(b)):(a.path=b.path,f.params||(a.params=b.params,f.query||(a.query=b.query)))));null===a.path&&(a.path=c.alwaysNormalize?n.normalizePath(f.path):f.path);return n.buildURLFromParts(a)},parseURL:function(a){return(a=f.exec(a))?
{scheme:a[1]||"",netLoc:a[2]||"",path:a[3]||"",params:a[4]||"",query:a[5]||"",fragment:a[6]||""}:null},normalizePath:function(a){for(a=a.split("").reverse().join("").replace(b,"");a.length!==(a=a.replace(h,"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};"object"===typeof g&&"object"===typeof c?c.exports=n:"object"===typeof g?g.URLToolkit=n:a.URLToolkit=n})(this)},{}],64:[function(h,c,g){(function(a){Object.defineProperty(g,
"__esModule",{value:!0});var f=h("global/window"),d=f&&f.__esModule?f:{"default":f},b=(a="undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null)&&a.__esModule?a:{"default":a},l=function(a){Object.defineProperties(a.frame,{id:{get:function(){b["default"].log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return a.value.key}},value:{get:function(){b["default"].log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return a.value.data}},privateData:{get:function(){b["default"].log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");
return a.value.data}}})},n=function(a){return isNaN(a)||Infinity===Math.abs(a)?Number.MAX_VALUE:a};g["default"]={addTextTrackData:function(a,b,c){var f=d["default"].WebKitDataCue||d["default"].VTTCue;b&&b.forEach(function(a){this.inbandTextTracks_[a.stream].addCue(new f(a.startTime+this.timestampOffset,a.endTime+this.timestampOffset,a.text))},a);c&&function(){var b=n(a.mediaSource_.duration);c.forEach(function(a){var b=a.cueTime+this.timestampOffset;a.frames.forEach(function(a){var c=new f(b,b,a.value||
a.url||a.data||"");c.frame=a;c.value=a;l(c);this.metadataTrack_.addCue(c)},this)},a);a.metadataTrack_&&a.metadataTrack_.cues&&a.metadataTrack_.cues.length&&function(){for(var c=a.metadataTrack_.cues,d=[],f=0;f<c.length;f++)c[f]&&d.push(c[f]);var g=d.reduce(function(a,b){var c=a[b.startTime]||[];c.push(b);a[b.startTime]=c;return a},{}),h=Object.keys(g).sort(function(a,b){return Number(a)-Number(b)});h.forEach(function(a,c){var d=Number(h[c+1])||b;g[a].forEach(function(a){a.endTime=d})})}()}()},durationOfVideo:n};
c.exports=g["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"global/window":32}],65:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});g["default"]={isAudioCodec:function(a){return/mp4a\.\d+.\d+/i.test(a)},parseContentType:function(a){var c={type:"",parameters:{}};a=a.trim().split(";");c.type=a.shift().trim();a.forEach(function(a){var b=a.trim().split("=");1<b.length&&(a=b[0].replace(/"/g,"").trim(),b=
b[1].replace(/"/g,"").trim(),c.parameters[a]=b)});return c},isVideoCodec:function(a){return/avc1\.[\da-f]+/i.test(a)},translateLegacyCodecs:function(a){return a.map(function(a){return a.replace(/avc1\.(\d+)\.(\d+)/i,function(a,b,c){a=("00"+Number(b).toString(16)).slice(-2);c=("00"+Number(c).toString(16)).slice(-2);return"avc1."+a+"00"+c})})}};c.exports=g["default"]},{}],66:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});g["default"]=function(a,c,d){c=c.player_;if(d.captions&&d.captions.length){a.inbandTextTracks_||
(a.inbandTextTracks_={});for(var b in d.captionStreams)if(!a.inbandTextTracks_[b]){c.tech_.trigger({type:"usage",name:"hls-608"});var f=c.textTracks().getTrackById(b);a.inbandTextTracks_[b]=f?f:c.addRemoteTextTrack({kind:"captions",id:b,label:b},!1).track}}d.metadata&&d.metadata.length&&!a.metadataTrack_&&(a.metadataTrack_=c.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,a.metadataTrack_.inBandMetadataTrackDispatchType=d.metadata.dispatchType)};c.exports=g["default"]},{}],67:[function(h,
c,g){Object.defineProperty(g,"__esModule",{value:!0});g["default"]={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:32768};c.exports=g["default"]},{}],68:[function(h,c,g){(function(a){function f(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,"__esModule",{value:!0});var b=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;
d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},n=h("global/document"),p=f(n),r=f("undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null);a=h("./flash-source-buffer");var w=f(a);a=h("./flash-constants");a=f(a);var z=h("./codec-utils");n=function(a){function c(){var a=this;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");l(Object.getPrototypeOf(c.prototype),"constructor",this).call(this);this.sourceBuffers=
[];this.readyState="closed";this.on(["sourceopen","webkitsourceopen"],function(b){a.swfObj=p["default"].getElementById(b.swfId);a.player_=(0,r["default"])(a.swfObj.parentNode);a.tech_=a.swfObj.tech;a.readyState="open";a.tech_.on("seeking",function(){for(var b=a.sourceBuffers.length;b--;)a.sourceBuffers[b].abort()});a.swfObj&&a.swfObj.vjs_load()})}d(c,a);b(c,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(a){a=(0,z.parseContentType)(a);if("video/mp2t"===a.type||
"audio/mp2t"===a.type)a=new w["default"](this);else throw Error("NotSupportedError (Video.js)");this.sourceBuffers.push(a);return a}},{key:"endOfStream",value:function(a){"network"===a?this.tech_.error(2):"decode"===a&&this.tech_.error(3);"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]);return c}(r["default"].EventTarget);g["default"]=n;try{Object.defineProperty(n.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):
NaN},set:function(a){var b,c=this.swfObj.vjs_getProperty("duration");this.swfObj.vjs_setProperty("duration",a);if(a<c)for(b=0;b<this.sourceBuffers.length;b++)this.sourceBuffers[b].remove(a,c);return a}})}catch(t){n.prototype.duration=NaN}for(var v in a["default"])n[v]=a["default"][v];c.exports=g["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./codec-utils":65,"./flash-constants":67,"./flash-source-buffer":69,"global/document":31}],
69:[function(h,c,g){(function(a){function f(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,"__esModule",{value:!0});var b=function(){function a(a,b){for(var c=0;c<b.length;c++){var e=
b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a,b,c){var e=!0;for(;e;)if(null===a&&(a=Function.prototype),e=Object.getOwnPropertyDescriptor(a,b),void 0===e){a=Object.getPrototypeOf(a);if(null===a)break;e=!0}else{if("value"in e)return e.value;b=e.get;return void 0===b?void 0:b.call(c)}},n=h("global/window"),p=f(n),r=f("undefined"!==typeof window?window.videojs:
"undefined"!==typeof a?a.videojs:null);a=h("mux.js/lib/flv");var w=f(a);a=h("./remove-cues-from-track");var z=f(a);a=h("./create-text-tracks-if-necessary");var v=f(a),t=h("./add-text-track-data");a=h("./flash-transmuxer-worker");var q=f(a);a=h("webwackify");var y=f(a);a=h("./flash-constants");var A=f(a),C=function(){var a=void 0;try{a=h.resolve("./flash-transmuxer-worker")}catch(I){}return a},G=function(a){p["default"].setTimeout(a,A["default"].TIME_BETWEEN_CHUNKS)},E=function(a,b){if("number"!==
typeof b||0>b)b=0;b=Math.pow(10,b);return Math.round(a*b)/b};a=function(a){function c(a){var b=this;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");l(Object.getPrototypeOf(c.prototype),"constructor",this).call(this);var e=void 0;this.chunkSize_=A["default"].BYTES_PER_CHUNK;this.buffer_=[];this.bufferSize_=0;this.basePtsOffset_=NaN;this.mediaSource_=a;this.videoBufferEnd_=this.audioBufferEnd_=NaN;this.updating=!1;this.timestampOffset_=0;e=p["default"].btoa(String.fromCharCode.apply(null,
Array.prototype.slice.call(w["default"].getFlvHeader())));a=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+a+Math.random().toString(36).slice(2,8);this.flashEncodedDataName_="vjs_flashEncodedData_"+a+Math.random().toString(36).slice(2,8);p["default"][this.flashEncodedHeaderName_]=function(){delete p["default"][b.flashEncodedHeaderName_];return e};this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_);this.transmuxer_=
(0,y["default"])(q["default"],C());this.transmuxer_.postMessage({action:"init",options:{}});this.transmuxer_.onmessage=function(a){"data"===a.data.action&&b.receiveBuffer_(a.data.segment)};this.one("updateend",function(){b.mediaSource_.tech_.trigger("loadedmetadata")});Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"===typeof a&&0<=a&&(this.timestampOffset_=a,this.mediaSource_.swfObj.vjs_discontinuity(),this.videoBufferEnd_=this.audioBufferEnd_=
this.basePtsOffset_=NaN,this.transmuxer_.postMessage({action:"reset"}))}});Object.defineProperty(this,"buffered",{get:function(){if(!(this.mediaSource_&&this.mediaSource_.swfObj&&"vjs_getProperty"in this.mediaSource_.swfObj))return r["default"].createTimeRange();var a=this.mediaSource_.swfObj.vjs_getProperty("buffered");a&&a.length&&(a[0][0]=E(a[0][0],3),a[0][1]=E(a[0][1],3));return r["default"].createTimeRanges(a)}});this.mediaSource_.player_.on("seeked",function(){(0,z["default"])(0,Infinity,b.metadataTrack_);
if(b.inbandTextTracks_)for(var a in b.inbandTextTracks_)(0,z["default"])(0,Infinity,b.inbandTextTracks_[a])});var d=this.onHlsReset_.bind(this);this.mediaSource_.player_.tech_.on("hls-reset",d);this.mediaSource_.player_.tech_.hls.on("dispose",function(){b.transmuxer_.terminate();b.mediaSource_.player_.tech_.off("hls-reset",d)})}d(c,a);b(c,[{key:"appendBuffer",value:function(a){if(this.updating)throw a=Error("SourceBuffer.append() cannot be called while an update is in progress"),a.name="InvalidStateError",
a.code=11,a;this.updating=!0;this.mediaSource_.readyState="open";this.trigger({type:"update"});this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"abort",value:function(){this.buffer_=[];this.bufferSize_=0;this.mediaSource_.swfObj.vjs_abort();this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(a,b){(0,z["default"])(a,b,this.metadataTrack_);
if(this.inbandTextTracks_)for(var c in this.inbandTextTracks_)(0,z["default"])(a,b,this.inbandTextTracks_[c]);this.trigger({type:"update"});this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(a){var b=this;(0,v["default"])(this,this.mediaSource_,a);(0,t.addTextTrackData)(this,a.captions,a.metadata);G(function(){var c=b.convertTagsToData_(a);0===b.buffer_.length&&G(b.processBuffer_.bind(b));c&&(b.buffer_.push(c),b.bufferSize_+=c.byteLength)})}},{key:"processBuffer_",value:function(){var a=
this,b=A["default"].BYTES_PER_CHUNK;if(this.buffer_.length){var c=this.buffer_[0].subarray(0,b);c.byteLength<b||this.buffer_[0].byteLength===b?this.buffer_.shift():this.buffer_[0]=this.buffer_[0].subarray(b);this.bufferSize_-=c.byteLength;b=[];for(var d=c.byteLength,f=0;f<d;f++)b.push(String.fromCharCode(c[f]));var g=p["default"].btoa(b.join(""));p["default"][this.flashEncodedDataName_]=function(){G(a.processBuffer_.bind(a));delete p["default"][a.flashEncodedDataName_];return g};this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}else!1!==
this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function(a){var b=0,c=this.mediaSource_.tech_,e=0,d=a.tags.videoTags;a=a.tags.audioTags;isNaN(this.basePtsOffset_)&&(d.length||a.length)&&(this.basePtsOffset_=Math.min((a[0]||{pts:Infinity}).pts,(d[0]||{pts:Infinity}).pts));c.seeking()&&(this.audioBufferEnd_=this.videoBufferEnd_=NaN);isNaN(this.videoBufferEnd_)?(c.buffered().length&&(e=c.buffered().end(0)-this.timestampOffset),c.seeking()&&(e=Math.max(e,
c.currentTime()-this.timestampOffset)),e=1E3*e+this.basePtsOffset_):e=this.videoBufferEnd_+.1;var f=d.length;if(f&&d[f-1].pts>=e){for(;--f;){var g=d[f];if(!(g.pts>e)&&(g.keyFrame||g.metaDataTag))break}for(;f&&d[f-1].metaDataTag;)f--}d=d.slice(f);g=isNaN(this.audioBufferEnd_)?e:this.audioBufferEnd_+.1;d.length&&(g=Math.min(g,d[0].pts));for(f=0;f<a.length&&!(a[f].pts>=g);)f++;a=a.slice(f);a.length&&(this.audioBufferEnd_=a[a.length-1].pts);d.length&&(this.videoBufferEnd_=d[d.length-1].pts);a=this.getOrderedTags_(d,
a);if(0!==a.length){if(a[0].pts<e&&c.seeking()){f=1/30;c=c.currentTime()-(e-a[0].pts)/1E3;c<f&&(c=0);try{this.mediaSource_.swfObj.vjs_adjustCurrentTime(c)}catch(aa){}}for(c=0;c<a.length;c++)b+=a[c].bytes.byteLength;b=new Uint8Array(b);for(e=c=0;c<a.length;c++)b.set(a[c].bytes,e),e+=a[c].bytes.byteLength;return b}}},{key:"getOrderedTags_",value:function(a,b){for(var c,e=[];a.length||b.length;)c=a.length?b.length?b[0].dts<a[0].dts?b.shift():a.shift():a.shift():b.shift(),e.push(c);return e}},{key:"onHlsReset_",
value:function(){this.transmuxer_.postMessage({action:"resetCaptions"})}}]);return c}(r["default"].EventTarget);g["default"]=a;c.exports=g["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./add-text-track-data":64,"./create-text-tracks-if-necessary":66,"./flash-constants":67,"./flash-transmuxer-worker":70,"./remove-cues-from-track":72,"global/window":32,"mux.js/lib/flv":46,webwackify:76}],70:[function(h,c,g){Object.defineProperty(g,
"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),f=h("global/window"),d=f&&f.__esModule?f:{"default":f},b=(h=h("mux.js/lib/flv"))&&h.__esModule?h:{"default":h},l=function(a){a.on("data",function(a){d["default"].postMessage({action:"data",segment:a})});a.on("done",function(a){d["default"].postMessage({action:"done"})})},
n=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.options=a||{};this.init()}a(c,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new b["default"].Transmuxer(this.options);l(this.transmuxer)}},{key:"push",value:function(a){a=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(a)}},{key:"reset",value:function(){this.init()}},{key:"flush",value:function(){this.transmuxer.flush()}},
{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}}]);return c}(),p=function(a){a.onmessage=function(a){if("init"===a.data.action&&a.data.options)this.messageHandlers=new n(a.data.options);else if(this.messageHandlers||(this.messageHandlers=new n),a.data&&a.data.action&&"init"!==a.data.action&&this.messageHandlers[a.data.action])this.messageHandlers[a.data.action](a.data)}};g["default"]=function(a){return new p(a)};c.exports=g["default"]},{"global/window":32,"mux.js/lib/flv":46}],
71:[function(h,c,g){(function(a){function f(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,"__esModule",{value:!0});var b=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=function(a,b,c){var d=!0;for(;d;)if(null===a&&(a=Function.prototype),d=Object.getOwnPropertyDescriptor(a,b),void 0===d){a=Object.getPrototypeOf(a);if(null===a)break;d=!0}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},n=h("global/window"),p=f(n);n=h("global/document");var r=f(n),w=f("undefined"!==
typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null);a=h("./virtual-source-buffer");var z=f(a),v=h("./add-text-track-data"),t=h("./codec-utils");a=function(a){function c(){var a=this;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");l(Object.getPrototypeOf(c.prototype),"constructor",this).call(this);var b=void 0;this.nativeMediaSource_=new p["default"].MediaSource;for(b in this.nativeMediaSource_)b in c.prototype||"function"!==typeof this.nativeMediaSource_[b]||
(this[b]=this.nativeMediaSource_[b].bind(this.nativeMediaSource_));this.duration_=NaN;Object.defineProperty(this,"duration",{get:function(){return Infinity===this.duration_?this.duration_:this.nativeMediaSource_.duration},set:function(a){this.duration_=a;Infinity!==a&&(this.nativeMediaSource_.duration=a)}});Object.defineProperty(this,"seekable",{get:function(){return Infinity===this.duration_?w["default"].createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}});
Object.defineProperty(this,"readyState",{get:function(){return this.nativeMediaSource_.readyState}});Object.defineProperty(this,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}});this.sourceBuffers=[];this.activeSourceBuffers_=[];this.updateActiveSourceBuffers_=function(){a.activeSourceBuffers_.length=0;if(1===a.sourceBuffers.length){var b=a.sourceBuffers[0];b.appendAudioInitSegment_=!0;b.audioDisabled_=!b.audioCodec_;a.activeSourceBuffers_.push(b)}else{var c=!1,d=!0;for(b=
0;b<a.player_.audioTracks().length;b++){var f=a.player_.audioTracks()[b];if(f.enabled&&"main"!==f.kind){c=!0;d=!1;break}}a.sourceBuffers.forEach(function(b){b.appendAudioInitSegment_=!0;if(b.videoCodec_&&b.audioCodec_)b.audioDisabled_=c;else if(b.videoCodec_&&!b.audioCodec_)b.audioDisabled_=!0,d=!1;else if(!b.videoCodec_&&b.audioCodec_&&(b.audioDisabled_=d))return;a.activeSourceBuffers_.push(b)})}};this.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(a){a.appendAudioInitSegment_=
!0})};this.onHlsReset_=function(){a.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.postMessage({action:"resetCaptions"})})};this.onHlsSegmentTimeMapping_=function(b){a.sourceBuffers.forEach(function(a){return a.timeMapping_=b.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(a){this.nativeMediaSource_.addEventListener(a,this.trigger.bind(this))},this);this.on("sourceopen",function(b){if(b=r["default"].querySelector('[src="'+a.url_+'"]'))a.player_=(0,w["default"])(b.parentNode),
a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_)});this.on("sourceended",function(b){b=(0,v.durationOfVideo)(a.duration);for(var c=
0;c<a.sourceBuffers.length;c++){var d=a.sourceBuffers[c];(d=d.metadataTrack_&&d.metadataTrack_.cues)&&d.length&&(d[d.length-1].endTime=b)}});this.on("sourceclose",function(a){this.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.terminate()});this.sourceBuffers.length=0;this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),
this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))})}d(c,a);b(c,[{key:"addSeekableRange_",value:function(a,b){if(Infinity!==this.duration)throw a=Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),a.name="InvalidStateError",
a.code=11,a;if(b>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))this.nativeMediaSource_.duration=b}},{key:"addSourceBuffer",value:function(a){var b=void 0;b=(0,t.parseContentType)(a);/^(video|audio)\/mp2t$/i.test(b.type)?(a=[],b.parameters&&b.parameters.codecs&&(a=b.parameters.codecs.split(","),a=(0,t.translateLegacyCodecs)(a),a=a.filter(function(a){return(0,t.isAudioCodec)(a)||(0,t.isVideoCodec)(a)})),0===a.length&&(a=["avc1.4d400d","mp4a.40.2"]),b=new z["default"](this,
a),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),b.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):b=this.nativeMediaSource_.addSourceBuffer(a);this.sourceBuffers.push(b);return b}}]);return c}(w["default"].EventTarget);g["default"]=a;c.exports=g["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./add-text-track-data":64,"./codec-utils":65,"./virtual-source-buffer":75,
"global/document":31,"global/window":32}],72:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});g["default"]=function(a,c,d){var b;if(d&&d.cues)for(b=d.cues.length;b--;){var f=d.cues[b];f.startTime<=c&&f.endTime>=a&&d.removeCue(f)}};c.exports=g["default"]},{}],73:[function(h,c,g){Object.defineProperty(g,"__esModule",{value:!0});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),f=h("global/window"),d=f&&f.__esModule?f:{"default":f},b=(h=h("mux.js/lib/mp4"))&&h.__esModule?h:{"default":h},l=function(a){a.on("data",function(a){var b=a.initSegment;a.initSegment={data:b.buffer,byteOffset:b.byteOffset,byteLength:b.byteLength};b=a.data;a.data=b.buffer;d["default"].postMessage({action:"data",segment:a,byteOffset:b.byteOffset,byteLength:b.byteLength},[a.data])});if(a.captionStream)a.captionStream.on("data",
function(a){d["default"].postMessage({action:"caption",data:a})});a.on("done",function(a){d["default"].postMessage({action:"done"})});a.on("gopInfo",function(a){d["default"].postMessage({action:"gopInfo",gopInfo:a})})},n=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.options=a||{};this.init()}a(c,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new b["default"].Transmuxer(this.options);l(this.transmuxer)}},
{key:"push",value:function(a){a=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(a)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(a){this.transmuxer.setBaseMediaDecodeTime(Math.round(9E4*(a.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(a){this.transmuxer.setAudioAppendStart(Math.ceil(9E4*a.appendStart))}},{key:"flush",value:function(a){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},
{key:"alignGopsWith",value:function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())}}]);return c}(),p=function(a){a.onmessage=function(a){if("init"===a.data.action&&a.data.options)this.messageHandlers=new n(a.data.options);else if(this.messageHandlers||(this.messageHandlers=new n),a.data&&a.data.action&&"init"!==a.data.action&&this.messageHandlers[a.data.action])this.messageHandlers[a.data.action](a.data)}};g["default"]=function(a){return new p(a)};c.exports=g["default"]},{"global/window":32,
"mux.js/lib/mp4":55}],74:[function(h,c,g){(function(a){function c(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(g,"__esModule",{value:!0});var d=h("global/window"),b=c(d);d=h("./flash-media-source");var l=c(d);d=h("./html-media-source");var n=c(d),p=c("undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null),r=0,w={mode:"auto"};p["default"].mediaSources={};var z=function(a,b){if(a=p["default"].mediaSources[a])a.trigger({type:"sourceopen",swfId:b});else throw Error("Media Source not found (Video.js)");
},v=function(){return!!b["default"].MediaSource&&!!b["default"].MediaSource.isTypeSupported&&b["default"].MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')};a=function(a){a=p["default"].mergeOptions(w,a);this.MediaSource={open:z,supportsNativeMediaSources:v};if("html5"===a.mode||"auto"===a.mode&&v())return new n["default"];if(p["default"].getTech("Flash"))return new l["default"];throw Error("Cannot use Flash or Html5 to create a MediaSource for this video");};g.MediaSource=a;
a.open=z;a.supportsNativeMediaSources=v;d={createObjectURL:function(a){if(a instanceof n["default"]){var c=b["default"].URL.createObjectURL(a.nativeMediaSource_);return a.url_=c}if(!(a instanceof l["default"]))return c=b["default"].URL.createObjectURL(a),a.url_=c;c="blob:vjs-media-source/"+r;r++;p["default"].mediaSources[c]=a;return c}};g.URL=d;p["default"].MediaSource=a;p["default"].URL=d}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:
{})},{"./flash-media-source":68,"./html-media-source":71,"global/window":32}],75:[function(h,c,g){(function(a){function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,
"__esModule",{value:!0});var b=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),l=function(a,b,c){var e=!0;for(;e;)if(null===a&&(a=Function.prototype),e=Object.getOwnPropertyDescriptor(a,b),void 0===e){a=Object.getPrototypeOf(a);if(null===a)break;e=!0}else{if("value"in e)return e.value;b=e.get;return void 0===
b?void 0:b.call(c)}},n=c("undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null);a=h("./create-text-tracks-if-necessary");var p=c(a);a=h("./remove-cues-from-track");var r=c(a),w=h("./add-text-track-data");a=h("webwackify");var z=c(a);a=h("./transmuxer-worker");var v=c(a),t=h("./codec-utils"),q=function(){var a=void 0;try{a=h.resolve("./transmuxer-worker")}catch(F){}return a},y=function(a,b){var c=a.addSourceBuffer(b),e=Object.create(null);e.updating=!1;e.realBuffer_=c;a=
function(a){"function"===typeof c[a]?e[a]=function(){return c[a].apply(c,arguments)}:"undefined"===typeof e[a]&&Object.defineProperty(e,a,{get:function(){return c[a]},set:function(b){return c[a]=b}})};for(var d in c)a(d);return e},A=function(a,b,c){if(!b||!a.length)return[];b=Math.ceil(9E4*(b.currentTime()-c+3));for(c=0;c<a.length&&!(a[c].pts>b);c++);return a.slice(c)};g.gopsSafeToAlignWith=A;var C=function(a,b,c){if(!b.length)return a;if(c)return b.slice();c=b[0].pts;var e=0;for(e;e<a.length&&!(a[e].pts>=
c);e++);return a.slice(0,e).concat(b)};g.updateGopBuffer=C;var G=function(a,b,c,e){b=Math.ceil(9E4*(b-e));var d=Math.ceil(9E4*(c-e));c=a.slice();for(e=a.length;e--&&!(a[e].pts<=d););if(-1===e)return c;for(d=e+1;d--&&!(a[d].pts<=b););d=Math.max(d,0);c.splice(d,e-d+1);return c};g.removeGopBuffer=G;a=function(a){function c(a,b){var e=this;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");l(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,n["default"].EventTarget);
this.timestampOffset_=0;this.pendingBuffers_=[];this.bufferUpdating_=!1;this.mediaSource_=a;this.codecs_=b;this.videoCodec_=this.audioCodec_=null;this.audioDisabled_=!1;this.appendAudioInitSegment_=!0;this.gopBuffer_=[];this.timeMapping_=0;this.safeAppend_=11<=n["default"].browser.IE_VERSION;a={remux:!1,alignGopsAtEnd:this.safeAppend_};this.codecs_.forEach(function(a){(0,t.isAudioCodec)(a)?e.audioCodec_=a:(0,t.isVideoCodec)(a)&&(e.videoCodec_=a)});this.transmuxer_=(0,z["default"])(v["default"],q());
this.transmuxer_.postMessage({action:"init",options:a});this.transmuxer_.onmessage=function(a){if("data"===a.data.action)return e.data_(a);if("done"===a.data.action)return e.done_(a);if("gopInfo"===a.data.action)return e.appendGopInfo_(a)};Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"===typeof a&&0<=a&&(this.timestampOffset_=a,this.appendAudioInitSegment_=!0,this.timeMapping_=this.gopBuffer_.length=0,this.transmuxer_.postMessage({action:"setTimestampOffset",
timestampOffset:a}))}});Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(a){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=a);this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=a)}});Object.defineProperty(this,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(this,
"buffered",{get:function(){var a=null,b=null,c=0,e=[],d=[];if(!this.videoBuffer_&&!this.audioBuffer_)return n["default"].createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_||this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return n["default"].createTimeRange();for(var f=this.videoBuffer_.buffered,g=this.audioBuffer_.buffered,h=f.length;h--;)e.push({time:f.start(h),type:"start"}),
e.push({time:f.end(h),type:"end"});for(h=g.length;h--;)e.push({time:g.start(h),type:"start"}),e.push({time:g.end(h),type:"end"});e.sort(function(a,b){return a.time-b.time});for(h=0;h<e.length;h++)"start"===e[h].type?(c++,2===c&&(a=e[h].time)):"end"===e[h].type&&(c--,1===c&&(b=e[h].time)),null!==a&&null!==b&&(d.push([a,b]),b=a=null);return n["default"].createTimeRanges(d)}})}d(c,a);b(c,[{key:"data_",value:function(a){var b=a.data.segment;b.data=new Uint8Array(b.data,a.data.byteOffset,a.data.byteLength);
b.initSegment=new Uint8Array(b.initSegment.data,b.initSegment.byteOffset,b.initSegment.byteLength);(0,p["default"])(this,this.mediaSource_,b);this.pendingBuffers_.push(b)}},{key:"done_",value:function(a){"closed"===this.mediaSource_.readyState?this.pendingBuffers_.length=0:this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var a=this,b=["audio","video"];b.forEach(function(c){if(a[c+"Codec_"]&&!a[c+"Buffer_"]){var e=null;a.mediaSource_[c+"Buffer_"]?(e=a.mediaSource_[c+
"Buffer_"],e.updating=!1):(e=y(a.mediaSource_.nativeMediaSource_,c+'/mp4;codecs="'+a[c+"Codec_"]+'"'),a.mediaSource_[c+"Buffer_"]=e);a[c+"Buffer_"]=e;["update","updatestart","updateend"].forEach(function(d){e.addEventListener(d,function(){if("audio"!==c||!a.audioDisabled_)if("updateend"===d&&(a[c+"Buffer_"].updating=!1),b.every(function(b){return"audio"===b&&a.audioDisabled_?!0:c!==b&&a[b+"Buffer_"]&&a[b+"Buffer_"].updating?!1:!0}))return a.trigger(d)})})}})}},{key:"appendBuffer",value:function(a){this.bufferUpdating_=
!0;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var b=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:b.end(b.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:A(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)});this.transmuxer_.postMessage({action:"push",data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]);this.transmuxer_.postMessage({action:"flush"})}},
{key:"appendGopInfo_",value:function(a){this.gopBuffer_=C(this.gopBuffer_,a.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(a,b){this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(a,b),this.gopBuffer_=G(this.gopBuffer_,a,b,this.timeMapping_));!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(a,b));(0,r["default"])(a,b,this.metadataTrack_);if(this.inbandTextTracks_)for(var c in this.inbandTextTracks_)(0,r["default"])(a,
b,this.inbandTextTracks_[c])}},{key:"processPendingSegments_",value:function(){var a={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};a=this.pendingBuffers_.reduce(function(a,b){var c=b.type,e=b.data,d=b.initSegment;a[c].segments.push(e);a[c].bytes+=e.byteLength;a[c].initSegment=d;b.captions&&(a.captions=a.captions.concat(b.captions));b.info&&(a[c].info=b.info);b.metadata&&(a.metadata=a.metadata.concat(b.metadata));return a},a);this.videoBuffer_||this.audioBuffer_||
(0===a.video.bytes&&(this.videoCodec_=null),0===a.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_());a.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:a.audio.info});a.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:a.video.info});this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(a.audio.segments.unshift(a.audio.initSegment),a.audio.bytes+=a.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var b=!1;this.videoBuffer_&&
a.video.bytes?(a.video.segments.unshift(a.video.initSegment),a.video.bytes+=a.video.initSegment.byteLength,this.concatAndAppendSegments_(a.video,this.videoBuffer_),(0,w.addTextTrackData)(this,a.captions,a.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(b=!0);!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(a.audio,this.audioBuffer_);this.pendingBuffers_.length=0;b&&this.trigger("updateend");this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(a,
b){var c=0,e=void 0;if(a.bytes){e=new Uint8Array(a.bytes);a.segments.forEach(function(a){e.set(a,c);c+=a.byteLength});try{b.updating=!0,b.appendBuffer(e)}catch(D){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:D.message,originalError:D})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort();!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"});
this.pendingBuffers_.length=0;this.bufferUpdating_=!1}}]);return c}(n["default"].EventTarget);g["default"]=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./add-text-track-data":64,"./codec-utils":65,"./create-text-tracks-if-necessary":66,"./remove-cues-from-track":72,"./transmuxer-worker":73,webwackify:76}],76:[function(h,c,g,a,f,d){var b=a,l=f,n=JSON.stringify,p=!1;h=function(a){function b(d){if(c[d])return c[d].exports;var f=
c[d]={i:d,l:!1,exports:{}};a[d].call(f.exports,f,f.exports,b);f.l=!0;return f.exports}var c={};b.m=a;b.c=c;b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})};b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};b.d(c,"a",c);return c};b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};b.p="";return b(b.s=entryModule)};"undefined"===typeof b&&(p=!0,b=h,l=__webpack_modules__);var r=function(a){for(var c,
f=Object.keys(d),g,h=0;h<f.length;h++){c=f[h];var p=d[c].exports;if(p===a||p&&p.default===a){g=c;break}}if(!g){g=Math.floor(Math.pow(16,8)*Math.random()).toString(16);p={};for(h=0;h<f.length;h++)c=f[h],p[c]=c;l[g]=["function(require,module,exports){"+a+"(self); }",p]}a=Math.floor(Math.pow(16,8)*Math.random()).toString(16);c={};c[g]=g;l[a]=["function(require,module,exports){var f = require("+n(g)+");(f.default ? f.default : f)(self);}",c];return"("+b+")({"+Object.keys(l).map(function(a){return n(a)+
":["+l[a][0]+","+n(l[a][1])+"]"}).join(",")+"},{},["+n(a)+"])"},w=function(a,c){var d="string"===typeof c;var f=d?{}:[];Object.keys(l).forEach(function(a){l[a]&&(f[a]=l[a].toString())});var g=__webpack_require__(c);if(!g||g!==a&&g.default!==a)g=f[c],f[c]=g.substring(0,g.length-1)+"\n"+a.name+"();\n}";d?(c=n(c),a="{"+Object.keys(f).map(function(a){return n(a)+":"+f[a]}).join(",")+"}"):a="["+f.join(",")+"]";return"var fn = ("+b.toString().replace("entryModule",c)+")("+a+');\n(typeof fn === "function") && fn(self);'};
c.exports=function(a,b){a=p?w(a,b):r(a);a=new Blob([a],{type:"text/javascript"});a=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(a);b=new Worker(a);b.objectURL=a;return b}},{}],77:[function(h,c,g){(function(a){function f(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var b=function(){function a(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),g=function(a,b,c){var e=!0;for(;e;)if(null===a&&(a=Function.prototype),e=Object.getOwnPropertyDescriptor(a,b),void 0===e){a=Object.getPrototypeOf(a);if(null===
a)break;e=!0}else{if("value"in e)return e.value;b=e.get;return void 0===b?void 0:b.call(c)}},n=h("global/document"),p=f(n);n=h("./playlist-loader");n=f(n);var r=h("./playlist");r=f(r);var w=h("./xhr"),z=f(w),v=h("aes-decrypter");w=h("./bin-utils");var t=f(w);w=h("videojs-contrib-media-sources");var q=h("m3u8-parser");q=f(q);var y=f("undefined"!==typeof window?window.videojs:"undefined"!==typeof a?a.videojs:null),A=h("./master-playlist-controller");a=h("./config");var C=f(a);a=h("./rendition-mixin");
var G=f(a);a=h("global/window");a=f(a);var E=h("./playback-watcher"),F=f(E);E=h("./reload-source-on-error");E=f(E);var I=h("./playlist-selectors.js"),e={PlaylistLoader:n["default"],Playlist:r["default"],Decrypter:v.Decrypter,AsyncStream:v.AsyncStream,decrypt:v.decrypt,utils:t["default"],STANDARD_PLAYLIST_SELECTOR:I.lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:I.lowestBitrateCompatibleVariantSelector,comparePlaylistBandwidth:I.comparePlaylistBandwidth,comparePlaylistResolution:I.comparePlaylistResolution,
xhr:(0,z["default"])()};"GOAL_BUFFER_LENGTH MAX_GOAL_BUFFER_LENGTH GOAL_BUFFER_LENGTH_RATE BUFFER_LOW_WATER_LINE MAX_BUFFER_LOW_WATER_LINE BUFFER_LOW_WATER_LINE_RATE BANDWIDTH_VARIANCE".split(" ").forEach(function(a){Object.defineProperty(e,a,{get:function(){y["default"].log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");return C["default"][a]},set:function(b){y["default"].log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");"number"!==typeof b||0>b?y["default"].log.warn("value of Hls."+
a+" must be greater than or equal to 0"):C["default"][a]=b}})});var m=function(a,b){b=b.media();for(var c=-1,e=0;e<a.length;e++)if(a[e].id===b.uri){c=e;break}a.selectedIndex_=c;a.trigger({selectedIndex:c,type:"change"})},x=function(a,b){b.representations().forEach(function(b){a.addQualityLevel(b)});m(a,b.playlists)};e.canPlaySource=function(){return y["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};e.supportsNativeHls=function(){var a=p["default"].createElement("video");
return y["default"].getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(b){return/maybe|probably/i.test(a.canPlayType(b))}):!1}();e.isSupported=function(){return y["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var D=function(a){function c(a,b,e){var d=this;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
g(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,b,e.hls);b.options_&&b.options_.playerId&&(e=(0,y["default"])(b.options_.playerId),e.hasOwnProperty("hls")||Object.defineProperty(e,"hls",{get:function(){y["default"].log.warn("player.hls is deprecated. Use player.tech_.hls instead.");b.trigger({type:"usage",name:"hls-player-access"});return d}}));this.tech_=b;this.source_=a;this.stats={};this.ignoreNextSeekingEvent_=!1;this.setOptions_();if(this.options_.overrideNative&&(b.featuresNativeVideoTracks||
b.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");this.on(p["default"],["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(a){(a=p["default"].fullscreenElement||p["default"].webkitFullscreenElement||p["default"].mozFullScreenElement||p["default"].msFullscreenElement)&&a.contains(d.tech_.el())&&d.masterPlaylistController_.fastQualityChange_()});this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?
this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())});this.on(this.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()});this.on(this.tech_,"play",this.play)}d(c,a);b(c,[{key:"setOptions_",value:function(){var a=this;this.options_.withCredentials=this.options_.withCredentials||!1;"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300);"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=
4194304);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&4194304===this.options_.bandwidth;["withCredentials","bandwidth"].forEach(function(b){"undefined"!==typeof a.source_[b]&&(a.options_[b]=a.source_[b])});this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(a){var b=this;a&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=e,this.masterPlaylistController_=new A.MasterPlaylistController(this.options_),
this.playbackWatcher_=new F["default"](y["default"].mergeOptions(this.options_,{seekable:function(){return b.seekable()}})),this.masterPlaylistController_.on("error",function(){y["default"].players[b.tech_.options_.playerId].error(b.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):e.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=e.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=
this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(a){this.masterPlaylistController_.selectPlaylist=a.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=a;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=
1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=a;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){y["default"].log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return b.bandwidth||
0},enumerable:!0},mediaRequests:{get:function(){return b.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return b.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return b.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return b.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return b.masterPlaylistController_.mediaTransferDuration_()||
0},enumerable:!0},mediaBytesTransferred:{get:function(){return b.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return b.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){(0,G["default"])(b)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),
this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return b.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(y["default"].URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var a=this,b=y["default"].players[this.tech_.options_.playerId];b&&b.qualityLevels&&(this.qualityLevels_=b.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){x(a.qualityLevels_,
a)}),this.playlists.on("mediachange",function(){m(a.qualityLevels_,a.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(a){this.masterPlaylistController_.setCurrentTime(a)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.masterPlaylistController_&&
this.masterPlaylistController_.dispose();this.qualityLevels_&&this.qualityLevels_.dispose();g(Object.getPrototypeOf(c.prototype),"dispose",this).call(this)}}]);return c}(y["default"].getComponent("Component"));n=function N(a){return{canHandleSource:function(b){var c=y["default"].mergeOptions(y["default"].options,1>=arguments.length||void 0===arguments[1]?{}:arguments[1]);return c.hls&&c.hls.mode&&c.hls.mode!==a?!1:N.canPlayType(b.type,c)},handleSource:function(b,c){var e=y["default"].mergeOptions(y["default"].options,
2>=arguments.length||void 0===arguments[2]?{}:arguments[2],{hls:{mode:a}});"flash"===a&&c.setTimeout(function(){c.trigger("loadstart")},1);c.hls=new D(b,c,e);c.hls.xhr=(0,z["default"])();c.hls.src(b.src);return c.hls},canPlayType:function(a){var b=y["default"].mergeOptions(y["default"].options,1>=arguments.length||void 0===arguments[1]?{}:arguments[1]);return N.canPlayType(a,b)?"maybe":""}}};n.canPlayType=function(a,b){return y["default"].browser.IE_VERSION&&10>=y["default"].browser.IE_VERSION||!b.hls.overrideNative&&
e.supportsNativeHls?!1:/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(a)};if("undefined"===typeof y["default"].MediaSource||"undefined"===typeof y["default"].URL)y["default"].MediaSource=w.MediaSource,y["default"].URL=w.URL;r=y["default"].getTech("Flash");w.MediaSource.supportsNativeMediaSources()&&y["default"].getTech("Html5").registerSourceHandler(n("html5"),0);a["default"].Uint8Array&&r&&r.registerSourceHandler(n("flash"));y["default"].HlsHandler=D;y["default"].HlsSourceHandler=
n;y["default"].Hls=e;y["default"].use||y["default"].registerComponent("Hls",e);y["default"].m3u8=q["default"];y["default"].options.hls=y["default"].options.hls||{};y["default"].registerPlugin?y["default"].registerPlugin("reloadSourceOnError",E["default"]):y["default"].plugin("reloadSourceOnError",E["default"]);c.exports={Hls:e,HlsHandler:D,HlsSourceHandler:n}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bin-utils":2,"./config":3,
"./master-playlist-controller":5,"./playback-watcher":8,"./playlist":11,"./playlist-loader":9,"./playlist-selectors.js":10,"./reload-source-on-error":13,"./rendition-mixin":14,"./xhr":21,"aes-decrypter":25,"global/document":31,"global/window":32,"m3u8-parser":33,"videojs-contrib-media-sources":74}]},{},[77])(77)});(function(k){var h=function(c){return{hide:function(){c.style.display="none";return this},attach:function(g,a){c.addEventListener?c.addEventListener(g,a,!1):c.attachEvent&&c.attachEvent("on"+g,a);return function(){h(c).detach(g,a)}},detach:function(g,a){c.removeEventListener?c.removeEventListener(g,a,!1):c.attachEvent&&c.detachEvent("on"+g,a);return this},contains:function(g){return g?c===g?!0:c.contains?c.contains(g):!!(g.compareDocumentPosition(c)&8):!1},insertBefore:function(g){g.parentNode.insertBefore(c,
g);return this},remove:function(){c.parentNode.removeChild(c);return this},css:function(g){if(null==c.style)throw new h.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!");null!=g.opacity&&"string"!==typeof c.style.opacity&&"undefined"!==typeof c.filters&&(g.filter="alpha(opacity="+Math.round(100*g.opacity)+")");h.extend(c.style,g);return this},hasClass:function(g,a){g=new RegExp("(^| )"+g+"( |$)");return g.test(c.className)||!(!a||!g.test(c.parentNode.className))},
addClass:function(g){h(c).hasClass(g)||(c.className+=" "+g);return this},removeClass:function(g){c.className=c.className.replace(new RegExp("(^| )"+g+"( |$)")," ").replace(/^\s+|\s+$/g,"");return this},getByClass:function(g,a){var f=[];if(a&&c.querySelector)return c.querySelector("."+g);if(c.querySelectorAll)return c.querySelectorAll("."+g);var d=c.getElementsByTagName("*");h.each(d,function(a,c){h(c).hasClass(g)&&f.push(c)});return a?f[0]:f},getFirstByClass:function(g){return h(c).getByClass(g,!0)},
children:function(){for(var g=[],a=c.firstChild;a;)1===a.nodeType&&g.push(a),a=a.nextSibling;return g},setText:function(g){c.innerText=g;c.textContent=g;return this},clearText:function(){return h(c).setText("")},hasAttribute:function(g){if(c.hasAttribute)return c.hasAttribute(g)?null==/^false$/i.exec(c.getAttribute(g)):!1;g=c[g];return void 0===g?!1:null==/^false$/i.exec(g)}}};(function(){h.canvasToBlob=function(c,g,a){return h.dataUriToBlob(c.toDataURL(g,a))};h.dataUriToBlob=function(c){var g=0<=
c.split(",")[0].indexOf("base64")?atob(c.split(",")[1]):decodeURI(c.split(",")[1]);var a=c.split(",")[0].split(":")[1].split(";")[0];c=new ArrayBuffer(g.length);var f=new Uint8Array(c);h.each(g,function(a,b){f[a]=b.charCodeAt(0)});return function(a,b){var c=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;return(c=c&&new c)?(c.append(a),c.getBlob(b)):new Blob([a],{type:b})}(c,a)};h.log=function(c,g){if(window.console)if(g&&"info"!==g)if(window.console[g])window.console[g](c);
else window.console.log("<"+g+"> "+c);else window.console.log(c)};h.isObject=function(c){return c&&!c.nodeType&&"[object Object]"===Object.prototype.toString.call(c)};h.isFunction=function(c){return"function"===typeof c};h.isArray=function(c){return"[object Array]"===Object.prototype.toString.call(c)||c&&window.ArrayBuffer&&c.buffer&&c.buffer.constructor===ArrayBuffer};h.isItemList=function(c){return"[object DataTransferItemList]"===Object.prototype.toString.call(c)};h.isNodeList=function(c){return"[object NodeList]"===
Object.prototype.toString.call(c)||c.item&&c.namedItem};h.isString=function(c){return"[object String]"===Object.prototype.toString.call(c)};h.trimStr=function(c){return String.prototype.trim?c.trim():c.replace(/^\s+|\s+$/g,"")};h.format=function(c){var g=Array.prototype.slice.call(arguments,1),a=c,f=a.indexOf("{}");h.each(g,function(c,b){c=a.substring(0,f);var d=a.substring(f+2);a=c+b+d;f=a.indexOf("{}",f+b.length);if(0>f)return!1});return a};h.isFile=function(c){return window.File&&"[object File]"===
Object.prototype.toString.call(c)};h.isFileList=function(c){return window.FileList&&"[object FileList]"===Object.prototype.toString.call(c)};h.isFileOrInput=function(c){return h.isFile(c)||h.isInput(c)};h.isInput=function(c,g){var a=function(a){a=a.toLowerCase();return g?"file"!==a:"file"===a};return window.HTMLInputElement&&"[object HTMLInputElement]"===Object.prototype.toString.call(c)&&c.type&&a(c.type)||c.tagName&&"input"===c.tagName.toLowerCase()&&c.type&&a(c.type)?!0:!1};h.isBlob=function(c){if(window.Blob&&
"[object Blob]"===Object.prototype.toString.call(c))return!0};h.isXhrUploadSupported=function(){var c=document.createElement("input");c.type="file";return void 0!==c.multiple&&"undefined"!==typeof File&&"undefined"!==typeof FormData&&"undefined"!==typeof h.createXhrInstance().upload};h.createXhrInstance=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(c){return h.log("Neither XHR or ActiveX are supported!","error"),null}};h.isFolderDropSupported=
function(c){return c.items&&0<c.items.length&&c.items[0].webkitGetAsEntry};h.isFileChunkingSupported=function(){return!h.androidStock()&&h.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)};h.sliceBlob=function(c,g,a){return(c.slice||c.mozSlice||c.webkitSlice).call(c,g,a)};h.arrayBufferToHex=function(c){var g="";c=new Uint8Array(c);h.each(c,function(a,c){a=c.toString(16);2>a.length&&(a="0"+a);g+=a});return g};h.readBlobToHex=
function(c,g,a){c=h.sliceBlob(c,g,g+a);var f=new FileReader,d=new h.Promise;f.onload=function(){d.success(h.arrayBufferToHex(f.result))};f.onerror=d.failure;f.readAsArrayBuffer(c);return d};h.extend=function(c,g,a){h.each(g,function(f,d){a&&h.isObject(d)?(void 0===c[f]&&(c[f]={}),h.extend(c[f],d,!0)):c[f]=d});return c};h.override=function(c,g){var a={};g=g(a);h.each(g,function(f,d){void 0!==c[f]&&(a[f]=c[f]);c[f]=d});return c};h.indexOf=function(c,g,a){if(c.indexOf)return c.indexOf(g,a);a=a||0;var f=
c.length;for(0>a&&(a+=f);a<f;a+=1)if(c.hasOwnProperty(a)&&c[a]===g)return a;return-1};h.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var g=16*Math.random()|0;return("x"==c?g:g&3|8).toString(16)})};h.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident")};h.ie7=function(){return-1!==navigator.userAgent.indexOf("MSIE 7")};h.ie8=function(){return-1!==navigator.userAgent.indexOf("MSIE 8")};h.ie10=function(){return-1!==
navigator.userAgent.indexOf("MSIE 10")};h.ie11=function(){return h.ie()&&-1!==navigator.userAgent.indexOf("rv:11")};h.edge=function(){return 0<=navigator.userAgent.indexOf("Edge")};h.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")};h.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")};h.opera=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Opera")};h.firefox=function(){return!h.edge()&&
!h.ie11()&&-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor};h.windows=function(){return"Win32"===navigator.platform};h.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")};h.androidStock=function(){return h.android()&&0>navigator.userAgent.toLowerCase().indexOf("chrome")};h.ios6=function(){return h.ios()&&-1!==navigator.userAgent.indexOf(" OS 6_")};h.ios7=function(){return h.ios()&&-1!==navigator.userAgent.indexOf(" OS 7_")};
h.ios8=function(){return h.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_")};h.ios800=function(){return h.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_0 ")};h.ios=function(){return-1!==navigator.userAgent.indexOf("iPad")||-1!==navigator.userAgent.indexOf("iPod")||-1!==navigator.userAgent.indexOf("iPhone")};h.iosChrome=function(){return h.ios()&&-1!==navigator.userAgent.indexOf("CriOS")};h.iosSafari=function(){return h.ios()&&!h.iosChrome()&&-1!==navigator.userAgent.indexOf("Safari")};h.iosSafariWebView=
function(){return h.ios()&&!h.iosChrome()&&!h.iosSafari()};h.preventDefault=function(c){c.preventDefault?c.preventDefault():c.returnValue=!1};h.toElement=function(){var c=document.createElement("div");return function(g){c.innerHTML=g;g=c.firstChild;c.removeChild(g);return g}}();h.each=function(c,g){var a;if(c)if(window.Storage&&c.constructor===window.Storage)for(a=0;a<c.length;a++){var f=g(c.key(a),c.getItem(c.key(a)));if(!1===f)break}else if(h.isArray(c)||h.isItemList(c)||h.isNodeList(c))for(a=0;a<
c.length&&(f=g(a,c[a]),!1!==f);a++);else if(h.isString(c))for(a=0;a<c.length&&(f=g(a,c.charAt(a)),!1!==f);a++);else for(a in c)if(Object.prototype.hasOwnProperty.call(c,a)&&(f=g(a,c[a]),!1===f))break};h.bind=function(c,g){if(h.isFunction(c)){var a=Array.prototype.slice.call(arguments,2);return function(){var f=h.extend([],a);arguments.length&&(f=f.concat(Array.prototype.slice.call(arguments)));return c.apply(g,f)}}throw Error("first parameter must be a function!");};h.obj2url=function(c,g,a){var f=
[],d="&",b=function(a,b){var c=g?/\[\]$/.test(g)?g:g+"["+b+"]":b;"undefined"!==c&&"undefined"!==b&&f.push("object"===typeof a?h.obj2url(a,c,!0):"[object Function]"===Object.prototype.toString.call(a)?encodeURIComponent(c)+"="+encodeURIComponent(a()):encodeURIComponent(c)+"="+encodeURIComponent(a))};!a&&g?(d=/\?/.test(g)?/\?$/.test(g)?"":"&":"?",f.push(g),f.push(h.obj2url(c))):"[object Array]"===Object.prototype.toString.call(c)&&"undefined"!==typeof c?h.each(c,function(a,c){b(c,a)}):"undefined"!==
typeof c&&null!==c&&"object"===typeof c?h.each(c,function(a,c){b(c,a)}):f.push(encodeURIComponent(g)+"="+encodeURIComponent(c));return g?f.join(d):f.join(d).replace(/^&/,"").replace(/%20/g,"+")};h.obj2FormData=function(c,g,a){g||(g=new FormData);h.each(c,function(c,d){c=a?a+"["+c+"]":c;h.isObject(d)?h.obj2FormData(d,g,c):h.isFunction(d)?g.append(c,d()):g.append(c,d)});return g};h.obj2Inputs=function(c,g){var a;g||(g=document.createElement("form"));h.obj2FormData(c,{append:function(c,d){a=document.createElement("input");
a.setAttribute("name",c);a.setAttribute("value",d);g.appendChild(a)}});return g};h.parseJson=function(c){return window.JSON&&h.isFunction(JSON.parse)?JSON.parse(c):eval("("+c+")")};h.getExtension=function(c){var g=c.lastIndexOf(".")+1;if(0<g)return c.substr(g,c.length-g)};h.getFilename=function(c){return h.isInput(c)?c.value.replace(/.*(\/|\\)/,""):h.isFile(c)&&null!==c.fileName&&void 0!==c.fileName?c.fileName:c.name};h.DisposeSupport=function(){var c=[];return{dispose:function(){var g;do(g=c.shift())&&
g();while(g)},attach:function(){this.addDisposer(h(arguments[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(g){c.push(g)}}}})();(function(){"function"===typeof define&&define.amd?define(function(){return h}):"undefined"!==typeof module&&module.exports?module.exports=h:k.qq=h})();(function(){h.Error=function(c){this.message="[Fine Uploader "+h.version+"] "+c};h.Error.prototype=Error()})();h.version="5.15.4";h.supportedFeatures=function(){function c(){var a=document.createElement("span");
return("draggable"in a||"ondragstart"in a&&"ondrop"in a)&&!h.android()&&!h.ios()}var g,a,f,d;var b=(f=(g=function(){var a=!0;try{var b=document.createElement("input");b.type="file";h(b).hide();b.disabled&&(a=!1)}catch(G){a=!1}return a}())&&h.isXhrUploadSupported())&&!h.androidStock();var k=(a=f&&c())&&(h.chrome()||h.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/);var n=f&&h.isFileChunkingSupported();if(d=f&&n)try{d=!!window.localStorage&&h.isFunction(window.localStorage.setItem)}catch(A){d=
!1}var p=f&&(h.chrome()||h.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/);var r=g&&(void 0!==window.postMessage||f);var w=window.XMLHttpRequest?void 0!==h.createXhrInstance().withCredentials:!1;var z=void 0!==window.XDomainRequest;var v=window.XMLHttpRequest&&void 0!==h.createXhrInstance().withCredentials?!0:void 0!==window.XDomainRequest;var t=void 0!==document.createElement("input").webkitdirectory;var q=f&&void 0!==window.FileReader;var y=f?!h.androidStock()&&
!h.iosChrome():!1;return{ajaxUploading:f,blobUploading:b,canDetermineSize:f,chunking:n,deleteFileCors:v,deleteFileCorsXdr:z,deleteFileCorsXhr:w,dialogElement:!!window.HTMLDialogElement,fileDrop:a,folderDrop:k,folderSelection:t,imagePreviews:q,imageValidation:q,itemSizeValidation:f,pause:n,progressBar:y,resume:d,scaling:q&&b,tiffPreviews:h.safari(),unlimitedScaledImageSize:!h.ios(),uploading:g,uploadCors:r,uploadCustomHeaders:f,uploadNonMultipart:f,uploadViaPaste:p}}();h.isGenericPromise=function(c){return!!(c&&
c.then&&h.isFunction(c.then))};h.Promise=function(){var c,g,a=[],f=[],d=[],b=0;h.extend(this,{then:function(d,h){0===b?(d&&a.push(d),h&&f.push(h)):-1===b?h&&h.apply(null,g):d&&d.apply(null,c);return this},done:function(a){0===b?d.push(a):a.apply(null,void 0===g?c:g);return this},success:function(){b=1;c=arguments;a.length&&h.each(a,function(a,b){b.apply(null,c)});d.length&&h.each(d,function(a,b){b.apply(null,c)});return this},failure:function(){b=-1;g=arguments;f.length&&h.each(f,function(a,b){b.apply(null,
g)});d.length&&h.each(d,function(a,b){b.apply(null,g)});return this}})};h.BlobProxy=function(c,g){h.extend(this,{referenceBlob:c,create:function(){return g(c)}})};h.UploadButton=function(c){function g(){var c=document.createElement("input");c.setAttribute(h.UploadButton.BUTTON_ID_ATTR_NAME,b);c.setAttribute("title",d.title);a.setMultiple(d.multiple,c);d.folders&&h.supportedFeatures.folderSelection&&c.setAttribute("webkitdirectory","");d.acceptFiles&&c.setAttribute("accept",d.acceptFiles);c.setAttribute("type",
"file");c.setAttribute("name",d.name);h(c).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:h.ie()&&!h.ie8()?"3500px":"118px",margin:0,padding:0,cursor:"pointer",opacity:0});!h.ie7()&&h(c).css({height:"100%"});d.element.appendChild(c);f.attach(c,"change",function(){d.onChange(c)});f.attach(c,"mouseover",function(){h(d.element).addClass(d.hoverClass)});f.attach(c,"mouseout",function(){h(d.element).removeClass(d.hoverClass)});f.attach(c,"focus",function(){h(d.element).addClass(d.focusClass)});
f.attach(c,"blur",function(){h(d.element).removeClass(d.focusClass)});return c}var a=this,f=new h.DisposeSupport,d={acceptFiles:null,element:null,focusClass:"qq-upload-button-focus",folders:!1,hoverClass:"qq-upload-button-hover",ios8BrowserCrashWorkaround:!1,multiple:!1,name:"qqfile",onChange:function(a){},title:null};h.extend(d,c);var b=h.getUniqueId();h(d.element).css({position:"relative",overflow:"hidden",direction:"ltr"});h.extend(this,{getInput:function(){return k},getButtonId:function(){return b},
setMultiple:function(a,b){b=b||this.getInput();d.ios8BrowserCrashWorkaround&&h.ios8()&&(h.iosChrome()||h.iosSafariWebView())?b.setAttribute("multiple",""):a?b.setAttribute("multiple",""):b.removeAttribute("multiple")},setAcceptFiles:function(a){a!==d.acceptFiles&&k.setAttribute("accept",a)},reset:function(){k.parentNode&&h(k).remove();h(d.element).removeClass(d.focusClass);k=null;k=g()}});var k=g()};h.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id";h.UploadData=function(c){function g(a){if(h.isArray(a)){var b=
[];h.each(a,function(a,c){b.push(d[c])});return b}return d[a]}function a(a){if(h.isArray(a)){var c=[];h.each(a,function(a,f){c.push(d[b[f]])});return c}return d[b[a]]}function f(a){var b=[];a=[].concat(a);h.each(a,function(a,c){a=k[c];void 0!==a&&h.each(a,function(a,c){b.push(d[c])})});return b}var d=[],b={},k={},n={},p={};h.extend(this,{addFile:function(a){var f=a.status||h.status.SUBMITTING,g=d.push({name:a.name,originalName:a.name,uuid:a.uuid,size:null==a.size?-1:a.size,status:f})-1;a.batchId&&
(d[g].batchId=a.batchId,void 0===p[a.batchId]&&(p[a.batchId]=[]),p[a.batchId].push(g));a.proxyGroupId&&(d[g].proxyGroupId=a.proxyGroupId,void 0===n[a.proxyGroupId]&&(n[a.proxyGroupId]=[]),n[a.proxyGroupId].push(g));d[g].id=g;b[a.uuid]=g;void 0===k[f]&&(k[f]=[]);k[f].push(g);a.onBeforeStatusChange&&a.onBeforeStatusChange(g);c.onStatusChange(g,null,f);return g},retrieve:function(b){if(h.isObject(b)&&d.length){if(void 0!==b.id)return g(b.id);if(void 0!==b.uuid)return a(b.uuid);if(b.status)return f(b.status)}else return h.extend([],
d,!0)},reset:function(){d=[];b={};k={};p={}},setStatus:function(a,b){var f=d[a].status,g=h.indexOf(k[f],a);k[f].splice(g,1);d[a].status=b;void 0===k[b]&&(k[b]=[]);k[b].push(a);c.onStatusChange(a,f,b)},uuidChanged:function(a,c){var f=d[a].uuid;d[a].uuid=c;b[c]=a;delete b[f]},updateName:function(a,b){d[a].name=b},updateSize:function(a,b){d[a].size=b},setParentId:function(a,b){d[a].parentId=b},getIdsInProxyGroup:function(a){return(a=d[a].proxyGroupId)?n[a]:[]},getIdsInBatch:function(a){return p[d[a].batchId]}})};
h.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"};(function(){h.basePublicApi={addBlobs:function(c,g,a){this.addFiles(c,g,a)},addInitialFiles:function(c){var g=this;h.each(c,function(a,c){g._addCannedFile(c)})},addFiles:function(c,
g,a){this._maybeHandleIos8SafariWorkaround();var f=0===this._storedIds.length?h.getUniqueId():this._currentBatchId,d=h.bind(function(a){this._handleNewFile({blob:a,name:this._options.blobs.defaultName},f,w)},this),b=h.bind(function(a){this._handleNewFile(a,f,w)},this),k=h.bind(function(a){a=h.canvasToBlob(a);this._handleNewFile({blob:a,name:this._options.blobs.defaultName+".png"},f,w)},this),n=h.bind(function(a){var b=h.canvasToBlob(a.canvas,a.type,a.quality&&a.quality/100);this._handleNewFile({blob:b,
name:a.name},f,w)},this),p=h.bind(function(a){if(h.isInput(a)&&h.supportedFeatures.ajaxUploading){a=Array.prototype.slice.call(a.files);var b=this;h.each(a,function(a,c){b._handleNewFile(c,f,w)})}else this._handleNewFile(a,f,w)},this),r=this,w=[];this._currentBatchId=f;c&&(h.isFileList(c)&&(c=Array.prototype.slice.call(c)),c=[].concat(c),h.each(c,function(a,c){h.isFileOrInput(c)?p(c):h.isBlob(c)?d(c):h.isObject(c)?c.blob&&c.name?b(c):c.canvas&&c.name&&n(c):c.tagName&&"canvas"===c.tagName.toLowerCase()?
k(c):r.log(c+" is not a valid file container!  Ignoring!","warn")}),this.log("Received "+w.length+" files."),this._prepareItemsForUpload(w,g,a))},cancel:function(c){this._handler.cancel(c)},cancelAll:function(){var c=[],g=this;h.extend(c,this._storedIds);h.each(c,function(a,c){g.cancel(c)});this._handler.cancelAll()},clearStoredFiles:function(){this._storedIds=[]},continueUpload:function(c){var g=this._uploadData.retrieve({id:c});if(!h.supportedFeatures.pause||!this._options.chunking.enabled)return!1;
if(g.status===h.status.PAUSED)return this.log(h.format("Paused file ID {} ({}) will be continued.  Not paused.",c,this.getName(c))),this._uploadFile(c),!0;this.log(h.format("Ignoring continue for file ID {} ({}).  Not paused.",c,this.getName(c)),"error");return!1},deleteFile:function(c){return this._onSubmitDelete(c)},doesExist:function(c){return this._handler.isValid(c)},drawThumbnail:function(c,g,a,f,d){var b=new h.Promise;if(this._imageGenerator){var k=this._thumbnailUrls[c];a={customResizeFunction:d,
maxSize:0<a?a:null,scale:0<a};!f&&h.supportedFeatures.imagePreviews&&(k=this.getFile(c));null==k?b.failure({container:g,error:"File or URL not found."}):this._imageGenerator.generate(k,g,a).then(function(a){b.success(a)},function(a,c){b.failure({container:a,error:c||"Problem generating thumbnail"})})}else b.failure({container:g,error:"Missing image generator module"});return b},getButton:function(c){return this._getButton(this._buttonIdsForFileIds[c])},getEndpoint:function(c){return this._endpointStore.get(c)},
getFile:function(c){return this._handler.getFile(c)||null},getInProgress:function(){return this._uploadData.retrieve({status:[h.status.UPLOADING,h.status.UPLOAD_RETRYING,h.status.QUEUED]}).length},getName:function(c){return this._uploadData.retrieve({id:c}).name},getParentId:function(c){c=this.getUploads({id:c});var g=null;c&&void 0!==c.parentId&&(g=c.parentId);return g},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(c){return this._uploadData.retrieve({id:c}).size},
getNetUploads:function(){return this._netUploaded},getRemainingAllowedItems:function(){var c=this._currentItemLimit;return 0<c?c-this._netUploadedOrQueued:null},getUploads:function(c){return this._uploadData.retrieve(c)},getUuid:function(c){return this._uploadData.retrieve({id:c}).uuid},log:function(c,g){!this._options.debug||g&&"info"!==g?g&&"info"!==g&&h.log("[Fine Uploader "+h.version+"] "+c,g):h.log("[Fine Uploader "+h.version+"] "+c)},pauseUpload:function(c){var g=this._uploadData.retrieve({id:c});
if(!h.supportedFeatures.pause||!this._options.chunking.enabled)return!1;if(0<=h.indexOf([h.status.UPLOADING,h.status.UPLOAD_RETRYING],g.status)){if(this._handler.pause(c))return this._uploadData.setStatus(c,h.status.PAUSED),!0;this.log(h.format("Unable to pause file ID {} ({}).",c,this.getName(c)),"error")}else this.log(h.format("Ignoring pause for file ID {} ({}).  Not in progress.",c,this.getName(c)),"error");return!1},removeFileRef:function(c){this._handler.expunge(c)},reset:function(){this.log("Resetting uploader...");
this._handler.reset();this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._thumbnailUrls=[];h.each(this._buttons,function(c,g){g.reset()});this._paramsStore.reset();this._endpointStore.reset();this._netUploaded=this._netUploadedOrQueued=0;this._uploadData.reset();this._buttonIdsForFileIds=[];this._pasteHandler&&this._pasteHandler.reset();this._options.session.refreshOnReset&&this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=
[];this._totalProgress&&this._totalProgress.reset()},retry:function(c){return this._manualRetry(c)},scaleImage:function(c,g){return h.Scaler.prototype.scaleImage(c,g,{log:h.bind(this.log,this),getFile:h.bind(this.getFile,this),uploadData:this._uploadData})},setCustomHeaders:function(c,g){this._customHeadersStore.set(c,g)},setDeleteFileCustomHeaders:function(c,g){this._deleteFileCustomHeadersStore.set(c,g)},setDeleteFileEndpoint:function(c,g){this._deleteFileEndpointStore.set(c,g)},setDeleteFileParams:function(c,
g){this._deleteFileParamsStore.set(c,g)},setEndpoint:function(c,g){this._endpointStore.set(c,g)},setForm:function(c){this._updateFormSupportAndParams(c)},setItemLimit:function(c){this._currentItemLimit=c},setName:function(c,g){this._uploadData.updateName(c,g)},setParams:function(c,g){this._paramsStore.set(c,g)},setUuid:function(c,g){return this._uploadData.uuidChanged(c,g)},setStatus:function(c,g){if(!this.getUploads({id:c}))throw new h.Error(c+" is not a valid file ID.");switch(g){case h.status.DELETED:this._onDeleteComplete(c,
null,!1);break;case h.status.DELETE_FAILED:this._onDeleteComplete(c,null,!0);break;default:throw c="Method setStatus called on '"+name+"' not implemented yet for "+g,this.log(c),new h.Error(c);}},uploadStoredFiles:function(){0===this._storedIds.length?this._itemError("noFilesError"):this._uploadStoredFiles()}};h.basePrivateApi={_addCannedFile:function(c){var g=this;return this._uploadData.addFile({uuid:c.uuid,name:c.name,size:c.size,status:h.status.UPLOAD_SUCCESSFUL,onBeforeStatusChange:function(a){c.deleteFileEndpoint&&
g.setDeleteFileEndpoint(c.deleteFileEndpoint,a);c.deleteFileParams&&g.setDeleteFileParams(c.deleteFileParams,a);c.thumbnailUrl&&(g._thumbnailUrls[a]=c.thumbnailUrl);g._netUploaded++;g._netUploadedOrQueued++}})},_annotateWithButtonId:function(c,g){h.isFile(c)&&(c.qqButtonId=this._getButtonId(g))},_batchError:function(c){this._options.callbacks.onError(null,null,c,void 0)},_createDeleteHandler:function(){var c=this;return new h.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),
maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._deleteFileCustomHeadersStore,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,cors:this._options.cors,log:h.bind(c.log,c),onDelete:function(g){c._onDelete(g);c._options.callbacks.onDelete(g)},onDeleteComplete:function(g,a,f){c._onDeleteComplete(g,a,f);c._options.callbacks.onDeleteComplete(g,a,f)}})},_createPasteHandler:function(){var c=this;return new h.PasteSupport({targetElement:this._options.paste.targetElement,
callbacks:{log:h.bind(c.log,c),pasteReceived:function(g){c._handleCheckedCallback({name:"onPasteReceived",callback:h.bind(c._options.callbacks.onPasteReceived,c,g),onSuccess:h.bind(c._handlePasteSuccess,c,g),identifier:"pasted image"})}}})},_createStore:function(c,g){var a={},f=c,d={},b=g,k=function(a){return h.isObject(a)?h.extend({},a):a};return{set:function(b,c){null==c?(a={},f=k(b)):a[c]=k(b)},get:function(c){var g=null!=c&&a[c]?a[c]:k(f);b&&h.isObject(g)&&h.extend(g,h.isFunction(b)?b():b);d[c]&&
h.extend(g,d[c]);return k(g)},addReadOnly:function(c,f){h.isObject(a)&&(null===c?h.isFunction(f)?b=f:(b=b||{},h.extend(b,f)):(d[c]=d[c]||{},h.extend(d[c],f)))},remove:function(b){return delete a[b]},reset:function(){a={};d={};f=c}}},_createUploadDataTracker:function(){var c=this;return new h.UploadData({getName:function(g){return c.getName(g)},getUuid:function(g){return c.getUuid(g)},getSize:function(g){return c.getSize(g)},onStatusChange:function(g,a,f){c._onUploadStatusChange(g,a,f);c._options.callbacks.onStatusChange(g,
a,f);c._maybeAllComplete(g,f);c._totalProgress&&setTimeout(function(){c._totalProgress.onStatusChange(g,a,f)},0)}})},_createUploadButton:function(c){var g=this,a=c.allowedExtensions||this._options.validation.allowedExtensions;var f=new h.UploadButton({acceptFiles:c.accept||this._options.validation.acceptFiles,element:c.element,focusClass:this._options.classes.buttonFocus,folders:c.folders,hoverClass:this._options.classes.buttonHover,ios8BrowserCrashWorkaround:this._options.workarounds.ios8BrowserCrash,
multiple:h.supportedFeatures.ajaxUploading?g._options.workarounds.iosEmptyVideos&&h.ios()&&!h.ios6()&&g._isAllowedExtension(a,".mov")?!1:void 0===c.multiple?g._options.multiple:c.multiple:!1,name:this._options.request.inputName,onChange:function(a){g._onInputChange(a)},title:null==c.title?this._options.text.fileInputTitle:c.title});this._disposeSupport.addDisposer(function(){f.dispose()});g._buttons.push(f);return f},_createUploadHandler:function(c,g){var a=this,f={},d={debug:this._options.debug,
maxConnections:this._options.maxConnections,cors:this._options.cors,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:h.bind(a.log,a),preventRetryParam:this._options.retry.preventRetryResponseProperty,onProgress:function(b,c,d,g){if(!(0>d||0>g)){if(f[b]){if(f[b].loaded!==d||f[b].total!==g)a._onProgress(b,c,d,g),a._options.callbacks.onProgress(b,c,d,g)}else a._onProgress(b,c,d,g),a._options.callbacks.onProgress(b,
c,d,g);f[b]={loaded:d,total:g}}},onComplete:function(b,c,d,g){delete f[b];var k=a.getUploads({id:b}).status;if(k!==h.status.UPLOAD_SUCCESSFUL&&k!==h.status.UPLOAD_FAILED)if(k=a._onComplete(b,c,d,g),k instanceof h.Promise)k.done(function(){a._options.callbacks.onComplete(b,c,d,g)});else a._options.callbacks.onComplete(b,c,d,g)},onCancel:function(b,c,d){var f=new h.Promise;a._handleCheckedCallback({name:"onCancel",callback:h.bind(a._options.callbacks.onCancel,a,b,c),onFailure:f.failure,onSuccess:function(){d.then(function(){a._onCancel(b,
c)});f.success()},identifier:b});return f},onUploadPrep:h.bind(this._onUploadPrep,this),onUpload:function(b,c){a._onUpload(b,c);a._options.callbacks.onUpload(b,c)},onUploadChunk:function(b,c,d){a._onUploadChunk(b,d);a._options.callbacks.onUploadChunk(b,c,d)},onUploadChunkSuccess:function(b,c,d,f){a._options.callbacks.onUploadChunkSuccess.apply(a,arguments)},onResume:function(b,c,d){return a._options.callbacks.onResume(b,c,d)},onAutoRetry:function(b,c,d,f){return a._onAutoRetry.apply(a,arguments)},
onUuidChanged:function(b,c){a.log("Server requested UUID change from '"+a.getUuid(b)+"' to '"+c+"'");a.setUuid(b,c)},getName:h.bind(a.getName,a),getUuid:h.bind(a.getUuid,a),getSize:h.bind(a.getSize,a),setSize:h.bind(a._setSize,a),getDataByUuid:function(b){return a.getUploads({uuid:b})},isQueued:function(b){b=a.getUploads({id:b}).status;return b===h.status.QUEUED||b===h.status.SUBMITTED||b===h.status.UPLOAD_RETRYING||b===h.status.PAUSED},getIdsInProxyGroup:a._uploadData.getIdsInProxyGroup,getIdsInBatch:a._uploadData.getIdsInBatch};
h.each(this._options.request,function(a,c){d[a]=c});d.customHeaders=this._customHeadersStore;c&&h.each(c,function(a,c){d[a]=c});return new h.UploadHandlerController(d,g)},_fileOrBlobRejected:function(c){this._netUploadedOrQueued--;this._uploadData.setStatus(c,h.status.REJECTED)},_formatSize:function(c){if(0===c)return c+this._options.text.sizeSymbols[0];var g=-1;do c/=1E3,g++;while(999<c);return Math.max(c,.1).toFixed(1)+this._options.text.sizeSymbols[g]},_generateExtraButtonSpecs:function(){var c=
this;this._extraButtonSpecs={};h.each(this._options.extraButtons,function(g,a){g=a.multiple;var f=h.extend({},c._options.validation,!0),d=h.extend({},a);void 0===g&&(g=c._options.multiple);d.validation&&h.extend(f,a.validation,!0);h.extend(d,{multiple:g,validation:f},!0);c._initExtraButton(d)})},_getButton:function(c){var g=this._extraButtonSpecs[c];if(g)return g.element;if(c===this._defaultButtonId)return this._options.button},_getButtonId:function(c){var g;c instanceof h.BlobProxy&&(c=c.referenceBlob);
if(c&&!h.isBlob(c)){if(h.isFile(c))return c.qqButtonId;if("input"===c.tagName.toLowerCase()&&"file"===c.type.toLowerCase())return c.getAttribute(h.UploadButton.BUTTON_ID_ATTR_NAME);c=c.getElementsByTagName("input");h.each(c,function(a,c){if("file"===c.getAttribute("type"))return g=c,!1});if(g)return g.getAttribute(h.UploadButton.BUTTON_ID_ATTR_NAME)}},_getNotFinished:function(){return this._uploadData.retrieve({status:[h.status.UPLOADING,h.status.UPLOAD_RETRYING,h.status.QUEUED,h.status.SUBMITTING,
h.status.SUBMITTED,h.status.PAUSED]}).length},_getValidationBase:function(c){return(c=this._extraButtonSpecs[c])?c.validation:this._options.validation},_getValidationDescriptor:function(c){return c.file instanceof h.BlobProxy?{name:h.getFilename(c.file.referenceBlob),size:c.file.referenceBlob.size}:{name:this.getUploads({id:c.id}).name,size:this.getUploads({id:c.id}).size}},_getValidationDescriptors:function(c){var g=this,a=[];h.each(c,function(c,d){a.push(g._getValidationDescriptor(d))});return a},
_handleCameraAccess:function(){if(this._options.camera.ios&&h.ios()){var c=this._options.camera.button,g=c?this._getButtonId(c):this._defaultButtonId,a=this._options;g&&g!==this._defaultButtonId&&(a=this._extraButtonSpecs[g]);a.multiple=!1;a.validation.acceptFiles=null===a.validation.acceptFiles?"image/*;capture=camera":a.validation.acceptFiles+",image/*;capture=camera";h.each(this._buttons,function(c,d){if(d.getButtonId()===g)return d.setMultiple(a.multiple),d.setAcceptFiles(a.acceptFiles),!1})}},
_handleCheckedCallback:function(c){var g=this,a=c.callback();if(h.isGenericPromise(a))return this.log(c.name+" - waiting for "+c.name+" promise to be fulfilled for "+c.identifier),a.then(function(a){g.log(c.name+" promise success for "+c.identifier);c.onSuccess(a)},function(){c.onFailure?(g.log(c.name+" promise failure for "+c.identifier),c.onFailure()):g.log(c.name+" promise failure for "+c.identifier)});if(!1!==a)c.onSuccess(a);else c.onFailure?(this.log(c.name+" - return value was 'false' for "+
c.identifier+".  Invoking failure callback."),c.onFailure()):this.log(c.name+" - return value was 'false' for "+c.identifier+".  Will not proceed.");return a},_handleNewFile:function(c,g,a){var f=this,d=h.getUniqueId(),b=-1,k=h.getFilename(c);c=c.blob||c;var n=this._customNewFileHandler?this._customNewFileHandler:h.bind(f._handleNewFileGeneric,f);!h.isInput(c)&&0<=c.size&&(b=c.size);n(c,k,d,b,a,g,this._options.request.uuidName,{uploadData:f._uploadData,paramsStore:f._paramsStore,addFileToHandler:function(a,
b){f._handler.add(a,b);f._netUploadedOrQueued++;f._trackButton(a)}})},_handleNewFileGeneric:function(c,g,a,f,d,b){g=this._uploadData.addFile({uuid:a,name:g,size:f,batchId:b});this._handler.add(g,c);this._trackButton(g);this._netUploadedOrQueued++;d.push({id:g,file:c})},_handlePasteSuccess:function(c,g){var a=c.type.split("/")[1];null==g&&(g=this._options.paste.defaultName);this.addFiles({name:g+("."+a),blob:c})},_handleDeleteSuccess:function(c){if(this.getUploads({id:c}).status!==h.status.DELETED){var g=
this.getName(c);this._netUploadedOrQueued--;this._netUploaded--;this._handler.expunge(c);this._uploadData.setStatus(c,h.status.DELETED);this.log("Delete request for '"+g+"' has succeeded.")}},_handleDeleteFailed:function(c,g){var a=this.getName(c);this._uploadData.setStatus(c,h.status.DELETE_FAILED);this.log("Delete request for '"+a+"' has failed.","error");if(g&&void 0!==g.withCredentials)this._options.callbacks.onError(c,a,"Delete request failed with response code "+g.status,g);else this._options.callbacks.onError(c,
a,"Delete request failed",g)},_initExtraButton:function(c){var g=this._createUploadButton({accept:c.validation.acceptFiles,allowedExtensions:c.validation.allowedExtensions,element:c.element,folders:c.folders,multiple:c.multiple,title:c.fileInputTitle});this._extraButtonSpecs[g.getButtonId()]=c},_initFormSupportAndParams:function(){(this._formSupport=h.FormSupport&&new h.FormSupport(this._options.form,h.bind(this.uploadStoredFiles,this),h.bind(this.log,this)))&&this._formSupport.attachedToForm?(this._paramsStore=
this._createStore(this._options.request.params,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&(this._options.request.endpoint=this._formSupport.newEndpoint)):this._paramsStore=this._createStore(this._options.request.params)},_isDeletePossible:function(){return h.DeleteFileAjaxRequester&&this._options.deleteFile.enabled?this._options.cors.expected?h.supportedFeatures.deleteFileCorsXhr||h.supportedFeatures.deleteFileCorsXdr&&
this._options.cors.allowXdr?!0:!1:!0:!1},_isAllowedExtension:function(c,g){var a=!1;if(!c.length)return!0;h.each(c,function(c,d){if(h.isString(d)&&null!=g.match(new RegExp("\\."+d+"$","i")))return a=!0,!1});return a},_itemError:function(c,g,a){function f(a,b){d=d.replace(a,b)}var d=this._options.messages[c],b=[],k=[].concat(g);c=k[0];a=this._getButtonId(a);a=this._getValidationBase(a);h.each(a.allowedExtensions,function(a,c){h.isString(c)&&b.push(c)});g=b.join(", ").toLowerCase();f("{file}",this._options.formatFileName(c));
f("{extensions}",g);f("{sizeLimit}",this._formatSize(a.sizeLimit));f("{minSizeLimit}",this._formatSize(a.minSizeLimit));a=d.match(/(\{\w+\})/g);null!==a&&h.each(a,function(a,b){f(b,k[a])});this._options.callbacks.onError(null,c,d,void 0);return d},_manualRetry:function(c,g){if(this._onBeforeManualRetry(c))return this._netUploadedOrQueued++,this._uploadData.setStatus(c,h.status.UPLOAD_RETRYING),g?g(c):this._handler.retry(c),!0},_maybeAllComplete:function(c,g){var a=this,f=this._getNotFinished();g===
h.status.UPLOAD_SUCCESSFUL?this._succeededSinceLastAllComplete.push(c):g===h.status.UPLOAD_FAILED&&this._failedSinceLastAllComplete.push(c);0===f&&(this._succeededSinceLastAllComplete.length||this._failedSinceLastAllComplete.length)&&setTimeout(function(){a._onAllComplete(a._succeededSinceLastAllComplete,a._failedSinceLastAllComplete)},0)},_maybeHandleIos8SafariWorkaround:function(){var c=this;if(this._options.workarounds.ios8SafariUploads&&h.ios800()&&h.iosSafari())throw setTimeout(function(){window.alert(c._options.messages.unsupportedBrowserIos8Safari)},
0),new h.Error(this._options.messages.unsupportedBrowserIos8Safari);},_maybeParseAndSendUploadError:function(c,g,a,f){if(!a.success)if(f&&200!==f.status&&!a.error)this._options.callbacks.onError(c,g,"XHR returned response code "+f.status,f);else this._options.callbacks.onError(c,g,a.error?a.error:this._options.text.defaultResponseError,f)},_maybeProcessNextItemAfterOnValidateCallback:function(c,g,a,f,d){var b=this;if(g.length>a)if(c||!this._options.validation.stopOnFirstInvalidFile)setTimeout(function(){var c=
b._getValidationDescriptor(g[a]),k=b._getButtonId(g[a].file);k=b._getButton(k);b._handleCheckedCallback({name:"onValidate",callback:h.bind(b._options.callbacks.onValidate,b,c,k),onSuccess:h.bind(b._onValidateCallbackSuccess,b,g,a,f,d),onFailure:h.bind(b._onValidateCallbackFailure,b,g,a,f,d),identifier:"Item '"+c.name+"', size: "+c.size})},0);else if(!c)for(;a<g.length;a++)b._fileOrBlobRejected(g[a].id)},_onAllComplete:function(c,g){this._totalProgress&&this._totalProgress.onAllComplete(c,g,this._preventRetries);
this._options.callbacks.onAllComplete(h.extend([],c),h.extend([],g));this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[]},_onAutoRetry:function(c,g,a,f,d){var b=this;b._preventRetries[c]=a[b._options.retry.preventRetryResponseProperty];if(b._shouldAutoRetry(c,g,a)){var k=1E3*b._options.retry.autoAttemptDelay;b._maybeParseAndSendUploadError.apply(b,arguments);b._options.callbacks.onAutoRetry(c,g,b._autoRetries[c]);b._onBeforeAutoRetry(c,g);b._uploadData.setStatus(c,h.status.UPLOAD_RETRYING);
b._retryTimeouts[c]=setTimeout(function(){b.log("Starting retry for "+g+"...");d?d(c):b._handler.retry(c)},k);return!0}},_onBeforeAutoRetry:function(c,g){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+g+"...")},_onBeforeManualRetry:function(c){var g=this._currentItemLimit;if(this._preventRetries[c])return this.log("Retries are forbidden for id "+c,"warn"),!1;if(this._handler.isValid(c)){var a=this.getName(c);if(!1===this._options.callbacks.onManualRetry(c,a))return!1;
if(0<g&&this._netUploadedOrQueued+1>g)return this._itemError("retryFailTooManyItems"),!1;this.log("Retrying upload for '"+a+"' (id: "+c+")...");return!0}this.log("'"+c+"' is not a valid file ID","error");return!1},_onCancel:function(c,g){this._netUploadedOrQueued--;clearTimeout(this._retryTimeouts[c]);g=h.indexOf(this._storedIds,c);!this._options.autoUpload&&0<=g&&this._storedIds.splice(g,1);this._uploadData.setStatus(c,h.status.CANCELED)},_onComplete:function(c,g,a,f){a.success?(a.thumbnailUrl&&
(this._thumbnailUrls[c]=a.thumbnailUrl),this._netUploaded++,this._uploadData.setStatus(c,h.status.UPLOAD_SUCCESSFUL)):(this._netUploadedOrQueued--,this._uploadData.setStatus(c,h.status.UPLOAD_FAILED),!0===a[this._options.retry.preventRetryResponseProperty]&&(this._preventRetries[c]=!0));this._maybeParseAndSendUploadError(c,g,a,f);return a.success?!0:!1},_onDelete:function(c){this._uploadData.setStatus(c,h.status.DELETING)},_onDeleteComplete:function(c,g,a){this.getName(c);a?this._handleDeleteFailed(c,
g):this._handleDeleteSuccess(c)},_onInputChange:function(c){var g;if(h.supportedFeatures.ajaxUploading){for(g=0;g<c.files.length;g++)this._annotateWithButtonId(c.files[g],c);this.addFiles(c.files)}else 0<c.value.length&&this.addFiles(c);h.each(this._buttons,function(a,c){c.reset()})},_onProgress:function(c,g,a,f){this._totalProgress&&this._totalProgress.onIndividualProgress(c,a,f)},_onSubmit:function(c,g){},_onSubmitCallbackSuccess:function(c,g){this._onSubmit.apply(this,arguments);this._uploadData.setStatus(c,
h.status.SUBMITTED);this._onSubmitted.apply(this,arguments);this._options.autoUpload?(this._options.callbacks.onSubmitted.apply(this,arguments),this._uploadFile(c)):(this._storeForLater(c),this._options.callbacks.onSubmitted.apply(this,arguments))},_onSubmitDelete:function(c,g,a){var f=this.getUuid(c),d;g&&(d=h.bind(g,this,c,f,a));if(this._isDeletePossible())return this._handleCheckedCallback({name:"onSubmitDelete",callback:h.bind(this._options.callbacks.onSubmitDelete,this,c),onSuccess:d||h.bind(this._deleteHandler.sendDelete,
this,c,f,a),identifier:c}),!0;this.log("Delete request ignored for ID "+c+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.","warn");return!1},_onSubmitted:function(c){},_onTotalProgress:function(c,g){this._options.callbacks.onTotalProgress(c,g)},_onUploadPrep:function(c){},_onUpload:function(c,g){this._uploadData.setStatus(c,h.status.UPLOADING)},_onUploadChunk:function(c,g){},_onUploadStatusChange:function(c,g,a){a===h.status.PAUSED&&
clearTimeout(this._retryTimeouts[c])},_onValidateBatchCallbackFailure:function(c){var g=this;h.each(c,function(a,c){g._fileOrBlobRejected(c.id)})},_onValidateBatchCallbackSuccess:function(c,g,a,f,d){var b=this._currentItemLimit,k=this._netUploadedOrQueued;0===b||k<=b?0<g.length?this._handleCheckedCallback({name:"onValidate",callback:h.bind(this._options.callbacks.onValidate,this,c[0],d),onSuccess:h.bind(this._onValidateCallbackSuccess,this,g,0,a,f),onFailure:h.bind(this._onValidateCallbackFailure,
this,g,0,a,f),identifier:"Item '"+g[0].file.name+"', size: "+g[0].file.size}):this._itemError("noFilesError"):(this._onValidateBatchCallbackFailure(g),c=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,k).replace(/\{itemLimit\}/g,b),this._batchError(c))},_onValidateCallbackFailure:function(c,g,a,f){var d=g+1;this._fileOrBlobRejected(c[g].id,c[g].file.name);this._maybeProcessNextItemAfterOnValidateCallback(!1,c,d,a,f)},_onValidateCallbackSuccess:function(c,g,a,f){var d=this,b=g+1,h=
this._getValidationDescriptor(c[g]);this._validateFileOrBlobData(c[g],h).then(function(){d._upload(c[g].id,a,f);d._maybeProcessNextItemAfterOnValidateCallback(!0,c,b,a,f)},function(){d._maybeProcessNextItemAfterOnValidateCallback(!1,c,b,a,f)})},_prepareItemsForUpload:function(c,g,a){if(0===c.length)this._itemError("noFilesError");else{var f=this._getValidationDescriptors(c),d=this._getButtonId(c[0].file);d=this._getButton(d);this._handleCheckedCallback({name:"onValidateBatch",callback:h.bind(this._options.callbacks.onValidateBatch,
this,f,d),onSuccess:h.bind(this._onValidateBatchCallbackSuccess,this,f,c,g,a,d),onFailure:h.bind(this._onValidateBatchCallbackFailure,this,c),identifier:"batch validation"})}},_preventLeaveInProgress:function(){var c=this;this._disposeSupport.attach(window,"beforeunload",function(g){if(c.getInProgress())return g=g||window.event,g.returnValue=c._options.messages.onLeave})},_refreshSessionData:function(){var c=this,g=this._options.session;h.Session&&null!=this._options.session.endpoint&&(this._session||
(h.extend(g,{cors:this._options.cors}),g.log=h.bind(this.log,this),g.addFileRecord=h.bind(this._addCannedFile,this),this._session=new h.Session(g)),setTimeout(function(){c._session.refresh().then(function(a,f){c._sessionRequestComplete();c._options.callbacks.onSessionRequestComplete(a,!0,f)},function(a,f){c._options.callbacks.onSessionRequestComplete(a,!1,f)})},0))},_sessionRequestComplete:function(){},_setSize:function(c,g){this._uploadData.updateSize(c,g);this._totalProgress&&this._totalProgress.onNewSize(c)},
_shouldAutoRetry:function(c,g,a){g=this._uploadData.retrieve({id:c});return!this._preventRetries[c]&&this._options.retry.enableAuto&&g.status!==h.status.PAUSED&&(void 0===this._autoRetries[c]&&(this._autoRetries[c]=0),this._autoRetries[c]<this._options.retry.maxAutoAttempts)?(this._autoRetries[c]+=1,!0):!1},_storeForLater:function(c){this._storedIds.push(c)},_trackButton:function(c){var g;(g=h.supportedFeatures.ajaxUploading?this._handler.getFile(c).qqButtonId:this._getButtonId(this._handler.getInput(c)))&&
(this._buttonIdsForFileIds[c]=g)},_updateFormSupportAndParams:function(c){this._options.form.element=c;(this._formSupport=h.FormSupport&&new h.FormSupport(this._options.form,h.bind(this.uploadStoredFiles,this),h.bind(this.log,this)))&&this._formSupport.attachedToForm&&(this._paramsStore.addReadOnly(null,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&this.setEndpoint(this._formSupport.newEndpoint))},_upload:function(c,
g,a){var f=this.getName(c);g&&this.setParams(g,c);a&&this.setEndpoint(a,c);this._handleCheckedCallback({name:"onSubmit",callback:h.bind(this._options.callbacks.onSubmit,this,c,f),onSuccess:h.bind(this._onSubmitCallbackSuccess,this,c,f),onFailure:h.bind(this._fileOrBlobRejected,this,c,f),identifier:c})},_uploadFile:function(c){this._handler.upload(c)||this._uploadData.setStatus(c,h.status.QUEUED)},_uploadStoredFiles:function(){for(var c,g=this;this._storedIds.length;)c=this._storedIds.shift(),this._uploadFile(c);
if(c=this.getUploads({status:h.status.SUBMITTING}).length)h.log("Still waiting for "+c+" files to clear submit queue. Will re-parse stored IDs array shortly."),setTimeout(function(){g._uploadStoredFiles()},1E3)},_validateFileOrBlobData:function(c,g){var a=this;var f=c.file instanceof h.BlobProxy?c.file.referenceBlob:c.file;var d=g.name;g=g.size;var b=this._getButtonId(c.file);b=this._getValidationBase(b);var k=new h.Promise;k.then(function(){},function(){a._fileOrBlobRejected(c.id,d)});if(h.isFileOrInput(f)&&
!this._isAllowedExtension(b.allowedExtensions,d))return this._itemError("typeError",d,f),k.failure();if(!this._options.validation.allowEmpty&&0===g)return this._itemError("emptyError",d,f),k.failure();if(0<g&&b.sizeLimit&&g>b.sizeLimit)return this._itemError("sizeError",d,f),k.failure();if(0<g&&g<b.minSizeLimit)return this._itemError("minSizeError",d,f),k.failure();h.ImageValidation&&h.supportedFeatures.imagePreviews&&h.isFile(f)?(new h.ImageValidation(f,h.bind(a.log,a))).validate(b.image).then(k.success,
function(b){a._itemError(b+"ImageError",d,f);k.failure()}):k.success();return k},_wrapCallbacks:function(){var c;var g=this;var a=function(a,c,b){try{return c.apply(g,b)}catch(l){c=l.message||l.toString(),g.log("Caught exception in '"+a+"' callback - "+c,"error")}};for(c in this._options.callbacks)(function(){var f=c;var d=g._options.callbacks[f];g._options.callbacks[f]=function(){return a(f,d,arguments)}})()}}})();(function(){h.FineUploaderBasic=function(c){var g=this;this._options={debug:!1,button:null,
multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{customHeaders:{},endpoint:"/server/upload",filenameParam:"qqfilename",forceMultipart:!0,inputName:"qqfile",method:"POST",params:{},paramsInBody:!0,totalFileSizeName:"qqtotalfilesize",uuidName:"qquuid"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0},allowEmpty:!1},callbacks:{onSubmit:function(a,c){},
onSubmitted:function(a,c){},onComplete:function(a,c,d,b){},onAllComplete:function(a,c){},onCancel:function(a,c){},onUpload:function(a,c){},onUploadChunk:function(a,c,d){},onUploadChunkSuccess:function(a,c,d,b){},onResume:function(a,c,d){},onProgress:function(a,c,d,b){},onTotalProgress:function(a,c){},onError:function(a,c,d,b){},onAutoRetry:function(a,c,d){},onManualRetry:function(a,c){},onValidateBatch:function(a){},onValidate:function(a){},onSubmitDelete:function(a){},onDelete:function(a){},onDeleteComplete:function(a,
c,d){},onPasteReceived:function(a){},onStatusChange:function(a,c,d){},onSessionRequestComplete:function(a,c,d){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",
maxHeightImageError:"Image is too tall.",maxWidthImageError:"Image is too wide.",minHeightImageError:"Image is not tall enough.",minWidthImageError:"Image is not wide enough.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be canceled.",unsupportedBrowserIos8Safari:"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues."},
retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,concurrent:{enabled:!1},mandatory:!1,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"},partSize:2E6,success:{endpoint:null}},resume:{enabled:!1,recordsExpireIn:7,paramNames:{resuming:"qqresume"}},
formatFileName:function(a){return a},text:{defaultResponseError:"Upload failure reason unknown",fileInputTitle:"file input",sizeSymbols:"kB MB GB TB PB EB".split(" ")},deleteFile:{enabled:!1,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1,allowXdr:!1},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:!1,button:null},extraButtons:[],session:{endpoint:null,params:{},customHeaders:{},refreshOnReset:!0},
form:{element:"qq-form",autoUpload:!1,interceptSubmit:!0},scaling:{customResizer:null,sendOriginal:!0,orient:!0,defaultType:null,defaultQuality:80,failureText:"Failed to scale",includeExif:!1,sizes:[]},workarounds:{iosEmptyVideos:!0,ios8SafariUploads:!0,ios8BrowserCrash:!1}};h.extend(this._options,c,!0);this._buttons=[];this._extraButtonSpecs={};this._buttonIdsForFileIds=[];this._wrapCallbacks();this._disposeSupport=new h.DisposeSupport;this._storedIds=[];this._autoRetries=[];this._retryTimeouts=
[];this._preventRetries=[];this._thumbnailUrls=[];this._netUploaded=this._netUploadedOrQueued=0;this._uploadData=this._createUploadDataTracker();this._initFormSupportAndParams();this._customHeadersStore=this._createStore(this._options.request.customHeaders);this._deleteFileCustomHeadersStore=this._createStore(this._options.deleteFile.customHeaders);this._deleteFileParamsStore=this._createStore(this._options.deleteFile.params);this._endpointStore=this._createStore(this._options.request.endpoint);this._deleteFileEndpointStore=
this._createStore(this._options.deleteFile.endpoint);this._handler=this._createUploadHandler();this._deleteHandler=h.DeleteFileAjaxRequester&&this._createDeleteHandler();this._options.button&&(this._defaultButtonId=this._createUploadButton({element:this._options.button,title:this._options.text.fileInputTitle}).getButtonId());this._generateExtraButtonSpecs();this._handleCameraAccess();this._options.paste.targetElement&&(h.PasteSupport?this._pasteHandler=this._createPasteHandler():this.log("Paste support module not found",
"error"));this._preventLeaveInProgress();this._imageGenerator=h.ImageGenerator&&new h.ImageGenerator(h.bind(this.log,this));this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[];this._scaler=h.Scaler&&new h.Scaler(this._options.scaling,h.bind(this.log,this))||{};this._scaler.enabled&&(this._customNewFileHandler=h.bind(this._scaler.handleNewFile,this._scaler));h.TotalProgress&&h.supportedFeatures.progressBar&&(this._totalProgress=new h.TotalProgress(h.bind(this._onTotalProgress,
this),function(a){return(a=g._uploadData.retrieve({id:a}))&&a.size||0}));this._currentItemLimit=this._options.validation.itemLimit};h.FineUploaderBasic.prototype=h.basePublicApi;h.extend(h.FineUploaderBasic.prototype,h.basePrivateApi)})();h.AjaxRequester=function(c){function g(a){var b=!1;h.each(b,function(a,c){if(0>h.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],c))return b=!0,!1});return b}function a(a){return A.cors.expected&&void 0===a.withCredentials}function f(){if(window.XMLHttpRequest||
window.ActiveXObject){var a=h.createXhrInstance();void 0===a.withCredentials&&(a=new XDomainRequest,a.onload=function(){},a.onerror=function(){},a.ontimeout=function(){},a.onprogress=function(){})}return a}function d(a,b){var c=y[a].xhr;c||(c=b?b:A.cors.expected?f():h.createXhrInstance(),y[a].xhr=c);return c}function b(a){var b=h.indexOf(q,a),c=A.maxConnections;delete y[a];q.splice(b,1);q.length>=c&&b<c&&(a=q[c-1],p(a))}function k(c,f){var g=d(c),e=A.method;f=!0===f;b(c);f?C(e+" request for "+c+" has failed",
"error"):a(g)||0<=h.indexOf(A.successfulResponseCodes[A.method],g.status)||(f=!0,C(e+" request for "+c+" has failed - response code "+g.status,"error"));A.onComplete(c,g,f)}function n(a){var b=y[a].additionalParams,c=A.mandatedParams,e;A.paramsStore.get&&(e=A.paramsStore.get(a));b&&h.each(b,function(a,b){e=e||{};e[a]=b});c&&h.each(c,function(a,b){e=e||{};e[a]=b});return e}function p(b,c){c=d(b,c);var f=A.method,e=n(b),g=y[b].payload;A.onSend(b);var k=y[b].additionalQueryParams;var l=A.endpointStore.get(b),
q=y[b].addToPath;void 0!=q&&(l+="/"+q);G&&e&&(l=h.obj2url(e,l));k&&(l=h.obj2url(k,l));k=l;a(c)?(c.onload=z(b),c.onerror=v(b)):c.onreadystatechange=r(b);w(b);c.open(f,k,!0);A.cors.expected&&A.cors.sendCredentials&&!a(c)&&(c.withCredentials=!0);t(b);C("Sending "+f+" request for "+b);g?c.send(g):G||!e?c.send():e&&A.contentType&&0<=A.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")?c.send(h.obj2url(e,"")):e&&A.contentType&&0<=A.contentType.toLowerCase().indexOf("application/json")?
c.send(JSON.stringify(e)):c.send(e);return c}function r(a){return function(){4===d(a).readyState&&k(a)}}function w(a){var b=A.onProgress;b&&(d(a).upload.onprogress=function(c){c.lengthComputable&&b(a,c.loaded,c.total)})}function z(a){return function(){k(a)}}function v(a){return function(){k(a,!0)}}function t(b){var c=d(b),f=A.customHeaders,e=y[b].additionalHeaders||{},k=A.method,l={};a(c)||(A.acceptHeader&&c.setRequestHeader("Accept",A.acceptHeader),!A.allowXRequestedWithAndCacheControl||A.cors.expected&&
0<=h.indexOf(["GET","POST","HEAD"],A.method)&&!g(f)||(c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("Cache-Control","no-cache")),!A.contentType||"POST"!==k&&"PUT"!==k||c.setRequestHeader("Content-Type",A.contentType),h.extend(l,h.isFunction(f)?f(b):f),h.extend(l,e),h.each(l,function(a,b){c.setRequestHeader(a,b)}))}var q=[],y={},A={acceptHeader:null,validMethods:["PATCH","POST","PUT"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},
endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:!0,successfulResponseCodes:{DELETE:[200,202,204],PATCH:[200,201,202,203,204],POST:[200,201,202,203,204],PUT:[200,201,202,203,204],GET:[200]},cors:{expected:!1,sendCredentials:!1},log:function(a,b){},onSend:function(a){},onComplete:function(a,b,c){},onProgress:null};h.extend(A,c);var C=A.log;if(0>h.indexOf(A.validMethods,A.method))throw Error("'"+A.method+"' is not a supported method for this type of request!");var G=
"GET"===A.method||"DELETE"===A.method;h.extend(this,{initTransport:function(a){var b,c,e,d,f,g;return{withPath:function(a){b=a;return this},withParams:function(a){c=a;return this},withQueryParams:function(a){g=a;return this},withHeaders:function(a){e=a;return this},withPayload:function(a){d=a;return this},withCacheBuster:function(){f=!0;return this},send:function(k){f&&0<=h.indexOf(["GET","DELETE"],A.method)&&(c.qqtimestamp=(new Date).getTime());y[a]={addToPath:b,additionalParams:c,additionalQueryParams:g,
additionalHeaders:e,payload:d};k=q.push(a)<=A.maxConnections?p(a,k):void 0;return k}}},canceled:function(a){b(a)}})};h.UploadHandler=function(c){c=c.proxy;var g={},a=c.onCancel,f=c.getName;h.extend(this,{add:function(a,b){g[a]=b;g[a].temp={}},cancel:function(c){var b=this,d=new h.Promise;a(c,f(c),d).then(function(){b.isValid(c)&&(g[c].canceled=!0,b.expunge(c));d.success()})},expunge:function(a){delete g[a]},getThirdPartyFileId:function(a){return g[a].key},isValid:function(a){return void 0!==g[a]},
reset:function(){g={}},_getFileState:function(a){return g[a]},_setThirdPartyFileId:function(a,b){g[a].key=b},_wasCanceled:function(a){return!!g[a].canceled}})};h.UploadHandlerController=function(c,g){var a=this,f=!1,d=!1,b,k={paramsStore:{},maxConnections:3,chunking:{enabled:!1,multiple:{enabled:!1}},log:function(a,b){},onProgress:function(a,b,c,d){},onComplete:function(a,b,c,d){},onCancel:function(a,b){},onUploadPrep:function(a){},onUpload:function(a,b){},onUploadChunk:function(a,b,c){},onUploadChunkSuccess:function(a,
b,c,d){},onAutoRetry:function(a,b,c,d){},onResume:function(a,b,c){},onUuidChanged:function(a,b){},getName:function(a){},setSize:function(a,b){},isQueued:function(a){},getIdsInProxyGroup:function(a){},getIdsInBatch:function(a){}},n={done:function(a,c,d,f){var g=b._getChunkData(a,c);b._getFileState(a).attemptingResume=!1;delete b._getFileState(a).temp.chunkProgress[c];b._getFileState(a).loaded+=g.size;k.onUploadChunkSuccess(a,b._getChunkDataForCallback(g),d,f)},finalize:function(a){var c=k.getSize(a),
d=k.getName(a);z("All chunks have been uploaded for "+a+" - finalizing....");b.finalizeChunks(a).then(function(f,g){z("Finalize successful for "+a);f=w.normalizeResponse(f,!0);k.onProgress(a,d,c,c);b._maybeDeletePersistedChunkData(a);w.cleanup(a,f,g)},function(b,c){b=w.normalizeResponse(b,!1);z("Problem finalizing chunks for file ID "+a+" - "+b.error,"error");b.reset&&n.reset(a);k.onAutoRetry(a,d,b,c)||w.cleanup(a,b,c)})},handleFailure:function(a,c,f,g){var l=k.getName(c);z("Chunked upload request failed for "+
c+", chunk "+a);b.clearCachedChunk(c,a);f=w.normalizeResponse(f,!1);if(f.reset)n.reset(c);else{var q=h.indexOf(b._getFileState(c).chunking.inProgress,a);0<=q&&(b._getFileState(c).chunking.inProgress.splice(q,1),b._getFileState(c).chunking.remaining.unshift(a))}b._getFileState(c).temp.ignoreFailure||(d&&(b._getFileState(c).temp.ignoreFailure=!0,z(h.format("Going to attempt to abort these chunks: {}. These are currently in-progress: {}.",JSON.stringify(Object.keys(b._getXhrs(c))),JSON.stringify(b._getFileState(c).chunking.inProgress))),
h.each(b._getXhrs(c),function(a,b){z(h.format("Attempting to abort file {}.{}. XHR readyState {}. ",c,a,b.readyState));b.abort();b._cancelled=!0}),b.moveInProgressToRemaining(c),p.free(c,!0)),k.onAutoRetry(c,l,f,g)||w.cleanup(c,f,g))},hasMoreParts:function(a){return!!b._getFileState(a).chunking.remaining.length},nextPart:function(a){var c=b._getFileState(a).chunking.remaining.shift();c>=b._getTotalChunks(a)&&(c=null);return c},reset:function(a){z("Server or callback has ordered chunking effort to be restarted on next attempt for item ID "+
a,"error");b._maybeDeletePersistedChunkData(a);b.reevaluateChunking(a);b._getFileState(a).loaded=0},sendNext:function(a){var c=k.getSize(a),f=k.getName(a),g=n.nextPart(a),l=b._getChunkData(a,g),t=b._getFileState(a).attemptingResume,v=b._getFileState(a).chunking.inProgress||[];null==b._getFileState(a).loaded&&(b._getFileState(a).loaded=0);t&&!1===k.onResume(a,f,l)&&(n.reset(a),g=n.nextPart(a),l=b._getChunkData(a,g),t=!1);null==g&&0===v.length?n.finalize(a):(z(h.format("Sending chunked upload request for item {}.{}, bytes {}-{} of {}.",
a,g,l.start+1,l.end,c)),k.onUploadChunk(a,f,b._getChunkDataForCallback(l)),v.push(g),b._getFileState(a).chunking.inProgress=v,d&&p.open(a,g),d&&p.available()&&b._getFileState(a).chunking.remaining.length&&n.sendNext(a),0===l.blob.size?(z(h.format("Chunk {} for file {} will not be uploaded, zero sized chunk.",g,a),"error"),n.handleFailure(g,a,"File is no longer available",null)):b.uploadChunk(a,g,t).then(function(c,d){z("Chunked upload request succeeded for "+a+", chunk "+g);b.clearCachedChunk(a,g);
var e=b._getFileState(a).chunking.inProgress||[];c=w.normalizeResponse(c,!0);var f=h.indexOf(e,g);z(h.format("Chunk {} for file {} uploaded successfully.",g,a));n.done(a,g,c,d);0<=f&&e.splice(f,1);b._maybePersistChunkedState(a);n.hasMoreParts(a)||0!==e.length?n.hasMoreParts(a)?n.sendNext(a):z(h.format("File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}",a,JSON.stringify(e))):n.finalize(a)},function(b,c){n.handleFailure(g,a,b,c)}).done(function(){b.clearXhr(a,
g)}))}},p={_open:[],_openChunks:{},_waiting:[],available:function(){var a=k.maxConnections,b=0,c=0;h.each(p._openChunks,function(a,d){b++;c+=d.length});return a-(p._open.length-b+c)},free:function(a,c){c=!c;var d=h.indexOf(p._waiting,a),f=h.indexOf(p._open,a);delete p._openChunks[a];w.getProxyOrBlob(a)instanceof h.BlobProxy&&(z("Generated blob upload has ended for "+a+", disposing generated blob."),delete b._getFileState(a).file);0<=d?p._waiting.splice(d,1):c&&0<=f&&(p._open.splice(f,1),a=p._waiting.shift(),
0<=a&&(p._open.push(a),w.start(a)))},getWaitingOrConnected:function(){var a=[];h.each(p._openChunks,function(b,c){c&&c.length&&a.push(parseInt(b))});h.each(p._open,function(b,c){p._openChunks[c]||a.push(parseInt(c))});return a=a.concat(p._waiting)},isUsingConnection:function(a){return 0<=h.indexOf(p._open,a)},open:function(a,b){null==b&&p._waiting.push(a);if(p.available()){if(null==b)p._waiting.pop(),p._open.push(a);else{var c=p._openChunks[a]||[];c.push(b);p._openChunks[a]=c}return!0}return!1},reset:function(){p._waiting=
[];p._open=[]}},r={send:function(a,c){b._getFileState(a).loaded=0;z("Sending simple upload request for "+a);b.uploadFile(a).then(function(b,d){z("Simple upload request succeeded for "+a);b=w.normalizeResponse(b,!0);var f=k.getSize(a);k.onProgress(a,c,f,f);w.maybeNewUuid(a,b);w.cleanup(a,b,d)},function(b,d){z("Simple upload request failed for "+a);b=w.normalizeResponse(b,!1);k.onAutoRetry(a,c,b,d)||w.cleanup(a,b,d)})}},w={cancel:function(a){z("Cancelling "+a);k.paramsStore.remove(a);p.free(a)},cleanup:function(a,
c,d){var f=k.getName(a);k.onComplete(a,f,c,d);b._getFileState(a)&&b._clearXhrs&&b._clearXhrs(a);p.free(a)},getProxyOrBlob:function(a){return b.getProxy&&b.getProxy(a)||b.getFile&&b.getFile(a)},initHandler:function(){b=new (g?h[g]:h.traditional)[(h.supportedFeatures.ajaxUploading?"Xhr":"Form")+"UploadHandler"](k,{getDataByUuid:k.getDataByUuid,getName:k.getName,getSize:k.getSize,getUuid:k.getUuid,log:z,onCancel:k.onCancel,onProgress:k.onProgress,onUuidChanged:k.onUuidChanged});b._removeExpiredChunkingRecords&&
b._removeExpiredChunkingRecords()},isDeferredEligibleForUpload:function(a){return k.isQueued(a)},maybeDefer:function(a,c){if(c&&!b.getFile(a)&&c instanceof h.BlobProxy)k.onUploadPrep(a),z("Attempting to generate a blob on-demand for "+a),c.create().then(function(c){z("Generated an on-demand blob for "+a);b.updateBlob(a,c);k.setSize(a,c.size);b.reevaluateChunking(a);w.maybeSendDeferredFiles(a)},function(b){var c={};b&&(c.error=b);z(h.format("Failed to generate blob for ID {}.  Error message: {}.",
a,b),"error");k.onComplete(a,k.getName(a),h.extend(c,v),null);w.maybeSendDeferredFiles(a);p.free(a)});else return w.maybeSendDeferredFiles(a);return!1},maybeSendDeferredFiles:function(a){var c=k.getIdsInProxyGroup(a),d=!1;c&&c.length?(z("Maybe ready to upload proxy group file "+a),h.each(c,function(c,f){if(w.isDeferredEligibleForUpload(f)&&b.getFile(f))d=f===a,w.now(f);else if(w.isDeferredEligibleForUpload(f))return!1})):(d=!0,w.now(a));return d},maybeNewUuid:function(a,b){if(void 0!==b.newUuid)k.onUuidChanged(a,
b.newUuid)},normalizeResponse:function(a,b){var c=a;h.isObject(a)||(c={},h.isString(a)&&!b&&(c.error=a));c.success=b;return c},now:function(c){var d=k.getName(c);if(!a.isValid(c))throw new h.Error(c+" is not a valid file ID to upload!");k.onUpload(c,d);f&&b._shouldChunkThisFile(c)?n.sendNext(c):r.send(c,d)},start:function(a){var b=w.getProxyOrBlob(a);if(b)return w.maybeDefer(a,b);w.now(a);return!0}};h.extend(this,{add:function(a,c){b.add.apply(this,arguments)},upload:function(a){return p.open(a)?
w.start(a):!1},retry:function(c){d&&(b._getFileState(c).temp.ignoreFailure=!1);return p.isUsingConnection(c)?w.start(c):a.upload(c)},cancel:function(a){var c=b.cancel(a);h.isGenericPromise(c)?c.then(function(){w.cancel(a)}):!1!==c&&w.cancel(a)},cancelAll:function(){var b=p.getWaitingOrConnected(),c;if(b.length)for(c=b.length-1;0<=c;c--)a.cancel(b[c]);p.reset()},getFile:function(a){return b.getProxy&&b.getProxy(a)?b.getProxy(a).referenceBlob:b.getFile&&b.getFile(a)},isProxied:function(a){return!(!b.getProxy||
!b.getProxy(a))},getInput:function(a){if(b.getInput)return b.getInput(a)},reset:function(){z("Resetting upload handler");a.cancelAll();p.reset();b.reset()},expunge:function(c){if(a.isValid(c))return b.expunge(c)},isValid:function(a){return b.isValid(a)},getResumableFilesData:function(){return b.getResumableFilesData?b.getResumableFilesData():[]},getThirdPartyFileId:function(c){if(a.isValid(c))return b.getThirdPartyFileId(c)},pause:function(c){return a.isResumable(c)&&b.pause&&a.isValid(c)&&b.pause(c)?
(p.free(c),b.moveInProgressToRemaining(c),!0):!1},isResumable:function(a){return!!b.isResumable&&b.isResumable(a)}});h.extend(k,c);var z=k.log;d=(f=k.chunking.enabled&&h.supportedFeatures.chunking)&&k.chunking.concurrent.enabled;var v=function(){var a={};a[k.preventRetryParam]=!0;return a}();w.initHandler()};h.WindowReceiveMessage=function(c){var g={};h.extend({log:function(a,c){}},c);h.extend(this,{receiveMessage:function(a,c){var d=function(a){c(a.data)};window.postMessage?g[a]=h(window).attach("message",
d):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(a){window.postMessage&&(a=g[a])&&a()}})};h.FormUploadHandler=function(c){function g(a,b){var c=a.id,d=c.split("_")[0],g=z(d);k[g]=b;n[d]=h(a).attach("load",function(){f.getInput(d)&&(v("Received iframe load event for CORS upload request (iframe name "+c+")"),p[c]=setTimeout(function(){var a="No valid message received from loaded iframe for iframe name "+c;v(a,"error");b({error:a})},1E3))});t.receiveMessage(c,
function(a){v("Received the following window message: '"+a+"'");c.split("_");var b=f._parseJsonResponse(a),d=b.uuid;d&&k[d]?(v("Handling response for iframe name "+c),clearTimeout(p[c]),delete p[c],f._detachLoadEvent(c),a=k[d],delete k[d],t.stopReceivingMessages(c),a(b)):d||v("'"+a+"' does not contain a UUID - ignoring.")})}var a=c.options,f=this,d=c.proxy,b=h.getUniqueId(),k={},n={},p={},r=a.isCors,w=a.inputName,z=d.getUuid,v=d.log,t=new h.WindowReceiveMessage({log:v});h.extend(this,new h.UploadHandler(c));
h.override(this,function(a){return{add:function(b,c){a.add(b,{input:c});c.setAttribute("name",w);c.parentNode&&h(c).remove()},expunge:function(b){delete n[b];r&&(clearTimeout(p[b]),delete p[b],t.stopReceivingMessages(b));var c=document.getElementById(f._getIframeName(b));c&&(c.setAttribute("src","javascript:false;"),h(c).remove());a.expunge(b)},isValid:function(b){return a.isValid(b)&&void 0!==f._getFileState(b).input}}});h.extend(this,{getInput:function(a){return f._getFileState(a).input},_attachLoadEvent:function(a,
b){var c;r?g(a,b):n[a.id]=h(a).attach("load",function(){v("Received response for "+a.id);if(a.parentNode){try{if(a.contentDocument&&a.contentDocument.body&&"false"==a.contentDocument.body.innerHTML)return}catch(C){v("Error when attempting to access iframe during handling of upload response ("+C.message+")","error"),c={success:!1}}b(c)}})},_createIframe:function(a){a=f._getIframeName(a);var b=h.toElement("<iframe src='javascript:false;' name='"+a+"' />");b.setAttribute("id",a);b.style.display="none";
document.body.appendChild(b);return b},_detachLoadEvent:function(a){void 0!==n[a]&&(n[a](),delete n[a])},_getIframeName:function(a){return a+"_"+b},_initFormForUpload:function(a){var b=a.endpoint,c=a.params,d=a.paramsInBody,f=a.targetName;a=h.toElement("<form method='"+a.method+"' enctype='multipart/form-data'></form>");var g=b;d?h.obj2Inputs(c,a):g=h.obj2url(c,b);a.setAttribute("action",g);a.setAttribute("target",f);a.style.display="none";document.body.appendChild(a);return a},_parseJsonResponse:function(a){var b=
{};try{b=h.parseJson(a)}catch(A){v("Error when attempting to parse iframe upload response ("+A.message+")","error")}return b}})};h.XhrUploadHandler=function(c){function g(b){h.each(a._getXhrs(b),function(c,d){c=a._getAjaxRequester(b,c);d.onreadystatechange=null;d.upload.onprogress=null;d.abort();c&&c.canceled&&c.canceled(b)})}var a=this,f=c.options.namespace,d=c.proxy,b=c.options.chunking,k=c.options.resume,n=b&&c.options.chunking.enabled&&h.supportedFeatures.chunking,p=k&&c.options.resume.enabled&&
n&&h.supportedFeatures.resume,r=d.getName,w=d.getSize,z=d.getUuid,v=d.getEndpoint,t=d.getDataByUuid,q=d.onUuidChanged,y=d.onProgress,A=d.log;h.extend(this,new h.UploadHandler(c));h.override(this,function(b){return{add:function(c,d){if(h.isFile(d)||h.isBlob(d))b.add(c,{file:d});else if(d instanceof h.BlobProxy)b.add(c,{proxy:d});else throw Error("Passed obj is not a File, Blob, or proxy");a._initTempState(c);p&&a._maybePrepareForResume(c)},expunge:function(c){g(c);a._maybeDeletePersistedChunkData(c);
a._clearXhrs(c);b.expunge(c)}}});h.extend(this,{clearCachedChunk:function(b,c){delete a._getFileState(b).temp.cachedChunks[c]},clearXhr:function(b,c){b=a._getFileState(b).temp;b.xhrs&&delete b.xhrs[c];b.ajaxRequesters&&delete b.ajaxRequesters[c]},finalizeChunks:function(b,c){var d=a._getTotalChunks(b)-1;b=a._getXhr(b,d);return c?(new h.Promise).success(c(b),b):(new h.Promise).success({},b)},getFile:function(b){return a.isValid(b)&&a._getFileState(b).file},getProxy:function(b){return a.isValid(b)&&
a._getFileState(b).proxy},getResumableFilesData:function(){var b=[];a._iterateResumeRecords(function(c,d){a.moveInProgressToRemaining(null,d.chunking.inProgress,d.chunking.remaining);c={name:d.name,remaining:d.chunking.remaining,size:d.size,uuid:d.uuid};d.key&&(c.key=d.key);b.push(c)});return b},isResumable:function(c){return!!b&&a.isValid(c)&&!a._getFileState(c).notResumable},moveInProgressToRemaining:function(b,c,d){c=c||a._getFileState(b).chunking.inProgress;var f=d||a._getFileState(b).chunking.remaining;
c&&(A(h.format("Moving these chunks from in-progress {}, to remaining.",JSON.stringify(c))),c.reverse(),h.each(c,function(a,b){f.unshift(b)}),c.length=0)},pause:function(b){if(a.isValid(b))return A(h.format("Aborting XHR upload for {} '{}' due to pause instruction.",b,r(b))),a._getFileState(b).paused=!0,g(b),!0},reevaluateChunking:function(c){if(b&&a.isValid(c)){var d=a._getFileState(c),f;delete d.chunking;d.chunking={};var g=a._getTotalChunks(c);if(1<g||b.mandatory){d.chunking.enabled=!0;d.chunking.parts=
g;d.chunking.remaining=[];for(f=0;f<g;f++)d.chunking.remaining.push(f);a._initTempState(c)}else d.chunking.enabled=!1}},updateBlob:function(b,c){a.isValid(b)&&(a._getFileState(b).file=c)},_clearXhrs:function(b){var c=a._getFileState(b).temp;h.each(c.ajaxRequesters,function(a){delete c.ajaxRequesters[a]});h.each(c.xhrs,function(a){delete c.xhrs[a]})},_createXhr:function(b,c){return a._registerXhr(b,c,h.createXhrInstance())},_getAjaxRequester:function(b,c){c=null==c?-1:c;return a._getFileState(b).temp.ajaxRequesters[c]},
_getChunkData:function(c,d){var f=b.partSize,g=w(c),k=a.getFile(c),e=f*d;f=e+f>=g?g:e+f;g=a._getTotalChunks(c);c=this._getFileState(c).temp.cachedChunks;k=c[d]||h.sliceBlob(k,e,f);c[d]=k;return{part:d,start:e,end:f,count:g,blob:k,size:f-e}},_getChunkDataForCallback:function(a){return{partIndex:a.part,startByte:a.start+1,endByte:a.end,totalParts:a.count}},_getLocalStorageId:function(a){var c=r(a),d=w(a),g=b.partSize;a=v(a);return h.format("qq{}resume{}-{}-{}-{}-{}",f,"5.0",c,d,g,a)},_getMimeType:function(b){return a.getFile(b).type},
_getPersistableData:function(b){return a._getFileState(b).chunking},_getTotalChunks:function(a){if(b)return a=w(a),Math.ceil(a/b.partSize)},_getXhr:function(b,c){c=null==c?-1:c;return a._getFileState(b).temp.xhrs[c]},_getXhrs:function(b){return a._getFileState(b).temp.xhrs},_iterateResumeRecords:function(a){p&&h.each(localStorage,function(b,c){0===b.indexOf(h.format("qq{}resume",f))&&(c=JSON.parse(c),a(b,c))})},_initTempState:function(b){a._getFileState(b).temp={ajaxRequesters:{},chunkProgress:{},
xhrs:{},cachedChunks:{}}},_markNotResumable:function(b){a._getFileState(b).notResumable=!0},_maybeDeletePersistedChunkData:function(b){return p&&a.isResumable(b)&&(b=a._getLocalStorageId(b))&&localStorage.getItem(b)?(localStorage.removeItem(b),!0):!1},_maybePrepareForResume:function(b){var c=a._getFileState(b);if(p&&void 0===c.key){var d=a._getLocalStorageId(b);if(d=localStorage.getItem(d))d=JSON.parse(d),t(d.uuid)?a._markNotResumable(b):(A(h.format("Identified file with ID {} and name of {} as resumable.",
b,r(b))),q(b,d.uuid),c.key=d.key,c.chunking=d.chunking,c.loaded=d.loaded,c.attemptingResume=!0,a.moveInProgressToRemaining(b))}},_maybePersistChunkedState:function(b){var c=a._getFileState(b);if(p&&a.isResumable(b)){var d=a._getLocalStorageId(b);c={name:r(b),size:w(b),uuid:z(b),key:c.key,chunking:c.chunking,loaded:c.loaded,lastUpdated:Date.now()};try{localStorage.setItem(d,JSON.stringify(c))}catch(F){A(h.format("Unable to save resume data for '{}' due to error: '{}'.",b,F.toString()),"warn")}}},_registerProgressHandler:function(b,
c,d){var f=a._getXhr(b,c),g=r(b),e={simple:function(a,c){var e=w(b);a===c?y(b,g,e,e):y(b,g,a>=e?e-1:a,e)},chunked:function(e,f){var k=a._getFileState(b).temp.chunkProgress,l=a._getFileState(b).loaded,m=w(b),n=l;k[c]=e-(f-d);h.each(k,function(a,b){n+=b});y(b,g,n,m)}};f.upload.onprogress=function(a){if(a.lengthComputable)e[null==d?"simple":"chunked"](a.loaded,a.total)}},_registerXhr:function(b,c,d,f){c=null==c?-1:c;b=a._getFileState(b).temp;b.xhrs=b.xhrs||{};b.ajaxRequesters=b.ajaxRequesters||{};b.xhrs[c]=
d;f&&(b.ajaxRequesters[c]=f);return d},_removeExpiredChunkingRecords:function(){var b=k.recordsExpireIn;a._iterateResumeRecords(function(a,c){c=new Date(c.lastUpdated);c.setDate(c.getDate()+b);c.getTime()<=Date.now()&&(A("Removing expired resume record with key "+a),localStorage.removeItem(a))})},_shouldChunkThisFile:function(b){var c=a._getFileState(b);c.chunking||a.reevaluateChunking(b);return c.chunking.enabled}})};h.DeleteFileAjaxRequester=function(c){var g={method:"DELETE",uuidParamName:"qquuid",
endpointStore:{},maxConnections:3,customHeaders:function(a){return{}},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(a,c){},onDelete:function(a){},onDeleteComplete:function(a,c,b){}};h.extend(g,c);var a=h.extend(this,new h.AjaxRequester({acceptHeader:"application/json",validMethods:["POST","DELETE"],method:g.method,endpointStore:g.endpointStore,paramsStore:g.paramsStore,mandatedParams:"POST"===g.method.toUpperCase()?{_method:"DELETE"}:{},maxConnections:g.maxConnections,customHeaders:function(a){return g.customHeaders.get(a)},
log:g.log,onSend:g.onDelete,onComplete:g.onDeleteComplete,cors:g.cors}));h.extend(this,{sendDelete:function(c,d,b){b=b||{};g.log("Submitting delete file request for "+c);"DELETE"===g.method?a.initTransport(c).withPath(d).withParams(b).send():(b[g.uuidParamName]=d,a.initTransport(c).withParams(b).send())}})};(function(){function c(a,c,d,f){var b=document.createElement("canvas"),k=d.mime||"image/jpeg",l=new h.Promise;g(a,c,b,d,f).then(function(){l.success(b.toDataURL(k,d.quality||.8))});return l}function g(b,
c,d,g,k){var l=b.naturalWidth,n=b.naturalHeight,p=g.width,t=g.height,q=d.getContext("2d"),r=new h.Promise;q.save();if(g.resize)return a({blob:c,canvas:d,image:b,imageHeight:n,imageWidth:l,orientation:g.orientation,resize:g.resize,targetHeight:t,targetWidth:p});if(!h.supportedFeatures.unlimitedScaledImageSize){c=p;var A=t;if(!h.ios())throw new h.Error("Downsampled dimensions can only be reliably calculated for iOS!");c=5241E3<A*c?{newHeight:Math.round(Math.sqrt(A/c*5241E3)),newWidth:Math.round(Math.sqrt(c/
A*5241E3))}:void 0;c&&(h.log(h.format("Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h",p,t,c.newWidth,c.newHeight),"warn"),p=c.newWidth,t=c.newHeight)}f(d,p,t,g.orientation);if(h.ios()){g=b.naturalWidth;c=b.naturalHeight;A=document.createElement("canvas");1048576<g*c?(A.width=A.height=1,c=A.getContext("2d"),c.drawImage(b,-g+1,0),g=0===c.getImageData(0,0,1,1).data[3]):g=!1;g&&(l/=2,n/=2);g=document.createElement("canvas");if(k){k=n;var C=document.createElement("canvas");
c=0;var G=A=k;C.width=1;C.height=k;C=C.getContext("2d");C.drawImage(b,0,0);for(C=C.getImageData(0,0,1,k).data;G>c;){var E=C[4*(G-1)+3];0===E?A=G:c=G;G=A+c>>1}k=G/k;k=0===k?1:k}else k=1;p=Math.ceil(1024*p/l);t=Math.ceil(1024*t/n/k);c=k=0;g.width=g.height=1024;for(A=g.getContext("2d");k<n;){for(C=G=0;G<l;)A.clearRect(0,0,1024,1024),A.drawImage(b,-G,-k),q.drawImage(g,0,0,1024,1024,C,c,p,t),G+=1024,C+=p;k+=1024;c+=t}q.restore()}else q.drawImage(b,0,0,p,t);d.qqImageRendered&&d.qqImageRendered();r.success();
return r}function a(a){var b=a.blob,c=a.image,d=a.imageHeight,g=a.imageWidth,k=a.orientation,z=new h.Promise,v=a.resize,t=document.createElement("canvas"),q=t.getContext("2d"),y=a.canvas,A=a.targetHeight;a=a.targetWidth;f(t,g,d,k);y.height=A;y.width=a;q.drawImage(c,0,0);v({blob:b,height:A,image:c,sourceCanvas:t,targetCanvas:y,width:a}).then(function(){y.qqImageRendered&&y.qqImageRendered();z.success()},z.failure);return z}function f(a,c,d,f){switch(f){case 5:case 6:case 7:case 8:a.width=d;a.height=
c;break;default:a.width=c,a.height=d}a=a.getContext("2d");switch(f){case 2:a.translate(c,0);a.scale(-1,1);break;case 3:a.translate(c,d);a.rotate(Math.PI);break;case 4:a.translate(0,d);a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI);a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI);a.translate(0,-d);break;case 7:a.rotate(.5*Math.PI);a.translate(c,-d);a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI),a.translate(-c,0)}}function d(a,c){var b=this;window.Blob&&a instanceof Blob&&function(){var c=new Image,
d=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!d)throw Error("No createObjectURL function found to create blob url");c.src=d.createObjectURL(a);b.blob=a;a=c}();a.naturalWidth||a.naturalHeight||(a.onload=function(){var a=b.imageLoadListeners;a&&(b.imageLoadListeners=null,setTimeout(function(){for(var b=0,c=a.length;b<c;b++)a[b]()},0))},a.onerror=c,this.imageLoadListeners=[]);this.srcImage=a}d.prototype.render=function(a,
d){d=d||{};var b=this,f=this.srcImage.naturalWidth,k=this.srcImage.naturalHeight,l=d.width,z=d.height,v=d.maxWidth,t=d.maxHeight,q=!this.blob||"image/jpeg"===this.blob.type,y=a.tagName.toLowerCase();if(this.imageLoadListeners)this.imageLoadListeners.push(function(){b.render(a,d)});else{l&&!z?z=k*l/f<<0:z&&!l?l=f*z/k<<0:(l=f,z=k);v&&l>v&&(l=v,z=k*l/f<<0);t&&z>t&&(z=t,l=f*z/k<<0);var A={width:l,height:z};h.each(d,function(a,b){A[a]=b});"img"===y?function(){var d=a.src;c(b.srcImage,b.blob,A,q).then(function(b){a.src=
b;d===a.src&&a.onload()})}():"canvas"===y&&g(this.srcImage,this.blob,a,A,q);if("function"===typeof this.onrender)this.onrender(a)}};h.MegaPixImage=d})();h.ImageGenerator=function(c){function g(a){return"img"===a.tagName.toLowerCase()}function a(a){return"canvas"===a.tagName.toLowerCase()}function f(a){a=a.split("/");a=a[a.length-1].split("?")[0];a=(a=h.getExtension(a))&&a.toLowerCase();switch(a){case "jpeg":case "jpg":return"image/jpeg";case "png":return"image/png";case "bmp":return"image/bmp";case "gif":return"image/gif";
case "tiff":case "tif":return"image/tiff"}}function d(a){var b=document.createElement("a");b.href=a;a=b.protocol;var c=b.port;b=b.hostname;return a.toLowerCase()!==window.location.protocol.toLowerCase()||b.toLowerCase()!==window.location.hostname.toLowerCase()||c!==window.location.port&&!h.ie()?!0:!1}function b(a,b){a.onload=function(){a.onload=null;a.onerror=null;b.success(a)};a.onerror=function(){a.onload=null;a.onerror=null;c("Problem drawing thumbnail!","error");b.failure(a,"Problem drawing thumbnail!")}}
function k(a,b){a.qqImageRendered=function(){b.success(a)}}function n(d,f){var l=g(d)||a(d);g(d)?b(d,f):a(d)?k(d,f):(f.failure(d),c(h.format("Element container of type {} is not supported!",d.tagName),"error"));return l}function p(a,b,d){var f=new h.Promise,g=new h.Identify(a,c),k=d.maxSize,l=null==d.orient?!0:d.orient,p=function(){b.onerror=null;b.onload=null;c("Could not render preview, file may be too large!","error");f.failure(b,"Browser cannot render image!")};g.isPreviewable().then(function(g){var q=
{parse:function(){return(new h.Promise).success()}};q=l?new h.Exif(a,c):q;var t=new h.MegaPixImage(a,p);n(b,f)&&q.parse().then(function(a){t.render(b,{maxWidth:k,maxHeight:k,orientation:a&&a.Orientation,mime:g,resize:d.customResizeFunction})},function(a){c(h.format("EXIF data could not be parsed ({}).  Assuming orientation = 1.",a));t.render(b,{maxWidth:k,maxHeight:k,mime:g,resize:d.customResizeFunction})})},function(){c("Not previewable");f.failure(b,"Not previewable")});return f}function r(a,b,
c,g,k){var l=new Image,q=new h.Promise;n(l,q);d(a)&&(l.crossOrigin="anonymous");l.src=a;q.then(function(){n(b,c);(new h.MegaPixImage(l)).render(b,{maxWidth:g,maxHeight:g,mime:f(a),resize:k})},c.failure)}function w(a,b,c,d){n(b,c);h(b).css({maxWidth:d+"px",maxHeight:d+"px"});b.src=a}h.extend(this,{generate:function(b,f,k){if(h.isString(b)){c("Attempting to update thumbnail based on server response.");var l=k||{};k=new h.Promise;var t=l.scale;l=t?l.maxSize:null;t&&g(f)?(t=document.createElement("canvas"),
t.getContext&&t.getContext("2d")?d(b)&&void 0===(new Image).crossOrigin?w(b,f,k,l):r(b,f,k,l):w(b,f,k,l)):a(f)?r(b,f,k,l):n(f,k)&&(f.src=b);return k}c("Attempting to draw client-side image preview.");return p(b,f,k||{})}});this._testing={};this._testing.isImg=g;this._testing.isCanvas=a;this._testing.isCrossOrigin=d;this._testing.determineMimeOfFileName=f};h.Exif=function(c,g){function a(a){for(var b=0,c=0;0<a.length;)b+=parseInt(a.substring(0,2),16)*Math.pow(2,c),a=a.substring(2,a.length),c+=8;return b}
function f(a,b){var d=a,g=b;void 0===d&&(d=2,g=new h.Promise);h.readBlobToHex(c,d,4).then(function(a){var b=/^ffe([0-9])/.exec(a);b?"1"!==b[1]?(a=parseInt(a.slice(4,8),16),f(d+a+2,g)):g.success(d):g.failure("No EXIF header to be found!")});return g}function d(){var a=new h.Promise;h.readBlobToHex(c,0,6).then(function(b){0!==b.indexOf("ffd8")?a.failure("Not a valid JPEG!"):f().then(function(b){a.success(b)},function(b){a.failure(b)})});return a}function b(a){var b=new h.Promise;h.readBlobToHex(c,a+
10,2).then(function(a){b.success("4949"===a)});return b}function k(b,d){var f=new h.Promise;h.readBlobToHex(c,b+18,2).then(function(b){if(d)return f.success(a(b));f.success(parseInt(b,16))});return f}function n(b,c){var d=h.extend([],p),f={};h.each(c,function(c,g){c=g.slice(0,4);var h=b?a(c):parseInt(c,16);c=d.indexOf(h);if(0<=c){var k=r[h].name;h=r[h].bytes;g=g.slice(16,16+2*h);f[k]=b?a(g):parseInt(g,16);d.splice(c,1)}if(0===d.length)return!1});return f}var p=[274],r={274:{name:"Orientation",bytes:2}};
h.extend(this,{parse:function(){var a=new h.Promise,f=function(b){g(h.format("EXIF header parse failed: '{}' ",b));a.failure(b)};d().then(function(d){g(h.format("Moving forward with EXIF header parsing for '{}'",void 0===c.name?"blob":c.name));b(d).then(function(b){g(h.format("EXIF Byte order is {} endian",b?"little":"big"));k(d,b).then(function(k){g(h.format("Found {} APP1 directory entries",k));h.readBlobToHex(c,d+20,12*k).then(function(c){for(var d=[],f=0;f+24<=c.length;)d.push(c.slice(f,f+24)),
f+=24;c=n(b,d);g("Successfully parsed some EXIF tags");a.success(c)},f)},f)},f)},f);return a}});this._testing={};this._testing.parseLittleEndian=a};h.Identify=function(c,g){function a(a,c){var b=!1;a=[].concat(a);h.each(a,function(a,d){if(0===c.indexOf(d))return b=!0,!1});return b}h.extend(this,{isPreviewable:function(){var f=this,d=new h.Promise,b=!1,k=void 0===c.name?"blob":c.name;g(h.format("Attempting to determine if {} can be rendered in this browser",k));g("First pass: check type attribute of blob object.");
this.isPreviewableSync()?(g("Second pass: check for magic bytes in file header."),h.readBlobToHex(c,0,4).then(function(c){h.each(f.PREVIEWABLE_MIME_TYPES,function(f,g){if(a(g,c)){if("image/tiff"!==f||h.supportedFeatures.tiffPreviews)b=!0,d.success(f);return!1}});g(h.format("'{}' is {} able to be rendered in this browser",k,b?"":"NOT"));b||d.failure()},function(){g("Error reading file w/ name '"+k+"'.  Not able to be rendered in this browser.");d.failure()})):d.failure();return d},isPreviewableSync:function(){var a=
c.type,d=0<=h.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES),a),b=!1,k=void 0===c.name?"blob":c.name;d&&(b="image/tiff"===a?h.supportedFeatures.tiffPreviews:!0);!b&&g(k+" is not previewable in this browser per the blob's type attr");return b}})};h.Identify.prototype.PREVIEWABLE_MIME_TYPES={"image/jpeg":"ffd8ff","image/gif":"474946","image/png":"89504e","image/bmp":"424d","image/tiff":["49492a00","4d4d002a"]};h.ImageValidation=function(c,g){function a(a){var b=!1;h.each(a,function(a,c){if(0<c)return b=
!0,!1});return b}function f(){var a=new h.Promise;(new h.Identify(c,g)).isPreviewable().then(function(){var b=new Image,d=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;d?(b.onerror=function(){g("Cannot determine dimensions for image.  May be too large.","error");a.failure()},b.onload=function(){a.success({width:this.width,height:this.height})},b.src=d.createObjectURL(c)):(g("No createObjectURL function available to generate image URL!",
"error"),a.failure())},a.failure);return a}function d(a,c){var b;h.each(a,function(a,d){if(0<d){var f=/(max|min)(Width|Height)/.exec(a),g=f[2].charAt(0).toLowerCase()+f[2].slice(1);g=c[g];switch(f[1]){case "min":if(g<d)return b=a,!1;break;case "max":if(g>d)return b=a,!1}}});return b}this.validate=function(b){var c=new h.Promise;g("Attempting to validate image.");a(b)?f().then(function(a){(a=d(b,a))?c.failure(a):c.success()},c.success):c.success();return c}};h.Session=function(c){function g(c,d,b,
g){var f=!1;d&&(h.isArray(c)?d=!0:(a.log("Session response is not an array.","error"),d=void 0));d&&h.each(c,function(b,c){if(null==c.uuid)f=!0,a.log(h.format("Session response item {} did not include a valid UUID - ignoring.",b),"error");else if(null==c.name)f=!0,a.log(h.format("Session response item {} did not include a valid name - ignoring.",b),"error");else try{return a.addFileRecord(c),!0}catch(w){f=!0,a.log(w.message,"error")}return!1});g[d&&!f?"success":"failure"](c,b)}var a={endpoint:null,
params:{},customHeaders:{},cors:{},addFileRecord:function(a){},log:function(a,c){}};h.extend(a,c,!0);this.refresh=function(){var c=new h.Promise,d=h.extend({},a);(new h.SessionAjaxRequester(h.extend(d,{onComplete:function(a,d,f){g(a,d,f,c)}}))).queryServer();return c}};h.SessionAjaxRequester=function(c){var g={endpoint:null,customHeaders:{},params:{},cors:{expected:!1,sendCredentials:!1},onComplete:function(a,c,b){},log:function(a,c){}};h.extend(g,c);var a=h.extend(this,new h.AjaxRequester({acceptHeader:"application/json",
validMethods:["GET"],method:"GET",endpointStore:{get:function(){return g.endpoint}},customHeaders:g.customHeaders,log:g.log,onComplete:function(a,c,b){a=null;if(null!=c.responseText)try{a=h.parseJson(c.responseText)}catch(l){g.log("Problem parsing session response: "+l.message,"error"),b=!0}g.onComplete(a,!b,c)},cors:g.cors}));h.extend(this,{queryServer:function(){var c=h.extend({},g.params);g.log("Session query request.");a.initTransport("sessionRefresh").withParams(c).withCacheBuster().send()}})};
h.Scaler=function(c,g){var a=c.customResizer,f=c.sendOriginal,d=c.orient,b=c.defaultType,k=c.defaultQuality/100,n=c.failureText,p=c.includeExif,r=this._getSortedSizes(c.sizes);h.extend(this,{enabled:h.supportedFeatures.scaling&&0<r.length,getFileRecords:function(c,l,v){var t=this,q=[],y=v.blob?v.blob:v;(new h.Identify(y,g)).isPreviewableSync()?(h.each(r,function(c,f){c=t._determineOutputType({defaultType:b,requestedType:f.type,refType:y.type});q.push({uuid:h.getUniqueId(),name:t._getName(l,{name:f.name,
type:c,refType:y.type}),blob:new h.BlobProxy(y,h.bind(t._generateScaledImage,t,{customResizeFunction:a,maxSize:f.maxSize,orient:d,type:c,quality:k,failedText:n,includeExif:p,log:g}))})}),q.push({uuid:c,name:l,size:y.size,blob:f?y:null})):q.push({uuid:c,name:l,size:y.size,blob:y});return q},handleNewFile:function(a,b,c,d,f,g,k,l){var n=[],q=null,p=l.addFileToHandler,t=l.uploadData,e=l.paramsStore,m=h.getUniqueId();h.each(this.getFileRecords(c,b,a),function(a,b){a=b.size;b.blob instanceof h.BlobProxy&&
(a=-1);a=t.addFile({uuid:b.uuid,name:b.name,size:a,batchId:g,proxyGroupId:m});b.blob instanceof h.BlobProxy?n.push(a):q=a;b.blob?(p(a,b.blob),f.push({id:a,file:b.blob})):t.setStatus(a,h.status.REJECTED)});null!==q&&(h.each(n,function(a,b){a={qqparentuuid:t.retrieve({id:q}).uuid,qqparentsize:t.retrieve({id:q}).size};a[k]=t.retrieve({id:b}).uuid;t.setParentId(b,q);e.addReadOnly(b,a)}),n.length&&function(){var a={};a[k]=t.retrieve({id:q}).uuid;e.addReadOnly(q,a)}())}})};h.extend(h.Scaler.prototype,{scaleImage:function(c,
g,a){if(!h.supportedFeatures.scaling)throw new h.Error("Scaling is not supported in this browser!");var f=new h.Promise,d=a.log,b=a.getFile(c),k=(a=a.uploadData.retrieve({id:c}))&&a.name,n=a&&a.uuid,p=new h.Scaler({customResizer:g.customResizer,sendOriginal:!1,orient:g.orient,defaultType:g.type||null,defaultQuality:g.quality,failedToScaleText:"Unable to scale",sizes:[{name:"",maxSize:g.maxSize}]},d);h.Scaler&&h.supportedFeatures.imagePreviews&&b?h.bind(function(){var a=p.getFileRecords(n,k,b)[0];
a&&a.blob instanceof h.BlobProxy?a.blob.create().then(f.success,f.failure):(d(c+" is not a scalable image!","error"),f.failure())},this)():(f.failure(),d("Could not generate requested scaled image for "+c+".  Scaling is either not possible in this browser, or the file could not be located.","error"));return f},_determineOutputType:function(c){var g=c.requestedType,a=c.defaultType;c=c.refType;return a||g?g?0<=h.indexOf(Object.keys(h.Identify.prototype.PREVIEWABLE_MIME_TYPES),g)?"image/tiff"===g?h.supportedFeatures.tiffPreviews?
g:a:g:a:a:"image/jpeg"!==c?"image/png":c},_getName:function(c,g){var a=c.lastIndexOf("."),f=g.type||"image/png",d=g.refType,b=h.getExtension(c),k="";g.name&&g.name.trim().length&&(k=" ("+g.name+")");0<=a?(c=c.substr(0,a),d!==f&&(b=f.split("/")[1]),c+=k+"."+b):c+=k;return c},_getSortedSizes:function(c){c=h.extend([],c);return c.sort(function(c,a){return c.maxSize>a.maxSize?1:c.maxSize<a.maxSize?-1:0})},_generateScaledImage:function(c,g){var a=this,f=c.customResizeFunction,d=c.log,b=c.maxSize,k=c.orient,
n=c.type,p=c.quality,r=c.failedText,w=c.includeExif&&"image/jpeg"===g.type&&"image/jpeg"===n,z=new h.Promise;c=new h.ImageGenerator(d);var v=document.createElement("canvas");d("Attempting to generate scaled version for "+g.name);c.generate(g,v,{maxSize:b,orient:k,customResizeFunction:f}).then(function(){var b=v.toDataURL(n,p),c=function(){d("Success generating scaled version for "+g.name);var a=h.dataUriToBlob(b);z.success(a)};w?a._insertExifHeader(g,b,d).then(function(a){b=a;c()},function(){d("Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.",
"error");c()}):c()},function(){d("Failed attempt to generate scaled version for "+g.name,"error");z.failure(r)});return z},_insertExifHeader:function(c,g,a){var f=new FileReader,d=new h.Promise,b="";f.onload=function(){b=f.result;d.success(h.ExifRestorer.restore(b,g))};f.onerror=function(){a("Problem reading "+c.name+" during attempt to transfer EXIF data to scaled version.","error");d.failure()};f.readAsDataURL(c);return d},_dataUriToBlob:function(c){var g=0<=c.split(",")[0].indexOf("base64")?atob(c.split(",")[1]):
decodeURI(c.split(",")[1]);c=c.split(",")[0].split(":")[1].split(";")[0];var a=new ArrayBuffer(g.length);var f=new Uint8Array(a);h.each(g,function(a,b){f[a]=b.charCodeAt(0)});return this._createBlob(a,c)},_createBlob:function(c,g){var a=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;return(a=a&&new a)?(a.append(c),a.getBlob(g)):new Blob([c],{type:g})}});h.ExifRestorer=function(){return{KEY_STR:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
encode64:function(c){var g="",a=0;do{var f=c[a++];var d=c[a++];var b=c[a++];var h=f>>2;f=(f&3)<<4|d>>4;var k=(d&15)<<2|b>>6;var p=b&63;isNaN(d)?k=p=64:isNaN(b)&&(p=64);g=g+this.KEY_STR.charAt(h)+this.KEY_STR.charAt(f)+this.KEY_STR.charAt(k)+this.KEY_STR.charAt(p)}while(a<c.length);return g},restore:function(c,g){if(!c.match("data:image/jpeg;base64,"))return g;c=this.decode64(c.replace("data:image/jpeg;base64,",""));c=this.slice2Segments(c);g=this.exifManipulation(g,c);return"data:image/jpeg;base64,"+
this.encode64(g)},exifManipulation:function(c,g){g=this.getExifArray(g);c=this.insertExif(c,g);return new Uint8Array(c)},getExifArray:function(c){for(var g,a=0;a<c.length;a++)if(g=c[a],255==g[0]&225==g[1])return g;return[]},insertExif:function(c,g){c=c.replace("data:image/jpeg;base64,","");var a=this.decode64(c),f=a.indexOf(255,3);c=a.slice(0,f);a=a.slice(f);g=c.concat(g);return g=g.concat(a)},slice2Segments:function(c){for(var g=0,a=[];!(255==c[g]&218==c[g+1]);){if(255==c[g]&216==c[g+1])g+=2;else{var f=
g+(256*c[g+2]+c[g+3])+2;g=c.slice(g,f);a.push(g);g=f}if(g>c.length)break}return a},decode64:function(c){var g=0,a=[];if(/[^A-Za-z0-9\+\/\=]/g.exec(c))throw Error("There were invalid base64 characters in the input text.  Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='");c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{var f=this.KEY_STR.indexOf(c.charAt(g++));var d=this.KEY_STR.indexOf(c.charAt(g++));var b=this.KEY_STR.indexOf(c.charAt(g++));var h=this.KEY_STR.indexOf(c.charAt(g++));f=f<<2|d>>
4;d=(d&15)<<4|b>>2;var k=(b&3)<<6|h;a.push(f);64!=b&&a.push(d);64!=h&&a.push(k)}while(g<c.length);return a}}}();h.TotalProgress=function(c,g){var a={},f=0,d=0,b=-1,k=-1,n=function(a,d){a===b&&d===k||c(a,d);b=a;k=d},p=function(a,b){var c=!0;h.each(a,function(a,d){if(0<=h.indexOf(b,d))return c=!1});return c},r=function(b){var c=g(b);0<c&&(w(b,0,c),a[b]={loaded:0,total:c})},w=function(b,c,g){var h=a[b]?a[b].loaded:0;b=a[b]?a[b].total:0;-1===c&&-1===g?(f-=h,d-=b):(c&&(f+=c-h),g&&(d+=g-b));n(f,d)};h.extend(this,
{onAllComplete:function(a,b,c){if(0===b.length||p(b,c))n(d,d),this.reset()},onStatusChange:function(b,c,d){d===h.status.CANCELED||d===h.status.REJECTED?(w(b,-1,-1),delete a[b]):d===h.status.SUBMITTING&&r(b)},onIndividualProgress:function(b,c,d){w(b,c,d);a[b]={loaded:c,total:d}},onNewSize:function(a){r(a)},reset:function(){a={};d=f=0}})};h.PasteSupport=function(c){var g;var a={targetElement:null,callbacks:{log:function(a,c){},pasteReceived:function(a){}}};h.extend(a,c);(function(){g=h(a.targetElement).attach("paste",
function(c){(c=c.clipboardData)&&h.each(c.items,function(c,b){b.type&&0===b.type.indexOf("image/")&&(c=b.getAsFile(),a.callbacks.pasteReceived(c))})})})();h.extend(this,{reset:function(){g&&g()}})};h.FormSupport=function(c,g,a){function f(b,c){if(b.checkValidity&&!b.checkValidity())a("Form did not pass validation checks - will not upload.","error"),c();else return!0}function d(a){var b=a.submit;h(a).attach("submit",function(c){c=c||window.event;c.preventDefault?c.preventDefault():c.returnValue=!1;
f(a,b)&&g()});a.submit=function(){f(a,b)&&g()}}var b=this,k=c.interceptSubmit,n=c.element;h.extend(this,{newEndpoint:null,newAutoUpload:c.autoUpload,attachedToForm:!1,getFormInputsAsObject:function(){return null==n?null:b._form2Obj(n)}});n=function(c){if(c&&(h.isString(c)&&(c=document.getElementById(c)),c)){a("Attaching to form element.");var f=c;f.getAttribute("action")&&(b.newEndpoint=f.getAttribute("action"));k&&d(c)}return c}(n);this.attachedToForm=!!n};h.extend(h.FormSupport.prototype,{_form2Obj:function(c){var g=
{},a=function(a){return 0<=h.indexOf(["checkbox","radio"],a.type.toLowerCase())&&!a.checked?!0:a.disabled&&"hidden"!==a.type.toLowerCase()},f=function(a){var b=null;h.each(h(a).children(),function(a,c){if("option"===c.tagName.toLowerCase()&&c.selected)return b=c.value,!1});return b};h.each(c.elements,function(c,b){if(c=h.isInput(b,!0)||"textarea"===b.tagName.toLowerCase())c=0>h.indexOf(["button","image","reset","submit"],b.type.toLowerCase());c&&!a(b)?g[b.name]=b.value:"select"!==b.tagName.toLowerCase()||
a(b)||(c=f(b),null!==c&&(g[b.name]=c))});return g}});h.CryptoJS=function(c,g){var a={},f=a.lib={},d=f.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;b&&c.mixIn(b);c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&
(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),b=f.WordArray=d.extend({init:function(a,b){a=this.words=a||[];this.sigBytes=b!=g?b:4*a.length},toString:function(a){return(a||k).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;a=a.sigBytes;this.clamp();if(d%4)for(var f=0;f<a;f++)b[d+f>>>2]|=(c[f>>>2]>>>24-f%4*8&255)<<24-(d+f)%4*8;else if(65535<c.length)for(f=0;f<a;f+=4)b[d+f>>>2]=c[f>>>2];else b.push.apply(b,c);this.sigBytes+=
a;return this},clamp:function(){var a=this.words,b=this.sigBytes;a[b>>>2]&=4294967295<<32-b%4*8;a.length=c.ceil(b/4)},clone:function(){var a=d.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var d=[],f=0;f<a;f+=4)d.push(4294967296*c.random()|0);return new b.init(d,a)}}),h=a.enc={},k=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;d<a;d++){var f=b[d>>>2]>>>24-d%4*8&255;c.push((f>>>4).toString(16));c.push((f&15).toString(16))}return c.join("")},
parse:function(a){for(var c=a.length,d=[],f=0;f<c;f+=2)d[f>>>3]|=parseInt(a.substr(f,2),16)<<24-f%8*4;return new b.init(d,c/2)}},p=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;d<a;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-d%4*8&255));return c.join("")},parse:function(a){for(var c=a.length,d=[],f=0;f<c;f++)d[f>>>2]|=(a.charCodeAt(f)&255)<<24-f%4*8;return new b.init(d,c)}},r=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(p.stringify(a)))}catch(t){throw Error("Malformed UTF-8 data");
}},parse:function(a){return p.parse(unescape(encodeURIComponent(a)))}},w=f.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new b.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=r.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var d,f=this._data,g=f.words,h=f.sigBytes,k=this.blockSize,l=h/(4*k);l=a?c.ceil(l):c.max((l|0)-this._minBufferSize,0);a=l*k;h=c.min(4*a,h);if(a){for(d=0;d<a;d+=k)this._doProcessBlock(g,d);d=g.splice(0,a);f.sigBytes-=
h}return new b.init(d,h)},clone:function(){var a=d.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});f.Hasher=w.extend({cfg:d.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){w.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return(new a.init(c)).finalize(b)}},_createHmacHelper:function(a){return function(b,
c){return(new z.HMAC.init(a,c)).finalize(b)}}});var z=a.algo={};return a}(Math);(function(){var c=h.CryptoJS,g=c.lib.WordArray;c.enc.Base64={stringify:function(a){var c=a.words,d=a.sigBytes,b=this._map;a.clamp();a=[];for(var g=0;g<d;g+=3)for(var h=(c[g>>>2]>>>24-g%4*8&255)<<16|(c[g+1>>>2]>>>24-(g+1)%4*8&255)<<8|c[g+2>>>2]>>>24-(g+2)%4*8&255,k=0;4>k&&g+.75*k<d;k++)a.push(b.charAt(h>>>6*(3-k)&63));if(c=b.charAt(64))for(;a.length%4;)a.push(c);return a.join("")},parse:function(a){var c=a.length,d=this._map,
b=d.charAt(64);b&&(b=a.indexOf(b),-1!=b&&(c=b));b=[];for(var h=0,k=0;k<c;k++)if(k%4){var p=d.indexOf(a.charAt(k-1))<<k%4*2,r=d.indexOf(a.charAt(k))>>>6-k%4*2;b[h>>>2]|=(p|r)<<24-h%4*8;h++}return g.create(b,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(){var c=h.CryptoJS,g=c.enc.Utf8;c.algo.HMAC=c.lib.Base.extend({init:function(a,c){a=this._hasher=new a.init;"string"==typeof c&&(c=g.parse(c));var d=a.blockSize,b=4*d;c.sigBytes>b&&(c=a.finalize(c));c.clamp();
a=this._oKey=c.clone();c=this._iKey=c.clone();for(var f=a.words,h=c.words,k=0;k<d;k++)f[k]^=1549556828,h[k]^=909522486;a.sigBytes=c.sigBytes=b;this.reset()},reset:function(){var a=this._hasher;a.reset();a.update(this._iKey)},update:function(a){this._hasher.update(a);return this},finalize:function(a){var c=this._hasher;a=c.finalize(a);c.reset();return c.finalize(this._oKey.clone().concat(a))}})})();(function(){var c=h.CryptoJS,g=c.lib,a=g.WordArray,f=g.Hasher,d=[];g=c.algo.SHA1=f.extend({_doReset:function(){this._hash=
new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,c){for(var b=this._hash.words,f=b[0],g=b[1],h=b[2],k=b[3],l=b[4],t=0;80>t;t++){if(16>t)d[t]=a[c+t]|0;else{var q=d[t-3]^d[t-8]^d[t-14]^d[t-16];d[t]=q<<1|q>>>31}q=(f<<5|f>>>27)+l+d[t];q=20>t?q+((g&h|~g&k)+1518500249):40>t?q+((g^h^k)+1859775393):60>t?q+((g&h|g&k|h&k)-1894007588):q+((g^h^k)-899497514);l=k;k=h;h=g<<30|g>>>2;g=f;f=q}b[0]=b[0]+f|0;b[1]=b[1]+g|0;b[2]=b[2]+h|0;b[3]=b[3]+k|0;b[4]=b[4]+l|0},_doFinalize:function(){var a=
this._data,c=a.words,d=8*this._nDataBytes,f=8*a.sigBytes;c[f>>>5]|=128<<24-f%32;c[(f+64>>>9<<4)+14]=Math.floor(d/4294967296);c[(f+64>>>9<<4)+15]=d;a.sigBytes=4*c.length;this._process();return this._hash},clone:function(){var a=f.clone.call(this);a._hash=this._hash.clone();return a}});c.SHA1=f._createHelper(g);c.HmacSHA1=f._createHmacHelper(g)})();(function(c){var g=h.CryptoJS,a=g.lib,f=a.WordArray,d=a.Hasher;a=g.algo;var b=[],k=[];(function(){function a(a){for(var b=c.sqrt(a),d=2;d<=b;d++)if(!(a%
d))return!1;return!0}function d(a){return 4294967296*(a-(a|0))|0}for(var f=2,g=0;64>g;)a(f)&&(8>g&&(b[g]=d(c.pow(f,.5))),k[g]=d(c.pow(f,1/3)),g++),f++})();var n=[];a=a.SHA256=d.extend({_doReset:function(){this._hash=new f.init(b.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],f=c[1],g=c[2],h=c[3],l=c[4],p=c[5],r=c[6],G=c[7],E=0;64>E;E++){if(16>E)n[E]=a[b+E]|0;else{var F=n[E-15],I=n[E-2];n[E]=((F<<25|F>>>7)^(F<<14|F>>>18)^F>>>3)+n[E-7]+((I<<15|I>>>17)^(I<<13|I>>>19)^I>>>
10)+n[E-16]}F=G+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&p^~l&r)+k[E]+n[E];I=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&f^d&g^f&g);G=r;r=p;p=l;l=h+F|0;h=g;g=f;f=d;d=F+I|0}c[0]=c[0]+d|0;c[1]=c[1]+f|0;c[2]=c[2]+g|0;c[3]=c[3]+h|0;c[4]=c[4]+l|0;c[5]=c[5]+p|0;c[6]=c[6]+r|0;c[7]=c[7]+G|0},_doFinalize:function(){var a=this._data,b=a.words,d=8*this._nDataBytes,f=8*a.sigBytes;b[f>>>5]|=128<<24-f%32;b[(f+64>>>9<<4)+14]=c.floor(d/4294967296);b[(f+64>>>9<<4)+15]=d;a.sigBytes=4*b.length;this._process();
return this._hash},clone:function(){var a=d.clone.call(this);a._hash=this._hash.clone();return a}});g.SHA256=d._createHelper(a);g.HmacSHA256=d._createHmacHelper(a)})(Math);(function(){if("function"==typeof ArrayBuffer){var c=h.CryptoJS.lib.WordArray,g=c.init;(c.init=function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));if(a instanceof Int8Array||a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||
a instanceof Float64Array)a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);if(a instanceof Uint8Array){for(var c=a.byteLength,d=[],b=0;b<c;b++)d[b>>>2]|=a[b]<<24-b%4*8;g.call(this,d,c)}else g.apply(this,arguments)}).prototype=c}})();h.s3=h.s3||{};h.s3.util=h.s3.util||function(){return{ALGORITHM_PARAM_NAME:"x-amz-algorithm",AWS_PARAM_PREFIX:"x-amz-meta-",CREDENTIAL_PARAM_NAME:"x-amz-credential",DATE_PARAM_NAME:"x-amz-date",REDUCED_REDUNDANCY_PARAM_NAME:"x-amz-storage-class",REDUCED_REDUNDANCY_PARAM_VALUE:"REDUCED_REDUNDANCY",
SERVER_SIDE_ENCRYPTION_PARAM_NAME:"x-amz-server-side-encryption",SERVER_SIDE_ENCRYPTION_PARAM_VALUE:"AES256",SESSION_TOKEN_PARAM_NAME:"x-amz-security-token",V4_ALGORITHM_PARAM_VALUE:"AWS4-HMAC-SHA256",V4_SIGNATURE_PARAM_NAME:"x-amz-signature",CASE_SENSITIVE_PARAM_NAMES:["Cache-Control","Content-Disposition","Content-Encoding","Content-MD5"],UNSIGNABLE_REST_HEADER_NAMES:["Cache-Control","Content-Disposition","Content-Encoding","Content-MD5"],UNPREFIXED_PARAM_NAMES:"Cache-Control Content-Disposition Content-Encoding Content-MD5 x-amz-server-side-encryption x-amz-server-side-encryption-aws-kms-key-id x-amz-server-side-encryption-customer-algorithm x-amz-server-side-encryption-customer-key x-amz-server-side-encryption-customer-key-MD5".split(" "),
getBucket:function(c){var g;h.each([/^(?:https?:\/\/)?([a-z0-9.\-_]+)\.s3(?:-[a-z0-9\-]+)?\.amazonaws\.com/i,/^(?:https?:\/\/)?s3(?:-[a-z0-9\-]+)?\.amazonaws\.com\/([a-z0-9.\-_]+)/i,/^(?:https?:\/\/)?([a-z0-9.\-_]+)/i],function(a,f){if(a=f.exec(c))return g=a[1],!1});return g},_getPrefixedParamName:function(c){return 0<=h.indexOf(h.s3.util.UNPREFIXED_PARAM_NAMES,c)?c:h.s3.util.AWS_PARAM_PREFIX+c},getPolicy:function(c){var g={},a=[],f=c.bucket,d=c.date,b=c.clockDrift,k=c.key,n=c.accessKey,p=c.acl,r=
c.type,w=c.expectedStatus,z=c.sessionToken,v=c.params,t=h.s3.util.getSuccessRedirectAbsoluteUrl(c.successRedirectUrl),q=c.minFileSize,y=c.maxFileSize,A=c.reducedRedundancy,C=c.region,G=c.serverSideEncryption;c=c.signatureVersion;g.expiration=h.s3.util.getPolicyExpirationDate(d,b);a.push({acl:p});a.push({bucket:f});r&&a.push({"Content-Type":r});w&&a.push({success_action_status:w.toString()});t&&a.push({success_action_redirect:t});A&&(a.push({}),a[a.length-1][h.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=
h.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE);z&&(a.push({}),a[a.length-1][h.s3.util.SESSION_TOKEN_PARAM_NAME]=z);G&&(a.push({}),a[a.length-1][h.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=h.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE);2===c?a.push({key:k}):4===c&&(a.push({}),a[a.length-1][h.s3.util.ALGORITHM_PARAM_NAME]=h.s3.util.V4_ALGORITHM_PARAM_VALUE,a.push({}),a[a.length-1].key=k,a.push({}),a[a.length-1][h.s3.util.CREDENTIAL_PARAM_NAME]=h.s3.util.getV4CredentialsString({date:d,key:n,region:C}),a.push({}),
a[a.length-1][h.s3.util.DATE_PARAM_NAME]=h.s3.util.getV4PolicyDate(d,b));h.each(v,function(b,c){b=h.s3.util._getPrefixedParamName(b);var d={};0<=h.indexOf(h.s3.util.UNPREFIXED_PARAM_NAMES,b)?d[b]=c:d[b]=encodeURIComponent(c);a.push(d)});g.conditions=a;h.s3.util.enforceSizeLimits(g,q,y);return g},refreshPolicyCredentials:function(c,g){var a=!1;h.each(c.conditions,function(c,d){h.each(d,function(b,c){b===h.s3.util.SESSION_TOKEN_PARAM_NAME&&(d[b]=g,a=!0)})});a||(c.conditions.push({}),c.conditions[c.conditions.length-
1][h.s3.util.SESSION_TOKEN_PARAM_NAME]=g)},generateAwsParams:function(c,g){var a={},f=c.params,d=new h.Promise,b=c.sessionToken,k=c.clockDrift,n=c.type,p=c.key,r=c.accessKey,w=c.acl,z=c.expectedStatus,v=h.s3.util.getSuccessRedirectAbsoluteUrl(c.successRedirectUrl),t=c.reducedRedundancy,q=c.region,y=c.serverSideEncryption,A=c.signatureVersion,C=new Date,G=c.log;c.date=C;var E=h.s3.util.getPolicy(c);a.key=p;n&&(a["Content-Type"]=n);z&&(a.success_action_status=z);v&&(a.success_action_redirect=v);t&&
(a[h.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=h.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE);y&&(a[h.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=h.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE);b&&(a[h.s3.util.SESSION_TOKEN_PARAM_NAME]=b);a.acl=w;h.each(f,function(b,c){b=h.s3.util._getPrefixedParamName(b);0<=h.indexOf(h.s3.util.UNPREFIXED_PARAM_NAMES,b)?a[b]=c:a[b]=encodeURIComponent(c)});2===A?a.AWSAccessKeyId=r:4===A&&(a[h.s3.util.ALGORITHM_PARAM_NAME]=h.s3.util.V4_ALGORITHM_PARAM_VALUE,a[h.s3.util.CREDENTIAL_PARAM_NAME]=
h.s3.util.getV4CredentialsString({date:C,key:r,region:q}),a[h.s3.util.DATE_PARAM_NAME]=h.s3.util.getV4PolicyDate(C,k));g(E).then(function(b,f,e){a.policy=b.policy;2===c.signatureVersion?(a.signature=b.signature,f&&(a.AWSAccessKeyId=f)):4===c.signatureVersion&&(a[h.s3.util.V4_SIGNATURE_PARAM_NAME]=b.signature);e&&(a[h.s3.util.SESSION_TOKEN_PARAM_NAME]=e);d.success(a)},function(a){a=a||"Can't continue further with request to S3 as we did not receive a valid signature and policy from the server.";G("Policy signing failed.  "+
a,"error");d.failure(a)});return d},enforceSizeLimits:function(c,g,a){(0<g||0<a)&&c.conditions.push(["content-length-range",(0>g?0:g).toString(),(0>=a?9007199254740992:a).toString()])},getPolicyExpirationDate:function(c,g){c=new Date(c.getTime()+g);return h.s3.util.getPolicyDate(c,5)},getCredentialsDate:function(c){return c.getUTCFullYear()+""+("0"+(c.getUTCMonth()+1)).slice(-2)+("0"+c.getUTCDate()).slice(-2)},getPolicyDate:function(c,g){g=g||0;var a;c.setMinutes(c.getMinutes()+(g||0));if(Date.prototype.toISOString)return c.toISOString();
g=function(c){a=String(c);1===a.length&&(a="0"+a);return a};return c.getUTCFullYear()+"-"+g(c.getUTCMonth()+1)+"-"+g(c.getUTCDate())+"T"+g(c.getUTCHours())+":"+g(c.getUTCMinutes())+":"+g(c.getUTCSeconds())+"."+String((c.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"},parseIframeResponse:function(c){if(c=/bucket=(.+)&key=(.+)&etag=(.+)/.exec((c.contentDocument||c.contentWindow.document).location.search))return{bucket:c[1],key:c[2],etag:c[3].replace(/%22/g,"")}},getSuccessRedirectAbsoluteUrl:function(c){if(c){var g=
document.createElement("div");h.ie7()?(g.innerHTML="<a href='"+c+"'></a>",g=g.firstChild):(g=document.createElement("a"),g.href=c,g.href=g.href);return g.href}},getV4CredentialsString:function(c){return c.key+"/"+h.s3.util.getCredentialsDate(c.date)+"/"+c.region+"/s3/aws4_request"},getV4PolicyDate:function(c,g){c=new Date(c.getTime()+g);return h.s3.util.getCredentialsDate(c)+"T"+("0"+c.getUTCHours()).slice(-2)+("0"+c.getUTCMinutes()).slice(-2)+("0"+c.getUTCSeconds()).slice(-2)+"Z"},encodeQueryStringParam:function(c){c=
encodeURIComponent(c);c=c.replace(/[!'()]/g,escape);c=c.replace(/\*/g,"%2A");return c.replace(/%20/g,"+")},uriEscape:function(c){c=encodeURIComponent(c);c=c.replace(/[^A-Za-z0-9_.~\-%]+/g,escape);return c=c.replace(/[*]/g,function(c){return"%"+c.charCodeAt(0).toString(16).toUpperCase()})},uriEscapePath:function(c){var g=[];h.each(c.split("/"),function(a,c){g.push(h.s3.util.uriEscape(c))});return g.join("/")}}}();(function(){h.nonTraditionalBasePublicApi={setUploadSuccessParams:function(c,g){this._uploadSuccessParamsStore.set(c,
g)},setUploadSuccessEndpoint:function(c,g){this._uploadSuccessEndpointStore.set(c,g)}};h.nonTraditionalBasePrivateApi={_onComplete:function(c,g,a,f){var d=a.success?!0:!1,b=this,k=arguments,n=this._uploadSuccessEndpointStore.get(c),p=this._options.uploadSuccess.customHeaders,r=this._options.uploadSuccess.method,w=this._options.cors,z=new h.Promise,v=this._uploadSuccessParamsStore.get(c),t=this._paramsStore.get(c),q=function(d){delete b._failedSuccessRequestCallbacks[c];h.extend(a,d);h.FineUploaderBasic.prototype._onComplete.apply(b,
k);z.success(d)},y=function(d){var l=C;h.extend(a,d);a&&a.reset&&(l=null);l?b._failedSuccessRequestCallbacks[c]=l:delete b._failedSuccessRequestCallbacks[c];b._onAutoRetry(c,g,a,f,l)||(h.FineUploaderBasic.prototype._onComplete.apply(b,k),z.failure(d))};if(d&&n){var A=new h.UploadSuccessAjaxRequester({endpoint:n,method:r,customHeaders:p,cors:w,log:h.bind(this.log,this)});h.extend(v,b._getEndpointSpecificParams(c,a,f),!0);t&&h.extend(v,t,!0);var C=h.bind(function(){A.sendSuccessRequest(c,v).then(q,
y)},b);C();return z}return h.FineUploaderBasic.prototype._onComplete.apply(this,arguments)},_manualRetry:function(c){return h.FineUploaderBasic.prototype._manualRetry.call(this,c,this._failedSuccessRequestCallbacks[c])}}})();(function(){h.s3.FineUploaderBasic=function(c){var g={request:{accessKey:null,clockDrift:0},objectProperties:{acl:"private",bucket:h.bind(function(a){return h.s3.util.getBucket(this.getEndpoint(a))},this),host:h.bind(function(a){return/(?:http|https):\/\/(.+)(?:\/.+)?/.exec(this._endpointStore.get(a))[1]},
this),key:"uuid",reducedRedundancy:!1,region:"us-east-1",serverSideEncryption:!1},credentials:{accessKey:null,secretKey:null,expiration:null,sessionToken:null},signature:{customHeaders:{},endpoint:null,version:2},uploadSuccess:{endpoint:null,method:"POST",params:{},customHeaders:{}},iframeSupport:{localBlankPagePath:null},chunking:{partSize:5242880},cors:{allowXdr:!0},callbacks:{onCredentialsExpired:function(){}}};h.extend(g,c,!0);this.setCredentials(g.credentials,!0)||(this._currentCredentials.accessKey=
g.request.accessKey);this._aclStore=this._createStore(g.objectProperties.acl);h.FineUploaderBasic.call(this,g);this._uploadSuccessParamsStore=this._createStore(this._options.uploadSuccess.params);this._uploadSuccessEndpointStore=this._createStore(this._options.uploadSuccess.endpoint);this._failedSuccessRequestCallbacks={};this._cannedKeys={};this._cannedBuckets={};this._buckets={};this._hosts={}};h.extend(h.s3.FineUploaderBasic.prototype,h.basePublicApi);h.extend(h.s3.FineUploaderBasic.prototype,
h.basePrivateApi);h.extend(h.s3.FineUploaderBasic.prototype,h.nonTraditionalBasePublicApi);h.extend(h.s3.FineUploaderBasic.prototype,h.nonTraditionalBasePrivateApi);h.extend(h.s3.FineUploaderBasic.prototype,{getBucket:function(c){return null==this._cannedBuckets[c]?this._buckets[c]:this._cannedBuckets[c]},getKey:function(c){return null==this._cannedKeys[c]?this._handler.getThirdPartyFileId(c):this._cannedKeys[c]},reset:function(){h.FineUploaderBasic.prototype.reset.call(this);this._failedSuccessRequestCallbacks=
[];this._buckets={};this._hosts={}},setCredentials:function(c,g){if(c&&c.secretKey){if(c.accessKey)if(c.expiration)this._currentCredentials=h.extend({},c),h.isString(c.expiration)&&(this._currentCredentials.expiration=new Date(c.expiration));else throw new h.Error("Invalid credentials: no expiration");else throw new h.Error("Invalid credentials: no accessKey");return!0}if(g)this._currentCredentials={};else throw new h.Error("Invalid credentials parameter!");},setAcl:function(c,g){this._aclStore.set(c,
g)},_createUploadHandler:function(){var c=this,g={aclStore:this._aclStore,getBucket:h.bind(this._determineBucket,this),getHost:h.bind(this._determineHost,this),getKeyName:h.bind(this._determineKeyName,this),iframeSupport:this._options.iframeSupport,objectProperties:this._options.objectProperties,signature:this._options.signature,clockDrift:this._options.request.clockDrift,validation:{minSizeLimit:this._options.validation.minSizeLimit,maxSizeLimit:this._options.validation.sizeLimit}};h.override(this._endpointStore,
function(a){return{get:function(c){c=a.get(c);return 0>c.indexOf("http")?"http://"+c:c}}});h.override(this._paramsStore,function(a){return{get:function(c){c=a.get(c);var d={};h.each(c,function(a,c){0>h.indexOf(h.s3.util.CASE_SENSITIVE_PARAM_NAMES,a)&&(a=a.toLowerCase());d[a]=h.isFunction(c)?c():c});return d}}});g.signature.credentialsProvider={get:function(){return c._currentCredentials},onExpired:function(){var a=new h.Promise,f=c._options.callbacks.onCredentialsExpired();h.isGenericPromise(f)?f.then(function(d){try{c.setCredentials(d),
a.success()}catch(b){c.log("Invalid credentials returned from onCredentialsExpired callback! ("+b.message+")","error"),a.failure("onCredentialsExpired did not return valid credentials.")}},function(d){c.log("onCredentialsExpired callback indicated failure! ("+d+")","error");a.failure("onCredentialsExpired callback failed.")}):(c.log("onCredentialsExpired callback did not return a promise!","error"),a.failure("Unexpected return value for onCredentialsExpired."));return a}};return h.FineUploaderBasic.prototype._createUploadHandler.call(this,
g,"s3")},_determineObjectPropertyValue:function(c,g){var a=this._options.objectProperties[g],f=new h.Promise,d=this;h.isFunction(a)?(a=a(c),h.isGenericPromise(a)?f=a:f.success(a)):h.isString(a)&&f.success(a);f.then(function(a){d["_"+g+"s"][c]=a},function(a){h.log("Problem determining "+g+" for ID "+c+" ("+a+")","error")});return f},_determineBucket:function(c){return this._determineObjectPropertyValue(c,"bucket")},_determineHost:function(c){return this._determineObjectPropertyValue(c,"host")},_determineKeyName:function(c,
g){var a=new h.Promise,f=this._options.objectProperties.key,d=h.getExtension(g),b=a.failure,k=function(b,c){void 0!==c&&(b+="."+c);a.success(b)};switch(f){case "uuid":k(this.getUuid(c),d);break;case "filename":k(g);break;default:h.isFunction(f)?this._handleKeynameFunction(f,c,k,b):(this.log(f+" is not a valid value for the s3.keyname option!","error"),b())}return a},_handleKeynameFunction:function(c,g,a,f){var d=this,b=function(b){a(b)},k=function(a){d.log(h.format("Failed to retrieve key name for {}.  Reason: {}",
g,a||"null"),"error");f(a)};c=c.call(this,g);h.isGenericPromise(c)?c.then(b,k):null==c?k():a(c)},_getEndpointSpecificParams:function(c,g,a){c={key:this.getKey(c),uuid:this.getUuid(c),name:this.getName(c),bucket:this.getBucket(c)};a&&a.getResponseHeader("ETag")?c.etag=a.getResponseHeader("ETag"):g.etag&&(c.etag=g.etag);return c},_onSubmitDelete:function(c,g){var a={key:this.getKey(c),bucket:this.getBucket(c)};return h.FineUploaderBasic.prototype._onSubmitDelete.call(this,c,g,a)},_addCannedFile:function(c){if(null==
c.s3Key)throw new h.Error("Did not find s3Key property in server session response.  This is required!");var g=h.FineUploaderBasic.prototype._addCannedFile.apply(this,arguments);this._cannedKeys[g]=c.s3Key;this._cannedBuckets[g]=c.s3Bucket;return g}})})();window.Uint8ClampedArray||(window.Uint8ClampedArray=function(){});h.s3.RequestSigner=function(c){function g(a,b,c){var f=new h.Promise,g="POST",l=[],n="",q=new Date,t,v,e=function(a){var c,d=[];h.each(a.headers,function(a){l.push(a)});l.sort();h.each(l,
function(b,e){0>h.indexOf(h.s3.util.UNSIGNABLE_REST_HEADER_NAMES,e)?n+=e.toLowerCase()+":"+a.headers[e].trim()+"\n":"Content-MD5"===e?c=a.headers[e]:d.unshift(b)});h.each(d,function(a,b){l.splice(b,1)});t={bucket:a.bucket,contentMd5:c,contentType:a.contentType,date:q,drift:k.signatureSpec.drift,endOfUrl:m,hashedContent:a.hashedContent,headerNames:l,headersStr:n,method:g};v=2===b?p.getStringToSign(t):r.getStringToSign(t);return{date:q,endOfUrl:m,signedHeaders:4===b?r.getSignedHeaders(t.headerNames):
null,toSign:4===b?v.hashed:v,toSignRaw:4===b?v.raw:v}};switch(c.type){case d.REQUEST_TYPE.MULTIPART_ABORT:g="DELETE";var m=h.format("uploadId={}",c.uploadId);break;case d.REQUEST_TYPE.MULTIPART_INITIATE:m="uploads";break;case d.REQUEST_TYPE.MULTIPART_COMPLETE:m=h.format("uploadId={}",c.uploadId);break;case d.REQUEST_TYPE.MULTIPART_UPLOAD:g="PUT",m=h.format("partNumber={}&uploadId={}",c.partNum,c.uploadId)}m=c.key+"?"+m;4===b?r.getEncodedHashedPayload(c.content).then(function(a){c.headers["x-amz-content-sha256"]=
a;c.headers.Host=c.host;c.headers["x-amz-date"]=h.s3.util.getV4PolicyDate(q,k.signatureSpec.drift);c.hashedContent=a;f.success(e(c))},function(a){f.failure(a)}):f.success(e(c));return f}function a(a,b,c,d,g){b.signatureConstructor?(g&&(d=b.signatureConstructor.getHeaders(),d[h.s3.util.SESSION_TOKEN_PARAM_NAME]=g,b.signatureConstructor.withHeaders(d)),b.signatureConstructor.getToSign(a).then(function(a){var d=b.signatureConstructor;a=a.stringToSign;4===k.signatureSpec.version?r.signApiRequest(d,a,
c):p.signApiRequest(d,a,c)},function(a){c.failure(a)})):(g&&h.s3.util.refreshPolicyCredentials(b,g),f(b,c,d,g))}function f(a,b,c,d){4===k.signatureSpec.version?r.signPolicy(a,b,c,d):p.signPolicy(a,b,c,d)}var d=this,b={},k={expectingPolicy:!1,method:"POST",signatureSpec:{drift:0,credentialsProvider:{},endpoint:null,customHeaders:{},version:2},maxConnections:3,endpointStore:{},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(a,b){}},n=function(a,b,c){var d=a.getHeaders();d.Authorization=
4===k.signatureSpec.version?h.s3.util.V4_ALGORITHM_PARAM_VALUE+" Credential="+k.signatureSpec.credentialsProvider.get().accessKey+"/"+h.s3.util.getCredentialsDate(a.getRequestDate())+"/"+k.signatureSpec.region+"/s3/aws4_request,SignedHeaders="+a.getSignedHeaders()+",Signature="+b:"AWS "+k.signatureSpec.credentialsProvider.get().accessKey+":"+b;c.success(d,a.getEndOfUrl())},p={getStringToSign:function(a){return h.format("{}\n{}\n{}\n\n{}/{}/{}",a.method,a.contentMd5||"",a.contentType||"",a.headersStr||
"\n",a.bucket,a.endOfUrl)},signApiRequest:function(a,b,c){b=h.CryptoJS.enc.Utf8.parse(b);b=h.CryptoJS.HmacSHA1(b,w.get().secretKey);b=h.CryptoJS.enc.Base64.stringify(b);n(a,b,c)},signPolicy:function(a,b,c,d){a=JSON.stringify(a);a=h.CryptoJS.enc.Utf8.parse(a);a=h.CryptoJS.enc.Base64.stringify(a);var f=h.CryptoJS.HmacSHA1(a,w.get().secretKey);f=h.CryptoJS.enc.Base64.stringify(f);b.success({policy:a,signature:f},c,d)}},r={getCanonicalQueryString:function(a){var b=a.indexOf("?"),c="";if(0<=b){var d={};
a=a.substr(b+1).split("&");h.each(a,function(a,b){a=b.split("=");b=a[1];null==b&&(b="");d[encodeURIComponent(a[0])]=encodeURIComponent(b)});var f=Object.keys(d).sort();f.forEach(function(a,b){c+=a+"="+d[a];b<f.length-1&&(c+="&")})}return c},getCanonicalRequest:function(a){return h.format("{}\n{}\n{}\n{}\n{}\n{}",a.method,r.getCanonicalUri(a.endOfUrl),r.getCanonicalQueryString(a.endOfUrl),a.headersStr||"\n",r.getSignedHeaders(a.headerNames),a.hashedContent)},getCanonicalUri:function(a){var b=a,c=a.indexOf("?");
0<c&&(b=a.substr(0,c));return"/"+b},getEncodedHashedPayload:function(a){var b=new h.Promise;if(h.isBlob(a)){var c=new FileReader;c.onloadend=function(a){a.target.readyState===FileReader.DONE&&(a.target.error?b.failure(a.target.error):(a=h.CryptoJS.lib.WordArray.create(a.target.result),b.success(h.CryptoJS.SHA256(a).toString())))};c.readAsArrayBuffer(a)}else b.success(h.CryptoJS.SHA256(a||"").toString());return b},getScope:function(a,b){return h.s3.util.getCredentialsDate(a)+"/"+b+"/s3/aws4_request"},
getStringToSign:function(a){var b=r.getCanonicalRequest(a),c=h.s3.util.getV4PolicyDate(a.date,a.drift),d=h.CryptoJS.SHA256(b).toString();a=r.getScope(a.date,k.signatureSpec.region);return{hashed:h.format("AWS4-HMAC-SHA256\n{}\n{}\n{}",c,a,d),raw:h.format("AWS4-HMAC-SHA256\n{}\n{}\n{}",c,a,b)}},getSignedHeaders:function(a){var b="";a.forEach(function(c,d){b+=c.toLowerCase();d<a.length-1&&(b+=";")});return b},signApiRequest:function(a,b,c){var d=w.get().secretKey,f=/.+\n.+\n(\d+)\/(.+)\/s3\/.+\n(.+)/.exec(b);
d=h.CryptoJS.HmacSHA256(f[1],"AWS4"+d);f=h.CryptoJS.HmacSHA256(f[2],d);f=h.CryptoJS.HmacSHA256("s3",f);f=h.CryptoJS.HmacSHA256("aws4_request",f);n(a,h.CryptoJS.HmacSHA256(b,f),c)},signPolicy:function(a,b,c,d){var f=JSON.stringify(a);f=h.CryptoJS.enc.Utf8.parse(f);f=h.CryptoJS.enc.Base64.stringify(f);var g=w.get().secretKey,k=function(){var b=null;h.each(a.conditions,function(a,c){if(a=c["x-amz-credential"])return b=a,!1});return b}();k=/.+\/(.+)\/(.+)\/s3\/aws4_request/.exec(k);g=h.CryptoJS.HmacSHA256(k[1],
"AWS4"+g);g=h.CryptoJS.HmacSHA256(k[2],g);g=h.CryptoJS.HmacSHA256("s3",g);g=h.CryptoJS.HmacSHA256("aws4_request",g);b.success({policy:f,signature:h.CryptoJS.HmacSHA256(f,g).toString()},c,d)}};h.extend(k,c,!0);var w=k.signatureSpec.credentialsProvider;var z=h.extend(this,new h.AjaxRequester({acceptHeader:"application/json",method:k.method,contentType:"application/json; charset=utf-8",endpointStore:{get:function(){return k.signatureSpec.endpoint}},paramsStore:k.paramsStore,maxConnections:k.maxConnections,
customHeaders:k.signatureSpec.customHeaders,log:k.log,onComplete:function(a,c,d){c=c.responseText;var f=b[a],g=f.promise;f=f.signatureConstructor;delete b[a];if(c)try{var l=h.parseJson(c)}catch(E){k.log("Error attempting to parse signature response: "+E,"error")}if(l&&l.error){d=!0;var p=l.error}else l&&l.invalid?(d=!0,p="Invalid policy document or request headers!"):l?k.expectingPolicy&&!l.policy?(d=!0,p="Response does not include the base64 encoded policy!"):l.signature||(d=!0,p="Response does not include the signature!"):
(d=!0,p="Received an empty or invalid response from the server!");d?(p&&k.log(p,"error"),g.failure(p)):f?n(f,l.signature,g):g.success(l)},cors:k.cors}));h.extend(this,{getSignature:function(c,d){var f=d,g=d.signatureConstructor,l=new h.Promise,n;4===k.signatureSpec.version&&(n={v4:!0});w.get().secretKey&&h.CryptoJS?w.get().expiration.getTime()>Date.now()?a(c,d,l):w.onExpired().then(function(){a(c,d,l,w.get().accessKey,w.get().sessionToken)},function(a){k.log("Attempt to update expired credentials apparently failed! Unable to sign request.  ",
"error");l.failure("Unable to sign request - expired credentials.")}):(k.log("Submitting S3 signature request for "+c),g?g.getToSign(c).then(function(a){f={headers:a.stringToSignRaw};z.initTransport(c).withParams(f).withQueryParams(n).send()},function(a){k.log("Failed to construct signature. ","error");l.failure("Failed to construct signature.")}):z.initTransport(c).withParams(f).withQueryParams(n).send(),b[c]={promise:l,signatureConstructor:g});return l},constructStringToSign:function(a,b,c,d){var f=
{},l,n,p,q,t;return{withHeaders:function(a){f=a;return this},withUploadId:function(a){l=a;return this},withContent:function(a){n=a;return this},withContentType:function(a){p=a;return this},withPartNum:function(a){q=a;return this},getToSign:function(e){var m=w.get().sessionToken,r=new h.Promise,v=new Date(Date.now()+k.signatureSpec.drift);f["x-amz-date"]=v.toUTCString();m&&(f[h.s3.util.SESSION_TOKEN_PARAM_NAME]=m);g(e,k.signatureSpec.version,{bucket:b,content:n,contentType:p,headers:f,host:c,key:d,
partNum:q,type:a,uploadId:l}).then(function(a){t=a;r.success({headers:function(){p&&(f["Content-Type"]=p);delete f.Host;return f}(),date:t.date,endOfUrl:t.endOfUrl,signedHeaders:t.signedHeaders,stringToSign:t.toSign,stringToSignRaw:t.toSignRaw})},function(a){r.failure(a)});return r},getHeaders:function(){return h.extend({},f)},getEndOfUrl:function(){return t&&t.endOfUrl},getRequestDate:function(){return t&&t.date},getSignedHeaders:function(){return t&&t.signedHeaders}}}})};h.s3.RequestSigner.prototype.REQUEST_TYPE=
{MULTIPART_INITIATE:"multipart_initiate",MULTIPART_COMPLETE:"multipart_complete",MULTIPART_ABORT:"multipart_abort",MULTIPART_UPLOAD:"multipart_upload"};h.UploadSuccessAjaxRequester=function(c){var g=[],a={method:"POST",endpoint:null,maxConnections:3,customHeaders:{},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(a,b){}};h.extend(a,c);var f=h.extend(this,new h.AjaxRequester({acceptHeader:"application/json",method:a.method,endpointStore:{get:function(){return a.endpoint}},paramsStore:a.paramsStore,
maxConnections:a.maxConnections,customHeaders:a.customHeaders,log:a.log,onComplete:function(c,b,f){var d=g[c];b=b.responseText;var k={success:!0},l={success:!1};delete g[c];a.log(h.format("Received the following response body to an upload success request for id {}: {}",c,b));try{var w=h.parseJson(b);f||w&&(w.error||!1===w.success)?(a.log("Upload success request was rejected by the server.","error"),d.failure(h.extend(w,l))):(a.log("Upload success was acknowledged by the server."),d.success(h.extend(w,
k)))}catch(z){f?(a.log(h.format("Your server indicated failure in its upload success request response for id {}!",c),"error"),d.failure(l)):(a.log("Upload success was acknowledged by the server."),d.success(k))}},cors:a.cors}));h.extend(this,{sendSuccessRequest:function(c,b){var d=new h.Promise;a.log("Submitting upload success request/notification for "+c);f.initTransport(c).withParams(b).send();return g[c]=d}})};h.s3.InitiateMultipartAjaxRequester=function(c){function g(a){var b=f.getBucket(a),c=
f.getHost(a),g={},k=new h.Promise,l=f.getKey(a);g["x-amz-acl"]=f.aclStore.get(a);f.reducedRedundancy&&(g[h.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=h.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE);f.serverSideEncryption&&(g[h.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=h.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE);g[h.s3.util.AWS_PARAM_PREFIX+f.filenameParam]=encodeURIComponent(f.getName(a));h.each(f.paramsStore.get(a),function(a,b){0<=h.indexOf(h.s3.util.UNPREFIXED_PARAM_NAMES,a)?g[a]=b:g[h.s3.util.AWS_PARAM_PREFIX+
a]=encodeURIComponent(b)});b=d.constructStringToSign(d.REQUEST_TYPE.MULTIPART_INITIATE,b,c,l).withContentType(f.getContentType(a)).withHeaders(g);d.getSignature(a,{signatureConstructor:b}).then(k.success,k.failure);return k}var a={},f={filenameParam:"qqfilename",method:"POST",endpointStore:null,paramsStore:null,signatureSpec:null,aclStore:null,reducedRedundancy:!1,serverSideEncryption:!1,maxConnections:3,getContentType:function(a){},getBucket:function(a){},getHost:function(a){},getKey:function(a){},
getName:function(a){},log:function(a,b){}};h.extend(f,c);var d=new h.s3.RequestSigner({endpointStore:f.endpointStore,signatureSpec:f.signatureSpec,cors:f.cors,log:f.log});var b=h.extend(this,new h.AjaxRequester({method:f.method,contentType:null,endpointStore:f.endpointStore,maxConnections:f.maxConnections,allowXRequestedWithAndCacheControl:!1,log:f.log,onComplete:function(b,c,d){var g=a[b],k=(new DOMParser).parseFromString(c.responseText,"application/xml"),l;delete a[b];if(d){var n=c.status;d=k.getElementsByTagName("Message");
if(0<d.length)var p=d[0].textContent}else d=k.getElementsByTagName("UploadId"),0<d.length?l=d[0].textContent:p="Upload ID missing from request";void 0===l?(p?f.log(h.format("Specific problem detected initiating multipart upload request for {}: '{}'.",b,p),"error"):f.log(h.format("Unexplained error with initiate multipart upload request for {}.  Status code {}.",b,n),"error"),g.failure("Problem initiating upload request.",c)):(f.log(h.format("Initiate multipart upload request successful for {}.  Upload ID is {}",
b,l)),g.success(l,c))},successfulResponseCodes:{POST:[200]}}));h.extend(this,{send:function(c){var d=new h.Promise;g(c).then(function(g,h){f.log("Submitting S3 initiate multipart upload request for "+c);a[c]=d;b.initTransport(c).withPath(h).withHeaders(g).send()},d.failure);return d}})};h.s3.CompleteMultipartAjaxRequester=function(c){function g(a,c,f){var g=new h.Promise,k=d.getBucket(a),l=d.getHost(a);c=b.constructStringToSign(b.REQUEST_TYPE.MULTIPART_COMPLETE,k,l,d.getKey(a)).withUploadId(c).withContent(f).withContentType("application/xml; charset=UTF-8");
b.getSignature(a,{signatureConstructor:c}).then(g.success,g.failure);return g}function a(a){var b=document.implementation.createDocument(null,"CompleteMultipartUpload",null);a.sort(function(a,b){return a.part-b.part});h.each(a,function(a,c){var d=c.part,f=c.etag;c=b.createElement("Part");a=b.createElement("PartNumber");d=b.createTextNode(d);f=b.createTextNode(f);var g=b.createElement("ETag");g.appendChild(f);a.appendChild(d);c.appendChild(a);c.appendChild(g);h(b).children()[0].appendChild(c)});return(new XMLSerializer).serializeToString(b)}
var f={},d={method:"POST",contentType:"text/xml",endpointStore:null,signatureSpec:null,maxConnections:3,getBucket:function(a){},getHost:function(a){},getKey:function(a){},log:function(a,b){}};h.extend(d,c);var b=new h.s3.RequestSigner({endpointStore:d.endpointStore,signatureSpec:d.signatureSpec,cors:d.cors,log:d.log});var k=h.extend(this,new h.AjaxRequester({method:d.method,contentType:"application/xml; charset=UTF-8",endpointStore:d.endpointStore,maxConnections:d.maxConnections,allowXRequestedWithAndCacheControl:!1,
log:d.log,onComplete:function(a,b,c){var g=f[a],k=new DOMParser,l=d.getBucket(a);d.getKey(a);var n=k.parseFromString(b.responseText,"application/xml");k=n.getElementsByTagName("Bucket");n=n.getElementsByTagName("Key");delete f[a];d.log(h.format("Complete response status {}, body = {}",b.status,b.responseText));c?d.log(h.format("Complete Multipart Upload request for {} failed with status {}.",a,b.status),"error"):k.length&&n.length?k[0].textContent!==l&&(c=!0,d.log(h.format("Wrong bucket in response to Complete Multipart Upload request for {}.",
a),"error")):(c=!0,d.log(h.format("Missing bucket and/or key in response to Complete Multipart Upload request for {}.",a),"error"));c?g.failure("Problem combining the file parts!",b):g.success({},b)},successfulResponseCodes:{POST:[200]}}));h.extend(this,{send:function(b,c,l){var n=new h.Promise,p=a(l);g(b,c,p).then(function(a,c){d.log("Submitting S3 complete multipart upload request for "+b);f[b]=n;delete a["Content-Type"];k.initTransport(b).withPath(c).withHeaders(a).withPayload(p).send()},n.failure);
return n}})};h.s3.AbortMultipartAjaxRequester=function(c){function g(b,c){var d=new h.Promise,g=a.getBucket(b),k=a.getHost(b);c=f.constructStringToSign(f.REQUEST_TYPE.MULTIPART_ABORT,g,k,a.getKey(b)).withUploadId(c);f.getSignature(b,{signatureConstructor:c}).then(d.success,d.failure);return d}var a={method:"DELETE",endpointStore:null,signatureSpec:null,maxConnections:3,getBucket:function(a){},getHost:function(a){},getKey:function(a){},log:function(a,c){}};h.extend(a,c);var f=new h.s3.RequestSigner({endpointStore:a.endpointStore,
signatureSpec:a.signatureSpec,cors:a.cors,log:a.log});var d=h.extend(this,new h.AjaxRequester({validMethods:["DELETE"],method:a.method,contentType:null,endpointStore:a.endpointStore,maxConnections:a.maxConnections,allowXRequestedWithAndCacheControl:!1,log:a.log,onComplete:function(b,c,d){var f=(new DOMParser).parseFromString(c.responseText,"application/xml"),g=f.getElementsByTagName("Error");a.log(h.format("Abort response status {}, body = {}",c.status,c.responseText));d?a.log(h.format("Abort Multipart Upload request for {} failed with status {}.",
b,c.status),"error"):g.length?(c=f.getElementsByTagName("Message")[0].textContent,a.log(h.format("Failed to Abort Multipart Upload request for {}.  Error: {}",b,c),"error")):a.log(h.format("Abort MPU request succeeded for file ID {}.",b))},successfulResponseCodes:{DELETE:[204]}}));h.extend(this,{send:function(b,c){g(b,c).then(function(c,f){a.log("Submitting S3 Abort multipart upload request for "+b);d.initTransport(b).withPath(f).withHeaders(c).send()})}})};h.s3.XhrUploadHandler=function(c,g){var a=
g.getName,f=g.log,d=c.clockDrift,b=c.getBucket,k=c.getHost,n=c.getKeyName,p=c.filenameParam,r=c.paramsStore,w=c.endpointStore,z=c.aclStore,v=c.objectProperties.reducedRedundancy,t=c.objectProperties.region,q=c.objectProperties.serverSideEncryption,y=c.validation,A=h.extend({region:t,drift:d},c.signature),C=this,G=c.signature.credentialsProvider,E={combine:function(a){var b=C._getPersistableData(a).uploadId,c=C._getPersistableData(a).etags,d=new h.Promise;F.completeMultipart.send(a,b,c).then(d.success,
function(b,c){d.failure(e.done(a,c).response,c)});return d},done:function(a,b,c){e.response.parse(a,b).success&&(b=b.getResponseHeader("ETag"),C._getPersistableData(a).etags||(C._getPersistableData(a).etags=[]),C._getPersistableData(a).etags.push({part:c+1,etag:b}))},initHeaders:function(a,b,c){var d=e.bucket.getName(a),f=e.host.getName(a),g=e.key.urlSafe(a),k=new h.Promise;c=F.restSignature.constructStringToSign(F.restSignature.REQUEST_TYPE.MULTIPART_UPLOAD,d,f,g).withPartNum(b+1).withContent(c).withUploadId(C._getPersistableData(a).uploadId);
F.restSignature.getSignature(a+"."+b,{signatureConstructor:c}).then(k.success,k.failure);return k},put:function(a,b){var d=C._createXhr(a,b),g=C._getChunkData(a,b),k=c.endpointStore.get(a),l=new h.Promise;E.initHeaders(a,b,g.blob).then(function(c,m){if(d._cancelled)f(h.format("Upload of item {}.{} cancelled. Upload will not start after successful signature request.",a,b)),l.failure({error:"Chunk upload cancelled"});else{m=k+"/"+m;C._registerProgressHandler(a,b,g.size);e.track(a,d,b).then(l.success,
l.failure);d.open("PUT",m,!0);var n=!1;h.each(c,function(a,b){"Content-Type"===a&&(n=!0);d.setRequestHeader(a,b)});n||d.setRequestHeader("Content-Type","");d.send(g.blob)}},function(){l.failure({error:"Problem signing the chunk!"},d)});return l},send:function(a,b){var c=new h.Promise;E.setup(a).then(function(){E.put(a,b).then(c.success,c.failure)},function(a,b){c.failure({error:a},b)});return c},setup:function(a){var b=new h.Promise,c=C._getPersistableData(a).uploadId,d=new h.Promise;c?c instanceof
h.Promise?c.then(function(a){b.success(a)}):b.success(c):(C._getPersistableData(a).uploadId=d,F.initiateMultipart.send(a).then(function(c){C._getPersistableData(a).uploadId=c;d.success(c);b.success(c)},function(c,e){C._getPersistableData(a).uploadId=null;b.failure(c,e);d.failure(c,e)}));return b}},F={abortMultipart:new h.s3.AbortMultipartAjaxRequester({endpointStore:w,signatureSpec:A,cors:c.cors,log:f,getBucket:function(a){return e.bucket.getName(a)},getHost:function(a){return e.host.getName(a)},
getKey:function(a){return e.key.urlSafe(a)}}),completeMultipart:new h.s3.CompleteMultipartAjaxRequester({endpointStore:w,signatureSpec:A,cors:c.cors,log:f,getBucket:function(a){return e.bucket.getName(a)},getHost:function(a){return e.host.getName(a)},getKey:function(a){return e.key.urlSafe(a)}}),initiateMultipart:new h.s3.InitiateMultipartAjaxRequester({filenameParam:p,endpointStore:w,paramsStore:r,signatureSpec:A,aclStore:z,reducedRedundancy:v,serverSideEncryption:q,cors:c.cors,log:f,getContentType:function(a){return C._getMimeType(a)},
getBucket:function(a){return e.bucket.getName(a)},getHost:function(a){return e.host.getName(a)},getKey:function(a){return e.key.urlSafe(a)},getName:function(b){return a(b)}}),policySignature:new h.s3.RequestSigner({expectingPolicy:!0,signatureSpec:A,cors:c.cors,log:f}),restSignature:new h.s3.RequestSigner({endpointStore:w,signatureSpec:A,cors:c.cors,log:f})},I={initParams:function(b){var c=r.get(b);c[p]=a(b);return h.s3.util.generateAwsParams({endpoint:w.get(b),clockDrift:d,params:c,type:C._getMimeType(b),
bucket:e.bucket.getName(b),key:C.getThirdPartyFileId(b),accessKey:G.get().accessKey,sessionToken:G.get().sessionToken,acl:z.get(b),expectedStatus:200,minFileSize:y.minSizeLimit,maxFileSize:y.maxSizeLimit,reducedRedundancy:v,region:t,serverSideEncryption:q,signatureVersion:A.version,log:f},h.bind(F.policySignature.getSignature,this,b))},send:function(a){var b=new h.Promise,c=C._createXhr(a),d=C.getFile(a);C._registerProgressHandler(a);e.track(a,c).then(b.success,b.failure);I.setup(a,c,d).then(function(b){f("Sending upload request for "+
a);c.send(b)},b.failure);return b},setup:function(a,b,c){var d=new FormData,e=w.get(a),f=new h.Promise;I.initParams(a).then(function(a){b.open("POST",e,!0);h.obj2FormData(a,d);d.append("file",c);f.success(d)},function(a){f.failure({error:a})});return f}},e={bucket:{promise:function(a){var c=new h.Promise,d=C._getFileState(a).bucket;d?c.success(d):b(a).then(function(b){C._getFileState(a).bucket=b;c.success(b)},c.failure);return c},getName:function(a){return C._getFileState(a).bucket}},host:{promise:function(a){var b=
new h.Promise,c=C._getFileState(a).host;c?b.success(c):k(a).then(function(c){C._getFileState(a).host=c;b.success(c)},b.failure);return b},getName:function(a){return C._getFileState(a).host}},done:function(a,b){a=e.response.parse(a,b);(b=!0!==a.success)&&e.response.shouldReset(a.code)&&(f("This is an unrecoverable error, we must restart the upload entirely on the next retry attempt.","error"),a.reset=!0);return{success:!b,response:a}},key:{promise:function(b){var c=new h.Promise,d=C.getThirdPartyFileId(b);
null==d?(C._setThirdPartyFileId(b,c),n(b,a(b)).then(function(a){C._setThirdPartyFileId(b,a);c.success(a)},function(a){C._setThirdPartyFileId(b,null);c.failure(a)})):h.isGenericPromise(d)?d.then(c.success,c.failure):c.success(d);return c},urlSafe:function(a){a=C.getThirdPartyFileId(a);return h.s3.util.uriEscapePath(a)}},response:{parse:function(a,b){a={};var c;try{if(f(h.format("Received response status {} with body: {}",b.status,b.responseText)),200===b.status)a.success=!0;else if(c=e.response.parseError(b.responseText))a.error=
c.message,a.code=c.code}catch(H){f("Error when attempting to parse xhr response text ("+H.message+")","error")}return a},parseError:function(a){var b=(new DOMParser).parseFromString(a,"application/xml");a={};if(b.getElementsByTagName("Error").length){var c=b.getElementsByTagName("Code");b=b.getElementsByTagName("Message");b.length&&(a.message=b[0].textContent);c.length&&(a.code=c[0].textContent);return a}},shouldReset:function(a){return"EntityTooSmall"===a||"InvalidPart"===a||"InvalidPartOrder"===
a||"NoSuchUpload"===a}},start:function(a,b){var c=new h.Promise;e.key.promise(a).then(function(){e.bucket.promise(a).then(function(){e.host.promise(a).then(function(){null==b?I.send(a).then(c.success,c.failure):E.send(a,b).then(c.success,c.failure)})})},function(a){c.failure({error:a})});return c},track:function(a,b,c){var d=new h.Promise;b.onreadystatechange=function(){if(4===b.readyState){null!=c&&E.done(a,b,c);var f=e.done(a,b);d[f.success?"success":"failure"](f.response,b)}};return d}};h.extend(this,
{uploadChunk:e.start,uploadFile:e.start});h.extend(this,new h.XhrUploadHandler({options:h.extend({namespace:"s3"},c),proxy:h.extend({getEndpoint:c.endpointStore.get},g)}));h.override(this,function(a){return{expunge:function(b){var c=C._getPersistableData(b)&&C._getPersistableData(b).uploadId,d=C._maybeDeletePersistedChunkData(b);void 0!==c&&d&&F.abortMultipart.send(b,c);a.expunge(b)},finalizeChunks:function(a){return E.combine(a)},_getLocalStorageId:function(b){var c=a._getLocalStorageId(b);b=e.bucket.getName(b);
return c+"-"+b}}})};h.s3.FormUploadHandler=function(c,g){function a(a){var c=q.get(a);c[t]=p(a);return h.s3.util.generateAwsParams({endpoint:y.get(a),clockDrift:k,params:c,bucket:b._getFileState(a).bucket,key:b.getThirdPartyFileId(a),accessKey:m.get().accessKey,sessionToken:m.get().sessionToken,acl:A.get(a),minFileSize:F.minSizeLimit,maxFileSize:F.maxSizeLimit,successRedirectUrl:e,reducedRedundancy:C,region:G,serverSideEncryption:E,signatureVersion:I.version,log:w},h.bind(x.getSignature,this,a))}
function f(d,e){var f=new h.Promise,g=c.endpointStore.get(d);p(d);a(d).then(function(a){a=b._initFormForUpload({method:"POST",endpoint:g,params:a,paramsInBody:!0,targetName:e.name});f.success(a)},function(a){f.failure(a);b._detachLoadEvent(d);e&&h(e).remove()});return f}function d(a){var d=b._createIframe(a),e=b.getInput(a),g=new h.Promise;f(a,d).then(function(f){f.appendChild(e);b._attachLoadEvent(d,function(e){w("iframe loaded");if(e)!1===e.success&&(w("Amazon likely rejected the upload request",
"error"),g.failure(e));else{var f=e={};a:{c.endpointStore.get(a);var k=b._getFileState(a).bucket;try{var l=h.s3.util.parseIframeResponse(d);if(l.bucket===k&&l.key===h.s3.util.encodeQueryStringParam(b.getThirdPartyFileId(a))){var m=!0;break a}w("Response from AWS included an unexpected bucket or key name.","error")}catch(ba){w("Error when attempting to parse form upload response ("+ba.message+")","error")}m=!1}f.success=m;!1===e.success?(w("A success response was received by Amazon, but it was invalid in some way.",
"error"),g.failure(e)):(h.extend(e,h.s3.util.parseIframeResponse(d)),g.success(e))}b._detachLoadEvent(a);d&&h(d).remove()});w("Sending upload request for "+a);f.submit();h(f).remove()},g.failure);return g}var b=this,k=c.clockDrift,n=g.onUuidChanged,p=g.getName,r=g.getUuid,w=g.log,z=c.getBucket,v=c.getKeyName,t=c.filenameParam,q=c.paramsStore,y=c.endpointStore,A=c.aclStore,C=c.objectProperties.reducedRedundancy,G=c.objectProperties.region,E=c.objectProperties.serverSideEncryption,F=c.validation,I=
c.signature,e=c.iframeSupport.localBlankPagePath,m=c.signature.credentialsProvider,x=new h.s3.RequestSigner({signatureSpec:I,cors:c.cors,log:w});if(void 0===e)throw Error("successRedirectEndpoint MUST be defined if you intend to use browsers that do not support the File API!");h.extend(this,new h.FormUploadHandler({options:{isCors:!1,inputName:"file"},proxy:{onCancel:c.onCancel,onUuidChanged:n,getName:p,getUuid:r,log:w}}));h.extend(this,{uploadFile:function(a){var c=p(a),e=new h.Promise;b.getThirdPartyFileId(a)?
b._getFileState(a).bucket?d(a).then(e.success,e.failure):z(a).then(function(c){b._getFileState(a).bucket=c;d(a).then(e.success,e.failure)}):v(a,c).then(function(c){z(a).then(function(f){b._getFileState(a).bucket=f;b._setThirdPartyFileId(a,c);d(a).then(e.success,e.failure)},function(a){e.failure({error:a})})},function(a){e.failure({error:a})});return e}})};h.DragAndDrop=function(c){function g(b){var c=new h.Promise;b.isFile?b.file(function(a){var d=b.fullPath,f=d.indexOf(b.name);d=d.substr(0,f);"/"===
d.charAt(0)&&(d=d.substr(1));a.qqPath=d;n.push(a);c.success()},function(a){r.callbacks.dropLog("Problem parsing '"+b.fullPath+"'.  FileError code "+a.code+".","error");c.failure()}):b.isDirectory&&a(b).then(function(a){var b=a.length;h.each(a,function(a,d){g(d).done(function(){--b;0===b&&c.success()})});a.length||c.success()},function(a){r.callbacks.dropLog("Problem parsing '"+b.fullPath+"'.  FileError code "+a.code+".","error");c.failure()});return c}function a(b,c,d,f){var g=f||new h.Promise,k=
c||b.createReader();k.readEntries(function(c){var f=d?d.concat(c):c;c.length?setTimeout(function(){a(b,k,f,g)},0):g.success(f)},g.failure);return g}function f(a,b){var c=[],d=new h.Promise;r.callbacks.processingDroppedFiles();b.dropDisabled(!0);1<a.files.length&&!r.allowMultipleItems?(r.callbacks.processingDroppedFilesComplete([]),r.callbacks.dropError("tooManyFilesError",""),b.dropDisabled(!1),d.failure()):(n=[],h.isFolderDropSupported(a)?h.each(a.items,function(a,b){(a=b.webkitGetAsEntry())&&(a.isFile?
n.push(b.getAsFile()):c.push(g(a).done(function(){c.pop();0===c.length&&d.success()})))}):n=a.files,0===c.length&&d.success());return d}function d(a){var b=new h.UploadDropZone({HIDE_ZONES_EVENT_NAME:"qq-hidezones",element:a,onEnter:function(b){h(a).addClass(r.classes.dropActive);b.stopPropagation()},onLeaveNotDescendants:function(b){h(a).removeClass(r.classes.dropActive)},onDrop:function(a){f(a.dataTransfer,b).then(function(){var a=n,c=b,d=Array.prototype.slice.call(a);r.callbacks.dropLog("Grabbed "+
a.length+" dropped files.");c.dropDisabled(!1);r.callbacks.processingDroppedFilesComplete(d,c.getElement())},function(){r.callbacks.dropLog("Drop event DataTransfer parsing failed.  No files will be uploaded.","error")})}});p.addDisposer(function(){b.dispose()});h(a).hasAttribute("qq-hide-dropzone")&&h(a).hide();k.push(b);return b}function b(a){var b;h.each(a.dataTransfer.types,function(a,c){if("Files"===c)return b=!0,!1});return b}var k=[],n=[],p=new h.DisposeSupport;var r={dropZoneElements:[],allowMultipleItems:!0,
classes:{dropActive:null},callbacks:new h.DragAndDrop.callbacks};h.extend(r,c,!0);(function(){var a=r.dropZoneElements,c=function(){setTimeout(function(){h.each(a,function(a,b){h(b).hasAttribute("qq-hide-dropzone")&&h(b).hide();h(b).removeClass(r.classes.dropActive)})},10)};h.each(a,function(c,f){var g=d(f);a.length&&h.supportedFeatures.fileDrop&&p.attach(document,"dragenter",function(c){!g.dropDisabled()&&b(c)&&h.each(a,function(a,b){b instanceof HTMLElement&&h(b).hasAttribute("qq-hide-dropzone")&&
h(b).css({display:"block"})})})});p.attach(document,"dragleave",function(a){a=h.safari()?0>a.x||0>a.y:0===a.x&&0===a.y;a&&c()});p.attach(h(document).children()[0],"mouseenter",function(a){c()});p.attach(document,"drop",function(a){b(a)&&(a.preventDefault(),c())});p.attach(document,"qq-hidezones",c)})();h.extend(this,{setupExtraDropzone:function(a){r.dropZoneElements.push(a);d(a)},removeDropzone:function(a){var b,c=r.dropZoneElements;for(b in c)if(c[b]===a)return c.splice(b,1)},dispose:function(){p.dispose();
h.each(k,function(a,b){b.dispose()})}})};h.DragAndDrop.callbacks=function(){return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(c,g){},dropError:function(c,g){h.log("Drag & drop error code '"+c+" with these specifics: '"+g+"'","error")},dropLog:function(c,g){h.log(c,g)}}};h.UploadDropZone=function(c){function g(){return h.safari()||h.firefox()&&h.windows()}function a(a){if(!h.supportedFeatures.fileDrop)return!1;var b=a.dataTransfer,c=h.safari();a=h.ie()&&h.supportedFeatures.fileDrop?
!0:"none"!==b.effectAllowed;return b&&a&&(b.files&&b.files.length||!c&&b.types.contains&&b.types.contains("Files")||b.types.includes&&b.types.includes("Files"))}function f(a){void 0!==a&&(k=a);return k}function d(){function a(){b=document.createEvent("Event");b.initEvent(p.HIDE_ZONES_EVENT_NAME,!0,!0)}if(window.CustomEvent)try{var b=new CustomEvent(p.HIDE_ZONES_EVENT_NAME)}catch(v){a()}else a();document.dispatchEvent(b)}var b=new h.DisposeSupport,k,n;var p={element:null,onEnter:function(a){},onLeave:function(a){},
onLeaveNotDescendants:function(a){},onDrop:function(a){}};h.extend(p,c);var r=p.element;(function(a){n||(g?b.attach(document,"dragover",function(a){a.preventDefault()}):b.attach(document,"dragover",function(a){a.dataTransfer&&(a.dataTransfer.dropEffect="none",a.preventDefault())}),n=!0)})();(function(){b.attach(r,"dragover",function(b){if(a(b)){var c=h.ie()&&h.supportedFeatures.fileDrop?null:b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect="move"===c||"linkMove"===c?"move":"copy";b.stopPropagation();
b.preventDefault()}});b.attach(r,"dragenter",function(b){virtualclass.vutil.initAcitveElement();console.log("testdragenter");if(!f()&&a(b))p.onEnter(b)});b.attach(r,"dragleave",function(b){console.log("testdragleave");if(a(b)){p.onLeave(b);var c=document.elementFromPoint(b.clientX,b.clientY);if(!h(this).contains(c))p.onLeaveNotDescendants(b)}});b.attach(r,"drop",function(b){!f()&&a(b)&&(b.preventDefault(),b.stopPropagation(),p.onDrop(b),d(),console.log("testdrop"),virtualclass.vutil.initAcitveElement())})})();
h.extend(this,{dropDisabled:function(a){return f(a)},dispose:function(){b.dispose()},getElement:function(){return r}});this._testing={};this._testing.isValidFileDrag=a};(function(){h.uiPublicApi={addInitialFiles:function(c){this._parent.prototype.addInitialFiles.apply(this,arguments);this._templating.addCacheToDom()},clearStoredFiles:function(){this._parent.prototype.clearStoredFiles.apply(this,arguments);this._templating.clearFiles()},addExtraDropzone:function(c){this._dnd&&this._dnd.setupExtraDropzone(c)},
removeExtraDropzone:function(c){if(this._dnd)return this._dnd.removeDropzone(c)},getItemByFileId:function(c){if(!this._templating.isHiddenForever(c))return this._templating.getFileContainer(c)},reset:function(){this._parent.prototype.reset.apply(this,arguments);this._templating.reset();!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton(),title:this._options.text.fileInputTitle}).getButtonId());this._dnd&&(this._dnd.dispose(),
this._dnd=this._setupDragAndDrop());this._filesInBatchAddedToUi=this._totalFilesInBatch=0;this._setupClickAndEditEventHandlers()},setName:function(c,g){var a=this._options.formatFileName(g);this._parent.prototype.setName.apply(this,arguments);this._templating.updateFilename(c,a)},pauseUpload:function(c){var g=this._parent.prototype.pauseUpload.apply(this,arguments);g&&this._templating.uploadPaused(c);return g},continueUpload:function(c){var g=this._parent.prototype.continueUpload.apply(this,arguments);
g&&this._templating.uploadContinued(c);return g},getId:function(c){return this._templating.getFileId(c)},getDropTarget:function(c){return this.getFile(c).qqDropTarget}};h.uiPrivateApi={_getButton:function(c){var g=this._parent.prototype._getButton.apply(this,arguments);g||c===this._defaultButtonId&&(g=this._templating.getButton());return g},_removeFileItem:function(c){this._templating.removeFile(c)},_setupClickAndEditEventHandlers:function(){this._fileButtonsClickHandler=h.FileButtonsClickHandler&&
this._bindFileButtonsClickEvent();this._focusinEventSupported=!h.firefox();this._isEditFilenameEnabled()&&(this._filenameClickHandler=this._bindFilenameClickEvent(),this._filenameInputFocusInHandler=this._bindFilenameInputFocusInEvent(),this._filenameInputFocusHandler=this._bindFilenameInputFocusEvent())},_setupDragAndDrop:function(){var c=this,g=this._options.dragAndDrop.extraDropzones,a=this._templating,f=a.getDropZone();f&&g.push(f);return new h.DragAndDrop({dropZoneElements:g,allowMultipleItems:this._options.multiple,
classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){a.showDropProcessing()},processingDroppedFilesComplete:function(d,b){a.hideDropProcessing();h.each(d,function(a,c){c.qqDropTarget=b});d.length&&c.addFiles(d,null,null)},dropError:function(a,b){c._itemError(a,b)},dropLog:function(a,b){c.log(a,b)}}})},_bindFileButtonsClickEvent:function(){var c=this;return new h.FileButtonsClickHandler({templating:this._templating,log:function(g,a){c.log(g,a)},onDeleteFile:function(g){c.deleteFile(g)},
onCancel:function(g){c.cancel(g)},onRetry:function(g){c.retry(g)},onPause:function(g){c.pauseUpload(g)},onContinue:function(g){c.continueUpload(g)},onGetName:function(g){return c.getName(g)}})},_isEditFilenameEnabled:function(){return this._templating.isEditFilenamePossible()&&!this._options.autoUpload&&h.FilenameClickHandler&&h.FilenameInputFocusHandler&&h.FilenameInputFocusHandler},_filenameEditHandler:function(){var c=this,g=this._templating;return{templating:g,log:function(a,f){c.log(a,f)},onGetUploadStatus:function(a){return c.getUploads({id:a}).status},
onGetName:function(a){return c.getName(a)},onSetName:function(a,f){c.setName(a,f)},onEditingStatusChange:function(a,c){var d=h(g.getEditInput(a)),b=h(g.getFileContainer(a));c?(d.addClass("qq-editing"),g.hideFilename(a),g.hideEditIcon(a)):(d.removeClass("qq-editing"),g.showFilename(a),g.showEditIcon(a));b.addClass("qq-temp").removeClass("qq-temp")}}},_onUploadStatusChange:function(c,g,a){this._parent.prototype._onUploadStatusChange.apply(this,arguments);this._isEditFilenameEnabled()&&this._templating.getFileContainer(c)&&
a!==h.status.SUBMITTED&&(this._templating.markFilenameEditable(c),this._templating.hideEditIcon(c));g===h.status.UPLOAD_RETRYING&&a===h.status.UPLOADING?(this._templating.hideRetry(c),this._templating.setStatusText(c),h(this._templating.getFileContainer(c)).removeClass(this._classes.retrying)):a===h.status.UPLOAD_FAILED&&this._templating.hidePause(c)},_bindFilenameInputFocusInEvent:function(){var c=h.extend({},this._filenameEditHandler());return new h.FilenameInputFocusInHandler(c)},_bindFilenameInputFocusEvent:function(){var c=
h.extend({},this._filenameEditHandler());return new h.FilenameInputFocusHandler(c)},_bindFilenameClickEvent:function(){var c=h.extend({},this._filenameEditHandler());return new h.FilenameClickHandler(c)},_storeForLater:function(c){this._parent.prototype._storeForLater.apply(this,arguments);this._templating.hideSpinner(c)},_onAllComplete:function(c,g){this._parent.prototype._onAllComplete.apply(this,arguments);this._templating.resetTotalProgress()},_onSubmit:function(c,g){var a=this.getFile(c);a&&
a.qqPath&&this._options.dragAndDrop.reportDirectoryPaths&&this._paramsStore.addReadOnly(c,{qqpath:a.qqPath});this._parent.prototype._onSubmit.apply(this,arguments);this._addToList(c,g)},_onSubmitted:function(c){this._isEditFilenameEnabled()&&(this._templating.markFilenameEditable(c),this._templating.showEditIcon(c),this._focusinEventSupported||this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(c)))},_onProgress:function(c,g,a,f){this._parent.prototype._onProgress.apply(this,
arguments);this._templating.updateProgress(c,a,f);0===f||100===Math.round(a/f*100)?(this._templating.hideCancel(c),this._templating.hidePause(c),this._templating.hideProgress(c),this._templating.setStatusText(c,this._options.text.waitingForResponse),this._displayFileSize(c)):this._displayFileSize(c,a,f)},_onTotalProgress:function(c,g){this._parent.prototype._onTotalProgress.apply(this,arguments);this._templating.updateTotalProgress(c,g)},_onComplete:function(c,g,a,f){function d(a){n&&(k.setStatusText(c),
h(n).removeClass(p._classes.retrying),k.hideProgress(c),p.getUploads({id:c}).status!==h.status.UPLOAD_FAILED&&k.hideCancel(c),k.hideSpinner(c),a.success?p._markFileAsSuccessful(c):(h(n).addClass(p._classes.fail),k.showCancel(c),k.isRetryPossible()&&!p._preventRetries[c]&&(h(n).addClass(p._classes.retryable),k.showRetry(c)),p._controlFailureTextDisplay(c,a)))}var b=this._parent.prototype._onComplete.apply(this,arguments),k=this._templating,n=k.getFileContainer(c),p=this;b instanceof h.Promise?b.done(function(a){d(a)}):
d(a);return b},_markFileAsSuccessful:function(c){var g=this._templating;this._isDeletePossible()&&g.showDeleteButton(c);h(g.getFileContainer(c)).addClass(this._classes.success);this._maybeUpdateThumbnail(c)},_onUploadPrep:function(c){this._parent.prototype._onUploadPrep.apply(this,arguments);this._templating.showSpinner(c)},_onUpload:function(c,g){var a=this._parent.prototype._onUpload.apply(this,arguments);this._templating.showSpinner(c);return a},_onUploadChunk:function(c,g){this._parent.prototype._onUploadChunk.apply(this,
arguments);0<g.partIndex&&this._handler.isResumable(c)&&this._templating.allowPause(c)},_onCancel:function(c,g){this._parent.prototype._onCancel.apply(this,arguments);this._removeFileItem(c);0===this._getNotFinished()&&this._templating.resetTotalProgress()},_onBeforeAutoRetry:function(c){this._parent.prototype._onBeforeAutoRetry.apply(this,arguments);this._showCancelLink(c);if(this._options.retry.showAutoRetryNote){var g=this._autoRetries[c];var a=this._options.retry.maxAutoAttempts;g=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,
g);g=g.replace(/\{maxAuto\}/g,a);this._templating.setStatusText(c,g);h(this._templating.getFileContainer(c)).addClass(this._classes.retrying)}},_onBeforeManualRetry:function(c){if(this._parent.prototype._onBeforeManualRetry.apply(this,arguments))return this._templating.resetProgress(c),h(this._templating.getFileContainer(c)).removeClass(this._classes.fail),this._templating.setStatusText(c),this._templating.showSpinner(c),this._showCancelLink(c),!0;h(this._templating.getFileContainer(c)).addClass(this._classes.retryable);
this._templating.showRetry(c);return!1},_onSubmitDelete:function(c){var g=h.bind(this._onSubmitDeleteSuccess,this);this._parent.prototype._onSubmitDelete.call(this,c,g)},_onSubmitDeleteSuccess:function(c,g,a){this._options.deleteFile.forceConfirm?this._showDeleteConfirm.apply(this,arguments):this._sendDeleteRequest.apply(this,arguments)},_onDeleteComplete:function(c,g,a){this._parent.prototype._onDeleteComplete.apply(this,arguments);this._templating.hideSpinner(c);a?(this._templating.setStatusText(c,
this._options.deleteFile.deletingFailedText),this._templating.showDeleteButton(c)):this._removeFileItem(c)},_sendDeleteRequest:function(c,g,a){this._templating.hideDeleteButton(c);this._templating.showSpinner(c);this._templating.setStatusText(c,this._options.deleteFile.deletingStatusText);this._deleteHandler.sendDelete.apply(this,arguments)},_showDeleteConfirm:function(c,g,a){var f=this.getName(c);f=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,f);g=this.getUuid(c);var d=arguments,
b=this;f=this._options.showConfirm(f);h.isGenericPromise(f)?f.then(function(){b._sendDeleteRequest.apply(b,d)}):!1!==f&&b._sendDeleteRequest.apply(b,d)},_addToList:function(c,g,a){var f=0,d=this._handler.isProxied(c)&&this._options.scaling.hideScaled;if(this._options.display.prependFiles){1<this._totalFilesInBatch&&0<this._filesInBatchAddedToUi&&(f=this._filesInBatchAddedToUi-1);var b={index:f}}a||(this._options.disableCancelForFormUploads&&!h.supportedFeatures.ajaxUploading&&this._templating.disableCancel(),
this._options.multiple||(f=this.getUploads({id:c}),this._handledProxyGroup=this._handledProxyGroup||f.proxyGroupId,f.proxyGroupId===this._handledProxyGroup&&f.proxyGroupId||(this._handler.cancelAll(),this._clearList(),this._handledProxyGroup=null)));a?(this._templating.addFileToCache(c,this._options.formatFileName(g),b,d),this._templating.updateThumbnail(c,this._thumbnailUrls[c],!0,this._options.thumbnails.customResizer)):(this._templating.addFile(c,this._options.formatFileName(g),b,d),this._templating.generatePreview(c,
this.getFile(c),this._options.thumbnails.customResizer));this._filesInBatchAddedToUi+=1;(a||this._options.display.fileSizeOnSubmit&&h.supportedFeatures.ajaxUploading)&&this._displayFileSize(c)},_clearList:function(){this._templating.clearFiles();this.clearStoredFiles()},_displayFileSize:function(c,g,a){var f=this.getSize(c),d=this._formatSize(f);0<=f&&(void 0!==g&&void 0!==a&&(d=this._formatProgress(g,a)),this._templating.updateSize(c,d))},_formatProgress:function(c,g){var a=this._options.text.formatProgress;
a=a.replace("{percent}",Math.round(c/g*100));c=this._formatSize(g);return a=a.replace("{total_size}",c)},_controlFailureTextDisplay:function(c,g){var a=this._options.failedUploadTextDisplay.mode;var f=this._options.failedUploadTextDisplay.responseProperty;"custom"===a?(g=g[f],g||(g=this._options.text.failUpload),this._templating.setStatusText(c,g),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(c,g)):"default"===a?this._templating.setStatusText(c,this._options.text.failUpload):
"none"!==a&&this.log("failedUploadTextDisplay.mode value of '"+a+"' is not valid","warn")},_showTooltip:function(c,g){this._templating.getFileContainer(c).title=g},_showCancelLink:function(c){this._options.disableCancelForFormUploads&&!h.supportedFeatures.ajaxUploading||this._templating.showCancel(c)},_itemError:function(c,g,a){var f=this._parent.prototype._itemError.apply(this,arguments);this._options.showMessage(f)},_batchError:function(c){this._parent.prototype._batchError.apply(this,arguments);
this._options.showMessage(c)},_setupPastePrompt:function(){var c=this;this._options.callbacks.onPasteReceived=function(){return c._options.showPrompt(c._options.paste.namePromptMessage,c._options.paste.defaultName)}},_fileOrBlobRejected:function(c,g){--this._totalFilesInBatch;this._parent.prototype._fileOrBlobRejected.apply(this,arguments)},_prepareItemsForUpload:function(c,g,a){this._totalFilesInBatch=c.length;this._filesInBatchAddedToUi=0;this._parent.prototype._prepareItemsForUpload.apply(this,
arguments)},_maybeUpdateThumbnail:function(c){var g=this._thumbnailUrls[c];this.getUploads({id:c}).status===h.status.DELETED||!g&&!this._options.thumbnails.placeholders.waitUntilResponse&&h.supportedFeatures.imagePreviews||this._templating.updateThumbnail(c,g,this._options.thumbnails.customResizer)},_addCannedFile:function(c){var g=this._parent.prototype._addCannedFile.apply(this,arguments);this._addToList(g,this.getName(g),!0);this._templating.hideSpinner(g);this._templating.hideCancel(g);this._markFileAsSuccessful(g);
return g},_setSize:function(c,g){this._parent.prototype._setSize.apply(this,arguments);this._templating.updateSize(c,this._formatSize(g))},_sessionRequestComplete:function(){this._templating.addCacheToDom();this._parent.prototype._sessionRequestComplete.apply(this,arguments)}}})();h.FineUploader=function(c,g){var a=this;this._parent=g?h[g].FineUploaderBasic:h.FineUploaderBasic;this._parent.apply(this,arguments);h.extend(this._options,{element:null,button:null,listElement:null,dragAndDrop:{extraDropzones:[],
reportDirectoryPaths:!1},text:{formatProgress:"{percent}% of {total_size}",failUpload:"Upload failed",waitingForResponse:"Processing...",paused:"Paused"},template:"qq-template",classes:{retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",success:"qq-upload-success",fail:"qq-upload-fail",editable:"qq-editable",hide:"qq-hide",dropActive:"qq-upload-drop-area-active"},failedUploadTextDisplay:{mode:"default",responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",
unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}..."},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1,prependFiles:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},thumbnails:{customResizer:null,maxCount:0,placeholders:{waitUntilResponse:!1,
notAvailablePath:null,waitingPath:null},timeBetweenThumbs:750},scaling:{hideScaled:!1},showMessage:function(c){if(a._templating.hasDialog("alert"))return a._templating.showDialog("alert",c);setTimeout(function(){window.alert(c)},0)},showConfirm:function(c){return a._templating.hasDialog("confirm")?a._templating.showDialog("confirm",c):window.confirm(c)},showPrompt:function(c,d){return a._templating.hasDialog("prompt")?a._templating.showDialog("prompt",c,d):window.prompt(c,d)}},!0);h.extend(this._options,
c,!0);this._templating=new h.Templating({log:h.bind(this.log,this),templateIdOrEl:this._options.template,containerEl:this._options.element,fileContainerEl:this._options.listElement,button:this._options.button,imageGenerator:this._imageGenerator,classes:{hide:this._options.classes.hide,editable:this._options.classes.editable},limits:{maxThumbs:this._options.thumbnails.maxCount,timeBetweenThumbs:this._options.thumbnails.timeBetweenThumbs},placeholders:{waitUntilUpdate:this._options.thumbnails.placeholders.waitUntilResponse,
thumbnailNotAvailable:this._options.thumbnails.placeholders.notAvailablePath,waitingForThumbnail:this._options.thumbnails.placeholders.waitingPath},text:this._options.text});this._options.workarounds.ios8SafariUploads&&h.ios800()&&h.iosSafari()?this._templating.renderFailure(this._options.messages.unsupportedBrowserIos8Safari):!h.supportedFeatures.uploading||this._options.cors.expected&&!h.supportedFeatures.uploadCors?this._templating.renderFailure(this._options.messages.unsupportedBrowser):(this._wrapCallbacks(),
this._templating.render(),this._classes=this._options.classes,!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton(),title:this._options.text.fileInputTitle}).getButtonId()),this._setupClickAndEditEventHandlers(),h.DragAndDrop&&h.supportedFeatures.fileDrop&&(this._dnd=this._setupDragAndDrop()),this._options.paste.targetElement&&this._options.paste.promptForName&&(h.PasteSupport?this._setupPastePrompt():this.log("Paste support module not found.",
"error")),this._filesInBatchAddedToUi=this._totalFilesInBatch=0)};h.extend(h.FineUploader.prototype,h.basePublicApi);h.extend(h.FineUploader.prototype,h.basePrivateApi);h.extend(h.FineUploader.prototype,h.uiPublicApi);h.extend(h.FineUploader.prototype,h.uiPrivateApi);h.Templating=function(c){var g=document.createDocumentFragment(),a={},f=!1,d=0,b=!1,k=[],n=-1,p={log:null,limits:{maxThumbs:0,timeBetweenThumbs:750},templateIdOrEl:"qq-template",containerEl:null,fileContainerEl:null,button:null,imageGenerator:null,
classes:{hide:"qq-hide",editable:"qq-editable"},placeholders:{waitUntilUpdate:!1,thumbnailNotAvailable:null,waitingForThumbnail:null},text:{paused:"Paused"}},r={button:"qq-upload-button-selector",alertDialog:"qq-alert-dialog-selector",dialogCancelButton:"qq-cancel-button-selector",confirmDialog:"qq-confirm-dialog-selector",dialogMessage:"qq-dialog-message-selector",dialogOkButton:"qq-ok-button-selector",promptDialog:"qq-prompt-dialog-selector",uploader:"qq-uploader-selector",drop:"qq-upload-drop-area-selector",
list:"qq-upload-list-selector",progressBarContainer:"qq-progress-bar-container-selector",progressBar:"qq-progress-bar-selector",totalProgressBarContainer:"qq-total-progress-bar-container-selector",totalProgressBar:"qq-total-progress-bar-selector",file:"qq-upload-file-selector",spinner:"qq-upload-spinner-selector",size:"qq-upload-size-selector",cancel:"qq-upload-cancel-selector",pause:"qq-upload-pause-selector",continueButton:"qq-upload-continue-selector",deleteButton:"qq-upload-delete-selector",retry:"qq-upload-retry-selector",
statusText:"qq-upload-status-text-selector",editFilenameInput:"qq-edit-filename-selector",editNameIcon:"qq-edit-filename-icon-selector",dropText:"qq-upload-drop-area-text-selector",dropProcessing:"qq-drop-processing-selector",dropProcessingSpinner:"qq-drop-processing-spinner-selector",thumbnail:"qq-thumbnail-selector"},w={},z=new h.Promise,v=new h.Promise,t,q,y,A,C=function(a){var b=new h.Promise;v.then(function(c){D(c,a);a.src?b.success():(a.src=c.src,a.onload=function(){a.onload=null;fa(a);b.success()})},
function(){x(a);b.success()});return b},G=function(a,b,c){var e=m(a);X("Generating new thumbnail for "+a);b.qqThumbnailId=a;return p.imageGenerator.generate(b,e,c).then(function(){d++;fa(e);w[a].success()},function(){w[a].failure();p.placeholders.waitUntilUpdate||H(a,e)})},E=function(){if(k.length){b=!0;var a=k.shift();a.update?aa(a):ka(a)}else b=!1},F=function(b){return a[b]||h(y).getFirstByClass("qq-file-id-"+b)},I=function(a){return null==a?e(M,r.totalProgressBarContainer)||e(M,r.totalProgressBar):
e(F(a),r.progressBarContainer)||e(F(a),r.progressBar)},e=function(a,b){return a&&h(a).getFirstByClass(b)},m=function(a){return ba&&e(F(a),r.thumbnail)},x=function(a){a&&h(a).addClass(p.classes.hide)},D=function(a,b){var c=a.style.maxWidth;(a=a.style.maxHeight)&&c&&!b.style.maxWidth&&!b.style.maxHeight&&h(b).css({maxWidth:c,maxHeight:a})},H=function(a,b){var c=w[a]||(new h.Promise).failure(),d=new h.Promise;z.then(function(a){c.then(function(){d.success()},function(){D(a,b);b.onload=function(){b.onload=
null;d.success()};b.src=a.src;fa(b)})});return d},N=function(a,b,c){var d=c.firstChild;0<b&&(d=h(c).children()[b].nextSibling);c.insertBefore(a,d)},ka=function(a){var b=a.id,c=a.optFileOrBlob,e=c&&c.qqThumbnailId,f=m(b),g={customResizeFunction:a.customResizeFunction,maxSize:n,orient:!0,scale:!0};h.supportedFeatures.imagePreviews?f?p.limits.maxThumbs&&p.limits.maxThumbs<=d?(H(b,f),E()):C(f).done(function(){w[b]=new h.Promise;w[b].done(function(){setTimeout(E,p.limits.timeBetweenThumbs)});null!=e?R(b,
e):G(b,c,g)}):E():f&&(C(f),E())},aa=function(a){var b=a.id,c=a.thumbnailUrl,e=a.showWaitingImg,f=m(b);a={customResizeFunction:a.customResizeFunction,scale:A,maxSize:n};if(f)if(c)if(p.limits.maxThumbs&&p.limits.maxThumbs<=d)H(b,f),E();else return e&&C(f),p.imageGenerator.generate(c,f,a).then(function(){fa(f);d++;setTimeout(E,p.limits.timeBetweenThumbs)},function(){H(b,f);setTimeout(E,p.limits.timeBetweenThumbs)});else H(b,f),E()},Aa=function(a,b){var c=I(a);a=null==a?r.totalProgressBar:r.progressBar;
c&&!h(c).hasClass(a)&&(c=h(c).getFirstByClass(a));c&&(h(c).css({width:b+"%"}),c.setAttribute("aria-valuenow",b))},fa=function(a){a&&h(a).removeClass(p.classes.hide)},R=function(a,b){var c=m(a),e=m(b);X(h.format("ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.",a,b,b));w[b].then(function(){d++;w[a].success();X(h.format("Now using previously generated thumbnail created for ID {} on ID {}.",b,a));c.src=e.src;fa(c)},function(){w[a].failure();p.placeholders.waitUntilUpdate||
H(a,c)})};h.extend(p,c);var X=p.log;h.supportedFeatures.imagePreviews||(p.limits.timeBetweenThumbs=0,p.limits.maxThumbs=0);var M=p.containerEl;var ba=void 0!==p.imageGenerator;var ja=function(){var a;X("Parsing template");if(null==p.templateIdOrEl)throw Error("You MUST specify either a template element or ID!");if(h.isString(p.templateIdOrEl)){var b=document.getElementById(p.templateIdOrEl);if(null===b)throw Error(h.format("Cannot find template script at ID '{}'!",p.templateIdOrEl));var c=b.innerHTML}else{if(void 0===
p.templateIdOrEl.innerHTML)throw Error("You have specified an invalid value for the template option!  It must be an ID or an Element.");c=p.templateIdOrEl.innerHTML}c=h.trimStr(c);b=document.createElement("div");b.appendChild(h.toElement(c));c=h(b).getFirstByClass(r.uploader);p.button&&(a=h(b).getFirstByClass(r.button))&&h(a).remove();h.DragAndDrop&&h.supportedFeatures.fileDrop||(a=h(b).getFirstByClass(r.dropProcessing))&&h(a).remove();(a=h(b).getFirstByClass(r.drop))&&!h.DragAndDrop&&(X("DnD module unavailable.",
"info"),h(a).remove());h.supportedFeatures.fileDrop?h(c).hasAttribute("qq-drop-area-text")&&a&&(c=h(a).getFirstByClass(r.dropText))&&h(c).remove():(c.removeAttribute("qq-drop-area-text"),a&&h(a).hasAttribute("qq-hide-dropzone")&&h(a).css({display:"none"}));c=h(b).getFirstByClass(r.thumbnail);ba?c&&(n=parseInt(c.getAttribute("qq-max-size")),n=0<n?n:null,A=h(c).hasAttribute("qq-server-scale")):c&&h(c).remove();ba=ba&&c;t=0<h(b).getByClass(r.editFilenameInput).length;q=0<h(b).getByClass(r.retry).length;
c=h(b).getFirstByClass(r.list);if(null==c)throw Error("Could not find the file list container in the template!");a=c.children[0].cloneNode(!0);c.innerHTML="";b.getElementsByTagName("DIALOG").length&&document.createElement("dialog");X("Template parsing complete");return{template:b,fileTemplate:a}}();(function(){var a=p.placeholders.thumbnailNotAvailable,b=p.placeholders.waitingForThumbnail,c={maxSize:n,scale:A};ba&&(a?p.imageGenerator.generate(a,new Image,c).then(function(a){z.success(a)},function(){z.failure();
X("Problem loading 'not available' placeholder image at "+a,"error")}):z.failure(),b?p.imageGenerator.generate(b,new Image,c).then(function(a){v.success(a)},function(){v.failure();X("Problem loading 'waiting for thumbnail' placeholder image at "+b,"error")}):v.failure())})();h.extend(this,{render:function(){X("Rendering template in DOM.");d=0;M.appendChild(ja.template.cloneNode(!0));x(e(M,r.dropProcessing));this.hideTotalProgress();y=p.fileContainerEl||e(M,r.list);X("Template rendering complete")},
renderFailure:function(a){a=h.toElement(a);M.innerHTML="";M.appendChild(a)},reset:function(){this.render()},clearFiles:function(){y.innerHTML=""},disableCancel:function(){f=!0},addFile:function(b,c,d,k,l){var n=ja.fileTemplate.cloneNode(!0),p=e(n,r.file),q=e(M,r.uploader),t=l?g:y,w;l&&(a[b]=n);h(n).addClass("qq-file-id-"+b);q.removeAttribute("qq-drop-area-text");p&&(h(p).setText(c),p.setAttribute("title",c));n.setAttribute("qq-file-id",b);d?N(n,d.index,t):t.appendChild(n);k?(n.style.display="none",
h(n).addClass("qq-hidden-forever")):(x(I(b)),x(e(F(b),r.size)),x(e(F(b),r.deleteButton)),x(e(F(b),r.retry)),x(e(F(b),r.pause)),x(e(F(b),r.continueButton)),f&&this.hideCancel(b),(w=m(b))&&!w.src&&v.then(function(a){w.src=a.src;a.style.maxHeight&&a.style.maxWidth&&h(w).css({maxHeight:a.style.maxHeight,maxWidth:a.style.maxWidth});fa(w)}))},addFileToCache:function(a,b,c,d){this.addFile(a,b,c,d,!0)},addCacheToDom:function(){y.appendChild(g);g=document.createDocumentFragment();a={}},removeFile:function(a){h(F(a)).remove()},
getFileId:function(a){if(a){for(;null==a.getAttribute("qq-file-id");)a=a.parentNode;return parseInt(a.getAttribute("qq-file-id"))}},getFileList:function(){return y},markFilenameEditable:function(a){(a=e(F(a),r.file))&&h(a).addClass(p.classes.editable)},updateFilename:function(a,b){if(a=e(F(a),r.file))h(a).setText(b),a.setAttribute("title",b)},hideFilename:function(a){x(e(F(a),r.file))},showFilename:function(a){fa(e(F(a),r.file))},isFileName:function(a){return h(a).hasClass(r.file)},getButton:function(){return p.button||
e(M,r.button)},hideDropProcessing:function(){x(e(M,r.dropProcessing))},showDropProcessing:function(){fa(e(M,r.dropProcessing))},getDropZone:function(){return e(M,r.drop)},isEditFilenamePossible:function(){return t},hideRetry:function(a){x(e(F(a),r.retry))},isRetryPossible:function(){return q},showRetry:function(a){fa(e(F(a),r.retry))},getFileContainer:function(a){return F(a)},showEditIcon:function(a){(a=e(F(a),r.editNameIcon))&&h(a).addClass(p.classes.editable)},isHiddenForever:function(a){return h(F(a)).hasClass("qq-hidden-forever")},
hideEditIcon:function(a){(a=e(F(a),r.editNameIcon))&&h(a).removeClass(p.classes.editable)},isEditIcon:function(a){return h(a).hasClass(r.editNameIcon,!0)},getEditInput:function(a){return e(F(a),r.editFilenameInput)},isEditInput:function(a){return h(a).hasClass(r.editFilenameInput,!0)},updateProgress:function(a,b,c){var d=I(a);d&&0<c&&(b=Math.round(b/c*100),100===b?x(d):fa(d),Aa(a,b))},updateTotalProgress:function(a,b){this.updateProgress(null,a,b)},hideProgress:function(a){(a=I(a))&&x(a)},hideTotalProgress:function(){this.hideProgress()},
resetProgress:function(a){Aa(a,0);this.hideTotalProgress(a)},resetTotalProgress:function(){this.resetProgress()},showCancel:function(a){f||(a=e(F(a),r.cancel))&&h(a).removeClass(p.classes.hide)},hideCancel:function(a){x(e(F(a),r.cancel))},isCancel:function(a){return h(a).hasClass(r.cancel,!0)},allowPause:function(a){fa(e(F(a),r.pause));x(e(F(a),r.continueButton))},uploadPaused:function(a){this.setStatusText(a,p.text.paused);this.allowContinueButton(a);x(e(F(a),r.spinner))},hidePause:function(a){x(e(F(a),
r.pause))},isPause:function(a){return h(a).hasClass(r.pause,!0)},isContinueButton:function(a){return h(a).hasClass(r.continueButton,!0)},allowContinueButton:function(a){fa(e(F(a),r.continueButton));x(e(F(a),r.pause))},uploadContinued:function(a){this.setStatusText(a,"");this.allowPause(a);fa(e(F(a),r.spinner))},showDeleteButton:function(a){fa(e(F(a),r.deleteButton))},hideDeleteButton:function(a){x(e(F(a),r.deleteButton))},isDeleteButton:function(a){return h(a).hasClass(r.deleteButton,!0)},isRetry:function(a){return h(a).hasClass(r.retry,
!0)},updateSize:function(a,b){if(a=e(F(a),r.size))fa(a),h(a).setText(b)},setStatusText:function(a,b){(a=e(F(a),r.statusText))&&(null==b?h(a).clearText():h(a).setText(b))},hideSpinner:function(a){h(F(a)).removeClass("qq-in-progress");x(e(F(a),r.spinner))},showSpinner:function(a){h(F(a)).addClass("qq-in-progress");fa(e(F(a),r.spinner))},generatePreview:function(a,c,d){this.isHiddenForever(a)||(k.push({id:a,customResizeFunction:d,optFileOrBlob:c}),!b&&E())},updateThumbnail:function(a,c,d,e){this.isHiddenForever(a)||
(k.push({customResizeFunction:e,update:!0,id:a,thumbnailUrl:c,showWaitingImg:d}),!b&&E())},hasDialog:function(a){return h.supportedFeatures.dialogElement&&!!e(M,r[a+"Dialog"])},showDialog:function(a,b,c){var d=e(M,r[a+"Dialog"]);a=e(d,r.dialogMessage);var f=d.getElementsByTagName("INPUT")[0],g=e(d,r.dialogCancelButton),k=e(d,r.dialogOkButton),l=new h.Promise,m=function(){g.removeEventListener("click",n);k&&k.removeEventListener("click",p);l.failure()},n=function(){g.removeEventListener("click",n);
d.close()},p=function(){d.removeEventListener("close",m);k.removeEventListener("click",p);d.close();l.success(f&&f.value)};d.addEventListener("close",m);g.addEventListener("click",n);k&&k.addEventListener("click",p);f&&(f.value=c);a.textContent=b;d.showModal();return l}})};h.UiEventHandler=function(c,g){function a(a){f.attach(a,d.eventType,function(a){a=a||window.event;d.onHandled(a.target||a.srcElement,a)})}var f=new h.DisposeSupport,d={eventType:"click",attachTo:null,onHandled:function(a,c){}};
h.extend(this,{addHandler:function(b){a(b)},dispose:function(){f.dispose()}});h.extend(g,{getFileIdFromItem:function(a){return a.qqFileId},getDisposeSupport:function(){return f}});h.extend(d,c);d.attachTo&&a(d.attachTo)};h.FileButtonsClickHandler=function(c){var g={templating:null,log:function(a,c){},onDeleteFile:function(a){},onCancel:function(a){},onRetry:function(a){},onPause:function(a){},onContinue:function(a){},onGetName:function(a){}},a={cancel:function(a){g.onCancel(a)},retry:function(a){g.onRetry(a)},
deleteButton:function(a){g.onDeleteFile(a)},pause:function(a){g.onPause(a)},continueButton:function(a){g.onContinue(a)}};h.extend(g,c);g.eventType="click";g.onHandled=function(c,d){h.each(a,function(a,f){a=a.charAt(0).toUpperCase()+a.slice(1);if(g.templating["is"+a](c))return a=g.templating.getFileId(c),h.preventDefault(d),g.log(h.format("Detected valid file button click event on file '{}', ID: {}.",g.onGetName(a),a)),f(a),!1})};g.attachTo=g.templating.getFileList();h.extend(this,new h.UiEventHandler(g,
{}))};h.FilenameClickHandler=function(c){var g={},a={templating:null,log:function(a,c){},classes:{file:"qq-upload-file",editNameIcon:"qq-edit-filename-icon"},onGetUploadStatus:function(a){},onGetName:function(a){}};h.extend(a,c);a.eventType="click";a.onHandled=function(c,d){if(a.templating.isFileName(c)||a.templating.isEditIcon(c)){var b=a.templating.getFileId(c);a.onGetUploadStatus(b)===h.status.SUBMITTED&&(a.log(h.format("Detected valid filename click event on file '{}', ID: {}.",a.onGetName(b),
b)),h.preventDefault(d),g.handleFilenameEdit(b,c,!0))}};h.extend(this,new h.FilenameEditHandler(a,g))};h.FilenameInputFocusInHandler=function(c,g){var a={templating:null,onGetUploadStatus:function(a){},log:function(a,c){}};g||(g={});a.eventType="focusin";a.onHandled=function(c,d){a.templating.isEditInput(c)&&(d=a.templating.getFileId(c),a.onGetUploadStatus(d)===h.status.SUBMITTED&&(a.log(h.format("Detected valid filename input focus event on file '{}', ID: {}.",a.onGetName(d),d)),g.handleFilenameEdit(d,
c)))};h.extend(a,c);h.extend(this,new h.FilenameEditHandler(a,g))};h.FilenameInputFocusHandler=function(c){c.eventType="focus";c.attachTo=null;h.extend(this,new h.FilenameInputFocusInHandler(c,{}))};h.FilenameEditHandler=function(c,g){function a(a,c){a=a.value;if(void 0!==a&&0<h.trimStr(a).length){var d=b.onGetName(c);d=h.getExtension(d);void 0!==d&&(a=a+"."+d);b.onSetName(c,a)}b.onEditingStatusChange(c,!1)}function f(b,c){g.getDisposeSupport().attach(b,"blur",function(){a(b,c)})}function d(b,c){g.getDisposeSupport().attach(b,
"keyup",function(d){13===(d.keyCode||d.which)&&a(b,c)})}var b={templating:null,log:function(a,b){},onGetUploadStatus:function(a){},onGetName:function(a){},onSetName:function(a,b){},onEditingStatusChange:function(a,b){}};h.extend(b,c);b.attachTo=b.templating.getFileList();h.extend(this,new h.UiEventHandler(b,g));h.extend(g,{handleFilenameEdit:function(a,c,g){c=b.templating.getEditInput(a);b.onEditingStatusChange(a,!0);var h=b.onGetName(a),k=h.lastIndexOf(".");0<k&&(h=h.substr(0,k));c.value=h;g&&c.focus();
f(c,a);d(c,a)}})};(function(){h.s3.FineUploader=function(c){var g={failedUploadTextDisplay:{mode:"custom"}};h.extend(g,c,!0);h.FineUploader.call(this,g,"s3");h.supportedFeatures.ajaxUploading||void 0!==g.iframeSupport.localBlankPagePath||(this._options.element.innerHTML="<div>You MUST set the <code>localBlankPagePath</code> property of the <code>iframeSupport</code> option since this browser does not support the File API!</div>")};h.extend(h.s3.FineUploader.prototype,h.s3.FineUploaderBasic.prototype);
h.extend(h.s3.FineUploader.prototype,h.uiPublicApi);h.extend(h.s3.FineUploader.prototype,h.uiPrivateApi)})()})(window);/*
 Bootstrap v3.3.7 (http://getbootstrap.com)
 Copyright 2011-2016 Twitter, Inc.
 Licensed under the MIT license
*/
if("undefined"===typeof jQuery)throw Error("Bootstrap's JavaScript requires jQuery");+function(k){k=k.fn.jquery.split(" ")[0].split(".");if(2>k[0]&&9>k[1]||1==k[0]&&9==k[1]&&1>k[2]||3<k[0])throw Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4");}(jQuery);
+function(k){function h(){var c=document.createElement("bootstrap"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},a;for(a in g)if(void 0!==c.style[a])return{end:g[a]};return!1}k.fn.emulateTransitionEnd=function(c){var g=!1,a=this;k(this).one("bsTransitionEnd",function(){g=!0});setTimeout(function(){g||k(a).trigger(k.support.transition.end)},c);return this};k(function(){k.support.transition=h();k.support.transition&&
(k.event.special.bsTransitionEnd={bindType:k.support.transition.end,delegateType:k.support.transition.end,handle:function(c){if(k(c.target).is(this))return c.handleObj.handler.apply(this,arguments)}})})}(jQuery);
+function(k){var h=function(c){k(c).on("click",'[data-dismiss="alert"]',this.close)};h.VERSION="3.3.7";h.TRANSITION_DURATION=150;h.prototype.close=function(c){function a(){b.detach().trigger("closed.bs.alert").remove()}var f=k(this),d=f.attr("data-target");d||(d=(d=f.attr("href"))&&d.replace(/.*(?=#[^\s]*$)/,""));var b=k("#"===d?[]:d);c&&c.preventDefault();b.length||(b=f.closest(".alert"));b.trigger(c=k.Event("close.bs.alert"));c.isDefaultPrevented()||(b.removeClass("in"),k.support.transition&&b.hasClass("fade")?
b.one("bsTransitionEnd",a).emulateTransitionEnd(h.TRANSITION_DURATION):a())};var c=k.fn.alert;k.fn.alert=function(c){return this.each(function(){var a=k(this),f=a.data("bs.alert");f||a.data("bs.alert",f=new h(this));"string"==typeof c&&f[c].call(a)})};k.fn.alert.Constructor=h;k.fn.alert.noConflict=function(){k.fn.alert=c;return this};k(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',h.prototype.close)}(jQuery);
+function(k){function h(a){return this.each(function(){var f=k(this),d=f.data("bs.button"),b="object"==typeof a&&a;d||f.data("bs.button",d=new c(this,b));"toggle"==a?d.toggle():a&&d.setState(a)})}var c=function(a,f){this.$element=k(a);this.options=k.extend({},c.DEFAULTS,f);this.isLoading=!1};c.VERSION="3.3.7";c.DEFAULTS={loadingText:"loading..."};c.prototype.setState=function(a){var c=this.$element,d=c.is("input")?"val":"html",b=c.data();a+="Text";null==b.resetText&&c.data("resetText",c[d]());setTimeout(k.proxy(function(){c[d](null==
b[a]?this.options[a]:b[a]);"loadingText"==a?(this.isLoading=!0,c.addClass("disabled").attr("disabled","disabled").prop("disabled",!0)):this.isLoading&&(this.isLoading=!1,c.removeClass("disabled").removeAttr("disabled").prop("disabled",!1))},this),0)};c.prototype.toggle=function(){var a=!0,c=this.$element.closest('[data-toggle="buttons"]');if(c.length){var d=this.$element.find("input");"radio"==d.prop("type")?(d.prop("checked")&&(a=!1),c.find(".active").removeClass("active"),this.$element.addClass("active")):
"checkbox"==d.prop("type")&&(d.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active"));d.prop("checked",this.$element.hasClass("active"));a&&d.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var g=k.fn.button;k.fn.button=h;k.fn.button.Constructor=c;k.fn.button.noConflict=function(){k.fn.button=g;return this};k(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(a){var c=
k(a.target).closest(".btn");h.call(c,"toggle");k(a.target).is('input[type="radio"], input[type="checkbox"]')||(a.preventDefault(),c.is("input,button")?c.trigger("focus"):c.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(a){k(a.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(a.type))})}(jQuery);
+function(k){function h(a){return this.each(function(){var d=k(this),b=d.data("bs.carousel"),f=k.extend({},c.DEFAULTS,d.data(),"object"==typeof a&&a),g="string"==typeof a?a:f.slide;b||d.data("bs.carousel",b=new c(this,f));if("number"==typeof a)b.to(a);else if(g)b[g]();else f.interval&&b.pause().cycle()})}var c=function(a,c){this.$element=k(a);this.$indicators=this.$element.find(".carousel-indicators");this.options=c;this.$items=this.$active=this.interval=this.sliding=this.paused=null;this.options.keyboard&&
this.$element.on("keydown.bs.carousel",k.proxy(this.keydown,this));"hover"!=this.options.pause||"ontouchstart"in document.documentElement||this.$element.on("mouseenter.bs.carousel",k.proxy(this.pause,this)).on("mouseleave.bs.carousel",k.proxy(this.cycle,this))};c.VERSION="3.3.7";c.TRANSITION_DURATION=600;c.DEFAULTS={interval:5E3,pause:"hover",wrap:!0,keyboard:!0};c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();
break;default:return}a.preventDefault()}};c.prototype.cycle=function(a){a||(this.paused=!1);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(k.proxy(this.next,this),this.options.interval));return this};c.prototype.getItemIndex=function(a){this.$items=a.parent().children(".item");return this.$items.index(a||this.$active)};c.prototype.getItemForDirection=function(a,c){var b=this.getItemIndex(c);return("prev"==a&&0===b||"next"==a&&b==this.$items.length-
1)&&!this.options.wrap?c:this.$items.eq((b+("prev"==a?-1:1))%this.$items.length)};c.prototype.to=function(a){var c=this,b=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||0>a))return this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(a)}):b==a?this.pause().cycle():this.slide(a>b?"next":"prev",this.$items.eq(a))};c.prototype.pause=function(a){a||(this.paused=!0);this.$element.find(".next, .prev").length&&k.support.transition&&(this.$element.trigger(k.support.transition.end),
this.cycle(!0));this.interval=clearInterval(this.interval);return this};c.prototype.next=function(){if(!this.sliding)return this.slide("next")};c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};c.prototype.slide=function(a,d){var b=this.$element.find(".item.active"),f=d||this.getItemForDirection(a,b);d=this.interval;var g="next"==a?"left":"right",h=this;if(f.hasClass("active"))return this.sliding=!1;var r=f[0],w=k.Event("slide.bs.carousel",{relatedTarget:r,direction:g});this.$element.trigger(w);
if(!w.isDefaultPrevented()){this.sliding=!0;d&&this.pause();this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),(w=k(this.$indicators.children()[this.getItemIndex(f)]))&&w.addClass("active"));var z=k.Event("slid.bs.carousel",{relatedTarget:r,direction:g});k.support.transition&&this.$element.hasClass("slide")?(f.addClass(a),f[0].offsetWidth,b.addClass(g),f.addClass(g),b.one("bsTransitionEnd",function(){f.removeClass([a,g].join(" ")).addClass("active");b.removeClass(["active",
g].join(" "));h.sliding=!1;setTimeout(function(){h.$element.trigger(z)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(b.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(z));d&&this.cycle();return this}};var g=k.fn.carousel;k.fn.carousel=h;k.fn.carousel.Constructor=c;k.fn.carousel.noConflict=function(){k.fn.carousel=g;return this};var a=function(a){var c,b=k(this),f=k(b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){c=
k.extend({},f.data(),b.data());if(b=b.attr("data-slide-to"))c.interval=!1;h.call(f,c);b&&f.data("bs.carousel").to(b);a.preventDefault()}};k(document).on("click.bs.carousel.data-api","[data-slide]",a).on("click.bs.carousel.data-api","[data-slide-to]",a);k(window).on("load",function(){k('[data-ride="carousel"]').each(function(){var a=k(this);h.call(a,a.data())})})}(jQuery);
+function(k){function h(a){var c;a=a.attr("data-target")||(c=a.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return k(a)}function c(a){return this.each(function(){var c=k(this),b=c.data("bs.collapse"),f=k.extend({},g.DEFAULTS,c.data(),"object"==typeof a&&a);!b&&f.toggle&&/show|hide/.test(a)&&(f.toggle=!1);b||c.data("bs.collapse",b=new g(this,f));if("string"==typeof a)b[a]()})}var g=function(a,c){this.$element=k(a);this.options=k.extend({},g.DEFAULTS,c);this.$trigger=k('[data-toggle="collapse"][href="#'+
a.id+'"],[data-toggle="collapse"][data-target="#'+a.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()};g.VERSION="3.3.7";g.TRANSITION_DURATION=350;g.DEFAULTS={toggle:!0};g.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"};g.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var a,d=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");
if(d&&d.length&&(a=d.data("bs.collapse"))&&a.transitioning)return;var b=k.Event("show.bs.collapse");this.$element.trigger(b);if(!b.isDefaultPrevented()){d&&d.length&&(c.call(d,"hide"),a||d.data("bs.collapse",null));var h=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[h](0).attr("aria-expanded",!0);this.$trigger.removeClass("collapsed").attr("aria-expanded",!0);this.transitioning=1;a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[h]("");this.transitioning=
0;this.$element.trigger("shown.bs.collapse")};if(!k.support.transition)return a.call(this);d=k.camelCase(["scroll",h].join("-"));this.$element.one("bsTransitionEnd",k.proxy(a,this)).emulateTransitionEnd(g.TRANSITION_DURATION)[h](this.$element[0][d])}}};g.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var a=k.Event("hide.bs.collapse");this.$element.trigger(a);if(!a.isDefaultPrevented()){a=this.dimension();this.$element[a](this.$element[a]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",
!1);this.$trigger.addClass("collapsed").attr("aria-expanded",!1);this.transitioning=1;var c=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!k.support.transition)return c.call(this);this.$element[a](0).one("bsTransitionEnd",k.proxy(c,this)).emulateTransitionEnd(g.TRANSITION_DURATION)}}};g.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};g.prototype.getParent=function(){return k(this.options.parent).find('[data-toggle="collapse"][data-parent="'+
this.options.parent+'"]').each(k.proxy(function(a,c){a=k(c);this.addAriaAndCollapsedClass(h(a),a)},this)).end()};g.prototype.addAriaAndCollapsedClass=function(a,c){var b=a.hasClass("in");a.attr("aria-expanded",b);c.toggleClass("collapsed",!b).attr("aria-expanded",b)};var a=k.fn.collapse;k.fn.collapse=c;k.fn.collapse.Constructor=g;k.fn.collapse.noConflict=function(){k.fn.collapse=a;return this};k(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(a){var d=k(this);d.attr("data-target")||
a.preventDefault();a=h(d);d=a.data("bs.collapse")?"toggle":d.data();c.call(a,d)})}(jQuery);
+function(k){function h(a){var c=a.attr("data-target");c||(c=(c=a.attr("href"))&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));return(c=c&&k(c))&&c.length?c:a.parent()}function c(a){a&&3===a.which||(k(".dropdown-backdrop").remove(),k('[data-toggle="dropdown"]').each(function(){var c=k(this),b=h(c),f={relatedTarget:this};!b.hasClass("open")||a&&"click"==a.type&&/input|textarea/i.test(a.target.tagName)&&k.contains(b[0],a.target)||(b.trigger(a=k.Event("hide.bs.dropdown",f)),a.isDefaultPrevented()||
(c.attr("aria-expanded","false"),b.removeClass("open").trigger(k.Event("hidden.bs.dropdown",f))))}))}var g=function(a){k(a).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7";g.prototype.toggle=function(a){var d=k(this);if(!d.is(".disabled, :disabled")){var b=h(d);a=b.hasClass("open");c();if(!a){if("ontouchstart"in document.documentElement&&!b.closest(".navbar-nav").length)k(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(k(this)).on("click",c);var f={relatedTarget:this};
b.trigger(a=k.Event("show.bs.dropdown",f));if(a.isDefaultPrevented())return;d.trigger("focus").attr("aria-expanded","true");b.toggleClass("open").trigger(k.Event("shown.bs.dropdown",f))}return!1}};g.prototype.keydown=function(a){if(/(38|40|27|32)/.test(a.which)&&!/input|textarea/i.test(a.target.tagName)){var c=k(this);a.preventDefault();a.stopPropagation();if(!c.is(".disabled, :disabled")){var b=h(c),f=b.hasClass("open");if(!f&&27!=a.which||f&&27==a.which)return 27==a.which&&b.find('[data-toggle="dropdown"]').trigger("focus"),
c.trigger("click");c=b.find(".dropdown-menu li:not(.disabled):visible a");c.length&&(b=c.index(a.target),38==a.which&&0<b&&b--,40==a.which&&b<c.length-1&&b++,~b||(b=0),c.eq(b).trigger("focus"))}}};var a=k.fn.dropdown;k.fn.dropdown=function(a){return this.each(function(){var c=k(this),b=c.data("bs.dropdown");b||c.data("bs.dropdown",b=new g(this));"string"==typeof a&&b[a].call(c)})};k.fn.dropdown.Constructor=g;k.fn.dropdown.noConflict=function(){k.fn.dropdown=a;return this};k(document).on("click.bs.dropdown.data-api",
c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",'[data-toggle="dropdown"]',g.prototype.toggle).on("keydown.bs.dropdown.data-api",'[data-toggle="dropdown"]',g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery);
+function(k){function h(a,f){return this.each(function(){var d=k(this),b=d.data("bs.modal"),g=k.extend({},c.DEFAULTS,d.data(),"object"==typeof a&&a);b||d.data("bs.modal",b=new c(this,g));if("string"==typeof a)b[a](f);else g.show&&b.show(f)})}var c=function(a,c){this.options=c;this.$body=k(document.body);this.$element=k(a);this.$dialog=this.$element.find(".modal-dialog");this.originalBodyPad=this.isShown=this.$backdrop=null;this.scrollbarWidth=0;this.ignoreBackdropClick=!1;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,
k.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7";c.TRANSITION_DURATION=300;c.BACKDROP_TRANSITION_DURATION=150;c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)};c.prototype.show=function(a){var f=this,d=k.Event("show.bs.modal",{relatedTarget:a});this.$element.trigger(d);this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),
this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',k.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){f.$element.one("mouseup.dismiss.bs.modal",function(a){k(a.target).is(f.$element)&&(f.ignoreBackdropClick=!0)})}),this.backdrop(function(){var b=k.support.transition&&f.$element.hasClass("fade");f.$element.parent().length||f.$element.appendTo(f.$body);f.$element.show().scrollTop(0);f.adjustDialog();b&&f.$element[0].offsetWidth;
f.$element.addClass("in");f.enforceFocus();var d=k.Event("shown.bs.modal",{relatedTarget:a});b?f.$dialog.one("bsTransitionEnd",function(){f.$element.trigger("focus").trigger(d)}).emulateTransitionEnd(c.TRANSITION_DURATION):f.$element.trigger("focus").trigger(d)}))};c.prototype.hide=function(a){a&&a.preventDefault();a=k.Event("hide.bs.modal");this.$element.trigger(a);this.isShown&&!a.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),k(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),
this.$dialog.off("mousedown.dismiss.bs.modal"),k.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",k.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())};c.prototype.enforceFocus=function(){k(document).off("focusin.bs.modal").on("focusin.bs.modal",k.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))};c.prototype.escape=function(){if(this.isShown&&
this.options.keyboard)this.$element.on("keydown.dismiss.bs.modal",k.proxy(function(a){27==a.which&&this.hide()},this));else this.isShown||this.$element.off("keydown.dismiss.bs.modal")};c.prototype.resize=function(){if(this.isShown)k(window).on("resize.bs.modal",k.proxy(this.handleUpdate,this));else k(window).off("resize.bs.modal")};c.prototype.hideModal=function(){var a=this;this.$element.hide();this.backdrop(function(){a.$body.removeClass("modal-open");a.resetAdjustments();a.resetScrollbar();a.$element.trigger("hidden.bs.modal")})};
c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};c.prototype.backdrop=function(a){var f=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var b=k.support.transition&&d;this.$backdrop=k(document.createElement("div")).addClass("modal-backdrop "+d).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",k.proxy(function(a){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:a.target===a.currentTarget&&("static"==
this.options.backdrop?this.$element[0].focus():this.hide())},this));b&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");a&&(b?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):a())}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),d=function(){f.removeBackdrop();a&&a()},k.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",d).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):d()):a&&a()};
c.prototype.handleUpdate=function(){this.adjustDialog()};c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})};c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};c.prototype.checkScrollbar=function(){var a=window.innerWidth;a||(a=document.documentElement.getBoundingClientRect(),
a=a.right-Math.abs(a.left));this.bodyIsOverflowing=document.body.clientWidth<a;this.scrollbarWidth=this.measureScrollbar()};c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)};c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};c.prototype.measureScrollbar=function(){var a=document.createElement("div");
a.className="modal-scrollbar-measure";this.$body.append(a);var c=a.offsetWidth-a.clientWidth;this.$body[0].removeChild(a);return c};var g=k.fn.modal;k.fn.modal=h;k.fn.modal.Constructor=c;k.fn.modal.noConflict=function(){k.fn.modal=g;return this};k(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(a){var c=k(this),d=c.attr("href"),b=k(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,""));d=b.data("bs.modal")?"toggle":k.extend({remote:!/#/.test(d)&&d},b.data(),c.data());c.is("a")&&
a.preventDefault();b.one("show.bs.modal",function(a){if(!a.isDefaultPrevented())b.one("hidden.bs.modal",function(){c.is(":visible")&&c.trigger("focus")})});h.call(b,d,this)})}(jQuery);
+function(k){var h=function(c,a){this.inState=this.$element=this.hoverState=this.timeout=this.enabled=this.options=this.type=null;this.init("tooltip",c,a)};h.VERSION="3.3.7";h.TRANSITION_DURATION=150;h.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};h.prototype.init=function(c,a,
f){this.enabled=!0;this.type=c;this.$element=k(a);this.options=this.getOptions(f);this.$viewport=this.options.viewport&&k(k.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:!1,hover:!1,focus:!1};if(this.$element[0]instanceof document.constructor&&!this.options.selector)throw Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");c=this.options.trigger.split(" ");
for(a=c.length;a--;)if(f=c[a],"click"==f)this.$element.on("click."+this.type,this.options.selector,k.proxy(this.toggle,this));else if("manual"!=f){var d="hover"==f?"mouseleave":"focusout";this.$element.on(("hover"==f?"mouseenter":"focusin")+"."+this.type,this.options.selector,k.proxy(this.enter,this));this.$element.on(d+"."+this.type,this.options.selector,k.proxy(this.leave,this))}this.options.selector?this._options=k.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};h.prototype.getDefaults=
function(){return h.DEFAULTS};h.prototype.getOptions=function(c){c=k.extend({},this.getDefaults(),this.$element.data(),c);c.delay&&"number"==typeof c.delay&&(c.delay={show:c.delay,hide:c.delay});return c};h.prototype.getDelegateOptions=function(){var c={},a=this.getDefaults();this._options&&k.each(this._options,function(f,d){a[f]!=d&&(c[f]=d)});return c};h.prototype.enter=function(c){var a=c instanceof this.constructor?c:k(c.currentTarget).data("bs."+this.type);a||(a=new this.constructor(c.currentTarget,
this.getDelegateOptions()),k(c.currentTarget).data("bs."+this.type,a));c instanceof k.Event&&(a.inState["focusin"==c.type?"focus":"hover"]=!0);if(a.tip().hasClass("in")||"in"==a.hoverState)a.hoverState="in";else{clearTimeout(a.timeout);a.hoverState="in";if(!a.options.delay||!a.options.delay.show)return a.show();a.timeout=setTimeout(function(){"in"==a.hoverState&&a.show()},a.options.delay.show)}};h.prototype.isInStateTrue=function(){for(var c in this.inState)if(this.inState[c])return!0;return!1};h.prototype.leave=
function(c){var a=c instanceof this.constructor?c:k(c.currentTarget).data("bs."+this.type);a||(a=new this.constructor(c.currentTarget,this.getDelegateOptions()),k(c.currentTarget).data("bs."+this.type,a));c instanceof k.Event&&(a.inState["focusout"==c.type?"focus":"hover"]=!1);if(!a.isInStateTrue()){clearTimeout(a.timeout);a.hoverState="out";if(!a.options.delay||!a.options.delay.hide)return a.hide();a.timeout=setTimeout(function(){"out"==a.hoverState&&a.hide()},a.options.delay.hide)}};h.prototype.show=
function(){var c=k.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(c);var a=k.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(!c.isDefaultPrevented()&&a){var f=this;c=this.tip();a=this.getUID(this.type);this.setContent();c.attr("id",a);this.$element.attr("aria-describedby",a);this.options.animation&&c.addClass("fade");a="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement;
var d=/\s?auto?\s?/i,b=d.test(a);b&&(a=a.replace(d,"")||"top");c.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this);this.options.container?c.appendTo(this.options.container):c.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);d=this.getPosition();var l=c[0].offsetWidth,n=c[0].offsetHeight;if(b){b=a;var p=this.getPosition(this.$viewport);a="bottom"==a&&d.bottom+n>p.bottom?"top":"top"==a&&d.top-n<p.top?"bottom":"right"==a&&d.right+l>p.width?
"left":"left"==a&&d.left-l<p.left?"right":a;c.removeClass(b).addClass(a)}d=this.getCalculatedOffset(a,d,l,n);this.applyPlacement(d,a);a=function(){var a=f.hoverState;f.$element.trigger("shown.bs."+f.type);f.hoverState=null;"out"==a&&f.leave(f)};k.support.transition&&this.$tip.hasClass("fade")?c.one("bsTransitionEnd",a).emulateTransitionEnd(h.TRANSITION_DURATION):a()}}};h.prototype.applyPlacement=function(c,a){var f=this.tip(),d=f[0].offsetWidth,b=f[0].offsetHeight,g=parseInt(f.css("margin-top"),10),
h=parseInt(f.css("margin-left"),10);isNaN(g)&&(g=0);isNaN(h)&&(h=0);c.top+=g;c.left+=h;k.offset.setOffset(f[0],k.extend({using:function(a){f.css({top:Math.round(a.top),left:Math.round(a.left)})}},c),0);f.addClass("in");g=f[0].offsetWidth;h=f[0].offsetHeight;"top"==a&&h!=b&&(c.top=c.top+b-h);var p=this.getViewportAdjustedDelta(a,c,g,h);p.left?c.left+=p.left:c.top+=p.top;d=(a=/top|bottom/.test(a))?2*p.left-d+g:2*p.top-b+h;b=a?"offsetWidth":"offsetHeight";f.offset(c);this.replaceArrow(d,f[0][b],a)};
h.prototype.replaceArrow=function(c,a,f){this.arrow().css(f?"left":"top",50*(1-c/a)+"%").css(f?"top":"left","")};h.prototype.setContent=function(){var c=this.tip(),a=this.getTitle();c.find(".tooltip-inner")[this.options.html?"html":"text"](a);c.removeClass("fade in top bottom left right")};h.prototype.hide=function(c){function a(){"in"!=f.hoverState&&d.detach();f.$element&&f.$element.removeAttr("aria-describedby").trigger("hidden.bs."+f.type);c&&c()}var f=this,d=k(this.$tip),b=k.Event("hide.bs."+
this.type);this.$element.trigger(b);if(!b.isDefaultPrevented())return d.removeClass("in"),k.support.transition&&d.hasClass("fade")?d.one("bsTransitionEnd",a).emulateTransitionEnd(h.TRANSITION_DURATION):a(),this.hoverState=null,this};h.prototype.fixTitle=function(){var c=this.$element;(c.attr("title")||"string"!=typeof c.attr("data-original-title"))&&c.attr("data-original-title",c.attr("title")||"").attr("title","")};h.prototype.hasContent=function(){return this.getTitle()};h.prototype.getPosition=
function(c){c=c||this.$element;var a=c[0],f="BODY"==a.tagName,d=a.getBoundingClientRect();null==d.width&&(d=k.extend({},d,{width:d.right-d.left,height:d.bottom-d.top}));a=window.SVGElement&&a instanceof window.SVGElement;a=f?{top:0,left:0}:a?null:c.offset();c={scroll:f?document.documentElement.scrollTop||document.body.scrollTop:c.scrollTop()};f=f?{width:k(window).width(),height:k(window).height()}:null;return k.extend({},d,c,f,a)};h.prototype.getCalculatedOffset=function(c,a,f,d){return"bottom"==
c?{top:a.top+a.height,left:a.left+a.width/2-f/2}:"top"==c?{top:a.top-d,left:a.left+a.width/2-f/2}:"left"==c?{top:a.top+a.height/2-d/2,left:a.left-f}:{top:a.top+a.height/2-d/2,left:a.left+a.width}};h.prototype.getViewportAdjustedDelta=function(c,a,f,d){var b={top:0,left:0};if(!this.$viewport)return b;var g=this.options.viewport&&this.options.viewport.padding||0,h=this.getPosition(this.$viewport);/right|left/.test(c)?(f=a.top-g-h.scroll,a=a.top+g-h.scroll+d,f<h.top?b.top=h.top-f:a>h.top+h.height&&(b.top=
h.top+h.height-a)):(d=a.left-g,a=a.left+g+f,d<h.left?b.left=h.left-d:a>h.right&&(b.left=h.left+h.width-a));return b};h.prototype.getTitle=function(){var c=this.$element,a=this.options;return c.attr("data-original-title")||("function"==typeof a.title?a.title.call(c[0]):a.title)};h.prototype.getUID=function(c){do c+=~~(1E6*Math.random());while(document.getElementById(c));return c};h.prototype.tip=function(){if(!this.$tip&&(this.$tip=k(this.options.template),1!=this.$tip.length))throw Error(this.type+
" `template` option must consist of exactly 1 top-level element!");return this.$tip};h.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};h.prototype.enable=function(){this.enabled=!0};h.prototype.disable=function(){this.enabled=!1};h.prototype.toggleEnabled=function(){this.enabled=!this.enabled};h.prototype.toggle=function(c){var a=this;c&&(a=k(c.currentTarget).data("bs."+this.type),a||(a=new this.constructor(c.currentTarget,this.getDelegateOptions()),k(c.currentTarget).data("bs."+
this.type,a)));c?(a.inState.click=!a.inState.click,a.isInStateTrue()?a.enter(a):a.leave(a)):a.tip().hasClass("in")?a.leave(a):a.enter(a)};h.prototype.destroy=function(){var c=this;clearTimeout(this.timeout);this.hide(function(){c.$element.off("."+c.type).removeData("bs."+c.type);c.$tip&&c.$tip.detach();c.$tip=null;c.$arrow=null;c.$viewport=null;c.$element=null})};var c=k.fn.tooltip;k.fn.tooltip=function(c){return this.each(function(){var a=k(this),f=a.data("bs.tooltip"),d="object"==typeof c&&c;if(f||
!/destroy|hide/.test(c))if(f||a.data("bs.tooltip",f=new h(this,d)),"string"==typeof c)f[c]()})};k.fn.tooltip.Constructor=h;k.fn.tooltip.noConflict=function(){k.fn.tooltip=c;return this}}(jQuery);
+function(k){var h=function(c,a){this.init("popover",c,a)};if(!k.fn.tooltip)throw Error("Popover requires tooltip.js");h.VERSION="3.3.7";h.DEFAULTS=k.extend({},k.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});h.prototype=k.extend({},k.fn.tooltip.Constructor.prototype);h.prototype.constructor=h;h.prototype.getDefaults=function(){return h.DEFAULTS};
h.prototype.setContent=function(){var c=this.tip(),a=this.getTitle(),f=this.getContent();c.find(".popover-title")[this.options.html?"html":"text"](a);c.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof f?"html":"append":"text"](f);c.removeClass("fade top bottom left right in");c.find(".popover-title").html()||c.find(".popover-title").hide()};h.prototype.hasContent=function(){return this.getTitle()||this.getContent()};h.prototype.getContent=function(){var c=this.$element,
a=this.options;return c.attr("data-content")||("function"==typeof a.content?a.content.call(c[0]):a.content)};h.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var c=k.fn.popover;k.fn.popover=function(c){return this.each(function(){var a=k(this),f=a.data("bs.popover"),d="object"==typeof c&&c;if(f||!/destroy|hide/.test(c))if(f||a.data("bs.popover",f=new h(this,d)),"string"==typeof c)f[c]()})};k.fn.popover.Constructor=h;k.fn.popover.noConflict=function(){k.fn.popover=
c;return this}}(jQuery);
+function(k){function h(a,c){this.$body=k(document.body);this.$scrollElement=k(a).is(document.body)?k(window):k(a);this.options=k.extend({},h.DEFAULTS,c);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",k.proxy(this.process,this));this.refresh();this.process()}function c(a){return this.each(function(){var c=k(this),d=c.data("bs.scrollspy"),b="object"==typeof a&&a;d||c.data("bs.scrollspy",
d=new h(this,b));if("string"==typeof a)d[a]()})}h.VERSION="3.3.7";h.DEFAULTS={offset:10};h.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};h.prototype.refresh=function(){var a=this,c="offset",d=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();k.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop());this.$body.find(this.selector).map(function(){var a=
k(this);a=a.data("target")||a.attr("href");var f=/^#./.test(a)&&k(a);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,a]]||null}).sort(function(a,c){return a[0]-c[0]}).each(function(){a.offsets.push(this[0]);a.targets.push(this[1])})};h.prototype.process=function(){var a=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),b=this.offsets,g=this.targets,h=this.activeTarget,k;this.scrollHeight!=c&&this.refresh();if(a>=
d)return h!=(k=g[g.length-1])&&this.activate(k);if(h&&a<b[0])return this.activeTarget=null,this.clear();for(k=b.length;k--;)h!=g[k]&&a>=b[k]&&(void 0===b[k+1]||a<b[k+1])&&this.activate(g[k])};h.prototype.activate=function(a){this.activeTarget=a;this.clear();a=k(this.selector+'[data-target="'+a+'"],'+this.selector+'[href="'+a+'"]').parents("li").addClass("active");a.parent(".dropdown-menu").length&&(a=a.closest("li.dropdown").addClass("active"));a.trigger("activate.bs.scrollspy")};h.prototype.clear=
function(){k(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var g=k.fn.scrollspy;k.fn.scrollspy=c;k.fn.scrollspy.Constructor=h;k.fn.scrollspy.noConflict=function(){k.fn.scrollspy=g;return this};k(window).on("load.bs.scrollspy.data-api",function(){k('[data-spy="scroll"]').each(function(){var a=k(this);c.call(a,a.data())})})}(jQuery);
+function(k){function h(a){return this.each(function(){var d=k(this),b=d.data("bs.tab");b||d.data("bs.tab",b=new c(this));if("string"==typeof a)b[a]()})}var c=function(a){this.element=k(a)};c.VERSION="3.3.7";c.TRANSITION_DURATION=150;c.prototype.show=function(){var a=this.element,c=a.closest("ul:not(.dropdown-menu)"),b=a.data("target");b||(b=(b=a.attr("href"))&&b.replace(/.*(?=#[^\s]*$)/,""));if(!a.parent("li").hasClass("active")){var g=c.find(".active:last a"),h=k.Event("hide.bs.tab",{relatedTarget:a[0]}),
p=k.Event("show.bs.tab",{relatedTarget:g[0]});g.trigger(h);a.trigger(p);p.isDefaultPrevented()||h.isDefaultPrevented()||(b=k(b),this.activate(a.closest("li"),c),this.activate(b,b.parent(),function(){g.trigger({type:"hidden.bs.tab",relatedTarget:a[0]});a.trigger({type:"shown.bs.tab",relatedTarget:g[0]})}))}};c.prototype.activate=function(a,d,b){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1);a.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",
!0);h?(a[0].offsetWidth,a.addClass("in")):a.removeClass("fade");a.parent(".dropdown-menu").length&&a.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);b&&b()}var g=d.find("> .active"),h=b&&k.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f();g.removeClass("in")};var g=k.fn.tab;k.fn.tab=h;k.fn.tab.Constructor=c;k.fn.tab.noConflict=function(){k.fn.tab=
g;return this};var a=function(a){a.preventDefault();h.call(k(this),"show")};k(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',a).on("click.bs.tab.data-api",'[data-toggle="pill"]',a)}(jQuery);
+function(k){function h(a){return this.each(function(){var f=k(this),d=f.data("bs.affix"),b="object"==typeof a&&a;d||f.data("bs.affix",d=new c(this,b));if("string"==typeof a)d[a]()})}var c=function(a,f){this.options=k.extend({},c.DEFAULTS,f);this.$target=k(this.options.target).on("scroll.bs.affix.data-api",k.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",k.proxy(this.checkPositionWithEventLoop,this));this.$element=k(a);this.pinnedOffset=this.unpin=this.affixed=null;this.checkPosition()};
c.VERSION="3.3.7";c.RESET="affix affix-top affix-bottom";c.DEFAULTS={offset:0,target:window};c.prototype.getState=function(a,c,d,b){var f=this.$target.scrollTop(),g=this.$element.offset(),h=this.$target.height();if(null!=d&&"top"==this.affixed)return f<d?"top":!1;if("bottom"==this.affixed)return null!=d?f+this.unpin<=g.top?!1:"bottom":f+h<=a-b?!1:"bottom";var k=null==this.affixed;g=k?f:g.top;return null!=d&&f<=d?"top":null!=b&&g+(k?h:c)>=a-b?"bottom":!1};c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;
this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop();return this.pinnedOffset=this.$element.offset().top-a};c.prototype.checkPositionWithEventLoop=function(){setTimeout(k.proxy(this.checkPosition,this),1)};c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var a=this.$element.height(),f=this.options.offset,d=f.top,b=f.bottom,g=Math.max(k(document).height(),k(document.body).height());"object"!=typeof f&&(b=d=f);"function"==typeof d&&(d=f.top(this.$element));
"function"==typeof b&&(b=f.bottom(this.$element));f=this.getState(g,a,d,b);if(this.affixed!=f){null!=this.unpin&&this.$element.css("top","");d="affix"+(f?"-"+f:"");var h=k.Event(d+".bs.affix");this.$element.trigger(h);if(h.isDefaultPrevented())return;this.affixed=f;this.unpin="bottom"==f?this.getPinnedOffset():null;this.$element.removeClass(c.RESET).addClass(d).trigger(d.replace("affix","affixed")+".bs.affix")}"bottom"==f&&this.$element.offset({top:g-a-b})}};var g=k.fn.affix;k.fn.affix=h;k.fn.affix.Constructor=
c;k.fn.affix.noConflict=function(){k.fn.affix=g;return this};k(window).on("load",function(){k('[data-spy="affix"]').each(function(){var a=k(this),c=a.data();c.offset=c.offset||{};null!=c.offsetBottom&&(c.offset.bottom=c.offsetBottom);null!=c.offsetTop&&(c.offset.top=c.offsetTop);h.call(a,c)})})}(jQuery);(function(k,h){"function"===typeof define&&define.amd?define("pdfjs-dist/build/pdf",["exports"],h):"undefined"!==typeof exports?h(exports):h(k.pdfjsDistBuildPdf={})})(this,function(k){var h="undefined"!==typeof document&&document.currentScript?document.currentScript.src:null,c={};(function(){(function(c,a){a(c.pdfjsSharedUtil={})})(this,function(c){function a(a){t>=v.warnings&&console.log("Warning: "+a)}function f(a){t>=v.errors&&(console.log("Error: "+a),console.log(d()));throw Error(a);}function d(){try{throw Error();
}catch(aa){return aa.stack?aa.stack.split("\n").slice(2).join("\n"):""}}function b(a,b){a||f(b)}function g(a){b("string"===typeof a,"Invalid argument for stringToBytes");for(var c=a.length,d=new Uint8Array(c),e=0;e<c;++e)d[e]=a.charCodeAt(e)&255;return d}function h(a){if(void 0!==a.length)return a.length;b(void 0!==a.byteLength);return a.byteLength}function k(a){return"number"===typeof a&&(a|0)===a}function r(){var a={};a.promise=new Promise(function(b,c){a.resolve=b;a.reject=c});return a}function w(a,
b,c){this.sourceName=a;this.targetName=b;this.comObj=c;this.callbackIndex=1;this.postMessageTransfers=!0;var d=this.callbacksCapabilities=Object.create(null),e=this.actionHandler=Object.create(null);this._onComObjOnMessage=function(a){var b=a.data;if(b.targetName===this.sourceName)if(b.isReply)if(a=b.callbackId,b.callbackId in d){var g=d[a];delete d[a];"error"in b?g.reject(b.error):g.resolve(b.data)}else f("Cannot resolve callback "+a);else if(b.action in e){var h=e[b.action];if(b.callbackId){var k=
this.sourceName,l=b.sourceName;Promise.resolve().then(function(){return h[0].call(h[1],b.data)}).then(function(a){c.postMessage({sourceName:k,targetName:l,isReply:!0,callbackId:b.callbackId,data:a})},function(a){a instanceof Error&&(a+="");c.postMessage({sourceName:k,targetName:l,isReply:!0,callbackId:b.callbackId,error:a})})}else h[0].call(h[1],b.data)}else f("Unknown action from worker: "+b.action)}.bind(this);c.addEventListener("message",this._onComObjOnMessage)}var z="undefined"!==typeof window?
window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this,v={errors:0,warnings:1,infos:5},t=v.warnings,q=function(){function a(a,b){this.name="PasswordException";this.message=a;this.code=b}a.prototype=Error();return a.constructor=a}(),y=function(){function a(a,b){this.name="UnknownErrorException";this.message=a;this.details=b}a.prototype=Error();return a.constructor=a}(),A=function(){function a(a){this.name="InvalidPDFException";this.message=a}a.prototype=Error();return a.constructor=
a}(),C=function(){function a(a){this.name="MissingPDFException";this.message=a}a.prototype=Error();return a.constructor=a}(),G=function(){function a(a,b){this.name="UnexpectedResponseException";this.message=a;this.status=b}a.prototype=Error();return a.constructor=a}(),E=function(){function a(a){this.message=a}a.prototype=Error();a.prototype.name="NotImplementedException";return a.constructor=a}(),F=function(){function a(a,b){this.begin=a;this.end=b;this.message="Missing data ["+a+", "+b+")"}a.prototype=
Error();a.prototype.name="MissingDataException";return a.constructor=a}(),I=function(){function a(a){this.message=a}a.prototype=Error();a.prototype.name="XRefParseException";return a.constructor=a}(),e=/\x00/g,m=function(){function a(d,e){this.buffer=d;this.byteLength=d.length;for(d=this.length=void 0===e?this.byteLength>>2:e;c<d;)Object.defineProperty(a.prototype,c,b(c)),c++}function b(a){return{get:function(){var b=this.buffer,c=a<<2;return(b[c]|b[c+1]<<8|b[c+2]<<16|b[c+3]<<24)>>>0},set:function(b){var c=
this.buffer,d=a<<2;c[d]=b&255;c[d+1]=b>>8&255;c[d+2]=b>>16&255;c[d+3]=b>>>24&255}}}a.prototype=Object.create(null);var c=0;return a}();c.Uint32ArrayView=m;var x=function(){function a(){}var c=["rgb(",0,",",0,",",0,")"];a.makeCssRgb=function(a,b,d){c[1]=a;c[3]=b;c[5]=d;return c.join("")};a.transform=function(a,b){return[a[0]*b[0]+a[2]*b[1],a[1]*b[0]+a[3]*b[1],a[0]*b[2]+a[2]*b[3],a[1]*b[2]+a[3]*b[3],a[0]*b[4]+a[2]*b[5]+a[4],a[1]*b[4]+a[3]*b[5]+a[5]]};a.applyTransform=function(a,b){return[a[0]*b[0]+
a[1]*b[2]+b[4],a[0]*b[1]+a[1]*b[3]+b[5]]};a.applyInverseTransform=function(a,b){var c=b[0]*b[3]-b[1]*b[2];return[(a[0]*b[3]-a[1]*b[2]+b[2]*b[5]-b[4]*b[3])/c,(-a[0]*b[1]+a[1]*b[0]+b[4]*b[1]-b[5]*b[0])/c]};a.getAxialAlignedBoundingBox=function(b,c){var d=a.applyTransform(b,c),e=a.applyTransform(b.slice(2,4),c),f=a.applyTransform([b[0],b[3]],c);b=a.applyTransform([b[2],b[1]],c);return[Math.min(d[0],e[0],f[0],b[0]),Math.min(d[1],e[1],f[1],b[1]),Math.max(d[0],e[0],f[0],b[0]),Math.max(d[1],e[1],f[1],b[1])]};
a.inverseTransform=function(a){var b=a[0]*a[3]-a[1]*a[2];return[a[3]/b,-a[1]/b,-a[2]/b,a[0]/b,(a[2]*a[5]-a[4]*a[3])/b,(a[4]*a[1]-a[5]*a[0])/b]};a.apply3dTransform=function(a,b){return[a[0]*b[0]+a[1]*b[1]+a[2]*b[2],a[3]*b[0]+a[4]*b[1]+a[5]*b[2],a[6]*b[0]+a[7]*b[1]+a[8]*b[2]]};a.singularValueDecompose2dScale=function(a){var b=[a[0],a[2],a[1],a[3]],c=a[0]*b[0]+a[1]*b[2],d=a[2]*b[1]+a[3]*b[3],e=(c+d)/2;a=Math.sqrt((c+d)*(c+d)-4*(c*d-(a[2]*b[0]+a[3]*b[2])*(a[0]*b[1]+a[1]*b[3])))/2;return[Math.sqrt(e+a||
1),Math.sqrt(e-a||1)]};a.normalizeRect=function(a){var b=a.slice(0);a[0]>a[2]&&(b[0]=a[2],b[2]=a[0]);a[1]>a[3]&&(b[1]=a[3],b[3]=a[1]);return b};a.intersect=function(b,c){function d(a,b){return a-b}var e=[b[0],b[2],c[0],c[2]].sort(d),f=[b[1],b[3],c[1],c[3]].sort(d),g=[];b=a.normalizeRect(b);c=a.normalizeRect(c);if(e[0]===b[0]&&e[1]===c[0]||e[0]===c[0]&&e[1]===b[0])g[0]=e[1],g[2]=e[2];else return!1;if(f[0]===b[1]&&f[1]===c[1]||f[0]===c[1]&&f[1]===b[1])g[1]=f[1],g[3]=f[2];else return!1;return g};a.sign=
function(a){return 0>a?-1:1};var d=" C CC CCC CD D DC DCC DCCC CM  X XX XXX XL L LX LXX LXXX XC  I II III IV V VI VII VIII IX".split(" ");a.toRoman=function(a,c){b(k(a)&&0<a,"The number should be a positive integer.");for(var e,f=[];1E3<=a;)a-=1E3,f.push("M");e=a/100|0;a%=100;f.push(d[e]);e=a/10|0;a%=10;f.push(d[10+e]);f.push(d[20+a]);a=f.join("");return c?a.toLowerCase():a};a.appendToArray=function(a,b){Array.prototype.push.apply(a,b)};a.prependToArray=function(a,b){Array.prototype.unshift.apply(a,
b)};a.extendObj=function(a,b){for(var c in b)a[c]=b[c]};a.getInheritableProperty=function(a,b){for(;a&&!a.has(b);)a=a.get("Parent");return a?a.get(b):null};a.inherit=function(a,b,c){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;for(var d in c)a.prototype[d]=c[d]};a.loadScript=function(a,b){var c=document.createElement("script"),d=!1;c.setAttribute("src",a);b&&(c.onload=function(){d||b();d=!0});document.getElementsByTagName("head")[0].appendChild(c)};return a}();m=function(){function a(a,
b,c,d,e,f){this.viewBox=a;this.scale=b;this.rotation=c;this.offsetX=d;this.offsetY=e;var g=(a[2]+a[0])/2,h=(a[3]+a[1])/2,k;c%=360;switch(0>c?c+360:c){case 180:c=-1;var l=k=0;var m=1;break;case 90:c=0;l=k=1;m=0;break;case 270:c=0;l=k=-1;m=0;break;default:c=1,l=k=0,m=-1}f&&(l=-l,m=-m);0===c?(d=Math.abs(h-a[1])*b+d,e=Math.abs(g-a[0])*b+e,f=Math.abs(a[3]-a[1])*b,a=Math.abs(a[2]-a[0])*b):(d=Math.abs(g-a[0])*b+d,e=Math.abs(h-a[1])*b+e,f=Math.abs(a[2]-a[0])*b,a=Math.abs(a[3]-a[1])*b);this.transform=[c*b,
k*b,l*b,m*b,d-c*b*g-l*b*h,e-k*b*g-m*b*h];this.width=f;this.height=a;this.fontScale=b}a.prototype={clone:function(b){b=b||{};var c="scale"in b?b.scale:this.scale,d="rotation"in b?b.rotation:this.rotation;return new a(this.viewBox.slice(),c,d,this.offsetX,this.offsetY,b.dontFlip)},convertToViewportPoint:function(a,b){return x.applyTransform([a,b],this.transform)},convertToViewportRectangle:function(a){var b=x.applyTransform([a[0],a[1]],this.transform);a=x.applyTransform([a[2],a[3]],this.transform);
return[b[0],b[1],a[0],a[1]]},convertToPdfPoint:function(a,b){return x.applyInverseTransform([a,b],this.transform)}};return a}();var D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,
64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];(function(){function b(a){this._status=0;this._handlers=[];try{a.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(R){this._reject(R)}}if(z.Promise)"function"!==typeof z.Promise.all&&(z.Promise.all=function(a){var b=0,c=[],d,e,f=new z.Promise(function(a,b){d=a;e=b});a.forEach(function(a,f){b++;a.then(function(a){c[f]=a;b--;0===b&&d(c)},e)});0===b&&d(c);return f}),"function"!==typeof z.Promise.resolve&&(z.Promise.resolve=function(a){return new z.Promise(function(b){b(a)})}),
"function"!==typeof z.Promise.reject&&(z.Promise.reject=function(a){return new z.Promise(function(b,c){c(a)})}),"function"!==typeof z.Promise.prototype.catch&&(z.Promise.prototype.catch=function(a){return z.Promise.prototype.then(void 0,a)});else{var c={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(a){0!==a._status&&(this.handlers=this.handlers.concat(a._handlers),a._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),
0)))},runHandlers:function(){for(var a=Date.now()+1;0<this.handlers.length;){var b=this.handlers.shift(),c=b.thisPromise._status,d=b.thisPromise._value;try{1===c?"function"===typeof b.onResolve&&(d=b.onResolve(d)):"function"===typeof b.onReject&&(d=b.onReject(d),c=1,b.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(b.thisPromise))}catch(ba){c=2,d=ba}b.nextPromise._updateStatus(c,d);if(Date.now()>=a)break}0<this.handlers.length?setTimeout(this.runHandlers.bind(this),0):this.running=
!1},addUnhandledRejection:function(a){this.unhandledRejections.push({promise:a,time:Date.now()});this.scheduleRejectionCheck()},removeUnhandeledRejection:function(a){a._unhandledRejection=!1;for(var b=0;b<this.unhandledRejections.length;b++)this.unhandledRejections[b].promise===a&&(this.unhandledRejections.splice(b),b--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=!1;for(var b=Date.now(),c=0;c<this.unhandledRejections.length;c++)if(500<
b-this.unhandledRejections[c].time){var d=this.unhandledRejections[c].promise._value,e="Unhandled rejection: "+d;d.stack&&(e+="\n"+d.stack);a(e);this.unhandledRejections.splice(c);c--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};b.all=function(a){function c(a){2!==f._status&&(h=[],e(a))}var d,e,f=new b(function(a,b){d=a;e=b}),g=a.length,h=[];if(0===g)return d(h),f;for(var k=0,l=a.length;k<l;++k){var m=a[k],n=function(a){return function(b){2!==f._status&&(h[a]=
b,g--,0===g&&d(h))}}(k);b.isPromise(m)?m.then(n,c):n(m)}return f};b.isPromise=function(a){return a&&"function"===typeof a.then};b.resolve=function(a){return new b(function(b){b(a)})};b.reject=function(a){return new b(function(b,c){c(a)})};b.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(a,d){1!==this._status&&2!==this._status&&(1===a&&b.isPromise(d)?d.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,2)):(this._status=a,this._value=
d,2===a&&0===this._handlers.length&&(this._unhandledRejection=!0,c.addUnhandledRejection(this)),c.scheduleHandlers(this)))},_resolve:function(a){this._updateStatus(1,a)},_reject:function(a){this._updateStatus(2,a)},then:function(a,d){var e=new b(function(a,b){this.resolve=a;this.reject=b});this._handlers.push({thisPromise:this,onResolve:a,onReject:d,nextPromise:e});c.scheduleHandlers(this);return e},catch:function(a){return this.then(void 0,a)}};z.Promise=b}})();var H=function(){function b(){this.started=
Object.create(null);this.times=[];this.enabled=!0}b.prototype={time:function(b){this.enabled&&(b in this.started&&a("Timer is already running for "+b),this.started[b]=Date.now())},timeEnd:function(b){this.enabled&&(b in this.started||a("Timer has not been started for "+b),this.times.push({name:b,start:this.started[b],end:Date.now()}),delete this.started[b])},toString:function(){var a,b=this.times,c="",d=0;var e=0;for(a=b.length;e<a;++e){var f=b[e].name;f.length>d&&(d=f.length)}e=0;for(a=b.length;e<
a;++e){var g=b[e];f=g.end-g.start;for(g=g.name;g.length<d;)g+=" ";c+=g+" "+f+"ms\n"}return c}};return b}(),N=function(a,b){if("undefined"!==typeof Blob)return new Blob([a],{type:b});var c=new MozBlobBuilder;c.append(a);return c.getBlob(b)},ka=function(){return function(a,b,c){if(!c&&"undefined"!==typeof URL&&URL.createObjectURL)return a=N(a,b),URL.createObjectURL(a);b="data:"+b+";base64,";c=0;for(var d=a.length;c<d;c+=3){var e=a[c]&255,f=a[c+1]&255,g=a[c+2]&255;b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[e>>
2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[(e&3)<<4|f>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[c+1<d?(f&15)<<2|g>>6:64]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[c+2<d?g&63:64]}return b}}();w.prototype={on:function(a,b,c){var d=this.actionHandler;d[a]&&f('There is already an actionName called "'+a+'"');d[a]=[b,c]},send:function(a,b,c){this.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:a,
data:b},c)},sendWithPromise:function(a,b,c){var d=this.callbackIndex++;a={sourceName:this.sourceName,targetName:this.targetName,action:a,data:b,callbackId:d};b=r();this.callbacksCapabilities[d]=b;try{this.postMessage(a,c)}catch(X){b.reject(X)}return b.promise},postMessage:function(a,b){b&&this.postMessageTransfers?this.comObj.postMessage(a,b):this.comObj.postMessage(a)},destroy:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}};(function(a){function b(a){""==a&&(f.call(this),
this._isInvalid=!0);return a.toLowerCase()}function c(a){var b=a.charCodeAt(0);return 32<b&&127>b&&-1==[34,35,60,62,63,96].indexOf(b)?a:encodeURIComponent(a)}function d(a){var b=a.charCodeAt(0);return 32<b&&127>b&&-1==[34,35,60,62,96].indexOf(b)?a:encodeURIComponent(a)}function e(a,e,g){function h(a){y.push(a)}var k=e||"scheme start",p=0,t="",r=!1,x=!1,y=[];a:for(;(void 0!=a[p-1]||0==p)&&!this._isInvalid;){var v=a[p];switch(k){case "scheme start":if(v&&n.test(v))t+=v.toLowerCase(),k="scheme";else if(e){h("Invalid scheme.");
break a}else{t="";k="no scheme";continue}break;case "scheme":if(v&&q.test(v))t+=v.toLowerCase();else if(":"==v){this._scheme=t;t="";if(e)break a;void 0!==l[this._scheme]&&(this._isRelative=!0);k="file"==this._scheme?"relative":this._isRelative&&g&&g._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}else if(e){void 0!=v&&h("Code point not allowed in scheme: "+v);break a}else{t="";p=0;k="no scheme";continue}break;case "scheme data":"?"==v?(this._query=
"?",k="query"):"#"==v?(this._fragment="#",k="fragment"):void 0!=v&&"\t"!=v&&"\n"!=v&&"\r"!=v&&(this._schemeData+=c(v));break;case "no scheme":if(g&&void 0!==l[g._scheme]){k="relative";continue}else h("Missing scheme."),f.call(this),this._isInvalid=!0;break;case "relative or authority":if("/"==v&&"/"==a[p+1])k="authority ignore slashes";else{h("Expected /, got: "+v);k="relative";continue}break;case "relative":this._isRelative=!0;"file"!=this._scheme&&(this._scheme=g._scheme);if(void 0==v){this._host=
g._host;this._port=g._port;this._path=g._path.slice();this._query=g._query;this._username=g._username;this._password=g._password;break a}else if("/"==v||"\\"==v)"\\"==v&&h("\\ is an invalid code point."),k="relative slash";else if("?"==v)this._host=g._host,this._port=g._port,this._path=g._path.slice(),this._query="?",this._username=g._username,this._password=g._password,k="query";else if("#"==v)this._host=g._host,this._port=g._port,this._path=g._path.slice(),this._query=g._query,this._fragment="#",
this._username=g._username,this._password=g._password,k="fragment";else{k=a[p+1];var w=a[p+2];if("file"!=this._scheme||!n.test(v)||":"!=k&&"|"!=k||void 0!=w&&"/"!=w&&"\\"!=w&&"?"!=w&&"#"!=w)this._host=g._host,this._port=g._port,this._username=g._username,this._password=g._password,this._path=g._path.slice(),this._path.pop();k="relative path";continue}break;case "relative slash":if("/"==v||"\\"==v)"\\"==v&&h("\\ is an invalid code point."),k="file"==this._scheme?"file host":"authority ignore slashes";
else{"file"!=this._scheme&&(this._host=g._host,this._port=g._port,this._username=g._username,this._password=g._password);k="relative path";continue}break;case "authority first slash":if("/"==v)k="authority second slash";else{h("Expected '/', got: "+v);k="authority ignore slashes";continue}break;case "authority second slash":k="authority ignore slashes";if("/"!=v){h("Expected '/', got: "+v);continue}break;case "authority ignore slashes":if("/"!=v&&"\\"!=v){k="authority";continue}else h("Expected authority, got: "+
v);break;case "authority":if("@"==v){r&&(h("@ already seen."),t+="%40");r=!0;for(v=0;v<t.length;v++)w=t[v],"\t"==w||"\n"==w||"\r"==w?h("Invalid whitespace in authority."):":"==w&&null===this._password?this._password="":(w=c(w),null!==this._password?this._password+=w:this._username+=w);t=""}else if(void 0==v||"/"==v||"\\"==v||"?"==v||"#"==v){p-=t.length;t="";k="host";continue}else t+=v;break;case "file host":if(void 0==v||"/"==v||"\\"==v||"?"==v||"#"==v){2!=t.length||!n.test(t[0])||":"!=t[1]&&"|"!=
t[1]?(0!=t.length&&(this._host=b.call(this,t),t=""),k="relative path start"):k="relative path";continue}else"\t"==v||"\n"==v||"\r"==v?h("Invalid whitespace in file host."):t+=v;break;case "host":case "hostname":if(":"!=v||x)if(void 0==v||"/"==v||"\\"==v||"?"==v||"#"==v){this._host=b.call(this,t);t="";k="relative path start";if(e)break a;continue}else"\t"!=v&&"\n"!=v&&"\r"!=v?("["==v?x=!0:"]"==v&&(x=!1),t+=v):h("Invalid code point in host/hostname: "+v);else if(this._host=b.call(this,t),t="",k="port",
"hostname"==e)break a;break;case "port":if(/[0-9]/.test(v))t+=v;else if(void 0==v||"/"==v||"\\"==v||"?"==v||"#"==v||e){""!=t&&(t=parseInt(t,10),t!=l[this._scheme]&&(this._port=t+""),t="");if(e)break a;k="relative path start";continue}else"\t"==v||"\n"==v||"\r"==v?h("Invalid code point in port: "+v):(f.call(this),this._isInvalid=!0);break;case "relative path start":"\\"==v&&h("'\\' not allowed in path.");k="relative path";if("/"!=v&&"\\"!=v)continue;break;case "relative path":if(void 0!=v&&"/"!=v&&
"\\"!=v&&(e||"?"!=v&&"#"!=v))"\t"!=v&&"\n"!=v&&"\r"!=v&&(t+=c(v));else{"\\"==v&&h("\\ not allowed in relative path.");if(w=m[t.toLowerCase()])t=w;".."==t?(this._path.pop(),"/"!=v&&"\\"!=v&&this._path.push("")):"."==t&&"/"!=v&&"\\"!=v?this._path.push(""):"."!=t&&("file"==this._scheme&&0==this._path.length&&2==t.length&&n.test(t[0])&&"|"==t[1]&&(t=t[0]+":"),this._path.push(t));t="";"?"==v?(this._query="?",k="query"):"#"==v&&(this._fragment="#",k="fragment")}break;case "query":e||"#"!=v?void 0!=v&&"\t"!=
v&&"\n"!=v&&"\r"!=v&&(this._query+=d(v)):(this._fragment="#",k="fragment");break;case "fragment":void 0!=v&&"\t"!=v&&"\n"!=v&&"\r"!=v&&(this._fragment+=v)}p++}}function f(){this._username=this._schemeData=this._scheme="";this._password=null;this._port=this._host="";this._path=[];this._fragment=this._query="";this._isRelative=this._isInvalid=!1}function g(a,b){void 0===b||b instanceof g||(b=new g(String(b)));this._url=a;f.call(this);a=a.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");e.call(this,a,null,
b)}var h=!1;try{if("function"===typeof URL&&"object"===typeof URL.prototype&&"origin"in URL.prototype){var k=new URL("b","http://a");k.pathname="c%20d";h="http://a/c%20d"===k.href}}catch(ra){}if(!h){var l=Object.create(null);l.ftp=21;l.file=0;l.gopher=70;l.http=80;l.https=443;l.ws=80;l.wss=443;var m=Object.create(null);m["%2e"]=".";m[".%2e"]="..";m["%2e."]="..";m["%2e%2e"]="..";var n=/[a-zA-Z]/,q=/[a-zA-Z0-9\+\-\.]/;g.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;
var a="";if(""!=this._username||null!=this._password)a=this._username+(null!=this._password?":"+this._password:"")+"@";return this.protocol+(this._isRelative?"//"+a+this.host:"")+this.pathname+this._query+this._fragment},set href(a){f.call(this);e.call(this,a)},get protocol(){return this._scheme+":"},set protocol(a){this._isInvalid||e.call(this,a+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(a){!this._isInvalid&&this._isRelative&&
e.call(this,a,"host")},get hostname(){return this._host},set hostname(a){!this._isInvalid&&this._isRelative&&e.call(this,a,"hostname")},get port(){return this._port},set port(a){!this._isInvalid&&this._isRelative&&e.call(this,a,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(a){!this._isInvalid&&this._isRelative&&(this._path=[],e.call(this,a,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?
"":this._query},set search(a){!this._isInvalid&&this._isRelative&&(this._query="?","?"==a[0]&&(a=a.slice(1)),e.call(this,a,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(a){this._isInvalid||(this._fragment="#","#"==a[0]&&(a=a.slice(1)),e.call(this,a,"fragment"))},get origin(){var a;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case "data":case "file":case "javascript":case "mailto":return"null"}return(a=this.host)?this._scheme+
"://"+a:""}};var p=a.URL;p&&(g.createObjectURL=function(a){return p.createObjectURL.apply(p,arguments)},g.revokeObjectURL=function(a){p.revokeObjectURL(a)});a.URL=g}})(z);c.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];c.IDENTITY_MATRIX=[1,0,0,1,0,0];c.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,
closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,
setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,
endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};c.VERBOSITY_LEVELS=v;c.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"};c.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};
c.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};c.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};c.FontType={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,
CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10};c.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};c.InvalidPDFException=A;c.MessageHandler=w;c.MissingDataException=F;c.MissingPDFException=C;c.NotImplementedException=E;c.PageViewport=m;c.PasswordException=q;c.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};c.StatTimer=H;c.StreamType={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9};c.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,
STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};c.UnexpectedResponseException=G;c.UnknownErrorException=y;c.Util=x;c.XRefParseException=I;c.arrayByteLength=h;c.arraysToBytes=function(a){if(1===a.length&&a[0]instanceof Uint8Array)return a[0];var b=0,c,d=a.length;for(c=0;c<d;c++){var e=a[c];var f=h(e);b+=f}var k=0;b=new Uint8Array(b);for(c=0;c<d;c++)e=a[c],e instanceof Uint8Array||(e="string"===typeof e?g(e):new Uint8Array(e)),f=e.byteLength,b.set(e,
k),k+=f;return b};c.assert=b;c.bytesToString=function(a){b(null!==a&&"object"===typeof a&&void 0!==a.length,"Invalid argument for bytesToString");var c=a.length;if(8192>c)return String.fromCharCode.apply(null,a);for(var d=[],e=0;e<c;e+=8192){var f=a.subarray(e,Math.min(e+8192,c));d.push(String.fromCharCode.apply(null,f))}return d.join("")};c.createBlob=N;c.createPromiseCapability=r;c.createObjectURL=ka;c.deprecated=function(a){console.log("Deprecated API usage: "+a)};c.error=f;c.getLookupTableFactory=
function(a){var b;return function(){a&&(b=Object.create(null),a(b),a=null);return b}};c.getVerbosityLevel=function(){return t};c.globalScope=z;c.info=function(a){t>=v.infos&&console.log("Info: "+a)};c.isArray=function(a){return a instanceof Array};c.isArrayBuffer=function(a){return"object"===typeof a&&null!==a&&void 0!==a.byteLength};c.isBool=function(a){return"boolean"===typeof a};c.isEmptyObj=function(a){for(var b in a)return!1;return!0};c.isInt=k;c.isNum=function(a){return"number"===typeof a};
c.isString=function(a){return"string"===typeof a};c.isSameOrigin=function(a,b){try{var c=new URL(a);if(!c.origin||"null"===c.origin)return!1}catch(R){return!1}a=new URL(b,c);return c.origin===a.origin};c.isValidUrl=function(a,b){if(!a||"string"!==typeof a)return!1;a=/^[a-z][a-z0-9+\-.]*(?=:)/i.exec(a);if(!a)return b;a=a[0].toLowerCase();switch(a){case "http":case "https":case "ftp":case "mailto":case "tel":return!0;default:return!1}};c.isLittleEndian=function(){var a=new Uint8Array(2);a[0]=1;return 1===
(new Uint16Array(a.buffer))[0]};c.isEvalSupported=function(){try{return new Function(""),!0}catch(aa){return!1}};c.loadJpegStream=function(b,c,d){var e=new Image;e.onload=function(){d.resolve(b,e)};e.onerror=function(){d.resolve(b,null);a("Error during JPEG image loading")};e.src=c};c.log2=function(a){for(var b=1,c=0;a>b;)b<<=1,c++;return c};c.readInt8=function(a,b){return a[b]<<24>>24};c.readUint16=function(a,b){return a[b]<<8|a[b+1]};c.readUint32=function(a,b){return(a[b]<<24|a[b+1]<<16|a[b+2]<<
8|a[b+3])>>>0};c.removeNullCharacters=function(b){return"string"!==typeof b?(a("The argument for removeNullCharacters must be a string."),b):b.replace(e,"")};c.setVerbosityLevel=function(a){t=a};c.shadow=function(a,b,c){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!1});return c};c.string32=function(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)};c.stringToBytes=g;c.stringToPDFString=function(a){var b,c=a.length,d=[];if("\u00fe"===a[0]&&"\u00ff"===a[1])for(b=
2;b<c;b+=2)d.push(String.fromCharCode(a.charCodeAt(b)<<8|a.charCodeAt(b+1)));else for(b=0;b<c;++b){var e=D[a.charCodeAt(b)];d.push(e?String.fromCharCode(e):a.charAt(b))}return d.join("")};c.stringToUTF8String=function(a){return decodeURIComponent(escape(a))};c.utf8StringToString=function(a){return unescape(encodeURIComponent(a))};c.warn=a});(function(c,a){a(c.pdfjsDisplayDOMUtils={},c.pdfjsSharedUtil)})(this,function(c,a){function f(c){var d=a.globalScope.PDFJS;switch(c){case "pdfBug":return d?d.pdfBug:
!1;case "disableAutoFetch":return d?d.disableAutoFetch:!1;case "disableStream":return d?d.disableStream:!1;case "disableRange":return d?d.disableRange:!1;case "disableFontFace":return d?d.disableFontFace:!1;case "disableCreateObjectURL":return d?d.disableCreateObjectURL:!1;case "disableWebGL":return d?d.disableWebGL:!0;case "cMapUrl":return d?d.cMapUrl:null;case "cMapPacked":return d?d.cMapPacked:!1;case "postMessageTransfers":return d?d.postMessageTransfers:!0;case "workerSrc":return d?d.workerSrc:
null;case "disableWorker":return d?d.disableWorker:!1;case "maxImageSize":return d?d.maxImageSize:-1;case "imageResourcesPath":return d?d.imageResourcesPath:"";case "isEvalSupported":return d?d.isEvalSupported:!0;case "externalLinkTarget":if(!d)return h.NONE;switch(d.externalLinkTarget){case h.NONE:case h.SELF:case h.BLANK:case h.PARENT:case h.TOP:return d.externalLinkTarget}b("PDFJS.externalLinkTarget is invalid: "+d.externalLinkTarget);return d.externalLinkTarget=h.NONE;case "externalLinkRel":return d?
d.externalLinkRel:"noreferrer";case "enableStats":return!(!d||!d.enableStats);default:throw Error("Unknown default setting: "+c);}}var d=a.removeNullCharacters,b=a.warn,g=function(){function a(){}var b=["ms","Moz","Webkit","O"],c=Object.create(null);a.getProp=function(a,d){if(1===arguments.length&&"string"===typeof c[a])return c[a];d=d||document.documentElement;var f=d.style;if("string"===typeof f[a])return c[a]=a;var g=a.charAt(0).toUpperCase()+a.slice(1);for(var h=0,k=b.length;h<k;h++){var l=b[h]+
g;if("string"===typeof f[l])return c[a]=l}return c[a]="undefined"};a.setProp=function(a,b,c){a=this.getProp(a);"undefined"!==a&&(b.style[a]=c)};return a}(),h={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},k=["","_self","_blank","_parent","_top"];c.CustomStyle=g;c.addLinkAttributes=function(a,b){var c=b&&b.url;a.href=a.title=c?d(c):"";c&&(c=b.target,"undefined"===typeof c&&(c=f("externalLinkTarget")),a.target=k[c],b=b.rel,"undefined"===typeof b&&(b=f("externalLinkRel")),a.rel=b)};c.isExternalLinkTargetSet=
function(){switch(f("externalLinkTarget")){case h.NONE:return!1;case h.SELF:case h.BLANK:case h.PARENT:case h.TOP:return!0}};c.getFilenameFromUrl=function(a){var b=a.indexOf("#"),c=a.indexOf("?");b=Math.min(0<b?b:a.length,0<c?c:a.length);return a.substring(a.lastIndexOf("/",b)+1,b)};c.LinkTarget=h;c.hasCanvasTypedArrays=function(){var a=document.createElement("canvas");a.width=a.height=1;return"undefined"!==typeof a.getContext("2d").createImageData(1,1).data.buffer};c.getDefaultSetting=f});(function(c,
a){a(c.pdfjsDisplayFontLoader={},c.pdfjsSharedUtil)})(this,function(c,a){function f(a){this.docId=a;this.styleElement=null;this.nativeFontFaces=[];this.loadTestFontId=0;this.loadingContext={requests:[],nextRequestId:0}}var d=a.assert,b=a.bytesToString,g=a.string32,h=a.shadow,k=a.warn;f.prototype={insertRule:function(a){var b=this.styleElement;b||(b=this.styleElement=document.createElement("style"),b.id="PDFJS_FONT_STYLE_TAG_"+this.docId,document.documentElement.getElementsByTagName("head")[0].appendChild(b));
b=b.sheet;b.insertRule(a,b.cssRules.length)},clear:function(){var a=this.styleElement;a&&(a.parentNode.removeChild(a),a=this.styleElement=null);this.nativeFontFaces.forEach(function(a){document.fonts.delete(a)});this.nativeFontFaces.length=0},get loadTestFont(){return h(this,"loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))},
addNativeFontFace:function(a){this.nativeFontFaces.push(a);document.fonts.add(a)},bind:function(a,b){for(var c=[],d=[],g=[],h=function(a){return a.loaded.catch(function(b){k('Failed to load font "'+a.family+'": '+b)})},l=0,n=a.length;l<n;l++){var p=a[l];if(!p.attached&&!1!==p.loading)if(p.attached=!0,f.isFontLoadingAPISupported){if(p=p.createNativeFontFace())this.addNativeFontFace(p),g.push(h(p))}else{var r=p.createFontFaceRule();r&&(this.insertRule(r),c.push(r),d.push(p))}}var v=this.queueLoadingCallback(b);
f.isFontLoadingAPISupported?Promise.all(g).then(function(){v.complete()}):0<c.length&&!f.isSyncFontLoadingSupported?this.prepareFontLoadEvent(c,d,v):v.complete()},queueLoadingCallback:function(a){var b=this.loadingContext,c={id:"pdfjs-font-loading-"+b.nextRequestId++,complete:function(){d(!c.end,"completeRequest() cannot be called twice");for(c.end=Date.now();0<b.requests.length&&b.requests[0].end;){var a=b.requests.shift();setTimeout(a.callback,0)}},callback:a,started:Date.now()};b.requests.push(c);
return c},prepareFontLoadEvent:function(a,b,c){function d(a,b){return a.charCodeAt(b)<<24|a.charCodeAt(b+1)<<16|a.charCodeAt(b+2)<<8|a.charCodeAt(b+3)&255}function f(a,b,c,d){var e=a.substr(0,b);a=a.substr(b+c);return e+d+a}function h(a,b){p++;30<p?(k("Load test font never loaded."),b()):(n.font="30px "+a,n.fillText(".",0,20),0<n.getImageData(0,0,1,1).data[3]?b():setTimeout(h.bind(null,a,b)))}var l;a=document.createElement("canvas");a.width=1;a.height=1;var n=a.getContext("2d"),p=0;a="lt"+Date.now()+
this.loadTestFontId++;var t=this.loadTestFont;t=f(t,976,a.length,a);var r=d(t,16);var e=0;for(l=a.length-3;e<l;e+=4)r=r-1482184792+d(a,e)|0;e<a.length&&(r=r-1482184792+d(a+"XXX",e)|0);t=f(t,16,4,g(r));e="url(data:font/opentype;base64,"+btoa(t)+");";this.insertRule('@font-face { font-family:"'+a+'";src:'+e+"}");t=[];e=0;for(l=b.length;e<l;e++)t.push(b[e].loadedName);t.push(a);var m=document.createElement("div");m.setAttribute("style","visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;");
e=0;for(l=t.length;e<l;++e)b=document.createElement("span"),b.textContent="Hi",b.style.fontFamily=t[e],m.appendChild(b);document.body.appendChild(m);h(a,function(){document.body.removeChild(m);c.complete()})}};f.isFontLoadingAPISupported="undefined"!==typeof document&&!!document.fonts;Object.defineProperty(f,"isSyncFontLoadingSupported",{get:function(){if("undefined"===typeof navigator)return h(f,"isSyncFontLoadingSupported",!0);var a=!1,b=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);
b&&14<=b[1]&&(a=!0);return h(f,"isSyncFontLoadingSupported",a)},enumerable:!0,configurable:!0});var r={get value(){return h(this,"value",a.isEvalSupported())}},w=function(){function a(a,b){this.compiledGlyphs=Object.create(null);for(var c in a)this[c]=a[c];this.options=b}a.prototype={createNativeFontFace:function(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var a=new FontFace(this.loadedName,this.data,{});this.options.fontRegistry&&this.options.fontRegistry.registerFont(this);
return a},createFontFaceRule:function(){if(!this.data)return null;if(this.options.disableFontFace)return this.disableFontFace=!0,null;var a=b(new Uint8Array(this.data)),c=this.loadedName;a="url(data:"+this.mimetype+";base64,"+btoa(a)+");";c='@font-face { font-family:"'+c+'";src:'+a+"}";this.options.fontRegistry&&this.options.fontRegistry.registerFont(this,a);return c},getPathGenerator:function(a,b){if(!(b in this.compiledGlyphs)){var c=a.get(this.loadedName+"_path_"+b),d;if(this.options.isEvalSupported&&
r.value){var f="";var g=0;for(d=c.length;g<d;g++){var h=c[g];a=void 0!==h.args?h.args.join(","):"";f+="c."+h.cmd+"("+a+");\n"}this.compiledGlyphs[b]=new Function("c","size",f)}else this.compiledGlyphs[b]=function(a,b){g=0;for(d=c.length;g<d;g++)h=c[g],"scale"===h.cmd&&(h.args=[b,-b]),a[h.cmd].apply(a,h.args)}}return this.compiledGlyphs[b]}};return a}();c.FontFaceObject=w;c.FontLoader=f});(function(c,a){a(c.pdfjsDisplayMetadata={},c.pdfjsSharedUtil)})(this,function(c,a){function f(a){return a.replace(/>\\376\\377([^<]+)/g,
function(a,b){a=b.replace(/\\([0-3])([0-7])([0-7])/g,function(a,b,c,d){return String.fromCharCode(64*b+8*c+1*d)});b="";for(var c=0;c<a.length;c+=2){var d=256*a.charCodeAt(c)+a.charCodeAt(c+1);b+="&#x"+(65536+d).toString(16).substring(1)+";"}return">"+b})}function d(a){"string"===typeof a?(a=f(a),a=(new DOMParser).parseFromString(a,"application/xml")):a instanceof Document||b("Metadata: Invalid metadata object");this.metaDocument=a;this.metadata=Object.create(null);this.parse()}var b=a.error;d.prototype=
{parse:function(){var a=this.metaDocument.documentElement;if("rdf:rdf"!==a.nodeName.toLowerCase())for(a=a.firstChild;a&&"rdf:rdf"!==a.nodeName.toLowerCase();)a=a.nextSibling;var b=a?a.nodeName.toLowerCase():null;if(a&&"rdf:rdf"===b&&a.hasChildNodes()){a=a.childNodes;var c,d;var f=0;for(c=a.length;f<c;f++)if(b=a[f],"rdf:description"===b.nodeName.toLowerCase()){var g=0;for(d=b.childNodes.length;g<d;g++)if("#text"!==b.childNodes[g].nodeName.toLowerCase()){var h=b.childNodes[g];var k=h.nodeName.toLowerCase();
this.metadata[k]=h.textContent.trim()}}}},get:function(a){return this.metadata[a]||null},has:function(a){return"undefined"!==typeof this.metadata[a]}};c.Metadata=d});(function(c,a){a(c.pdfjsDisplaySVG={},c.pdfjsSharedUtil)})(this,function(c,a){var f=a.FONT_IDENTITY_MATRIX,d=a.IDENTITY_MATRIX,b=a.ImageKind,g=a.OPS,h=a.Util,k=a.isNum,r=a.isArray,w=a.warn,z=a.createObjectURL,v=function(){function a(a,b,c,f){var e=f,g=b.length;c[e]=g>>24&255;c[e+1]=g>>16&255;c[e+2]=g>>8&255;c[e+3]=g&255;e+=4;c[e]=a.charCodeAt(0)&
255;c[e+1]=a.charCodeAt(1)&255;c[e+2]=a.charCodeAt(2)&255;c[e+3]=a.charCodeAt(3)&255;e+=4;c.set(b,e);e+=b.length;a=-1;for(f+=4;f<e;f++)a=a>>>8^d[(a^c[f])&255];f=a^-1;c[e]=f>>24&255;c[e+1]=f>>16&255;c[e+2]=f>>8&255;c[e+3]=f&255}for(var c=new Uint8Array([137,80,78,71,13,10,26,10]),d=new Int32Array(256),f=0;256>f;f++){for(var g=f,h=0;8>h;h++)g=g&1?3988292384^g>>1&2147483647:g>>1&2147483647;d[f]=g}return function(d,f){var e=void 0===d.kind?b.GRAYSCALE_1BPP:d.kind,g=d.width,h=d.height,k=d.data;switch(e){case b.GRAYSCALE_1BPP:var l=
0;var n=1;var p=g+7>>3;break;case b.RGB_24BPP:l=2;n=8;p=3*g;break;case b.RGBA_32BPP:l=6;n=8;p=4*g;break;default:throw Error("invalid format");}d=new Uint8Array((1+p)*h);var q=0,t=0,r;for(r=0;r<h;++r)d[q++]=0,d.set(k.subarray(t,t+p),q),t+=p,q+=p;if(e===b.GRAYSCALE_1BPP)for(r=q=0;r<h;r++)for(q++,e=0;e<p;e++)d[q++]^=255;g=new Uint8Array([g>>24&255,g>>16&255,g>>8&255,g&255,h>>24&255,h>>16&255,h>>8&255,h&255,n,l,0,0,0]);n=d.length;h=new Uint8Array(2+n+5*Math.ceil(n/65535)+4);e=0;h[e++]=120;h[e++]=156;
for(l=0;65535<n;)h[e++]=0,h[e++]=255,h[e++]=255,h[e++]=0,h[e++]=0,h.set(d.subarray(l,l+65535),e),e+=65535,l+=65535,n-=65535;h[e++]=1;h[e++]=n&255;h[e++]=n>>8&255;h[e++]=~n&255;h[e++]=(~n&65535)>>8&255;h.set(d.subarray(l),e);e+=d.length-l;n=1;for(p=l=0;p<d.length;++p)n=(n+(d[p]&255))%65521,l=(l+n)%65521;d=l<<16|n;h[e++]=d>>24&255;h[e++]=d>>16&255;h[e++]=d>>8&255;h[e++]=d&255;d=new Uint8Array(c.length+36+g.length+h.length);e=0;d.set(c,e);e+=c.length;a("IHDR",g,d,e);e+=12+g.length;a("IDATA",h,d,e);e+=
12+h.length;a("IEND",new Uint8Array(0),d,e);return z(d,"image/png",f)}}(),t=function(){function a(){this.fontSizeScale=1;this.fontWeight="normal";this.fontSize=0;this.textMatrix=d;this.fontMatrix=f;this.wordSpacing=this.charSpacing=this.lineY=this.lineX=this.y=this.x=this.leading=0;this.textHScale=1;this.textRise=0;this.strokeColor=this.fillColor="#000000";this.lineWidth=this.strokeAlpha=this.fillAlpha=1;this.lineCap=this.lineJoin="";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=
[];this.clipId="";this.pendingClip=!1;this.maskId=""}a.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(a,b){this.x=a;this.y=b}};return a}();a=function(){function a(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","svg:svg");c.setAttributeNS(null,"version","1.1");c.setAttributeNS(null,"width",a+"px");c.setAttributeNS(null,"height",b+"px");c.setAttributeNS(null,"viewBox","0 0 "+a+" "+b);return c}function b(a){if(a===(a|0))return a.toString();a=a.toFixed(10);
var b=a.length-1;if("0"!==a[b])return a;do b--;while("0"===a[b]);return a.substr(0,"."===a[b]?b:b+1)}function c(a){if(0===a[4]&&0===a[5]){if(0===a[1]&&0===a[2])return 1===a[0]&&1===a[3]?"":"scale("+b(a[0])+" "+b(a[3])+")";if(a[0]===a[3]&&a[1]===-a[2])return"rotate("+b(180*Math.acos(a[0])/Math.PI)+")"}else if(1===a[0]&&0===a[1]&&0===a[2]&&1===a[3])return"translate("+b(a[4])+" "+b(a[5])+")";return"matrix("+b(a[0])+" "+b(a[1])+" "+b(a[2])+" "+b(a[3])+" "+b(a[4])+" "+b(a[5])+")"}function l(a,b,c){this.current=
new t;this.transformMatrix=d;this.transformStack=[];this.extraStack=[];this.commonObjs=a;this.objs=b;this.embedFonts=this.pendingEOFill=!1;this.embeddedFonts=Object.create(null);this.cssStyle=null;this.forceDataSchema=!!c}var n=["butt","round","square"],p=["miter","round","bevel"],F=0,I=0;l.prototype={save:function(){this.transformStack.push(this.transformMatrix);var a=this.current;this.extraStack.push(a);this.current=a.clone()},restore:function(){this.transformMatrix=this.transformStack.pop();this.current=
this.extraStack.pop();this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,"transform",c(this.transformMatrix));this.pgrp.appendChild(this.tgrp)},group:function(a){this.save();this.executeOpTree(a);this.restore()},loadDependencies:function(a){var b=a.fnArray,c=b.length;a=a.argsArray;for(var d=this,e=0;e<c;e++)if(g.dependency===b[e])for(var f=a[e],h=0,k=f.length;h<k;h++){var l=f[h];var n="g_"===l.substring(0,2)?new Promise(function(a){d.commonObjs.get(l,
a)}):new Promise(function(a){d.objs.get(l,a)});this.current.dependencies.push(n)}return Promise.all(this.current.dependencies)},transform:function(a,b,d,f,g,k){this.transformMatrix=h.transform(this.transformMatrix,[a,b,d,f,g,k]);this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,"transform",c(this.transformMatrix))},getSVG:function(b,f){this.svg=a(f.width,f.height);this.viewport=f;return this.loadDependencies(b).then(function(){this.transformMatrix=
d;this.pgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.pgrp.setAttributeNS(null,"transform",c(f.transform));this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,"transform",c(this.transformMatrix));this.defs=document.createElementNS("http://www.w3.org/2000/svg","svg:defs");this.pgrp.appendChild(this.defs);this.pgrp.appendChild(this.tgrp);this.svg.appendChild(this.pgrp);var a=this.convertOpList(b);this.executeOpTree(a);return this.svg}.bind(this))},
convertOpList:function(a){var b=a.argsArray,c=a.fnArray,d=c.length,e=[];a=[];for(var f in g)e[g[f]]=f;for(f=0;f<d;f++){var h=c[f];a.push({fnId:h,fn:e[h],args:b[f]})}b=[];c=[];d=a.length;for(e=0;e<d;e++)"save"===a[e].fn?(b.push({fnId:92,fn:"group",items:[]}),c.push(b),b=b[b.length-1].items):"restore"===a[e].fn?b=c.pop():b.push(a[e]);return b},executeOpTree:function(a){for(var b=a.length,c=0;c<b;c++){var d=a[c].fn,e=a[c].args;switch(a[c].fnId|0){case g.beginText:this.beginText();break;case g.setLeading:this.setLeading(e);
break;case g.setLeadingMoveText:this.setLeadingMoveText(e[0],e[1]);break;case g.setFont:this.setFont(e);break;case g.showText:this.showText(e[0]);break;case g.showSpacedText:this.showText(e[0]);break;case g.endText:this.endText();break;case g.moveText:this.moveText(e[0],e[1]);break;case g.setCharSpacing:this.setCharSpacing(e[0]);break;case g.setWordSpacing:this.setWordSpacing(e[0]);break;case g.setHScale:this.setHScale(e[0]);break;case g.setTextMatrix:this.setTextMatrix(e[0],e[1],e[2],e[3],e[4],e[5]);
break;case g.setLineWidth:this.setLineWidth(e[0]);break;case g.setLineJoin:this.setLineJoin(e[0]);break;case g.setLineCap:this.setLineCap(e[0]);break;case g.setMiterLimit:this.setMiterLimit(e[0]);break;case g.setFillRGBColor:this.setFillRGBColor(e[0],e[1],e[2]);break;case g.setStrokeRGBColor:this.setStrokeRGBColor(e[0],e[1],e[2]);break;case g.setDash:this.setDash(e[0],e[1]);break;case g.setGState:this.setGState(e[0]);break;case g.fill:this.fill();break;case g.eoFill:this.eoFill();break;case g.stroke:this.stroke();
break;case g.fillStroke:this.fillStroke();break;case g.eoFillStroke:this.eoFillStroke();break;case g.clip:this.clip("nonzero");break;case g.eoClip:this.clip("evenodd");break;case g.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case g.paintJpegXObject:this.paintJpegXObject(e[0],e[1],e[2]);break;case g.paintImageXObject:this.paintImageXObject(e[0]);break;case g.paintInlineImageXObject:this.paintInlineImageXObject(e[0]);break;case g.paintImageMaskXObject:this.paintImageMaskXObject(e[0]);
break;case g.paintFormXObjectBegin:this.paintFormXObjectBegin(e[0],e[1]);break;case g.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case g.closePath:this.closePath();break;case g.closeStroke:this.closeStroke();break;case g.closeFillStroke:this.closeFillStroke();break;case g.nextLine:this.nextLine();break;case g.transform:this.transform(e[0],e[1],e[2],e[3],e[4],e[5]);break;case g.constructPath:this.constructPath(e[0],e[1]);break;case g.endPath:this.endPath();break;case 92:this.group(a[c].items);
break;default:w("Unimplemented method "+d)}}},setWordSpacing:function(a){this.current.wordSpacing=a},setCharSpacing:function(a){this.current.charSpacing=a},nextLine:function(){this.moveText(0,this.current.leading)},setTextMatrix:function(a,c,d,f,g,h){var e=this.current;this.current.textMatrix=this.current.lineMatrix=[a,c,d,f,g,h];this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;e.xcoords=[];e.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");e.tspan.setAttributeNS(null,
"font-family",e.fontFamily);e.tspan.setAttributeNS(null,"font-size",b(e.fontSize)+"px");e.tspan.setAttributeNS(null,"y",b(-e.y));e.txtElement=document.createElementNS("http://www.w3.org/2000/svg","svg:text");e.txtElement.appendChild(e.tspan)},beginText:function(){this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;this.current.textMatrix=d;this.current.lineMatrix=d;this.current.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");this.current.txtElement=document.createElementNS("http://www.w3.org/2000/svg",
"svg:text");this.current.txtgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.current.xcoords=[]},moveText:function(a,c){var d=this.current;this.current.x=this.current.lineX+=a;this.current.y=this.current.lineY+=c;d.xcoords=[];d.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");d.tspan.setAttributeNS(null,"font-family",d.fontFamily);d.tspan.setAttributeNS(null,"font-size",b(d.fontSize)+"px");d.tspan.setAttributeNS(null,"y",b(-d.y))},showText:function(a){var d=
this.current,e=d.fontSize;if(0!==e){var f=d.charSpacing,g=d.wordSpacing,h=d.fontDirection,l=d.textHScale*h,n=a.length,p=d.font.vertical,q=e*d.fontMatrix[0],t=0,r;for(r=0;r<n;++r){var v=a[r];if(null===v)t+=h*g;else if(k(v))t+=-v*e*.001;else{d.xcoords.push(d.x+t*l);var w=v.fontChar;t+=v.width*q+f*h;d.tspan.textContent+=w}}p?d.y-=t*l:d.x+=t*l;d.tspan.setAttributeNS(null,"x",d.xcoords.map(b).join(" "));d.tspan.setAttributeNS(null,"y",b(-d.y));d.tspan.setAttributeNS(null,"font-family",d.fontFamily);d.tspan.setAttributeNS(null,
"font-size",b(d.fontSize)+"px");"normal"!==d.fontStyle&&d.tspan.setAttributeNS(null,"font-style",d.fontStyle);"normal"!==d.fontWeight&&d.tspan.setAttributeNS(null,"font-weight",d.fontWeight);"#000000"!==d.fillColor&&d.tspan.setAttributeNS(null,"fill",d.fillColor);d.txtElement.setAttributeNS(null,"transform",c(d.textMatrix)+" scale(1, -1)");d.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve");d.txtElement.appendChild(d.tspan);d.txtgrp.appendChild(d.txtElement);
this.tgrp.appendChild(d.txtElement)}},setLeadingMoveText:function(a,b){this.setLeading(-b);this.moveText(a,b)},addFontStyle:function(a){this.cssStyle||(this.cssStyle=document.createElementNS("http://www.w3.org/2000/svg","svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var b=z(a.data,a.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'+a.loadedName+'"; src: url('+b+"); }\n"},setFont:function(a){var c=this.current,
d=this.commonObjs.get(a[0]);a=a[1];this.current.font=d;this.embedFonts&&d.data&&!this.embeddedFonts[d.loadedName]&&(this.addFontStyle(d),this.embeddedFonts[d.loadedName]=d);c.fontMatrix=d.fontMatrix?d.fontMatrix:f;var e=d.black?d.bold?"bolder":"bold":d.bold?"bold":"normal",g=d.italic?"italic":"normal";0>a?(a=-a,c.fontDirection=-1):c.fontDirection=1;c.fontSize=a;c.fontFamily=d.loadedName;c.fontWeight=e;c.fontStyle=g;c.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");c.tspan.setAttributeNS(null,
"y",b(-c.y));c.xcoords=[]},endText:function(){this.current.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp);this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,"transform",c(this.transformMatrix))},setLineWidth:function(a){this.current.lineWidth=a},setLineCap:function(a){this.current.lineCap=n[a]},setLineJoin:function(a){this.current.lineJoin=p[a]},setMiterLimit:function(a){this.current.miterLimit=
a},setStrokeRGBColor:function(a,b,c){a=h.makeCssRgb(a,b,c);this.current.strokeColor=a},setFillRGBColor:function(a,b,c){a=h.makeCssRgb(a,b,c);this.current.fillColor=a;this.current.tspan=document.createElementNS("http://www.w3.org/2000/svg","svg:tspan");this.current.xcoords=[]},setDash:function(a,b){this.current.dashArray=a;this.current.dashPhase=b},constructPath:function(a,c){var d=this.current,e=d.x,f=d.y;d.path=document.createElementNS("http://www.w3.org/2000/svg","svg:path");for(var h=[],k=a.length,
l=0,m=0;l<k;l++)switch(a[l]|0){case g.rectangle:e=c[m++];f=c[m++];var n=c[m++],p=c[m++];n=e+n;p=f+p;h.push("M",b(e),b(f),"L",b(n),b(f),"L",b(n),b(p),"L",b(e),b(p),"Z");break;case g.moveTo:e=c[m++];f=c[m++];h.push("M",b(e),b(f));break;case g.lineTo:e=c[m++];f=c[m++];h.push("L",b(e),b(f));break;case g.curveTo:e=c[m+4];f=c[m+5];h.push("C",b(c[m]),b(c[m+1]),b(c[m+2]),b(c[m+3]),b(e),b(f));m+=6;break;case g.curveTo2:e=c[m+2];f=c[m+3];h.push("C",b(e),b(f),b(c[m]),b(c[m+1]),b(c[m+2]),b(c[m+3]));m+=4;break;
case g.curveTo3:e=c[m+2];f=c[m+3];h.push("C",b(c[m]),b(c[m+1]),b(e),b(f),b(e),b(f));m+=4;break;case g.closePath:h.push("Z")}d.path.setAttributeNS(null,"d",h.join(" "));d.path.setAttributeNS(null,"stroke-miterlimit",b(d.miterLimit));d.path.setAttributeNS(null,"stroke-linecap",d.lineCap);d.path.setAttributeNS(null,"stroke-linejoin",d.lineJoin);d.path.setAttributeNS(null,"stroke-width",b(d.lineWidth)+"px");d.path.setAttributeNS(null,"stroke-dasharray",d.dashArray.map(b).join(" "));d.path.setAttributeNS(null,
"stroke-dashoffset",b(d.dashPhase)+"px");d.path.setAttributeNS(null,"fill","none");this.tgrp.appendChild(d.path);d.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp);d.element=d.path;d.setCurrentPoint(e,f)},endPath:function(){this.current.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp);this.tgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.tgrp.setAttributeNS(null,
"transform",c(this.transformMatrix))},clip:function(a){var b=this.current;b.clipId="clippath"+F;F++;this.clippath=document.createElementNS("http://www.w3.org/2000/svg","svg:clipPath");this.clippath.setAttributeNS(null,"id",b.clipId);var d=b.element.cloneNode();"evenodd"===a?d.setAttributeNS(null,"clip-rule","evenodd"):d.setAttributeNS(null,"clip-rule","nonzero");this.clippath.setAttributeNS(null,"transform",c(this.transformMatrix));this.clippath.appendChild(d);this.defs.appendChild(this.clippath);
b.pendingClip=!0;this.cgrp=document.createElementNS("http://www.w3.org/2000/svg","svg:g");this.cgrp.setAttributeNS(null,"clip-path","url(#"+b.clipId+")");this.pgrp.appendChild(this.cgrp)},closePath:function(){var a=this.current,b=a.path.getAttributeNS(null,"d");a.path.setAttributeNS(null,"d",b+"Z")},setLeading:function(a){this.current.leading=-a},setTextRise:function(a){this.current.textRise=a},setHScale:function(a){this.current.textHScale=a/100},setGState:function(a){for(var b=0,c=a.length;b<c;b++){var d=
a[b],e=d[1];switch(d[0]){case "LW":this.setLineWidth(e);break;case "LC":this.setLineCap(e);break;case "LJ":this.setLineJoin(e);break;case "ML":this.setMiterLimit(e);break;case "D":this.setDash(e[0],e[1]);break;case "Font":this.setFont(e)}}},fill:function(){var a=this.current;a.element.setAttributeNS(null,"fill",a.fillColor)},stroke:function(){var a=this.current;a.element.setAttributeNS(null,"stroke",a.strokeColor);a.element.setAttributeNS(null,"fill","none")},eoFill:function(){var a=this.current;
a.element.setAttributeNS(null,"fill",a.fillColor);a.element.setAttributeNS(null,"fill-rule","evenodd")},fillStroke:function(){this.stroke();this.fill()},eoFillStroke:function(){this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fillStroke()},closeStroke:function(){this.closePath();this.stroke()},closeFillStroke:function(){this.closePath();this.fillStroke()},paintSolidColorImageMask:function(){var a=this.current,b=document.createElementNS("http://www.w3.org/2000/svg","svg:rect");
b.setAttributeNS(null,"x","0");b.setAttributeNS(null,"y","0");b.setAttributeNS(null,"width","1px");b.setAttributeNS(null,"height","1px");b.setAttributeNS(null,"fill",a.fillColor);this.tgrp.appendChild(b)},paintJpegXObject:function(a,c,d){var e=this.current;a=this.objs.get(a);var f=document.createElementNS("http://www.w3.org/2000/svg","svg:image");f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a.src);f.setAttributeNS(null,"width",a.width+"px");f.setAttributeNS(null,"height",a.height+
"px");f.setAttributeNS(null,"x","0");f.setAttributeNS(null,"y",b(-d));f.setAttributeNS(null,"transform","scale("+b(1/c)+" "+b(-1/d)+")");this.tgrp.appendChild(f);e.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp)},paintImageXObject:function(a){(a=this.objs.get(a))?this.paintInlineImageXObject(a):w("Dependent image isn't ready yet")},paintInlineImageXObject:function(a,c){var d=this.current,e=a.width,f=a.height;a=v(a,this.forceDataSchema);
var g=document.createElementNS("http://www.w3.org/2000/svg","svg:rect");g.setAttributeNS(null,"x","0");g.setAttributeNS(null,"y","0");g.setAttributeNS(null,"width",b(e));g.setAttributeNS(null,"height",b(f));d.element=g;this.clip("nonzero");g=document.createElementNS("http://www.w3.org/2000/svg","svg:image");g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);g.setAttributeNS(null,"x","0");g.setAttributeNS(null,"y",b(-f));g.setAttributeNS(null,"width",b(e)+"px");g.setAttributeNS(null,"height",
b(f)+"px");g.setAttributeNS(null,"transform","scale("+b(1/e)+" "+b(-1/f)+")");c?c.appendChild(g):this.tgrp.appendChild(g);d.pendingClip?(this.cgrp.appendChild(this.tgrp),this.pgrp.appendChild(this.cgrp)):this.pgrp.appendChild(this.tgrp)},paintImageMaskXObject:function(a){var c=this.current,d=a.width,e=a.height,f=c.fillColor;c.maskId="mask"+I++;var g=document.createElementNS("http://www.w3.org/2000/svg","svg:mask");g.setAttributeNS(null,"id",c.maskId);var h=document.createElementNS("http://www.w3.org/2000/svg",
"svg:rect");h.setAttributeNS(null,"x","0");h.setAttributeNS(null,"y","0");h.setAttributeNS(null,"width",b(d));h.setAttributeNS(null,"height",b(e));h.setAttributeNS(null,"fill",f);h.setAttributeNS(null,"mask","url(#"+c.maskId+")");this.defs.appendChild(g);this.tgrp.appendChild(h);this.paintInlineImageXObject(a,g)},paintFormXObjectBegin:function(a,c){this.save();r(a)&&6===a.length&&this.transform(a[0],a[1],a[2],a[3],a[4],a[5]);if(r(c)&&4===c.length){a=c[2]-c[0];var d=c[3]-c[1],e=document.createElementNS("http://www.w3.org/2000/svg",
"svg:rect");e.setAttributeNS(null,"x",c[0]);e.setAttributeNS(null,"y",c[1]);e.setAttributeNS(null,"width",b(a));e.setAttributeNS(null,"height",b(d));this.current.element=e;this.clip("nonzero");this.endPath()}},paintFormXObjectEnd:function(){this.restore()}};return l}();c.SVGGraphics=a});(function(c,a){a(c.pdfjsDisplayAnnotationLayer={},c.pdfjsSharedUtil,c.pdfjsDisplayDOMUtils)})(this,function(c,a,f){function d(){}var b=a.AnnotationBorderStyleType,g=a.AnnotationType,h=a.Util,k=f.addLinkAttributes,
r=f.LinkTarget,w=f.getFilenameFromUrl,z=a.warn,v=f.CustomStyle,t=f.getDefaultSetting;d.prototype={create:function(a){switch(a.data.annotationType){case g.LINK:return new y(a);case g.TEXT:return new A(a);case g.WIDGET:return new C(a);case g.POPUP:return new G(a);case g.HIGHLIGHT:return new F(a);case g.UNDERLINE:return new I(a);case g.SQUIGGLY:return new e(a);case g.STRIKEOUT:return new m(a);case g.FILEATTACHMENT:return new x(a);default:return new q(a)}}};var q=function(){function a(a,b){this.isRenderable=
b||!1;this.data=a.data;this.layer=a.layer;this.page=a.page;this.viewport=a.viewport;this.linkService=a.linkService;this.downloadManager=a.downloadManager;this.imageResourcesPath=a.imageResourcesPath;b&&(this.container=this._createContainer())}a.prototype={_createContainer:function(){var a=this.data,c=this.page,d=this.viewport,e=document.createElement("section"),f=a.rect[2]-a.rect[0],g=a.rect[3]-a.rect[1];e.setAttribute("data-annotation-id",a.id);c=h.normalizeRect([a.rect[0],c.view[3]-a.rect[1]+c.view[1],
a.rect[2],c.view[3]-a.rect[3]+c.view[1]]);v.setProp("transform",e,"matrix("+d.transform.join(",")+")");v.setProp("transformOrigin",e,-c[0]+"px "+-c[1]+"px");if(0<a.borderStyle.width){e.style.borderWidth=a.borderStyle.width+"px";a.borderStyle.style!==b.UNDERLINE&&(f-=2*a.borderStyle.width,g-=2*a.borderStyle.width);d=a.borderStyle.horizontalCornerRadius;var k=a.borderStyle.verticalCornerRadius;(0<d||0<k)&&v.setProp("borderRadius",e,d+"px / "+k+"px");switch(a.borderStyle.style){case b.SOLID:e.style.borderStyle=
"solid";break;case b.DASHED:e.style.borderStyle="dashed";break;case b.BEVELED:z("Unimplemented border style: beveled");break;case b.INSET:z("Unimplemented border style: inset");break;case b.UNDERLINE:e.style.borderBottomStyle="solid"}a.color?e.style.borderColor=h.makeCssRgb(a.color[0]|0,a.color[1]|0,a.color[2]|0):e.style.borderWidth=0}e.style.left=c[0]+"px";e.style.top=c[1]+"px";e.style.width=f+"px";e.style.height=g+"px";return e},_createPopup:function(a,b,c){b||(b=document.createElement("div"),b.style.height=
a.style.height,b.style.width=a.style.width,a.appendChild(b));b=(new E({container:a,trigger:b,color:c.color,title:c.title,contents:c.contents,hideWrapper:!0})).render();b.style.left=a.style.width;a.appendChild(b)},render:function(){throw Error("Abstract method AnnotationElement.render called");}};return a}(),y=function(){function a(a){q.call(this,a,!0)}h.inherit(a,q,{render:function(){this.container.className="linkAnnotation";var a=document.createElement("a");k(a,{url:this.data.url,target:this.data.newWindow?
r.BLANK:void 0});this.data.url||(this.data.action?this._bindNamedAction(a,this.data.action):this._bindLink(a,this.data.dest||null));this.container.appendChild(a);return this.container},_bindLink:function(a,b){var c=this;a.href=this.linkService.getDestinationHash(b);a.onclick=function(){b&&c.linkService.navigateTo(b);return!1};b&&(a.className="internalLink")},_bindNamedAction:function(a,b){var c=this;a.href=this.linkService.getAnchorUrl("");a.onclick=function(){c.linkService.executeNamedAction(b);
return!1};a.className="internalLink"}});return a}(),A=function(){function a(a){q.call(this,a,!!(a.data.hasPopup||a.data.title||a.data.contents))}h.inherit(a,q,{render:function(){this.container.className="textAnnotation";var a=document.createElement("img");a.style.height=this.container.style.height;a.style.width=this.container.style.width;a.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";a.alt="[{{type}} Annotation]";a.dataset.l10nId="text_annotation_type";a.dataset.l10nArgs=
JSON.stringify({type:this.data.name});this.data.hasPopup||this._createPopup(this.container,a,this.data);this.container.appendChild(a);return this.container}});return a}(),C=function(){function a(a){q.call(this,a,!a.data.hasAppearance&&!!a.data.fieldValue)}h.inherit(a,q,{render:function(){var a=document.createElement("div");a.textContent=this.data.fieldValue;a.style.textAlign=["left","center","right"][this.data.textAlignment];a.style.verticalAlign="middle";a.style.display="table-cell";var b=this.data.fontRefName?
this.page.commonObjs.getData(this.data.fontRefName):null;this._setTextStyle(a,b);this.container.appendChild(a);return this.container},_setTextStyle:function(a,b){a=a.style;a.fontSize=this.data.fontSize+"px";a.direction=0>this.data.fontDirection?"rtl":"ltr";b&&(a.fontWeight=b.black?b.bold?"900":"bold":b.bold?"bold":"normal",a.fontStyle=b.italic?"italic":"normal",a.fontFamily=(b.loadedName?'"'+b.loadedName+'", ':"")+(b.fallbackName||"Helvetica, sans-serif"))}});return a}(),G=function(){function a(a){q.call(this,
a,!(!a.data.title&&!a.data.contents))}h.inherit(a,q,{render:function(){this.container.className="popupAnnotation";var a=this.layer.querySelector('[data-annotation-id="'+this.data.parentId+'"]');if(!a)return this.container;var b=new E({container:this.container,trigger:a,color:this.data.color,title:this.data.title,contents:this.data.contents}),c=parseFloat(a.style.left),d=parseFloat(a.style.width);v.setProp("transformOrigin",this.container,-(c+d)+"px -"+a.style.top);this.container.style.left=c+d+"px";
this.container.appendChild(b.render());return this.container}});return a}(),E=function(){function a(a){this.container=a.container;this.trigger=a.trigger;this.color=a.color;this.title=a.title;this.contents=a.contents;this.hideWrapper=a.hideWrapper||!1;this.pinned=!1}a.prototype={render:function(){var a=document.createElement("div");a.className="popupWrapper";this.hideElement=this.hideWrapper?a:this.container;this.hideElement.setAttribute("hidden",!0);var b=document.createElement("div");b.className=
"popup";var c=this.color;c&&(b.style.backgroundColor=h.makeCssRgb(.7*(255-c[0])+c[0]|0,.7*(255-c[1])+c[1]|0,.7*(255-c[2])+c[2]|0));c=this._formatContents(this.contents);var d=document.createElement("h1");d.textContent=this.title;this.trigger.addEventListener("click",this._toggle.bind(this));this.trigger.addEventListener("mouseover",this._show.bind(this,!1));this.trigger.addEventListener("mouseout",this._hide.bind(this,!1));b.addEventListener("click",this._hide.bind(this,!0));b.appendChild(d);b.appendChild(c);
a.appendChild(b);return a},_formatContents:function(a){var b=document.createElement("p");a=a.split(/(?:\r\n?|\n)/);for(var c=0,d=a.length;c<d;++c)b.appendChild(document.createTextNode(a[c])),c<d-1&&b.appendChild(document.createElement("br"));return b},_toggle:function(){this.pinned?this._hide(!0):this._show(!0)},_show:function(a){a&&(this.pinned=!0);this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)},_hide:function(a){a&&(this.pinned=
!1);this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),--this.container.style.zIndex)}};return a}(),F=function(){function a(a){q.call(this,a,!!(a.data.hasPopup||a.data.title||a.data.contents))}h.inherit(a,q,{render:function(){this.container.className="highlightAnnotation";this.data.hasPopup||this._createPopup(this.container,null,this.data);return this.container}});return a}(),I=function(){function a(a){q.call(this,a,!!(a.data.hasPopup||a.data.title||
a.data.contents))}h.inherit(a,q,{render:function(){this.container.className="underlineAnnotation";this.data.hasPopup||this._createPopup(this.container,null,this.data);return this.container}});return a}(),e=function(){function a(a){q.call(this,a,!!(a.data.hasPopup||a.data.title||a.data.contents))}h.inherit(a,q,{render:function(){this.container.className="squigglyAnnotation";this.data.hasPopup||this._createPopup(this.container,null,this.data);return this.container}});return a}(),m=function(){function a(a){q.call(this,
a,!!(a.data.hasPopup||a.data.title||a.data.contents))}h.inherit(a,q,{render:function(){this.container.className="strikeoutAnnotation";this.data.hasPopup||this._createPopup(this.container,null,this.data);return this.container}});return a}(),x=function(){function a(a){q.call(this,a,!0);this.filename=w(a.data.file.filename);this.content=a.data.file.content}h.inherit(a,q,{render:function(){this.container.className="fileAttachmentAnnotation";var a=document.createElement("div");a.style.height=this.container.style.height;
a.style.width=this.container.style.width;a.addEventListener("dblclick",this._download.bind(this));this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,a,this.data);this.container.appendChild(a);return this.container},_download:function(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):z("Download cannot be started due to unavailable download manager")}});return a}();a=function(){return{render:function(a){for(var b=new d,
c=0,e=a.annotations.length;c<e;c++){var f=a.annotations[c];f&&(f={data:f,layer:a.div,page:a.page,viewport:a.viewport,linkService:a.linkService,downloadManager:a.downloadManager,imageResourcesPath:a.imageResourcesPath||t("imageResourcesPath")},f=b.create(f),f.isRenderable&&a.div.appendChild(f.render()))}},update:function(a){for(var b=0,c=a.annotations.length;b<c;b++){var d=a.div.querySelector('[data-annotation-id="'+a.annotations[b].id+'"]');d&&v.setProp("transform",d,"matrix("+a.viewport.transform.join(",")+
")")}a.div.removeAttribute("hidden")}}}();c.AnnotationLayer=a});(function(c,a){a(c.pdfjsDisplayTextLayer={},c.pdfjsSharedUtil,c.pdfjsDisplayDOMUtils)})(this,function(c,a,f){var d=a.Util,b=a.createPromiseCapability,g=f.CustomStyle,h=f.getDefaultSetting;a=function(){function a(a,b,c,f){f=f[c.fontName];var g=document.createElement("div");a.push(g);if(k.test(c.str)){var l=d.transform(b.transform,c.transform);a=Math.atan2(l[1],l[0]);f.vertical&&(a+=Math.PI/2);var n=Math.sqrt(l[2]*l[2]+l[3]*l[3]),p=n;f.ascent?
p*=f.ascent:f.descent&&(p*=1+f.descent);if(0===a){var q=l[4];l=l[5]-p}else q=l[4]+p*Math.sin(a),l=l[5]-p*Math.cos(a);g.style.left=q+"px";g.style.top=l+"px";g.style.fontSize=n+"px";g.style.fontFamily=f.fontFamily;g.textContent=c.str;h("pdfBug")&&(g.dataset.fontName=c.fontName);0!==a&&(g.dataset.angle=180/Math.PI*a);1<c.str.length&&(g.dataset.canvasWidth=f.vertical?c.height*b.scale:c.width*b.scale)}else g.dataset.isWhitespace=!0}function c(a){if(!a._canceled){var b=a._container,c=a._textDivs;a=a._capability;
var d=c.length;if(!(1E5<d)){var f=document.createElement("canvas");f.mozOpaque=!0;f=f.getContext("2d",{alpha:!1});for(var h,k,l=0;l<d;l++){var n=c[l];if(void 0===n.dataset.isWhitespace){var p=n.style.fontSize,e=n.style.fontFamily;if(p!==h||e!==k)f.font=p+" "+e,h=p,k=e;p=f.measureText(n.textContent).width;0<p&&(b.appendChild(n),p=void 0!==n.dataset.canvasWidth?"scaleX("+n.dataset.canvasWidth/p+")":"",(e=n.dataset.angle)&&(p="rotate("+e+"deg) "+p),p&&g.setProp("transform",n,p))}}}a.resolve()}}function f(a,
c,d,f){this._textContent=a;this._container=c;this._viewport=d;this._textDivs=f=f||[];this._canceled=!1;this._capability=b();this._renderTimer=null}var k=/\S/;f.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0;null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null);this._capability.reject("canceled")},_render:function(b){for(var d=this._textContent.items,f=this._textContent.styles,g=this._textDivs,h=this._viewport,k=0,l=d.length;k<
l;k++)a(g,h,d[k],f);if(b){var n=this;this._renderTimer=setTimeout(function(){c(n);n._renderTimer=null},b)}else c(this)}};return function(a){var b=new f(a.textContent,a.container,a.viewport,a.textDivs);b._render(a.timeout);return b}}();c.renderTextLayer=a});(function(c,a){a(c.pdfjsDisplayWebGL={},c.pdfjsSharedUtil,c.pdfjsDisplayDOMUtils)})(this,function(c,a,f){var d=a.shadow,b=f.getDefaultSetting;a=function(){function a(a,b,c){c=a.createShader(c);a.shaderSource(c,b);a.compileShader(c);if(!a.getShaderParameter(c,
a.COMPILE_STATUS))throw a=a.getShaderInfoLog(c),Error("Error during shader compilation: "+a);return c}function c(a,b){for(var c=a.createProgram(),d=0,f=b.length;d<f;++d)a.attachShader(c,b[d]);a.linkProgram(c);if(!a.getProgramParameter(c,a.LINK_STATUS))throw a=a.getProgramInfoLog(c),Error("Error during program linking: "+a);return c}function f(a,b,c){a.activeTexture(c);c=a.createTexture();a.bindTexture(a.TEXTURE_2D,c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b);return c}function g(){h||(k=document.createElement("canvas"),h=k.getContext("webgl",{premultipliedalpha:!1}))}var h,k,v=null,t=null;return{get isEnabled(){if(b("disableWebGL"))return!1;var a=!1;try{g(),a=!!h}catch(y){}return d(this,"isEnabled",a)},composeSMask:function(b,d,l){var n=b.width,
p=b.height;if(!v){g();var q=k;k=null;var t=h;h=null;var r=a(t,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",
t.VERTEX_SHADER),e=a(t,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",
t.FRAGMENT_SHADER),m=c(t,[r,e]);t.useProgram(m);r={};r.gl=t;r.canvas=q;r.resolutionLocation=t.getUniformLocation(m,"u_resolution");r.positionLocation=t.getAttribLocation(m,"a_position");r.backdropLocation=t.getUniformLocation(m,"u_backdrop");r.subtypeLocation=t.getUniformLocation(m,"u_subtype");q=t.getAttribLocation(m,"a_texCoord");e=t.getUniformLocation(m,"u_image");m=t.getUniformLocation(m,"u_mask");var w=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,w);t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,
0,1,0,0,1,0,1,1,0,1,1]),t.STATIC_DRAW);t.enableVertexAttribArray(q);t.vertexAttribPointer(q,2,t.FLOAT,!1,0,0);t.uniform1i(e,0);t.uniform1i(m,1);v=r}t=v;r=t.canvas;q=t.gl;r.width=n;r.height=p;q.viewport(0,0,q.drawingBufferWidth,q.drawingBufferHeight);q.uniform2f(t.resolutionLocation,n,p);l.backdrop?q.uniform4f(t.resolutionLocation,l.backdrop[0],l.backdrop[1],l.backdrop[2],1):q.uniform4f(t.resolutionLocation,0,0,0,0);q.uniform1i(t.subtypeLocation,"Luminosity"===l.subtype?1:0);b=f(q,b,q.TEXTURE0);d=
f(q,d,q.TEXTURE1);l=q.createBuffer();q.bindBuffer(q.ARRAY_BUFFER,l);q.bufferData(q.ARRAY_BUFFER,new Float32Array([0,0,n,0,0,p,0,p,n,0,n,p]),q.STATIC_DRAW);q.enableVertexAttribArray(t.positionLocation);q.vertexAttribPointer(t.positionLocation,2,q.FLOAT,!1,0,0);q.clearColor(0,0,0,0);q.enable(q.BLEND);q.blendFunc(q.ONE,q.ONE_MINUS_SRC_ALPHA);q.clear(q.COLOR_BUFFER_BIT);q.drawArrays(q.TRIANGLES,0,6);q.flush();q.deleteTexture(b);q.deleteTexture(d);q.deleteBuffer(l);return r},drawFigures:function(b,d,f,
l,n){if(!t){g();var p=k;k=null;var q=h;h=null;var r=a(q,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",
q.VERTEX_SHADER),e=a(q,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",q.FRAGMENT_SHADER);r=c(q,[r,
e]);q.useProgram(r);e={};e.gl=q;e.canvas=p;e.resolutionLocation=q.getUniformLocation(r,"u_resolution");e.scaleLocation=q.getUniformLocation(r,"u_scale");e.offsetLocation=q.getUniformLocation(r,"u_offset");e.positionLocation=q.getAttribLocation(r,"a_position");e.colorLocation=q.getAttribLocation(r,"a_color");t=e}p=t;q=p.canvas;r=p.gl;q.width=b;q.height=d;r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight);r.uniform2f(p.resolutionLocation,b,d);b=0;var m;var v=0;for(m=l.length;v<m;v++)switch(l[v].type){case "lattice":var w=
l[v].coords.length/l[v].verticesPerRow|0;b+=(w-1)*(l[v].verticesPerRow-1)*6;break;case "triangles":b+=l[v].coords.length}e=new Float32Array(2*b);d=new Uint8Array(3*b);var y=n.coords,z=n.colors,A=0,C=0;v=0;for(m=l.length;v<m;v++){w=l[v];var G=w.coords,fa=w.colors;switch(w.type){case "lattice":var R=w.verticesPerRow;w=G.length/R|0;for(var X=1;X<w;X++)for(var M=X*R+1,ba=1;ba<R;ba++,M++)e[A]=y[G[M-R-1]],e[A+1]=y[G[M-R-1]+1],e[A+2]=y[G[M-R]],e[A+3]=y[G[M-R]+1],e[A+4]=y[G[M-1]],e[A+5]=y[G[M-1]+1],d[C]=
z[fa[M-R-1]],d[C+1]=z[fa[M-R-1]+1],d[C+2]=z[fa[M-R-1]+2],d[C+3]=z[fa[M-R]],d[C+4]=z[fa[M-R]+1],d[C+5]=z[fa[M-R]+2],d[C+6]=z[fa[M-1]],d[C+7]=z[fa[M-1]+1],d[C+8]=z[fa[M-1]+2],e[A+6]=e[A+2],e[A+7]=e[A+3],e[A+8]=e[A+4],e[A+9]=e[A+5],e[A+10]=y[G[M]],e[A+11]=y[G[M]+1],d[C+9]=d[C+3],d[C+10]=d[C+4],d[C+11]=d[C+5],d[C+12]=d[C+6],d[C+13]=d[C+7],d[C+14]=d[C+8],d[C+15]=z[fa[M]],d[C+16]=z[fa[M]+1],d[C+17]=z[fa[M]+2],A+=12,C+=18;break;case "triangles":for(w=0,R=G.length;w<R;w++)e[A]=y[G[w]],e[A+1]=y[G[w]+1],d[C]=
z[fa[w]],d[C+1]=z[fa[w]+1],d[C+2]=z[fa[w]+2],A+=2,C+=3}}f?r.clearColor(f[0]/255,f[1]/255,f[2]/255,1):r.clearColor(0,0,0,0);r.clear(r.COLOR_BUFFER_BIT);f=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,f);r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW);r.enableVertexAttribArray(p.positionLocation);r.vertexAttribPointer(p.positionLocation,2,r.FLOAT,!1,0,0);l=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,l);r.bufferData(r.ARRAY_BUFFER,d,r.STATIC_DRAW);r.enableVertexAttribArray(p.colorLocation);r.vertexAttribPointer(p.colorLocation,
3,r.UNSIGNED_BYTE,!1,0,0);r.uniform2f(p.scaleLocation,n.scaleX,n.scaleY);r.uniform2f(p.offsetLocation,n.offsetX,n.offsetY);r.drawArrays(r.TRIANGLES,0,b);r.flush();r.deleteBuffer(f);r.deleteBuffer(l);return q},clear:function(){v&&v.canvas&&(v.canvas.width=0,v.canvas.height=0);t&&t.canvas&&(t.canvas.width=0,t.canvas.height=0);t=v=null}}}();c.WebGLUtils=a});(function(c,a){a(c.pdfjsDisplayPatternHelper={},c.pdfjsSharedUtil,c.pdfjsDisplayWebGL)})(this,function(c,a,f){var d=a.Util,b=a.info,g=a.isArray,
h=a.error,k=f.WebGLUtils,r={RadialAxial:{fromIR:function(a){var b=a[1],c=a[2],d=a[3],f=a[4],g=a[5],h=a[6];return{type:"Pattern",getPattern:function(a){var k;"axial"===b?k=a.createLinearGradient(d[0],d[1],f[0],f[1]):"radial"===b&&(k=a.createRadialGradient(d[0],d[1],g,f[0],f[1],h));a=0;for(var l=c.length;a<l;++a){var n=c[a];k.addColorStop(n[0],n[1])}return k}}}}},w=function(){function a(a,b,c,d,f,g,h,k){var l=b.coords,n=b.colors,e=a.data;a=4*a.width;if(l[c+1]>l[d+1]){var m=c;c=d;d=m;m=g;g=h;h=m}l[d+
1]>l[f+1]&&(m=d,d=f,f=m,m=h,h=k,k=m);l[c+1]>l[d+1]&&(m=c,c=d,d=m,m=g,g=h,h=m);m=(l[c]+b.offsetX)*b.scaleX;c=(l[c+1]+b.offsetY)*b.scaleY;var p=(l[d]+b.offsetX)*b.scaleX;d=(l[d+1]+b.offsetY)*b.scaleY;var q=(l[f]+b.offsetX)*b.scaleX;b=(l[f+1]+b.offsetY)*b.scaleY;if(!(c>=b)){f=n[g];l=n[g+1];g=n[g+2];var t=n[h],r=n[h+1];h=n[h+2];var v=n[k],w=n[k+1];k=n[k+2];n=Math.round(b);for(var y,z,A,X,M,C,E,G,S,oa=Math.round(c);oa<=n;oa++){oa<d?(S=oa<c?0:c===d?1:(c-oa)/(c-d),y=m-(m-p)*S,z=f-(f-t)*S,A=l-(l-r)*S,X=g-
(g-h)*S):(S=oa>b?1:d===b?0:(d-oa)/(d-b),y=p-(p-q)*S,z=t-(t-v)*S,A=r-(r-w)*S,X=h-(h-k)*S);S=oa<c?0:oa>b?1:(c-oa)/(c-b);M=m-(m-q)*S;C=f-(f-v)*S;E=l-(l-w)*S;G=g-(g-k)*S;S=Math.round(Math.min(y,M));for(var Ba=Math.round(Math.max(y,M)),La=a*oa+4*S,va=S;va<=Ba;va++)S=(y-va)/(y-M),S=0>S?0:1<S?1:S,e[La++]=z-(z-C)*S|0,e[La++]=A-(A-E)*S|0,e[La++]=X-(X-G)*S|0,e[La++]=255}}}return function(b,c,d,f,g,l,n){var p=Math.floor(b[0]),q=Math.floor(b[1]),t=Math.ceil(b[2])-p;b=Math.ceil(b[3])-q;var e=Math.min(Math.ceil(Math.abs(t*
c[0]*1.1)),3E3);c=Math.min(Math.ceil(Math.abs(b*c[1]*1.1)),3E3);t/=e;b/=c;d={coords:d,colors:f,offsetX:-p,offsetY:-q,scaleX:1/t,scaleY:1/b};f=e+4;var m=c+4;if(k.isEnabled)g=k.drawFigures(e,c,l,g,d),n=n.getCanvas("mesh",f,m,!1),n.context.drawImage(g,2,2);else{n=n.getCanvas("mesh",f,m,!1);f=n.context;c=f.createImageData(e,c);if(l){var r=c.data;e=0;for(m=r.length;e<m;e+=4)r[e]=l[0],r[e+1]=l[1],r[e+2]=l[2],r[e+3]=255}for(e=0;e<g.length;e++){l=c;var v=g[e];m=d;r=v.coords;var w=v.colors;switch(v.type){case "lattice":var y=
v.verticesPerRow;var z=Math.floor(r.length/y)-1,A=y-1;for(v=0;v<z;v++)for(var C=v*y,G=0;G<A;G++,C++)a(l,m,r[C],r[C+1],r[C+y],w[C],w[C+1],w[C+y]),a(l,m,r[C+y+1],r[C+1],r[C+y],w[C+y+1],w[C+1],w[C+y]);break;case "triangles":v=0;for(y=r.length;v<y;v+=3)a(l,m,r[v],r[v+1],r[v+2],w[v],w[v+1],w[v+2]);break;default:h("illigal figure")}}f.putImageData(c,2,2)}g=n.canvas;return{canvas:g,offsetX:p-2*t,offsetY:q-2*b,scaleX:t,scaleY:b}}}();r.Mesh={fromIR:function(a){var b=a[2],c=a[3],f=a[4],g=a[5],h=a[6],k=a[8];
return{type:"Pattern",getPattern:function(a,l,n){if(n)var p=d.singularValueDecompose2dScale(a.mozCurrentTransform);else if(p=d.singularValueDecompose2dScale(l.baseTransform),h){var e=d.singularValueDecompose2dScale(h);p=[p[0]*e[0],p[1]*e[1]]}p=w(g,p,b,c,f,n?null:k,l.cachedCanvases);n||(a.setTransform.apply(a,l.baseTransform),h&&a.transform.apply(a,h));a.translate(p.offsetX,p.offsetY);a.scale(p.scaleX,p.scaleY);return a.createPattern(p.canvas,"no-repeat")}}}};r.Dummy={fromIR:function(){return{type:"Pattern",
getPattern:function(){return"hotpink"}}}};a=function(){function a(a,b,c,d,f){this.operatorList=a[2];this.matrix=a[3]||[1,0,0,1,0,0];this.bbox=a[4];this.xstep=a[5];this.ystep=a[6];this.paintType=a[7];this.tilingType=a[8];this.color=b;this.canvasGraphicsFactory=d;this.baseTransform=f;this.type="Pattern";this.ctx=c}a.prototype={createPatternCanvas:function(a){var c=this.operatorList,f=this.bbox,g=this.xstep,h=this.ystep,k=this.paintType,l=this.color,n=this.canvasGraphicsFactory;b("TilingType: "+this.tilingType);
var p=f[0],r=f[1],e=f[2],m=f[3],v=[p,r],w=[p+g,r+h],z=w[0]-v[0];w=w[1]-v[1];var N=d.singularValueDecompose2dScale(this.matrix),ka=d.singularValueDecompose2dScale(this.baseTransform);N=[N[0]*ka[0],N[1]*ka[1]];z=Math.min(Math.ceil(Math.abs(z*N[0])),3E3);w=Math.min(Math.ceil(Math.abs(w*N[1])),3E3);N=a.cachedCanvases.getCanvas("pattern",z,w,!0);ka=N.context;n=n.createCanvasGraphics(ka);n.groupLevel=a.groupLevel;this.setFillAndStrokeStyleToContext(ka,k,l);this.setScale(z,w,g,h);this.transformToScale(n);
n.transform.apply(n,[1,0,0,1,-v[0],-v[1]]);this.clipBbox(n,f,p,r,e,m);n.executeOperatorList(c);return N.canvas},setScale:function(a,b,c,d){this.scale=[a/c,b/d]},transformToScale:function(a){var b=this.scale;a.transform.apply(a,[b[0],0,0,b[1],0,0])},scaleToContext:function(){var a=this.scale;this.ctx.scale(1/a[0],1/a[1])},clipBbox:function(a,b,c,d,f,h){b&&g(b)&&4===b.length&&(a.ctx.rect(c,d,f-c,h-d),a.clip(),a.endPath())},setFillAndStrokeStyleToContext:function(a,b,c){switch(b){case 1:b=this.ctx;a.fillStyle=
b.fillStyle;a.strokeStyle=b.strokeStyle;break;case 2:b=d.makeCssRgb(c[0],c[1],c[2]);a.fillStyle=b;a.strokeStyle=b;break;default:h("Unsupported paint type: "+b)}},getPattern:function(a,b){b=this.createPatternCanvas(b);a=this.ctx;a.setTransform.apply(a,this.baseTransform);a.transform.apply(a,this.matrix);this.scaleToContext();return a.createPattern(b,"repeat")}};return a}();c.getShadingPatternFromIR=function(a){var b=r[a[0]];b||h("Unknown IR type: "+a[0]);return b.fromIR(a)};c.TilingPattern=a});(function(c,
a){a(c.pdfjsDisplayCanvas={},c.pdfjsSharedUtil,c.pdfjsDisplayDOMUtils,c.pdfjsDisplayPatternHelper,c.pdfjsDisplayWebGL)})(this,function(c,a,f,d,b){function g(a,b){var c=document.createElement("canvas");c.width=a;c.height=b;return c}function h(a){a.mozCurrentTransform||(a._originalSave=a.save,a._originalRestore=a.restore,a._originalRotate=a.rotate,a._originalScale=a.scale,a._originalTranslate=a.translate,a._originalTransform=a.transform,a._originalSetTransform=a.setTransform,a._transformMatrix=a._transformMatrix||
[1,0,0,1,0,0],a._transformStack=[],Object.defineProperty(a,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(a,"mozCurrentTransformInverse",{get:function(){var a=this._transformMatrix,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4];a=a[5];var g=b*e-c*d,h=c*d-b*e;return[e/g,c/h,d/h,b/g,(e*f-d*a)/h,(c*f-b*a)/g]}}),a.save=function(){var a=this._transformMatrix;this._transformStack.push(a);this._transformMatrix=a.slice(0,6);this._originalSave()},a.restore=function(){var a=
this._transformStack.pop();a&&(this._transformMatrix=a,this._originalRestore())},a.translate=function(a,b){var c=this._transformMatrix;c[4]=c[0]*a+c[2]*b+c[4];c[5]=c[1]*a+c[3]*b+c[5];this._originalTranslate(a,b)},a.scale=function(a,b){var c=this._transformMatrix;c[0]*=a;c[1]*=a;c[2]*=b;c[3]*=b;this._originalScale(a,b)},a.transform=function(b,c,d,e,f,g){var h=this._transformMatrix;this._transformMatrix=[h[0]*b+h[2]*c,h[1]*b+h[3]*c,h[0]*d+h[2]*e,h[1]*d+h[3]*e,h[0]*f+h[2]*g+h[4],h[1]*f+h[3]*g+h[5]];
a._originalTransform(b,c,d,e,f,g)},a.setTransform=function(b,c,d,e,f,g){this._transformMatrix=[b,c,d,e,f,g];a._originalSetTransform(b,c,d,e,f,g)},a.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this._transformMatrix;this._transformMatrix=[d[0]*b+d[2]*c,d[1]*b+d[3]*c,d[0]*-c+d[2]*b,d[1]*-c+d[3]*b,d[4],d[5]];this._originalRotate(a)})}function k(a){var b=a.width,c=a.height,d,e=b+1,f=new Uint8Array(e*(c+1)),g=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),h=b+7&-8,k=a.data,l=new Uint8Array(h*
c),m=0;a=0;for(d=k.length;a<d;a++){var n=128;for(var p=k[a];0<n;)l[m++]=p&n?0:255,n>>=1}m=k=0;0!==l[m]&&(f[0]=1,++k);for(d=1;d<b;d++)l[m]!==l[m+1]&&(f[d]=l[m]?2:1,++k),m++;0!==l[m]&&(f[d]=2,++k);for(a=1;a<c;a++){m=a*h;n=a*e;l[m-h]!==l[m]&&(f[n]=l[m]?1:8,++k);p=(l[m]?4:0)+(l[m-h]?8:0);for(d=1;d<b;d++)p=(p>>2)+(l[m+1]?4:0)+(l[m-h+1]?8:0),g[p]&&(f[n+d]=g[p],++k),m++;l[m-h]!==l[m]&&(f[n+d]=l[m]?2:4,++k);if(1E3<k)return null}m=h*(c-1);n=a*e;0!==l[m]&&(f[n]=8,++k);for(d=1;d<b;d++)l[m]!==l[m+1]&&(f[n+d]=
l[m]?4:8,++k),m++;0!==l[m]&&(f[n+d]=4,++k);if(1E3<k)return null;g=new Int32Array([0,e,-1,0,-e,0,0,0,1]);var q=[];for(a=0;k&&a<=c;a++){h=a*e;for(l=h+b;h<l&&!f[h];)h++;if(h!==l){l=[h%e,a];m=f[h];d=h;do{n=g[m];do h+=n;while(!f[h]);n=f[h];5!==n&&10!==n?(m=n,f[h]=0):(m=n&51*m>>4,f[h]&=m>>2|m<<2);l.push(h%e);l.push(h/e|0);--k}while(d!==h);q.push(l);--a}}return function(a){a.save();a.scale(1/b,-1/c);a.translate(0,-c);a.beginPath();for(var d=0,e=q.length;d<e;d++){var f=q[d];a.moveTo(f[0],f[1]);for(var g=
2,h=f.length;g<h;g+=2)a.lineTo(f[g],f[g+1])}a.fill();a.beginPath();a.restore()}}var r=a.FONT_IDENTITY_MATRIX,w=a.IDENTITY_MATRIX,z=a.ImageKind,v=a.OPS,t=a.TextRenderingMode,q=a.Uint32ArrayView,y=a.Util,A=a.assert,C=a.info,G=a.isNum,E=a.isArray,F=a.isLittleEndian,I=a.error,e=a.shadow,m=a.warn,x=d.TilingPattern,D=d.getShadingPatternFromIR,H=b.WebGLUtils,N=f.hasCanvasTypedArrays,ka={get value(){return e(ka,"value",N())}},aa={get value(){return e(aa,"value",F())}},Aa=function(){function a(){this.cache=
Object.create(null)}a.prototype={getCanvas:function(a,b,c,d){void 0!==this.cache[a]?(a=this.cache[a],a.canvas.width=b,a.canvas.height=c,a.context.setTransform(1,0,0,1,0,0)):(b=g(b,c),c=b.getContext("2d"),d&&h(c),this.cache[a]=a={canvas:b,context:c});return a},clear:function(){for(var a in this.cache){var b=this.cache[a];b.canvas.width=0;b.canvas.height=0;delete this.cache[a]}}};return a}(),fa=function(){function a(a){this.alphaIsShape=!1;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=w;this.textMatrixScale=
1;this.fontMatrix=r;this.wordSpacing=this.charSpacing=this.lineY=this.lineX=this.y=this.x=this.leading=0;this.textHScale=1;this.textRenderingMode=t.FILL;this.textRise=0;this.strokeColor=this.fillColor="#000000";this.patternFill=!1;this.lineWidth=this.strokeAlpha=this.fillAlpha=1;this.resumeSMaskCtx=this.activeSMask=null;this.old=a}a.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(a,b){this.x=a;this.y=b}};return a}();a=function(){function a(a,b,c,d){this.ctx=a;this.current=
new fa;this.stateStack=[];this.pendingClip=null;this.pendingEOFill=!1;this.xobjs=this.res=null;this.commonObjs=b;this.objs=c;this.imageLayer=d;this.groupStack=[];this.baseTransform=this.processingType3=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.cachedCanvases=new Aa;a&&h(a);this.cachedGetSinglePixelWidth=null}function b(a,b){if("undefined"!==typeof ImageData&&b instanceof ImageData)a.putImageData(b,0,0);else{var c=b.height,d=b.width,
e=c%16;c=(c-e)/16;var f=0===e?c:c+1,g=a.createImageData(d,16),h=0,k=b.data,l=g.data,m,n;if(b.kind===z.GRAYSCALE_1BPP){var p=k.byteLength;l=ka.value?new Uint32Array(l.buffer):new q(l);var r=l.length,t=d+7>>3,u=aa.value||!ka.value?4278190080:255;for(m=0;m<f;m++){var v=m<c?16:e;for(n=b=0;n<v;n++){var w=p-h,x=0;w=w>t?d:8*w-7;for(var y=w&-8,A=0,D=0;x<y;x+=8)D=k[h++],l[b++]=D&128?4294967295:u,l[b++]=D&64?4294967295:u,l[b++]=D&32?4294967295:u,l[b++]=D&16?4294967295:u,l[b++]=D&8?4294967295:u,l[b++]=D&4?4294967295:
u,l[b++]=D&2?4294967295:u,l[b++]=D&1?4294967295:u;for(;x<w;x++)0===A&&(D=k[h++],A=128),l[b++]=D&A?4294967295:u,A>>=1}for(;b<r;)l[b++]=0;a.putImageData(g,0,16*m)}}else if(b.kind===z.RGBA_32BPP){n=0;v=64*d;for(m=0;m<c;m++)l.set(k.subarray(h,h+v)),h+=v,a.putImageData(g,0,n),n+=16;m<f&&(l.set(k.subarray(h,h+d*e*4)),a.putImageData(g,0,n))}else if(b.kind===z.RGB_24BPP)for(v=16*d,m=0;m<f;m++){m>=c&&(v=e,v*=d);b=0;for(n=v;n--;)l[b++]=k[h++],l[b++]=k[h++],l[b++]=k[h++],l[b++]=255;a.putImageData(g,0,16*m)}else I("bad image kind: "+
b.kind)}}function c(a,b){var c=b.height,d=b.width,e=c%16;c=(c-e)/16;var f=0===e?c:c+1,g=a.createImageData(d,16),h=0;b=b.data;for(var k=g.data,l=0;l<f;l++){for(var m=l<c?16:e,n=3,p=0;p<m;p++)for(var q=0,r=0;r<d;r++){if(!q){var t=b[h++];q=128}k[n]=t&q?0:255;n+=4;q>>=1}a.putImageData(g,0,16*l)}}function d(a,b){for(var c="strokeStyle fillStyle fillRule globalAlpha lineWidth lineCap lineJoin miterLimit globalCompositeOperation font".split(" "),d=0,e=c.length;d<e;d++){var f=c[d];void 0!==a[f]&&(b[f]=a[f])}void 0!==
a.setLineDash?(b.setLineDash(a.getLineDash()),b.lineDashOffset=a.lineDashOffset):void 0!==a.mozDashOffset&&(b.mozDash=a.mozDash,b.mozDashOffset=a.mozDashOffset)}function f(a,b,c){for(var d=a.length,e=1/255,f=3;f<d;f+=4)b[f]=b[f]*(c?c[a[f]]:a[f])*e|0}function g(a,b,c){for(var d=a.length,e=3;e<d;e+=4){var f=77*a[e-3]+152*a[e-2]+28*a[e-1];b[e]=c?b[e]*c[f>>8]>>8:b[e]*f>>16}}function l(a,b,c){var d=b.canvas,e=b.context;a.setTransform(b.scaleX,0,0,b.scaleY,b.offsetX,b.offsetY);var h=b.backdrop||null;if(!b.transferMap&&
H.isEnabled)c=H.composeSMask(c.canvas,d,{subtype:b.subtype,backdrop:h}),a.setTransform(1,0,0,1,0,0),a.drawImage(c,b.offsetX,b.offsetY);else{var k=d.width,l=d.height,m=b.transferMap,n=!!h,p=n?h[0]:0,q=n?h[1]:0;h=n?h[2]:0;b="Luminosity"===b.subtype?g:f;for(var r=Math.min(l,Math.ceil(1048576/k)),t=0;t<l;t+=r){var v=Math.min(r,l-t),u=e.getImageData(0,t,k,v);v=c.getImageData(0,t,k,v);if(n)for(var w=u.data,x=p,y=q,z=h,A=w.length,D=3;D<A;D+=4){var M=w[D];if(0===M)w[D-3]=x,w[D-2]=y,w[D-1]=z;else if(255>M){var C=
255-M;w[D-3]=w[D-3]*M+x*C>>8;w[D-2]=w[D-2]*M+y*C>>8;w[D-1]=w[D-1]*M+z*C>>8}}b(u.data,v.data,m);e.putImageData(v,0,t)}a.drawImage(d,0,0)}}var n=["butt","round","square"],p=["miter","round","bevel"],F={},N={};a.prototype={beginDrawing:function(a,b,c){var d=this.ctx.canvas.width,e=this.ctx.canvas.height;this.ctx.save();this.ctx.fillStyle="rgb(255, 255, 255)";this.ctx.fillRect(0,0,d,e);this.ctx.restore();c&&(c=this.cachedCanvases.getCanvas("transparent",d,e,!0),this.compositeCtx=this.ctx,this.transparentCanvas=
c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform));this.ctx.save();a&&this.ctx.transform.apply(this.ctx,a);this.ctx.transform.apply(this.ctx,b.transform);this.baseTransform=this.ctx.mozCurrentTransform.slice();this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(a,b,c,d){var e=a.argsArray;a=a.fnArray;b=b||0;var f=e.length;if(f===b)return b;for(var g=10<f-b&&"function"===typeof c,h=g?Date.now()+15:0,k=0,l=this.commonObjs,
m=this.objs,n;;){if(void 0!==d&&b===d.nextBreakPoint)return d.breakIt(b,c),b;n=a[b];if(n!==v.dependency)this[n].apply(this,e[b]);else{n=e[b];for(var p=0,q=n.length;p<q;p++){var r=n[p],t="g"===r[0]&&"_"===r[1]?l:m;if(!t.isResolved(r))return t.get(r,c),b}}b++;if(b===f)return b;if(g&&10<++k){if(Date.now()>h)return c(),b;k=0}}},endDrawing:function(){null!==this.current.activeSMask&&this.endSMaskGroup();this.ctx.restore();this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,
0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null);this.cachedCanvases.clear();H.clear();this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(a){this.current.lineWidth=a;this.ctx.lineWidth=a},setLineCap:function(a){this.ctx.lineCap=n[a]},setLineJoin:function(a){this.ctx.lineJoin=p[a]},setMiterLimit:function(a){this.ctx.miterLimit=a},setDash:function(a,b){var c=this.ctx;void 0!==c.setLineDash?(c.setLineDash(a),c.lineDashOffset=b):
(c.mozDash=a,c.mozDashOffset=b)},setRenderingIntent:function(a){},setFlatness:function(a){},setGState:function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b],e=d[1];switch(d[0]){case "LW":this.setLineWidth(e);break;case "LC":this.setLineCap(e);break;case "LJ":this.setLineJoin(e);break;case "ML":this.setMiterLimit(e);break;case "D":this.setDash(e[0],e[1]);break;case "RI":this.setRenderingIntent(e);break;case "FL":this.setFlatness(e);break;case "Font":this.setFont(e[0],e[1]);break;case "CA":this.current.strokeAlpha=
d[1];break;case "ca":this.current.fillAlpha=d[1];this.ctx.globalAlpha=d[1];break;case "BM":e&&e.name&&"Normal"!==e.name?(d=e.name.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}).substring(1),this.ctx.globalCompositeOperation=d,this.ctx.globalCompositeOperation!==d&&m('globalCompositeOperation "'+d+'" is not supported')):this.ctx.globalCompositeOperation="source-over";break;case "SMask":this.current.activeSMask&&(0<this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===
this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=e?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function(){var a=this.current.activeSMask,b=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,a.canvas.width,a.canvas.height,!0),c=this.ctx,e=c.mozCurrentTransform;this.ctx.save();b=b.context;b.scale(1/a.scaleX,1/a.scaleY);b.translate(-a.offsetX,-a.offsetY);b.transform.apply(b,e);a.startTransformInverse=
b.mozCurrentTransformInverse;d(c,b);this.ctx=b;this.setGState([["BM","Normal"],["ca",1],["CA",1]]);this.groupStack.push(c);this.groupLevel++},suspendSMaskGroup:function(){var a=this.ctx;this.groupLevel--;this.ctx=this.groupStack.pop();l(this.ctx,this.current.activeSMask,a);this.ctx.restore();this.ctx.save();d(a,this.ctx);this.current.resumeSMaskCtx=a;var b=y.transform(this.current.activeSMask.startTransformInverse,a.mozCurrentTransform);this.ctx.transform.apply(this.ctx,b);a.save();a.setTransform(1,
0,0,1,0,0);a.clearRect(0,0,a.canvas.width,a.canvas.height);a.restore()},resumeSMaskGroup:function(){var a=this.ctx;this.ctx=this.current.resumeSMaskCtx;this.groupStack.push(a);this.groupLevel++},endSMaskGroup:function(){var a=this.ctx;this.groupLevel--;this.ctx=this.groupStack.pop();l(this.ctx,this.current.activeSMask,a);this.ctx.restore();d(a,this.ctx);a=y.transform(this.current.activeSMask.startTransformInverse,a.mozCurrentTransform);this.ctx.transform.apply(this.ctx,a)},save:function(){this.ctx.save();
var a=this.current;this.stateStack.push(a);this.current=a.clone();this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup();null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup();0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.cachedGetSinglePixelWidth=this.pendingClip=null)},transform:function(a,b,c,d,
e,f){this.ctx.transform(a,b,c,d,e,f);this.cachedGetSinglePixelWidth=null},constructPath:function(a,b){for(var c=this.ctx,d=this.current,e=d.x,f=d.y,g=0,h=0,k=a.length;g<k;g++)switch(a[g]|0){case v.rectangle:e=b[h++];f=b[h++];var l=b[h++],m=b[h++];0===l&&(l=this.getSinglePixelWidth());0===m&&(m=this.getSinglePixelWidth());l=e+l;m=f+m;this.ctx.moveTo(e,f);this.ctx.lineTo(l,f);this.ctx.lineTo(l,m);this.ctx.lineTo(e,m);this.ctx.lineTo(e,f);this.ctx.closePath();break;case v.moveTo:e=b[h++];f=b[h++];c.moveTo(e,
f);break;case v.lineTo:e=b[h++];f=b[h++];c.lineTo(e,f);break;case v.curveTo:e=b[h+4];f=b[h+5];c.bezierCurveTo(b[h],b[h+1],b[h+2],b[h+3],e,f);h+=6;break;case v.curveTo2:c.bezierCurveTo(e,f,b[h],b[h+1],b[h+2],b[h+3]);e=b[h+2];f=b[h+3];h+=4;break;case v.curveTo3:e=b[h+2];f=b[h+3];c.bezierCurveTo(b[h],b[h+1],e,f,e,f);h+=4;break;case v.closePath:c.closePath()}d.setCurrentPoint(e,f)},closePath:function(){this.ctx.closePath()},stroke:function(a){a="undefined"!==typeof a?a:!0;var b=this.ctx,c=this.current.strokeColor;
b.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth);b.globalAlpha=this.current.strokeAlpha;c&&c.hasOwnProperty("type")&&"Pattern"===c.type?(b.save(),b.strokeStyle=c.getPattern(b,this),b.stroke(),b.restore()):b.stroke();a&&this.consumePath();b.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath();this.stroke()},fill:function(a){a="undefined"!==typeof a?a:!0;var b=this.ctx,c=this.current.fillColor,d=!1;this.current.patternFill&&(b.save(),this.baseTransform&&
b.setTransform.apply(b,this.baseTransform),b.fillStyle=c.getPattern(b,this),d=!0);this.pendingEOFill?(void 0!==b.mozFillRule?(b.mozFillRule="evenodd",b.fill(),b.mozFillRule="nonzero"):b.fill("evenodd"),this.pendingEOFill=!1):b.fill();d&&b.restore();a&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0;this.fill()},fillStroke:function(){this.fill(!1);this.stroke(!1);this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0;this.fillStroke()},closeFillStroke:function(){this.closePath();
this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0;this.closePath();this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=F},eoClip:function(){this.pendingClip=N},beginText:function(){this.current.textMatrix=w;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},endText:function(){var a=this.pendingTextPaths,b=this.ctx;if(void 0===a)b.beginPath();else{b.save();b.beginPath();for(var c=0;c<a.length;c++){var d=
a[c];b.setTransform.apply(b,d.transform);b.translate(d.x,d.y);d.addToPath(b,d.fontSize)}b.restore();b.clip();b.beginPath();delete this.pendingTextPaths}},setCharSpacing:function(a){this.current.charSpacing=a},setWordSpacing:function(a){this.current.wordSpacing=a},setHScale:function(a){this.current.textHScale=a/100},setLeading:function(a){this.current.leading=-a},setFont:function(a,b){var c=this.commonObjs.get(a),d=this.current;c||I("Can't find font for "+a);d.fontMatrix=c.fontMatrix?c.fontMatrix:
r;0!==d.fontMatrix[0]&&0!==d.fontMatrix[3]||m("Invalid font matrix for font "+a);0>b?(b=-b,d.fontDirection=-1):d.fontDirection=1;this.current.font=c;this.current.fontSize=b;if(!c.isType3Font){a=c.black?c.bold?"900":"bold":c.bold?"bold":"normal";d=c.italic?"italic":"normal";c='"'+(c.loadedName||"sans-serif")+'", '+c.fallbackName;var e=16>b?16:100<b?100:b;this.current.fontSizeScale=b/e;this.ctx.font=d+" "+a+" "+e+"px "+c}},setTextRenderingMode:function(a){this.current.textRenderingMode=a},setTextRise:function(a){this.current.textRise=
a},moveText:function(a,b){this.current.x=this.current.lineX+=a;this.current.y=this.current.lineY+=b},setLeadingMoveText:function(a,b){this.setLeading(-b);this.moveText(a,b)},setTextMatrix:function(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f];this.current.textMatrixScale=Math.sqrt(a*a+b*b);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function(a,b,c){var d=this.ctx,e=this.current,f=e.font,g=e.textRenderingMode;
e=e.fontSize/e.fontSizeScale;var h=g&t.FILL_STROKE_MASK;g=!!(g&t.ADD_TO_PATH_FLAG);if(f.disableFontFace||g)var k=f.getPathGenerator(this.commonObjs,a);f.disableFontFace?(d.save(),d.translate(b,c),d.beginPath(),k(d,e),h!==t.FILL&&h!==t.FILL_STROKE||d.fill(),h!==t.STROKE&&h!==t.FILL_STROKE||d.stroke(),d.restore()):(h!==t.FILL&&h!==t.FILL_STROKE||d.fillText(a,b,c),h!==t.STROKE&&h!==t.FILL_STROKE||d.strokeText(a,b,c));g&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:d.mozCurrentTransform,
x:b,y:c,fontSize:e,addToPath:k})},get isFontSubpixelAAEnabled(){var a=document.createElement("canvas").getContext("2d");a.scale(1.5,1);a.fillText("I",0,10);a=a.getImageData(0,0,10,10).data;for(var b=!1,c=3;c<a.length;c+=4)if(0<a[c]&&255>a[c]){b=!0;break}return e(this,"isFontSubpixelAAEnabled",b)},showText:function(a){var b=this.current,c=b.font;if(c.isType3Font)return this.showType3Text(a);var d=b.fontSize;if(0!==d){var e=this.ctx,f=b.fontSizeScale,g=b.charSpacing,h=b.wordSpacing,k=b.fontDirection,
l=b.textHScale*k,m=a.length,n=c.vertical,p=n?1:-1,q=c.defaultVMetrics,r=d*b.fontMatrix[0],u=b.textRenderingMode===t.FILL&&!c.disableFontFace;e.save();e.transform.apply(e,b.textMatrix);e.translate(b.x,b.y+b.textRise);b.patternFill&&(e.fillStyle=b.fillColor.getPattern(e,this));0<k?e.scale(l,-1):e.scale(l,1);var v=b.lineWidth,w=b.textMatrixScale;if(0===w||0===v){if(w=b.textRenderingMode&t.FILL_STROKE_MASK,w===t.STROKE||w===t.FILL_STROKE)this.cachedGetSinglePixelWidth=null,v=.65*this.getSinglePixelWidth()}else v/=
w;1!==f&&(e.scale(f,f),v/=f);e.lineWidth=v;for(w=v=0;w<m;++w){var x=a[w];if(G(x))v+=p*x*d/1E3;else{var y=!1,z=(x.isSpace?h:0)+g,A=x.fontChar,D=x.accent,M=x.width;if(n){var C=x.vmetric||q;var X=x.vmetric?C[1]:.5*M;X=-X*r;var H=C[2]*r;M=C?-C[0]:M;C=X/f;H=(v+H)/f}else C=v/f,H=0;c.remeasure&&0<M&&(X=1E3*e.measureText(A).width/d*f,M<X&&this.isFontSubpixelAAEnabled?(X=M/X,y=!0,e.save(),e.scale(X,1),C/=X):M!==X&&(C+=(M-X)/2E3*d/f));if(x.isInFont||c.missingFile)u&&!D?e.fillText(A,C,H):(this.paintChar(A,C,
H),D&&(x=C+D.offset.x/f,A=H-D.offset.y/f,this.paintChar(D.fontChar,x,A)));v+=M*r+z*k;y&&e.restore()}}n?b.y-=v*l:b.x+=v*l;e.restore()}},showType3Text:function(a){var b=this.ctx,c=this.current,d=c.font,e=c.fontSize,f=c.fontDirection,g=d.vertical?1:-1,h=c.charSpacing,k=c.wordSpacing,l=c.textHScale*f,n=c.fontMatrix||r,p=a.length;if(c.textRenderingMode!==t.INVISIBLE&&0!==e){this.cachedGetSinglePixelWidth=null;b.save();b.transform.apply(b,c.textMatrix);b.translate(c.x,c.y);b.scale(l,f);for(f=0;f<p;++f){var q=
a[f];if(G(q))q=g*q*e/1E3,this.ctx.translate(q,0),c.x+=q*l;else{var v=(q.isSpace?k:0)+h,w=d.charProcOperatorList[q.operatorListId];w?(this.processingType3=q,this.save(),b.scale(e,e),b.transform.apply(b,n),this.executeOperatorList(w),this.restore(),q=y.applyTransform([q.width,0],n)[0]*e+v,b.translate(q,0),c.x+=q*l):m('Type3 character "'+q.operatorListId+'" is not available')}}b.restore();this.processingType3=null}},setCharWidth:function(a,b){},setCharWidthAndBounds:function(a,b,c,d,e,f){this.ctx.rect(c,
d,e-c,f-d);this.clip();this.endPath()},getColorN_Pattern:function(b){if("TilingPattern"===b[0]){var c=b[1],d=this.baseTransform||this.ctx.mozCurrentTransform.slice(),e=this;b=new x(b,c,this.ctx,{createCanvasGraphics:function(b){return new a(b,e.commonObjs,e.objs)}},d)}else b=D(b);return b},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=!0},setStrokeRGBColor:function(a,
b,c){a=y.makeCssRgb(a,b,c);this.ctx.strokeStyle=a;this.current.strokeColor=a},setFillRGBColor:function(a,b,c){a=y.makeCssRgb(a,b,c);this.ctx.fillStyle=a;this.current.fillColor=a;this.current.patternFill=!1},shadingFill:function(a){var b=this.ctx;this.save();a=D(a);b.fillStyle=a.getPattern(b,this,!0);var c=b.mozCurrentTransformInverse;if(c){b=b.canvas;var d=b.width,e=b.height;b=y.applyTransform([0,0],c);a=y.applyTransform([0,e],c);var f=y.applyTransform([d,0],c);c=y.applyTransform([d,e],c);d=Math.min(b[0],
a[0],f[0],c[0]);e=Math.min(b[1],a[1],f[1],c[1]);this.ctx.fillRect(d,e,Math.max(b[0],a[0],f[0],c[0])-d,Math.max(b[1],a[1],f[1],c[1])-e)}else this.ctx.fillRect(-1E10,-1E10,2E10,2E10);this.restore()},beginInlineImage:function(){I("Should not call beginInlineImage")},beginImageData:function(){I("Should not call beginImageData")},paintFormXObjectBegin:function(a,b){this.save();this.baseTransformStack.push(this.baseTransform);E(a)&&6===a.length&&this.transform.apply(this,a);this.baseTransform=this.ctx.mozCurrentTransform;
E(b)&&4===b.length&&(this.ctx.rect(b[0],b[1],b[2]-b[0],b[3]-b[1]),this.clip(),this.endPath())},paintFormXObjectEnd:function(){this.restore();this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(a){this.save();var b=this.ctx;a.isolated||C("TODO: Support non-isolated groups.");a.knockout&&m("Knockout groups not supported.");var c=b.mozCurrentTransform;a.matrix&&b.transform.apply(b,a.matrix);A(a.bbox,"Bounding box is required.");var e=y.getAxialAlignedBoundingBox(a.bbox,b.mozCurrentTransform);
e=y.intersect(e,[0,0,b.canvas.width,b.canvas.height])||[0,0,0,0];var f=Math.floor(e[0]),g=Math.floor(e[1]),h=Math.max(Math.ceil(e[2])-f,1),k=Math.max(Math.ceil(e[3])-g,1),l=e=1;4096<h&&(e=h/4096,h=4096);4096<k&&(l=k/4096,k=4096);var n="groupAt"+this.groupLevel;a.smask&&(n+="_smask_"+this.smaskCounter++%2);h=this.cachedCanvases.getCanvas(n,h,k,!0);k=h.context;k.scale(1/e,1/l);k.translate(-f,-g);k.transform.apply(k,c);a.smask?this.smaskStack.push({canvas:h.canvas,context:k,offsetX:f,offsetY:g,scaleX:e,
scaleY:l,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(b.setTransform(1,0,0,1,0,0),b.translate(f,g),b.scale(e,l));d(b,k);this.ctx=k;this.setGState([["BM","Normal"],["ca",1],["CA",1]]);this.groupStack.push(b);this.groupLevel++;this.current.activeSMask=null},endGroup:function(a){this.groupLevel--;var b=this.ctx;this.ctx=this.groupStack.pop();void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=
!1;a.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(b.canvas,0,0);this.restore()},beginAnnotations:function(){this.save();this.current=new fa;this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(a,b,c){this.save();E(a)&&4===a.length&&(this.ctx.rect(a[0],a[1],a[2]-a[0],a[3]-a[1]),this.clip(),this.endPath());this.transform.apply(this,b);this.transform.apply(this,c)},endAnnotation:function(){this.restore()},
paintJpegXObject:function(a,b,c){var d=this.objs.get(a);if(d){this.save();var e=this.ctx;e.scale(1/b,-1/c);e.drawImage(d,0,0,d.width,d.height,0,-c,b,c);this.imageLayer&&(d=e.mozCurrentTransformInverse,e=this.getCanvasPosition(0,0),this.imageLayer.appendImage({objId:a,left:e[0],top:e[1],width:b/d[0],height:c/d[3]}));this.restore()}else m("Dependent image isn't ready yet")},paintImageMaskXObject:function(a){var b=this.ctx,d=a.width,e=a.height,f=this.current.fillColor,g=this.current.patternFill,h=this.processingType3;
h&&void 0===h.compiled&&(h.compiled=1E3>=d&&1E3>=e?k({data:a.data,width:d,height:e}):null);h&&h.compiled?h.compiled(b):(b=this.cachedCanvases.getCanvas("maskCanvas",d,e),h=b.context,h.save(),c(h,a),h.globalCompositeOperation="source-in",h.fillStyle=g?f.getPattern(h,this):f,h.fillRect(0,0,d,e),h.restore(),this.paintInlineImageXObject(b.canvas))},paintImageMaskXObjectRepeat:function(a,b,d,e){var f=a.width,g=a.height,h=this.current.fillColor,k=this.current.patternFill,l=this.cachedCanvases.getCanvas("maskCanvas",
f,g),m=l.context;m.save();c(m,a);m.globalCompositeOperation="source-in";m.fillStyle=k?h.getPattern(m,this):h;m.fillRect(0,0,f,g);m.restore();a=this.ctx;h=0;for(k=e.length;h<k;h+=2)a.save(),a.transform(b,0,0,d,e[h],e[h+1]),a.scale(1,-1),a.drawImage(l.canvas,0,0,f,g,0,-1,1,1),a.restore()},paintImageMaskXObjectGroup:function(a){for(var b=this.ctx,d=this.current.fillColor,e=this.current.patternFill,f=0,g=a.length;f<g;f++){var h=a[f],k=h.width,l=h.height,m=this.cachedCanvases.getCanvas("maskCanvas",k,
l),n=m.context;n.save();c(n,h);n.globalCompositeOperation="source-in";n.fillStyle=e?d.getPattern(n,this):d;n.fillRect(0,0,k,l);n.restore();b.save();b.transform.apply(b,h.transform);b.scale(1,-1);b.drawImage(m.canvas,0,0,k,l,0,-1,1,1);b.restore()}},paintImageXObject:function(a){(a=this.objs.get(a))?this.paintInlineImageXObject(a):m("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(a,b,c,d){if(a=this.objs.get(a)){for(var e=a.width,f=a.height,g=[],h=0,k=d.length;h<k;h+=2)g.push({transform:[b,
0,0,c,d[h],d[h+1]],x:0,y:0,w:e,h:f});this.paintInlineImageXObjectGroup(a,g)}else m("Dependent image isn't ready yet")},paintInlineImageXObject:function(a){var c=a.width,d=a.height,e=this.ctx;this.save();e.scale(1/c,-1/d);var f=e.mozCurrentTransformInverse,g=f[0];var h=f[1];g=Math.max(Math.sqrt(g*g+h*h),1);h=f[2];var k=f[3];k=Math.max(Math.sqrt(h*h+k*k),1);if(a instanceof HTMLElement||!a.data)var l=a;else{var m=this.cachedCanvases.getCanvas("inlineImage",c,d);h=m.context;b(h,a);l=m.canvas}for(var n=
c,p=d,q="prescale1";2<g&&1<n||2<k&&1<p;){var r=n,t=p;2<g&&1<n&&(r=Math.ceil(n/2),g/=n/r);2<k&&1<p&&(t=Math.ceil(p/2),k/=p/t);m=this.cachedCanvases.getCanvas(q,r,t);h=m.context;h.clearRect(0,0,r,t);h.drawImage(l,0,0,n,p,0,0,r,t);l=m.canvas;n=r;p=t;q="prescale1"===q?"prescale2":"prescale1"}e.drawImage(l,0,0,n,p,0,-d,c,d);this.imageLayer&&(e=this.getCanvasPosition(0,-d),this.imageLayer.appendImage({imgData:a,left:e[0],top:e[1],width:c/f[0],height:d/f[3]}));this.restore()},paintInlineImageXObjectGroup:function(a,
c){var d=this.ctx,e=a.width,f=a.height,g=this.cachedCanvases.getCanvas("inlineImage",e,f);b(g.context,a);for(var h=0,k=c.length;h<k;h++){var l=c[h];d.save();d.transform.apply(d,l.transform);d.scale(1,-1);d.drawImage(g.canvas,l.x,l.y,l.w,l.h,0,-1,1,1);this.imageLayer&&(l=this.getCanvasPosition(l.x,l.y),this.imageLayer.appendImage({imgData:a,left:l[0],top:l[1],width:e,height:f}));d.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},paintXObject:function(){m("Unsupported 'paintXObject' command.")},
markPoint:function(a){},markPointProps:function(a,b){},beginMarkedContent:function(a){},beginMarkedContentProps:function(a,b){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var a=this.ctx;this.pendingClip&&(this.pendingClip===N?void 0!==a.mozFillRule?(a.mozFillRule="evenodd",a.clip(),a.mozFillRule="nonzero"):a.clip("evenodd"):a.clip(),this.pendingClip=null);a.beginPath()},getSinglePixelWidth:function(a){null===this.cachedGetSinglePixelWidth&&
(a=this.ctx.mozCurrentTransformInverse,this.cachedGetSinglePixelWidth=Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])));return this.cachedGetSinglePixelWidth},getCanvasPosition:function(a,b){var c=this.ctx.mozCurrentTransform;return[c[0]*a+c[2]*b+c[4],c[1]*a+c[3]*b+c[5]]}};for(var ra in v)a.prototype[v[ra]]=a.prototype[ra];return a}();c.CanvasGraphics=a;c.createScratchCanvas=g});(function(c,a){a(c.pdfjsDisplayAPI={},c.pdfjsSharedUtil,c.pdfjsDisplayFontLoader,c.pdfjsDisplayCanvas,c.pdfjsDisplayMetadata,
c.pdfjsDisplayDOMUtils)})(this,function(c,a,f,d,b,k,n){function g(a,b,c,d){if(a.destroyed)return Promise.reject(Error("Worker was destroyed"));b.disableAutoFetch=ba("disableAutoFetch");b.disableStream=ba("disableStream");b.chunkedViewerLoading=!!c;c&&(b.length=c.length,b.initialData=c.initialData);return a.messageHandler.sendWithPromise("GetDocRequest",{docId:d,source:b,disableRange:ba("disableRange"),maxImageSize:ba("maxImageSize"),cMapUrl:ba("cMapUrl"),cMapPacked:ba("cMapPacked"),disableFontFace:ba("disableFontFace"),
disableCreateObjectURL:ba("disableCreateObjectURL"),postMessageTransfers:ba("postMessageTransfers")&&!S}).then(function(b){if(a.destroyed)throw Error("Worker was destroyed");return b})}var l=a.InvalidPDFException,w=a.MessageHandler,z=a.MissingPDFException,v=a.PageViewport,t=a.PasswordResponses,q=a.PasswordException,y=a.StatTimer,A=a.UnexpectedResponseException,C=a.UnknownErrorException,G=a.Util,E=a.createPromiseCapability,F=a.error,I=a.deprecated,e=a.getVerbosityLevel,m=a.info,x=a.isArrayBuffer,D=
a.isSameOrigin,H=a.loadJpegStream,N=a.stringToBytes,ka=a.globalScope,aa=a.warn,Aa=f.FontFaceObject,fa=f.FontLoader,R=d.CanvasGraphics,X=d.createScratchCanvas,M=b.Metadata,ba=k.getDefaultSetting,ja=!1,ca,S=!1;a=!1;"undefined"===typeof window&&(ja=!0,"undefined"===typeof require.ensure&&(require.ensure=require("node-ensure")),a=!0);"undefined"!==typeof __webpack_require__&&(a=!0);"undefined"!==typeof requirejs&&requirejs.toUrl&&(ca=requirejs.toUrl("pdfjs-dist/build/pdf.worker.js"));f="undefined"!==
typeof requirejs&&requirejs.load;var oa=a?function(a){require.ensure([],function(){var b=require("./pdf.worker.js");a(b.WorkerMessageHandler)})}:f?function(a){requirejs(["pdfjs-dist/build/pdf.worker"],function(b){a(b.WorkerMessageHandler)})}:null,Ba=function(){function a(){this._capability=E();this._worker=this._transport=null;this.docId="d"+b++;this.destroyed=!1;this.onUnsupportedFeature=this.onProgress=this.onPassword=null}var b=0;a.prototype={get promise(){return this._capability.promise},destroy:function(){this.destroyed=
!0;return(this._transport?this._transport.destroy():Promise.resolve()).then(function(){this._transport=null;this._worker&&(this._worker.destroy(),this._worker=null)}.bind(this))},then:function(a,b){return this.promise.then.apply(this.promise,arguments)}};return a}(),La=function(){function a(a,b){this.length=a;this.initialData=b;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._readyCapability=E()}a.prototype={addRangeListener:function(a){this._rangeListeners.push(a)},
addProgressListener:function(a){this._progressListeners.push(a)},addProgressiveReadListener:function(a){this._progressiveReadListeners.push(a)},onDataRange:function(a,b){for(var c=this._rangeListeners,d=0,e=c.length;d<e;++d)c[d](a,b)},onDataProgress:function(a){this._readyCapability.promise.then(function(){for(var b=this._progressListeners,c=0,d=b.length;c<d;++c)b[c](a)}.bind(this))},onDataProgressiveRead:function(a){this._readyCapability.promise.then(function(){for(var b=this._progressiveReadListeners,
c=0,d=b.length;c<d;++c)b[c](a)}.bind(this))},transportReady:function(){this._readyCapability.resolve()},requestDataRange:function(a,b){throw Error("Abstract method PDFDataRangeTransport.requestDataRange");},abort:function(){}};return a}(),va=function(){function a(a,b,c){this.pdfInfo=a;this.transport=b;this.loadingTask=c}a.prototype={get numPages(){return this.pdfInfo.numPages},get fingerprint(){return this.pdfInfo.fingerprint},getPage:function(a){return this.transport.getPage(a)},getPageIndex:function(a){return this.transport.getPageIndex(a)},
getDestinations:function(){return this.transport.getDestinations()},getDestination:function(a){return this.transport.getDestination(a)},getPageLabels:function(){return this.transport.getPageLabels()},getAttachments:function(){return this.transport.getAttachments()},getJavaScript:function(){return this.transport.getJavaScript()},getOutline:function(){return this.transport.getOutline()},getMetadata:function(){return this.transport.getMetadata()},getData:function(){return this.transport.getData()},getDownloadInfo:function(){return this.transport.downloadInfoCapability.promise},
getStats:function(){return this.transport.getStats()},cleanup:function(){this.transport.startCleanup()},destroy:function(){return this.loadingTask.destroy()}};return a}(),ra=function(){function a(a,b,c){this.pageIndex=a;this.pageInfo=b;this.transport=c;this.stats=new y;this.stats.enabled=ba("enableStats");this.commonObjs=c.commonObjs;this.objs=new Ta;this.pendingCleanup=this.cleanupAfterRender=!1;this.intentStates=Object.create(null);this.destroyed=!1}a.prototype={get pageNumber(){return this.pageIndex+
1},get rotate(){return this.pageInfo.rotate},get ref(){return this.pageInfo.ref},get view(){return this.pageInfo.view},getViewport:function(a,b){2>arguments.length&&(b=this.rotate);return new v(this.view,a,b,0,0)},getAnnotations:function(a){a=a&&a.intent||null;this.annotationsPromise&&this.annotationsIntent===a||(this.annotationsPromise=this.transport.getAnnotations(this.pageIndex,a),this.annotationsIntent=a);return this.annotationsPromise},render:function(a){function b(a){var b=e.renderTasks.indexOf(f);
0<=b&&e.renderTasks.splice(b,1);g.cleanupAfterRender&&(g.pendingCleanup=!0);g._tryCleanup();a?f.capability.reject(a):f.capability.resolve();c.timeEnd("Rendering");c.timeEnd("Overall")}var c=this.stats;c.time("Overall");this.pendingCleanup=!1;var d="print"===a.intent?"print":"display";this.intentStates[d]||(this.intentStates[d]=Object.create(null));var e=this.intentStates[d];e.displayReadyCapability||(e.receivingOperatorList=!0,e.displayReadyCapability=E(),e.operatorList={fnArray:[],argsArray:[],lastChunk:!1},
this.stats.time("Page Request"),this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:d}));var f=new xa(b,a,this.objs,this.commonObjs,e.operatorList,this.pageNumber);f.useRequestAnimationFrame="print"!==d;e.renderTasks||(e.renderTasks=[]);e.renderTasks.push(f);d=f.task;a.continueCallback&&(I("render is used with continueCallback parameter"),d.onContinue=a.continueCallback);var g=this;e.displayReadyCapability.promise.then(function(a){g.pendingCleanup?b():(c.time("Rendering"),
f.initalizeGraphics(a),f.operatorListChanged())},function(a){b(a)});return d},getOperatorList:function(){function a(){if(b.operatorList.lastChunk){b.opListReadCapability.resolve(b.operatorList);var a=b.renderTasks.indexOf(c);0<=a&&b.renderTasks.splice(a,1)}}this.intentStates.oplist||(this.intentStates.oplist=Object.create(null));var b=this.intentStates.oplist;if(!b.opListReadCapability){var c={};c.operatorListChanged=a;b.receivingOperatorList=!0;b.opListReadCapability=E();b.renderTasks=[];b.renderTasks.push(c);
b.operatorList={fnArray:[],argsArray:[],lastChunk:!1};this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:"oplist"})}return b.opListReadCapability.promise},getTextContent:function(a){return this.transport.messageHandler.sendWithPromise("GetTextContent",{pageIndex:this.pageNumber-1,normalizeWhitespace:a&&a.normalizeWhitespace||!1})},_destroy:function(){this.destroyed=!0;this.transport.pageCache[this.pageIndex]=null;var a=[];Object.keys(this.intentStates).forEach(function(b){"oplist"!==
b&&this.intentStates[b].renderTasks.forEach(function(b){var c=b.capability.promise.catch(function(){});a.push(c);b.cancel()})},this);this.objs.clear();this.annotationsPromise=null;this.pendingCleanup=!1;return Promise.all(a)},destroy:function(){I("page destroy method, use cleanup() instead");this.cleanup()},cleanup:function(){this.pendingCleanup=!0;this._tryCleanup()},_tryCleanup:function(){this.pendingCleanup&&!Object.keys(this.intentStates).some(function(a){a=this.intentStates[a];return 0!==a.renderTasks.length||
a.receivingOperatorList},this)&&(Object.keys(this.intentStates).forEach(function(a){delete this.intentStates[a]},this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1)},_startRenderPage:function(a,b){b=this.intentStates[b];b.displayReadyCapability&&b.displayReadyCapability.resolve(a)},_renderPageChunk:function(a,b){b=this.intentStates[b];var c;var d=0;for(c=a.length;d<c;d++)b.operatorList.fnArray.push(a.fnArray[d]),b.operatorList.argsArray.push(a.argsArray[d]);b.operatorList.lastChunk=
a.lastChunk;for(d=0;d<b.renderTasks.length;d++)b.renderTasks[d].operatorListChanged();a.lastChunk&&(b.receivingOperatorList=!1,this._tryCleanup())}};return a}(),sb=function(){function a(){if("undefined"!==typeof ca)return ca;if(ba("workerSrc"))return ba("workerSrc");if(h)return h.replace(/\.js$/i,".worker.js");F("No PDFJS.workerSrc specified")}function b(){f||(f=E(),(oa||function(b){G.loadScript(a(),function(){b(window.pdfjsDistBuildPdfWorker.WorkerMessageHandler)})})(f.resolve));return f.promise}
function c(a){this.name=a;this.destroyed=!1;this._readyCapability=E();this._messageHandler=this._webWorker=this._port=null;this._initialize()}var d=0,f;c.prototype={get promise(){return this._readyCapability.promise},get port(){return this._port},get messageHandler(){return this._messageHandler},_initialize:function(){if(!ja&&!ba("disableWorker")&&"undefined"!==typeof Worker){var b=a();try{D(window.location.href,b)||(b=URL.createObjectURL(new Blob(["importScripts('"+(new URL(b,window.location)).href+
"');"])));var c=new Worker(b),d=new w("main","worker",c),f=function(){c.removeEventListener("error",g);d.destroy();c.terminate();this.destroyed?this._readyCapability.reject(Error("Worker was destroyed")):this._setupFakeWorker()}.bind(this),g=function(a){this._webWorker||f()}.bind(this);c.addEventListener("error",g);d.on("test",function(a){c.removeEventListener("error",g);this.destroyed?f():a&&a.supportTypedArray?(this._messageHandler=d,this._webWorker=this._port=c,a.supportTransfers||(S=!0),this._readyCapability.resolve(),
d.send("configure",{verbosity:e()})):(this._setupFakeWorker(),d.destroy(),c.terminate())}.bind(this));d.on("console_log",function(a){console.log.apply(console,a)});d.on("console_error",function(a){console.error.apply(console,a)});d.on("ready",function(a){c.removeEventListener("error",g);if(this.destroyed)f();else try{h()}catch(Pa){this._setupFakeWorker()}}.bind(this));var h=function(){var a=ba("postMessageTransfers")&&!S;a=new Uint8Array([a?255:0]);try{d.send("test",a,[a.buffer])}catch(Pa){m("Cannot use postMessage transfers"),
a[0]=0,d.send("test",a)}};h();return}catch(zb){m("The worker has been disabled.")}}this._setupFakeWorker()},_setupFakeWorker:function(){ja||ba("disableWorker")||(aa("Setting up fake worker."),ja=!0);b().then(function(a){if(this.destroyed)this._readyCapability.reject(Error("Worker was destroyed"));else{var b={_listeners:[],postMessage:function(a){var b={data:a};this._listeners.forEach(function(a){a.call(this,b)},this)},addEventListener:function(a,b){this._listeners.push(b)},removeEventListener:function(a,
b){a=this._listeners.indexOf(b);this._listeners.splice(a,1)},terminate:function(){}};this._port=b;var c="fake"+d++,e=new w(c+"_worker",c,b);a.setup(e,b);this._messageHandler=new w(c,c+"_worker",b);this._readyCapability.resolve()}}.bind(this))},destroy:function(){this.destroyed=!0;this._webWorker&&(this._webWorker.terminate(),this._webWorker=null);this._port=null;this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}};return c}(),wa=function(){function a(a,b,c){this.messageHandler=
a;this.loadingTask=b;this.pdfDataRangeTransport=c;this.commonObjs=new Ta;this.fontLoader=new fa(b.docId);this.destroyed=!1;this.destroyCapability=null;this.pageCache=[];this.pagePromises=[];this.downloadInfoCapability=E();this.setupMessageHandler()}a.prototype={destroy:function(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0;this.destroyCapability=E();var a=[];this.pageCache.forEach(function(b){b&&a.push(b._destroy())});this.pageCache=[];this.pagePromises=[];var b=
this,c=this.messageHandler.sendWithPromise("Terminate",null);a.push(c);Promise.all(a).then(function(){b.fontLoader.clear();b.pdfDataRangeTransport&&(b.pdfDataRangeTransport.abort(),b.pdfDataRangeTransport=null);b.messageHandler&&(b.messageHandler.destroy(),b.messageHandler=null);b.destroyCapability.resolve()},this.destroyCapability.reject);return this.destroyCapability.promise},setupMessageHandler:function(){function a(a){b.send("UpdatePassword",a)}var b=this.messageHandler,c=this.pdfDataRangeTransport;
c&&(c.addRangeListener(function(a,c){b.send("OnDataRange",{begin:a,chunk:c})}),c.addProgressListener(function(a){b.send("OnDataProgress",{loaded:a})}),c.addProgressiveReadListener(function(a){b.send("OnDataRange",{chunk:a})}),b.on("RequestDataRange",function(a){c.requestDataRange(a.begin,a.end)},this));b.on("GetDoc",function(a){var b=a.pdfInfo;this.numPages=a.pdfInfo.numPages;a=this.loadingTask;this.pdfDocument=b=new va(b,this,a);a._capability.resolve(b)},this);b.on("NeedPassword",function(b){var c=
this.loadingTask;if(c.onPassword)return c.onPassword(a,t.NEED_PASSWORD);c._capability.reject(new q(b.message,b.code))},this);b.on("IncorrectPassword",function(b){var c=this.loadingTask;if(c.onPassword)return c.onPassword(a,t.INCORRECT_PASSWORD);c._capability.reject(new q(b.message,b.code))},this);b.on("InvalidPDF",function(a){this.loadingTask._capability.reject(new l(a.message))},this);b.on("MissingPDF",function(a){this.loadingTask._capability.reject(new z(a.message))},this);b.on("UnexpectedResponse",
function(a){this.loadingTask._capability.reject(new A(a.message,a.status))},this);b.on("UnknownError",function(a){this.loadingTask._capability.reject(new C(a.message,a.details))},this);b.on("DataLoaded",function(a){this.downloadInfoCapability.resolve(a)},this);b.on("PDFManagerReady",function(a){this.pdfDataRangeTransport&&this.pdfDataRangeTransport.transportReady()},this);b.on("StartRenderPage",function(a){if(!this.destroyed){var b=this.pageCache[a.pageIndex];b.stats.timeEnd("Page Request");b._startRenderPage(a.transparency,
a.intent)}},this);b.on("RenderPageChunk",function(a){this.destroyed||this.pageCache[a.pageIndex]._renderPageChunk(a.operatorList,a.intent)},this);b.on("commonobj",function(a){if(!this.destroyed){var b=a[0],c=a[1];if(!this.commonObjs.hasData(b))switch(c){case "Font":a=a[2];if("error"in a){var d=a.error;aa("Error during font loading: "+d);this.commonObjs.resolve(b,d);break}else{d=null;ba("pdfBug")&&ka.FontInspector&&ka.FontInspector.enabled&&(d={registerFont:function(a,b){ka.FontInspector.fontAdded(a,
b)}});var e=new Aa(a,{isEvalSuported:ba("isEvalSupported"),disableFontFace:ba("disableFontFace"),fontRegistry:d})}this.fontLoader.bind([e],function(a){this.commonObjs.resolve(b,e)}.bind(this));break;case "FontPath":this.commonObjs.resolve(b,a[2]);break;default:d("Got unknown common object type "+c)}}},this);b.on("obj",function(a){if(!this.destroyed){var b=a[0],c=a[2],d=this.pageCache[a[1]];if(!d.objs.hasData(b))switch(c){case "JpegStream":a=a[3];H(b,a,d.objs);break;case "Image":a=a[3];d.objs.resolve(b,
a);a&&"data"in a&&8E6<a.data.length&&(d.cleanupAfterRender=!0);break;default:F("Got unknown object type "+c)}}},this);b.on("DocProgress",function(a){if(!this.destroyed){var b=this.loadingTask;if(b.onProgress)b.onProgress({loaded:a.loaded,total:a.total})}},this);b.on("PageError",function(a){if(!this.destroyed){var b=this.pageCache[a.pageNum-1].intentStates[a.intent];b.displayReadyCapability?b.displayReadyCapability.reject(a.error):F(a.error);if(b.operatorList)for(b.operatorList.lastChunk=!0,a=0;a<
b.renderTasks.length;a++)b.renderTasks[a].operatorListChanged()}},this);b.on("UnsupportedFeature",function(a){if(!this.destroyed){a=a.featureId;var b=this.loadingTask;if(b.onUnsupportedFeature)b.onUnsupportedFeature(a);na.notify(a)}},this);b.on("JpegDecode",function(a){if(this.destroyed)return Promise.reject("Worker was terminated");var b=a[0],c=a[1];return 3!==c&&1!==c?Promise.reject(Error("Only 3 components or 1 component can be returned")):new Promise(function(a,d){var e=new Image;e.onload=function(){var b=
e.width,d=e.height,f=b*d,g=4*f;f=new Uint8Array(f*c);var h=X(b,d).getContext("2d");h.drawImage(e,0,0);h=h.getImageData(0,0,b,d).data;var k,l;if(3===c)for(l=k=0;k<g;k+=4,l+=3)f[l]=h[k],f[l+1]=h[k+1],f[l+2]=h[k+2];else if(1===c)for(l=k=0;k<g;k+=4,l++)f[l]=h[k];a({data:f,width:b,height:d})};e.onerror=function(){d(Error("JpegDecode failed to load image"))};e.src=b})},this)},getData:function(){return this.messageHandler.sendWithPromise("GetData",null)},getPage:function(a,b){if(0>=a||a>this.numPages||(a|
0)!==a)return Promise.reject(Error("Invalid page request"));var c=a-1;if(c in this.pagePromises)return this.pagePromises[c];a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:c}).then(function(a){if(this.destroyed)throw Error("Transport destroyed");a=new ra(c,a,this);return this.pageCache[c]=a}.bind(this));return this.pagePromises[c]=a},getPageIndex:function(a){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:a})},getAnnotations:function(a,b){return this.messageHandler.sendWithPromise("GetAnnotations",
{pageIndex:a,intent:b})},getDestinations:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)},getDestination:function(a){return this.messageHandler.sendWithPromise("GetDestination",{id:a})},getPageLabels:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)},getAttachments:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)},getJavaScript:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)},getOutline:function(){return this.messageHandler.sendWithPromise("GetOutline",
null)},getMetadata:function(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(function(a){return{info:a[0],metadata:a[1]?new M(a[1]):null}})},getStats:function(){return this.messageHandler.sendWithPromise("GetStats",null)},startCleanup:function(){this.messageHandler.sendWithPromise("Cleanup",null).then(function(){for(var a=0,b=this.pageCache.length;a<b;a++){var c=this.pageCache[a];c&&c.cleanup()}this.commonObjs.clear();this.fontLoader.clear()}.bind(this))}};return a}(),Ta=function(){function a(){this.objs=
Object.create(null)}a.prototype={ensureObj:function(a){if(this.objs[a])return this.objs[a];var b={capability:E(),data:null,resolved:!1};return this.objs[a]=b},get:function(a,b){if(b)return this.ensureObj(a).capability.promise.then(b),null;(b=this.objs[a])&&b.resolved||F("Requesting object that isn't resolved yet "+a);return b.data},resolve:function(a,b){a=this.ensureObj(a);a.resolved=!0;a.data=b;a.capability.resolve(b)},isResolved:function(a){var b=this.objs;return b[a]?b[a].resolved:!1},hasData:function(a){return this.isResolved(a)},
getData:function(a){var b=this.objs;return b[a]&&b[a].resolved?b[a].data:null},clear:function(){this.objs=Object.create(null)}};return a}(),Xa=function(){function a(a){this._internalRenderTask=a;this.onContinue=null}a.prototype={get promise(){return this._internalRenderTask.capability.promise},cancel:function(){this._internalRenderTask.cancel()},then:function(a,b){return this.promise.then.apply(this.promise,arguments)}};return a}(),xa=function(){function a(a,b,c,d,e,f){this.callback=a;this.params=
b;this.objs=c;this.commonObjs=d;this.operatorListIdx=null;this.operatorList=e;this.pageNumber=f;this.running=!1;this.graphicsReadyCallback=null;this.cancelled=this.useRequestAnimationFrame=this.graphicsReady=!1;this.capability=E();this.task=new Xa(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this)}a.prototype={initalizeGraphics:function(a){if(!this.cancelled){ba("pdfBug")&&ka.StepperManager&&ka.StepperManager.enabled&&
(this.stepper=ka.StepperManager.create(this.pageNumber-1),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var b=this.params;this.gfx=new R(b.canvasContext,this.commonObjs,this.objs,b.imageLayer);this.gfx.beginDrawing(b.transform,b.viewport,a);this.operatorListIdx=0;this.graphicsReady=!0;this.graphicsReadyCallback&&this.graphicsReadyCallback()}},cancel:function(){this.running=!1;this.cancelled=!0;this.callback("cancelled")},operatorListChanged:function(){this.graphicsReady?
(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)},_continue:function(){this.running=!0;this.cancelled||(this.task.onContinue?this.task.onContinue.call(this.task,this._scheduleNextBound):this._scheduleNext())},_scheduleNext:function(){this.useRequestAnimationFrame&&"undefined"!==typeof window?window.requestAnimationFrame(this._nextBound):Promise.resolve(void 0).then(this._nextBound)},
_next:function(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this.callback())))}};return a}(),na=function(){var a=[];return{listen:function(b){I("Global UnsupportedManager.listen is used:  use PDFDocumentLoadingTask.onUnsupportedFeature instead");a.push(b)},notify:function(b){for(var c=
0,d=a.length;c<d;c++)a[c](b)}}}();c.version="1.5.188";c.build="0e2d50f";c.getDocument=function(a,b,c,d){var e=new Ba;1<arguments.length&&I("getDocument is called with pdfDataRangeTransport, passwordCallback or progressCallback argument");b&&(b instanceof La||(b=Object.create(b),b.length=a.length,b.initialData=a.initialData,b.abort||(b.abort=function(){})),a=Object.create(a),a.range=b);e.onPassword=c||null;e.onProgress=d||null;if("string"===typeof a)var f={url:a};else x(a)?f={data:a}:a instanceof La?
f={range:a}:("object"!==typeof a&&F("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object"),a.url||a.data||a.range||F("Invalid parameter object: need either .data, .range or .url"),f=a);var h={},k=null,l=null,m;for(m in f)if("url"===m&&"undefined"!==typeof window)h[m]=(new URL(f[m],window.location)).href;else if("range"===m)k=f[m];else if("worker"===m)l=f[m];else if("data"!==m||f[m]instanceof Uint8Array)h[m]=f[m];else{var n=f[m];"string"===typeof n?h[m]=N(n):"object"!==
typeof n||null===n||isNaN(n.length)?x(n)?h[m]=new Uint8Array(n):F("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property."):h[m]=new Uint8Array(n)}h.rangeChunkSize=h.rangeChunkSize||65536;l||(l=new sb,e._worker=l);var p=e.docId;l.promise.then(function(){if(e.destroyed)throw Error("Loading aborted");return g(l,h,k,p).then(function(a){if(e.destroyed)throw Error("Loading aborted");a=new w(p,a,l.port);var b=new wa(a,e,k);e._transport=b;a.send("Ready",
null)})}).catch(e._capability.reject);return e};c.PDFDataRangeTransport=La;c.PDFWorker=sb;c.PDFDocumentProxy=va;c.PDFPageProxy=ra;c._UnsupportedManager=na});(function(c,a){a(c.pdfjsDisplayGlobal={},c.pdfjsSharedUtil,c.pdfjsDisplayDOMUtils,c.pdfjsDisplayAPI,c.pdfjsDisplayAnnotationLayer,c.pdfjsDisplayTextLayer,c.pdfjsDisplayMetadata,c.pdfjsDisplaySVG)})(this,function(c,a,f,d,b,h,k,p){var g=a.globalScope,l=a.deprecated,n=a.warn,v=f.LinkTarget,t="undefined"===typeof window;g.PDFJS||(g.PDFJS={});var q=
g.PDFJS;q.version="1.5.188";q.build="0e2d50f";q.pdfBug=!1;void 0!==q.verbosity&&a.setVerbosityLevel(q.verbosity);delete q.verbosity;Object.defineProperty(q,"verbosity",{get:function(){return a.getVerbosityLevel()},set:function(b){a.setVerbosityLevel(b)},enumerable:!0,configurable:!0});q.VERBOSITY_LEVELS=a.VERBOSITY_LEVELS;q.OPS=a.OPS;q.UNSUPPORTED_FEATURES=a.UNSUPPORTED_FEATURES;q.isValidUrl=a.isValidUrl;q.shadow=a.shadow;q.createBlob=a.createBlob;q.createObjectURL=function(b,c){return a.createObjectURL(b,
c,q.disableCreateObjectURL)};Object.defineProperty(q,"isLittleEndian",{configurable:!0,get:function(){var b=a.isLittleEndian();return a.shadow(q,"isLittleEndian",b)}});q.removeNullCharacters=a.removeNullCharacters;q.PasswordResponses=a.PasswordResponses;q.PasswordException=a.PasswordException;q.UnknownErrorException=a.UnknownErrorException;q.InvalidPDFException=a.InvalidPDFException;q.MissingPDFException=a.MissingPDFException;q.UnexpectedResponseException=a.UnexpectedResponseException;q.Util=a.Util;
q.PageViewport=a.PageViewport;q.createPromiseCapability=a.createPromiseCapability;q.maxImageSize=void 0===q.maxImageSize?-1:q.maxImageSize;q.cMapUrl=void 0===q.cMapUrl?null:q.cMapUrl;q.cMapPacked=void 0===q.cMapPacked?!1:q.cMapPacked;q.disableFontFace=void 0===q.disableFontFace?!1:q.disableFontFace;q.imageResourcesPath=void 0===q.imageResourcesPath?"":q.imageResourcesPath;q.disableWorker=void 0===q.disableWorker?!1:q.disableWorker;q.workerSrc=void 0===q.workerSrc?null:q.workerSrc;q.disableRange=void 0===
q.disableRange?!1:q.disableRange;q.disableStream=void 0===q.disableStream?!1:q.disableStream;q.disableAutoFetch=void 0===q.disableAutoFetch?!1:q.disableAutoFetch;q.pdfBug=void 0===q.pdfBug?!1:q.pdfBug;q.postMessageTransfers=void 0===q.postMessageTransfers?!0:q.postMessageTransfers;q.disableCreateObjectURL=void 0===q.disableCreateObjectURL?!1:q.disableCreateObjectURL;q.disableWebGL=void 0===q.disableWebGL?!0:q.disableWebGL;q.externalLinkTarget=void 0===q.externalLinkTarget?v.NONE:q.externalLinkTarget;
q.externalLinkRel=void 0===q.externalLinkRel?"noreferrer":q.externalLinkRel;q.isEvalSupported=void 0===q.isEvalSupported?!0:q.isEvalSupported;var y=q.openExternalLinksInNewWindow;delete q.openExternalLinksInNewWindow;Object.defineProperty(q,"openExternalLinksInNewWindow",{get:function(){return q.externalLinkTarget===v.BLANK},set:function(a){a&&l('PDFJS.openExternalLinksInNewWindow, please use "PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK" instead.');q.externalLinkTarget!==v.NONE?n("PDFJS.externalLinkTarget is already initialized"):
q.externalLinkTarget=a?v.BLANK:v.NONE},enumerable:!0,configurable:!0});y&&(q.openExternalLinksInNewWindow=y);q.getDocument=d.getDocument;q.PDFDataRangeTransport=d.PDFDataRangeTransport;q.PDFWorker=d.PDFWorker;Object.defineProperty(q,"hasCanvasTypedArrays",{configurable:!0,get:function(){var b=f.hasCanvasTypedArrays();return a.shadow(q,"hasCanvasTypedArrays",b)}});q.CustomStyle=f.CustomStyle;q.LinkTarget=v;q.addLinkAttributes=f.addLinkAttributes;q.getFilenameFromUrl=f.getFilenameFromUrl;q.isExternalLinkTargetSet=
f.isExternalLinkTargetSet;q.AnnotationLayer=b.AnnotationLayer;q.renderTextLayer=h.renderTextLayer;q.Metadata=k.Metadata;q.SVGGraphics=p.SVGGraphics;q.UnsupportedManager=d._UnsupportedManager;c.globalScope=g;c.isWorker=t;c.PDFJS=g.PDFJS})}).call(c);k.PDFJS=c.pdfjsDisplayGlobal.PDFJS;k.build=c.pdfjsDisplayAPI.build;k.version=c.pdfjsDisplayAPI.version;k.getDocument=c.pdfjsDisplayAPI.getDocument;k.PDFDataRangeTransport=c.pdfjsDisplayAPI.PDFDataRangeTransport;k.PDFWorker=c.pdfjsDisplayAPI.PDFWorker;k.renderTextLayer=
c.pdfjsDisplayTextLayer.renderTextLayer;k.AnnotationLayer=c.pdfjsDisplayAnnotationLayer.AnnotationLayer;k.CustomStyle=c.pdfjsDisplayDOMUtils.CustomStyle;k.PasswordResponses=c.pdfjsSharedUtil.PasswordResponses;k.InvalidPDFException=c.pdfjsSharedUtil.InvalidPDFException;k.MissingPDFException=c.pdfjsSharedUtil.MissingPDFException;k.SVGGraphics=c.pdfjsDisplaySVG.SVGGraphics;k.UnexpectedResponseException=c.pdfjsSharedUtil.UnexpectedResponseException;k.OPS=c.pdfjsSharedUtil.OPS;k.UNSUPPORTED_FEATURES=c.pdfjsSharedUtil.UNSUPPORTED_FEATURES;
k.isValidUrl=c.pdfjsSharedUtil.isValidUrl;k.createObjectURL=c.pdfjsSharedUtil.createObjectURL;k.removeNullCharacters=c.pdfjsSharedUtil.removeNullCharacters;k.shadow=c.pdfjsSharedUtil.shadow;k.createBlob=c.pdfjsSharedUtil.createBlob;k.getFilenameFromUrl=c.pdfjsDisplayDOMUtils.getFilenameFromUrl;k.addLinkAttributes=c.pdfjsDisplayDOMUtils.addLinkAttributes});(function(k){k(CodeMirror)})(function(k){var h=/^(\s*)(>[> ]*|[*+-]\s|(\d+)([.)]))(\s*)/,c=/^(\s*)(>[> ]*|[*+-]|(\d+)[.)])(\s*)$/,g=/[*+-]\s/;k.commands.newlineAndIndentContinueMarkdownList=function(a){if(a.getOption("disableInput"))return k.Pass;for(var f=a.listSelections(),d=[],b=0;b<f.length;b++){var l=f[b].head,n=a.getStateAfter(l.line),p=!1!==n.list,r=0!==n.quote,w=a.getLine(l.line);n=h.exec(w);if(!f[b].empty()||!p&&!r||!n){a.execCommand("newlineAndIndent");return}c.test(w)?(a.replaceRange("",
{line:l.line,ch:0},{line:l.line,ch:l.ch+1}),d[b]="\n"):(l=n[1],p=n[5],n=g.test(n[2])||0<=n[2].indexOf(">")?n[2]:parseInt(n[3],10)+1+n[4],d[b]="\n"+l+n+p)}a.replaceSelections(d)}});(function(k){"object"==typeof exports&&"object"==typeof module?k(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],k):k(CodeMirror)})(function(k){var h={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,
dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,
caseFold:!0},c={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};k.defineMode("xml",function(g,a){function f(a,b){function c(c){b.tokenize=c;return c(a,b)}var e=a.next();if("<"==e){if(a.eat("!"))return a.eat("[")?a.match("CDATA[")?c(l("atom","]]\x3e")):null:a.match("--")?c(l("comment","--\x3e")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),c(n(1))):null;if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),b.tokenize=
l("meta","?>"),"meta";m=a.eat("/")?"closeTag":"openTag";b.tokenize=d;return"tag bracket"}if("&"==e)return(a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"))?"atom":"error";a.eatWhile(/[^&<]/);return null}function d(a,c){var d=a.next();if(">"==d||"/"==d&&a.eat(">"))return c.tokenize=f,m=">"==d?"endTag":"selfcloseTag","tag bracket";if("="==d)return m="equals",null;if("<"==d)return c.tokenize=f,c.state=z,c.tagName=c.tagStart=
null,(a=c.tokenize(a,c))?a+" tag error":"tag error";if(/[\'\"]/.test(d))return c.tokenize=b(d),c.stringStartCol=a.column(),c.tokenize(a,c);a.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}function b(a){var b=function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=d;break}return"string"};b.isInAttribute=!0;return b}function l(a,b){return function(c,d){for(;!c.eol();){if(c.match(b)){d.tokenize=f;break}c.next()}return a}}function n(a){return function(b,c){for(var d;null!=(d=b.next());){if("<"==
d)return c.tokenize=n(a+1),c.tokenize(b,c);if(">"==d)if(1==a){c.tokenize=f;break}else return c.tokenize=n(a-1),c.tokenize(b,c)}return"meta"}}function p(a,b,c){this.prev=a.context;this.tagName=b;this.indent=a.indented;this.startOfLine=c;if(I.doNotIndent.hasOwnProperty(b)||a.context&&a.context.noIndent)this.noIndent=!0}function r(a){a.context&&(a.context=a.context.prev)}function w(a,b){for(var c;a.context;){c=a.context.tagName;if(!I.contextGrabbers.hasOwnProperty(c)||!I.contextGrabbers[c].hasOwnProperty(b))break;
r(a)}}function z(a,b,c){return"openTag"==a?(c.tagStart=b.column(),v):"closeTag"==a?t:z}function v(a,b,c){if("word"==a)return c.tagName=b.current(),x="tag",A;if(I.allowMissingTagName&&"endTag"==a)return x="tag bracket",A(a,b,c);x="error";return v}function t(a,b,c){if("word"==a){a=b.current();c.context&&c.context.tagName!=a&&I.implicitlyClosed.hasOwnProperty(c.context.tagName)&&r(c);if(c.context&&c.context.tagName==a||!1===I.matchClosing)return x="tag",q;x="tag error";return y}if(I.allowMissingTagName&&
"endTag"==a)return x="tag bracket",q(a,b,c);x="error";return y}function q(a,b,c){if("endTag"!=a)return x="error",q;r(c);return z}function y(a,b,c){x="error";return q(a,b,c)}function A(a,b,c){if("word"==a)return x="attribute",C;if("endTag"==a||"selfcloseTag"==a){b=c.tagName;var d=c.tagStart;c.tagName=c.tagStart=null;"selfcloseTag"==a||I.autoSelfClosers.hasOwnProperty(b)?w(c,b):(w(c,b),c.context=new p(c,b,d==c.indented));return z}x="error";return A}function C(a,b,c){if("equals"==a)return G;I.allowMissing||
(x="error");return A(a,b,c)}function G(a,b,c){if("string"==a)return E;if("word"==a&&I.allowUnquoted)return x="string",A;x="error";return A(a,b,c)}function E(a,b,c){return"string"==a?E:A(a,b,c)}var F=g.indentUnit,I={};g=a.htmlMode?h:c;for(var e in g)I[e]=g[e];for(e in a)I[e]=a[e];var m,x;f.isInText=!0;return{startState:function(a){var b={tokenize:f,state:z,indented:a||0,tagName:null,tagStart:null,context:null};null!=a&&(b.baseIndent=a);return b},token:function(a,b){!b.tagName&&a.sol()&&(b.indented=
a.indentation());if(a.eatSpace())return null;m=null;var c=b.tokenize(a,b);(c||m)&&"comment"!=c&&(x=null,b.state=b.state(m||c,a,b),x&&(c="error"==x?c+" error":x));return c},indent:function(a,b,c){var e=a.context;if(a.tokenize.isInAttribute)return a.tagStart==a.indented?a.stringStartCol+1:a.indented+F;if(e&&e.noIndent)return k.Pass;if(a.tokenize!=d&&a.tokenize!=f)return c?c.match(/^(\s*)/)[0].length:0;if(a.tagName)return!1!==I.multilineTagIndentPastTag?a.tagStart+a.tagName.length+2:a.tagStart+F*(I.multilineTagIndentFactor||
1);if(I.alignCDATA&&/<!\[CDATA\[/.test(b))return 0;if((b=b&&/^<(\/)?([\w_:\.-]*)/.exec(b))&&b[1])for(;e;)if(e.tagName==b[2]){e=e.prev;break}else if(I.implicitlyClosed.hasOwnProperty(e.tagName))e=e.prev;else break;else if(b)for(;e;)if((c=I.contextGrabbers[e.tagName])&&c.hasOwnProperty(b[2]))e=e.prev;else break;for(;e&&e.prev&&!e.startOfLine;)e=e.prev;return e?e.indent+F:a.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:I.htmlMode?"html":
"xml",helperType:I.htmlMode?"html":"xml",skipAttribute:function(a){a.state==G&&(a.state=A)}}});k.defineMIME("text/xml","xml");k.defineMIME("application/xml","xml");k.mimeModes.hasOwnProperty("text/html")||k.defineMIME("text/html",{name:"xml",htmlMode:!0})});(function(k){k(CodeMirror)})(function(k){k.defineMode("markdown",function(h,c){function g(a,b,c){b.f=b.inline=c;return c(a,b)}function a(a){return!a||!/\S/.test(a.string)}function f(a){a.linkTitle=!1;a.em=!1;a.strong=!1;a.strikethrough=!1;a.quote=0;a.indentedCode=!1;G||a.f!=b||(a.f=w,a.block=d);a.trailingSpace=0;a.trailingSpaceNewLine=!1;a.prevLine=a.thisLine;return a.thisLine=null}function d(b,d){var e=b.sol(),f=!1!==d.list,n=d.indentedCode;d.indentedCode=!1;f&&(0<=d.indentationDiff?(4>d.indentationDiff&&
(d.indentation-=d.indentationDiff),d.list=null):0<d.indentation?(d.list=null,d.listDepth=Math.floor(d.indentation/4)):(d.list=!1,d.listDepth=0));var r=null;if(4<=d.indentationDiff)return b.skipToEnd(),n||a(d.prevLine)?(d.indentation-=4,d.indentedCode=!0,I.code):null;if(b.eatSpace())return null;if((r=b.match(N))&&6>=r[1].length)return d.header=r[1].length,c.highlightFormatting&&(d.formatting="header"),d.f=d.inline,p(d);if(a(d.prevLine)||d.quote||f||n||!(r=b.match(ka))){if(b.eat(">"))return d.quote=
e?1:d.quote+1,c.highlightFormatting&&(d.formatting="quote"),b.eatSpace(),p(d);if("["===b.peek())return g(b,d,q);if(b.match(m,!0))return d.hr=!0,I.hr;if((a(d.prevLine)||f)&&(b.match(x,!1)||b.match(D,!1)))return b.match(x,!0)?e="ul":(b.match(D,!0),e="ol"),d.indentation=b.column()+b.current().length,d.list=!0,d.listDepth++,c.taskLists&&b.match(H,!1)&&(d.taskList=!0),d.f=d.inline,c.highlightFormatting&&(d.formatting=["list","list-"+e]),p(d);if(c.fencedCodeBlocks&&(r=b.match(Aa,!0)))return d.fencedChars=
r[1],b=r[2],k.findModeByName&&(e=k.findModeByName(b))&&(b=e.mime||e.mimes[0]),b=k.getMode(h,b),d.localMode="null"==b.name?null:b,d.localMode&&(d.localState=d.localMode.startState()),d.f=d.block=l,c.highlightFormatting&&(d.formatting="code-block"),d.code=!0,p(d)}else return d.header="="==r[0].charAt(0)?1:2,c.highlightFormatting&&(d.formatting="header"),d.f=d.inline,p(d);return g(b,d,d.inline)}function b(a,b){var c=E.token(a,b.htmlState);if(G&&null===b.htmlState.tagStart&&!b.htmlState.context&&b.htmlState.tokenize.isInText||
b.md_inside&&-1<a.current().indexOf(">"))b.f=w,b.block=d,b.htmlState=null;return c}function l(a,b){if(a.sol()&&b.fencedChars&&a.match(b.fencedChars,!1))return b.localMode=b.localState=null,b.f=b.block=n,null;if(b.localMode)return b.localMode.token(a,b.localState);a.skipToEnd();return I.code}function n(a,b){a.match(b.fencedChars);b.block=d;b.f=w;b.fencedChars=null;c.highlightFormatting&&(b.formatting="code-block");b.code=!0;a=p(b);b.code=!1;return a}function p(a){var b=[];if(a.formatting){b.push(I.formatting);
"string"===typeof a.formatting&&(a.formatting=[a.formatting]);for(var d=0;d<a.formatting.length;d++)b.push(I.formatting+"-"+a.formatting[d]),"header"===a.formatting[d]&&b.push(I.formatting+"-"+a.formatting[d]+"-"+a.header),"quote"===a.formatting[d]&&(!c.maxBlockquoteDepth||c.maxBlockquoteDepth>=a.quote?b.push(I.formatting+"-"+a.formatting[d]+"-"+a.quote):b.push("error"))}if(a.taskOpen)return b.push("meta"),b.length?b.join(" "):null;if(a.taskClosed)return b.push("property"),b.length?b.join(" "):null;
a.linkHref?b.push(I.linkHref,"url"):(a.strong&&b.push(I.strong),a.em&&b.push(I.em),a.strikethrough&&b.push(I.strikethrough),a.linkText&&b.push(I.linkText),a.code&&b.push(I.code));a.header&&b.push(I.header,I.header+"-"+a.header);a.quote&&(b.push(I.quote),!c.maxBlockquoteDepth||c.maxBlockquoteDepth>=a.quote?b.push(I.quote+"-"+a.quote):b.push(I.quote+"-"+c.maxBlockquoteDepth));!1!==a.list&&((d=(a.listDepth-1)%3)?1===d?b.push(I.list2):b.push(I.list3):b.push(I.list1));a.trailingSpaceNewLine?b.push("trailing-space-new-line"):
a.trailingSpace&&b.push("trailing-space-"+(a.trailingSpace%2?"a":"b"));return b.length?b.join(" "):null}function r(a,b){if(a.match(aa,!0))return p(b)}function w(a,d){var e=d.text(a,d);if("undefined"!==typeof e)return e;if(d.list)return d.list=null,p(d);if(d.taskList)return"x"!==a.match(H,!0)[1]?d.taskOpen=!0:d.taskClosed=!0,c.highlightFormatting&&(d.formatting="task"),d.taskList=!1,p(d);d.taskOpen=!1;d.taskClosed=!1;if(d.header&&a.match(/^#+$/,!0))return c.highlightFormatting&&(d.formatting="header"),
p(d);e=a.sol();var f=a.next();if("\\"===f&&(a.next(),c.highlightFormatting))return a=p(d),d=I.formatting+"-escape",a?a+" "+d:d;if(d.linkTitle){d.linkTitle=!1;var g=f;"("===f&&(g=")");g=(g+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");if(a.match(new RegExp("^\\s*(?:[^"+g+"\\\\]+|\\\\\\\\|\\\\.)"+g),!0))return I.linkHref}if("`"===f){f=d.formatting;c.highlightFormatting&&(d.formatting="code");e=p(d);g=a.pos;a.eatWhile("`");a=1+a.pos-g;if(d.code){if(a===F)return d.code=!1,e;d.formatting=f}else F=a,d.code=
!0;return p(d)}if(d.code)return p(d);if("!"===f&&a.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return a.match(/\[[^\]]*\]/),d.inline=d.f=v,I.image;if("["===f&&a.match(/.*\](\(.*\)| ?\[.*\])/,!1))return d.linkText=!0,c.highlightFormatting&&(d.formatting="link"),p(d);if("]"===f&&d.linkText&&a.match(/\(.*\)| ?\[.*\]/,!1))return c.highlightFormatting&&(d.formatting="link"),a=p(d),d.linkText=!1,d.inline=d.f=v,a;if("<"===f&&a.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return d.f=d.inline=z,c.highlightFormatting&&
(d.formatting="link"),a=p(d),(a?a+" ":"")+I.linkInline;if("<"===f&&a.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return d.f=d.inline=z,c.highlightFormatting&&(d.formatting="link"),a=p(d),(a?a+" ":"")+I.linkEmail;if("<"===f&&a.match(/^(!--|\w)/,!1))return e=a.string.indexOf(">",a.pos),-1!=e&&(e=a.string.substring(a.start,e),/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(e)&&(d.md_inside=!0)),a.backUp(1),d.htmlState=k.startState(E),e=b,d.f=d.block=e,e(a,d);if("<"===f&&a.match(/^\/\w*?>/))return d.md_inside=
!1,"tag";g=!1;if(!c.underscoresBreakWords&&"_"===f&&"_"!==a.peek()&&a.match(/(\w)/,!1)){var h=a.pos-2;0<=h&&(h=a.string.charAt(h),"_"!==h&&h.match(/(\w)/,!1)&&(g=!0))}if("*"===f||"_"===f&&!g){if(!e||" "!==a.peek()){if(d.strong===f&&a.eat(f))return c.highlightFormatting&&(d.formatting="strong"),e=p(d),d.strong=!1,e;if(!d.strong&&a.eat(f))return d.strong=f,c.highlightFormatting&&(d.formatting="strong"),p(d);if(d.em===f)return c.highlightFormatting&&(d.formatting="em"),e=p(d),d.em=!1,e;if(!d.em)return d.em=
f,c.highlightFormatting&&(d.formatting="em"),p(d)}}else if(" "===f&&(a.eat("*")||a.eat("_"))){if(" "===a.peek())return p(d);a.backUp(1)}if(c.strikethrough)if("~"===f&&a.eatWhile(f)){if(d.strikethrough)return c.highlightFormatting&&(d.formatting="strikethrough"),e=p(d),d.strikethrough=!1,e;if(a.match(/^[^\s]/,!1))return d.strikethrough=!0,c.highlightFormatting&&(d.formatting="strikethrough"),p(d)}else if(" "===f&&a.match(/^~~/,!0)){if(" "===a.peek())return p(d);a.backUp(2)}" "===f&&(a.match(/ +$/,
!1)?d.trailingSpace++:d.trailingSpace&&(d.trailingSpaceNewLine=!0));return p(d)}function z(a,b){if(">"===a.next())return b.f=b.inline=w,c.highlightFormatting&&(b.formatting="link"),a=p(b),(a?a+" ":"")+I.linkInline;a.match(/^[^>]+/,!0);return I.linkInline}function v(a,b){if(a.eatSpace())return null;a=a.next();return"("===a||"["===a?(b.f=b.inline=t("("===a?")":"]"),c.highlightFormatting&&(b.formatting="link-string"),b.linkHref=!0,p(b)):"error"}function t(a){return function(b,d){if(b.next()===a)return d.f=
d.inline=w,c.highlightFormatting&&(d.formatting="link-string"),b=p(d),d.linkHref=!1,b;b.match(C(a),!0)&&b.backUp(1);d.linkHref=!0;return p(d)}}function q(a,b){return a.match(/^[^\]]*\]:/,!1)?(b.f=y,a.next(),c.highlightFormatting&&(b.formatting="link"),b.linkText=!0,p(b)):g(a,b,w)}function y(a,b){if(a.match(/^\]:/,!0))return b.f=b.inline=A,c.highlightFormatting&&(b.formatting="link"),a=p(b),b.linkText=!1,a;a.match(/^[^\]]+/,!0);return I.linkText}function A(a,b){if(a.eatSpace())return null;a.match(/^[^\s]+/,
!0);void 0===a.peek()?b.linkTitle=!0:a.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0);b.f=b.inline=w;return I.linkHref+" url"}function C(a){fa[a]||(a=(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),fa[a]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+a+")"));return fa[a]}var G=k.modes.hasOwnProperty("xml"),E=k.getMode(h,G?{name:"xml",htmlMode:!0}:"text/plain");void 0===c.highlightFormatting&&(c.highlightFormatting=!1);void 0===c.maxBlockquoteDepth&&(c.maxBlockquoteDepth=
0);void 0===c.underscoresBreakWords&&(c.underscoresBreakWords=!0);void 0===c.taskLists&&(c.taskLists=!1);void 0===c.strikethrough&&(c.strikethrough=!1);void 0===c.tokenTypeOverrides&&(c.tokenTypeOverrides={});var F=0,I={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"tag",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough"},e;for(e in I)I.hasOwnProperty(e)&&
c.tokenTypeOverrides[e]&&(I[e]=c.tokenTypeOverrides[e]);var m=/^([*\-_])(?:\s*\1){2,}\s*$/,x=/^[*\-+]\s+/,D=/^[0-9]+([.)])\s+/,H=/^\[(x| )\](?=\s)/,N=c.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,ka=/^ *(?:\={1,}|-{1,})\s*$/,aa=/^[^#!\[\]*_\\<>` "'(~]+/,Aa=new RegExp("^("+(!0===c.fencedCodeBlocks?"~~~+|```+":c.fencedCodeBlocks)+")[ \\t]*([\\w+#]*)"),fa=[],R={startState:function(){return{f:d,prevLine:null,thisLine:null,block:d,htmlState:null,indentation:0,inline:w,text:r,formatting:!1,linkText:!1,
linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(a){return{f:a.f,prevLine:a.prevLine,thisLine:a.this,block:a.block,htmlState:a.htmlState&&k.copyState(E,a.htmlState),indentation:a.indentation,localMode:a.localMode,localState:a.localMode?k.copyState(a.localMode,a.localState):null,inline:a.inline,text:a.text,formatting:!1,linkTitle:a.linkTitle,code:a.code,em:a.em,
strong:a.strong,strikethrough:a.strikethrough,header:a.header,hr:a.hr,taskList:a.taskList,list:a.list,listDepth:a.listDepth,quote:a.quote,indentedCode:a.indentedCode,trailingSpace:a.trailingSpace,trailingSpaceNewLine:a.trailingSpaceNewLine,md_inside:a.md_inside,fencedChars:a.fencedChars}},token:function(a,b){b.formatting=!1;if(a!=b.thisLine){var c=b.header||b.hr;b.header=0;b.hr=!1;if(a.match(/^\s*$/,!0)||c){f(b);if(!c)return null;b.prevLine=null}b.prevLine=b.thisLine;b.thisLine=a;b.taskList=!1;b.trailingSpace=
0;b.trailingSpaceNewLine=!1;b.f=b.block;c=a.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;var d=4*Math.floor((c-b.indentation)/4);4<d&&(d=4);d=b.indentation+d;b.indentationDiff=d-b.indentation;b.indentation=d;if(0<c)return null}return b.f(a,b)},innerMode:function(a){return a.block==b?{state:a.htmlState,mode:E}:a.localState?{state:a.localState,mode:a.localMode}:{state:a,mode:R}},blankLine:f,getType:p,fold:"markdown"};return R},"xml");k.defineMIME("text/x-markdown","markdown")});
